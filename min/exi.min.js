function DataAdapter(a) {
    this.async = !0, this.url = null, this.token = null, this.proposal = null, this.username = null, 
    this.onSuccess = new Event(this), this.onError = new Event(this), null != a && (null != a.username && (this.username = a.username), 
    null != a.async && (this.async = a.async), null != a.onSuccess && this.onSuccess.attach(a.onSuccess), 
    null != a.onError && this.onError.attach(a.onError), null != a.url && (this.url = a.url), 
    null != a.token && (this.token = a.token), null != a.proposal && (this.proposal = a.proposal));
}

function Event(a) {
    this._sender = a, this._listeners = [];
}

function ExiDataAdapter(a) {
    this.async = !0, this.onSuccess = new Event(this), this.onError = new Event(this), 
    null != a && (null != a.async && (this.async = a.async), null != a.onSuccess && this.onSuccess.attach(a.onSuccess), 
    null != a.onError && this.onError.attach(a.onError));
}

function ExiDataAdapterGroup(a) {
    this.offline = new ExiDataAdapter(a);
}

function AutoProcIntegrationDataAdapter(a) {
    DataAdapter.call(this, a);
}

function CrystalDataAdapter(a) {
    DataAdapter.call(this, a);
}

function DataCollectionDataAdapter(a) {
    DataAdapter.call(this, a);
}

function MxDataAdapterFactory(a) {
    this.proposal = new ProposalDataAdapterGroup(a), this.mx = new MxDataAdapterGroup(a), 
    this.saxs = new SaxsDataAdapterGroup(a), this.exi = new ExiDataAdapterGroup(a);
}

function MxDataAdapterGroup(a) {
    this.autoProcIntegrationDataAdapter = new AutoProcIntegrationDataAdapter(a), this.dataCollection = new DataCollectionDataAdapter(a), 
    this.crystal = new CrystalDataAdapter(a), this.protein = new ProteinDataAdapter(a), 
    this.workflowStepDataAdapter = new WorkflowStepDataAdapter(a);
}

function ProteinDataAdapter(a) {
    DataAdapter.call(this, a);
}

function WorkflowStepDataAdapter(a) {
    DataAdapter.call(this, a);
}

function DataAdapterFactory(a) {
    this.proposal = new ProposalDataAdapterGroup(a);
}

function DewarDataAdapter(a) {
    DataAdapter.call(this, a);
}

function LabcontactDataAdapter(a) {
    DataAdapter.call(this, a);
}

function ProposalDataAdapter(a) {
    DataAdapter.call(this, a);
}

function ProposalDataAdapterGroup(a) {
    this.authentication = new AuthenticationDataAdapter(a), this.dewar = new DewarDataAdapter(a), 
    this.proposal = new ProposalDataAdapter(a), this.shipping = new ShippingDataAdapter(a), 
    this.session = new SessionDataAdapter(a), this.labcontacts = new LabcontactDataAdapter(a);
}

function SessionDataAdapter(a) {
    DataAdapter.call(this, a);
}

function ShippingDataAdapter(a) {
    DataAdapter.call(this, a);
}

function ProposalManager() {}

function BufferSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function DataCollectionSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function Experiment(a) {
    this.json = a, this.onSaved = new Event(this), this.onError = new Event(this), this.name = a.name, 
    this.experimentId = a.experimentId, this.creationDate = a.creationDate, this.onPlateSaved = new Event(this), 
    this.bufferColors = $.extend({}, EXI.proposalManager.getBufferColors()), this.specimenBuffersColors = this.getSpecimenColors();
    for (var b in this.bufferColors) this.bufferColors[b] = "black";
    this.setMacromoleculesColors();
}

function ExperimentList(a) {
    this.experiments = a, this.macromoleculeColors = {};
    for (var b = 0; b < a.length; b++) this.macromoleculeColors = $.extend({}, this.macromoleculeColors, a[b].macromoleculeColors);
}

function ExperimentSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function FrameSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function HPLCSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function MacromoleculeSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function MeasurementSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function ModelSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function SaxsDataAdapterFactory(a) {
    this.proposal = new ProposalDataAdapterGroup(a), this.mx = new MxDataAdapterGroup(a), 
    this.saxs = new SaxsDataAdapterGroup(a), this.exi = new ExiDataAdapterGroup(a);
}

function SaxsDataAdapterGroup(a) {
    this.experiment = new ExperimentSaxsDataAdapter(a), this.buffer = new BufferSaxsDataAdapter(a), 
    this.macromolecule = new MacromoleculeSaxsDataAdapter(a), this.hplc = new HPLCSaxsDataAdapter(a), 
    this.measurement = new MeasurementSaxsDataAdapter(a), this.specimen = new SpecimenSaxsDataAdapter(a), 
    this.stockSolution = new StockSolutionSaxsDataAdapter(a), this.subtraction = new SubtractionSaxsDataAdapter(a), 
    this.dataCollection = new DataCollectionSaxsDataAdapter(a), this.template = new TemplateSaxsDataAdapter(a), 
    this.frame = new FrameSaxsDataAdapter(a), this.model = new ModelSaxsDataAdapter(a);
}

function SpecimenSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function StockSolutionSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function SubtractionSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function TemplateSaxsDataAdapter(a) {
    DataAdapter.call(this, a);
}

function AuthenticationDataAdapter(a) {
    DataAdapter.call(this, a);
}

function AuthenticationManager() {
    this.onSuccess = new Event(this), this.onError = new Event(this);
}

function Exi(a) {
    var b = this;
    if (this.headerCssClass = "titlePanel", this.mainMenu = new MainMenu(), this.anonymousMenu = null, 
    this.userMenu = null, this.keepTabs = !1, this.controllers = [ new ExiController(), new ProposalExiController(), new ShippingExiController() ], 
    null != a && (null != a.menu && (this.mainMenu = a.menu, this.userMenu = a.menu), 
    null != a.anonymousMenu && (this.anonymousMenu = a.anonymousMenu), null != a.headerCssClass && (this.headerCssClass = a.headerCssClass), 
    null != a.controllers)) for (var c = 0; c < a.controllers.length; c++) this.controllers.push(a.controllers[c]);
    this.mainStatusBar = new MainStatusBar(), this.proposalManager = new ProposalManager(), 
    this.credentialManager = new CredentialManager(), this.credentialManager.onLogout.attach(function(a) {
        b.mainMenu.populateCredentialsMenu(), b.clearMainPanel(), b.clearNavigationPanel(), 
        b.setAnonymousMenu(), Ext.getCmp("navigation").collapse(), location.hash = "/welcome";
    }), this.credentialManager.onLogin.attach(function(a) {
        b.mainMenu.populateCredentialsMenu(), b.setUserMenu();
    }), this.credentialManager.onActiveProposalChanged.attach(function(a) {
        b.mainMenu.populateCredentialsMenu();
    }), this.authenticationForm = new AuthenticationForm(), this.authenticationForm.onAuthenticate.attach(function(a, c) {
        var d = new AuthenticationManager();
        d.onSuccess.attach(function(a, d) {
            b.credentialManager.addCredential(d.user, d.roles, d.token, c.site, c.exiUrl, c.properties), 
            b.authenticationForm.window.close();
            var e = EXI.credentialManager.getCredentialByUserName(d.user);
            e.isManager() ? location.hash = "/welcome/manager/" + d.user + "/main" : location.hash = "/welcome/user/" + d.user + "/main", 
            b.getDataAdapter().exi.offline.authenticate();
        }), d.login(c.user, c.password, c.site);
    }), this.onAfterRender = new Event(this);
}

function ExiMX() {
    Exi.call(this, {
        menu: new MXMainMenu(),
        anonymousMenu: new MainMenu(),
        controllers: [ new MXExiController(), new SAXSExiController(), new OfflineExiController(), new ProposalExiController(), new LabContactExiController() ],
        headerCssClass: "mxTitlePanel"
    });
}

function ExiSAXS() {
    Exi.call(this, {
        menu: new SAXSMainMenu(),
        anonymousMenu: new MainMenu(),
        controllers: [ new SAXSExiController(), new MXExiController(), new OfflineExiController(), new ProposalExiController(), new LabContactExiController() ]
    });
}

function MainStatusBar() {}

function MainMenu(a) {
    this.id = BUI.id(), this.loginButtonId = "loginButton" + this.id, this.cssClass = "mainMenu", 
    this.isHidden = !0, null != a && (null != a.cssClass && (this.cssClass = a.cssClass), 
    null != a.isHidden && (this.isHidden = a.isHidden));
}

function MXMainMenu() {
    this.id = BUI.id(), MainMenu.call(this, {
        cssClass: "mxMainMenu"
    });
}

function SAXSMainMenu() {
    this.id = BUI.id(), MainMenu.call(this, {
        isHidden: !1,
        cssClass: "mainMenu"
    });
}

function ExiController() {
    this.init();
}

function LabContactExiController() {
    this.init();
}

function MXExiController() {
    this.init();
}

function OfflineExiController() {
    this.init();
}

function ProposalExiController() {
    this.init();
}

function SAXSExiController() {
    this.init();
}

function ShippingExiController() {
    this.init();
}

function Credential(a, b, c, d, e, f, g) {
    this.username = a.toLowerCase(), this.roles = b, this.url = d, this.exiUrl = e, 
    this.token = c, this.activeProposals = f, this.properties = g;
}

function CredentialManager() {
    this.onLogin = new Event(this), this.onLogout = new Event(this), this.onActiveProposalChanged = new Event(this);
}

function DygraphWidget(a, b) {
    this.width = 1e3, this.height = 600, this.labelsWidth = 100, this.targetId = a, 
    this.customBars = !1, this.ylabel = "", this.xlabel = "", this.id = BUI.id(), this.showRangeSelector = !1, 
    this.interactionModel = null, this.labelsDivStyles = null, this.ranges = [], null != b && (null != b.width && (this.width = b.width), 
    null != b.height && (this.height = b.height), null != b.labelsWidth && (this.labelsWidth = b.labelsWidth), 
    null != b.labelsDivStyles && (this.labelsDivStyles = b.labelsDivStyles), null != b.customBars && (this.customBars = b.customBars), 
    null != b.ylabel && (this.ylabel = b.ylabel), null != b.xlabel && (this.xlabel = b.xlabel), 
    null != b.showRangeSelector && (this.showRangeSelector = b.showRangeSelector), null != b.interactionModel && (this.interactionModel = b.interactionModel), 
    null != b.scaled && (this.scaled = b.scaled), null != b.ranges && (this.ranges = b.ranges)), 
    this.onZoomX = new Event(this), this.onResetZoom = new Event(this), this.dblclick = new Event(this);
}

function StdDevDyGraph(a, b) {
    this.scaled = !1, null == b && (b = {}), b.customBars = !0, DygraphWidget.prototype.constructor.call(this, a, b);
}

function Event(a) {
    this._sender = a, this._listeners = [];
}

function ProgressBar() {}

function AbinitioForm(a) {
    this.id = BUI.id(), this.width = null, this.height = null, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
    var b = this;
    this.abinitioGrid = new AbinitioGrid({
        width: 700,
        height: 600
    }), this.abinitioGrid.onSelected.attach(function(a, c) {
        var d = [];
        for (var e in c) d.push(c[e].modelId);
        b.curvePlotter.loadUrl(EXI.getDataAdapter().saxs.frame.getFramesURL([], [], [], [], [], d)), 
        b._renderPDB(d);
    }), this.curvePlotter = new CurvePlotter({}), this.viewer = new PDBViewer({
        width: 500,
        height: 300
    });
}

function AddressForm(a) {
    this.id = BUI.id(), this.height = 500, this.width = 500, this.isSaveButtonHidden = !1, 
    this.isHidden = !1, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width), null != a.isSaveButtonHidden && (this.isSaveButtonHidden = a.isSaveButtonHidden), 
    null != a.isHidden && (this.isHidden = a.isHidden));
}

function AuthenticationForm() {
    this.onAuthenticate = new Event(this);
}

function BufferForm(a) {
    this.id = BUI.id(), this.height = 500, this.width = 500, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width)), this.onRemoveAdditive = new Event(this);
}

function CaseForm(a) {
    this.id = BUI.id(), this.width = 600, this.showTitle = !0, null != a && null != a.showTitle && (this.showTitle = a.showTitle), 
    this.onSaved = new Event(this);
}

function CrystalForm(a) {
    this.id = BUI.id(), this.height = 500, this.width = 500, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width));
}

function DataReductionForm(a) {
    this.id = BUI.id(), this.width = null, this.height = null, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
    this.plotWidget = new PlotWidget({
        width: 650,
        height: 490
    }), this.selectedItems = {
        frames: [],
        averages: [],
        subtractions: []
    };
}

function ExperimentHeaderForm(a) {
    this.id = BUI.id(), this.backgroundColor = "#FFFFFF";
}

function AssemblyForm(a) {
    this.id = BUI.id(), this.width = 700, this.height = 500, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height)), this.molarityGrid = new MolarityGrid({
        height: this.height - 50
    });
}

function MacromoleculeForm(a) {
    this.id = BUI.id(), this.width = 700, this.height = 700, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height)), this.onSave = new Event(this), this.onClose = new Event(this);
}

function MolarityForm(a) {
    this.id = BUI.id(), this.width = 700, this.height = 500, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height)), this.onSave = new Event(this), this.onClose = new Event(this);
}

function RigidBodyModelingForm(a) {
    this.id = BUI.id(), this.width = 700, this.height = 500, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
    var b = this;
    this.rigidBodyGrid = new AprioriRigidBodyGrid(), this.rigidBodyGrid.onUploadFile.attach(function(a, c, d) {
        b.openUploadManager(EXI.getDataAdapter().saxs.macromolecule.getAddPDBURL(b.macromolecule.macromoleculeId));
    }), this.rigidBodyGrid.onRemove.attach(function(a, c, d) {
        b._update();
    }), this.onSave = new Event(this);
}

function ParcelForm(a) {
    this.id = BUI.id(), this.height = 500, this.width = 500, this.isSaveButtonHidden = !1, 
    this.isHidden = !1, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width)), this.onSavedClick = new Event(this);
}

function PuckForm(a) {
    this.id = BUI.id(), this.height = 500, this.width = 500, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width));
    var b = this;
    this.puckLayout = new PuckLayout({
        width: 150
    }), this.containerSpreadSheet = new ContainerSpreadSheet({
        width: 1300
    }), this.containerSpreadSheet.onModified.attach(function(a, c) {
        b.loadPlateLayout(c);
    }), this.onSaved = new Event(this);
}

function ShipmentForm(a) {
    this.id = BUI.id(), null != a && null != a.creationMode && (this.creationMode = a.creationMode), 
    this.onSaved = new Event(this);
}

function StockSolutionForm(a) {
    this.id = BUI.id(), this.actions = [], this.height = 500, null != a && (null != a.actions && (this.actions = a.actions), 
    null != a.height && (this.height = a.height)), this.onSaved = new Event(this);
}

function GrayScalePlot(a) {
    this.width = 500, this.height = 100, this.id = BUI.id(), null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
}

function AbinitioGrid(a) {
    this.height = null, this.width = null, this.id = BUI.id(), null != a && null != a.height && (this.height = a.height, 
    null != a.width && (this.width = a.width)), this.onSelected = new Event(this);
}

function AprioriRigidBodyGrid(a) {
    this.height = 250, this.btnEditVisible = !0, this.btnRemoveVisible = !0, null != a && (null != a.height && (this.height = a.height), 
    null != a.btnEditVisible && (this.btnEditVisible = a.btnEditVisible), null != a.btnRemoveVisible && (this.btnRemoveVisible = a.btnRemoveVisible)), 
    this.onUploadFile = new Event(this), this.onRemove = new Event(this);
}

function BufferGrid(a) {
    this.height = 500, this.searchBar = !1, this.tbar = !1, this.collapsed = !1, this.id = BUI.id(), 
    this.collapsible = !1, null != a && (null != a.height && (this.height = a.height), 
    null != a.searchBar && (this.searchBar = a.searchBar), null != a.tbar && (this.tbar = a.tbar), 
    null != a.collapsed && (this.collapsed = a.collapsed), null != a.width && (this.width = a.width)), 
    this.onUpdated = new Event(this);
}

function CaseGrid(a) {
    this.height = 100, this.btnEditVisible = !0, this.btnRemoveVisible = !0, null != a && (null != a.height && (this.height = a.height), 
    null != a.btnEditVisible && (this.btnEditVisible = a.btnEditVisible), null != a.btnRemoveVisible && (this.btnRemoveVisible = a.btnRemoveVisible)), 
    this.onSuccess = new Event(this), this.onAdd = new Event(this), this.onRemove = new Event(this);
}

function ExperimentGrid(a) {
    this.width = "100%", this.height = 700, this.minHeight = 500, this.id = BUI.id(), 
    this.gridType = "Ext.grid.Panel", this.tbar = !1, this.hideHeaders = !1, this.grouping = !0, 
    this.title = null, this.filtered = null, this.limit = 100, this.sessionIdFilter = null, 
    this.date = null, this.sorters = [ {
        property: "date",
        direction: "DESC"
    }, {
        property: "time",
        direction: "DESC"
    } ], this.dates = {}, null != a && (null != a.height && (this.height = a.height), 
    null != a.limit && (this.limit = a.limit), null != a.sorters && (this.sorters = a.sorters), 
    null != a.sessionId && (this.sessionIdFilter = a.sessionId), null != a.filtered && (this.filtered = a.filtered), 
    null != a.minHeight && (this.minHeight = a.minHeight), null != a.gridType && (this.gridType = a.gridType), 
    null != a.tbar && (this.tbar = a.tbar), null != a.grouping && (this.grouping = a.grouping), 
    null != a.width && (this.width = a.width), null != a.title && (this.title = a.title)), 
    this.onEditButtonClicked = new Event(this);
}

function FrameSelectorGrid(a) {
    this.onSelectionChange = new Event(this);
}

function MacromoleculeGrid(a) {
    this.height = 500, this.width = 500, this.id = BUI.id(), this.maxHeight = this.height, 
    this.searchBar = !1, this.tbar = !1, this.collapsible = !0, this.collapsed = !0, 
    this.btnEditVisible = !0, this.btnRemoveVisible = !1, this.multiselect = !1, this.cssFontStyle = null, 
    null != a && (null != a.height && (this.height = a.height, this.maxHeight = this.height), 
    null != a.maxHeight && (this.maxHeight = a.maxHeight), null != a.width && (this.width = a.width), 
    null != a.cssFontStyle && (this.cssFontStyle = a.cssFontStyle), null != a.searchBar && (this.searchBar = a.searchBar), 
    null != a.tbar && (this.tbar = a.tbar), null != a.collapsible && (this.collapsible = a.collapsible), 
    null != a.collapsed && (this.collapsed = a.collapsed), null != a.btnEditVisible && (this.btnEditVisible = a.btnEditVisible), 
    null != a.btnRemoveVisible && (this.btnRemoveVisible = a.btnRemoveVisible), null != a.multiselect && (this.multiselect = a.multiselect)), 
    this.onSelected = new Event(), this.onMacromoleculesChanged = new Event();
}

function MeasurementGrid(a) {
    this.id = BUI.id(), this.height = 500, this.width = 900, this.maxWidth = 1200, this.minHeight = 500, 
    this.unitsFontSize = 9, this.title = "Measurements", this.estimateTime = !1, this.collapsed = !0, 
    this.tbar = !0, this.showTitle = !0, this.resizable = !0, this.updateRowEnabled = !0, 
    this.isStatusColumnHidden = !0, this.isTimeColumnHidden = !0, this.removeBtnEnabled = !0, 
    this.margin = "10 10 0 10", this.height = 250, this.maxHeight = 250, this.collapsible = !1, 
    this.addBtnEnable = !1, this.editor = {
        comments: {
            xtype: "textfield",
            allowBlank: !0
        }
    }, this.sorter = [ {
        property: "priority",
        direction: "ASC"
    } ], null != a && (null != a.selModel && (this.selModel = a.selModel), null != a.removeBtnEnabled && (this.removeBtnEnabled = a.removeBtnEnabled), 
    null != a.addBtnMultipleEdit && (this.addBtnMultipleEdit = a.addBtnMultipleEdit), 
    null != a.collapsed && (this.collapsed = a.collapsed), null != a.resizable && (this.resizable = a.resizable), 
    null != a.editor && (this.editor = a.editor), null != a.collapseBtnEnable && (this.collapseBtnEnable = a.collapseBtnEnable), 
    null != a.addBtnEnable && (this.addBtnEnable = a.addBtnEnable), null != a.sortingBtnEnable && (this.sortingBtnEnable = a.sortingBtnEnable), 
    null != a.isPriorityColumnHidden && (this.isPriorityColumnHidden = a.isPriorityColumnHidden), 
    null != a.width && (this.width = a.width), null != a.updateRowEnabled && (this.updateRowEnabled = a.updateRowEnabled), 
    null != a.showTitle && (this.showTitle = a.showTitle, 0 == this.showTitle && (this.title = null)), 
    null != a.height && (this.height = a.height), null != a.maxHeight && (this.maxHeight = a.maxHeight), 
    null != a.minHeight && (this.minHeight = a.minHeight), null != a.maxWidth && (this.maxWidth = a.maxWidth), 
    null != a.isStatusColumnHidden && (this.isStatusColumnHidden = a.isStatusColumnHidden), 
    null != a.isTimeColumnHidden && (this.isTimeColumnHidden = a.isTimeColumnHidden), 
    null != a.title && (this.title = a.title), null != a.estimateTime && (this.estimateTime = a.estimateTime), 
    null != a.margin && (this.margin = a.margin), null != a.tbar && (this.tbar = a.tbar), 
    null != a.sorter && (this.sorter = a.sorter)), this.onRemoved = new Event(this), 
    this.onMeasurementChanged = new Event(this), this.onExperimentChanged = new Event(this);
}

function MolarityGrid(a) {
    this.height = 100, this.width = 100, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width));
    var b = this;
    this.molarityForm = new MolarityForm({
        height: 180,
        width: 455
    }), this.molarityForm.onSave.attach(function(a) {
        b.molarityWindow.destroy(), b.updateProposal();
    }), this.molarityForm.onClose.attach(function(a) {
        b.molarityWindow.destroy();
    }), this.onEditButtonClicked = new Event(this);
}

function ParcelGrid(a) {
    this.height = 100, this.btnEditVisible = !0, this.btnRemoveVisible = !0, null != a && (null != a.height && (this.height = a.height), 
    null != a.btnEditVisible && (this.btnEditVisible = a.btnEditVisible), null != a.btnRemoveVisible && (this.btnRemoveVisible = a.btnRemoveVisible)), 
    this.onSuccess = new Event(this), this.onAdd = new Event(this), this.onRemove = new Event(this);
}

function ProposalGrid(a) {
    this.height = 500, this.tbar = !1, this.id = BUI.id(), this.margin = "0 0 0 0", 
    null != a && (null != a.height && (this.height = a.height), null != a.searchBar && (this.searchBar = a.searchBar), 
    null != a.tbar && (this.tbar = a.tbar), null != a.collapsed && (this.collapsed = a.collapsed), 
    null != a.width && (this.width = a.width), null != a.margin && (this.margin = a.margin)), 
    this.onSelected = new Event(this);
}

function QueueGrid(a) {
    this.decimals = 3, this.onSelect = new Event(), this.maxHeight = 600, this.id = BUI.id(), 
    this.title = "Data Collections", this.key = {}, this.selectionMode = "MULTI", this.collapsible = !0, 
    this.collapsed = !1;
    var b = this;
    this.filters = [ function(a) {
        return null == a.data.dataCollectionId ? !1 : (null == b.key[a.data.dataCollectionId] && (b.key[a.data.dataCollectionId] = []), 
        b.key[a.data.dataCollectionId].push(a.data), null != a.data.macromoleculeId);
    } ], null != a && (null != a.maxHeight && (this.maxHeight = a.maxHeight), null != a.collapsible && (this.collapsible = a.collapsible), 
    null != a.collapsed && (this.collapsed = a.collapsed), null != a.selectionMode && (this.selectionMode = a.selectionMode), 
    null != a.title && 0 == a.title && (this.title = null)), this.selected = [], this.onSelectionChange = new Event(), 
    this.onDeselect = new Event(this), this.onSelect = new Event(this);
}

function RigidModelGrid(a) {
    this.height = null, this.width = null, this.id = BUI.id(), null != a && null != a.height && (this.height = a.height, 
    null != a.width && (this.width = a.width)), this.onSelected = new Event(this);
}

function SessionGrid(a) {
    this.height = 500, this.tbar = !1, this.id = BUI.id(), this.width = 100, this.title = null, 
    this.margin = null, this.hiddenGoColumn = !0, null != a && (null != a.title && (this.title = a.title), 
    null != a.margin && (this.margin = a.margin), null != a.height && (this.height = a.height), 
    null != a.tbar && (this.tbar = a.tbar), null != a.width && (this.width = a.width), 
    null != a.hiddenGoColumn && (this.hiddenGoColumn = a.hiddenGoColumn)), this.onSelected = new Event(this);
}

function SpecimenGrid(a) {
    this.id = BUI.id(), this.height = 500, this.unitsFontSize = 9, this.editEnabled = !1, 
    this.isPositionColumnHidden = !1, this.removeBtnEnabled = !1, this.updateRowEnabled = !1, 
    this.grouped = !0, this.width = 900, this.title = "Specimens", this.margin = "0 0 0 0", 
    null != a && (null != a.height && (this.height = a.height), 0 == a.showTitle && (this.title = null), 
    0 == a.margin && (this.margin = a.margin), 0 == a.grouped && (this.grouped = null), 
    null != a.width && (this.width = a.width), null != a.editEnabled && (this.editEnabled = a.editEnabled), 
    null != a.removeBtnEnabled && (this.removeBtnEnabled = a.removeBtnEnabled), null != a.isPositionColumnHidden && (this.isPositionColumnHidden = a.isPositionColumnHidden), 
    null != a.updateRowEnabled && (this.updateRowEnabled = a.updateRowEnabled)), this.onClick = new Event(this), 
    this.onSelected = new Event(this), this.onRemoved = new Event(this), this.onSpecimenChanged = new Event();
}

function StockSolutionGrid(a) {
    this.id = BUI.id(), this.tbar = !0, this.title = "Stock Solutions", this.btnEditVisible = !0, 
    this.btnRemoveVisible = !0, this.btnAddVisible = !0, this.btnAddExisting = !1, this.isPackedVisible = !0, 
    this.btnUnpackVisible = !1, this.multiselect = !1, this.selectedStockSolutions = [], 
    null != a && (null != a.btnUnpackVisible && (this.btnUnpackVisible = a.btnUnpackVisible), 
    null != a.multiselect && (this.multiselect = a.multiselect), null != a.height && (this.height = a.height), 
    null != a.btnEditVisible && (this.btnEditVisible = a.btnEditVisible), null != a.btnAddVisible && (this.btnAddVisible = a.btnAddVisible), 
    null != a.btnAddExisting && (this.btnAddExisting = a.btnAddExisting), null != a.width && (this.width = a.width), 
    null != a.minHeight && (this.minHeight = a.minHeight), null != a.tbar && (this.tbar = a.tbar), 
    null != a.btnRemoveVisible && (this.btnRemoveVisible = a.btnRemoveVisible), null != a.isPackedVisible && (this.isPackedVisible = a.isPackedVisible), 
    null != a.showTitle && (this.showTitle = a.showTitle, 0 == this.showTitle && (this.title = null))), 
    this.onSaved = new Event(this), this.onUnpack = new Event(this), this.onPack = new Event(this);
}

function TemplateGrid(a) {
    this.height = 500;
}

function VolumeGrid() {
    this.id = BUI.id();
}

function HPLCGraph(a) {
    this.width = 600, this.height = 600, this.title = "", this.bbar = !1, this.plotInnerPanelPadding = 10, 
    this.plotPanelPadding = 10, this.id = BUI.id(), this.hidePlots = null, this.xlabel = "", 
    this.scaled = !1, this.xParam = null, this.showRangeSelector = !0, this.interactionModel = null, 
    this.ranges = {}, null != a && (null != a.interactionModel && (this.interactionModel = a.interactionModel), 
    null != a.width && (this.width = a.width), null != a.height && (this.height = a.height), 
    null != a.bbar && (this.bbar = a.bbar), null != a.title && (this.title = a.title), 
    null != a.plots && (this.plots = a.plots), null != a.scaled && (this.scaled = a.scaled), 
    null != a.xlabel && (this.xlabel = a.xlabel), null != a.xParam && (this.xParam = a.xParam), 
    null != a.showRangeSelector && (this.showRangeSelector = a.showRangeSelector)), 
    this.onZoomX = new Event(this), this.onResetZoom = new Event(this), this.dblclick = new Event(this), 
    this.onClearSelection = new Event(this);
}

function MergesHPLCGraph(a) {
    HPLCGraph.prototype.constructor.call(this, a), this.peakColors = [ "#DEBD00", "#6D9100", "#872900", "#0092CC" ];
}

function ImageResolutionViewer() {
    this.id = BUI.id(), this.ratio = 3, this.canvasWidth = 1475 / this.ratio, this.canvasHeight = 1679 / this.ratio, 
    this.canvasZoomWidth = 1475 / this.ratio, this.canvasZoomHeight = 1679 / this.ratio, 
    this.zoomRatio = 5, this.localCenter = null;
    var a = this;
    this.zoom = 1, this.offsetX = 0, this.offsetY = 0, this.image = new ImageViewer({
        width: this.canvasWidth / this.zoomRatio,
        height: this.canvasHeight / this.zoomRatio,
        zoom: this.zoom,
        offsetX: this.offsetX,
        offsetY: this.offsetY,
        allowLuminance: !1
    }), this.zoomImage = new ImageViewer({
        width: this.canvasWidth,
        height: this.canvasHeight,
        zoom: this.zoom,
        offsetX: this.offsetX,
        offsetY: this.offsetY
    }), this.image.onMouseOver.attach(function(a, b) {}), this.image.onMouseRightDown.attach(function(b) {
        a.zoom = 1, a.zoomImage.zoom = a.zoom, a.zoomImage.offsetX = 0, a.zoomImage.offsetY = 0, 
        a.zoomImage.reload(function() {});
    }), this.zoomImage.onMouseRightDown.attach(function(b) {
        a.zoom = 1, a.zoomImage.zoom = a.zoom, a.zoomImage.offsetX = 0, a.zoomImage.offsetY = 0, 
        a.zoomImage.reload(function() {});
    }), this.image.onRendered.attach(function(b) {
        a.onImageRendered.notify(a.image.getMatrix());
    }), this.image.onDblClick.attach(function(b, c) {
        c.x = c.x * a.zoomRatio, c.y = c.y * a.zoomRatio, c.localY = c.localY * a.zoomRatio, 
        c.localX = c.localX * a.zoomRatio, a.zoomImage.applyZoomOnPoint(c, a.zoom);
    }), this.image.onMouseDown.attach(function(a, b) {}), this.image.onMouseUp.attach(function(a, b) {}), 
    this.image.onMouseClick.attach(function(a, b) {}), this.image.onLuminanceCalculated.attach(function(a, b) {}), 
    this.zoomImage.onLuminanceCalculated.attach(function(b, c) {
        a.zoomGrayScalePlot.load(c);
    }), this.zoomImage.onLuminanceReset.attach(function(b, c) {
        a.zoomGrayScalePlot.reset();
    }), this.zoomGrayScalePlot = new GrayScalePlot({
        width: this.canvasWidth
    }), this.onImageRendered = new Event(this);
}

function ImageViewer(a) {
    this.width = 500, this.height = 500, this.id = BUI.id(), this.center = null, this.url = null, 
    this.zoom = 1, this.offsetX = 0, this.offsetY = 0, this._isDragging = !1, this._draggingPoint = {
        x: 0,
        y: 0
    }, this.selectedPoints = [], this.allowLuminance = !0, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height), null != a.zoom && (this.zoom = a.zoom), 
    null != a.offsetX && (this.offsetX = a.offsetX), null != a.offsetY && (this.offsetY = a.offsetY), 
    null != a.allowLuminance && (this.allowLuminance = a.allowLuminance)), this.selectedPoints = [], 
    this.onMouseOver = new Event(this), this.onMouseClick = new Event(this), this.onMouseDown = new Event(this), 
    this.onMouseUp = new Event(this), this.onDblClick = new Event(this), this.onMouseRightDown = new Event(this), 
    this.onLuminanceCalculated = new Event(this), this.onLuminanceReset = new Event(this), 
    this.onRendered = new Event(this);
}

function AutoProcIntegrationAttachmentGrid(a) {
    this.height = 500, this.tbar = !1, this.id = BUI.id(), this.maxHeight = 300, this.margin = "10 0 0 0", 
    null != a && (null != a.height && (this.height = a.height), null != a.searchBar && (this.searchBar = a.searchBar), 
    null != a.tbar && (this.tbar = a.tbar), null != a.collapsed && (this.collapsed = a.collapsed), 
    null != a.width && (this.width = a.width), null != a.margin && (this.margin = a.margin), 
    null != a.maxHeight && (this.maxHeight = a.maxHeight)), this.onSelected = new Event(this);
}

function AutoProcIntegrationGrid(a) {
    this.height = 500, this.tbar = !1, this.id = BUI.id(), this.preventSelection = !1, 
    this.maxHeight = 500, this.minHeight = 500, null != a && (null != a.height && (this.height = a.height), 
    null != a.maxHeight && (this.maxHeight = a.maxHeight), null != a.searchBar && (this.searchBar = a.searchBar), 
    null != a.tbar && (this.tbar = a.tbar), null != a.collapsed && (this.collapsed = a.collapsed), 
    null != a.width && (this.width = a.width)), this.onSelected = new Event(this);
}

function CustomSectionDataCollection(a) {
    this.noFoundClass = "summary_datacollection_noFound", this.failedClass = "summary_datacollection_failed", 
    this.successClass = "summary_datacollection_success";
}

function DataCollectionGroupFactory() {
    this.dataCollectionPanel = new GenericDataCollectionPanel();
}

function GenericDataCollectionPanel(a) {
    this.title = "Generic";
}

function ResultSectionDataCollection(a) {
    this.noFoundClass = "summary_datacollection_noFound", this.failedClass = "summary_datacollection_failed", 
    this.successClass = "summary_datacollection_success";
}

function WorkflowSectionDataCollection(a) {
    this.noFoundClass = "summary_datacollection_noFound", this.failedClass = "summary_datacollection_failed", 
    this.successClass = "summary_datacollection_success";
}

function DataCollectionMxGrid(a) {
    this.pageSize = 100, this.title = "Last Data Collection", this.listOfCrystalClass = [], 
    this.contextPath = "", this.displayLastCollect = !1, this.isManager = !1, this.isIndustrial = !1, 
    this.pagingMode = !1, this.groupFieldDefault = "", this.setArgs(a), this.onSaveButtonClicked = new Event(this), 
    this.onPagingMode = new Event(this), this.onRankButtonClicked = new Event(this), 
    this.onRankAutoProcButtonClicked = new Event(this), this.hideCol = !0, this.rankEDNA = !0, 
    this.minDCId = 1, this.maxDCId = 0, this.rMergeCutoff = 10, this.iSigmaCutoff = 1, 
    Ext.define("DataCollectionModel", {
        extend: "Ext.data.Model",
        fields: [ {
            name: "dataCollectionId",
            mapping: "dataCollectionId"
        }, {
            name: "experimentType",
            mapping: "experimentType"
        }, {
            name: "startTime",
            mapping: "startTime",
            type: "date",
            dateFormat: "d-m-Y H:i:s"
        }, {
            name: "endTime",
            mapping: "endTime",
            type: "date",
            dateFormat: "d-m-Y H:i:s"
        }, {
            name: "beamLineName",
            mapping: "beamLineName"
        }, {
            name: "proposal",
            mapping: "proposal"
        }, {
            name: "login",
            mapping: "login"
        }, {
            name: "imagePrefix",
            mapping: "imagePrefix"
        }, {
            name: "dataCollectionNumber",
            mapping: "dataCollectionNumber"
        }, {
            name: "proteinAcronym",
            mapping: "proteinAcronym"
        }, {
            name: "pdbFileName",
            mapping: "pdbFileName"
        }, {
            name: "numberOfImages",
            mapping: "numberOfImages"
        }, {
            name: "hasSnapshot",
            mapping: "hasSnapshot"
        }, {
            name: "runStatus",
            mapping: "runStatus"
        }, {
            name: "autoProc",
            mapping: "autoProc"
        }, {
            name: "autoProcStatisticsOverall",
            mapping: "autoProcStatisticsOverall"
        }, {
            name: "autoProcStatisticsInner",
            mapping: "autoProcStatisticsInner"
        }, {
            name: "autoProcStatisticsOuter",
            mapping: "autoProcStatisticsOuter"
        }, {
            name: "screeningOutput",
            mapping: "screeningOutput"
        }, {
            name: "lattice",
            mapping: "lattice"
        }, {
            name: "comments",
            mapping: "comments"
        }, {
            name: "autoprocessingStatus",
            mapping: "autoprocessingStatus"
        }, {
            name: "autoprocessingStep",
            mapping: "autoprocessingStep"
        }, {
            name: "wavelength",
            mapping: "wavelength"
        }, {
            name: "transmission",
            mapping: "transmission"
        }, {
            name: "exposureTime",
            mapping: "exposureTime"
        }, {
            name: "axisStart",
            mapping: "axisStart"
        }, {
            name: "axisRange",
            mapping: "axisRange"
        }, {
            name: "resolution",
            mapping: "resolution"
        }, {
            name: "transmission",
            mapping: "transmission"
        }, {
            name: "hasAutoProcAttachment",
            mapping: "hasAutoProcAttachment"
        }, {
            name: "printableForReport",
            mapping: "printableForReport"
        }, {
            name: "skipForReport",
            mapping: "skipForReport"
        } ],
        idProperty: "dataCollectionId"
    });
}

function DataCollectionSummaryGrid(a) {
    this.id = BUI.id(), null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width)), this.dataCollectionGroupFactory = new DataCollectionGroupFactory();
}

function PhasingGrid(a) {
    this.height = 500, this.tbar = !1, this.id = BUI.id(), this.preventSelection = !1, 
    this.maxHeight = 500, this.minHeight = 500, this.margin = null, null != a && (null != a.height && (this.height = a.height), 
    null != a.maxHeight && (this.maxHeight = a.maxHeight), null != a.searchBar && (this.searchBar = a.searchBar), 
    null != a.tbar && (this.tbar = a.tbar), null != a.collapsed && (this.collapsed = a.collapsed), 
    null != a.width && (this.width = a.width), null != a.margin && (this.margin = a.margin)), 
    this.onSelected = new Event(this);
}

function PDBViewer(a) {
    this.id = BUI.id(), this.glMol = null, this.width = 600, this.height = 600, this.title = "", 
    this.margin = "10 0 0 5", null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height), null != a.title && (this.title = a.title), 
    null != a.margin && (this.margin = a.margin));
}

function SuperpositionPDBViewer(a) {
    this.width = 550, this.height = 500, null != a && null != a.actions && (this.actions = a.actions);
    this.form = new BufferForm(), this.onSuccess = new Event(), PDBViewer.prototype.constructor.call(this, a);
}

function AlignedSuperpositionPDBViewer(a) {
    this.width = 550, this.height = 500, null != a && null != a.actions && (this.actions = a.actions);
    this.form = new BufferForm(), this.onSuccess = new Event(), PDBViewer.prototype.constructor.call(this, a);
}

function StructurePDBViewer(a) {
    this.width = 550, this.height = 500, null != a && null != a.actions && (this.actions = a.actions);
    this.form = new BufferForm(), this.onSuccess = new Event(), PDBViewer.prototype.constructor.call(this, a);
}

function SpineLayout(a) {
    this.id = BUI.id(), this.height = 100, this.width = this.height, null != a && (null != a.height && (this.height = a.height, 
    this.width = a.height), null != a.width && (this.width = a.width, this.height = a.width));
}

function UnipuckLayout(a) {
    this.id = BUI.id(), this.height = 100, this.width = this.height, null != a && (null != a.height && (this.height = a.height, 
    this.width = a.height), null != a.width && (this.width = a.width, this.height = a.width));
}

function PuckLayout(a) {
    this.id = BUI.id(), this.height = 100, this.width = this.height, null != a && (null != a.height && (this.height = a.height, 
    this.width = a.height), null != a.width && (this.width = a.width, this.height = a.width));
}

function PuckLayout(a) {
    this.id = BUI.id(), this.height = 100, this.width = this.height, null != a && (null != a.height && (this.height = a.height, 
    this.width = a.height), null != a.width && (this.width = a.width, this.height = a.width));
}

function CurvePlotter(a) {
    this.id = BUI.id(), this.backgroundColor = "#FFFFFF", this.margin = "0 0 0 5", this.ruleColor = "black", 
    this.targetId = "plotCanvas" + BUI.id(), this.legend = "onmouseover", null != a && (null != a.margin && (this.margin = a.margin), 
    null != a.legend && (this.legend = a.legend)), this.onRendered = new Event(this), 
    this.onPointClickCallback = new Event();
}

function AutoProcIntegrationCurvePlotter(a) {
    CurvePlotter.call(this, a), this.margin = "10 0 0 0", this.height = null, this.title = "", 
    null != a && (null != a.height && (this.height = a.height), null != a.title && (this.title = a.title));
}

function DataSet() {
    this.json = null;
}

function GraphCanvas(a, b, c) {
    this.args = {}, this.targetID = b.id, this.id = a, this.args.idGraph = this.id + "main", 
    this.args.idBackgroundNode = this.id + "background", this.args.idEdgesGraph = this.id + "edges", 
    this.args.idNodesGraph = this.id + "vertices", this.args.idLabelGraph = this.id + "label", 
    this.args.idBackground = this.id + "background", this.dataset = null, this.formatter = null, 
    this.layout = null, this.circleDefaultRadius = 2, this.squareDefaultSide = 1.5 * this.circleDefaultRadius, 
    this.arrowDefaultSize = this.circleDefaultRadius, this.GraphGroup = null, this.GraphNodeGroup = null, 
    this.GraphLabelGroup = null, this.GraphBackground = null, this.args.draggingCanvasEnabled = !1, 
    this.args.multipleSelectionEnabled = !1, this.args.interactive = !1, this.args.labeled = !1, 
    this.args.linkEnabled = !1, this.args.maxNumberEdgesMoving = 3, this.args.maxNumberEdgesFiringEvents = 50, 
    this.args.linking = !1, this.linkStartX = 0, this.linkStartY = 0, this.linkSVGNode = null, 
    this.linkNodeSource = null, this.linkNodeTarget = null, this.draggingElement = null, 
    this.dragging = !1, this.nMouseOffsetX = 0, this.nMouseOffsetY = 0, this.dragStartX = 0, 
    this.dragStartY = 0, this.desplazamientoX = 0, this.desplazamientoY = 0, this.selecting = !1, 
    this.selectorX = null, this.selectorY = null, this.selectorSVGNode = null, this.args.isVertexSelected = {}, 
    this.args.selectedVertices = [], this.args.isEdgeSelected = {}, null != c && (null != c.multipleSelectionEnabled && (this.args.multipleSelectionEnabled = c.multipleSelectionEnabled, 
    this.args.draggingCanvasEnabled = !this.args.multipleSelectionEnabled), null != c.draggingCanvasEnabled && (this.args.draggingCanvasEnabled = c.draggingCanvasEnabled, 
    this.args.multipleSelectionEnabled = !this.args.draggingCanvasEnabled), null != c.interactive && (this.args.interactive = c.interactive), 
    null != c.labeled && (this.args.labeled = c.labeled)), this.svgLabels = {}, this.onVertexOut = new Event(this), 
    this.onVertexOver = new Event(this), this.onVertexSelect = new Event(this), this.onEdgeSelect = new Event(this), 
    this.onCanvasClicked = new Event(this), this.onVertexUp = new Event(this);
}

function GraphDataset() {
    DataSet.prototype.constructor.call(this), this.edges = new Object(), this.vertices = new Object(), 
    this.verticesIndex = new Object(), this.newVertex = new Event(this), this.vertexNameChanged = new Event(this), 
    this.vertexDeleted = new Event(this), this.newEdge = new Event(this), this.edgeNameChanged = new Event(this), 
    this.edgeDeleted = new Event(this), this.json = new Object(), this.json.vertices = new Array(), 
    this.json.edges = new Array(), this.json.relations = new Array();
}

function labels() {
    var a = new Array(), b = interactomeViewer.graphEditorWidget.dataset, c = interactomeViewer.graphEditorWidget.layout;
    for (var d in interactomeViewer.graphEditorWidget.dataset.getVertices()) a.push(interactomeViewer.graphEditorWidget.dataset.getVertexById(d).getName());
    var e = a.sort();
    console.log(e);
    for (var f = .01, g = .6, h = 0; h < a.length; h++) {
        var i = b.getVertexByName(a[h]).getId();
        c.getNodeById(i).setCoordenates(f, g), f = parseFloat(f) + parseFloat(.03), g = parseFloat(g) + parseFloat(.02), 
        .9800000000000003 == parseFloat(g) && (g = .6, f -= .51);
    }
}

function GraphItem(a, b, c) {
    this.id = a, this.name = b, this.type = "NONE", this.args = new Object(), null != c && (this.args = c, 
    null != c.type && (this.type = c.type)), this.nameChanged = new Event(this), this.deleted = new Event(this);
}

function ItemGraphFormatter(a, b, c, d, e) {
    this.id = a, this.args = new Object(), this.defaultFormat = new ItemFormat(b), null != c ? this.selected = new ItemFormat(c) : this.selected = new ItemFormat(b), 
    null != d ? this.over = new ItemFormat(d) : this.over = new ItemFormat(b), null != e ? this.dragging = new ItemFormat(e) : this.dragging = new ItemFormat(b), 
    this.stateChanged = new Event(this);
    this._setEvents();
}

function ItemFormat(a) {
    this.defaultFormat = new Object(), this.args = new Object(), this.args.title = new Object(), 
    this.args.visible = !0, this.args.hidden = !1, this.args.stroke = "#000000", this.args.strokeOpacity = .8, 
    this.args["stroke-width"] = 1, this.args.fill = "#000000", this.args["fill-opacity"] = 1, 
    this.args.size = 1, this.args.opacity = 1, this.args.fontSize = "8", this.args.fontColor = "#000000", 
    null != a && (null != a.visible && (this.args.visible = a.visible), null != a.opacity && (this.args.opacity = a.opacity), 
    null != a.size && (this.args.size = a.size), null != a.hidden && (this.args.hidden = a.hidden), 
    null != a.stroke && (this.args.stroke = this._fixColor(a.stroke)), null != a.strokeOpacity && (this.args.strokeOpacity = a.strokeOpacity), 
    null != a["stroke-width"] && (this.args["stroke-width"] = a["stroke-width"]), null != a["fill-opacity"] && (this.args["fill-opacity"] = a["fill-opacity"]), 
    null != a.shape && (this.args.shape = a.shape), null != a.fill && (this.args.fill = this._fixColor(a.fill)), 
    null != a.title && (null != a.title.fontSize && (this.args.title.fontSize = a.title.fontSize), 
    null != a.title.fill && (this.args.title.fill = this._fixColor(a.title.fill)))), 
    this.changed = new Event();
}

function LayoutDataset() {
    this.dataset = null, this.vertices = new Object(), this.changed = new Event(this), 
    this.args = new Object(), this.args.type = "CIRCLE";
}

function NodeLayout(a, b, c, d) {
    this.id = a, this.x = b, this.y = c, this.changed = new Event(this);
}

function NetworkDataSetFormatter(a, b, c) {
    DataSet.prototype.constructor.call(this), this.args = new Object(), this.vertices = new Object(), 
    this.edges = new Object(), this.dataset = null, this.maxClass = 0, this.minClass = 0, 
    this.args.width = 1100, this.args.height = 500, this.args.backgroundColor = "#FFFFFF", 
    this.args.backgroundImage = null, this.args.backgroundImageHeight = null, this.args.backgroundImageWidth = null, 
    this.args.backgroundImageX = null, this.args.backgroundImageY = null, this.args.balanceNodes = !1, 
    this.args.nodesMaxSize = 3, this.args.nodesMinSize = .5, this.args.zoomScale = 1, 
    this.args.zoomScaleStepFactor = .4, null != c && (null != c.backgroundImage && (this.args.backgroundImage = c.backgroundImage), 
    null != c.width && (this.args.width = c.width), null != c.height && (this.args.height = c.height, 
    this.args.svgHeight = c.height), null != c.svgHeight && (this.args.svgHeight = c.svgHeight), 
    null != c.backgroundColor && (this.args.backgroundColor = c.backgroundColor), null != c.balanceNodes && (this.args.balanceNodes = c.balanceNodes), 
    null != c.nodesMaxSize && (this.args.nodesMaxSize = c.nodesMaxSize), null != c.nodesMinSize && (this.args.nodesMinSize = c.nodesMinSize)), 
    this.args.defaultEdgeProperties = {
        fill: "#000000",
        radius: "1",
        stroke: "#000000",
        size: 1,
        title: {
            fontSize: 10,
            fontColor: "#000000"
        }
    }, this.args.vertexFormatProperties = {
        fill: "#000000",
        stroke: "#000000",
        "stroke-opacity": "#000000"
    }, null != a && (this.args.vertexFormatProperties = a), null != b && (this.args.defaultEdgeProperties = b), 
    this.changed = new Event(this), this.edgeChanged = new Event(this), this.resized = new Event(this), 
    this.backgroundImageChanged = new Event(this), this.backgroundColorChanged = new Event(this);
}

function NetworkWidget(a) {
    this.id = "NetworkViewer_" + Math.random().toString().replace(".", "_"), this.label = !0, 
    null != a && (null != a.targetId && (this.targetId = a.targetId), null != a.label && (this.label = a.label)), 
    this.onVertexOver = new Event(this), this.onVertexOut = new Event(this);
}

function Vertex(a, b, c) {
    GraphItem.prototype.constructor.call(this, a, b, c), this.edgesIn = new Array(), 
    this.edgesOut = new Array();
}

function VertexGraphFormatter(a, b, c, d) {
    ItemGraphFormatter.prototype.constructor.call(this, a, b, c, d);
}

function CircleVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "CircleVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function SquareVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "SquareVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function EllipseVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "EllipseVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function RectangleVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "RectangleVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function RoundedVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "RoundedVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function OctagonVertexGraphFormatter(a, b, c, d, e) {
    VertexGraphFormatter.prototype.constructor.call(this, a, b, c, d, e), this.args.type = "OctagonVertexGraphFormatter", 
    null != b && null != b.radius && (this.defaultFormat.args.radius = b.radius), null != c && null != c.radius && (this.selected.args.radius = c.radius), 
    null != d && null != d.radius && (this.over.args.radius = d.radius), null != e && null != e.radius && (this.dragging.args.draggingFormat = e.radius);
}

function SamplePlateGroupWidget(a) {
    this.id = BUI.id(), this.width = 900, this.height = 300, this.titleTypePlate = 20, 
    this.margin = 0, this.samplePlateWidgets = [], this.bbar = !1, this.border = 1, 
    this.showTitle = !0, this.title = null, this.nodeSize = 8, null != a && (null != a.margin && (this.margin = a.margin), 
    null != a.bbar && (this.bbar = a.bbar), null != a.showTitle && (this.showTitle = a.showTitle, 
    this.showTitle && (this.title = "Plates Groups")), null != a.border && (this.border = a.border), 
    null != a.height && (this.height = a.height)), this.heightPlates = this.height - this.titleTypePlate - 60, 
    this.onClick = new Event(this), this.onExperimentChanged = new Event(this);
}

function SamplePlateWidget(a) {
    this.actions = [], this.width = "1", this.height = "1", this.legendFontSize = 7, 
    this.backgroundColor = "#E6E6E6", this.wellColor = "#FFFFFF ", this.id = BUI.id(), 
    this.notSupportedMessage = "IE doesn't support HTML5 features", this.nodeSize = 14, 
    this.fontSize = 10, this.strokeWidth = 2, this.showTooltip = !0, this.showBorderLabels = !0, 
    this.showFullName = !1, this.showLabels = !1, null != a && (null != a.showBorderLabels && (this.showBorderLabels = a.showBorderLabels), 
    null != a.showLabels && (this.showLabels = a.showLabels), null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height), null != a.nodeSize && (this.nodeSize = a.nodeSize), 
    null != a.notSupportedMessage && (this.notSupportedMessage = a.notSupportedMessage), 
    null != a.fontSize && (this.fontSize = a.fontSize), null != a.showFullName && (this.showFullName = a.showFullName), 
    null != a.showTooltip && (this.showTooltip = a.showTooltip), null != a.backgroundColor && (this.backgroundColor = a.backgroundColor), 
    null != a.strokeWidth && (this.strokeWidth = a.strokeWidth)), this.ids = {}, this.onVertexUp = new Event(this), 
    this.selectedSVGNodes = [], this.markedSpecimenId = {};
}

function SpecimenWidget(a) {
    this.width = 1e3, this.height = 600, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
    var b = this;
    this.specimenGrid = new SpecimenGrid({
        minHeight: 425,
        selectionMode: "SINGLE",
        editEnabled: !1,
        updateRowEnabled: !0,
        width: 900,
        showTitle: !1
    }), this.specimenGrid.onSpecimenChanged.attach(function(a, c) {
        b.experiment.setSpecimenById(c), b.refresh(b.experiment);
    }), this.specimenGrid.onSelected.attach(function(a, c) {
        c.length > 0 ? b.specimenSelected = c[0] : b.specimenSelected = null, b.samplePlateGroupWidget.selectSpecimens(c);
    }), this.samplePlateGroupWidget = new SamplePlateGroupWidget({
        showTitle: !1,
        height: 250,
        margin: 5,
        bbar: !1
    }), this.samplePlateGroupWidget.onExperimentChanged.attach(function(a, c) {
        b.refresh(new Experiment(c));
    }), this.samplePlateGroupWidget.onClick.attach(function(a, c) {
        var d = c.row, e = c.column, f = c.samplePlate.samplePlateId;
        if (null != b.specimenSelected) if (0 == b.experiment.getSampleByPosition(c.samplePlate.samplePlateId, c.row, c.column).length) {
            var g = b.experiment.getSampleById(b.specimenSelected.specimenId);
            null == g.sampleplateposition3VO && (g.sampleplateposition3VO = {}), g.sampleplateposition3VO = {
                columnNumber: e,
                rowNumber: d,
                samplePlateId: f
            }, b.samplePlateGroupWidget.panel.setLoading("ISPyB: Saving specimen");
            var h = function(a, c) {
                b.samplePlateGroupWidget.panel.setLoading(!1);
            };
            EXI.getDataAdapter({
                onSuccess: h
            }).saxs.specimen.saveSpecimen(g), b.samplePlateGroupWidget.refresh(b.experiment), 
            b.specimenGrid.refresh(b.experiment), b.specimenSelected = null, b.specimenGrid.deselectAll();
        } else {
            var i = b.experiment.getSampleByPosition(c.samplePlate.samplePlateId, c.row, c.column)[0], g = b.experiment.getSampleById(b.specimenSelected.specimenId);
            if (g.bufferId == i.bufferId && g.concentration == i.concentration) {
                if (null != g.macromolecule3VO && null != i.macromolecule3VO && g.macromolecule3VO.macromoleculeId == i.macromolecule3VO.macromoleculeId || null == g.macromolecule3VO && null == i.macromolecule3VO) {
                    var h = function(a, c) {
                        b.refresh(new Experiment(c)), b.samplePlateGroupWidget.panel.setLoading(!1), b.onExperimentChanged.notify(experiment);
                    };
                    b.samplePlateGroupWidget.panel.setLoading("ISPyB: Merging specimens"), EXI.getDataAdapter({
                        onSuccess: h
                    }).saxs.specimen.mergeSpecimens(g.specimenId, i.specimenId), b.specimenSelected = null, 
                    b.specimenGrid.deselectAll();
                }
            } else alert("Well is not empty. Select another well!");
        } else {
            var g = b.experiment.getSampleByPosition(c.samplePlate.samplePlateId, c.row, c.column)[0];
            null != g && b.specimenGrid.selectById(g.specimenId);
        }
    }), this.onExperimentChanged = new Event(this);
}

function ContainerSpreadSheet(a) {
    this.id = BUI.id(), this.height = 380, this.width = 500, null != a && (null != a.height && (this.height = a.height), 
    null != a.width && (this.width = a.width)), this.onModified = new Event(this);
}

function SurfaceScatteringViewer() {
    this.id = BUI.id(), this.originalData = [], this.scale = 1;
}

function MacromoleculeTabs(a) {
    this.width = 500, this.height = 500, null != a && (null != a.width && (this.width = a.width), 
    null != a.height && (this.height = a.height));
    var b = this;
    this.macromoleculeForm = new MacromoleculeForm({
        width: this.width - 30,
        height: this.height - 50
    }), this.macromoleculeForm.onClose.attach(function(a) {
        b.onClose.notify();
    }), this.macromoleculeForm.onSave.attach(function(a, c) {
        b.onSave.notify(c);
    }), this.assemblyForm = new AssemblyForm({
        width: this.width - 30,
        height: this.height - 50
    }), this.rigibBodyModelingForm = new RigibBodyModelingForm({
        width: this.width - 30,
        height: this.height - 50
    }), this.onClose = new Event(this), this.onSave = new Event(this);
}

function ShipmentTabs(a) {
    this.targetId = a;
    var b = this;
    this.gridHeight = 500, this.shipment = null, this.shipmentForm = new ShipmentForm({
        creationMode: !1,
        showTitle: !1
    }), this.shipmentForm.onSaved.attach(function(a, c) {
        b.refresh(c);
    }), this.caseGrid = new CaseGrid({
        height: this.gridHeight
    }), this.caseGrid.onAddButtonClicked.attach(function(a, c) {
        b.caseGrid.grid.setLoading("ISPyB: Creating a new case");
        var d = new BiosaxsDataAdapter();
        d.onSuccess.attach(function(a, c) {
            for (var d = 0; d < BIOSAXS.proposal.shippings.length; d++) BIOSAXS.proposal.shippings[d].shippingId == c.shippingId && (BIOSAXS.proposal.shippings[d] = c);
            b.refresh(c);
        }), d.onError.attach(function(a, c) {
            b.caseGrid.grid.setLoading(!1);
        }), d.addCase(b.shipment.json.shippingId);
    }), this.caseGrid.onRemoveButtonClicked.attach(function(a, c) {
        b.panel.setLoading("ISPyB: removing case"), b.shipment.onSaved.attach(function(a, c) {
            b.refresh(c);
        }), b.shipment.removeCase(c);
    });
}

function TemplateTabs(a) {
    this.height = 600, this.targetId = a, this.id = BUI.id();
    var b = this;
    this.gridHeight = 1e3, this.experiment = null, this.specimenSelected = null, this.specimenWidget = new SpecimenWidget({
        height: this.height
    }), this.samplePlateGroupWidget = new SamplePlateGroupWidget({
        showTitle: !1,
        height: 250,
        margin: 5,
        bbar: !0
    }), this.samplePlateGroupWidget.onExperimentChanged.attach(function(a, c) {
        b.refresh(c);
    }), this.samplePlateGroupWidget.onClick.attach(function(a, b) {}), this.volumePlanificator = new VolumeGrid();
    var c = Ext.create("Ext.data.Store", {
        fields: [ "name" ],
        data: [ {
            name: "low"
        }, {
            name: "medium"
        }, {
            name: "high"
        } ]
    }), d = Ext.create("Ext.form.ComboBox", {
        fieldLabel: "",
        store: c,
        queryMode: "local",
        displayField: "name",
        valueField: "name"
    });
    this.measurementGrid = new MeasurementGrid({
        maxWidth: 1500,
        estimateTime: !1,
        positionColumnsHidden: !0,
        isPriorityColumnHidden: !0,
        isStatusColumnHidden: !0,
        isTimeColumnHidden: !0,
        updateRowEnabled: !0,
        collapsed: !0,
        removeBtnEnabled: !0,
        showTitle: !1,
        collapseBtnEnable: !1,
        addBtnMultipleEdit: !0,
        sortingBtnEnable: !0,
        editor: {
            exposureTemperature: {
                xtype: "textfield",
                allowBlank: !0
            },
            comments: {
                xtype: "textfield",
                allowBlank: !0
            },
            volumeToLoad: {
                xtype: "numberfield",
                allowBlank: !0
            },
            transmission: {
                xtype: "numberfield",
                allowBlank: !0
            },
            viscosity: d,
            waitTime: {
                xtype: "numberfield",
                allowBlank: !0
            },
            flow: {
                xtype: "checkbox",
                allowBlank: !0
            }
        }
    }), this.measurementGrid.onSelected.attach(function(a, c) {
        for (var d = [], e = 0; e < c.length; e++) d.push(b.experiment.getSampleById(c[e].specimenId));
    }), this.measurementGrid.onMeasurementChanged.attach(function(a, c) {
        b.experiment.setMeasurement(c), b.refresh(b.experiment);
    }), this.measurementGrid.onExperimentChanged.attach(function(a, c) {
        b.refresh(new Experiment(c));
    }), this.measurementGrid.onRemoved.attach(function(a, c) {
        b.refreshSpecimen(new Experiment(c));
    }), this.measurementGrid.onUpdateTime.attach(function(a, c) {
        document.getElementById(b.id + "_counter").innerHTML = c.hours + "h,  " + c.minutes + "min and " + c.seconds + " seconds";
    });
}

function SessionTimeLineWidget() {
    this.discarded = {
        ID13: !0,
        "ID16A-NI": !0,
        "ID16B-NA": !0,
        ID02: !0,
        ID21: !0,
        BM01A: !0,
        ID17: !0,
        ID09B: !0
    }, this.onSelected = new Event(this);
}

function UploaderWidget(a) {
    this.id = BUI.id(), this.url = a, null == a && Ext.Msg.alert("Error", "Please, set an url"), 
    this.onUploaded = new Event(this);
}

function CaseWindow(a) {
    this.width = 900, this.height = 500, null != a && null != a.actions && (this.actions = a.actions);
    var b = this;
    this.onRemoveAdditive = new Event(this), this.form = new CaseForm(), this.form.onAddPlates.attach(function(a, c) {
        b.onSavePlates.notify(c);
    }), this.form.onRemovePlates.attach(function(a, c) {
        b.onSavePlates.notify([ c ]);
    }), GenericWindow.prototype.constructor.call(this, {
        title: "Edit Case",
        form: this.form,
        width: this.width,
        height: this.height
    });
}

function GenericWindow(a) {
    this.title = "title", this.width = 700, this.height = 500, this.id = BUI.id(), this.close = !1, 
    this.draggable = !0, this.modal = !0, null != a && (null != a.actions && (this.actions = a.actions), 
    null != a.form && (this.form = a.form), null != a.width && (this.width = a.width), 
    null != a.modal && (this.modal = a.modal), null != a.height && (this.height = a.height), 
    null != a.title && (this.title = a.title), null != a.form && (this.form = a.form), 
    null != a.close && (this.close = a.close), null != a.draggable && (this.draggable = a.draggable)), 
    this.onSaved = new Event(this);
}

function MacromoleculeWindow(a) {
    this.width = 900, this.height = 700, null != a && null != a.actions && (this.actions = a.actions), 
    this.macromoleculeTabs = new MacromoleculeTabs({
        width: this.width - 10,
        height: this.height - 50
    });
    var b = this;
    this.macromoleculeTabs.onSave.attach(function(a, c) {
        debugger;
        b.onSave.notify(), b.refresh(c);
    }), this.macromoleculeTabs.onClose.attach(function(a) {
        b.panel.close();
    }), this.onSave = new Event();
}

function StockSolutionWindow(a) {
    this.width = 700, this.height = 600, null != a && null != a.actions && (this.actions = a.actions), 
    _this = this, this.form = new StockSolutionForm(), this.form.onSaved.attach(function(a, b) {
        _this.save();
    }), GenericWindow.prototype.constructor.call(this, {
        form: this.form,
        width: this.width,
        height: this.height
    }), this.onSaved = new Event(this);
}

function SubtractionSelectorWindow() {
    this.grid = new QueueGrid({
        height: 450,
        maxHeight: 300,
        title: !1,
        collapsible: !1,
        selectionMode: "single",
        sorters: [ {
            property: "macromoleculeAcronym",
            direction: "ASC"
        } ]
    });
    var a = this;
    this.grid.onSelect.attach(function(b, c) {
        a.selected = [ c ];
    }), this.onSelect = new Event(), this.selected = [];
}

function FinalStepWizardForm(a) {
    this.result = {}, this.id = BUI.id(), this.title = "Confirmation", this.description = "This is the last step of this wizard. Write a name and a description (optional) for your experiment. Remember you are able to add new measurements later on", 
    this.height = 500, this.data = {
        measurements: a
    };
    var b = this;
    this.onNext = function(a) {
        this.result = {
            name: Ext.getCmp(b.id + "name").getValue(),
            comments: Ext.getCmp(b.id + "description").getValue(),
            data: b.data.measurements
        }, b.onWizardFinished.notify(this.result);
    }, this.onBack = function() {}, this.onWizardFinished = new Event(this);
}

function GenericStepWizardForm(a, b, c, d, e) {
    this.id = BUI.id(), this.title = a, this.description = b, this.data = c, this.onNext = d, 
    this.onBack = e;
}

function MeasurementCreatorStepWizardForm(a, b, c) {
    var d = this;
    this.height = 700, this.noNext = !1, this.macromolecules = a, this.buffers = b, 
    GenericStepWizardForm.call(this, "Define Measurements", {
        margin: "0 0 0 0",
        width: 800,
        border: 0,
        html: "Define only the macromolecule's measurement you want to make. This wizard will add <span style='font-weight:bold;'> buffers' measurement needed for substraction automatically. </span>"
    }, {
        measurementsSelected: null
    }, function() {
        var a = {
            name: Ext.getCmp(d.id + "name").getValue(),
            comments: Ext.getCmp(d.id + "comments").getValue(),
            data: JSON.stringify(d.parseMeasurements(d.data.measurementsSelected))
        };
        d.onWizardFinished.notify(a);
    }, function() {}), null != c && null != c.noNext && (this.noNext = c.noNext), this.noNext && (this.onWizardFinished = new Event(this)), 
    this.onWizardFinished = new Event(this);
}

function SampleAutomaticPositionFactory(a) {
    this.samples = a;
}

function WizardWidget(a) {
    this.targetId = null, this.width = 910, this.height = 400, this.windowMode = !0, 
    null != a && (null != a.windowMode && (this.windowMode = a.windowMode), null != a.width && (this.width = a.width)), 
    this.step = 0, this.forms = [], this.onFinished = new Event(this);
}

function ListView() {
    this.width = 250, this.height = Ext.getBody().getHeight() - 215, this.onSelect = new Event();
}

function AddressListView() {
    this.sorters = [ {
        property: "cardName",
        direction: "ASC"
    } ], ListView.call(this);
}

function PuckListView() {
    this.sorters = [ {
        property: "sessionId",
        direction: "DESC"
    } ], ListView.call(this);
}

function SessionListView() {
    this.sorters = [ {
        property: "sessionId",
        direction: "DESC"
    } ], ListView.call(this);
}

function ShippingListView() {
    this.sorters = [ {
        property: "sessionId",
        direction: "DESC"
    } ], ListView.call(this);
}

function WorkSpaceListView() {
    this.width = 250, this.height = 800, this.selectionMenu = new SelectionMenu(), this.onSelect = new Event(), 
    this.projectId = null;
}

function RunListView() {
    this.sorters = [], ListView.call(this);
}

function CrystalListView() {
    ListView.call(this);
}

function ProteinListView() {
    ListView.call(this);
}

function BufferListView() {
    ListView.call(this);
}

function DataCollectionListView() {
    ListView.call(this);
}

function ExperimentListView() {
    this.sorters = [ {
        property: "experimentId",
        direction: "DESC"
    } ], ListView.call(this);
}

function MacromoleculeListView() {
    this.sorters = [ {
        property: "experimentId",
        direction: "DESC"
    } ], ListView.call(this);
}

function StockSolutionListView() {
    this.sorters = [ {
        property: "experimentId",
        direction: "DESC"
    } ], ListView.call(this);
}

function TemplateListView() {
    this.sorters = [ {
        property: "experimentId",
        direction: "DESC"
    } ], ListView.call(this);
}

function MainView() {
    this.id = BUI.id(), this.title = "New Tab", this.closable = !0, this.onSelectionChange = new Event(this), 
    this.onSelect = new Event(this), this.onDeselect = new Event(this), this.bodyStyle = {
        "background-color": "#FAFAFA"
    };
}

function PuckMainView() {
    this.icon = "../images/BasketView_24x24_01.png", MainView.call(this);
    this.puckForm = new PuckForm({
        width: 1500
    });
}

function AddressMainView() {
    this.icon = "../images/icon/contacts.png", this.queueGridList = [], MainView.call(this), 
    this.addressForm = new AddressForm(), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function UserWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Home", 
    this.closable = !1, this.proposalGrid = new ProposalGrid({
        height: 300
    });
    var a = this;
    this.proposalGrid.onSelected.attach(function(b, c) {
        a.panel.setLoading(!0), a.activeProposal(c), a.panel.setLoading(!1);
    }), this.todaySessionsGrid = new SessionGrid({
        width: null,
        height: 125,
        title: "You have got sessions scheduled for today",
        hiddenGoColumn: !1
    }), this.futureSessionsGrid = new SessionGrid({
        width: null,
        height: 450,
        title: "Next scheduled sessions",
        margin: "20 0 0 00"
    }), this.previousSessionsGrid = new SessionGrid({
        width: null,
        height: 450,
        title: "Previous sessions",
        margin: "20 0 0 10",
        hiddenGoColumn: !1
    }), EXI.credentialManager.onActiveProposalChanged.attach(function(a, b) {});
}

function ManagerWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Home", 
    this.closable = !1;
}

function ShippingMainView() {
    MainView.call(this);
    this.shipmentForm = new ShipmentForm(), this.shipmentForm.onSaved.attach(function(a, b) {
        location.hash = "#/proposal/shipping/nav?nomain";
    }), this.parcelGrid = new ParcelGrid({
        height: 300
    });
}

function BufferWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Macromolecules", 
    this.closable = !1;
}

function ExperimentWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Welcome", 
    this.closable = !1;
}

function MacromoleculeWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Macromolecules", 
    this.closable = !1;
}

function ShipmentPreparationMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "How to prepare a Shipment?", 
    this.closable = !1;
}

function ShippingWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Welcome", 
    this.closable = !1;
}

function StockSolutionWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Macromolecules", 
    this.closable = !1;
}

function HPLCMainView() {
    this.title = "Experiment", this.icon = "images/icon/ic_satellite_black_18dp.png", 
    this.queueGridList = [], MainView.call(this), this.grid = new QueueGrid({
        collapsed: !0,
        positionColumnsHidden: !0,
        maxHeight: Ext.getCmp("main_panel").getHeight() - 50,
        sorters: [ {
            property: "macromoleculeAcronym",
            direction: "ASC"
        } ]
    }), this.grid.onSelectionChange.attach(function(b, c) {
        a.onSelectionChange.notify(c);
    }), this.grid.onSelect.attach(function(b, c) {
        a.onSelect.notify(c);
    }), this.grid.onDeselect.attach(function(b, c) {
        a.onDeselect.notify(c);
    });
    var a = this;
    a.annotations = [], a.selectedFrameNumber = [], this.hplcGraph = new HPLCGraph({
        title: "I0",
        width: 800,
        height: 350,
        bbar: !0,
        plots: {
            I0: !0,
            Rg: !0
        },
        xlabel: "HPLC Frames",
        scaled: !0,
        interactionModel: {
            dblclick: function(b, c, d) {
                a.selectedFrameNumber.push(c.lastx_), a.plotter.loadHPLCFrame(a.experimentId, a.selectedFrameNumber), 
                a.annotations.push({
                    series: c.selPoints_[0].name,
                    x: c.lastx_,
                    width: 30,
                    height: 23,
                    tickHeight: 2,
                    shortText: c.lastx_,
                    text: c.lastx_,
                    attachAtBottom: !0
                }), c.setAnnotations(a.annotations);
            }
        }
    }), this.hplcGraph.onClearSelection.attach(function(b) {
        a.annotations = [], a.selectedFrameNumber = [], a.hplcGraph.dygraphObject.dygraph.setAnnotations([]);
    }), this.plotter = new CurvePlotter({
        margin: "10 0 0 0"
    }), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function AddressWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Macromolecules", 
    this.closable = !1;
}

function PuckWelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Macromolecules", 
    this.closable = !1;
}

function BufferMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", this.queueGridList = [], 
    MainView.call(this), this.bufferForm = new BufferForm({
        height: 800,
        collapsed: !1,
        tbar: !0
    });
    this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function DesignerMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", this.queueGridList = [], 
    MainView.call(this);
    this.wizardWidget = new WizardWidget({
        windowMode: !0,
        width: 1200
    }), this.wizardWidget.onFinished.attach(function(a, b) {
        EXI.setLoading();
        var c = function(a, b) {
            location.hash = "/experiment/templateId/" + b.experimentId + "/main";
        };
        EXI.getDataAdapter({
            onSuccess: c
        }).saxs.template.saveTemplate(b.name, b.comments, b.data);
    }), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function ExperimentDesignerMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", this.queueGridList = [], 
    MainView.call(this), this.templateGrid = new TemplateGrid({
        minHeight: 300,
        height: 440,
        gridType: "Ext.grid.Panel",
        title: "Experiments",
        grouping: !1,
        tbar: !0
    }), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function MacromoleculeMainView() {
    this.icon = "../images/icon/macromolecule.png", this.queueGridList = [], MainView.call(this), 
    this.macromoleculeForm = new MacromoleculeForm({
        height: 800,
        collapsed: !1,
        tbar: !0
    }), this.rigidBodyModelingForm = new RigidBodyModelingForm({}), this.rigidBodyModelingForm.onSave.attach(function(a, b) {});
    this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function StockSolutionMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", this.queueGridList = [], 
    MainView.call(this), this.stockSolutionForm = new StockSolutionForm({
        minHeight: 800,
        height: 800,
        tbar: !0,
        showTitle: !0,
        isPackedVisible: !1,
        btnAddExisting: !1,
        btnRemoveVisible: !1,
        btnUnpackVisible: !1
    });
    var a = this;
    this.stockSolutionForm.onSaved.attach(function(b, c) {
        var d = function(b, c) {
            a.stockSolutionForm.load(EXI.proposalManager.getStockSolutionById(a.stockSolutionId)), 
            a.panel.setLoading(!1);
        };
        a.panel.setLoading("Updading proposal information"), EXI.getDataAdapter({
            onSuccess: d
        }).proposal.proposal.update();
    }), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function TemplateMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", this.queueGridList = [], 
    MainView.call(this), this.experimentHeaderForm = new ExperimentHeaderForm();
    var a = this, b = Ext.create("Ext.data.Store", {
        fields: [ "name" ],
        data: [ {
            name: "low"
        }, {
            name: "medium"
        }, {
            name: "high"
        } ]
    }), c = Ext.create("Ext.form.ComboBox", {
        fieldLabel: "",
        store: b,
        queryMode: "local",
        displayField: "name",
        valueField: "name"
    });
    this.specimenWidget = new SpecimenWidget({
        height: this.height,
        width: 1200
    }), this.measurementGrid = new MeasurementGrid({
        height: 600,
        minHeight: 600,
        maxHeight: 600,
        estimateTime: !1,
        positionColumnsHidden: !0,
        isPriorityColumnHidden: !0,
        isStatusColumnHidden: !0,
        addBtnEnable: !0,
        isTimeColumnHidden: !0,
        updateRowEnabled: !0,
        collapsed: !0,
        removeBtnEnabled: !0,
        showTitle: !1,
        collapseBtnEnable: !1,
        addBtnMultipleEdit: !0,
        sortingBtnEnable: !0,
        editor: {
            exposureTemperature: {
                xtype: "textfield",
                allowBlank: !0
            },
            comments: {
                xtype: "textfield",
                allowBlank: !0
            },
            volumeToLoad: {
                xtype: "numberfield",
                allowBlank: !0
            },
            transmission: {
                xtype: "numberfield",
                allowBlank: !0
            },
            viscosity: c,
            waitTime: {
                xtype: "numberfield",
                allowBlank: !0
            },
            flow: {
                xtype: "checkbox",
                allowBlank: !0
            }
        }
    }), this.measurementGrid.onMeasurementChanged.attach(function(b, c) {
        a.experiment.setMeasurement(c), a.measurementGrid.loadExperiment(a.experiment), 
        a.volumePlanificator.load(a.experiment);
    }), this.measurementGrid.onExperimentChanged.attach(function(b, c) {
        a.experiment = new Experiment(c), a.measurementGrid.loadExperiment(a.experiment), 
        a.specimenWidget.refresh(a.experiment), a.volumePlanificator.load(a.experiment);
    }), this.measurementGrid.onRemoved.attach(function(b, c) {
        a.experiment = new Experiment(c[0]), a.specimenWidget.refresh(a.experiment), a.volumePlanificator.load(a.experiment);
    }), this.volumePlanificator = new VolumeGrid();
}

function DataCollectionMainView() {
    this.title = "Experiment", this.icon = "images/icon/ic_satellite_black_18dp.png", 
    MainView.call(this), this.grid = new QueueGrid({
        positionColumnsHidden: !0,
        maxHeight: Ext.getCmp("main_panel").getHeight() - 50,
        sorters: [ {
            property: "macromoleculeAcronym",
            direction: "ASC"
        } ]
    }), this.onSelect = new Event(this), this.onDeselect = new Event(this);
}

function ExperimentMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this), this.experimentHeaderForm = new ExperimentHeaderForm();
    var a = this, b = Ext.create("Ext.data.Store", {
        fields: [ "name" ],
        data: [ {
            name: "low"
        }, {
            name: "medium"
        }, {
            name: "high"
        } ]
    }), c = Ext.create("Ext.form.ComboBox", {
        fieldLabel: "",
        store: b,
        queryMode: "local",
        displayField: "name",
        valueField: "name"
    });
    this.specimenWidget = new SpecimenWidget({
        height: this.height,
        width: 1200
    }), this.measurementGrid = new MeasurementGrid({
        height: 600,
        minHeight: 600,
        maxHeight: 600,
        estimateTime: !1,
        positionColumnsHidden: !1,
        isPriorityColumnHidden: !0,
        isStatusColumnHidden: !1,
        addBtnEnable: !1,
        isTimeColumnHidden: !1,
        updateRowEnabled: !1,
        collapsed: !1,
        removeBtnEnabled: !1,
        showTitle: !1,
        collapseBtnEnable: !1,
        addBtnMultipleEdit: !1,
        sortingBtnEnable: !1,
        editor: {
            exposureTemperature: {
                xtype: "textfield",
                allowBlank: !0
            },
            comments: {
                xtype: "textfield",
                allowBlank: !0
            },
            volumeToLoad: {
                xtype: "numberfield",
                allowBlank: !0
            },
            transmission: {
                xtype: "numberfield",
                allowBlank: !0
            },
            viscosity: c,
            waitTime: {
                xtype: "numberfield",
                allowBlank: !0
            },
            flow: {
                xtype: "checkbox",
                allowBlank: !0
            }
        }
    }), this.measurementGrid.onMeasurementChanged.attach(function(b, c) {
        a.experiment.setMeasurement(c), a.measurementGrid.loadExperiment(a.experiment), 
        a.volumePlanificator.load(a.experiment);
    }), this.measurementGrid.onExperimentChanged.attach(function(b, c) {
        a.experiment = new Experiment(c), a.measurementGrid.loadExperiment(a.experiment), 
        a.specimenWidget.refresh(a.experiment), a.volumePlanificator.load(a.experiment);
    }), this.measurementGrid.onRemoved.attach(function(b, c) {
        a.experiment = new Experiment(c[0]), a.specimenWidget.refresh(a.experiment), a.volumePlanificator.load(a.experiment);
    }), this.queueGrid = new QueueGrid({
        positionColumnsHidden: !0,
        sorters: [ {
            property: "macromoleculeAcronym",
            direction: "ASC"
        } ]
    });
}

function MergeMainView() {
    this.title = "Primary Data View", this.icon = "images/icon/ic_blur_on_black_18dp.png", 
    this.queueGridList = [];
    var a = this;
    this.plotter = new CurvePlotter({}), this.formPopulated = !1, this.plotter.onRendered.attach(function(b) {
        if (!a.formPopulated) {
            for (var c = {}, d = 1; d < b.getLabels().length; d++) c[b.getLabels()[d]] = b.getColors()[d - 1];
            a.populateForm(b.getPointCount(), c), a.formPopulated = !0;
        }
        plotter = b;
    });
}

function PrimaryDataMainView() {
    this.title = "Primary Data View", this.icon = "images/icon/ic_blur_on_black_18dp.png", 
    MainView.call(this), this.onMeasurementSelectionChange = new Event(this);
    var a = this;
    this.frameSelectorGrid = new FrameSelectorGrid(), this.frameSelectorGrid.onSelectionChange.attach(function(b, c) {
        a.plotter.load(c);
    }), this.plotter = new CurvePlotter({}), this.grid = new QueueGrid({
        maxHeight: 300
    }), this.abinitioForm = new AbinitioForm({
        height: 700
    });
}

function AutoProcIntegrationMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this);
    var a = this;
    this.autoProcIntegrationGrid = new AutoProcIntegrationGrid({
        maxHeight: 400
    }), this.autoProcIntegrationGrid.onSelected.attach(function(b, c) {
        for (var d = [], e = 0; e < c.length; e++) d.push(c[e].autoProcIntegrationId);
        if (a.loadPlots(d), 1 == c.length) {
            var f = a.getByAutoProcId(c[0].autoProcId);
            null != f && a.autoProcIntegrationAttachmentGrid.load(f);
        }
    }), this.autoProcIntegrationAttachmentGrid = new AutoProcIntegrationAttachmentGrid({
        margin: "0 20 0 10",
        maxHeight: 400,
        width: 300
    }), this.completenessPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "Completeness vs Resolution",
        legend: "never"
    }), this.completenessPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.rFactorPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "Rfactor vs Resolution",
        legend: "never"
    }), this.rFactorPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.isigmaPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "I/SigmaI vs Resolution",
        legend: "never"
    }), this.isigmaPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.cc2Plotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "CC/2 vs Resolution",
        legend: "never"
    }), this.cc2Plotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.sigmaAnnoPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "SigAno vs Resolution",
        legend: "never"
    }), this.sigmaAnnoPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.wilsonPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "Wilson Plot",
        legend: "never"
    }), this.wilsonPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.annoCorrPlotter = new AutoProcIntegrationCurvePlotter({
        height: 150,
        title: "Anom Corr vs Resolution",
        legend: "never"
    }), this.annoCorrPlotter.onPointClickCallback.attach(function(b, c) {
        a.onPlotClicked(c);
    }), this.autoProcIntegrationPhasingGrid = new AutoProcIntegrationGrid({
        maxHeight: 500
    }), this.autoProcIntegrationPhasingGrid.onSelected.attach(function(b, c) {
        for (var d = [], e = 0; e < c.length; e++) d.push(c[e].autoProcId);
        a.phasingGrid.panel.setLoading();
        var f = function(b, c) {
            var d = [];
            if (null != c && c.length > 0 && null != c[0].phasinganalysis) for (var e = 0; e < c[0].phasinganalysis.length; e++) {
                var f = 0;
                if (c[0].phasinganalysis[e].modelbuilding.length > 0) for (f = 0; f < c[0].phasinganalysis[e].modelbuilding.length; f++) d.push(c[0].phasinganalysis[e].modelbuilding[f]), 
                d[d.length - 1].name = "modelbuilding", d[d.length - 1] = $.extend({}, d[d.length - 1], c[0].phasinganalysis[e].modelbuilding[f].spaceGroupVO), 
                d[d.length - 1].phasingAnalysisId = c[0].phasinganalysis[e].modelbuilding[f].phasingAnalysisVO.phasingAnalysisId;
                if (c[0].phasinganalysis[e].preparephasingdata.length > 0) for (f = 0; f < c[0].phasinganalysis[e].preparephasingdata.length; f++) d.push(c[0].phasinganalysis[e].preparephasingdata[f]), 
                d[d.length - 1].name = "preparephasingdata", d[d.length - 1] = $.extend({}, d[d.length - 1], c[0].phasinganalysis[e].preparephasingdata[f].spaceGroupVO), 
                d[d.length - 1].phasingAnalysisId = c[0].phasinganalysis[e].preparephasingdata[f].phasingAnalysisVO.phasingAnalysisId;
                if (c[0].phasinganalysis[e].phasing.length > 0) for (f = 0; f < c[0].phasinganalysis[e].phasing.length; f++) d.push(c[0].phasinganalysis[e].phasing[f]), 
                d[d.length - 1].name = "phasing", d[d.length - 1] = $.extend({}, d[d.length - 1], c[0].phasinganalysis[e].phasing[f].spaceGroup3VO), 
                d[d.length - 1].phasingAnalysisId = c[0].phasinganalysis[e].phasing[f].phasingAnalysisVO.phasingAnalysisId;
                if (c[0].phasinganalysis[e].substructureDetermination3VO.length > 0) for (f = 0; f < c[0].phasinganalysis[e].substructureDetermination3VO.length; f++) d.push(c[0].phasinganalysis[e].substructureDetermination3VO[f]), 
                d[d.length - 1].name = "substructureDetermination", d[d.length - 1] = $.extend({}, d[d.length - 1], c[0].phasinganalysis[e].substructureDetermination3VO[f].spaceGroupVO), 
                d[d.length - 1].phasingAnalysisId = c[0].phasinganalysis[e].substructureDetermination3VO[f].phasingAnalysisVO.phasingAnalysisId;
            }
            a.phasingGrid.load(d), a.phasingGrid.panel.setLoading(!1);
        };
        EXI.getDataAdapter({
            onSuccess: f
        }).mx.autoProcIntegrationDataAdapter.getPhasingByAutoprocIds(d);
    }), this.phasingGrid = new PhasingGrid({
        margin: "0 0 0 10"
    });
}

function CrystalMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this);
    this.crystalForm = new CrystalForm();
}

function DataCollectionMxMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this);
    this.dataCollectionSummaryGrid = new DataCollectionSummaryGrid();
}

function ImageMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this);
    var a = this;
    this.imageViewer = new ImageResolutionViewer(), this.detectorResolution = {
        pixelSize: {
            x: 1475,
            y: 1679
        },
        sensitiveArea: {
            x: 253.7,
            y: 288.8
        },
        pixelSizeHorizontal: .172
    }, this.surfaceScatteringViewer = new SurfaceScatteringViewer(), this.imageViewer.onImageRendered.attach(function(b, c) {
        a.surfaceScatteringViewer.load(c);
    });
}

function WorkflowStepMainView() {
    this.icon = "images/icon/ic_satellite_black_18dp.png", MainView.call(this);
}

function WelcomeMainView() {
    this.icon = "../images/icon/rsz_ic_home_black_24dp.png", MainView.call(this), this.title = "Welcome", 
    this.closable = !0;
}

function SubtractionMainView() {
    this.title = "Experiment", this.icon = "images/icon/ic_satellite_black_18dp.png", 
    this.queueGridList = [], this.id = BUI.id(), MainView.call(this), this.subtractionSelectorWindow = new SubtractionSelectorWindow();
    var a = this;
    this.subtractionSelectorWindow.onSelect.attach(function(b, c) {
        a.grid.store.removeAll(), a.grid.load(c), Ext.getCmp(a.id + "hiddenSutractions").setValue(JSON.stringify(c[0].subtractionId));
    }), this.grid = new QueueGrid({
        maxHeight: 120,
        minHeight: 120,
        title: !1,
        collapsible: !1
    });
}

function DimpleRunMainView() {
    this.title = "Experiment", this.icon = "images/icon/ic_satellite_black_18dp.png", 
    this.queueGridList = [], this.id = BUI.id(), RunMainView.call(this);
}

function RunMainView() {
    this.id = BUI.id(), MainView.call(this);
}

!function(a) {
    var b, c, d = "0.4.2", e = "hasOwnProperty", f = /[\.\/]/, g = /\s*,\s*/, h = "*", i = function(a, b) {
        return a - b;
    }, j = {
        n: {}
    }, k = function() {
        for (var a = 0, b = this.length; b > a; a++) if ("undefined" != typeof this[a]) return this[a];
    }, l = function() {
        for (var a = this.length; --a; ) if ("undefined" != typeof this[a]) return this[a];
    }, m = function(a, d) {
        a = String(a);
        var e, f = c, g = Array.prototype.slice.call(arguments, 2), h = m.listeners(a), j = 0, n = [], o = {}, p = [], q = b;
        p.firstDefined = k, p.lastDefined = l, b = a, c = 0;
        for (var r = 0, s = h.length; s > r; r++) "zIndex" in h[r] && (n.push(h[r].zIndex), 
        h[r].zIndex < 0 && (o[h[r].zIndex] = h[r]));
        for (n.sort(i); n[j] < 0; ) if (e = o[n[j++]], p.push(e.apply(d, g)), c) return c = f, 
        p;
        for (r = 0; s > r; r++) if (e = h[r], "zIndex" in e) if (e.zIndex == n[j]) {
            if (p.push(e.apply(d, g)), c) break;
            do if (j++, e = o[n[j]], e && p.push(e.apply(d, g)), c) break; while (e);
        } else o[e.zIndex] = e; else if (p.push(e.apply(d, g)), c) break;
        return c = f, b = q, p;
    };
    m._events = j, m.listeners = function(a) {
        var b, c, d, e, g, i, k, l, m = a.split(f), n = j, o = [ n ], p = [];
        for (e = 0, g = m.length; g > e; e++) {
            for (l = [], i = 0, k = o.length; k > i; i++) for (n = o[i].n, c = [ n[m[e]], n[h] ], 
            d = 2; d--; ) b = c[d], b && (l.push(b), p = p.concat(b.f || []));
            o = l;
        }
        return p;
    }, m.on = function(a, b) {
        if (a = String(a), "function" != typeof b) return function() {};
        for (var c = a.split(g), d = 0, e = c.length; e > d; d++) !function(a) {
            for (var c, d = a.split(f), e = j, g = 0, h = d.length; h > g; g++) e = e.n, e = e.hasOwnProperty(d[g]) && e[d[g]] || (e[d[g]] = {
                n: {}
            });
            for (e.f = e.f || [], g = 0, h = e.f.length; h > g; g++) if (e.f[g] == b) {
                c = !0;
                break;
            }
            !c && e.f.push(b);
        }(c[d]);
        return function(a) {
            +a == +a && (b.zIndex = +a);
        };
    }, m.f = function(a) {
        var b = [].slice.call(arguments, 1);
        return function() {
            m.apply(null, [ a, null ].concat(b).concat([].slice.call(arguments, 0)));
        };
    }, m.stop = function() {
        c = 1;
    }, m.nt = function(a) {
        return a ? new RegExp("(?:\\.|\\/|^)" + a + "(?:\\.|\\/|$)").test(b) : b;
    }, m.nts = function() {
        return b.split(f);
    }, m.off = m.unbind = function(a, b) {
        if (!a) return void (m._events = j = {
            n: {}
        });
        var c = a.split(g);
        if (c.length > 1) for (var d = 0, i = c.length; i > d; d++) m.off(c[d], b); else {
            c = a.split(f);
            var k, l, n, d, i, o, p, q = [ j ];
            for (d = 0, i = c.length; i > d; d++) for (o = 0; o < q.length; o += n.length - 2) {
                if (n = [ o, 1 ], k = q[o].n, c[d] != h) k[c[d]] && n.push(k[c[d]]); else for (l in k) k[e](l) && n.push(k[l]);
                q.splice.apply(q, n);
            }
            for (d = 0, i = q.length; i > d; d++) for (k = q[d]; k.n; ) {
                if (b) {
                    if (k.f) {
                        for (o = 0, p = k.f.length; p > o; o++) if (k.f[o] == b) {
                            k.f.splice(o, 1);
                            break;
                        }
                        !k.f.length && delete k.f;
                    }
                    for (l in k.n) if (k.n[e](l) && k.n[l].f) {
                        var r = k.n[l].f;
                        for (o = 0, p = r.length; p > o; o++) if (r[o] == b) {
                            r.splice(o, 1);
                            break;
                        }
                        !r.length && delete k.n[l].f;
                    }
                } else {
                    delete k.f;
                    for (l in k.n) k.n[e](l) && k.n[l].f && delete k.n[l].f;
                }
                k = k.n;
            }
        }
    }, m.once = function(a, b) {
        var c = function() {
            return m.unbind(a, c), b.apply(this, arguments);
        };
        return m.on(a, c);
    }, m.version = d, m.toString = function() {
        return "You are running Eve " + d;
    }, "undefined" != typeof module && module.exports ? module.exports = m : "function" == typeof define && define.amd ? define("eve", [], function() {
        return m;
    }) : a.eve = m;
}(this), function(a, b) {
    if ("function" == typeof define && define.amd) define([ "eve" ], function(c) {
        return b(a, c);
    }); else if ("undefined" != typeof exports) {
        var c = require("eve");
        module.exports = b(a, c);
    } else b(a, a.eve);
}(window || this, function(a, b) {
    var c = function(b) {
        var c = {}, d = a.requestAnimationFrame || a.webkitRequestAnimationFrame || a.mozRequestAnimationFrame || a.oRequestAnimationFrame || a.msRequestAnimationFrame || function(a) {
            setTimeout(a, 16);
        }, e = Array.isArray || function(a) {
            return a instanceof Array || "[object Array]" == Object.prototype.toString.call(a);
        }, f = 0, g = "M" + (+new Date()).toString(36), h = function() {
            return g + (f++).toString(36);
        }, i = Date.now || function() {
            return +new Date();
        }, j = function(a) {
            var b = this;
            if (null == a) return b.s;
            var c = b.s - a;
            b.b += b.dur * c, b.B += b.dur * c, b.s = a;
        }, k = function(a) {
            var b = this;
            return null == a ? b.spd : void (b.spd = a);
        }, l = function(a) {
            var b = this;
            return null == a ? b.dur : (b.s = b.s * a / b.dur, void (b.dur = a));
        }, m = function() {
            var a = this;
            delete c[a.id], a.update(), b("mina.stop." + a.id, a);
        }, n = function() {
            var a = this;
            a.pdif || (delete c[a.id], a.update(), a.pdif = a.get() - a.b);
        }, o = function() {
            var a = this;
            a.pdif && (a.b = a.get() - a.pdif, delete a.pdif, c[a.id] = a);
        }, p = function() {
            var a, b = this;
            if (e(b.start)) {
                a = [];
                for (var c = 0, d = b.start.length; d > c; c++) a[c] = +b.start[c] + (b.end[c] - b.start[c]) * b.easing(b.s);
            } else a = +b.start + (b.end - b.start) * b.easing(b.s);
            b.set(a);
        }, q = function() {
            var a = 0;
            for (var e in c) if (c.hasOwnProperty(e)) {
                var f = c[e], g = f.get();
                a++, f.s = (g - f.b) / (f.dur / f.spd), f.s >= 1 && (delete c[e], f.s = 1, a--, 
                function(a) {
                    setTimeout(function() {
                        b("mina.finish." + a.id, a);
                    });
                }(f)), f.update();
            }
            a && d(q);
        }, r = function(a, b, e, f, g, i, s) {
            var t = {
                id: h(),
                start: a,
                end: b,
                b: e,
                s: 0,
                dur: f - e,
                spd: 1,
                get: g,
                set: i,
                easing: s || r.linear,
                status: j,
                speed: k,
                duration: l,
                stop: m,
                pause: n,
                resume: o,
                update: p
            };
            c[t.id] = t;
            var u, v = 0;
            for (u in c) if (c.hasOwnProperty(u) && (v++, 2 == v)) break;
            return 1 == v && d(q), t;
        };
        return r.time = i, r.getById = function(a) {
            return c[a] || null;
        }, r.linear = function(a) {
            return a;
        }, r.easeout = function(a) {
            return Math.pow(a, 1.7);
        }, r.easein = function(a) {
            return Math.pow(a, .48);
        }, r.easeinout = function(a) {
            if (1 == a) return 1;
            if (0 == a) return 0;
            var b = .48 - a / 1.04, c = Math.sqrt(.1734 + b * b), d = c - b, e = Math.pow(Math.abs(d), 1 / 3) * (0 > d ? -1 : 1), f = -c - b, g = Math.pow(Math.abs(f), 1 / 3) * (0 > f ? -1 : 1), h = e + g + .5;
            return 3 * (1 - h) * h * h + h * h * h;
        }, r.backin = function(a) {
            if (1 == a) return 1;
            var b = 1.70158;
            return a * a * ((b + 1) * a - b);
        }, r.backout = function(a) {
            if (0 == a) return 0;
            a -= 1;
            var b = 1.70158;
            return a * a * ((b + 1) * a + b) + 1;
        }, r.elastic = function(a) {
            return a == !!a ? a : Math.pow(2, -10 * a) * Math.sin(2 * (a - .075) * Math.PI / .3) + 1;
        }, r.bounce = function(a) {
            var b, c = 7.5625, d = 2.75;
            return 1 / d > a ? b = c * a * a : 2 / d > a ? (a -= 1.5 / d, b = c * a * a + .75) : 2.5 / d > a ? (a -= 2.25 / d, 
            b = c * a * a + .9375) : (a -= 2.625 / d, b = c * a * a + .984375), b;
        }, a.mina = r, r;
    }("undefined" == typeof b ? function() {} : b), d = function(a) {
        function c(a, b) {
            if (a) {
                if (a.nodeType) return w(a);
                if (e(a, "array") && c.set) return c.set.apply(c, a);
                if (a instanceof s) return a;
                if (null == b) return a = y.doc.querySelector(String(a)), w(a);
            }
            return a = null == a ? "100%" : a, b = null == b ? "100%" : b, new v(a, b);
        }
        function d(a, b) {
            if (b) {
                if ("#text" == a && (a = y.doc.createTextNode(b.text || b["#text"] || "")), "#comment" == a && (a = y.doc.createComment(b.text || b["#text"] || "")), 
                "string" == typeof a && (a = d(a)), "string" == typeof b) return 1 == a.nodeType ? "xlink:" == b.substring(0, 6) ? a.getAttributeNS(T, b.substring(6)) : "xml:" == b.substring(0, 4) ? a.getAttributeNS(U, b.substring(4)) : a.getAttribute(b) : "text" == b ? a.nodeValue : null;
                if (1 == a.nodeType) {
                    for (var c in b) if (b[z](c)) {
                        var e = A(b[c]);
                        e ? "xlink:" == c.substring(0, 6) ? a.setAttributeNS(T, c.substring(6), e) : "xml:" == c.substring(0, 4) ? a.setAttributeNS(U, c.substring(4), e) : a.setAttribute(c, e) : a.removeAttribute(c);
                    }
                } else "text" in b && (a.nodeValue = b.text);
            } else a = y.doc.createElementNS(U, a);
            return a;
        }
        function e(a, b) {
            return b = A.prototype.toLowerCase.call(b), "finite" == b ? isFinite(a) : "array" == b && (a instanceof Array || Array.isArray && Array.isArray(a)) ? !0 : "null" == b && null === a || b == typeof a && null !== a || "object" == b && a === Object(a) || J.call(a).slice(8, -1).toLowerCase() == b;
        }
        function f(a) {
            if ("function" == typeof a || Object(a) !== a) return a;
            var b = new a.constructor();
            for (var c in a) a[z](c) && (b[c] = f(a[c]));
            return b;
        }
        function h(a, b) {
            for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return a.push(a.splice(c, 1)[0]);
        }
        function i(a, b, c) {
            function d() {
                var e = Array.prototype.slice.call(arguments, 0), f = e.join("␀"), g = d.cache = d.cache || {}, i = d.count = d.count || [];
                return g[z](f) ? (h(i, f), c ? c(g[f]) : g[f]) : (i.length >= 1e3 && delete g[i.shift()], 
                i.push(f), g[f] = a.apply(b, e), c ? c(g[f]) : g[f]);
            }
            return d;
        }
        function j(a, b, c, d, e, f) {
            if (null == e) {
                var g = a - c, h = b - d;
                return g || h ? (180 + 180 * D.atan2(-h, -g) / H + 360) % 360 : 0;
            }
            return j(a, b, e, f) - j(c, d, e, f);
        }
        function k(a) {
            return a % 360 * H / 180;
        }
        function l(a) {
            return 180 * a / H % 360;
        }
        function m(a) {
            var b = [];
            return a = a.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g, function(a, c, d) {
                return d = d.split(/\s*,\s*|\s+/), "rotate" == c && 1 == d.length && d.push(0, 0), 
                "scale" == c && (d.length > 2 ? d = d.slice(0, 2) : 2 == d.length && d.push(0, 0), 
                1 == d.length && d.push(d[0], 0, 0)), b.push("skewX" == c ? [ "m", 1, 0, D.tan(k(d[0])), 1, 0, 0 ] : "skewY" == c ? [ "m", 1, D.tan(k(d[0])), 0, 1, 0, 0 ] : [ c.charAt(0) ].concat(d)), 
                a;
            }), b;
        }
        function n(a, b) {
            var d = aa(a), e = new c.Matrix();
            if (d) for (var f = 0, g = d.length; g > f; f++) {
                var h, i, j, k, l, m = d[f], n = m.length, o = A(m[0]).toLowerCase(), p = m[0] != o, q = p ? e.invert() : 0;
                "t" == o && 2 == n ? e.translate(m[1], 0) : "t" == o && 3 == n ? p ? (h = q.x(0, 0), 
                i = q.y(0, 0), j = q.x(m[1], m[2]), k = q.y(m[1], m[2]), e.translate(j - h, k - i)) : e.translate(m[1], m[2]) : "r" == o ? 2 == n ? (l = l || b, 
                e.rotate(m[1], l.x + l.width / 2, l.y + l.height / 2)) : 4 == n && (p ? (j = q.x(m[2], m[3]), 
                k = q.y(m[2], m[3]), e.rotate(m[1], j, k)) : e.rotate(m[1], m[2], m[3])) : "s" == o ? 2 == n || 3 == n ? (l = l || b, 
                e.scale(m[1], m[n - 1], l.x + l.width / 2, l.y + l.height / 2)) : 4 == n ? p ? (j = q.x(m[2], m[3]), 
                k = q.y(m[2], m[3]), e.scale(m[1], m[1], j, k)) : e.scale(m[1], m[1], m[2], m[3]) : 5 == n && (p ? (j = q.x(m[3], m[4]), 
                k = q.y(m[3], m[4]), e.scale(m[1], m[2], j, k)) : e.scale(m[1], m[2], m[3], m[4])) : "m" == o && 7 == n && e.add(m[1], m[2], m[3], m[4], m[5], m[6]);
            }
            return e;
        }
        function o(a) {
            var b = a.node.ownerSVGElement && w(a.node.ownerSVGElement) || a.node.parentNode && w(a.node.parentNode) || c.select("svg") || c(0, 0), d = b.select("defs"), e = null == d ? !1 : d.node;
            return e || (e = u("defs", b.node).node), e;
        }
        function p(a) {
            return a.node.ownerSVGElement && w(a.node.ownerSVGElement) || c.select("svg");
        }
        function q(a, b, c) {
            function e(a) {
                if (null == a) return I;
                if (a == +a) return a;
                d(j, {
                    width: a
                });
                try {
                    return j.getBBox().width;
                } catch (b) {
                    return 0;
                }
            }
            function f(a) {
                if (null == a) return I;
                if (a == +a) return a;
                d(j, {
                    height: a
                });
                try {
                    return j.getBBox().height;
                } catch (b) {
                    return 0;
                }
            }
            function g(d, e) {
                null == b ? i[d] = e(a.attr(d) || 0) : d == b && (i = e(null == c ? a.attr(d) || 0 : c));
            }
            var h = p(a).node, i = {}, j = h.querySelector(".svg---mgr");
            switch (j || (j = d("rect"), d(j, {
                x: -9e9,
                y: -9e9,
                width: 10,
                height: 10,
                "class": "svg---mgr",
                fill: "none"
            }), h.appendChild(j)), a.type) {
              case "rect":
                g("rx", e), g("ry", f);

              case "image":
                g("width", e), g("height", f);

              case "text":
                g("x", e), g("y", f);
                break;

              case "circle":
                g("cx", e), g("cy", f), g("r", e);
                break;

              case "ellipse":
                g("cx", e), g("cy", f), g("rx", e), g("ry", f);
                break;

              case "line":
                g("x1", e), g("x2", e), g("y1", f), g("y2", f);
                break;

              case "marker":
                g("refX", e), g("markerWidth", e), g("refY", f), g("markerHeight", f);
                break;

              case "radialGradient":
                g("fx", e), g("fy", f);
                break;

              case "tspan":
                g("dx", e), g("dy", f);
                break;

              default:
                g(b, e);
            }
            return h.removeChild(j), i;
        }
        function r(a) {
            e(a, "array") || (a = Array.prototype.slice.call(arguments, 0));
            for (var b = 0, c = 0, d = this.node; this[b]; ) delete this[b++];
            for (b = 0; b < a.length; b++) "set" == a[b].type ? a[b].forEach(function(a) {
                d.appendChild(a.node);
            }) : d.appendChild(a[b].node);
            var f = d.childNodes;
            for (b = 0; b < f.length; b++) this[c++] = w(f[b]);
            return this;
        }
        function s(a) {
            if (a.snap in V) return V[a.snap];
            var b;
            try {
                b = a.ownerSVGElement;
            } catch (c) {}
            this.node = a, b && (this.paper = new v(b)), this.type = a.tagName || a.nodeName;
            var d = this.id = S(this);
            if (this.anims = {}, this._ = {
                transform: []
            }, a.snap = d, V[d] = this, "g" == this.type && (this.add = r), this.type in {
                g: 1,
                mask: 1,
                pattern: 1,
                symbol: 1
            }) for (var e in v.prototype) v.prototype[z](e) && (this[e] = v.prototype[e]);
        }
        function t(a) {
            this.node = a;
        }
        function u(a, b) {
            var c = d(a);
            b.appendChild(c);
            var e = w(c);
            return e;
        }
        function v(a, b) {
            var c, e, f, g = v.prototype;
            if (a && "svg" == a.tagName) {
                if (a.snap in V) return V[a.snap];
                var h = a.ownerDocument;
                c = new s(a), e = a.getElementsByTagName("desc")[0], f = a.getElementsByTagName("defs")[0], 
                e || (e = d("desc"), e.appendChild(h.createTextNode("Created with Snap")), c.node.appendChild(e)), 
                f || (f = d("defs"), c.node.appendChild(f)), c.defs = f;
                for (var i in g) g[z](i) && (c[i] = g[i]);
                c.paper = c.root = c;
            } else c = u("svg", y.doc.body), d(c.node, {
                height: b,
                version: 1.1,
                width: a,
                xmlns: U
            });
            return c;
        }
        function w(a) {
            return a ? a instanceof s || a instanceof t ? a : a.tagName && "svg" == a.tagName.toLowerCase() ? new v(a) : a.tagName && "object" == a.tagName.toLowerCase() && "image/svg+xml" == a.type ? new v(a.contentDocument.getElementsByTagName("svg")[0]) : new s(a) : a;
        }
        function x(a, b) {
            for (var c = 0, d = a.length; d > c; c++) {
                var e = {
                    type: a[c].type,
                    attr: a[c].attr()
                }, f = a[c].children();
                b.push(e), f.length && x(f, e.childNodes = []);
            }
        }
        c.version = "0.4.0", c.toString = function() {
            return "Snap v" + this.version;
        }, c._ = {};
        var y = {
            win: a.window,
            doc: a.window.document
        };
        c._.glob = y;
        var z = "hasOwnProperty", A = String, B = parseFloat, C = parseInt, D = Math, E = D.max, F = D.min, G = D.abs, H = (D.pow, 
        D.PI), I = (D.round, ""), J = Object.prototype.toString, K = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i, L = (c._.separator = /[,\s]+/, 
        /[\s]*,[\s]*/), M = {
            hs: 1,
            rg: 1
        }, N = /([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi, O = /([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi, P = /(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi, Q = 0, R = "S" + (+new Date()).toString(36), S = function(a) {
            return (a && a.type ? a.type : I) + R + (Q++).toString(36);
        }, T = "http://www.w3.org/1999/xlink", U = "http://www.w3.org/2000/svg", V = {};
        c.url = function(a) {
            return "url('#" + a + "')";
        }, c._.$ = d, c._.id = S, c.format = function() {
            var a = /\{([^\}]+)\}/g, b = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, c = function(a, c, d) {
                var e = d;
                return c.replace(b, function(a, b, c, d, f) {
                    b = b || d, e && (b in e && (e = e[b]), "function" == typeof e && f && (e = e()));
                }), e = (null == e || e == d ? a : e) + "";
            };
            return function(b, d) {
                return A(b).replace(a, function(a, b) {
                    return c(a, b, d);
                });
            };
        }(), c._.clone = f, c._.cacher = i, c.rad = k, c.deg = l, c.sin = function(a) {
            return D.sin(c.rad(a));
        }, c.tan = function(a) {
            return D.tan(c.rad(a));
        }, c.cos = function(a) {
            return D.cos(c.rad(a));
        }, c.asin = function(a) {
            return c.deg(D.asin(a));
        }, c.acos = function(a) {
            return c.deg(D.acos(a));
        }, c.atan = function(a) {
            return c.deg(D.atan(a));
        }, c.atan2 = function(a) {
            return c.deg(D.atan2(a));
        }, c.angle = j, c.len = function(a, b, d, e) {
            return Math.sqrt(c.len2(a, b, d, e));
        }, c.len2 = function(a, b, c, d) {
            return (a - c) * (a - c) + (b - d) * (b - d);
        }, c.closestPoint = function(a, b, c) {
            function d(a) {
                var d = a.x - b, e = a.y - c;
                return d * d + e * e;
            }
            for (var e, f, g, h, i = a.node, j = i.getTotalLength(), k = j / i.pathSegList.numberOfItems * .125, l = 1 / 0, m = 0; j >= m; m += k) (h = d(g = i.getPointAtLength(m))) < l && (e = g, 
            f = m, l = h);
            for (k *= .5; k > .5; ) {
                var n, o, p, q, r, s;
                (p = f - k) >= 0 && (r = d(n = i.getPointAtLength(p))) < l ? (e = n, f = p, l = r) : (q = f + k) <= j && (s = d(o = i.getPointAtLength(q))) < l ? (e = o, 
                f = q, l = s) : k *= .5;
            }
            return e = {
                x: e.x,
                y: e.y,
                length: f,
                distance: Math.sqrt(l)
            };
        }, c.is = e, c.snapTo = function(a, b, c) {
            if (c = e(c, "finite") ? c : 10, e(a, "array")) {
                for (var d = a.length; d--; ) if (G(a[d] - b) <= c) return a[d];
            } else {
                a = +a;
                var f = b % a;
                if (c > f) return b - f;
                if (f > a - c) return b - f + a;
            }
            return b;
        }, c.getRGB = i(function(a) {
            if (!a || (a = A(a)).indexOf("-") + 1) return {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                error: 1,
                toString: Z
            };
            if ("none" == a) return {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                toString: Z
            };
            if (!(M[z](a.toLowerCase().substring(0, 2)) || "#" == a.charAt()) && (a = W(a)), 
            !a) return {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                error: 1,
                toString: Z
            };
            var b, d, f, g, h, i, j = a.match(K);
            return j ? (j[2] && (f = C(j[2].substring(5), 16), d = C(j[2].substring(3, 5), 16), 
            b = C(j[2].substring(1, 3), 16)), j[3] && (f = C((h = j[3].charAt(3)) + h, 16), 
            d = C((h = j[3].charAt(2)) + h, 16), b = C((h = j[3].charAt(1)) + h, 16)), j[4] && (i = j[4].split(L), 
            b = B(i[0]), "%" == i[0].slice(-1) && (b *= 2.55), d = B(i[1]), "%" == i[1].slice(-1) && (d *= 2.55), 
            f = B(i[2]), "%" == i[2].slice(-1) && (f *= 2.55), "rgba" == j[1].toLowerCase().slice(0, 4) && (g = B(i[3])), 
            i[3] && "%" == i[3].slice(-1) && (g /= 100)), j[5] ? (i = j[5].split(L), b = B(i[0]), 
            "%" == i[0].slice(-1) && (b /= 100), d = B(i[1]), "%" == i[1].slice(-1) && (d /= 100), 
            f = B(i[2]), "%" == i[2].slice(-1) && (f /= 100), ("deg" == i[0].slice(-3) || "°" == i[0].slice(-1)) && (b /= 360), 
            "hsba" == j[1].toLowerCase().slice(0, 4) && (g = B(i[3])), i[3] && "%" == i[3].slice(-1) && (g /= 100), 
            c.hsb2rgb(b, d, f, g)) : j[6] ? (i = j[6].split(L), b = B(i[0]), "%" == i[0].slice(-1) && (b /= 100), 
            d = B(i[1]), "%" == i[1].slice(-1) && (d /= 100), f = B(i[2]), "%" == i[2].slice(-1) && (f /= 100), 
            ("deg" == i[0].slice(-3) || "°" == i[0].slice(-1)) && (b /= 360), "hsla" == j[1].toLowerCase().slice(0, 4) && (g = B(i[3])), 
            i[3] && "%" == i[3].slice(-1) && (g /= 100), c.hsl2rgb(b, d, f, g)) : (b = F(D.round(b), 255), 
            d = F(D.round(d), 255), f = F(D.round(f), 255), g = F(E(g, 0), 1), j = {
                r: b,
                g: d,
                b: f,
                toString: Z
            }, j.hex = "#" + (16777216 | f | d << 8 | b << 16).toString(16).slice(1), j.opacity = e(g, "finite") ? g : 1, 
            j)) : {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                error: 1,
                toString: Z
            };
        }, c), c.hsb = i(function(a, b, d) {
            return c.hsb2rgb(a, b, d).hex;
        }), c.hsl = i(function(a, b, d) {
            return c.hsl2rgb(a, b, d).hex;
        }), c.rgb = i(function(a, b, c, d) {
            if (e(d, "finite")) {
                var f = D.round;
                return "rgba(" + [ f(a), f(b), f(c), +d.toFixed(2) ] + ")";
            }
            return "#" + (16777216 | c | b << 8 | a << 16).toString(16).slice(1);
        });
        var W = function(a) {
            var b = y.doc.getElementsByTagName("head")[0] || y.doc.getElementsByTagName("svg")[0], c = "rgb(255, 0, 0)";
            return (W = i(function(a) {
                if ("red" == a.toLowerCase()) return c;
                b.style.color = c, b.style.color = a;
                var d = y.doc.defaultView.getComputedStyle(b, I).getPropertyValue("color");
                return d == c ? null : d;
            }))(a);
        }, X = function() {
            return "hsb(" + [ this.h, this.s, this.b ] + ")";
        }, Y = function() {
            return "hsl(" + [ this.h, this.s, this.l ] + ")";
        }, Z = function() {
            return 1 == this.opacity || null == this.opacity ? this.hex : "rgba(" + [ this.r, this.g, this.b, this.opacity ] + ")";
        }, $ = function(a, b, d) {
            if (null == b && e(a, "object") && "r" in a && "g" in a && "b" in a && (d = a.b, 
            b = a.g, a = a.r), null == b && e(a, string)) {
                var f = c.getRGB(a);
                a = f.r, b = f.g, d = f.b;
            }
            return (a > 1 || b > 1 || d > 1) && (a /= 255, b /= 255, d /= 255), [ a, b, d ];
        }, _ = function(a, b, d, f) {
            a = D.round(255 * a), b = D.round(255 * b), d = D.round(255 * d);
            var g = {
                r: a,
                g: b,
                b: d,
                opacity: e(f, "finite") ? f : 1,
                hex: c.rgb(a, b, d),
                toString: Z
            };
            return e(f, "finite") && (g.opacity = f), g;
        };
        c.color = function(a) {
            var b;
            return e(a, "object") && "h" in a && "s" in a && "b" in a ? (b = c.hsb2rgb(a), a.r = b.r, 
            a.g = b.g, a.b = b.b, a.opacity = 1, a.hex = b.hex) : e(a, "object") && "h" in a && "s" in a && "l" in a ? (b = c.hsl2rgb(a), 
            a.r = b.r, a.g = b.g, a.b = b.b, a.opacity = 1, a.hex = b.hex) : (e(a, "string") && (a = c.getRGB(a)), 
            e(a, "object") && "r" in a && "g" in a && "b" in a && !("error" in a) ? (b = c.rgb2hsl(a), 
            a.h = b.h, a.s = b.s, a.l = b.l, b = c.rgb2hsb(a), a.v = b.b) : (a = {
                hex: "none"
            }, a.r = a.g = a.b = a.h = a.s = a.v = a.l = -1, a.error = 1)), a.toString = Z, 
            a;
        }, c.hsb2rgb = function(a, b, c, d) {
            e(a, "object") && "h" in a && "s" in a && "b" in a && (c = a.b, b = a.s, d = a.o, 
            a = a.h), a *= 360;
            var f, g, h, i, j;
            return a = a % 360 / 60, j = c * b, i = j * (1 - G(a % 2 - 1)), f = g = h = c - j, 
            a = ~~a, f += [ j, i, 0, 0, i, j ][a], g += [ i, j, j, i, 0, 0 ][a], h += [ 0, 0, i, j, j, i ][a], 
            _(f, g, h, d);
        }, c.hsl2rgb = function(a, b, c, d) {
            e(a, "object") && "h" in a && "s" in a && "l" in a && (c = a.l, b = a.s, a = a.h), 
            (a > 1 || b > 1 || c > 1) && (a /= 360, b /= 100, c /= 100), a *= 360;
            var f, g, h, i, j;
            return a = a % 360 / 60, j = 2 * b * (.5 > c ? c : 1 - c), i = j * (1 - G(a % 2 - 1)), 
            f = g = h = c - j / 2, a = ~~a, f += [ j, i, 0, 0, i, j ][a], g += [ i, j, j, i, 0, 0 ][a], 
            h += [ 0, 0, i, j, j, i ][a], _(f, g, h, d);
        }, c.rgb2hsb = function(a, b, c) {
            c = $(a, b, c), a = c[0], b = c[1], c = c[2];
            var d, e, f, g;
            return f = E(a, b, c), g = f - F(a, b, c), d = 0 == g ? null : f == a ? (b - c) / g : f == b ? (c - a) / g + 2 : (a - b) / g + 4, 
            d = (d + 360) % 6 * 60 / 360, e = 0 == g ? 0 : g / f, {
                h: d,
                s: e,
                b: f,
                toString: X
            };
        }, c.rgb2hsl = function(a, b, c) {
            c = $(a, b, c), a = c[0], b = c[1], c = c[2];
            var d, e, f, g, h, i;
            return g = E(a, b, c), h = F(a, b, c), i = g - h, d = 0 == i ? null : g == a ? (b - c) / i : g == b ? (c - a) / i + 2 : (a - b) / i + 4, 
            d = (d + 360) % 6 * 60 / 360, f = (g + h) / 2, e = 0 == i ? 0 : .5 > f ? i / (2 * f) : i / (2 - 2 * f), 
            {
                h: d,
                s: e,
                l: f,
                toString: Y
            };
        }, c.parsePathString = function(a) {
            if (!a) return null;
            var b = c.path(a);
            if (b.arr) return c.path.clone(b.arr);
            var d = {
                a: 7,
                c: 6,
                o: 2,
                h: 1,
                l: 2,
                m: 2,
                r: 4,
                q: 4,
                s: 4,
                t: 2,
                v: 1,
                u: 3,
                z: 0
            }, f = [];
            return e(a, "array") && e(a[0], "array") && (f = c.path.clone(a)), f.length || A(a).replace(N, function(a, b, c) {
                var e = [], g = b.toLowerCase();
                if (c.replace(P, function(a, b) {
                    b && e.push(+b);
                }), "m" == g && e.length > 2 && (f.push([ b ].concat(e.splice(0, 2))), g = "l", 
                b = "m" == b ? "l" : "L"), "o" == g && 1 == e.length && f.push([ b, e[0] ]), "r" == g) f.push([ b ].concat(e)); else for (;e.length >= d[g] && (f.push([ b ].concat(e.splice(0, d[g]))), 
                d[g]); ) ;
            }), f.toString = c.path.toString, b.arr = c.path.clone(f), f;
        };
        var aa = c.parseTransformString = function(a) {
            if (!a) return null;
            var b = [];
            return e(a, "array") && e(a[0], "array") && (b = c.path.clone(a)), b.length || A(a).replace(O, function(a, c, d) {
                var e = [];
                c.toLowerCase(), d.replace(P, function(a, b) {
                    b && e.push(+b);
                }), b.push([ c ].concat(e));
            }), b.toString = c.path.toString, b;
        };
        c._.svgTransform2string = m, c._.rgTransform = /^[a-z][\s]*-?\.?\d/i, c._.transform2matrix = n, 
        c._unit2px = q, y.doc.contains || y.doc.compareDocumentPosition ? function(a, b) {
            var c = 9 == a.nodeType ? a.documentElement : a, d = b && b.parentNode;
            return a == d || !(!d || 1 != d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)));
        } : function(a, b) {
            if (b) for (;b; ) if (b = b.parentNode, b == a) return !0;
            return !1;
        }, c._.getSomeDefs = o, c._.getSomeSVG = p, c.select = function(a) {
            return a = A(a).replace(/([^\\]):/g, "$1\\:"), w(y.doc.querySelector(a));
        }, c.selectAll = function(a) {
            for (var b = y.doc.querySelectorAll(a), d = (c.set || Array)(), e = 0; e < b.length; e++) d.push(w(b[e]));
            return d;
        }, setInterval(function() {
            for (var a in V) if (V[z](a)) {
                var b = V[a], c = b.node;
                ("svg" != b.type && !c.ownerSVGElement || "svg" == b.type && (!c.parentNode || "ownerSVGElement" in c.parentNode && !c.ownerSVGElement)) && delete V[a];
            }
        }, 1e4), s.prototype.attr = function(a, c) {
            var d = this, f = d.node;
            if (!a) {
                if (1 != f.nodeType) return {
                    text: f.nodeValue
                };
                for (var g = f.attributes, h = {}, i = 0, j = g.length; j > i; i++) h[g[i].nodeName] = g[i].nodeValue;
                return h;
            }
            if (e(a, "string")) {
                if (!(arguments.length > 1)) return b("snap.util.getattr." + a, d).firstDefined();
                var k = {};
                k[a] = c, a = k;
            }
            for (var l in a) a[z](l) && b("snap.util.attr." + l, d, a[l]);
            return d;
        }, c.parse = function(a) {
            var b = y.doc.createDocumentFragment(), c = !0, d = y.doc.createElement("div");
            if (a = A(a), a.match(/^\s*<\s*svg(?:\s|>)/) || (a = "<svg>" + a + "</svg>", c = !1), 
            d.innerHTML = a, a = d.getElementsByTagName("svg")[0]) if (c) b = a; else for (;a.firstChild; ) b.appendChild(a.firstChild);
            return new t(b);
        }, c.fragment = function() {
            for (var a = Array.prototype.slice.call(arguments, 0), b = y.doc.createDocumentFragment(), d = 0, e = a.length; e > d; d++) {
                var f = a[d];
                f.node && f.node.nodeType && b.appendChild(f.node), f.nodeType && b.appendChild(f), 
                "string" == typeof f && b.appendChild(c.parse(f).node);
            }
            return new t(b);
        }, c._.make = u, c._.wrap = w, v.prototype.el = function(a, b) {
            var c = u(a, this.node);
            return b && c.attr(b), c;
        }, s.prototype.children = function() {
            for (var a = [], b = this.node.childNodes, d = 0, e = b.length; e > d; d++) a[d] = c(b[d]);
            return a;
        }, s.prototype.toJSON = function() {
            var a = [];
            return x([ this ], a), a[0];
        }, b.on("snap.util.getattr", function() {
            var a = b.nt();
            a = a.substring(a.lastIndexOf(".") + 1);
            var c = a.replace(/[A-Z]/g, function(a) {
                return "-" + a.toLowerCase();
            });
            return ba[z](c) ? this.node.ownerDocument.defaultView.getComputedStyle(this.node, null).getPropertyValue(c) : d(this.node, a);
        });
        var ba = {
            "alignment-baseline": 0,
            "baseline-shift": 0,
            clip: 0,
            "clip-path": 0,
            "clip-rule": 0,
            color: 0,
            "color-interpolation": 0,
            "color-interpolation-filters": 0,
            "color-profile": 0,
            "color-rendering": 0,
            cursor: 0,
            direction: 0,
            display: 0,
            "dominant-baseline": 0,
            "enable-background": 0,
            fill: 0,
            "fill-opacity": 0,
            "fill-rule": 0,
            filter: 0,
            "flood-color": 0,
            "flood-opacity": 0,
            font: 0,
            "font-family": 0,
            "font-size": 0,
            "font-size-adjust": 0,
            "font-stretch": 0,
            "font-style": 0,
            "font-variant": 0,
            "font-weight": 0,
            "glyph-orientation-horizontal": 0,
            "glyph-orientation-vertical": 0,
            "image-rendering": 0,
            kerning: 0,
            "letter-spacing": 0,
            "lighting-color": 0,
            marker: 0,
            "marker-end": 0,
            "marker-mid": 0,
            "marker-start": 0,
            mask: 0,
            opacity: 0,
            overflow: 0,
            "pointer-events": 0,
            "shape-rendering": 0,
            "stop-color": 0,
            "stop-opacity": 0,
            stroke: 0,
            "stroke-dasharray": 0,
            "stroke-dashoffset": 0,
            "stroke-linecap": 0,
            "stroke-linejoin": 0,
            "stroke-miterlimit": 0,
            "stroke-opacity": 0,
            "stroke-width": 0,
            "text-anchor": 0,
            "text-decoration": 0,
            "text-rendering": 0,
            "unicode-bidi": 0,
            visibility: 0,
            "word-spacing": 0,
            "writing-mode": 0
        };
        b.on("snap.util.attr", function(a) {
            var c = b.nt(), e = {};
            c = c.substring(c.lastIndexOf(".") + 1), e[c] = a;
            var f = c.replace(/-(\w)/gi, function(a, b) {
                return b.toUpperCase();
            }), g = c.replace(/[A-Z]/g, function(a) {
                return "-" + a.toLowerCase();
            });
            ba[z](g) ? this.node.style[f] = null == a ? I : a : d(this.node, e);
        }), function() {}(v.prototype), c.ajax = function(a, c, d, f) {
            var g = new XMLHttpRequest(), h = S();
            if (g) {
                if (e(c, "function")) f = d, d = c, c = null; else if (e(c, "object")) {
                    var i = [];
                    for (var j in c) c.hasOwnProperty(j) && i.push(encodeURIComponent(j) + "=" + encodeURIComponent(c[j]));
                    c = i.join("&");
                }
                return g.open(c ? "POST" : "GET", a, !0), c && (g.setRequestHeader("X-Requested-With", "XMLHttpRequest"), 
                g.setRequestHeader("Content-type", "application/x-www-form-urlencoded")), d && (b.once("snap.ajax." + h + ".0", d), 
                b.once("snap.ajax." + h + ".200", d), b.once("snap.ajax." + h + ".304", d)), g.onreadystatechange = function() {
                    4 == g.readyState && b("snap.ajax." + h + "." + g.status, f, g);
                }, 4 == g.readyState ? g : (g.send(c), g);
            }
        }, c.load = function(a, b, d) {
            c.ajax(a, function(a) {
                var e = c.parse(a.responseText);
                d ? b.call(d, e) : b(e);
            });
        };
        var ca = function(a) {
            var b = a.getBoundingClientRect(), c = a.ownerDocument, d = c.body, e = c.documentElement, f = e.clientTop || d.clientTop || 0, h = e.clientLeft || d.clientLeft || 0, i = b.top + (g.win.pageYOffset || e.scrollTop || d.scrollTop) - f, j = b.left + (g.win.pageXOffset || e.scrollLeft || d.scrollLeft) - h;
            return {
                y: i,
                x: j
            };
        };
        return c.getElementByPoint = function(a, b) {
            var c = this, d = (c.canvas, y.doc.elementFromPoint(a, b));
            if (y.win.opera && "svg" == d.tagName) {
                var e = ca(d), f = d.createSVGRect();
                f.x = a - e.x, f.y = b - e.y, f.width = f.height = 1;
                var g = d.getIntersectionList(f, null);
                g.length && (d = g[g.length - 1]);
            }
            return d ? w(d) : null;
        }, c.plugin = function(a) {
            a(c, s, v, y, t);
        }, y.win.Snap = c, c;
    }(a || this);
    return d.plugin(function(d, e, f, g, h) {
        function i(a, b) {
            if (null == b) {
                var c = !0;
                if (b = a.node.getAttribute("linearGradient" == a.type || "radialGradient" == a.type ? "gradientTransform" : "pattern" == a.type ? "patternTransform" : "transform"), 
                !b) return new d.Matrix();
                b = d._.svgTransform2string(b);
            } else b = d._.rgTransform.test(b) ? o(b).replace(/\.{3}|\u2026/g, a._.transform || "") : d._.svgTransform2string(b), 
            n(b, "array") && (b = d.path ? d.path.toString.call(b) : o(b)), a._.transform = b;
            var e = d._.transform2matrix(b, a.getBBox(1));
            return c ? e : void (a.matrix = e);
        }
        function j(a) {
            function b(a, b) {
                var c = q(a.node, b);
                c = c && c.match(f), c = c && c[2], c && "#" == c.charAt() && (c = c.substring(1), 
                c && (h[c] = (h[c] || []).concat(function(c) {
                    var d = {};
                    d[b] = URL(c), q(a.node, d);
                })));
            }
            function c(a) {
                var b = q(a.node, "xlink:href");
                b && "#" == b.charAt() && (b = b.substring(1), b && (h[b] = (h[b] || []).concat(function(b) {
                    a.attr("xlink:href", "#" + b);
                })));
            }
            for (var d, e = a.selectAll("*"), f = /^\s*url\(("|'|)(.*)\1\)\s*$/, g = [], h = {}, i = 0, j = e.length; j > i; i++) {
                d = e[i], b(d, "fill"), b(d, "stroke"), b(d, "filter"), b(d, "mask"), b(d, "clip-path"), 
                c(d);
                var k = q(d.node, "id");
                k && (q(d.node, {
                    id: d.id
                }), g.push({
                    old: k,
                    id: d.id
                }));
            }
            for (i = 0, j = g.length; j > i; i++) {
                var l = h[g[i].old];
                if (l) for (var m = 0, n = l.length; n > m; m++) l[m](g[i].id);
            }
        }
        function k(a, b, c) {
            return function(d) {
                var e = d.slice(a, b);
                return 1 == e.length && (e = e[0]), c ? c(e) : e;
            };
        }
        function l(a) {
            return function() {
                var b = a ? "<" + this.type : "", c = this.node.attributes, d = this.node.childNodes;
                if (a) for (var e = 0, f = c.length; f > e; e++) b += " " + c[e].name + '="' + c[e].value.replace(/"/g, '\\"') + '"';
                if (d.length) {
                    for (a && (b += ">"), e = 0, f = d.length; f > e; e++) 3 == d[e].nodeType ? b += d[e].nodeValue : 1 == d[e].nodeType && (b += u(d[e]).toString());
                    a && (b += "</" + this.type + ">");
                } else a && (b += "/>");
                return b;
            };
        }
        var m = e.prototype, n = d.is, o = String, p = d._unit2px, q = d._.$, r = d._.make, s = d._.getSomeDefs, t = "hasOwnProperty", u = d._.wrap;
        m.getBBox = function(a) {
            if (!d.Matrix || !d.path) return this.node.getBBox();
            var b = this, c = new d.Matrix();
            if (b.removed) return d._.box();
            for (;"use" == b.type; ) if (a || (c = c.add(b.transform().localMatrix.translate(b.attr("x") || 0, b.attr("y") || 0))), 
            b.original) b = b.original; else {
                var e = b.attr("xlink:href");
                b = b.original = b.node.ownerDocument.getElementById(e.substring(e.indexOf("#") + 1));
            }
            var f = b._, g = d.path.get[b.type] || d.path.get.deflt;
            try {
                return a ? (f.bboxwt = g ? d.path.getBBox(b.realPath = g(b)) : d._.box(b.node.getBBox()), 
                d._.box(f.bboxwt)) : (b.realPath = g(b), b.matrix = b.transform().localMatrix, f.bbox = d.path.getBBox(d.path.map(b.realPath, c.add(b.matrix))), 
                d._.box(f.bbox));
            } catch (h) {
                return d._.box();
            }
        };
        var v = function() {
            return this.string;
        };
        m.transform = function(a) {
            var b = this._;
            if (null == a) {
                for (var c, e = this, f = new d.Matrix(this.node.getCTM()), g = i(this), h = [ g ], j = new d.Matrix(), k = g.toTransformString(), l = o(g) == o(this.matrix) ? o(b.transform) : k; "svg" != e.type && (e = e.parent()); ) h.push(i(e));
                for (c = h.length; c--; ) j.add(h[c]);
                return {
                    string: l,
                    globalMatrix: f,
                    totalMatrix: j,
                    localMatrix: g,
                    diffMatrix: f.clone().add(g.invert()),
                    global: f.toTransformString(),
                    total: j.toTransformString(),
                    local: k,
                    toString: v
                };
            }
            return a instanceof d.Matrix ? (this.matrix = a, this._.transform = a.toTransformString()) : i(this, a), 
            this.node && ("linearGradient" == this.type || "radialGradient" == this.type ? q(this.node, {
                gradientTransform: this.matrix
            }) : "pattern" == this.type ? q(this.node, {
                patternTransform: this.matrix
            }) : q(this.node, {
                transform: this.matrix
            })), this;
        }, m.parent = function() {
            return u(this.node.parentNode);
        }, m.append = m.add = function(a) {
            if (a) {
                if ("set" == a.type) {
                    var b = this;
                    return a.forEach(function(a) {
                        b.add(a);
                    }), this;
                }
                a = u(a), this.node.appendChild(a.node), a.paper = this.paper;
            }
            return this;
        }, m.appendTo = function(a) {
            return a && (a = u(a), a.append(this)), this;
        }, m.prepend = function(a) {
            if (a) {
                if ("set" == a.type) {
                    var b, c = this;
                    return a.forEach(function(a) {
                        b ? b.after(a) : c.prepend(a), b = a;
                    }), this;
                }
                a = u(a);
                var d = a.parent();
                this.node.insertBefore(a.node, this.node.firstChild), this.add && this.add(), a.paper = this.paper, 
                this.parent() && this.parent().add(), d && d.add();
            }
            return this;
        }, m.prependTo = function(a) {
            return a = u(a), a.prepend(this), this;
        }, m.before = function(a) {
            if ("set" == a.type) {
                var b = this;
                return a.forEach(function(a) {
                    var c = a.parent();
                    b.node.parentNode.insertBefore(a.node, b.node), c && c.add();
                }), this.parent().add(), this;
            }
            a = u(a);
            var c = a.parent();
            return this.node.parentNode.insertBefore(a.node, this.node), this.parent() && this.parent().add(), 
            c && c.add(), a.paper = this.paper, this;
        }, m.after = function(a) {
            a = u(a);
            var b = a.parent();
            return this.node.nextSibling ? this.node.parentNode.insertBefore(a.node, this.node.nextSibling) : this.node.parentNode.appendChild(a.node), 
            this.parent() && this.parent().add(), b && b.add(), a.paper = this.paper, this;
        }, m.insertBefore = function(a) {
            a = u(a);
            var b = this.parent();
            return a.node.parentNode.insertBefore(this.node, a.node), this.paper = a.paper, 
            b && b.add(), a.parent() && a.parent().add(), this;
        }, m.insertAfter = function(a) {
            a = u(a);
            var b = this.parent();
            return a.node.parentNode.insertBefore(this.node, a.node.nextSibling), this.paper = a.paper, 
            b && b.add(), a.parent() && a.parent().add(), this;
        }, m.remove = function() {
            var a = this.parent();
            return this.node.parentNode && this.node.parentNode.removeChild(this.node), delete this.paper, 
            this.removed = !0, a && a.add(), this;
        }, m.select = function(a) {
            return u(this.node.querySelector(a));
        }, m.selectAll = function(a) {
            for (var b = this.node.querySelectorAll(a), c = (d.set || Array)(), e = 0; e < b.length; e++) c.push(u(b[e]));
            return c;
        }, m.asPX = function(a, b) {
            return null == b && (b = this.attr(a)), +p(this, a, b);
        }, m.use = function() {
            var a, b = this.node.id;
            return b || (b = this.id, q(this.node, {
                id: b
            })), a = "linearGradient" == this.type || "radialGradient" == this.type || "pattern" == this.type ? r(this.type, this.node.parentNode) : r("use", this.node.parentNode), 
            q(a.node, {
                "xlink:href": "#" + b
            }), a.original = this, a;
        }, m.clone = function() {
            var a = u(this.node.cloneNode(!0));
            return q(a.node, "id") && q(a.node, {
                id: a.id
            }), j(a), a.insertAfter(this), a;
        }, m.toDefs = function() {
            var a = s(this);
            return a.appendChild(this.node), this;
        }, m.pattern = m.toPattern = function(a, b, c, d) {
            var e = r("pattern", s(this));
            return null == a && (a = this.getBBox()), n(a, "object") && "x" in a && (b = a.y, 
            c = a.width, d = a.height, a = a.x), q(e.node, {
                x: a,
                y: b,
                width: c,
                height: d,
                patternUnits: "userSpaceOnUse",
                id: e.id,
                viewBox: [ a, b, c, d ].join(" ")
            }), e.node.appendChild(this.node), e;
        }, m.marker = function(a, b, c, d, e, f) {
            var g = r("marker", s(this));
            return null == a && (a = this.getBBox()), n(a, "object") && "x" in a && (b = a.y, 
            c = a.width, d = a.height, e = a.refX || a.cx, f = a.refY || a.cy, a = a.x), q(g.node, {
                viewBox: [ a, b, c, d ].join(" "),
                markerWidth: c,
                markerHeight: d,
                orient: "auto",
                refX: e || 0,
                refY: f || 0,
                id: g.id
            }), g.node.appendChild(this.node), g;
        };
        var w = function(a, b, d, e) {
            "function" != typeof d || d.length || (e = d, d = c.linear), this.attr = a, this.dur = b, 
            d && (this.easing = d), e && (this.callback = e);
        };
        d._.Animation = w, d.animation = function(a, b, c, d) {
            return new w(a, b, c, d);
        }, m.inAnim = function() {
            var a = this, b = [];
            for (var c in a.anims) a.anims[t](c) && !function(a) {
                b.push({
                    anim: new w(a._attrs, a.dur, a.easing, a._callback),
                    mina: a,
                    curStatus: a.status(),
                    status: function(b) {
                        return a.status(b);
                    },
                    stop: function() {
                        a.stop();
                    }
                });
            }(a.anims[c]);
            return b;
        }, d.animate = function(a, d, e, f, g, h) {
            "function" != typeof g || g.length || (h = g, g = c.linear);
            var i = c.time(), j = c(a, d, i, i + f, c.time, e, g);
            return h && b.once("mina.finish." + j.id, h), j;
        }, m.stop = function() {
            for (var a = this.inAnim(), b = 0, c = a.length; c > b; b++) a[b].stop();
            return this;
        }, m.animate = function(a, d, e, f) {
            "function" != typeof e || e.length || (f = e, e = c.linear), a instanceof w && (f = a.callback, 
            e = a.easing, d = a.dur, a = a.attr);
            var g, h, i, j, l = [], m = [], p = {}, q = this;
            for (var r in a) if (a[t](r)) {
                q.equal ? (j = q.equal(r, o(a[r])), g = j.from, h = j.to, i = j.f) : (g = +q.attr(r), 
                h = +a[r]);
                var s = n(g, "array") ? g.length : 1;
                p[r] = k(l.length, l.length + s, i), l = l.concat(g), m = m.concat(h);
            }
            var u = c.time(), v = c(l, m, u, u + d, c.time, function(a) {
                var b = {};
                for (var c in p) p[t](c) && (b[c] = p[c](a));
                q.attr(b);
            }, e);
            return q.anims[v.id] = v, v._attrs = a, v._callback = f, b("snap.animcreated." + q.id, v), 
            b.once("mina.finish." + v.id, function() {
                delete q.anims[v.id], f && f.call(q);
            }), b.once("mina.stop." + v.id, function() {
                delete q.anims[v.id];
            }), q;
        };
        var x = {};
        m.data = function(a, c) {
            var e = x[this.id] = x[this.id] || {};
            if (0 == arguments.length) return b("snap.data.get." + this.id, this, e, null), 
            e;
            if (1 == arguments.length) {
                if (d.is(a, "object")) {
                    for (var f in a) a[t](f) && this.data(f, a[f]);
                    return this;
                }
                return b("snap.data.get." + this.id, this, e[a], a), e[a];
            }
            return e[a] = c, b("snap.data.set." + this.id, this, c, a), this;
        }, m.removeData = function(a) {
            return null == a ? x[this.id] = {} : x[this.id] && delete x[this.id][a], this;
        }, m.outerSVG = m.toString = l(1), m.innerSVG = l(), m.toDataURL = function() {
            if (a && a.btoa) {
                var b = this.getBBox(), c = d.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>', {
                    x: +b.x.toFixed(3),
                    y: +b.y.toFixed(3),
                    width: +b.width.toFixed(3),
                    height: +b.height.toFixed(3),
                    contents: this.outerSVG()
                });
                return "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(c)));
            }
        }, h.prototype.select = m.select, h.prototype.selectAll = m.selectAll;
    }), d.plugin(function(a) {
        function b(a, b, d, e, f, g) {
            return null == b && "[object SVGMatrix]" == c.call(a) ? (this.a = a.a, this.b = a.b, 
            this.c = a.c, this.d = a.d, this.e = a.e, void (this.f = a.f)) : void (null != a ? (this.a = +a, 
            this.b = +b, this.c = +d, this.d = +e, this.e = +f, this.f = +g) : (this.a = 1, 
            this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0));
        }
        var c = Object.prototype.toString, d = String, e = Math, f = "";
        !function(c) {
            function g(a) {
                return a[0] * a[0] + a[1] * a[1];
            }
            function h(a) {
                var b = e.sqrt(g(a));
                a[0] && (a[0] /= b), a[1] && (a[1] /= b);
            }
            c.add = function(a, c, d, e, f, g) {
                var h, i, j, k, l = [ [], [], [] ], m = [ [ this.a, this.c, this.e ], [ this.b, this.d, this.f ], [ 0, 0, 1 ] ], n = [ [ a, d, f ], [ c, e, g ], [ 0, 0, 1 ] ];
                for (a && a instanceof b && (n = [ [ a.a, a.c, a.e ], [ a.b, a.d, a.f ], [ 0, 0, 1 ] ]), 
                h = 0; 3 > h; h++) for (i = 0; 3 > i; i++) {
                    for (k = 0, j = 0; 3 > j; j++) k += m[h][j] * n[j][i];
                    l[h][i] = k;
                }
                return this.a = l[0][0], this.b = l[1][0], this.c = l[0][1], this.d = l[1][1], this.e = l[0][2], 
                this.f = l[1][2], this;
            }, c.invert = function() {
                var a = this, c = a.a * a.d - a.b * a.c;
                return new b(a.d / c, -a.b / c, -a.c / c, a.a / c, (a.c * a.f - a.d * a.e) / c, (a.b * a.e - a.a * a.f) / c);
            }, c.clone = function() {
                return new b(this.a, this.b, this.c, this.d, this.e, this.f);
            }, c.translate = function(a, b) {
                return this.add(1, 0, 0, 1, a, b);
            }, c.scale = function(a, b, c, d) {
                return null == b && (b = a), (c || d) && this.add(1, 0, 0, 1, c, d), this.add(a, 0, 0, b, 0, 0), 
                (c || d) && this.add(1, 0, 0, 1, -c, -d), this;
            }, c.rotate = function(b, c, d) {
                b = a.rad(b), c = c || 0, d = d || 0;
                var f = +e.cos(b).toFixed(9), g = +e.sin(b).toFixed(9);
                return this.add(f, g, -g, f, c, d), this.add(1, 0, 0, 1, -c, -d);
            }, c.x = function(a, b) {
                return a * this.a + b * this.c + this.e;
            }, c.y = function(a, b) {
                return a * this.b + b * this.d + this.f;
            }, c.get = function(a) {
                return +this[d.fromCharCode(97 + a)].toFixed(4);
            }, c.toString = function() {
                return "matrix(" + [ this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5) ].join() + ")";
            }, c.offset = function() {
                return [ this.e.toFixed(4), this.f.toFixed(4) ];
            }, c.determinant = function() {
                return this.a * this.d - this.b * this.c;
            }, c.split = function() {
                var b = {};
                b.dx = this.e, b.dy = this.f;
                var c = [ [ this.a, this.c ], [ this.b, this.d ] ];
                b.scalex = e.sqrt(g(c[0])), h(c[0]), b.shear = c[0][0] * c[1][0] + c[0][1] * c[1][1], 
                c[1] = [ c[1][0] - c[0][0] * b.shear, c[1][1] - c[0][1] * b.shear ], b.scaley = e.sqrt(g(c[1])), 
                h(c[1]), b.shear /= b.scaley, this.determinant() < 0 && (b.scalex = -b.scalex);
                var d = -c[0][1], f = c[1][1];
                return 0 > f ? (b.rotate = a.deg(e.acos(f)), 0 > d && (b.rotate = 360 - b.rotate)) : b.rotate = a.deg(e.asin(d)), 
                b.isSimple = !(+b.shear.toFixed(9) || b.scalex.toFixed(9) != b.scaley.toFixed(9) && b.rotate), 
                b.isSuperSimple = !+b.shear.toFixed(9) && b.scalex.toFixed(9) == b.scaley.toFixed(9) && !b.rotate, 
                b.noRotation = !+b.shear.toFixed(9) && !b.rotate, b;
            }, c.toTransformString = function(a) {
                var b = a || this.split();
                return +b.shear.toFixed(9) ? "m" + [ this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5) ] : (b.scalex = +b.scalex.toFixed(4), 
                b.scaley = +b.scaley.toFixed(4), b.rotate = +b.rotate.toFixed(4), (b.dx || b.dy ? "t" + [ +b.dx.toFixed(4), +b.dy.toFixed(4) ] : f) + (1 != b.scalex || 1 != b.scaley ? "s" + [ b.scalex, b.scaley, 0, 0 ] : f) + (b.rotate ? "r" + [ +b.rotate.toFixed(4), 0, 0 ] : f));
            };
        }(b.prototype), a.Matrix = b, a.matrix = function(a, c, d, e, f, g) {
            return new b(a, c, d, e, f, g);
        };
    }), d.plugin(function(a, c, d, e, f) {
        function g(d) {
            return function(e) {
                if (b.stop(), e instanceof f && 1 == e.node.childNodes.length && ("radialGradient" == e.node.firstChild.tagName || "linearGradient" == e.node.firstChild.tagName || "pattern" == e.node.firstChild.tagName) && (e = e.node.firstChild, 
                n(this).appendChild(e), e = l(e)), e instanceof c) if ("radialGradient" == e.type || "linearGradient" == e.type || "pattern" == e.type) {
                    e.node.id || p(e.node, {
                        id: e.id
                    });
                    var g = q(e.node.id);
                } else g = e.attr(d); else if (g = a.color(e), g.error) {
                    var h = a(n(this).ownerSVGElement).gradient(e);
                    h ? (h.node.id || p(h.node, {
                        id: h.id
                    }), g = q(h.node.id)) : g = e;
                } else g = r(g);
                var i = {};
                i[d] = g, p(this.node, i), this.node.style[d] = t;
            };
        }
        function h(a) {
            b.stop(), a == +a && (a += "px"), this.node.style.fontSize = a;
        }
        function i(a) {
            for (var b = [], c = a.childNodes, d = 0, e = c.length; e > d; d++) {
                var f = c[d];
                3 == f.nodeType && b.push(f.nodeValue), "tspan" == f.tagName && b.push(1 == f.childNodes.length && 3 == f.firstChild.nodeType ? f.firstChild.nodeValue : i(f));
            }
            return b;
        }
        function j() {
            return b.stop(), this.node.style.fontSize;
        }
        var k = a._.make, l = a._.wrap, m = a.is, n = a._.getSomeDefs, o = /^url\(#?([^)]+)\)$/, p = a._.$, q = a.url, r = String, s = a._.separator, t = "";
        b.on("snap.util.attr.mask", function(a) {
            if (a instanceof c || a instanceof f) {
                if (b.stop(), a instanceof f && 1 == a.node.childNodes.length && (a = a.node.firstChild, 
                n(this).appendChild(a), a = l(a)), "mask" == a.type) var d = a; else d = k("mask", n(this)), 
                d.node.appendChild(a.node);
                !d.node.id && p(d.node, {
                    id: d.id
                }), p(this.node, {
                    mask: q(d.id)
                });
            }
        }), function(a) {
            b.on("snap.util.attr.clip", a), b.on("snap.util.attr.clip-path", a), b.on("snap.util.attr.clipPath", a);
        }(function(a) {
            if (a instanceof c || a instanceof f) {
                if (b.stop(), "clipPath" == a.type) var d = a; else d = k("clipPath", n(this)), 
                d.node.appendChild(a.node), !d.node.id && p(d.node, {
                    id: d.id
                });
                p(this.node, {
                    "clip-path": q(d.node.id || d.id)
                });
            }
        }), b.on("snap.util.attr.fill", g("fill")), b.on("snap.util.attr.stroke", g("stroke"));
        var u = /^([lr])(?:\(([^)]*)\))?(.*)$/i;
        b.on("snap.util.grad.parse", function(a) {
            a = r(a);
            var b = a.match(u);
            if (!b) return null;
            var c = b[1], d = b[2], e = b[3];
            return d = d.split(/\s*,\s*/).map(function(a) {
                return +a == a ? +a : a;
            }), 1 == d.length && 0 == d[0] && (d = []), e = e.split("-"), e = e.map(function(a) {
                a = a.split(":");
                var b = {
                    color: a[0]
                };
                return a[1] && (b.offset = parseFloat(a[1])), b;
            }), {
                type: c,
                params: d,
                stops: e
            };
        }), b.on("snap.util.attr.d", function(c) {
            b.stop(), m(c, "array") && m(c[0], "array") && (c = a.path.toString.call(c)), c = r(c), 
            c.match(/[ruo]/i) && (c = a.path.toAbsolute(c)), p(this.node, {
                d: c
            });
        })(-1), b.on("snap.util.attr.#text", function(a) {
            b.stop(), a = r(a);
            for (var c = e.doc.createTextNode(a); this.node.firstChild; ) this.node.removeChild(this.node.firstChild);
            this.node.appendChild(c);
        })(-1), b.on("snap.util.attr.path", function(a) {
            b.stop(), this.attr({
                d: a
            });
        })(-1), b.on("snap.util.attr.class", function(a) {
            b.stop(), this.node.className.baseVal = a;
        })(-1), b.on("snap.util.attr.viewBox", function(a) {
            var c;
            c = m(a, "object") && "x" in a ? [ a.x, a.y, a.width, a.height ].join(" ") : m(a, "array") ? a.join(" ") : a, 
            p(this.node, {
                viewBox: c
            }), b.stop();
        })(-1), b.on("snap.util.attr.transform", function(a) {
            this.transform(a), b.stop();
        })(-1), b.on("snap.util.attr.r", function(a) {
            "rect" == this.type && (b.stop(), p(this.node, {
                rx: a,
                ry: a
            }));
        })(-1), b.on("snap.util.attr.textpath", function(a) {
            if (b.stop(), "text" == this.type) {
                var d, e, f;
                if (!a && this.textPath) {
                    for (e = this.textPath; e.node.firstChild; ) this.node.appendChild(e.node.firstChild);
                    return e.remove(), void delete this.textPath;
                }
                if (m(a, "string")) {
                    var g = n(this), h = l(g.parentNode).path(a);
                    g.appendChild(h.node), d = h.id, h.attr({
                        id: d
                    });
                } else a = l(a), a instanceof c && (d = a.attr("id"), d || (d = a.id, a.attr({
                    id: d
                })));
                if (d) if (e = this.textPath, f = this.node, e) e.attr({
                    "xlink:href": "#" + d
                }); else {
                    for (e = p("textPath", {
                        "xlink:href": "#" + d
                    }); f.firstChild; ) e.appendChild(f.firstChild);
                    f.appendChild(e), this.textPath = l(e);
                }
            }
        })(-1), b.on("snap.util.attr.text", function(a) {
            if ("text" == this.type) {
                for (var c = this.node, d = function(a) {
                    var b = p("tspan");
                    if (m(a, "array")) for (var c = 0; c < a.length; c++) b.appendChild(d(a[c])); else b.appendChild(e.doc.createTextNode(a));
                    return b.normalize && b.normalize(), b;
                }; c.firstChild; ) c.removeChild(c.firstChild);
                for (var f = d(a); f.firstChild; ) c.appendChild(f.firstChild);
            }
            b.stop();
        })(-1), b.on("snap.util.attr.fontSize", h)(-1), b.on("snap.util.attr.font-size", h)(-1), 
        b.on("snap.util.getattr.transform", function() {
            return b.stop(), this.transform();
        })(-1), b.on("snap.util.getattr.textpath", function() {
            return b.stop(), this.textPath;
        })(-1), function() {
            function c(c) {
                return function() {
                    b.stop();
                    var d = e.doc.defaultView.getComputedStyle(this.node, null).getPropertyValue("marker-" + c);
                    return "none" == d ? d : a(e.doc.getElementById(d.match(o)[1]));
                };
            }
            function d(a) {
                return function(c) {
                    b.stop();
                    var d = "marker" + a.charAt(0).toUpperCase() + a.substring(1);
                    if ("" == c || !c) return void (this.node.style[d] = "none");
                    if ("marker" == c.type) {
                        var e = c.node.id;
                        return e || p(c.node, {
                            id: c.id
                        }), void (this.node.style[d] = q(e));
                    }
                };
            }
            b.on("snap.util.getattr.marker-end", c("end"))(-1), b.on("snap.util.getattr.markerEnd", c("end"))(-1), 
            b.on("snap.util.getattr.marker-start", c("start"))(-1), b.on("snap.util.getattr.markerStart", c("start"))(-1), 
            b.on("snap.util.getattr.marker-mid", c("mid"))(-1), b.on("snap.util.getattr.markerMid", c("mid"))(-1), 
            b.on("snap.util.attr.marker-end", d("end"))(-1), b.on("snap.util.attr.markerEnd", d("end"))(-1), 
            b.on("snap.util.attr.marker-start", d("start"))(-1), b.on("snap.util.attr.markerStart", d("start"))(-1), 
            b.on("snap.util.attr.marker-mid", d("mid"))(-1), b.on("snap.util.attr.markerMid", d("mid"))(-1);
        }(), b.on("snap.util.getattr.r", function() {
            return "rect" == this.type && p(this.node, "rx") == p(this.node, "ry") ? (b.stop(), 
            p(this.node, "rx")) : void 0;
        })(-1), b.on("snap.util.getattr.text", function() {
            if ("text" == this.type || "tspan" == this.type) {
                b.stop();
                var a = i(this.node);
                return 1 == a.length ? a[0] : a;
            }
        })(-1), b.on("snap.util.getattr.#text", function() {
            return this.node.textContent;
        })(-1), b.on("snap.util.getattr.viewBox", function() {
            b.stop();
            var c = p(this.node, "viewBox");
            return c ? (c = c.split(s), a._.box(+c[0], +c[1], +c[2], +c[3])) : void 0;
        })(-1), b.on("snap.util.getattr.points", function() {
            var a = p(this.node, "points");
            return b.stop(), a ? a.split(s) : void 0;
        })(-1), b.on("snap.util.getattr.path", function() {
            var a = p(this.node, "d");
            return b.stop(), a;
        })(-1), b.on("snap.util.getattr.class", function() {
            return this.node.className.baseVal;
        })(-1), b.on("snap.util.getattr.fontSize", j)(-1), b.on("snap.util.getattr.font-size", j)(-1);
    }), d.plugin(function(a, b) {
        var c = /\S+/g, d = String, e = b.prototype;
        e.addClass = function(a) {
            var b, e, f, g, h = d(a || "").match(c) || [], i = this.node, j = i.className.baseVal, k = j.match(c) || [];
            if (h.length) {
                for (b = 0; f = h[b++]; ) e = k.indexOf(f), ~e || k.push(f);
                g = k.join(" "), j != g && (i.className.baseVal = g);
            }
            return this;
        }, e.removeClass = function(a) {
            var b, e, f, g, h = d(a || "").match(c) || [], i = this.node, j = i.className.baseVal, k = j.match(c) || [];
            if (k.length) {
                for (b = 0; f = h[b++]; ) e = k.indexOf(f), ~e && k.splice(e, 1);
                g = k.join(" "), j != g && (i.className.baseVal = g);
            }
            return this;
        }, e.hasClass = function(a) {
            var b = this.node, d = b.className.baseVal, e = d.match(c) || [];
            return !!~e.indexOf(a);
        }, e.toggleClass = function(a, b) {
            if (null != b) return b ? this.addClass(a) : this.removeClass(a);
            var d, e, f, g, h = (a || "").match(c) || [], i = this.node, j = i.className.baseVal, k = j.match(c) || [];
            for (d = 0; f = h[d++]; ) e = k.indexOf(f), ~e ? k.splice(e, 1) : k.push(f);
            return g = k.join(" "), j != g && (i.className.baseVal = g), this;
        };
    }), d.plugin(function() {
        function a(a) {
            return a;
        }
        function c(a) {
            return function(b) {
                return +b.toFixed(3) + a;
            };
        }
        var d = {
            "+": function(a, b) {
                return a + b;
            },
            "-": function(a, b) {
                return a - b;
            },
            "/": function(a, b) {
                return a / b;
            },
            "*": function(a, b) {
                return a * b;
            }
        }, e = String, f = /[a-z]+$/i, g = /^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;
        b.on("snap.util.attr", function(a) {
            var c = e(a).match(g);
            if (c) {
                var h = b.nt(), i = h.substring(h.lastIndexOf(".") + 1), j = this.attr(i), k = {};
                b.stop();
                var l = c[3] || "", m = j.match(f), n = d[c[1]];
                if (m && m == l ? a = n(parseFloat(j), +c[2]) : (j = this.asPX(i), a = n(this.asPX(i), this.asPX(i, c[2] + l))), 
                isNaN(j) || isNaN(a)) return;
                k[i] = a, this.attr(k);
            }
        })(-10), b.on("snap.util.equal", function(h, i) {
            var j = e(this.attr(h) || ""), k = e(i).match(g);
            if (k) {
                b.stop();
                var l = k[3] || "", m = j.match(f), n = d[k[1]];
                return m && m == l ? {
                    from: parseFloat(j),
                    to: n(parseFloat(j), +k[2]),
                    f: c(m)
                } : (j = this.asPX(h), {
                    from: j,
                    to: n(j, this.asPX(h, k[2] + l)),
                    f: a
                });
            }
        })(-10);
    }), d.plugin(function(c, d, e, f) {
        var g = e.prototype, h = c.is;
        g.rect = function(a, b, c, d, e, f) {
            var g;
            return null == f && (f = e), h(a, "object") && "[object Object]" == a ? g = a : null != a && (g = {
                x: a,
                y: b,
                width: c,
                height: d
            }, null != e && (g.rx = e, g.ry = f)), this.el("rect", g);
        }, g.circle = function(a, b, c) {
            var d;
            return h(a, "object") && "[object Object]" == a ? d = a : null != a && (d = {
                cx: a,
                cy: b,
                r: c
            }), this.el("circle", d);
        };
        var i = function() {
            function a() {
                this.parentNode.removeChild(this);
            }
            return function(b, c) {
                var d = f.doc.createElement("img"), e = f.doc.body;
                d.style.cssText = "position:absolute;left:-9999em;top:-9999em", d.onload = function() {
                    c.call(d), d.onload = d.onerror = null, e.removeChild(d);
                }, d.onerror = a, e.appendChild(d), d.src = b;
            };
        }();
        g.image = function(a, b, d, e, f) {
            var g = this.el("image");
            if (h(a, "object") && "src" in a) g.attr(a); else if (null != a) {
                var j = {
                    "xlink:href": a,
                    preserveAspectRatio: "none"
                };
                null != b && null != d && (j.x = b, j.y = d), null != e && null != f ? (j.width = e, 
                j.height = f) : i(a, function() {
                    c._.$(g.node, {
                        width: this.offsetWidth,
                        height: this.offsetHeight
                    });
                }), c._.$(g.node, j);
            }
            return g;
        }, g.ellipse = function(a, b, c, d) {
            var e;
            return h(a, "object") && "[object Object]" == a ? e = a : null != a && (e = {
                cx: a,
                cy: b,
                rx: c,
                ry: d
            }), this.el("ellipse", e);
        }, g.path = function(a) {
            var b;
            return h(a, "object") && !h(a, "array") ? b = a : a && (b = {
                d: a
            }), this.el("path", b);
        }, g.group = g.g = function(a) {
            var b = this.el("g");
            return 1 == arguments.length && a && !a.type ? b.attr(a) : arguments.length && b.add(Array.prototype.slice.call(arguments, 0)), 
            b;
        }, g.svg = function(a, b, c, d, e, f, g, i) {
            var j = {};
            return h(a, "object") && null == b ? j = a : (null != a && (j.x = a), null != b && (j.y = b), 
            null != c && (j.width = c), null != d && (j.height = d), null != e && null != f && null != g && null != i && (j.viewBox = [ e, f, g, i ])), 
            this.el("svg", j);
        }, g.mask = function(a) {
            var b = this.el("mask");
            return 1 == arguments.length && a && !a.type ? b.attr(a) : arguments.length && b.add(Array.prototype.slice.call(arguments, 0)), 
            b;
        }, g.ptrn = function(a, b, c, d, e, f, g, i) {
            if (h(a, "object")) var j = a; else j = {
                patternUnits: "userSpaceOnUse"
            }, a && (j.x = a), b && (j.y = b), null != c && (j.width = c), null != d && (j.height = d), 
            j.viewBox = null != e && null != f && null != g && null != i ? [ e, f, g, i ] : [ a || 0, b || 0, c || 0, d || 0 ];
            return this.el("pattern", j);
        }, g.use = function(a) {
            return null != a ? (a instanceof d && (a.attr("id") || a.attr({
                id: c._.id(a)
            }), a = a.attr("id")), "#" == String(a).charAt() && (a = a.substring(1)), this.el("use", {
                "xlink:href": "#" + a
            })) : d.prototype.use.call(this);
        }, g.symbol = function(a, b, c, d) {
            var e = {};
            return null != a && null != b && null != c && null != d && (e.viewBox = [ a, b, c, d ]), 
            this.el("symbol", e);
        }, g.text = function(a, b, c) {
            var d = {};
            return h(a, "object") ? d = a : null != a && (d = {
                x: a,
                y: b,
                text: c || ""
            }), this.el("text", d);
        }, g.line = function(a, b, c, d) {
            var e = {};
            return h(a, "object") ? e = a : null != a && (e = {
                x1: a,
                x2: c,
                y1: b,
                y2: d
            }), this.el("line", e);
        }, g.polyline = function(a) {
            arguments.length > 1 && (a = Array.prototype.slice.call(arguments, 0));
            var b = {};
            return h(a, "object") && !h(a, "array") ? b = a : null != a && (b = {
                points: a
            }), this.el("polyline", b);
        }, g.polygon = function(a) {
            arguments.length > 1 && (a = Array.prototype.slice.call(arguments, 0));
            var b = {};
            return h(a, "object") && !h(a, "array") ? b = a : null != a && (b = {
                points: a
            }), this.el("polygon", b);
        }, function() {
            function d() {
                return this.selectAll("stop");
            }
            function e(a, b) {
                var d = k("stop"), e = {
                    offset: +b + "%"
                };
                return a = c.color(a), e["stop-color"] = a.hex, a.opacity < 1 && (e["stop-opacity"] = a.opacity), 
                k(d, e), this.node.appendChild(d), this;
            }
            function f() {
                if ("linearGradient" == this.type) {
                    var a = k(this.node, "x1") || 0, b = k(this.node, "x2") || 1, d = k(this.node, "y1") || 0, e = k(this.node, "y2") || 0;
                    return c._.box(a, d, math.abs(b - a), math.abs(e - d));
                }
                var f = this.node.cx || .5, g = this.node.cy || .5, h = this.node.r || 0;
                return c._.box(f - h, g - h, 2 * h, 2 * h);
            }
            function h(a, c) {
                function d(a, b) {
                    for (var c = (b - l) / (a - m), d = m; a > d; d++) g[d].offset = +(+l + c * (d - m)).toFixed(2);
                    m = a, l = b;
                }
                var e, f = b("snap.util.grad.parse", null, c).firstDefined();
                if (!f) return null;
                f.params.unshift(a), e = "l" == f.type.toLowerCase() ? i.apply(0, f.params) : j.apply(0, f.params), 
                f.type != f.type.toLowerCase() && k(e.node, {
                    gradientUnits: "userSpaceOnUse"
                });
                var g = f.stops, h = g.length, l = 0, m = 0;
                h--;
                for (var n = 0; h > n; n++) "offset" in g[n] && d(n, g[n].offset);
                for (g[h].offset = g[h].offset || 100, d(h, g[h].offset), n = 0; h >= n; n++) {
                    var o = g[n];
                    e.addStop(o.color, o.offset);
                }
                return e;
            }
            function i(a, b, g, h, i) {
                var j = c._.make("linearGradient", a);
                return j.stops = d, j.addStop = e, j.getBBox = f, null != b && k(j.node, {
                    x1: b,
                    y1: g,
                    x2: h,
                    y2: i
                }), j;
            }
            function j(a, b, g, h, i, j) {
                var l = c._.make("radialGradient", a);
                return l.stops = d, l.addStop = e, l.getBBox = f, null != b && k(l.node, {
                    cx: b,
                    cy: g,
                    r: h
                }), null != i && null != j && k(l.node, {
                    fx: i,
                    fy: j
                }), l;
            }
            var k = c._.$;
            g.gradient = function(a) {
                return h(this.defs, a);
            }, g.gradientLinear = function(a, b, c, d) {
                return i(this.defs, a, b, c, d);
            }, g.gradientRadial = function(a, b, c, d, e) {
                return j(this.defs, a, b, c, d, e);
            }, g.toString = function() {
                var a, b = this.node.ownerDocument, d = b.createDocumentFragment(), e = b.createElement("div"), f = this.node.cloneNode(!0);
                return d.appendChild(e), e.appendChild(f), c._.$(f, {
                    xmlns: "http://www.w3.org/2000/svg"
                }), a = e.innerHTML, d.removeChild(d.firstChild), a;
            }, g.toDataURL = function() {
                return a && a.btoa ? "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(this))) : void 0;
            }, g.clear = function() {
                for (var a, b = this.node.firstChild; b; ) a = b.nextSibling, "defs" != b.tagName ? b.parentNode.removeChild(b) : g.clear.call({
                    node: b
                }), b = a;
            };
        }();
    }), d.plugin(function(a, b) {
        function c(a) {
            var b = c.ps = c.ps || {};
            return b[a] ? b[a].sleep = 100 : b[a] = {
                sleep: 100
            }, setTimeout(function() {
                for (var c in b) b[K](c) && c != a && (b[c].sleep--, !b[c].sleep && delete b[c]);
            }), b[a];
        }
        function d(a, b, c, d) {
            return null == a && (a = b = c = d = 0), null == b && (b = a.y, c = a.width, d = a.height, 
            a = a.x), {
                x: a,
                y: b,
                width: c,
                w: c,
                height: d,
                h: d,
                x2: a + c,
                y2: b + d,
                cx: a + c / 2,
                cy: b + d / 2,
                r1: N.min(c, d) / 2,
                r2: N.max(c, d) / 2,
                r0: N.sqrt(c * c + d * d) / 2,
                path: w(a, b, c, d),
                vb: [ a, b, c, d ].join(" ")
            };
        }
        function e() {
            return this.join(",").replace(L, "$1");
        }
        function f(a) {
            var b = J(a);
            return b.toString = e, b;
        }
        function g(a, b, c, d, e, f, g, h, j) {
            return null == j ? n(a, b, c, d, e, f, g, h) : i(a, b, c, d, e, f, g, h, o(a, b, c, d, e, f, g, h, j));
        }
        function h(c, d) {
            function e(a) {
                return +(+a).toFixed(3);
            }
            return a._.cacher(function(a, f, h) {
                a instanceof b && (a = a.attr("d")), a = E(a);
                for (var j, k, l, m, n, o = "", p = {}, q = 0, r = 0, s = a.length; s > r; r++) {
                    if (l = a[r], "M" == l[0]) j = +l[1], k = +l[2]; else {
                        if (m = g(j, k, l[1], l[2], l[3], l[4], l[5], l[6]), q + m > f) {
                            if (d && !p.start) {
                                if (n = g(j, k, l[1], l[2], l[3], l[4], l[5], l[6], f - q), o += [ "C" + e(n.start.x), e(n.start.y), e(n.m.x), e(n.m.y), e(n.x), e(n.y) ], 
                                h) return o;
                                p.start = o, o = [ "M" + e(n.x), e(n.y) + "C" + e(n.n.x), e(n.n.y), e(n.end.x), e(n.end.y), e(l[5]), e(l[6]) ].join(), 
                                q += m, j = +l[5], k = +l[6];
                                continue;
                            }
                            if (!c && !d) return n = g(j, k, l[1], l[2], l[3], l[4], l[5], l[6], f - q);
                        }
                        q += m, j = +l[5], k = +l[6];
                    }
                    o += l.shift() + l;
                }
                return p.end = o, n = c ? q : d ? p : i(j, k, l[0], l[1], l[2], l[3], l[4], l[5], 1);
            }, null, a._.clone);
        }
        function i(a, b, c, d, e, f, g, h, i) {
            var j = 1 - i, k = R(j, 3), l = R(j, 2), m = i * i, n = m * i, o = k * a + 3 * l * i * c + 3 * j * i * i * e + n * g, p = k * b + 3 * l * i * d + 3 * j * i * i * f + n * h, q = a + 2 * i * (c - a) + m * (e - 2 * c + a), r = b + 2 * i * (d - b) + m * (f - 2 * d + b), s = c + 2 * i * (e - c) + m * (g - 2 * e + c), t = d + 2 * i * (f - d) + m * (h - 2 * f + d), u = j * a + i * c, v = j * b + i * d, w = j * e + i * g, x = j * f + i * h, y = 90 - 180 * N.atan2(q - s, r - t) / O;
            return {
                x: o,
                y: p,
                m: {
                    x: q,
                    y: r
                },
                n: {
                    x: s,
                    y: t
                },
                start: {
                    x: u,
                    y: v
                },
                end: {
                    x: w,
                    y: x
                },
                alpha: y
            };
        }
        function j(b, c, e, f, g, h, i, j) {
            a.is(b, "array") || (b = [ b, c, e, f, g, h, i, j ]);
            var k = D.apply(null, b);
            return d(k.min.x, k.min.y, k.max.x - k.min.x, k.max.y - k.min.y);
        }
        function k(a, b, c) {
            return b >= a.x && b <= a.x + a.width && c >= a.y && c <= a.y + a.height;
        }
        function l(a, b) {
            return a = d(a), b = d(b), k(b, a.x, a.y) || k(b, a.x2, a.y) || k(b, a.x, a.y2) || k(b, a.x2, a.y2) || k(a, b.x, b.y) || k(a, b.x2, b.y) || k(a, b.x, b.y2) || k(a, b.x2, b.y2) || (a.x < b.x2 && a.x > b.x || b.x < a.x2 && b.x > a.x) && (a.y < b.y2 && a.y > b.y || b.y < a.y2 && b.y > a.y);
        }
        function m(a, b, c, d, e) {
            var f = -3 * b + 9 * c - 9 * d + 3 * e, g = a * f + 6 * b - 12 * c + 6 * d;
            return a * g - 3 * b + 3 * c;
        }
        function n(a, b, c, d, e, f, g, h, i) {
            null == i && (i = 1), i = i > 1 ? 1 : 0 > i ? 0 : i;
            for (var j = i / 2, k = 12, l = [ -.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816 ], n = [ .2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472 ], o = 0, p = 0; k > p; p++) {
                var q = j * l[p] + j, r = m(q, a, c, e, g), s = m(q, b, d, f, h), t = r * r + s * s;
                o += n[p] * N.sqrt(t);
            }
            return j * o;
        }
        function o(a, b, c, d, e, f, g, h, i) {
            if (!(0 > i || n(a, b, c, d, e, f, g, h) < i)) {
                var j, k = 1, l = k / 2, m = k - l, o = .01;
                for (j = n(a, b, c, d, e, f, g, h, m); S(j - i) > o; ) l /= 2, m += (i > j ? 1 : -1) * l, 
                j = n(a, b, c, d, e, f, g, h, m);
                return m;
            }
        }
        function p(a, b, c, d, e, f, g, h) {
            if (!(Q(a, c) < P(e, g) || P(a, c) > Q(e, g) || Q(b, d) < P(f, h) || P(b, d) > Q(f, h))) {
                var i = (a * d - b * c) * (e - g) - (a - c) * (e * h - f * g), j = (a * d - b * c) * (f - h) - (b - d) * (e * h - f * g), k = (a - c) * (f - h) - (b - d) * (e - g);
                if (k) {
                    var l = i / k, m = j / k, n = +l.toFixed(2), o = +m.toFixed(2);
                    if (!(n < +P(a, c).toFixed(2) || n > +Q(a, c).toFixed(2) || n < +P(e, g).toFixed(2) || n > +Q(e, g).toFixed(2) || o < +P(b, d).toFixed(2) || o > +Q(b, d).toFixed(2) || o < +P(f, h).toFixed(2) || o > +Q(f, h).toFixed(2))) return {
                        x: l,
                        y: m
                    };
                }
            }
        }
        function q(a, b, c) {
            var d = j(a), e = j(b);
            if (!l(d, e)) return c ? 0 : [];
            for (var f = n.apply(0, a), g = n.apply(0, b), h = ~~(f / 8), k = ~~(g / 8), m = [], o = [], q = {}, r = c ? 0 : [], s = 0; h + 1 > s; s++) {
                var t = i.apply(0, a.concat(s / h));
                m.push({
                    x: t.x,
                    y: t.y,
                    t: s / h
                });
            }
            for (s = 0; k + 1 > s; s++) t = i.apply(0, b.concat(s / k)), o.push({
                x: t.x,
                y: t.y,
                t: s / k
            });
            for (s = 0; h > s; s++) for (var u = 0; k > u; u++) {
                var v = m[s], w = m[s + 1], x = o[u], y = o[u + 1], z = S(w.x - v.x) < .001 ? "y" : "x", A = S(y.x - x.x) < .001 ? "y" : "x", B = p(v.x, v.y, w.x, w.y, x.x, x.y, y.x, y.y);
                if (B) {
                    if (q[B.x.toFixed(4)] == B.y.toFixed(4)) continue;
                    q[B.x.toFixed(4)] = B.y.toFixed(4);
                    var C = v.t + S((B[z] - v[z]) / (w[z] - v[z])) * (w.t - v.t), D = x.t + S((B[A] - x[A]) / (y[A] - x[A])) * (y.t - x.t);
                    C >= 0 && 1 >= C && D >= 0 && 1 >= D && (c ? r++ : r.push({
                        x: B.x,
                        y: B.y,
                        t1: C,
                        t2: D
                    }));
                }
            }
            return r;
        }
        function r(a, b) {
            return t(a, b);
        }
        function s(a, b) {
            return t(a, b, 1);
        }
        function t(a, b, c) {
            a = E(a), b = E(b);
            for (var d, e, f, g, h, i, j, k, l, m, n = c ? 0 : [], o = 0, p = a.length; p > o; o++) {
                var r = a[o];
                if ("M" == r[0]) d = h = r[1], e = i = r[2]; else {
                    "C" == r[0] ? (l = [ d, e ].concat(r.slice(1)), d = l[6], e = l[7]) : (l = [ d, e, d, e, h, i, h, i ], 
                    d = h, e = i);
                    for (var s = 0, t = b.length; t > s; s++) {
                        var u = b[s];
                        if ("M" == u[0]) f = j = u[1], g = k = u[2]; else {
                            "C" == u[0] ? (m = [ f, g ].concat(u.slice(1)), f = m[6], g = m[7]) : (m = [ f, g, f, g, j, k, j, k ], 
                            f = j, g = k);
                            var v = q(l, m, c);
                            if (c) n += v; else {
                                for (var w = 0, x = v.length; x > w; w++) v[w].segment1 = o, v[w].segment2 = s, 
                                v[w].bez1 = l, v[w].bez2 = m;
                                n = n.concat(v);
                            }
                        }
                    }
                }
            }
            return n;
        }
        function u(a, b, c) {
            var d = v(a);
            return k(d, b, c) && t(a, [ [ "M", b, c ], [ "H", d.x2 + 10 ] ], 1) % 2 == 1;
        }
        function v(a) {
            var b = c(a);
            if (b.bbox) return J(b.bbox);
            if (!a) return d();
            a = E(a);
            for (var e, f = 0, g = 0, h = [], i = [], j = 0, k = a.length; k > j; j++) if (e = a[j], 
            "M" == e[0]) f = e[1], g = e[2], h.push(f), i.push(g); else {
                var l = D(f, g, e[1], e[2], e[3], e[4], e[5], e[6]);
                h = h.concat(l.min.x, l.max.x), i = i.concat(l.min.y, l.max.y), f = e[5], g = e[6];
            }
            var m = P.apply(0, h), n = P.apply(0, i), o = Q.apply(0, h), p = Q.apply(0, i), q = d(m, n, o - m, p - n);
            return b.bbox = J(q), q;
        }
        function w(a, b, c, d, f) {
            if (f) return [ [ "M", +a + +f, b ], [ "l", c - 2 * f, 0 ], [ "a", f, f, 0, 0, 1, f, f ], [ "l", 0, d - 2 * f ], [ "a", f, f, 0, 0, 1, -f, f ], [ "l", 2 * f - c, 0 ], [ "a", f, f, 0, 0, 1, -f, -f ], [ "l", 0, 2 * f - d ], [ "a", f, f, 0, 0, 1, f, -f ], [ "z" ] ];
            var g = [ [ "M", a, b ], [ "l", c, 0 ], [ "l", 0, d ], [ "l", -c, 0 ], [ "z" ] ];
            return g.toString = e, g;
        }
        function x(a, b, c, d, f) {
            if (null == f && null == d && (d = c), a = +a, b = +b, c = +c, d = +d, null != f) var g = Math.PI / 180, h = a + c * Math.cos(-d * g), i = a + c * Math.cos(-f * g), j = b + c * Math.sin(-d * g), k = b + c * Math.sin(-f * g), l = [ [ "M", h, j ], [ "A", c, c, 0, +(f - d > 180), 0, i, k ] ]; else l = [ [ "M", a, b ], [ "m", 0, -d ], [ "a", c, d, 0, 1, 1, 0, 2 * d ], [ "a", c, d, 0, 1, 1, 0, -2 * d ], [ "z" ] ];
            return l.toString = e, l;
        }
        function y(b) {
            var d = c(b), g = String.prototype.toLowerCase;
            if (d.rel) return f(d.rel);
            a.is(b, "array") && a.is(b && b[0], "array") || (b = a.parsePathString(b));
            var h = [], i = 0, j = 0, k = 0, l = 0, m = 0;
            "M" == b[0][0] && (i = b[0][1], j = b[0][2], k = i, l = j, m++, h.push([ "M", i, j ]));
            for (var n = m, o = b.length; o > n; n++) {
                var p = h[n] = [], q = b[n];
                if (q[0] != g.call(q[0])) switch (p[0] = g.call(q[0]), p[0]) {
                  case "a":
                    p[1] = q[1], p[2] = q[2], p[3] = q[3], p[4] = q[4], p[5] = q[5], p[6] = +(q[6] - i).toFixed(3), 
                    p[7] = +(q[7] - j).toFixed(3);
                    break;

                  case "v":
                    p[1] = +(q[1] - j).toFixed(3);
                    break;

                  case "m":
                    k = q[1], l = q[2];

                  default:
                    for (var r = 1, s = q.length; s > r; r++) p[r] = +(q[r] - (r % 2 ? i : j)).toFixed(3);
                } else {
                    p = h[n] = [], "m" == q[0] && (k = q[1] + i, l = q[2] + j);
                    for (var t = 0, u = q.length; u > t; t++) h[n][t] = q[t];
                }
                var v = h[n].length;
                switch (h[n][0]) {
                  case "z":
                    i = k, j = l;
                    break;

                  case "h":
                    i += +h[n][v - 1];
                    break;

                  case "v":
                    j += +h[n][v - 1];
                    break;

                  default:
                    i += +h[n][v - 2], j += +h[n][v - 1];
                }
            }
            return h.toString = e, d.rel = f(h), h;
        }
        function z(b) {
            var d = c(b);
            if (d.abs) return f(d.abs);
            if (I(b, "array") && I(b && b[0], "array") || (b = a.parsePathString(b)), !b || !b.length) return [ [ "M", 0, 0 ] ];
            var g, h = [], i = 0, j = 0, k = 0, l = 0, m = 0;
            "M" == b[0][0] && (i = +b[0][1], j = +b[0][2], k = i, l = j, m++, h[0] = [ "M", i, j ]);
            for (var n, o, p = 3 == b.length && "M" == b[0][0] && "R" == b[1][0].toUpperCase() && "Z" == b[2][0].toUpperCase(), q = m, r = b.length; r > q; q++) {
                if (h.push(n = []), o = b[q], g = o[0], g != g.toUpperCase()) switch (n[0] = g.toUpperCase(), 
                n[0]) {
                  case "A":
                    n[1] = o[1], n[2] = o[2], n[3] = o[3], n[4] = o[4], n[5] = o[5], n[6] = +o[6] + i, 
                    n[7] = +o[7] + j;
                    break;

                  case "V":
                    n[1] = +o[1] + j;
                    break;

                  case "H":
                    n[1] = +o[1] + i;
                    break;

                  case "R":
                    for (var s = [ i, j ].concat(o.slice(1)), t = 2, u = s.length; u > t; t++) s[t] = +s[t] + i, 
                    s[++t] = +s[t] + j;
                    h.pop(), h = h.concat(G(s, p));
                    break;

                  case "O":
                    h.pop(), s = x(i, j, o[1], o[2]), s.push(s[0]), h = h.concat(s);
                    break;

                  case "U":
                    h.pop(), h = h.concat(x(i, j, o[1], o[2], o[3])), n = [ "U" ].concat(h[h.length - 1].slice(-2));
                    break;

                  case "M":
                    k = +o[1] + i, l = +o[2] + j;

                  default:
                    for (t = 1, u = o.length; u > t; t++) n[t] = +o[t] + (t % 2 ? i : j);
                } else if ("R" == g) s = [ i, j ].concat(o.slice(1)), h.pop(), h = h.concat(G(s, p)), 
                n = [ "R" ].concat(o.slice(-2)); else if ("O" == g) h.pop(), s = x(i, j, o[1], o[2]), 
                s.push(s[0]), h = h.concat(s); else if ("U" == g) h.pop(), h = h.concat(x(i, j, o[1], o[2], o[3])), 
                n = [ "U" ].concat(h[h.length - 1].slice(-2)); else for (var v = 0, w = o.length; w > v; v++) n[v] = o[v];
                if (g = g.toUpperCase(), "O" != g) switch (n[0]) {
                  case "Z":
                    i = +k, j = +l;
                    break;

                  case "H":
                    i = n[1];
                    break;

                  case "V":
                    j = n[1];
                    break;

                  case "M":
                    k = n[n.length - 2], l = n[n.length - 1];

                  default:
                    i = n[n.length - 2], j = n[n.length - 1];
                }
            }
            return h.toString = e, d.abs = f(h), h;
        }
        function A(a, b, c, d) {
            return [ a, b, c, d, c, d ];
        }
        function B(a, b, c, d, e, f) {
            var g = 1 / 3, h = 2 / 3;
            return [ g * a + h * c, g * b + h * d, g * e + h * c, g * f + h * d, e, f ];
        }
        function C(b, c, d, e, f, g, h, i, j, k) {
            var l, m = 120 * O / 180, n = O / 180 * (+f || 0), o = [], p = a._.cacher(function(a, b, c) {
                var d = a * N.cos(c) - b * N.sin(c), e = a * N.sin(c) + b * N.cos(c);
                return {
                    x: d,
                    y: e
                };
            });
            if (k) y = k[0], z = k[1], w = k[2], x = k[3]; else {
                l = p(b, c, -n), b = l.x, c = l.y, l = p(i, j, -n), i = l.x, j = l.y;
                var q = (N.cos(O / 180 * f), N.sin(O / 180 * f), (b - i) / 2), r = (c - j) / 2, s = q * q / (d * d) + r * r / (e * e);
                s > 1 && (s = N.sqrt(s), d = s * d, e = s * e);
                var t = d * d, u = e * e, v = (g == h ? -1 : 1) * N.sqrt(S((t * u - t * r * r - u * q * q) / (t * r * r + u * q * q))), w = v * d * r / e + (b + i) / 2, x = v * -e * q / d + (c + j) / 2, y = N.asin(((c - x) / e).toFixed(9)), z = N.asin(((j - x) / e).toFixed(9));
                y = w > b ? O - y : y, z = w > i ? O - z : z, 0 > y && (y = 2 * O + y), 0 > z && (z = 2 * O + z), 
                h && y > z && (y -= 2 * O), !h && z > y && (z -= 2 * O);
            }
            var A = z - y;
            if (S(A) > m) {
                var B = z, D = i, E = j;
                z = y + m * (h && z > y ? 1 : -1), i = w + d * N.cos(z), j = x + e * N.sin(z), o = C(i, j, d, e, f, 0, h, D, E, [ z, B, w, x ]);
            }
            A = z - y;
            var F = N.cos(y), G = N.sin(y), H = N.cos(z), I = N.sin(z), J = N.tan(A / 4), K = 4 / 3 * d * J, L = 4 / 3 * e * J, M = [ b, c ], P = [ b + K * G, c - L * F ], Q = [ i + K * I, j - L * H ], R = [ i, j ];
            if (P[0] = 2 * M[0] - P[0], P[1] = 2 * M[1] - P[1], k) return [ P, Q, R ].concat(o);
            o = [ P, Q, R ].concat(o).join().split(",");
            for (var T = [], U = 0, V = o.length; V > U; U++) T[U] = U % 2 ? p(o[U - 1], o[U], n).y : p(o[U], o[U + 1], n).x;
            return T;
        }
        function D(a, b, c, d, e, f, g, h) {
            for (var i, j, k, l, m, n, o, p, q = [], r = [ [], [] ], s = 0; 2 > s; ++s) if (0 == s ? (j = 6 * a - 12 * c + 6 * e, 
            i = -3 * a + 9 * c - 9 * e + 3 * g, k = 3 * c - 3 * a) : (j = 6 * b - 12 * d + 6 * f, 
            i = -3 * b + 9 * d - 9 * f + 3 * h, k = 3 * d - 3 * b), S(i) < 1e-12) {
                if (S(j) < 1e-12) continue;
                l = -k / j, l > 0 && 1 > l && q.push(l);
            } else o = j * j - 4 * k * i, p = N.sqrt(o), 0 > o || (m = (-j + p) / (2 * i), m > 0 && 1 > m && q.push(m), 
            n = (-j - p) / (2 * i), n > 0 && 1 > n && q.push(n));
            for (var t, u = q.length, v = u; u--; ) l = q[u], t = 1 - l, r[0][u] = t * t * t * a + 3 * t * t * l * c + 3 * t * l * l * e + l * l * l * g, 
            r[1][u] = t * t * t * b + 3 * t * t * l * d + 3 * t * l * l * f + l * l * l * h;
            return r[0][v] = a, r[1][v] = b, r[0][v + 1] = g, r[1][v + 1] = h, r[0].length = r[1].length = v + 2, 
            {
                min: {
                    x: P.apply(0, r[0]),
                    y: P.apply(0, r[1])
                },
                max: {
                    x: Q.apply(0, r[0]),
                    y: Q.apply(0, r[1])
                }
            };
        }
        function E(a, b) {
            var d = !b && c(a);
            if (!b && d.curve) return f(d.curve);
            for (var e = z(a), g = b && z(b), h = {
                x: 0,
                y: 0,
                bx: 0,
                by: 0,
                X: 0,
                Y: 0,
                qx: null,
                qy: null
            }, i = {
                x: 0,
                y: 0,
                bx: 0,
                by: 0,
                X: 0,
                Y: 0,
                qx: null,
                qy: null
            }, j = (function(a, b, c) {
                var d, e;
                if (!a) return [ "C", b.x, b.y, b.x, b.y, b.x, b.y ];
                switch (!(a[0] in {
                    T: 1,
                    Q: 1
                }) && (b.qx = b.qy = null), a[0]) {
                  case "M":
                    b.X = a[1], b.Y = a[2];
                    break;

                  case "A":
                    a = [ "C" ].concat(C.apply(0, [ b.x, b.y ].concat(a.slice(1))));
                    break;

                  case "S":
                    "C" == c || "S" == c ? (d = 2 * b.x - b.bx, e = 2 * b.y - b.by) : (d = b.x, e = b.y), 
                    a = [ "C", d, e ].concat(a.slice(1));
                    break;

                  case "T":
                    "Q" == c || "T" == c ? (b.qx = 2 * b.x - b.qx, b.qy = 2 * b.y - b.qy) : (b.qx = b.x, 
                    b.qy = b.y), a = [ "C" ].concat(B(b.x, b.y, b.qx, b.qy, a[1], a[2]));
                    break;

                  case "Q":
                    b.qx = a[1], b.qy = a[2], a = [ "C" ].concat(B(b.x, b.y, a[1], a[2], a[3], a[4]));
                    break;

                  case "L":
                    a = [ "C" ].concat(A(b.x, b.y, a[1], a[2]));
                    break;

                  case "H":
                    a = [ "C" ].concat(A(b.x, b.y, a[1], b.y));
                    break;

                  case "V":
                    a = [ "C" ].concat(A(b.x, b.y, b.x, a[1]));
                    break;

                  case "Z":
                    a = [ "C" ].concat(A(b.x, b.y, b.X, b.Y));
                }
                return a;
            }), k = function(a, b) {
                if (a[b].length > 7) {
                    a[b].shift();
                    for (var c = a[b]; c.length; ) m[b] = "A", g && (n[b] = "A"), a.splice(b++, 0, [ "C" ].concat(c.splice(0, 6)));
                    a.splice(b, 1), r = Q(e.length, g && g.length || 0);
                }
            }, l = function(a, b, c, d, f) {
                a && b && "M" == a[f][0] && "M" != b[f][0] && (b.splice(f, 0, [ "M", d.x, d.y ]), 
                c.bx = 0, c.by = 0, c.x = a[f][1], c.y = a[f][2], r = Q(e.length, g && g.length || 0));
            }, m = [], n = [], o = "", p = "", q = 0, r = Q(e.length, g && g.length || 0); r > q; q++) {
                e[q] && (o = e[q][0]), "C" != o && (m[q] = o, q && (p = m[q - 1])), e[q] = j(e[q], h, p), 
                "A" != m[q] && "C" == o && (m[q] = "C"), k(e, q), g && (g[q] && (o = g[q][0]), "C" != o && (n[q] = o, 
                q && (p = n[q - 1])), g[q] = j(g[q], i, p), "A" != n[q] && "C" == o && (n[q] = "C"), 
                k(g, q)), l(e, g, h, i, q), l(g, e, i, h, q);
                var s = e[q], t = g && g[q], u = s.length, v = g && t.length;
                h.x = s[u - 2], h.y = s[u - 1], h.bx = M(s[u - 4]) || h.x, h.by = M(s[u - 3]) || h.y, 
                i.bx = g && (M(t[v - 4]) || i.x), i.by = g && (M(t[v - 3]) || i.y), i.x = g && t[v - 2], 
                i.y = g && t[v - 1];
            }
            return g || (d.curve = f(e)), g ? [ e, g ] : e;
        }
        function F(a, b) {
            if (!b) return a;
            var c, d, e, f, g, h, i;
            for (a = E(a), e = 0, g = a.length; g > e; e++) for (i = a[e], f = 1, h = i.length; h > f; f += 2) c = b.x(i[f], i[f + 1]), 
            d = b.y(i[f], i[f + 1]), i[f] = c, i[f + 1] = d;
            return a;
        }
        function G(a, b) {
            for (var c = [], d = 0, e = a.length; e - 2 * !b > d; d += 2) {
                var f = [ {
                    x: +a[d - 2],
                    y: +a[d - 1]
                }, {
                    x: +a[d],
                    y: +a[d + 1]
                }, {
                    x: +a[d + 2],
                    y: +a[d + 3]
                }, {
                    x: +a[d + 4],
                    y: +a[d + 5]
                } ];
                b ? d ? e - 4 == d ? f[3] = {
                    x: +a[0],
                    y: +a[1]
                } : e - 2 == d && (f[2] = {
                    x: +a[0],
                    y: +a[1]
                }, f[3] = {
                    x: +a[2],
                    y: +a[3]
                }) : f[0] = {
                    x: +a[e - 2],
                    y: +a[e - 1]
                } : e - 4 == d ? f[3] = f[2] : d || (f[0] = {
                    x: +a[d],
                    y: +a[d + 1]
                }), c.push([ "C", (-f[0].x + 6 * f[1].x + f[2].x) / 6, (-f[0].y + 6 * f[1].y + f[2].y) / 6, (f[1].x + 6 * f[2].x - f[3].x) / 6, (f[1].y + 6 * f[2].y - f[3].y) / 6, f[2].x, f[2].y ]);
            }
            return c;
        }
        var H = b.prototype, I = a.is, J = a._.clone, K = "hasOwnProperty", L = /,?([a-z]),?/gi, M = parseFloat, N = Math, O = N.PI, P = N.min, Q = N.max, R = N.pow, S = N.abs, T = h(1), U = h(), V = h(0, 1), W = a._unit2px, X = {
            path: function(a) {
                return a.attr("path");
            },
            circle: function(a) {
                var b = W(a);
                return x(b.cx, b.cy, b.r);
            },
            ellipse: function(a) {
                var b = W(a);
                return x(b.cx || 0, b.cy || 0, b.rx, b.ry);
            },
            rect: function(a) {
                var b = W(a);
                return w(b.x || 0, b.y || 0, b.width, b.height, b.rx, b.ry);
            },
            image: function(a) {
                var b = W(a);
                return w(b.x || 0, b.y || 0, b.width, b.height);
            },
            line: function(a) {
                return "M" + [ a.attr("x1") || 0, a.attr("y1") || 0, a.attr("x2"), a.attr("y2") ];
            },
            polyline: function(a) {
                return "M" + a.attr("points");
            },
            polygon: function(a) {
                return "M" + a.attr("points") + "z";
            },
            deflt: function(a) {
                var b = a.node.getBBox();
                return w(b.x, b.y, b.width, b.height);
            }
        };
        a.path = c, a.path.getTotalLength = T, a.path.getPointAtLength = U, a.path.getSubpath = function(a, b, c) {
            if (this.getTotalLength(a) - c < 1e-6) return V(a, b).end;
            var d = V(a, c, 1);
            return b ? V(d, b).end : d;
        }, H.getTotalLength = function() {
            return this.node.getTotalLength ? this.node.getTotalLength() : void 0;
        }, H.getPointAtLength = function(a) {
            return U(this.attr("d"), a);
        }, H.getSubpath = function(b, c) {
            return a.path.getSubpath(this.attr("d"), b, c);
        }, a._.box = d, a.path.findDotsAtSegment = i, a.path.bezierBBox = j, a.path.isPointInsideBBox = k, 
        a.closest = function(b, c, e, f) {
            for (var g = 100, h = d(b - g / 2, c - g / 2, g, g), i = [], j = e[0].hasOwnProperty("x") ? function(a) {
                return {
                    x: e[a].x,
                    y: e[a].y
                };
            } : function(a) {
                return {
                    x: e[a],
                    y: f[a]
                };
            }, l = 0; 1e6 >= g && !l; ) {
                for (var m = 0, n = e.length; n > m; m++) {
                    var o = j(m);
                    if (k(h, o.x, o.y)) {
                        l++, i.push(o);
                        break;
                    }
                }
                l || (g *= 2, h = d(b - g / 2, c - g / 2, g, g));
            }
            if (1e6 != g) {
                var p, q = 1 / 0;
                for (m = 0, n = i.length; n > m; m++) {
                    var r = a.len(b, c, i[m].x, i[m].y);
                    q > r && (q = r, i[m].len = r, p = i[m]);
                }
                return p;
            }
        }, a.path.isBBoxIntersect = l, a.path.intersection = r, a.path.intersectionNumber = s, 
        a.path.isPointInside = u, a.path.getBBox = v, a.path.get = X, a.path.toRelative = y, 
        a.path.toAbsolute = z, a.path.toCubic = E, a.path.map = F, a.path.toString = e, 
        a.path.clone = f;
    }), d.plugin(function(a) {
        var d = Math.max, e = Math.min, f = function(a) {
            if (this.items = [], this.bindings = {}, this.length = 0, this.type = "set", a) for (var b = 0, c = a.length; c > b; b++) a[b] && (this[this.items.length] = this.items[this.items.length] = a[b], 
            this.length++);
        }, g = f.prototype;
        g.push = function() {
            for (var a, b, c = 0, d = arguments.length; d > c; c++) a = arguments[c], a && (b = this.items.length, 
            this[b] = this.items[b] = a, this.length++);
            return this;
        }, g.pop = function() {
            return this.length && delete this[this.length--], this.items.pop();
        }, g.forEach = function(a, b) {
            for (var c = 0, d = this.items.length; d > c; c++) if (a.call(b, this.items[c], c) === !1) return this;
            return this;
        }, g.animate = function(d, e, f, g) {
            "function" != typeof f || f.length || (g = f, f = c.linear), d instanceof a._.Animation && (g = d.callback, 
            f = d.easing, e = f.dur, d = d.attr);
            var h = arguments;
            if (a.is(d, "array") && a.is(h[h.length - 1], "array")) var i = !0;
            var j, k = function() {
                j ? this.b = j : j = this.b;
            }, l = 0, m = this, n = g && function() {
                ++l == m.length && g.call(this);
            };
            return this.forEach(function(a, c) {
                b.once("snap.animcreated." + a.id, k), i ? h[c] && a.animate.apply(a, h[c]) : a.animate(d, e, f, n);
            });
        }, g.remove = function() {
            for (;this.length; ) this.pop().remove();
            return this;
        }, g.bind = function(a, b, c) {
            var d = {};
            if ("function" == typeof b) this.bindings[a] = b; else {
                var e = c || a;
                this.bindings[a] = function(a) {
                    d[e] = a, b.attr(d);
                };
            }
            return this;
        }, g.attr = function(a) {
            var b = {};
            for (var c in a) this.bindings[c] ? this.bindings[c](a[c]) : b[c] = a[c];
            for (var d = 0, e = this.items.length; e > d; d++) this.items[d].attr(b);
            return this;
        }, g.clear = function() {
            for (;this.length; ) this.pop();
        }, g.splice = function(a, b) {
            a = 0 > a ? d(this.length + a, 0) : a, b = d(0, e(this.length - a, b));
            var c, g = [], h = [], i = [];
            for (c = 2; c < arguments.length; c++) i.push(arguments[c]);
            for (c = 0; b > c; c++) h.push(this[a + c]);
            for (;c < this.length - a; c++) g.push(this[a + c]);
            var j = i.length;
            for (c = 0; c < j + g.length; c++) this.items[a + c] = this[a + c] = j > c ? i[c] : g[c - j];
            for (c = this.items.length = this.length -= b - j; this[c]; ) delete this[c++];
            return new f(h);
        }, g.exclude = function(a) {
            for (var b = 0, c = this.length; c > b; b++) if (this[b] == a) return this.splice(b, 1), 
            !0;
            return !1;
        }, g.insertAfter = function(a) {
            for (var b = this.items.length; b--; ) this.items[b].insertAfter(a);
            return this;
        }, g.getBBox = function() {
            for (var a = [], b = [], c = [], f = [], g = this.items.length; g--; ) if (!this.items[g].removed) {
                var h = this.items[g].getBBox();
                a.push(h.x), b.push(h.y), c.push(h.x + h.width), f.push(h.y + h.height);
            }
            return a = e.apply(0, a), b = e.apply(0, b), c = d.apply(0, c), f = d.apply(0, f), 
            {
                x: a,
                y: b,
                x2: c,
                y2: f,
                width: c - a,
                height: f - b,
                cx: a + (c - a) / 2,
                cy: b + (f - b) / 2
            };
        }, g.clone = function(a) {
            a = new f();
            for (var b = 0, c = this.items.length; c > b; b++) a.push(this.items[b].clone());
            return a;
        }, g.toString = function() {
            return "Snap‘s set";
        }, g.type = "set", a.Set = f, a.set = function() {
            var a = new f();
            return arguments.length && a.push.apply(a, Array.prototype.slice.call(arguments, 0)), 
            a;
        };
    }), d.plugin(function(a, c) {
        function d(a) {
            var b = a[0];
            switch (b.toLowerCase()) {
              case "t":
                return [ b, 0, 0 ];

              case "m":
                return [ b, 1, 0, 0, 1, 0, 0 ];

              case "r":
                return 4 == a.length ? [ b, 0, a[2], a[3] ] : [ b, 0 ];

              case "s":
                return 5 == a.length ? [ b, 1, 1, a[3], a[4] ] : 3 == a.length ? [ b, 1, 1 ] : [ b, 1 ];
            }
        }
        function e(b, c, e) {
            c = p(c).replace(/\.{3}|\u2026/g, b), b = a.parseTransformString(b) || [], c = a.parseTransformString(c) || [];
            for (var f, g, h, i, l = Math.max(b.length, c.length), m = [], n = [], o = 0; l > o; o++) {
                if (h = b[o] || d(c[o]), i = c[o] || d(h), h[0] != i[0] || "r" == h[0].toLowerCase() && (h[2] != i[2] || h[3] != i[3]) || "s" == h[0].toLowerCase() && (h[3] != i[3] || h[4] != i[4])) {
                    b = a._.transform2matrix(b, e()), c = a._.transform2matrix(c, e()), m = [ [ "m", b.a, b.b, b.c, b.d, b.e, b.f ] ], 
                    n = [ [ "m", c.a, c.b, c.c, c.d, c.e, c.f ] ];
                    break;
                }
                for (m[o] = [], n[o] = [], f = 0, g = Math.max(h.length, i.length); g > f; f++) f in h && (m[o][f] = h[f]), 
                f in i && (n[o][f] = i[f]);
            }
            return {
                from: k(m),
                to: k(n),
                f: j(m)
            };
        }
        function f(a) {
            return a;
        }
        function g(a) {
            return function(b) {
                return +b.toFixed(3) + a;
            };
        }
        function h(a) {
            return a.join(" ");
        }
        function i(b) {
            return a.rgb(b[0], b[1], b[2]);
        }
        function j(a) {
            var b, c, d, e, f, g, h = 0, i = [];
            for (b = 0, c = a.length; c > b; b++) {
                for (f = "[", g = [ '"' + a[b][0] + '"' ], d = 1, e = a[b].length; e > d; d++) g[d] = "val[" + h++ + "]";
                f += g + "]", i[b] = f;
            }
            return Function("val", "return Snap.path.toString.call([" + i + "])");
        }
        function k(a) {
            for (var b = [], c = 0, d = a.length; d > c; c++) for (var e = 1, f = a[c].length; f > e; e++) b.push(a[c][e]);
            return b;
        }
        function l(a) {
            return isFinite(parseFloat(a));
        }
        function m(b, c) {
            return a.is(b, "array") && a.is(c, "array") ? b.toString() == c.toString() : !1;
        }
        var n = {}, o = /[a-z]+$/i, p = String;
        n.stroke = n.fill = "colour", c.prototype.equal = function(a, c) {
            return b("snap.util.equal", this, a, c).firstDefined();
        }, b.on("snap.util.equal", function(b, c) {
            var d, q, r = p(this.attr(b) || ""), s = this;
            if (l(r) && l(c)) return {
                from: parseFloat(r),
                to: parseFloat(c),
                f: f
            };
            if ("colour" == n[b]) return d = a.color(r), q = a.color(c), {
                from: [ d.r, d.g, d.b, d.opacity ],
                to: [ q.r, q.g, q.b, q.opacity ],
                f: i
            };
            if ("viewBox" == b) return d = this.attr(b).vb.split(" ").map(Number), q = c.split(" ").map(Number), 
            {
                from: d,
                to: q,
                f: h
            };
            if ("transform" == b || "gradientTransform" == b || "patternTransform" == b) return c instanceof a.Matrix && (c = c.toTransformString()), 
            a._.rgTransform.test(c) || (c = a._.svgTransform2string(c)), e(r, c, function() {
                return s.getBBox(1);
            });
            if ("d" == b || "path" == b) return d = a.path.toCubic(r, c), {
                from: k(d[0]),
                to: k(d[1]),
                f: j(d[0])
            };
            if ("points" == b) return d = p(r).split(a._.separator), q = p(c).split(a._.separator), 
            {
                from: d,
                to: q,
                f: function(a) {
                    return a;
                }
            };
            var t = r.match(o), u = p(c).match(o);
            return t && m(t, u) ? {
                from: parseFloat(r),
                to: parseFloat(c),
                f: g(t)
            } : {
                from: this.asPX(b),
                to: this.asPX(b, c),
                f: f
            };
        });
    }), d.plugin(function(a, c, d, e) {
        for (var f = c.prototype, g = "hasOwnProperty", h = ("createTouch" in e.doc), i = [ "click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "touchstart", "touchmove", "touchend", "touchcancel" ], j = {
            mousedown: "touchstart",
            mousemove: "touchmove",
            mouseup: "touchend"
        }, k = (function(a, b) {
            var c = "y" == a ? "scrollTop" : "scrollLeft", d = b && b.node ? b.node.ownerDocument : e.doc;
            return d[c in d.documentElement ? "documentElement" : "body"][c];
        }), l = function() {
            return this.originalEvent.preventDefault();
        }, m = function() {
            return this.originalEvent.stopPropagation();
        }, n = function(a, b, c, d) {
            var e = h && j[b] ? j[b] : b, f = function(e) {
                var f = k("y", d), i = k("x", d);
                if (h && j[g](b)) for (var n = 0, o = e.targetTouches && e.targetTouches.length; o > n; n++) if (e.targetTouches[n].target == a || a.contains(e.targetTouches[n].target)) {
                    var p = e;
                    e = e.targetTouches[n], e.originalEvent = p, e.preventDefault = l, e.stopPropagation = m;
                    break;
                }
                var q = e.clientX + i, r = e.clientY + f;
                return c.call(d, e, q, r);
            };
            return b !== e && a.addEventListener(b, f, !1), a.addEventListener(e, f, !1), function() {
                return b !== e && a.removeEventListener(b, f, !1), a.removeEventListener(e, f, !1), 
                !0;
            };
        }, o = [], p = function(a) {
            for (var c, d = a.clientX, e = a.clientY, f = k("y"), g = k("x"), i = o.length; i--; ) {
                if (c = o[i], h) {
                    for (var j, l = a.touches && a.touches.length; l--; ) if (j = a.touches[l], j.identifier == c.el._drag.id || c.el.node.contains(j.target)) {
                        d = j.clientX, e = j.clientY, (a.originalEvent ? a.originalEvent : a).preventDefault();
                        break;
                    }
                } else a.preventDefault();
                var m = c.el.node;
                m.nextSibling, m.parentNode, m.style.display, d += g, e += f, b("snap.drag.move." + c.el.id, c.move_scope || c.el, d - c.el._drag.x, e - c.el._drag.y, d, e, a);
            }
        }, q = function(c) {
            a.unmousemove(p).unmouseup(q);
            for (var d, e = o.length; e--; ) d = o[e], d.el._drag = {}, b("snap.drag.end." + d.el.id, d.end_scope || d.start_scope || d.move_scope || d.el, c), 
            b.off("snap.drag.*." + d.el.id);
            o = [];
        }, r = i.length; r--; ) !function(b) {
            a[b] = f[b] = function(c, d) {
                if (a.is(c, "function")) this.events = this.events || [], this.events.push({
                    name: b,
                    f: c,
                    unbind: n(this.node || document, b, c, d || this)
                }); else for (var e = 0, f = this.events.length; f > e; e++) if (this.events[e].name == b) try {
                    this.events[e].f.call(this);
                } catch (g) {}
                return this;
            }, a["un" + b] = f["un" + b] = function(a) {
                for (var c = this.events || [], d = c.length; d--; ) if (c[d].name == b && (c[d].f == a || !a)) return c[d].unbind(), 
                c.splice(d, 1), !c.length && delete this.events, this;
                return this;
            };
        }(i[r]);
        f.hover = function(a, b, c, d) {
            return this.mouseover(a, c).mouseout(b, d || c);
        }, f.unhover = function(a, b) {
            return this.unmouseover(a).unmouseout(b);
        };
        var s = [];
        f.drag = function(c, d, e, f, g, h) {
            function i(i, j, l) {
                (i.originalEvent || i).preventDefault(), k._drag.x = j, k._drag.y = l, k._drag.id = i.identifier, 
                !o.length && a.mousemove(p).mouseup(q), o.push({
                    el: k,
                    move_scope: f,
                    start_scope: g,
                    end_scope: h
                }), d && b.on("snap.drag.start." + k.id, d), c && b.on("snap.drag.move." + k.id, c), 
                e && b.on("snap.drag.end." + k.id, e), b("snap.drag.start." + k.id, g || f || k, j, l, i);
            }
            function j(a, c, d) {
                b("snap.draginit." + k.id, k, a, c, d);
            }
            var k = this;
            if (!arguments.length) {
                var l;
                return k.drag(function(a, b) {
                    this.attr({
                        transform: l + (l ? "T" : "t") + [ a, b ]
                    });
                }, function() {
                    l = this.transform().local;
                });
            }
            return b.on("snap.draginit." + k.id, i), k._drag = {}, s.push({
                el: k,
                start: i,
                init: j
            }), k.mousedown(j), k;
        }, f.undrag = function() {
            for (var c = s.length; c--; ) s[c].el == this && (this.unmousedown(s[c].init), s.splice(c, 1), 
            b.unbind("snap.drag.*." + this.id), b.unbind("snap.draginit." + this.id));
            return !s.length && a.unmousemove(p).unmouseup(q), this;
        };
    }), d.plugin(function(a, c, d) {
        var e = (c.prototype, d.prototype), f = /^\s*url\((.+)\)/, g = String, h = a._.$;
        a.filter = {}, e.filter = function(b) {
            var d = this;
            "svg" != d.type && (d = d.paper);
            var e = a.parse(g(b)), f = a._.id(), i = (d.node.offsetWidth, d.node.offsetHeight, 
            h("filter"));
            return h(i, {
                id: f,
                filterUnits: "userSpaceOnUse"
            }), i.appendChild(e.node), d.defs.appendChild(i), new c(i);
        }, b.on("snap.util.getattr.filter", function() {
            b.stop();
            var c = h(this.node, "filter");
            if (c) {
                var d = g(c).match(f);
                return d && a.select(d[1]);
            }
        }), b.on("snap.util.attr.filter", function(d) {
            if (d instanceof c && "filter" == d.type) {
                b.stop();
                var e = d.node.id;
                e || (h(d.node, {
                    id: d.id
                }), e = d.id), h(this.node, {
                    filter: a.url(e)
                });
            }
            d && "none" != d || (b.stop(), this.node.removeAttribute("filter"));
        }), a.filter.blur = function(b, c) {
            null == b && (b = 2);
            var d = null == c ? b : [ b, c ];
            return a.format('<feGaussianBlur stdDeviation="{def}"/>', {
                def: d
            });
        }, a.filter.blur.toString = function() {
            return this();
        }, a.filter.shadow = function(b, c, d, e, f) {
            return "string" == typeof d && (e = d, f = e, d = 4), "string" != typeof e && (f = e, 
            e = "#000"), e = e || "#000", null == d && (d = 4), null == f && (f = 1), null == b && (b = 0, 
            c = 2), null == c && (c = b), e = a.color(e), a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {
                color: e,
                dx: b,
                dy: c,
                blur: d,
                opacity: f
            });
        }, a.filter.shadow.toString = function() {
            return this();
        }, a.filter.grayscale = function(b) {
            return null == b && (b = 1), a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>', {
                a: .2126 + .7874 * (1 - b),
                b: .7152 - .7152 * (1 - b),
                c: .0722 - .0722 * (1 - b),
                d: .2126 - .2126 * (1 - b),
                e: .7152 + .2848 * (1 - b),
                f: .0722 - .0722 * (1 - b),
                g: .2126 - .2126 * (1 - b),
                h: .0722 + .9278 * (1 - b)
            });
        }, a.filter.grayscale.toString = function() {
            return this();
        }, a.filter.sepia = function(b) {
            return null == b && (b = 1), a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>', {
                a: .393 + .607 * (1 - b),
                b: .769 - .769 * (1 - b),
                c: .189 - .189 * (1 - b),
                d: .349 - .349 * (1 - b),
                e: .686 + .314 * (1 - b),
                f: .168 - .168 * (1 - b),
                g: .272 - .272 * (1 - b),
                h: .534 - .534 * (1 - b),
                i: .131 + .869 * (1 - b)
            });
        }, a.filter.sepia.toString = function() {
            return this();
        }, a.filter.saturate = function(b) {
            return null == b && (b = 1), a.format('<feColorMatrix type="saturate" values="{amount}"/>', {
                amount: 1 - b
            });
        }, a.filter.saturate.toString = function() {
            return this();
        }, a.filter.hueRotate = function(b) {
            return b = b || 0, a.format('<feColorMatrix type="hueRotate" values="{angle}"/>', {
                angle: b
            });
        }, a.filter.hueRotate.toString = function() {
            return this();
        }, a.filter.invert = function(b) {
            return null == b && (b = 1), a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>', {
                amount: b,
                amount2: 1 - b
            });
        }, a.filter.invert.toString = function() {
            return this();
        }, a.filter.brightness = function(b) {
            return null == b && (b = 1), a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>', {
                amount: b
            });
        }, a.filter.brightness.toString = function() {
            return this();
        }, a.filter.contrast = function(b) {
            return null == b && (b = 1), a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {
                amount: b,
                amount2: .5 - b / 2
            });
        }, a.filter.contrast.toString = function() {
            return this();
        };
    }), d.plugin(function(a, b) {
        var c = a._.box, d = a.is, e = /^[^a-z]*([tbmlrc])/i, f = function() {
            return "T" + this.dx + "," + this.dy;
        };
        b.prototype.getAlign = function(a, b) {
            null == b && d(a, "string") && (b = a, a = null), a = a || this.paper;
            var g = a.getBBox ? a.getBBox() : c(a), h = this.getBBox(), i = {};
            switch (b = b && b.match(e), b = b ? b[1].toLowerCase() : "c") {
              case "t":
                i.dx = 0, i.dy = g.y - h.y;
                break;

              case "b":
                i.dx = 0, i.dy = g.y2 - h.y2;
                break;

              case "m":
                i.dx = 0, i.dy = g.cy - h.cy;
                break;

              case "l":
                i.dx = g.x - h.x, i.dy = 0;
                break;

              case "r":
                i.dx = g.x2 - h.x2, i.dy = 0;
                break;

              default:
                i.dx = g.cx - h.cx, i.dy = 0;
            }
            return i.toString = f, i;
        }, b.prototype.align = function(a, b) {
            return this.transform("..." + this.getAlign(a, b));
        };
    }), d;
}), DataAdapter.prototype.getUrl = function(a) {
    return this.url + a.replace("{token}", this.token).replace("{proposal}", this.proposal).replace("{username}", this.username);
}, DataAdapter.prototype.get = function(a) {
    var b = this;
    $.ajax({
        url: this.getUrl(a),
        type: "get",
        async: this.async,
        statusCode: {
            404: function() {
                b.onError.notify("404 : not found");
            },
            415: function() {
                b.onError.notify("415 : type not allowed");
            },
            500: function() {
                b.onError.notify("500 : internal server error");
            }
        },
        success: function(a) {
            b.onSuccess.notify(a);
        },
        error: function(a) {
            b.onError.notify(a);
        }
    });
}, DataAdapter.prototype.post = function(a, b) {
    var c = this;
    a = this.getUrl(a), $.ajax({
        type: "POST",
        async: this.async,
        url: a,
        data: b,
        success: function(a) {
            c.onSuccess.notify(a);
        },
        error: function(a) {
            c.onError.notify(a);
        }
    });
}, String.prototype.format = function(a) {
    var b = this;
    return b.replace(String.prototype.format.regex, function(b) {
        var c, d = parseInt(b.substring(1, b.length - 1));
        return c = d >= 0 ? a[d] : -1 === d ? "{" : -2 === d ? "}" : "";
    });
}, String.prototype.format.regex = new RegExp("{-?[0-9]+}", "g"), Event.prototype = {
    attach: function(a) {
        this._listeners.push(a);
    },
    notify: function(a) {
        for (var b = 0; b < this._listeners.length; b++) this._listeners[b](this._sender, a);
    }
}, ExiDataAdapter.prototype.getUrl = function(a) {
    var b = EXI.credentialManager.getConnections()[0];
    return b.exiUrl + a.replace("{token}", b.token).replace("{username}", b.username);
}, ExiDataAdapter.prototype.call = function(a) {
    var b = this;
    $.ajax({
        url: this.getUrl(a),
        type: "get",
        success: function(a) {
            b.onSuccess.notify(a), null != exiSAXS && exiSAXS.setLoading(!1);
        },
        error: function(a) {
            b.onError.notify(a), null != exiSAXS && exiSAXS.setError(a);
        }
    });
}, ExiDataAdapter.prototype.postcall = function(a, b) {
    var c = this, d = EXI.credentialManager.getConnections();
    $.ajax({
        url: d[0].exiUrl + a,
        type: "post",
        data: b,
        success: function(a) {
            c.onSuccess.notify(a), null != exiSAXS && exiSAXS.setLoading(!1);
        },
        error: function(a) {
            c.onError.notify(a), null != exiSAXS && exiSAXS.setError(a);
        }
    });
}, ExiDataAdapter.prototype.getToolUrl = function() {
    return this.getUrl("/{token}/tool");
}, ExiDataAdapter.prototype.authenticate = function() {
    this.call("/{token}/user/{username}/authenticate");
}, ExiDataAdapter.prototype.getProject = function() {
    this.call("/{token}/project/list");
}, ExiDataAdapter.prototype.getRuns = function(a) {
    this.call("/{token}/project/{0}/run/list".format([ a ]));
}, ExiDataAdapter.prototype.save = function(a) {
    this.postcall("/{token}/user/save".format([ tokens[0].token ]), {
        user: JSON.stringify(a)
    });
}, ExiDataAdapter.prototype.getFileContent = function(a) {
    this.call("/file/{0}/content".format([ a ]));
}, ExiDataAdapter.prototype.getFileImage = function(a) {
    return this.getUrl("/file/{0}/image".format([ a ]));
}, AutoProcIntegrationDataAdapter.prototype.get = DataAdapter.prototype.get, AutoProcIntegrationDataAdapter.prototype.post = DataAdapter.prototype.post, 
AutoProcIntegrationDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, 
AutoProcIntegrationDataAdapter.prototype.getByDataCollectionId = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/autoprocintegration/datacollection/{0}/list".format([ a ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleCompleteness = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/completeness".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleRfactor = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/rfactor".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleISigma = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/isigma".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleCC2 = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/cc2".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleSigmaAno = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/sigmaano".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleWilson = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/wilson".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getXScaleAnnoCorrection = function(a) {
    return this.getUrl(connection, "/{token}/proposal/{proposal}/mx/autoprocintegration/{0}/xscale/anomcorr".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getDownloadAttachmentUrl = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/autoproc/autoprocattachmentid/{0}/download".format([ a.toString() ]));
}, AutoProcIntegrationDataAdapter.prototype.getPhasingByAutoprocIds = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/phasing/autoprocid/{0}/list".format([ a.toString() ]));
}, CrystalDataAdapter.prototype.get = DataAdapter.prototype.get, CrystalDataAdapter.prototype.post = DataAdapter.prototype.post, 
CrystalDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, CrystalDataAdapter.prototype.getCrystalsByProposalId = function() {
    this.get("/{token}/proposal/{proposal}/mx/crystal/list");
}, CrystalDataAdapter.prototype.getCrystalById = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/crystal/{0}/get".format([ a.toString() ]));
}, DataCollectionDataAdapter.prototype.get = DataAdapter.prototype.get, DataCollectionDataAdapter.prototype.post = DataAdapter.prototype.post, 
DataCollectionDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, DataCollectionDataAdapter.prototype.getBySessionsId = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/datacollection/session/{0}/list".format([ a.toString() ]));
}, DataCollectionDataAdapter.prototype.getByDataCollectionId = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/datacollection/{0}/get".format([ a.toString() ]));
}, DataCollectionDataAdapter.prototype.getByAcronymList = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/datacollection/protein_acronym/{0}/view".format([ a.toString() ]));
}, DataCollectionDataAdapter.prototype.getDataCollectionViewBySessionId = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/datacollection/session/{0}/view".format([ a.toString() ]));
}, DataCollectionDataAdapter.prototype.getThumbNailById = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/image/{0}/thumbnail".format([ a ]));
}, DataCollectionDataAdapter.prototype.getImageById = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/image/{0}/get".format([ a ]));
}, DataCollectionDataAdapter.prototype.getWilsonPlot = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/datacollection/{0}/wilson".format([ a ]));
}, DataCollectionDataAdapter.prototype.getCrystalSnapshotByDataCollectionId = function(a, b) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/datacollection/{0}/crystalsnaphot/{1}/get".format([ a, b ]));
}, ProteinDataAdapter.prototype.get = DataAdapter.prototype.get, ProteinDataAdapter.prototype.post = DataAdapter.prototype.post, 
ProteinDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, ProteinDataAdapter.prototype.getProteinByProposalId = function() {
    this.get("/{token}/proposal/{proposal}/mx/protein/list");
}, WorkflowStepDataAdapter.prototype.get = DataAdapter.prototype.get, WorkflowStepDataAdapter.prototype.post = DataAdapter.prototype.post, 
WorkflowStepDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, WorkflowStepDataAdapter.prototype.getImageByWorkflowStepId = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/workflow/step/{0}/image".format([ a.toString() ]));
}, WorkflowStepDataAdapter.prototype.getHtmlByWorkflowStepId = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/workflow/step/{0}/html".format([ a.toString() ]));
}, WorkflowStepDataAdapter.prototype.getResultByWorkflowStepId = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/mx/workflow/step/{0}/result".format([ a.toString() ]));
}, WorkflowStepDataAdapter.prototype.getWorkflowstepByIdList = function(a) {
    this.get("/{token}/proposal/{proposal}/mx/workflow/step/{0}/list".format([ a.toString() ]));
}, DewarDataAdapter.prototype.get = DataAdapter.prototype.get, DewarDataAdapter.prototype.post = DataAdapter.prototype.post, 
DewarDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, DewarDataAdapter.prototype.saveDewar = function(a, b) {
    var c = "/{token}/proposal/{proposal}/shipping/{0}/dewar/save".format([ a ]);
    this.post(c, b);
}, DewarDataAdapter.prototype.removeDewar = function(a, b) {
    var c = "/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/remove".format([ a, b ]);
    this.get(c);
}, DewarDataAdapter.prototype.addDewar = function(a) {
    this.saveDewar(a, {});
}, LabcontactDataAdapter.prototype.get = DataAdapter.prototype.get, LabcontactDataAdapter.prototype.post = DataAdapter.prototype.post, 
LabcontactDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, LabcontactDataAdapter.prototype.getLabContacts = function() {
    this.get("/{token}/proposal/{proposal}/shipping/labcontact/list");
}, LabcontactDataAdapter.prototype.getScientists = function() {
    this.get("/{token}/proposal/{proposal}/shipping/labcontact/smis/list");
}, LabcontactDataAdapter.prototype.getLabContactById = function(a) {
    this.get("/{token}/proposal/{proposal}/shipping/labcontact/{0}/get".format([ a ]));
}, LabcontactDataAdapter.prototype.saveLabContact = function(a) {
    var b = "/{token}/proposal/{proposal}/shipping/labcontact/save";
    this.post(b, {
        labcontact: JSON.stringify(a)
    });
}, ProposalDataAdapter.prototype.get = DataAdapter.prototype.get, ProposalDataAdapter.prototype.post = DataAdapter.prototype.post, 
ProposalDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, ProposalDataAdapter.prototype.getProposals = function() {
    this.get("/{token}/proposal/list");
}, ProposalDataAdapter.prototype.getDewarByProposalId = function() {
    this.get("/{token}/proposal/{proposal}/shipping/dewar/list");
}, ProposalDataAdapter.prototype.getProposalsInfo = function() {
    this.get("/{token}/proposal/{proposal}/technique/saxs/get");
}, ProposalDataAdapter.prototype.getProposalBySessionId = function(a) {
    this.get("/{token}/proposal/session/{0}/list".format([ a ]));
}, ProposalDataAdapter.prototype.update = function() {
    null != EXI && null != EXI.proposalManager && (this.onSuccess.attach(function(a, b) {
        localStorage.setItem("proposals", JSON.stringify(b));
    }), this.onSuccess._listeners.reverse()), this.getProposalsInfo();
}, SessionDataAdapter.prototype.get = DataAdapter.prototype.get, SessionDataAdapter.prototype.post = DataAdapter.prototype.post, 
SessionDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, SessionDataAdapter.prototype.getSessions = function() {
    this.get("/{token}/proposal/{proposal}/session/list");
}, SessionDataAdapter.prototype.getSessionsByProposal = function(a) {
    this.get("/{token}/proposal/{0}/session/list".format([ a ]));
}, SessionDataAdapter.prototype.getSessionsByDate = function(a, b) {
    this.get("/{token}/proposal/session/list?startdate={0}&enddate={1}".format([ a, b ]));
}, ShippingDataAdapter.prototype.get = DataAdapter.prototype.get, ShippingDataAdapter.prototype.post = DataAdapter.prototype.post, 
ShippingDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, ShippingDataAdapter.prototype.getShippings = function() {
    this.get("/{token}/proposal/{proposal}/shipping/list");
}, ShippingDataAdapter.prototype.getShipment = function(a) {
    this.get("/{token}/proposal/{proposal}/shipping/{0}/get".format([ a ]));
}, ShippingDataAdapter.prototype.getDewarsByShipmentId = function(a) {
    this.get("/{token}/proposal/{proposal}/shipping/{0}/dewar/list".format([ a ]));
}, ShippingDataAdapter.prototype.getLabContacts = function() {
    alert("This method has been moved to labcontactDataAdapter");
}, ShippingDataAdapter.prototype.getScientists = function() {
    alert("This method has been moved to labcontactDataAdapter");
}, ShippingDataAdapter.prototype.getLabContactById = function(a) {
    alert("This method has been moved to labcontactDataAdapter");
}, ShippingDataAdapter.prototype.saveLabContact = function(a) {
    alert("This method has been moved to labcontactDataAdapter");
}, ShippingDataAdapter.prototype.saveShipment = function(a) {
    this.post("/{token}/proposal/{proposal}/shipping/save", a);
}, ShippingDataAdapter.prototype.addPuck = function(a, b) {
    this.get("/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/puck/add".format([ a, b ]));
}, ShippingDataAdapter.prototype.getContainerById = function(a, b, c) {
    this.get("/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/puck/{2}/get".format([ a, b, c ]));
}, ShippingDataAdapter.prototype.removeContainerById = function(a, b, c) {
    this.get("/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/puck/{2}/remove".format([ a, b, c ]));
}, ShippingDataAdapter.prototype.saveContainer = function(a, b, c, d) {
    var e = "/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/puck/{2}/save".format([ a, b, c ]);
    this.post(e, {
        puck: JSON.stringify(d)
    });
}, ShippingDataAdapter.prototype.getDewarLabelURL = function(a, b) {
    var c = EXI.credentialManager.getConnections()[0];
    return this.getUrl(c, "/{token}/proposal/{proposal}/shipping/{0}/dewar/{1}/labels".format([ a, b ]));
}, ProposalManager.prototype.get = function(a) {
    if (null == localStorage.getItem("proposals") || a) {
        var b = function(a, b) {
            localStorage.setItem("proposals", JSON.stringify(b));
        };
        EXI.getDataAdapter({
            async: !1,
            onSuccess: b
        }).proposal.proposal.getProposalsInfo();
    }
    return JSON.parse(localStorage.getItem("proposals"));
}, ProposalManager.prototype.clear = function() {
    localStorage.removeItem("proposals");
}, ProposalManager.prototype.getSessions = function() {
    if (null == localStorage.getItem("sessions")) {
        var a = function(a, b) {
            localStorage.setItem("sessions", JSON.stringify(b));
        };
        EXI.getDataAdapter({
            async: !1,
            onSuccess: a
        }).proposal.session.getSessions();
    }
    return JSON.parse(localStorage.getItem("sessions"));
}, ProposalManager.prototype.getFutureSessions = function() {
    for (var a = this.getSessions(), b = moment(), c = [], d = 0; d < a.length; d++) b.diff(a[d].startDate) < 0 && c.push(a[d]);
    return c;
}, ProposalManager.prototype.getBufferColors = function() {
    return [ "#ffffcc", "#c7e9b4", "#7fcdbb", "#41b6c4", "#2c7fb8", "#253494" ];
}, ProposalManager.prototype.getLabcontacts = function() {
    var a = this.get();
    return a[0].labcontacts;
}, ProposalManager.prototype.getLabcontactById = function(a) {
    for (var b = this.getLabcontacts(), c = 0; c < b.length; c++) if (b[c].labContactId == a) return b[c];
}, ProposalManager.prototype.getPlateTypeById = function(a) {
    for (var b = this.getPlateTypes(), c = 0; c < b.length; c++) if (b[c].plateTypeId == a) return b[c];
    return null;
}, ProposalManager.prototype.getPlateTypes = function() {
    var a = this.get();
    return a[0].plateTypes;
}, ProposalManager.prototype.getPlateByFlavour = function() {
    var a = this.get()[0].plateTypes;
    return [ a[0], a[2], a[3] ];
}, ProposalManager.prototype.getBufferById = function(a) {
    for (var b = this.get(), c = 0; c < b.length; c++) for (var d = 0; d < b[c].buffers.length; d++) if (b[c].buffers[d].bufferId == a) return b[c].buffers[d];
}, ProposalManager.prototype.getMacromoleculeById = function(a) {
    for (var b = this.get(), c = 0; c < b.length; c++) for (var d = 0; d < b[c].macromolecules.length; d++) if (b[c].macromolecules[d].macromoleculeId == a) return b[c].macromolecules[d];
}, ProposalManager.prototype.getMacromoleculeByAcronym = function(a) {
    for (var b = this.get(), c = 0; c < b.length; c++) for (var d = 0; d < b[c].macromolecules.length; d++) if (b[c].macromolecules[d].acronym == a) return b[c].macromolecules[d];
}, ProposalManager.prototype.getStockSolutionById = function(a) {
    for (var b = this.get(), c = 0; c < b.length; c++) for (var d = 0; d < b[c].stockSolutions.length; d++) if (b[c].stockSolutions[d].stockSolutionId == a) return b[c].stockSolutions[d];
}, ProposalManager.prototype.getBuffers = function() {
    for (var a = this.get(), b = [], c = 0; c < a.length; c++) b = b.concat(a[c].buffers);
    return b;
}, ProposalManager.prototype.getMacromolecules = function() {
    for (var a = this.get(), b = [], c = 0; c < a.length; c++) b = b.concat(a[c].macromolecules);
    return b;
}, ProposalManager.prototype.getProposals = function() {
    for (var a = this.get(), b = [], c = 0; c < a.length; c++) a[c].proposal[0].proposal = a[c].proposal[0].code + a[c].proposal[0].number, 
    b = b.concat(a[c].proposal);
    return b;
}, ProposalManager.prototype.getProposalById = function(a) {
    for (var b = this.get(), c = [], d = 0; d < b.length; d++) if (b[d].proposal[0].proposalId == a) return b[d].proposal[0];
    return c;
}, ProposalManager.prototype.getStockSolutions = function() {
    return this.get()[0].stockSolutions;
}, ProposalManager.prototype.getProteins = function() {
    return this.get()[0].proteins;
}, ProposalManager.prototype.getCrystals = function() {
    return this.get()[0].crystals;
}, ProposalManager.prototype.getProteinByAcronym = function(a) {
    for (var b = this.getProteins(), c = 0; c < b.length; c++) if (b[c].acronym == a) return b[c];
    return null;
}, ProposalManager.prototype.getCrystalsByAcronym = function(a) {
    for (var b = this.getCrystals(), c = [], d = 0; d < b.length; d++) b[d].protein.acronym == a && (c = c.concat(b[d]));
    return c;
}, ProposalManager.prototype.getStockSolutionsBySpecimen = function(a, b) {
    for (var c = [], d = this.getStockSolutions(), e = 0; e < d.length; e++) d[e].macromoleculeId == a && d[e].bufferId == b && c.push(d[e]);
    return c;
}, ProposalManager.prototype.getUnpackedStockSolutions = function() {
    for (var a = this.getStockSolutions(), b = [], c = 0; c < a.length; c++) null == a[c].boxId && b.push(a[c]);
    return b;
}, ProposalManager.prototype.getStockSolutionsByDewarId = function(a) {
    for (var b = this.getStockSolutions(), c = [], d = 0; d < b.length; d++) b[d].boxId == a && c.push(b[d]);
    return c;
}, BufferSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, BufferSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
BufferSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, BufferSaxsDataAdapter.prototype.getBuffers = function() {
    this.get("/{token}/proposal/{proposal}/saxs/buffer/list");
}, BufferSaxsDataAdapter.prototype.saveBuffer = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/buffer/save";
    this.post(b, {
        buffer: JSON.stringify(a)
    });
}, DataCollectionSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, DataCollectionSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
DataCollectionSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, DataCollectionSaxsDataAdapter.prototype.getDataCollectionsByMacromoleculeAcronym = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/datacollection/macromoleculeAcronym/{0}/list".format([ a ]));
}, DataCollectionSaxsDataAdapter.prototype.getDataCollectionsByKey = function(a, b) {
    this.get("/{token}/proposal/{proposal}/saxs/datacollection/{0}/{1}/list".format([ a, b.toString() ]));
}, DataCollectionSaxsDataAdapter.prototype.getDataCollectionsByDataCollectionId = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/datacollection/dataCollectionId/{0}/list".format([ a ]));
}, DataCollectionSaxsDataAdapter.prototype.getDataCollectionsByIdList = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/datacollection/{0}/list".format([ a ]));
}, DataCollectionSaxsDataAdapter.prototype.getDataCollectionsByExperimentId = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/datacollection/experimentId/{0}/list".format([ a ]));
}, Experiment.prototype.getSpecimenColorByBufferId = function(a) {
    return this.specimenBuffersColors[a];
}, Experiment.prototype.setMacromoleculesColors = function() {
    var a = [ "#66c2a5", "#fc8d62", "#8da0cb", "#e78ac3", "#a6d854", "#ffd92f", "#e5c494" ];
    this.macromoleculeColors = {};
    for (var b = this.getMacromolecules(), c = 0; c < b.length; c++) this.macromoleculeColors[b[c].macromoleculeId] = a[c % a.length];
}, Experiment.prototype.getHPLCMacromolecule = function() {
    var a = this.getDataCollections();
    if (a.length > 0) for (var b = 0; 1 > b; b++) {
        var c = a[b].measurementtodatacollection3VOs;
        if (null != c) for (var d = 0; d < c.length; d++) if (2 == c[d].dataCollectionOrder) return this.getSampleById(this.getMeasurementById(c[d].measurementId).specimenId).macromolecule3VO;
    }
}, Experiment.prototype.getSpecimenColors = function() {
    for (var a = this.getSamples(), b = [], c = 0; c < a.length; c++) null === a[c].macromolecule3VO && b.push(a[c]);
    var d = {}, e = EXI.proposalManager.getBufferColors();
    for (c = 0; c < b.length; c++) d[b[c].specimenId] = e[c % e.length];
    return d;
}, Experiment.prototype.getBuffers = function() {
    var a = this.getSamples(), b = {}, c = [];
    if (null !== a) for (var d = 0; d < a.length; d++) null === b[a[d].bufferId] && (c.push(BIOSAXS.proposal.getBufferById(a[d].bufferId)), 
    b[a[d].bufferId] = !0);
    return c;
}, Experiment.prototype.getBufferById = function(a) {
    return EXI.proposalManager.getBufferById(a);
}, Experiment.prototype.getStockSolutions = function() {
    return this.json.stockSolution3VOs;
}, Experiment.prototype.getStockSolutionById = function(a) {
    for (var b = this.getStockSolutions(), c = 0; c < b.length; c++) if (b[c].stockSolutionId == a) return b[c];
}, Experiment.prototype.getMacromolecules = function() {
    for (var a = this.getSamples(), b = {}, c = [], d = 0; d < a.length; d++) null != a[d].macromolecule3VO && null == b[a[d].macromolecule3VO.macromoleculeId] && (c.push(a[d].macromolecule3VO), 
    b[a[d].macromolecule3VO.macromoleculeId] = !0);
    return c;
}, Experiment.prototype.getMeasurementsWithSubtractionAssociated = function() {
    for (var a = this.getMeasurements(), b = [], c = 0; c < a.length; c++) {
        var d = a[c];
        null !== d.run3VO && b.push(d);
    }
    return b;
}, Experiment.prototype.getSamples = function() {
    return this.json.samples3VOs;
}, Experiment.prototype.getSampleById = function(a) {
    return this.getSpecimenById(a);
}, Experiment.prototype.getSpecimenById = function(a) {
    for (var b = this.getSamples(), c = 0; c < b.length; c++) if (b[c].specimenId == a) return b[c];
    return null;
}, Experiment.prototype.getSpecimenByDataCollectionId = function(a) {
    for (var b = this.getDataCollectionById(a), c = {}, d = [], e = 0; e < b.measurementtodatacollection3VOs.length; e++) {
        var f = this.getMeasurementById(b.measurementtodatacollection3VOs[e].measurementId);
        null == c[f.specimenId] && (d.push(f), c[f.specimenId] = !0);
    }
    return d;
}, Experiment.prototype.setSpecimenById = function(a) {
    for (var b = 0; b < this.json.samples3VOs.length; b++) if (this.json.samples3VOs[b].specimenId == a.specimenId) return void (this.json.samples3VOs[b] = a);
    console.log("Specimen with id: " + a.specimenId + " not found");
}, Experiment.prototype.setMeasurement = function(a) {
    for (var b = this.getMeasurements(), c = 0; c < b.length; c++) if (b[c].measurementId == a.measurementId) return void (b[c] = a);
}, Experiment.prototype.getConcentrations = function() {
    for (var a = {}, b = this.getMeasurements(), c = 0; c < b.length; c++) null != b[c].concentration && (a[b[c].concentration] = [ b[c].concentration ]);
    var d = [];
    for (var e in a) "null" != e && d.push(e);
    return d;
}, Experiment.prototype.getConcentrationsBysample = function(a) {
    for (var b = {}, c = this.getSamples(), d = 0; d < c.length; d++) null != c[d].macromolecule3VO && c[d].macromolecule3VO.macromoleculeId == a.macromolecule3VO.macromoleculeId && null != c[d].concentration && (b[c[d].concentration] = [ c[d].concentration ]);
    var e = [];
    for (var f in b) "null" != f && e.push(f);
    return e;
}, Experiment.prototype.setSpecimen = function(a) {
    for (var b = this.getBuffers(), c = 0; c < b.length; c++) for (var d = b[c], e = 0; e < d.specimen3VOs.length; e++) {
        var f = d.specimen3VOs[e];
        if (f.specimenId == a.specimenId) return d.specimen3VOs[e] = a, d;
    }
}, Experiment.prototype.getSamplePlates = function() {
    return this.json.samplePlate3VOs;
}, Experiment.prototype.getSamplePlateById = function(a) {
    for (var b = this.getSamplePlates(), c = 0; c < b.length; c++) if (b[c].samplePlateId == a) return b[c];
}, Experiment.prototype.getSamplePlateBySlotPositionColumn = function(a) {
    for (var b = this.getSamplePlates(), c = 0; c < b.length; c++) if (b[c].slotPositionColumn == a) return b[c];
}, Experiment.prototype.getSpecimenByPosition = function(a, b, c) {
    return this.getSampleByPosition();
}, Experiment.prototype.getSpecimensBySamplePlateId = function(a) {
    for (var b = this.getSamples(), c = [], d = 0; d < b.length; d++) null != b[d].sampleplateposition3VO && b[d].sampleplateposition3VO.samplePlateId == a && c.push(b[d]);
    return c;
}, Experiment.prototype.getSampleByPosition = function(a, b, c) {
    for (var d = this.getSamples(), e = [], f = 0; f < d.length; f++) null != d[f].sampleplateposition3VO && d[f].sampleplateposition3VO.samplePlateId == a && d[f].sampleplateposition3VO.rowNumber == b && d[f].sampleplateposition3VO.columnNumber == c && e.push(d[f]);
    return e;
}, Experiment.prototype.getPlateGroups = function() {
    for (var a = this.getSamplePlates(), b = [], c = {}, d = 0; d < a.length; d++) if (null != a[d].plategroup3VO) {
        var e = a[d].plategroup3VO.plateGroupId;
        null == c[e] && (b.push(a[d].plategroup3VO), c[e] = !0);
    }
    return b;
}, Experiment.prototype.getPlatesByPlateGroupId = function(a) {
    for (var b = this.getSamplePlates(), c = [], d = 0; d < b.length; d++) null != b[d].plategroup3VO && b[d].plategroup3VO.plateGroupId == a && c.push(b[d]);
    return c;
}, Experiment.prototype.getMeasurements = function() {
    var a = [], b = this.getSamples();
    if (null == b) return [];
    for (var c = 0; c < b.length; c++) for (var d = b[c], e = 0; e < d.measurements.length; e++) a.push(d.measurements[e]);
    return a;
}, Experiment.prototype.getMeasurementById = function(a) {
    for (var b = this.getMeasurements(), c = 0; c < b.length; c++) if (b[c].measurementId == a) return b[c];
    return null;
}, Experiment.prototype.getMeasurementByDataCollectionId = function(a) {
    for (var b = [], c = this.getDataCollectionById(a), d = 0; d < c.measurementtodatacollection3VOs.length; d++) b.push(this.getMeasurementById(c.measurementtodatacollection3VOs[d].measurementId));
    return b;
}, Experiment.prototype.getDataCollections = function() {
    for (var a = this.json.dataCollections, b = [], c = 0; c < a.length; c++) 0 != a[c].measurementtodatacollection3VOs.length && b.push(a[c]);
    return b;
}, Experiment.prototype.getDataCollectionsBySpecimenId = function(a) {
    for (var b = this.getMeasurementsBySpecimenId(a), c = [], d = {}, e = 0; e < b.length; e++) for (var f = b[e], g = this.getDataCollectionByMeasurementId(f.measurementId), h = 0; h < g.length; h++) null == d[g[h].dataCollectionId] && (d[g[h].dataCollectionId] = !0, 
    c.push(g[h]));
    return c;
}, Experiment.prototype.getMeasurementsBySpecimenId = function(a) {
    for (var b = this.getMeasurements(), c = [], d = 0; d < b.length; d++) b[d].specimenId == a && c.push(b[d]);
    return c;
}, Experiment.prototype.getDataCollectionByMeasurementId = function(a) {
    function b(a, b) {
        return a.dataCollectionOrder - b.dataCollectionOrder;
    }
    for (var c = this.getDataCollections(), d = [], e = 0; e < c.length; e++) if (0 != c[e].measurementtodatacollection3VOs.length) for (var f = 0; f < c[e].measurementtodatacollection3VOs.length; f++) {
        var g = c[e].measurementtodatacollection3VOs[f];
        g.measurementId == a && (c[e].measurementtodatacollection3VOs.sort(b), d.push(c[e]));
    }
    return d;
}, Experiment.prototype.getSubtractionById = function(a) {
    for (var b = this.getDataCollections(), c = 0; c < b.length; c++) if (null != b[c].substraction3VOs && b[c].substraction3VOs.length > 0) for (var d = 0; d < b[c].substraction3VOs.length; d++) if (b[c].substraction3VOs[d].subtractionId == a) return b[c].substraction3VOs[d];
    return null;
}, Experiment.prototype.getDataCollectionById = function(a) {
    for (var b = this.json.dataCollections, c = 0; c < b.length; c++) if (b[c].dataCollectionId == a) return b[c];
}, Experiment.prototype.getVolumeToLoadBySampleId = function(a) {
    var b = this.getSpecimenById(a);
    if (null != b) {
        for (var c = 0, d = 0; d < b.measurements.length; d++) c += Number(b.measurements[d].volumeToLoad);
        return c;
    }
}, ExperimentList.prototype.getSpecimenColorByBufferId = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b], d = c.getSpecimenColorByBufferId(a);
        if (null != d) return d;
    }
    return "black";
}, ExperimentList.prototype.getColorByMacromoleculeId = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b], d = c.getColorByMacromoleculeId(a);
        if (null != d) return d;
    }
    return "black";
}, ExperimentList.prototype.getMeasurements = function() {
    for (var a = [], b = 0; b < this.experiments.length; b++) for (var c = this.experiments[b], d = c.getMeasurements(), e = 0; e < d.length; e++) a.push(d[e]);
    return a;
}, ExperimentList.prototype.getMeasurementByDataCollectionId = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b].getMeasurementByDataCollectionId(a);
        if (0 != c.length) return c;
    }
    return [];
}, ExperimentList.prototype.getMergesByMeasurements = function(a) {
    for (var b = [], c = 0; c < a.length; c++) if (null != a[c].merge3VOs) for (var d = 0; d < a[c].merge3VOs.length; d++) b.push(a[c].merge3VOs[d]);
    return b;
}, ExperimentList.prototype.getSamplePlateById = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b].getSamplePlateById(a);
        if (null != c) return c;
    }
    return null;
}, ExperimentList.prototype.getMergesByDataCollectionId = function(a) {
    return this.getMergesByMeasurements(this.getMeasurementByDataCollectionId(a));
}, ExperimentList.prototype.getMerges = function() {
    return this.getMergesByMeasurements(this.getMeasurements());
}, ExperimentList.prototype.getDataCollectionById = function(a) {
    for (var b = [], c = 0; c < this.experiments.length; c++) {
        var d = this.experiments[c], e = d.getDataCollectionById(a);
        if (null != e) return e;
    }
    return b;
}, ExperimentList.prototype.getDataCollectionByMeasurementId = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b], d = c.getDataCollectionByMeasurementId(a);
        if (null != d) return d;
    }
    return null;
}, ExperimentList.prototype.getMeasurementsNotCollected = function() {
    for (var a = [], b = 0; b < this.experiments.length; b++) for (var c = this.experiments[b], d = c.getMeasurements(), e = 0; e < d.length; e++) null == d[e].run3VO && a.push(d[e]);
    return a;
}, ExperimentList.prototype.getMeasurementsCollected = function() {
    for (var a = [], b = 0; b < this.experiments.length; b++) for (var c = this.experiments[b], d = c.getMeasurements(), e = 0; e < d.length; e++) null != d[e].run3VO && a.push(d[e]);
    return a;
}, ExperimentList.prototype.getMeasurementById = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b].getMeasurementById(a);
        if (null != c) return c;
    }
    return null;
}, ExperimentList.prototype.getBufferById = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b].getBufferById(a);
        if (null != c) return c;
    }
    return null;
}, ExperimentList.prototype.getSampleById = function(a) {
    for (var b = 0; b < this.experiments.length; b++) {
        var c = this.experiments[b].getSampleById(a);
        if (null != c) return c;
    }
    return null;
}, ExperimentList.prototype.getSamplesByCondition = function(a, b) {
    for (var c = [], d = 0; d < this.experiments.length; d++) for (var e = this.experiments[d].getSamples(), f = 0; f < e.length; f++) null != e[f].macromolecule3VO && e[f].macromolecule3VO.macromoleculeId == a && e[f].bufferId == b && c.push(e[f]);
    return c;
}, ExperimentList.prototype.getFrames = function(a) {
    for (var b = [], c = 0; c < a.length; c++) {
        var d = a[c];
        if (null != d.framelist3VO && null != d.framelist3VO.frametolist3VOs) for (var e = 0; e < d.framelist3VO.frametolist3VOs.length; e++) {
            var f = d.framelist3VO.frametolist3VOs[e].frame3VO;
            null != f && b.push(f);
        }
    }
    return b;
}, ExperimentSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, ExperimentSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
ExperimentSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, ExperimentSaxsDataAdapter.prototype.getByExperimentByKey = function(a, b) {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/{0}/{1}/list".format([ a.toString(), b.toString() ]));
}, ExperimentSaxsDataAdapter.prototype.getExperiments = function() {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/list");
}, ExperimentSaxsDataAdapter.prototype.getExperimentById = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/{0}/get".format([ a ]));
}, ExperimentSaxsDataAdapter.prototype.getExperimentsBySessionId = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/session/{0}/list".format([ a ]));
}, ExperimentSaxsDataAdapter.prototype.getByExperimentId = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/experimentId/{0}/list".format([ a ]));
}, ExperimentSaxsDataAdapter.prototype.saveExperiment = function(a, b, c) {
    var d = "/{token}/proposal/{proposal}/saxs/experiment/{0}/save".format([ a ]);
    this.post(d, {
        name: b,
        comments: c
    });
}, FrameSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, FrameSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
FrameSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, FrameSaxsDataAdapter.prototype.getFramesByAverageId = function(a) {
    this.get("/{0}/saxs/{1}/frame/average/{0}/list".format([ a.toString() ]));
}, FrameSaxsDataAdapter.prototype.getFramesURL = function(a, b, c, d, e, f) {
    null == a && (a = []), null == b && (b = []), null == c && (c = []), null == d && (d = []), 
    null == e && (e = []), null == f && (f = []);
    var g = EXI.credentialManager.getConnections()[0];
    return g.url + "/{0}/proposal/{1}/saxs/frame/datplot?frame={2}&average={3}&subtracted={4}&sampleaverage={5}&bufferaverage={6}&models={7}".format([ g.token, g.user, a.toString(), b.toString(), c.toString(), d.toString(), e.toString(), f.toString() ]);
}, HPLCSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, HPLCSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
HPLCSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, HPLCSaxsDataAdapter.prototype.getHPLCOverviewByExperimentId = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/experiment/{0}/hplc/overview".format([ a ]));
}, HPLCSaxsDataAdapter.prototype.getHPLCFramesScatteringURL = function(a, b) {
    var c = EXI.credentialManager.getConnections()[0];
    return this.getUrl(c, "/{token}/proposal/{proposal}/saxs/experiment/{0}/hplc/frame/{1}/get?operation=log".format([ a, b.toString() ]));
}, MacromoleculeSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, MacromoleculeSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
MacromoleculeSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, MacromoleculeSaxsDataAdapter.prototype.saveMacromolecule = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/macromolecule/save";
    this.post(b, {
        macromolecule: JSON.stringify(a)
    });
}, MacromoleculeSaxsDataAdapter.prototype.getMacromolecules = function() {
    this.get("/{token}/proposal/{proposal}/saxs/macromolecule/list");
}, MacromoleculeSaxsDataAdapter.prototype.getContactDescriptionUploadFileURL = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/saxs/macromolecule/{0}/contactfile/upload".format([ a ]));
}, MacromoleculeSaxsDataAdapter.prototype.removeContactDescriptionFile = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/macromolecule/{0}/contactfile/remove".format([ a ]));
}, MacromoleculeSaxsDataAdapter.prototype.getAddPDBURL = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/saxs/macromolecule/{0}/pdb/upload".format([ a ]));
}, MacromoleculeSaxsDataAdapter.prototype.removeStructure = function(a, b) {
    this.get("/{token}/proposal/{proposal}/saxs/macromolecule/{0}/pdb/{1}/remove".format([ a, b ]));
}, MacromoleculeSaxsDataAdapter.prototype.saveStructure = function(a, b, c, d) {
    var e = "/{token}/proposal/{proposal}/saxs/macromolecule/{0}/pdb/{1}/save".format([ a, b ]);
    this.post(e, {
        symmetry: d,
        multiplicity: c
    });
}, MeasurementSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, MeasurementSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
MeasurementSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, MeasurementSaxsDataAdapter.prototype.saveMeasurement = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/measurement/save";
    this.post(b, {
        measurement: JSON.stringify(a)
    });
}, MeasurementSaxsDataAdapter.prototype.removeMeasurement = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/measurement/{0}/remove".format([ a.measurementId ]);
    this.get(b);
}, MeasurementSaxsDataAdapter.prototype.sortMeasurements = function(a, b) {
    this.get("/{token}/proposal/{proposal}/saxs/measurement/experiment/{0}/type/{1}/sort".format([ a, b ]));
}, ModelSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, ModelSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
ModelSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, ModelSaxsDataAdapter.prototype.saveMeasurement = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/measurement/save";
    this.post(b, {
        measurement: JSON.stringify(a)
    });
}, ModelSaxsDataAdapter.prototype.removeMeasurement = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/measurement/{0}/remove".format([ a.measurementId ]);
    this.get(b);
}, ModelSaxsDataAdapter.prototype.getPDB = function(a, b) {
    var c = "/{token}/proposal/{proposal}/saxs/modeling/pdb/get";
    this.post(c, {
        models: JSON.stringify(a)
    });
}, SpecimenSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, SpecimenSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
SpecimenSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, SpecimenSaxsDataAdapter.prototype.saveSpecimen = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/specimen/save";
    this.post(b, {
        specimen: JSON.stringify(a)
    });
}, SpecimenSaxsDataAdapter.prototype.mergeSpecimens = function(a, b) {
    var c = "/{token}/proposal/{proposal}/saxs/specimen/merge";
    this.post(c, {
        sourceSpecimenId: a,
        targetSpecimenId: b
    });
}, StockSolutionSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, StockSolutionSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
StockSolutionSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, StockSolutionSaxsDataAdapter.prototype.getStockSolutions = function() {
    this.get("/{token}/proposal/{proposal}/saxs/stocksolution/list");
}, StockSolutionSaxsDataAdapter.prototype.saveStockSolution = function(a) {
    var b = "/{token}/proposal/{proposal}/saxs/stocksolution/save";
    this.post(b, {
        stocksolution: JSON.stringify(a)
    });
}, SubtractionSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, SubtractionSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
SubtractionSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, SubtractionSaxsDataAdapter.prototype.getSubtractionsBySubtractionIdList = function(a) {
    this.get("/{token}/proposal/{proposal}/saxs/subtraction/{0}/list".format([ a.toString() ]));
}, SubtractionSaxsDataAdapter.prototype.getImage = function(a, b) {
    return this.getUrl("/{token}/proposal/{proposal}/saxs/subtraction/{0}/image/{1}".format([ a, b ]));
}, SubtractionSaxsDataAdapter.prototype.getZip = function(a) {
    return this.getUrl("/{token}/proposal/{proposal}/saxs/subtraction/{0}/zip".format([ a ]));
}, TemplateSaxsDataAdapter.prototype.get = DataAdapter.prototype.get, TemplateSaxsDataAdapter.prototype.post = DataAdapter.prototype.post, 
TemplateSaxsDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, TemplateSaxsDataAdapter.prototype.getTemplateSourceFile = function(a, b) {
    return this.getUrl("/{token}/proposal/{proposal}/saxs/experiment/{0}/samplechanger/type/{1}/template".format([ a, b ]));
}, TemplateSaxsDataAdapter.prototype.saveTemplate = function(a, b, c, d) {
    var e = "/{token}/proposal/{proposal}/saxs/experiment/save";
    this.post(e, {
        name: a,
        comments: b,
        experimentId: d,
        measurements: c.toString()
    });
}, AuthenticationDataAdapter.prototype.get = DataAdapter.prototype.get, AuthenticationDataAdapter.prototype.post = DataAdapter.prototype.post, 
AuthenticationDataAdapter.prototype.getUrl = DataAdapter.prototype.getUrl, AuthenticationDataAdapter.prototype.authenticate = function(a, b, c) {
    var d = "ESRF";
    -1 != c.indexOf("embl-hamburg") && (d = "EMBL"), -1 != c.indexOf("192.109.31.39") && (d = "EMBL"), 
    this.post("/authenticate?site=" + d, {
        login: a,
        password: b
    });
}, function(a, b) {
    "object" == typeof exports && "object" == typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define([], b) : "object" == typeof exports ? exports.vis = b() : a.vis = b();
}(this, function() {
    return function(a) {
        function b(d) {
            if (c[d]) return c[d].exports;
            var e = c[d] = {
                exports: {},
                id: d,
                loaded: !1
            };
            return a[d].call(e.exports, e, e.exports, b), e.loaded = !0, e.exports;
        }
        var c = {};
        return b.m = a, b.c = c, b.p = "", b(0);
    }([ function(a, b, c) {
        "use strict";
        b.util = c(1), b.DOMutil = c(7), b.DataSet = c(8), b.DataView = c(10), b.Queue = c(9), 
        b.Graph3d = c(11), b.graph3d = {
            Camera: c(15),
            Filter: c(16),
            Point2d: c(14),
            Point3d: c(13),
            Slider: c(17),
            StepNumber: c(18)
        }, b.Timeline = c(19), b.Graph2d = c(48), b.timeline = {
            Core: c(30),
            DateUtil: c(29),
            Range: c(27),
            stack: c(34),
            TimeStep: c(32),
            components: {
                items: {
                    Item: c(36),
                    BackgroundItem: c(40),
                    BoxItem: c(38),
                    PointItem: c(39),
                    RangeItem: c(35)
                },
                BackgroundGroup: c(37),
                Component: c(28),
                CurrentTime: c(46),
                CustomTime: c(44),
                DataAxis: c(50),
                DataScale: c(51),
                GraphGroup: c(52),
                Group: c(33),
                ItemSet: c(31),
                Legend: c(56),
                LineGraph: c(49),
                TimeAxis: c(41)
            }
        }, b.Network = c(58), b.network = {
            Images: c(59),
            dotparser: c(115),
            gephiParser: c(116),
            allOptions: c(111)
        }, b.network.convertDot = function(a) {
            return b.network.dotparser.DOTToGraph(a);
        }, b.network.convertGephi = function(a, c) {
            return b.network.gephiParser.parseGephi(a, c);
        }, b.moment = c(2), b.Hammer = c(22), b.keycharm = c(43);
    }, function(a, b, c) {
        "use strict";
        var d = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, e = c(2), f = c(6);
        b.isNumber = function(a) {
            return a instanceof Number || "number" == typeof a;
        }, b.recursiveDOMDelete = function(a) {
            if (a) for (;a.hasChildNodes() === !0; ) b.recursiveDOMDelete(a.firstChild), a.removeChild(a.firstChild);
        }, b.giveRange = function(a, b, c, d) {
            if (b == a) return .5;
            var e = 1 / (b - a);
            return Math.max(0, (d - a) * e);
        }, b.isString = function(a) {
            return a instanceof String || "string" == typeof a;
        }, b.isDate = function(a) {
            if (a instanceof Date) return !0;
            if (b.isString(a)) {
                var c = g.exec(a);
                if (c) return !0;
                if (!isNaN(Date.parse(a))) return !0;
            }
            return !1;
        }, b.randomUUID = function() {
            return f.v4();
        }, b.assignAllKeys = function(a, b) {
            for (var c in a) a.hasOwnProperty(c) && "object" !== d(a[c]) && (a[c] = b);
        }, b.fillIfDefined = function(a, c) {
            var e = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
            for (var f in a) void 0 !== c[f] && ("object" !== d(c[f]) ? void 0 !== c[f] && null !== c[f] || void 0 === a[f] || e !== !0 ? a[f] = c[f] : delete a[f] : "object" === d(a[f]) && b.fillIfDefined(a[f], c[f], e));
        }, b.protoExtend = function(a, b) {
            for (var c = 1; c < arguments.length; c++) {
                var d = arguments[c];
                for (var e in d) a[e] = d[e];
            }
            return a;
        }, b.extend = function(a, b) {
            for (var c = 1; c < arguments.length; c++) {
                var d = arguments[c];
                for (var e in d) d.hasOwnProperty(e) && (a[e] = d[e]);
            }
            return a;
        }, b.selectiveExtend = function(a, b, c) {
            if (!Array.isArray(a)) throw new Error("Array with property names expected as first argument");
            for (var d = 2; d < arguments.length; d++) for (var e = arguments[d], f = 0; f < a.length; f++) {
                var g = a[f];
                e.hasOwnProperty(g) && (b[g] = e[g]);
            }
            return b;
        }, b.selectiveDeepExtend = function(a, c, d) {
            var e = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3];
            if (Array.isArray(d)) throw new TypeError("Arrays are not supported by deepExtend");
            for (var f = 2; f < arguments.length; f++) for (var g = arguments[f], h = 0; h < a.length; h++) {
                var i = a[h];
                if (g.hasOwnProperty(i)) if (d[i] && d[i].constructor === Object) void 0 === c[i] && (c[i] = {}), 
                c[i].constructor === Object ? b.deepExtend(c[i], d[i], !1, e) : null === d[i] && void 0 !== c[i] && e === !0 ? delete c[i] : c[i] = d[i]; else {
                    if (Array.isArray(d[i])) throw new TypeError("Arrays are not supported by deepExtend");
                    null === d[i] && void 0 !== c[i] && e === !0 ? delete c[i] : c[i] = d[i];
                }
            }
            return c;
        }, b.selectiveNotDeepExtend = function(a, c, d) {
            var e = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3];
            if (Array.isArray(d)) throw new TypeError("Arrays are not supported by deepExtend");
            for (var f in d) if (d.hasOwnProperty(f) && -1 == a.indexOf(f)) if (d[f] && d[f].constructor === Object) void 0 === c[f] && (c[f] = {}), 
            c[f].constructor === Object ? b.deepExtend(c[f], d[f]) : null === d[f] && void 0 !== c[f] && e === !0 ? delete c[f] : c[f] = d[f]; else if (Array.isArray(d[f])) {
                c[f] = [];
                for (var g = 0; g < d[f].length; g++) c[f].push(d[f][g]);
            } else null === d[f] && void 0 !== c[f] && e === !0 ? delete c[f] : c[f] = d[f];
            return c;
        }, b.deepExtend = function(a, c, d, e) {
            for (var f in c) if (c.hasOwnProperty(f) || d === !0) if (c[f] && c[f].constructor === Object) void 0 === a[f] && (a[f] = {}), 
            a[f].constructor === Object ? b.deepExtend(a[f], c[f], d) : null === c[f] && void 0 !== a[f] && e === !0 ? delete a[f] : a[f] = c[f]; else if (Array.isArray(c[f])) {
                a[f] = [];
                for (var g = 0; g < c[f].length; g++) a[f].push(c[f][g]);
            } else null === c[f] && void 0 !== a[f] && e === !0 ? delete a[f] : a[f] = c[f];
            return a;
        }, b.equalArray = function(a, b) {
            if (a.length != b.length) return !1;
            for (var c = 0, d = a.length; d > c; c++) if (a[c] != b[c]) return !1;
            return !0;
        }, b.convert = function(a, c) {
            var d;
            if (void 0 !== a) {
                if (null === a) return null;
                if (!c) return a;
                if ("string" != typeof c && !(c instanceof String)) throw new Error("Type must be a string");
                switch (c) {
                  case "boolean":
                  case "Boolean":
                    return Boolean(a);

                  case "number":
                  case "Number":
                    return Number(a.valueOf());

                  case "string":
                  case "String":
                    return String(a);

                  case "Date":
                    if (b.isNumber(a)) return new Date(a);
                    if (a instanceof Date) return new Date(a.valueOf());
                    if (e.isMoment(a)) return new Date(a.valueOf());
                    if (b.isString(a)) return d = g.exec(a), d ? new Date(Number(d[1])) : e(a).toDate();
                    throw new Error("Cannot convert object of type " + b.getType(a) + " to type Date");

                  case "Moment":
                    if (b.isNumber(a)) return e(a);
                    if (a instanceof Date) return e(a.valueOf());
                    if (e.isMoment(a)) return e(a);
                    if (b.isString(a)) return d = g.exec(a), e(d ? Number(d[1]) : a);
                    throw new Error("Cannot convert object of type " + b.getType(a) + " to type Date");

                  case "ISODate":
                    if (b.isNumber(a)) return new Date(a);
                    if (a instanceof Date) return a.toISOString();
                    if (e.isMoment(a)) return a.toDate().toISOString();
                    if (b.isString(a)) return d = g.exec(a), d ? new Date(Number(d[1])).toISOString() : new Date(a).toISOString();
                    throw new Error("Cannot convert object of type " + b.getType(a) + " to type ISODate");

                  case "ASPDate":
                    if (b.isNumber(a)) return "/Date(" + a + ")/";
                    if (a instanceof Date) return "/Date(" + a.valueOf() + ")/";
                    if (b.isString(a)) {
                        d = g.exec(a);
                        var f;
                        return f = d ? new Date(Number(d[1])).valueOf() : new Date(a).valueOf(), "/Date(" + f + ")/";
                    }
                    throw new Error("Cannot convert object of type " + b.getType(a) + " to type ASPDate");

                  default:
                    throw new Error('Unknown type "' + c + '"');
                }
            }
        };
        var g = /^\/?Date\((\-?\d+)/i;
        b.getType = function(a) {
            var b = "undefined" == typeof a ? "undefined" : d(a);
            return "object" == b ? null === a ? "null" : a instanceof Boolean ? "Boolean" : a instanceof Number ? "Number" : a instanceof String ? "String" : Array.isArray(a) ? "Array" : a instanceof Date ? "Date" : "Object" : "number" == b ? "Number" : "boolean" == b ? "Boolean" : "string" == b ? "String" : void 0 === b ? "undefined" : b;
        }, b.copyAndExtendArray = function(a, b) {
            for (var c = [], d = 0; d < a.length; d++) c.push(a[d]);
            return c.push(b), c;
        }, b.copyArray = function(a) {
            for (var b = [], c = 0; c < a.length; c++) b.push(a[c]);
            return b;
        }, b.getAbsoluteLeft = function(a) {
            return a.getBoundingClientRect().left;
        }, b.getAbsoluteTop = function(a) {
            return a.getBoundingClientRect().top;
        }, b.addClassName = function(a, b) {
            var c = a.className.split(" ");
            -1 == c.indexOf(b) && (c.push(b), a.className = c.join(" "));
        }, b.removeClassName = function(a, b) {
            var c = a.className.split(" "), d = c.indexOf(b);
            -1 != d && (c.splice(d, 1), a.className = c.join(" "));
        }, b.forEach = function(a, b) {
            var c, d;
            if (Array.isArray(a)) for (c = 0, d = a.length; d > c; c++) b(a[c], c, a); else for (c in a) a.hasOwnProperty(c) && b(a[c], c, a);
        }, b.toArray = function(a) {
            var b = [];
            for (var c in a) a.hasOwnProperty(c) && b.push(a[c]);
            return b;
        }, b.updateProperty = function(a, b, c) {
            return a[b] !== c ? (a[b] = c, !0) : !1;
        }, b.throttle = function(a, b) {
            var c = null, d = !1;
            return function e() {
                c ? d = !0 : (d = !1, a(), c = setTimeout(function() {
                    c = null, d && e();
                }, b));
            };
        }, b.addEventListener = function(a, b, c, d) {
            a.addEventListener ? (void 0 === d && (d = !1), "mousewheel" === b && navigator.userAgent.indexOf("Firefox") >= 0 && (b = "DOMMouseScroll"), 
            a.addEventListener(b, c, d)) : a.attachEvent("on" + b, c);
        }, b.removeEventListener = function(a, b, c, d) {
            a.removeEventListener ? (void 0 === d && (d = !1), "mousewheel" === b && navigator.userAgent.indexOf("Firefox") >= 0 && (b = "DOMMouseScroll"), 
            a.removeEventListener(b, c, d)) : a.detachEvent("on" + b, c);
        }, b.preventDefault = function(a) {
            a || (a = window.event), a.preventDefault ? a.preventDefault() : a.returnValue = !1;
        }, b.getTarget = function(a) {
            a || (a = window.event);
            var b;
            return a.target ? b = a.target : a.srcElement && (b = a.srcElement), void 0 != b.nodeType && 3 == b.nodeType && (b = b.parentNode), 
            b;
        }, b.hasParent = function(a, b) {
            for (var c = a; c; ) {
                if (c === b) return !0;
                c = c.parentNode;
            }
            return !1;
        }, b.option = {}, b.option.asBoolean = function(a, b) {
            return "function" == typeof a && (a = a()), null != a ? 0 != a : b || null;
        }, b.option.asNumber = function(a, b) {
            return "function" == typeof a && (a = a()), null != a ? Number(a) || b || null : b || null;
        }, b.option.asString = function(a, b) {
            return "function" == typeof a && (a = a()), null != a ? String(a) : b || null;
        }, b.option.asSize = function(a, c) {
            return "function" == typeof a && (a = a()), b.isString(a) ? a : b.isNumber(a) ? a + "px" : c || null;
        }, b.option.asElement = function(a, b) {
            return "function" == typeof a && (a = a()), a || b || null;
        }, b.hexToRGB = function(a) {
            var b = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
            a = a.replace(b, function(a, b, c, d) {
                return b + b + c + c + d + d;
            });
            var c = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
            return c ? {
                r: parseInt(c[1], 16),
                g: parseInt(c[2], 16),
                b: parseInt(c[3], 16)
            } : null;
        }, b.overrideOpacity = function(a, c) {
            if (-1 != a.indexOf("rgba")) return a;
            if (-1 != a.indexOf("rgb")) {
                var d = a.substr(a.indexOf("(") + 1).replace(")", "").split(",");
                return "rgba(" + d[0] + "," + d[1] + "," + d[2] + "," + c + ")";
            }
            var d = b.hexToRGB(a);
            return null == d ? a : "rgba(" + d.r + "," + d.g + "," + d.b + "," + c + ")";
        }, b.RGBToHex = function(a, b, c) {
            return "#" + ((1 << 24) + (a << 16) + (b << 8) + c).toString(16).slice(1);
        }, b.parseColor = function(a) {
            var c;
            if (b.isString(a) === !0) {
                if (b.isValidRGB(a) === !0) {
                    var d = a.substr(4).substr(0, a.length - 5).split(",").map(function(a) {
                        return parseInt(a);
                    });
                    a = b.RGBToHex(d[0], d[1], d[2]);
                }
                if (b.isValidHex(a) === !0) {
                    var e = b.hexToHSV(a), f = {
                        h: e.h,
                        s: .8 * e.s,
                        v: Math.min(1, 1.02 * e.v)
                    }, g = {
                        h: e.h,
                        s: Math.min(1, 1.25 * e.s),
                        v: .8 * e.v
                    }, h = b.HSVToHex(g.h, g.s, g.v), i = b.HSVToHex(f.h, f.s, f.v);
                    c = {
                        background: a,
                        border: h,
                        highlight: {
                            background: i,
                            border: h
                        },
                        hover: {
                            background: i,
                            border: h
                        }
                    };
                } else c = {
                    background: a,
                    border: a,
                    highlight: {
                        background: a,
                        border: a
                    },
                    hover: {
                        background: a,
                        border: a
                    }
                };
            } else c = {}, c.background = a.background || void 0, c.border = a.border || void 0, 
            b.isString(a.highlight) ? c.highlight = {
                border: a.highlight,
                background: a.highlight
            } : (c.highlight = {}, c.highlight.background = a.highlight && a.highlight.background || void 0, 
            c.highlight.border = a.highlight && a.highlight.border || void 0), b.isString(a.hover) ? c.hover = {
                border: a.hover,
                background: a.hover
            } : (c.hover = {}, c.hover.background = a.hover && a.hover.background || void 0, 
            c.hover.border = a.hover && a.hover.border || void 0);
            return c;
        }, b.RGBToHSV = function(a, b, c) {
            a /= 255, b /= 255, c /= 255;
            var d = Math.min(a, Math.min(b, c)), e = Math.max(a, Math.max(b, c));
            if (d == e) return {
                h: 0,
                s: 0,
                v: d
            };
            var f = a == d ? b - c : c == d ? a - b : c - a, g = a == d ? 3 : c == d ? 1 : 5, h = 60 * (g - f / (e - d)) / 360, i = (e - d) / e, j = e;
            return {
                h: h,
                s: i,
                v: j
            };
        };
        var h = {
            split: function(a) {
                var b = {};
                return a.split(";").forEach(function(a) {
                    if ("" != a.trim()) {
                        var c = a.split(":"), d = c[0].trim(), e = c[1].trim();
                        b[d] = e;
                    }
                }), b;
            },
            join: function(a) {
                return Object.keys(a).map(function(b) {
                    return b + ": " + a[b];
                }).join("; ");
            }
        };
        b.addCssText = function(a, c) {
            var d = h.split(a.style.cssText), e = h.split(c), f = b.extend(d, e);
            a.style.cssText = h.join(f);
        }, b.removeCssText = function(a, b) {
            var c = h.split(a.style.cssText), d = h.split(b);
            for (var e in d) d.hasOwnProperty(e) && delete c[e];
            a.style.cssText = h.join(c);
        }, b.HSVToRGB = function(a, b, c) {
            var d, e, f, g = Math.floor(6 * a), h = 6 * a - g, i = c * (1 - b), j = c * (1 - h * b), k = c * (1 - (1 - h) * b);
            switch (g % 6) {
              case 0:
                d = c, e = k, f = i;
                break;

              case 1:
                d = j, e = c, f = i;
                break;

              case 2:
                d = i, e = c, f = k;
                break;

              case 3:
                d = i, e = j, f = c;
                break;

              case 4:
                d = k, e = i, f = c;
                break;

              case 5:
                d = c, e = i, f = j;
            }
            return {
                r: Math.floor(255 * d),
                g: Math.floor(255 * e),
                b: Math.floor(255 * f)
            };
        }, b.HSVToHex = function(a, c, d) {
            var e = b.HSVToRGB(a, c, d);
            return b.RGBToHex(e.r, e.g, e.b);
        }, b.hexToHSV = function(a) {
            var c = b.hexToRGB(a);
            return b.RGBToHSV(c.r, c.g, c.b);
        }, b.isValidHex = function(a) {
            var b = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a);
            return b;
        }, b.isValidRGB = function(a) {
            a = a.replace(" ", "");
            var b = /rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(a);
            return b;
        }, b.isValidRGBA = function(a) {
            a = a.replace(" ", "");
            var b = /rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(a);
            return b;
        }, b.selectiveBridgeObject = function(a, c) {
            if ("object" == ("undefined" == typeof c ? "undefined" : d(c))) {
                for (var e = Object.create(c), f = 0; f < a.length; f++) c.hasOwnProperty(a[f]) && "object" == d(c[a[f]]) && (e[a[f]] = b.bridgeObject(c[a[f]]));
                return e;
            }
            return null;
        }, b.bridgeObject = function(a) {
            if ("object" == ("undefined" == typeof a ? "undefined" : d(a))) {
                var c = Object.create(a);
                for (var e in a) a.hasOwnProperty(e) && "object" == d(a[e]) && (c[e] = b.bridgeObject(a[e]));
                return c;
            }
            return null;
        }, b.insertSort = function(a, b) {
            for (var c = 0; c < a.length; c++) {
                for (var d = a[c], e = c; e > 0 && b(d, a[e - 1]) < 0; e--) a[e] = a[e - 1];
                a[e] = d;
            }
            return a;
        }, b.mergeOptions = function(a, b, c) {
            var d = (arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3], arguments.length <= 4 || void 0 === arguments[4] ? {} : arguments[4]);
            if (null === b[c]) a[c] = Object.create(d[c]); else if (void 0 !== b[c]) if ("boolean" == typeof b[c]) a[c].enabled = b[c]; else {
                void 0 === b[c].enabled && (a[c].enabled = !0);
                for (var e in b[c]) b[c].hasOwnProperty(e) && (a[c][e] = b[c][e]);
            }
        }, b.binarySearchCustom = function(a, b, c, d) {
            for (var e = 1e4, f = 0, g = 0, h = a.length - 1; h >= g && e > f; ) {
                var i = Math.floor((g + h) / 2), j = a[i], k = void 0 === d ? j[c] : j[c][d], l = b(k);
                if (0 == l) return i;
                -1 == l ? g = i + 1 : h = i - 1, f++;
            }
            return -1;
        }, b.binarySearchValue = function(a, b, c, d, e) {
            for (var f, g, h, i, j = 1e4, k = 0, l = 0, m = a.length - 1, e = void 0 != e ? e : function(a, b) {
                return a == b ? 0 : b > a ? -1 : 1;
            }; m >= l && j > k; ) {
                if (i = Math.floor(.5 * (m + l)), f = a[Math.max(0, i - 1)][c], g = a[i][c], h = a[Math.min(a.length - 1, i + 1)][c], 
                0 == e(g, b)) return i;
                if (e(f, b) < 0 && e(g, b) > 0) return "before" == d ? Math.max(0, i - 1) : i;
                if (e(g, b) < 0 && e(h, b) > 0) return "before" == d ? i : Math.min(a.length - 1, i + 1);
                e(g, b) < 0 ? l = i + 1 : m = i - 1, k++;
            }
            return -1;
        }, b.easingFunctions = {
            linear: function(a) {
                return a;
            },
            easeInQuad: function(a) {
                return a * a;
            },
            easeOutQuad: function(a) {
                return a * (2 - a);
            },
            easeInOutQuad: function(a) {
                return .5 > a ? 2 * a * a : -1 + (4 - 2 * a) * a;
            },
            easeInCubic: function(a) {
                return a * a * a;
            },
            easeOutCubic: function(a) {
                return --a * a * a + 1;
            },
            easeInOutCubic: function(a) {
                return .5 > a ? 4 * a * a * a : (a - 1) * (2 * a - 2) * (2 * a - 2) + 1;
            },
            easeInQuart: function(a) {
                return a * a * a * a;
            },
            easeOutQuart: function(a) {
                return 1 - --a * a * a * a;
            },
            easeInOutQuart: function(a) {
                return .5 > a ? 8 * a * a * a * a : 1 - 8 * --a * a * a * a;
            },
            easeInQuint: function(a) {
                return a * a * a * a * a;
            },
            easeOutQuint: function(a) {
                return 1 + --a * a * a * a * a;
            },
            easeInOutQuint: function(a) {
                return .5 > a ? 16 * a * a * a * a * a : 1 + 16 * --a * a * a * a * a;
            }
        };
    }, function(a, b, c) {
        "use strict";
        a.exports = "undefined" != typeof window && window.moment || c(3);
    }, function(a, b, c) {
        (function(a) {
            !function(b, c) {
                a.exports = c();
            }(this, function() {
                "use strict";
                function b() {
                    return $c.apply(null, arguments);
                }
                function c(a) {
                    $c = a;
                }
                function d(a) {
                    return a instanceof Array || "[object Array]" === Object.prototype.toString.call(a);
                }
                function e(a) {
                    return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a);
                }
                function f(a, b) {
                    var c, d = [];
                    for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
                    return d;
                }
                function g(a, b) {
                    return Object.prototype.hasOwnProperty.call(a, b);
                }
                function h(a, b) {
                    for (var c in b) g(b, c) && (a[c] = b[c]);
                    return g(b, "toString") && (a.toString = b.toString), g(b, "valueOf") && (a.valueOf = b.valueOf), 
                    a;
                }
                function i(a, b, c, d) {
                    return Ja(a, b, c, d, !0).utc();
                }
                function j() {
                    return {
                        empty: !1,
                        unusedTokens: [],
                        unusedInput: [],
                        overflow: -2,
                        charsLeftOver: 0,
                        nullInput: !1,
                        invalidMonth: null,
                        invalidFormat: !1,
                        userInvalidated: !1,
                        iso: !1
                    };
                }
                function k(a) {
                    return null == a._pf && (a._pf = j()), a._pf;
                }
                function l(a) {
                    if (null == a._isValid) {
                        var b = k(a);
                        a._isValid = !(isNaN(a._d.getTime()) || !(b.overflow < 0) || b.empty || b.invalidMonth || b.invalidWeekday || b.nullInput || b.invalidFormat || b.userInvalidated), 
                        a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour);
                    }
                    return a._isValid;
                }
                function m(a) {
                    var b = i(NaN);
                    return null != a ? h(k(b), a) : k(b).userInvalidated = !0, b;
                }
                function n(a) {
                    return void 0 === a;
                }
                function o(a, b) {
                    var c, d, e;
                    if (n(b._isAMomentObject) || (a._isAMomentObject = b._isAMomentObject), n(b._i) || (a._i = b._i), 
                    n(b._f) || (a._f = b._f), n(b._l) || (a._l = b._l), n(b._strict) || (a._strict = b._strict), 
                    n(b._tzm) || (a._tzm = b._tzm), n(b._isUTC) || (a._isUTC = b._isUTC), n(b._offset) || (a._offset = b._offset), 
                    n(b._pf) || (a._pf = k(b)), n(b._locale) || (a._locale = b._locale), _c.length > 0) for (c in _c) d = _c[c], 
                    e = b[d], n(e) || (a[d] = e);
                    return a;
                }
                function p(a) {
                    o(this, a), this._d = new Date(null != a._d ? a._d.getTime() : NaN), ad === !1 && (ad = !0, 
                    b.updateOffset(this), ad = !1);
                }
                function q(a) {
                    return a instanceof p || null != a && null != a._isAMomentObject;
                }
                function r(a) {
                    return 0 > a ? Math.ceil(a) : Math.floor(a);
                }
                function s(a) {
                    var b = +a, c = 0;
                    return 0 !== b && isFinite(b) && (c = r(b)), c;
                }
                function t(a, b, c) {
                    var d, e = Math.min(a.length, b.length), f = Math.abs(a.length - b.length), g = 0;
                    for (d = 0; e > d; d++) (c && a[d] !== b[d] || !c && s(a[d]) !== s(b[d])) && g++;
                    return g + f;
                }
                function u(a) {
                    b.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + a);
                }
                function v(a, b) {
                    var c = !0;
                    return h(function() {
                        return c && (u(a + "\nArguments: " + Array.prototype.slice.call(arguments).join(", ") + "\n" + new Error().stack), 
                        c = !1), b.apply(this, arguments);
                    }, b);
                }
                function w(a, b) {
                    bd[a] || (u(b), bd[a] = !0);
                }
                function x(a) {
                    return a instanceof Function || "[object Function]" === Object.prototype.toString.call(a);
                }
                function y(a) {
                    return "[object Object]" === Object.prototype.toString.call(a);
                }
                function z(a) {
                    var b, c;
                    for (c in a) b = a[c], x(b) ? this[c] = b : this["_" + c] = b;
                    this._config = a, this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source);
                }
                function A(a, b) {
                    var c, d = h({}, a);
                    for (c in b) g(b, c) && (y(a[c]) && y(b[c]) ? (d[c] = {}, h(d[c], a[c]), h(d[c], b[c])) : null != b[c] ? d[c] = b[c] : delete d[c]);
                    return d;
                }
                function B(a) {
                    null != a && this.set(a);
                }
                function C(a) {
                    return a ? a.toLowerCase().replace("_", "-") : a;
                }
                function D(a) {
                    for (var b, c, d, e, f = 0; f < a.length; ) {
                        for (e = C(a[f]).split("-"), b = e.length, c = C(a[f + 1]), c = c ? c.split("-") : null; b > 0; ) {
                            if (d = E(e.slice(0, b).join("-"))) return d;
                            if (c && c.length >= b && t(e, c, !0) >= b - 1) break;
                            b--;
                        }
                        f++;
                    }
                    return null;
                }
                function E(b) {
                    var c = null;
                    if (!dd[b] && "undefined" != typeof a && a && a.exports) try {
                        c = cd._abbr, !function() {
                            var a = new Error('Cannot find module "./locale"');
                            throw a.code = "MODULE_NOT_FOUND", a;
                        }(), F(c);
                    } catch (d) {}
                    return dd[b];
                }
                function F(a, b) {
                    var c;
                    return a && (c = n(b) ? I(a) : G(a, b), c && (cd = c)), cd._abbr;
                }
                function G(a, b) {
                    return null !== b ? (b.abbr = a, null != dd[a] ? (w("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"), 
                    b = A(dd[a]._config, b)) : null != b.parentLocale && (null != dd[b.parentLocale] ? b = A(dd[b.parentLocale]._config, b) : w("parentLocaleUndefined", "specified parentLocale is not defined yet")), 
                    dd[a] = new B(b), F(a), dd[a]) : (delete dd[a], null);
                }
                function H(a, b) {
                    if (null != b) {
                        var c;
                        null != dd[a] && (b = A(dd[a]._config, b)), c = new B(b), c.parentLocale = dd[a], 
                        dd[a] = c, F(a);
                    } else null != dd[a] && (null != dd[a].parentLocale ? dd[a] = dd[a].parentLocale : null != dd[a] && delete dd[a]);
                    return dd[a];
                }
                function I(a) {
                    var b;
                    if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return cd;
                    if (!d(a)) {
                        if (b = E(a)) return b;
                        a = [ a ];
                    }
                    return D(a);
                }
                function J() {
                    return Object.keys(dd);
                }
                function K(a, b) {
                    var c = a.toLowerCase();
                    ed[c] = ed[c + "s"] = ed[b] = a;
                }
                function L(a) {
                    return "string" == typeof a ? ed[a] || ed[a.toLowerCase()] : void 0;
                }
                function M(a) {
                    var b, c, d = {};
                    for (c in a) g(a, c) && (b = L(c), b && (d[b] = a[c]));
                    return d;
                }
                function N(a, c) {
                    return function(d) {
                        return null != d ? (P(this, a, d), b.updateOffset(this, c), this) : O(this, a);
                    };
                }
                function O(a, b) {
                    return a.isValid() ? a._d["get" + (a._isUTC ? "UTC" : "") + b]() : NaN;
                }
                function P(a, b, c) {
                    a.isValid() && a._d["set" + (a._isUTC ? "UTC" : "") + b](c);
                }
                function Q(a, b) {
                    var c;
                    if ("object" == typeof a) for (c in a) this.set(c, a[c]); else if (a = L(a), x(this[a])) return this[a](b);
                    return this;
                }
                function R(a, b, c) {
                    var d = "" + Math.abs(a), e = b - d.length, f = a >= 0;
                    return (f ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, e)).toString().substr(1) + d;
                }
                function S(a, b, c, d) {
                    var e = d;
                    "string" == typeof d && (e = function() {
                        return this[d]();
                    }), a && (id[a] = e), b && (id[b[0]] = function() {
                        return R(e.apply(this, arguments), b[1], b[2]);
                    }), c && (id[c] = function() {
                        return this.localeData().ordinal(e.apply(this, arguments), a);
                    });
                }
                function T(a) {
                    return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "");
                }
                function U(a) {
                    var b, c, d = a.match(fd);
                    for (b = 0, c = d.length; c > b; b++) id[d[b]] ? d[b] = id[d[b]] : d[b] = T(d[b]);
                    return function(e) {
                        var f = "";
                        for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
                        return f;
                    };
                }
                function V(a, b) {
                    return a.isValid() ? (b = W(b, a.localeData()), hd[b] = hd[b] || U(b), hd[b](a)) : a.localeData().invalidDate();
                }
                function W(a, b) {
                    function c(a) {
                        return b.longDateFormat(a) || a;
                    }
                    var d = 5;
                    for (gd.lastIndex = 0; d >= 0 && gd.test(a); ) a = a.replace(gd, c), gd.lastIndex = 0, 
                    d -= 1;
                    return a;
                }
                function X(a, b, c) {
                    Ad[a] = x(b) ? b : function(a, d) {
                        return a && c ? c : b;
                    };
                }
                function Y(a, b) {
                    return g(Ad, a) ? Ad[a](b._strict, b._locale) : new RegExp(Z(a));
                }
                function Z(a) {
                    return $(a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(a, b, c, d, e) {
                        return b || c || d || e;
                    }));
                }
                function $(a) {
                    return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
                }
                function _(a, b) {
                    var c, d = b;
                    for ("string" == typeof a && (a = [ a ]), "number" == typeof b && (d = function(a, c) {
                        c[b] = s(a);
                    }), c = 0; c < a.length; c++) Bd[a[c]] = d;
                }
                function aa(a, b) {
                    _(a, function(a, c, d, e) {
                        d._w = d._w || {}, b(a, d._w, d, e);
                    });
                }
                function ba(a, b, c) {
                    null != b && g(Bd, a) && Bd[a](b, c._a, c, a);
                }
                function ca(a, b) {
                    return new Date(Date.UTC(a, b + 1, 0)).getUTCDate();
                }
                function da(a, b) {
                    return d(this._months) ? this._months[a.month()] : this._months[Ld.test(b) ? "format" : "standalone"][a.month()];
                }
                function ea(a, b) {
                    return d(this._monthsShort) ? this._monthsShort[a.month()] : this._monthsShort[Ld.test(b) ? "format" : "standalone"][a.month()];
                }
                function fa(a, b, c) {
                    var d, e, f;
                    for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), 
                    d = 0; 12 > d; d++) {
                        if (e = i([ 2e3, d ]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), 
                        this._shortMonthsParse[d] = new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), 
                        c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), 
                        this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
                        if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
                        if (!c && this._monthsParse[d].test(a)) return d;
                    }
                }
                function ga(a, b) {
                    var c;
                    if (!a.isValid()) return a;
                    if ("string" == typeof b) if (/^\d+$/.test(b)) b = s(b); else if (b = a.localeData().monthsParse(b), 
                    "number" != typeof b) return a;
                    return c = Math.min(a.date(), ca(a.year(), b)), a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c), 
                    a;
                }
                function ha(a) {
                    return null != a ? (ga(this, a), b.updateOffset(this, !0), this) : O(this, "Month");
                }
                function ia() {
                    return ca(this.year(), this.month());
                }
                function ja(a) {
                    return this._monthsParseExact ? (g(this, "_monthsRegex") || la.call(this), a ? this._monthsShortStrictRegex : this._monthsShortRegex) : this._monthsShortStrictRegex && a ? this._monthsShortStrictRegex : this._monthsShortRegex;
                }
                function ka(a) {
                    return this._monthsParseExact ? (g(this, "_monthsRegex") || la.call(this), a ? this._monthsStrictRegex : this._monthsRegex) : this._monthsStrictRegex && a ? this._monthsStrictRegex : this._monthsRegex;
                }
                function la() {
                    function a(a, b) {
                        return b.length - a.length;
                    }
                    var b, c, d = [], e = [], f = [];
                    for (b = 0; 12 > b; b++) c = i([ 2e3, b ]), d.push(this.monthsShort(c, "")), e.push(this.months(c, "")), 
                    f.push(this.months(c, "")), f.push(this.monthsShort(c, ""));
                    for (d.sort(a), e.sort(a), f.sort(a), b = 0; 12 > b; b++) d[b] = $(d[b]), e[b] = $(e[b]), 
                    f[b] = $(f[b]);
                    this._monthsRegex = new RegExp("^(" + f.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, 
                    this._monthsStrictRegex = new RegExp("^(" + e.join("|") + ")$", "i"), this._monthsShortStrictRegex = new RegExp("^(" + d.join("|") + ")$", "i");
                }
                function ma(a) {
                    var b, c = a._a;
                    return c && -2 === k(a).overflow && (b = c[Dd] < 0 || c[Dd] > 11 ? Dd : c[Ed] < 1 || c[Ed] > ca(c[Cd], c[Dd]) ? Ed : c[Fd] < 0 || c[Fd] > 24 || 24 === c[Fd] && (0 !== c[Gd] || 0 !== c[Hd] || 0 !== c[Id]) ? Fd : c[Gd] < 0 || c[Gd] > 59 ? Gd : c[Hd] < 0 || c[Hd] > 59 ? Hd : c[Id] < 0 || c[Id] > 999 ? Id : -1, 
                    k(a)._overflowDayOfYear && (Cd > b || b > Ed) && (b = Ed), k(a)._overflowWeeks && -1 === b && (b = Jd), 
                    k(a)._overflowWeekday && -1 === b && (b = Kd), k(a).overflow = b), a;
                }
                function na(a) {
                    var b, c, d, e, f, g, h = a._i, i = Qd.exec(h) || Rd.exec(h);
                    if (i) {
                        for (k(a).iso = !0, b = 0, c = Td.length; c > b; b++) if (Td[b][1].exec(i[1])) {
                            e = Td[b][0], d = Td[b][2] !== !1;
                            break;
                        }
                        if (null == e) return void (a._isValid = !1);
                        if (i[3]) {
                            for (b = 0, c = Ud.length; c > b; b++) if (Ud[b][1].exec(i[3])) {
                                f = (i[2] || " ") + Ud[b][0];
                                break;
                            }
                            if (null == f) return void (a._isValid = !1);
                        }
                        if (!d && null != f) return void (a._isValid = !1);
                        if (i[4]) {
                            if (!Sd.exec(i[4])) return void (a._isValid = !1);
                            g = "Z";
                        }
                        a._f = e + (f || "") + (g || ""), Ca(a);
                    } else a._isValid = !1;
                }
                function oa(a) {
                    var c = Vd.exec(a._i);
                    return null !== c ? void (a._d = new Date(+c[1])) : (na(a), void (a._isValid === !1 && (delete a._isValid, 
                    b.createFromInputFallback(a))));
                }
                function pa(a, b, c, d, e, f, g) {
                    var h = new Date(a, b, c, d, e, f, g);
                    return 100 > a && a >= 0 && isFinite(h.getFullYear()) && h.setFullYear(a), h;
                }
                function qa(a) {
                    var b = new Date(Date.UTC.apply(null, arguments));
                    return 100 > a && a >= 0 && isFinite(b.getUTCFullYear()) && b.setUTCFullYear(a), 
                    b;
                }
                function ra(a) {
                    return sa(a) ? 366 : 365;
                }
                function sa(a) {
                    return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0;
                }
                function ta() {
                    return sa(this.year());
                }
                function ua(a, b, c) {
                    var d = 7 + b - c, e = (7 + qa(a, 0, d).getUTCDay() - b) % 7;
                    return -e + d - 1;
                }
                function va(a, b, c, d, e) {
                    var f, g, h = (7 + c - d) % 7, i = ua(a, d, e), j = 1 + 7 * (b - 1) + h + i;
                    return 0 >= j ? (f = a - 1, g = ra(f) + j) : j > ra(a) ? (f = a + 1, g = j - ra(a)) : (f = a, 
                    g = j), {
                        year: f,
                        dayOfYear: g
                    };
                }
                function wa(a, b, c) {
                    var d, e, f = ua(a.year(), b, c), g = Math.floor((a.dayOfYear() - f - 1) / 7) + 1;
                    return 1 > g ? (e = a.year() - 1, d = g + xa(e, b, c)) : g > xa(a.year(), b, c) ? (d = g - xa(a.year(), b, c), 
                    e = a.year() + 1) : (e = a.year(), d = g), {
                        week: d,
                        year: e
                    };
                }
                function xa(a, b, c) {
                    var d = ua(a, b, c), e = ua(a + 1, b, c);
                    return (ra(a) - d + e) / 7;
                }
                function ya(a, b, c) {
                    return null != a ? a : null != b ? b : c;
                }
                function za(a) {
                    var c = new Date(b.now());
                    return a._useUTC ? [ c.getUTCFullYear(), c.getUTCMonth(), c.getUTCDate() ] : [ c.getFullYear(), c.getMonth(), c.getDate() ];
                }
                function Aa(a) {
                    var b, c, d, e, f = [];
                    if (!a._d) {
                        for (d = za(a), a._w && null == a._a[Ed] && null == a._a[Dd] && Ba(a), a._dayOfYear && (e = ya(a._a[Cd], d[Cd]), 
                        a._dayOfYear > ra(e) && (k(a)._overflowDayOfYear = !0), c = qa(e, 0, a._dayOfYear), 
                        a._a[Dd] = c.getUTCMonth(), a._a[Ed] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
                        for (;7 > b; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
                        24 === a._a[Fd] && 0 === a._a[Gd] && 0 === a._a[Hd] && 0 === a._a[Id] && (a._nextDay = !0, 
                        a._a[Fd] = 0), a._d = (a._useUTC ? qa : pa).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), 
                        a._nextDay && (a._a[Fd] = 24);
                    }
                }
                function Ba(a) {
                    var b, c, d, e, f, g, h, i;
                    b = a._w, null != b.GG || null != b.W || null != b.E ? (f = 1, g = 4, c = ya(b.GG, a._a[Cd], wa(Ka(), 1, 4).year), 
                    d = ya(b.W, 1), e = ya(b.E, 1), (1 > e || e > 7) && (i = !0)) : (f = a._locale._week.dow, 
                    g = a._locale._week.doy, c = ya(b.gg, a._a[Cd], wa(Ka(), f, g).year), d = ya(b.w, 1), 
                    null != b.d ? (e = b.d, (0 > e || e > 6) && (i = !0)) : null != b.e ? (e = b.e + f, 
                    (b.e < 0 || b.e > 6) && (i = !0)) : e = f), 1 > d || d > xa(c, f, g) ? k(a)._overflowWeeks = !0 : null != i ? k(a)._overflowWeekday = !0 : (h = va(c, d, e, f, g), 
                    a._a[Cd] = h.year, a._dayOfYear = h.dayOfYear);
                }
                function Ca(a) {
                    if (a._f === b.ISO_8601) return void na(a);
                    a._a = [], k(a).empty = !0;
                    var c, d, e, f, g, h = "" + a._i, i = h.length, j = 0;
                    for (e = W(a._f, a._locale).match(fd) || [], c = 0; c < e.length; c++) f = e[c], 
                    d = (h.match(Y(f, a)) || [])[0], d && (g = h.substr(0, h.indexOf(d)), g.length > 0 && k(a).unusedInput.push(g), 
                    h = h.slice(h.indexOf(d) + d.length), j += d.length), id[f] ? (d ? k(a).empty = !1 : k(a).unusedTokens.push(f), 
                    ba(f, d, a)) : a._strict && !d && k(a).unusedTokens.push(f);
                    k(a).charsLeftOver = i - j, h.length > 0 && k(a).unusedInput.push(h), k(a).bigHour === !0 && a._a[Fd] <= 12 && a._a[Fd] > 0 && (k(a).bigHour = void 0), 
                    a._a[Fd] = Da(a._locale, a._a[Fd], a._meridiem), Aa(a), ma(a);
                }
                function Da(a, b, c) {
                    var d;
                    return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b, c) : null != a.isPM ? (d = a.isPM(c), 
                    d && 12 > b && (b += 12), d || 12 !== b || (b = 0), b) : b;
                }
                function Ea(a) {
                    var b, c, d, e, f;
                    if (0 === a._f.length) return k(a).invalidFormat = !0, void (a._d = new Date(NaN));
                    for (e = 0; e < a._f.length; e++) f = 0, b = o({}, a), null != a._useUTC && (b._useUTC = a._useUTC), 
                    b._f = a._f[e], Ca(b), l(b) && (f += k(b).charsLeftOver, f += 10 * k(b).unusedTokens.length, 
                    k(b).score = f, (null == d || d > f) && (d = f, c = b));
                    h(a, c || b);
                }
                function Fa(a) {
                    if (!a._d) {
                        var b = M(a._i);
                        a._a = f([ b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond ], function(a) {
                            return a && parseInt(a, 10);
                        }), Aa(a);
                    }
                }
                function Ga(a) {
                    var b = new p(ma(Ha(a)));
                    return b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b;
                }
                function Ha(a) {
                    var b = a._i, c = a._f;
                    return a._locale = a._locale || I(a._l), null === b || void 0 === c && "" === b ? m({
                        nullInput: !0
                    }) : ("string" == typeof b && (a._i = b = a._locale.preparse(b)), q(b) ? new p(ma(b)) : (d(c) ? Ea(a) : c ? Ca(a) : e(b) ? a._d = b : Ia(a), 
                    l(a) || (a._d = null), a));
                }
                function Ia(a) {
                    var c = a._i;
                    void 0 === c ? a._d = new Date(b.now()) : e(c) ? a._d = new Date(+c) : "string" == typeof c ? oa(a) : d(c) ? (a._a = f(c.slice(0), function(a) {
                        return parseInt(a, 10);
                    }), Aa(a)) : "object" == typeof c ? Fa(a) : "number" == typeof c ? a._d = new Date(c) : b.createFromInputFallback(a);
                }
                function Ja(a, b, c, d, e) {
                    var f = {};
                    return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, 
                    f._l = c, f._i = a, f._f = b, f._strict = d, Ga(f);
                }
                function Ka(a, b, c, d) {
                    return Ja(a, b, c, d, !1);
                }
                function La(a, b) {
                    var c, e;
                    if (1 === b.length && d(b[0]) && (b = b[0]), !b.length) return Ka();
                    for (c = b[0], e = 1; e < b.length; ++e) b[e].isValid() && !b[e][a](c) || (c = b[e]);
                    return c;
                }
                function Ma() {
                    var a = [].slice.call(arguments, 0);
                    return La("isBefore", a);
                }
                function Na() {
                    var a = [].slice.call(arguments, 0);
                    return La("isAfter", a);
                }
                function Oa(a) {
                    var b = M(a), c = b.year || 0, d = b.quarter || 0, e = b.month || 0, f = b.week || 0, g = b.day || 0, h = b.hour || 0, i = b.minute || 0, j = b.second || 0, k = b.millisecond || 0;
                    this._milliseconds = +k + 1e3 * j + 6e4 * i + 36e5 * h, this._days = +g + 7 * f, 
                    this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = I(), this._bubble();
                }
                function Pa(a) {
                    return a instanceof Oa;
                }
                function Qa(a, b) {
                    S(a, 0, 0, function() {
                        var a = this.utcOffset(), c = "+";
                        return 0 > a && (a = -a, c = "-"), c + R(~~(a / 60), 2) + b + R(~~a % 60, 2);
                    });
                }
                function Ra(a, b) {
                    var c = (b || "").match(a) || [], d = c[c.length - 1] || [], e = (d + "").match($d) || [ "-", 0, 0 ], f = +(60 * e[1]) + s(e[2]);
                    return "+" === e[0] ? f : -f;
                }
                function Sa(a, c) {
                    var d, f;
                    return c._isUTC ? (d = c.clone(), f = (q(a) || e(a) ? +a : +Ka(a)) - +d, d._d.setTime(+d._d + f), 
                    b.updateOffset(d, !1), d) : Ka(a).local();
                }
                function Ta(a) {
                    return 15 * -Math.round(a._d.getTimezoneOffset() / 15);
                }
                function Ua(a, c) {
                    var d, e = this._offset || 0;
                    return this.isValid() ? null != a ? ("string" == typeof a ? a = Ra(xd, a) : Math.abs(a) < 16 && (a = 60 * a), 
                    !this._isUTC && c && (d = Ta(this)), this._offset = a, this._isUTC = !0, null != d && this.add(d, "m"), 
                    e !== a && (!c || this._changeInProgress ? jb(this, db(a - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, 
                    b.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Ta(this) : null != a ? this : NaN;
                }
                function Va(a, b) {
                    return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset();
                }
                function Wa(a) {
                    return this.utcOffset(0, a);
                }
                function Xa(a) {
                    return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Ta(this), "m")), 
                    this;
                }
                function Ya() {
                    return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(Ra(wd, this._i)), 
                    this;
                }
                function Za(a) {
                    return this.isValid() ? (a = a ? Ka(a).utcOffset() : 0, (this.utcOffset() - a) % 60 === 0) : !1;
                }
                function $a() {
                    return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
                }
                function _a() {
                    if (!n(this._isDSTShifted)) return this._isDSTShifted;
                    var a = {};
                    if (o(a, this), a = Ha(a), a._a) {
                        var b = a._isUTC ? i(a._a) : Ka(a._a);
                        this._isDSTShifted = this.isValid() && t(a._a, b.toArray()) > 0;
                    } else this._isDSTShifted = !1;
                    return this._isDSTShifted;
                }
                function ab() {
                    return this.isValid() ? !this._isUTC : !1;
                }
                function bb() {
                    return this.isValid() ? this._isUTC : !1;
                }
                function cb() {
                    return this.isValid() ? this._isUTC && 0 === this._offset : !1;
                }
                function db(a, b) {
                    var c, d, e, f = a, h = null;
                    return Pa(a) ? f = {
                        ms: a._milliseconds,
                        d: a._days,
                        M: a._months
                    } : "number" == typeof a ? (f = {}, b ? f[b] = a : f.milliseconds = a) : (h = _d.exec(a)) ? (c = "-" === h[1] ? -1 : 1, 
                    f = {
                        y: 0,
                        d: s(h[Ed]) * c,
                        h: s(h[Fd]) * c,
                        m: s(h[Gd]) * c,
                        s: s(h[Hd]) * c,
                        ms: s(h[Id]) * c
                    }) : (h = ae.exec(a)) ? (c = "-" === h[1] ? -1 : 1, f = {
                        y: eb(h[2], c),
                        M: eb(h[3], c),
                        w: eb(h[4], c),
                        d: eb(h[5], c),
                        h: eb(h[6], c),
                        m: eb(h[7], c),
                        s: eb(h[8], c)
                    }) : null == f ? f = {} : "object" == typeof f && ("from" in f || "to" in f) && (e = gb(Ka(f.from), Ka(f.to)), 
                    f = {}, f.ms = e.milliseconds, f.M = e.months), d = new Oa(f), Pa(a) && g(a, "_locale") && (d._locale = a._locale), 
                    d;
                }
                function eb(a, b) {
                    var c = a && parseFloat(a.replace(",", "."));
                    return (isNaN(c) ? 0 : c) * b;
                }
                function fb(a, b) {
                    var c = {
                        milliseconds: 0,
                        months: 0
                    };
                    return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, 
                    c.milliseconds = +b - +a.clone().add(c.months, "M"), c;
                }
                function gb(a, b) {
                    var c;
                    return a.isValid() && b.isValid() ? (b = Sa(b, a), a.isBefore(b) ? c = fb(a, b) : (c = fb(b, a), 
                    c.milliseconds = -c.milliseconds, c.months = -c.months), c) : {
                        milliseconds: 0,
                        months: 0
                    };
                }
                function hb(a) {
                    return 0 > a ? -1 * Math.round(-1 * a) : Math.round(a);
                }
                function ib(a, b) {
                    return function(c, d) {
                        var e, f;
                        return null === d || isNaN(+d) || (w(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), 
                        f = c, c = d, d = f), c = "string" == typeof c ? +c : c, e = db(c, d), jb(this, e, a), 
                        this;
                    };
                }
                function jb(a, c, d, e) {
                    var f = c._milliseconds, g = hb(c._days), h = hb(c._months);
                    a.isValid() && (e = null == e ? !0 : e, f && a._d.setTime(+a._d + f * d), g && P(a, "Date", O(a, "Date") + g * d), 
                    h && ga(a, O(a, "Month") + h * d), e && b.updateOffset(a, g || h));
                }
                function kb(a, b) {
                    var c = a || Ka(), d = Sa(c, this).startOf("day"), e = this.diff(d, "days", !0), f = -6 > e ? "sameElse" : -1 > e ? "lastWeek" : 0 > e ? "lastDay" : 1 > e ? "sameDay" : 2 > e ? "nextDay" : 7 > e ? "nextWeek" : "sameElse", g = b && (x(b[f]) ? b[f]() : b[f]);
                    return this.format(g || this.localeData().calendar(f, this, Ka(c)));
                }
                function lb() {
                    return new p(this);
                }
                function mb(a, b) {
                    var c = q(a) ? a : Ka(a);
                    return this.isValid() && c.isValid() ? (b = L(n(b) ? "millisecond" : b), "millisecond" === b ? +this > +c : +c < +this.clone().startOf(b)) : !1;
                }
                function nb(a, b) {
                    var c = q(a) ? a : Ka(a);
                    return this.isValid() && c.isValid() ? (b = L(n(b) ? "millisecond" : b), "millisecond" === b ? +c > +this : +this.clone().endOf(b) < +c) : !1;
                }
                function ob(a, b, c) {
                    return this.isAfter(a, c) && this.isBefore(b, c);
                }
                function pb(a, b) {
                    var c, d = q(a) ? a : Ka(a);
                    return this.isValid() && d.isValid() ? (b = L(b || "millisecond"), "millisecond" === b ? +this === +d : (c = +d, 
                    +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b))) : !1;
                }
                function qb(a, b) {
                    return this.isSame(a, b) || this.isAfter(a, b);
                }
                function rb(a, b) {
                    return this.isSame(a, b) || this.isBefore(a, b);
                }
                function sb(a, b, c) {
                    var d, e, f, g;
                    return this.isValid() ? (d = Sa(a, this), d.isValid() ? (e = 6e4 * (d.utcOffset() - this.utcOffset()), 
                    b = L(b), "year" === b || "month" === b || "quarter" === b ? (g = tb(this, d), "quarter" === b ? g /= 3 : "year" === b && (g /= 12)) : (f = this - d, 
                    g = "second" === b ? f / 1e3 : "minute" === b ? f / 6e4 : "hour" === b ? f / 36e5 : "day" === b ? (f - e) / 864e5 : "week" === b ? (f - e) / 6048e5 : f), 
                    c ? g : r(g)) : NaN) : NaN;
                }
                function tb(a, b) {
                    var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()), f = a.clone().add(e, "months");
                    return 0 > b - f ? (c = a.clone().add(e - 1, "months"), d = (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), 
                    d = (b - f) / (c - f)), -(e + d);
                }
                function ub() {
                    return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
                }
                function vb() {
                    var a = this.clone().utc();
                    return 0 < a.year() && a.year() <= 9999 ? x(Date.prototype.toISOString) ? this.toDate().toISOString() : V(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : V(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");
                }
                function wb(a) {
                    var c = V(this, a || b.defaultFormat);
                    return this.localeData().postformat(c);
                }
                function xb(a, b) {
                    return this.isValid() && (q(a) && a.isValid() || Ka(a).isValid()) ? db({
                        to: this,
                        from: a
                    }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
                }
                function yb(a) {
                    return this.from(Ka(), a);
                }
                function zb(a, b) {
                    return this.isValid() && (q(a) && a.isValid() || Ka(a).isValid()) ? db({
                        from: this,
                        to: a
                    }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
                }
                function Ab(a) {
                    return this.to(Ka(), a);
                }
                function Bb(a) {
                    var b;
                    return void 0 === a ? this._locale._abbr : (b = I(a), null != b && (this._locale = b), 
                    this);
                }
                function Cb() {
                    return this._locale;
                }
                function Db(a) {
                    switch (a = L(a)) {
                      case "year":
                        this.month(0);

                      case "quarter":
                      case "month":
                        this.date(1);

                      case "week":
                      case "isoWeek":
                      case "day":
                        this.hours(0);

                      case "hour":
                        this.minutes(0);

                      case "minute":
                        this.seconds(0);

                      case "second":
                        this.milliseconds(0);
                    }
                    return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), 
                    this;
                }
                function Eb(a) {
                    return a = L(a), void 0 === a || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms");
                }
                function Fb() {
                    return +this._d - 6e4 * (this._offset || 0);
                }
                function Gb() {
                    return Math.floor(+this / 1e3);
                }
                function Hb() {
                    return this._offset ? new Date(+this) : this._d;
                }
                function Ib() {
                    var a = this;
                    return [ a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond() ];
                }
                function Jb() {
                    var a = this;
                    return {
                        years: a.year(),
                        months: a.month(),
                        date: a.date(),
                        hours: a.hours(),
                        minutes: a.minutes(),
                        seconds: a.seconds(),
                        milliseconds: a.milliseconds()
                    };
                }
                function Kb() {
                    return this.isValid() ? this.toISOString() : null;
                }
                function Lb() {
                    return l(this);
                }
                function Mb() {
                    return h({}, k(this));
                }
                function Nb() {
                    return k(this).overflow;
                }
                function Ob() {
                    return {
                        input: this._i,
                        format: this._f,
                        locale: this._locale,
                        isUTC: this._isUTC,
                        strict: this._strict
                    };
                }
                function Pb(a, b) {
                    S(0, [ a, a.length ], 0, b);
                }
                function Qb(a) {
                    return Ub.call(this, a, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
                }
                function Rb(a) {
                    return Ub.call(this, a, this.isoWeek(), this.isoWeekday(), 1, 4);
                }
                function Sb() {
                    return xa(this.year(), 1, 4);
                }
                function Tb() {
                    var a = this.localeData()._week;
                    return xa(this.year(), a.dow, a.doy);
                }
                function Ub(a, b, c, d, e) {
                    var f;
                    return null == a ? wa(this, d, e).year : (f = xa(a, d, e), b > f && (b = f), Vb.call(this, a, b, c, d, e));
                }
                function Vb(a, b, c, d, e) {
                    var f = va(a, b, c, d, e), g = qa(f.year, 0, f.dayOfYear);
                    return this.year(g.getUTCFullYear()), this.month(g.getUTCMonth()), this.date(g.getUTCDate()), 
                    this;
                }
                function Wb(a) {
                    return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3);
                }
                function Xb(a) {
                    return wa(a, this._week.dow, this._week.doy).week;
                }
                function Yb() {
                    return this._week.dow;
                }
                function Zb() {
                    return this._week.doy;
                }
                function $b(a) {
                    var b = this.localeData().week(this);
                    return null == a ? b : this.add(7 * (a - b), "d");
                }
                function _b(a) {
                    var b = wa(this, 1, 4).week;
                    return null == a ? b : this.add(7 * (a - b), "d");
                }
                function ac(a, b) {
                    return "string" != typeof a ? a : isNaN(a) ? (a = b.weekdaysParse(a), "number" == typeof a ? a : null) : parseInt(a, 10);
                }
                function bc(a, b) {
                    return d(this._weekdays) ? this._weekdays[a.day()] : this._weekdays[this._weekdays.isFormat.test(b) ? "format" : "standalone"][a.day()];
                }
                function cc(a) {
                    return this._weekdaysShort[a.day()];
                }
                function dc(a) {
                    return this._weekdaysMin[a.day()];
                }
                function ec(a, b, c) {
                    var d, e, f;
                    for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], 
                    this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), d = 0; 7 > d; d++) {
                        if (e = Ka([ 2e3, 1 ]).day(d), c && !this._fullWeekdaysParse[d] && (this._fullWeekdaysParse[d] = new RegExp("^" + this.weekdays(e, "").replace(".", ".?") + "$", "i"), 
                        this._shortWeekdaysParse[d] = new RegExp("^" + this.weekdaysShort(e, "").replace(".", ".?") + "$", "i"), 
                        this._minWeekdaysParse[d] = new RegExp("^" + this.weekdaysMin(e, "").replace(".", ".?") + "$", "i")), 
                        this._weekdaysParse[d] || (f = "^" + this.weekdays(e, "") + "|^" + this.weekdaysShort(e, "") + "|^" + this.weekdaysMin(e, ""), 
                        this._weekdaysParse[d] = new RegExp(f.replace(".", ""), "i")), c && "dddd" === b && this._fullWeekdaysParse[d].test(a)) return d;
                        if (c && "ddd" === b && this._shortWeekdaysParse[d].test(a)) return d;
                        if (c && "dd" === b && this._minWeekdaysParse[d].test(a)) return d;
                        if (!c && this._weekdaysParse[d].test(a)) return d;
                    }
                }
                function fc(a) {
                    if (!this.isValid()) return null != a ? this : NaN;
                    var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                    return null != a ? (a = ac(a, this.localeData()), this.add(a - b, "d")) : b;
                }
                function gc(a) {
                    if (!this.isValid()) return null != a ? this : NaN;
                    var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
                    return null == a ? b : this.add(a - b, "d");
                }
                function hc(a) {
                    return this.isValid() ? null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7) : null != a ? this : NaN;
                }
                function ic(a) {
                    var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
                    return null == a ? b : this.add(a - b, "d");
                }
                function jc() {
                    return this.hours() % 12 || 12;
                }
                function kc(a, b) {
                    S(a, 0, 0, function() {
                        return this.localeData().meridiem(this.hours(), this.minutes(), b);
                    });
                }
                function lc(a, b) {
                    return b._meridiemParse;
                }
                function mc(a) {
                    return "p" === (a + "").toLowerCase().charAt(0);
                }
                function nc(a, b, c) {
                    return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM";
                }
                function oc(a, b) {
                    b[Id] = s(1e3 * ("0." + a));
                }
                function pc() {
                    return this._isUTC ? "UTC" : "";
                }
                function qc() {
                    return this._isUTC ? "Coordinated Universal Time" : "";
                }
                function rc(a) {
                    return Ka(1e3 * a);
                }
                function sc() {
                    return Ka.apply(null, arguments).parseZone();
                }
                function tc(a, b, c) {
                    var d = this._calendar[a];
                    return x(d) ? d.call(b, c) : d;
                }
                function uc(a) {
                    var b = this._longDateFormat[a], c = this._longDateFormat[a.toUpperCase()];
                    return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function(a) {
                        return a.slice(1);
                    }), this._longDateFormat[a]);
                }
                function vc() {
                    return this._invalidDate;
                }
                function wc(a) {
                    return this._ordinal.replace("%d", a);
                }
                function xc(a) {
                    return a;
                }
                function yc(a, b, c, d) {
                    var e = this._relativeTime[c];
                    return x(e) ? e(a, b, c, d) : e.replace(/%d/i, a);
                }
                function zc(a, b) {
                    var c = this._relativeTime[a > 0 ? "future" : "past"];
                    return x(c) ? c(b) : c.replace(/%s/i, b);
                }
                function Ac(a, b, c, d) {
                    var e = I(), f = i().set(d, b);
                    return e[c](f, a);
                }
                function Bc(a, b, c, d, e) {
                    if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return Ac(a, b, c, e);
                    var f, g = [];
                    for (f = 0; d > f; f++) g[f] = Ac(a, f, c, e);
                    return g;
                }
                function Cc(a, b) {
                    return Bc(a, b, "months", 12, "month");
                }
                function Dc(a, b) {
                    return Bc(a, b, "monthsShort", 12, "month");
                }
                function Ec(a, b) {
                    return Bc(a, b, "weekdays", 7, "day");
                }
                function Fc(a, b) {
                    return Bc(a, b, "weekdaysShort", 7, "day");
                }
                function Gc(a, b) {
                    return Bc(a, b, "weekdaysMin", 7, "day");
                }
                function Hc() {
                    var a = this._data;
                    return this._milliseconds = ye(this._milliseconds), this._days = ye(this._days), 
                    this._months = ye(this._months), a.milliseconds = ye(a.milliseconds), a.seconds = ye(a.seconds), 
                    a.minutes = ye(a.minutes), a.hours = ye(a.hours), a.months = ye(a.months), a.years = ye(a.years), 
                    this;
                }
                function Ic(a, b, c, d) {
                    var e = db(b, c);
                    return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months += d * e._months, 
                    a._bubble();
                }
                function Jc(a, b) {
                    return Ic(this, a, b, 1);
                }
                function Kc(a, b) {
                    return Ic(this, a, b, -1);
                }
                function Lc(a) {
                    return 0 > a ? Math.floor(a) : Math.ceil(a);
                }
                function Mc() {
                    var a, b, c, d, e, f = this._milliseconds, g = this._days, h = this._months, i = this._data;
                    return f >= 0 && g >= 0 && h >= 0 || 0 >= f && 0 >= g && 0 >= h || (f += 864e5 * Lc(Oc(h) + g), 
                    g = 0, h = 0), i.milliseconds = f % 1e3, a = r(f / 1e3), i.seconds = a % 60, b = r(a / 60), 
                    i.minutes = b % 60, c = r(b / 60), i.hours = c % 24, g += r(c / 24), e = r(Nc(g)), 
                    h += e, g -= Lc(Oc(e)), d = r(h / 12), h %= 12, i.days = g, i.months = h, i.years = d, 
                    this;
                }
                function Nc(a) {
                    return 4800 * a / 146097;
                }
                function Oc(a) {
                    return 146097 * a / 4800;
                }
                function Pc(a) {
                    var b, c, d = this._milliseconds;
                    if (a = L(a), "month" === a || "year" === a) return b = this._days + d / 864e5, 
                    c = this._months + Nc(b), "month" === a ? c : c / 12;
                    switch (b = this._days + Math.round(Oc(this._months)), a) {
                      case "week":
                        return b / 7 + d / 6048e5;

                      case "day":
                        return b + d / 864e5;

                      case "hour":
                        return 24 * b + d / 36e5;

                      case "minute":
                        return 1440 * b + d / 6e4;

                      case "second":
                        return 86400 * b + d / 1e3;

                      case "millisecond":
                        return Math.floor(864e5 * b) + d;

                      default:
                        throw new Error("Unknown unit " + a);
                    }
                }
                function Qc() {
                    return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * s(this._months / 12);
                }
                function Rc(a) {
                    return function() {
                        return this.as(a);
                    };
                }
                function Sc(a) {
                    return a = L(a), this[a + "s"]();
                }
                function Tc(a) {
                    return function() {
                        return this._data[a];
                    };
                }
                function Uc() {
                    return r(this.days() / 7);
                }
                function Vc(a, b, c, d, e) {
                    return e.relativeTime(b || 1, !!c, a, d);
                }
                function Wc(a, b, c) {
                    var d = db(a).abs(), e = Oe(d.as("s")), f = Oe(d.as("m")), g = Oe(d.as("h")), h = Oe(d.as("d")), i = Oe(d.as("M")), j = Oe(d.as("y")), k = e < Pe.s && [ "s", e ] || 1 >= f && [ "m" ] || f < Pe.m && [ "mm", f ] || 1 >= g && [ "h" ] || g < Pe.h && [ "hh", g ] || 1 >= h && [ "d" ] || h < Pe.d && [ "dd", h ] || 1 >= i && [ "M" ] || i < Pe.M && [ "MM", i ] || 1 >= j && [ "y" ] || [ "yy", j ];
                    return k[2] = b, k[3] = +a > 0, k[4] = c, Vc.apply(null, k);
                }
                function Xc(a, b) {
                    return void 0 === Pe[a] ? !1 : void 0 === b ? Pe[a] : (Pe[a] = b, !0);
                }
                function Yc(a) {
                    var b = this.localeData(), c = Wc(this, !a, b);
                    return a && (c = b.pastFuture(+this, c)), b.postformat(c);
                }
                function Zc() {
                    var a, b, c, d = Qe(this._milliseconds) / 1e3, e = Qe(this._days), f = Qe(this._months);
                    a = r(d / 60), b = r(a / 60), d %= 60, a %= 60, c = r(f / 12), f %= 12;
                    var g = c, h = f, i = e, j = b, k = a, l = d, m = this.asSeconds();
                    return m ? (0 > m ? "-" : "") + "P" + (g ? g + "Y" : "") + (h ? h + "M" : "") + (i ? i + "D" : "") + (j || k || l ? "T" : "") + (j ? j + "H" : "") + (k ? k + "M" : "") + (l ? l + "S" : "") : "P0D";
                }
                var $c, _c = b.momentProperties = [], ad = !1, bd = {};
                b.suppressDeprecationWarnings = !1;
                var cd, dd = {}, ed = {}, fd = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, gd = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, hd = {}, id = {}, jd = /\d/, kd = /\d\d/, ld = /\d{3}/, md = /\d{4}/, nd = /[+-]?\d{6}/, od = /\d\d?/, pd = /\d\d\d\d?/, qd = /\d\d\d\d\d\d?/, rd = /\d{1,3}/, sd = /\d{1,4}/, td = /[+-]?\d{1,6}/, ud = /\d+/, vd = /[+-]?\d+/, wd = /Z|[+-]\d\d:?\d\d/gi, xd = /Z|[+-]\d\d(?::?\d\d)?/gi, yd = /[+-]?\d+(\.\d{1,3})?/, zd = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, Ad = {}, Bd = {}, Cd = 0, Dd = 1, Ed = 2, Fd = 3, Gd = 4, Hd = 5, Id = 6, Jd = 7, Kd = 8;
                S("M", [ "MM", 2 ], "Mo", function() {
                    return this.month() + 1;
                }), S("MMM", 0, 0, function(a) {
                    return this.localeData().monthsShort(this, a);
                }), S("MMMM", 0, 0, function(a) {
                    return this.localeData().months(this, a);
                }), K("month", "M"), X("M", od), X("MM", od, kd), X("MMM", function(a, b) {
                    return b.monthsShortRegex(a);
                }), X("MMMM", function(a, b) {
                    return b.monthsRegex(a);
                }), _([ "M", "MM" ], function(a, b) {
                    b[Dd] = s(a) - 1;
                }), _([ "MMM", "MMMM" ], function(a, b, c, d) {
                    var e = c._locale.monthsParse(a, d, c._strict);
                    null != e ? b[Dd] = e : k(c).invalidMonth = a;
                });
                var Ld = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/, Md = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), Nd = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), Od = zd, Pd = zd, Qd = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, Rd = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, Sd = /Z|[+-]\d\d(?::?\d\d)?/, Td = [ [ "YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/ ], [ "YYYY-MM-DD", /\d{4}-\d\d-\d\d/ ], [ "GGGG-[W]WW-E", /\d{4}-W\d\d-\d/ ], [ "GGGG-[W]WW", /\d{4}-W\d\d/, !1 ], [ "YYYY-DDD", /\d{4}-\d{3}/ ], [ "YYYY-MM", /\d{4}-\d\d/, !1 ], [ "YYYYYYMMDD", /[+-]\d{10}/ ], [ "YYYYMMDD", /\d{8}/ ], [ "GGGG[W]WWE", /\d{4}W\d{3}/ ], [ "GGGG[W]WW", /\d{4}W\d{2}/, !1 ], [ "YYYYDDD", /\d{7}/ ] ], Ud = [ [ "HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/ ], [ "HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/ ], [ "HH:mm:ss", /\d\d:\d\d:\d\d/ ], [ "HH:mm", /\d\d:\d\d/ ], [ "HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/ ], [ "HHmmss,SSSS", /\d\d\d\d\d\d,\d+/ ], [ "HHmmss", /\d\d\d\d\d\d/ ], [ "HHmm", /\d\d\d\d/ ], [ "HH", /\d\d/ ] ], Vd = /^\/?Date\((\-?\d+)/i;
                b.createFromInputFallback = v("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(a) {
                    a._d = new Date(a._i + (a._useUTC ? " UTC" : ""));
                }), S("Y", 0, 0, function() {
                    var a = this.year();
                    return 9999 >= a ? "" + a : "+" + a;
                }), S(0, [ "YY", 2 ], 0, function() {
                    return this.year() % 100;
                }), S(0, [ "YYYY", 4 ], 0, "year"), S(0, [ "YYYYY", 5 ], 0, "year"), S(0, [ "YYYYYY", 6, !0 ], 0, "year"), 
                K("year", "y"), X("Y", vd), X("YY", od, kd), X("YYYY", sd, md), X("YYYYY", td, nd), 
                X("YYYYYY", td, nd), _([ "YYYYY", "YYYYYY" ], Cd), _("YYYY", function(a, c) {
                    c[Cd] = 2 === a.length ? b.parseTwoDigitYear(a) : s(a);
                }), _("YY", function(a, c) {
                    c[Cd] = b.parseTwoDigitYear(a);
                }), _("Y", function(a, b) {
                    b[Cd] = parseInt(a, 10);
                }), b.parseTwoDigitYear = function(a) {
                    return s(a) + (s(a) > 68 ? 1900 : 2e3);
                };
                var Wd = N("FullYear", !1);
                b.ISO_8601 = function() {};
                var Xd = v("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
                    var a = Ka.apply(null, arguments);
                    return this.isValid() && a.isValid() ? this > a ? this : a : m();
                }), Yd = v("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
                    var a = Ka.apply(null, arguments);
                    return this.isValid() && a.isValid() ? a > this ? this : a : m();
                }), Zd = function() {
                    return Date.now ? Date.now() : +new Date();
                };
                Qa("Z", ":"), Qa("ZZ", ""), X("Z", xd), X("ZZ", xd), _([ "Z", "ZZ" ], function(a, b, c) {
                    c._useUTC = !0, c._tzm = Ra(xd, a);
                });
                var $d = /([\+\-]|\d\d)/gi;
                b.updateOffset = function() {};
                var _d = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/, ae = /^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;
                db.fn = Oa.prototype;
                var be = ib(1, "add"), ce = ib(-1, "subtract");
                b.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
                var de = v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(a) {
                    return void 0 === a ? this.localeData() : this.locale(a);
                });
                S(0, [ "gg", 2 ], 0, function() {
                    return this.weekYear() % 100;
                }), S(0, [ "GG", 2 ], 0, function() {
                    return this.isoWeekYear() % 100;
                }), Pb("gggg", "weekYear"), Pb("ggggg", "weekYear"), Pb("GGGG", "isoWeekYear"), 
                Pb("GGGGG", "isoWeekYear"), K("weekYear", "gg"), K("isoWeekYear", "GG"), X("G", vd), 
                X("g", vd), X("GG", od, kd), X("gg", od, kd), X("GGGG", sd, md), X("gggg", sd, md), 
                X("GGGGG", td, nd), X("ggggg", td, nd), aa([ "gggg", "ggggg", "GGGG", "GGGGG" ], function(a, b, c, d) {
                    b[d.substr(0, 2)] = s(a);
                }), aa([ "gg", "GG" ], function(a, c, d, e) {
                    c[e] = b.parseTwoDigitYear(a);
                }), S("Q", 0, "Qo", "quarter"), K("quarter", "Q"), X("Q", jd), _("Q", function(a, b) {
                    b[Dd] = 3 * (s(a) - 1);
                }), S("w", [ "ww", 2 ], "wo", "week"), S("W", [ "WW", 2 ], "Wo", "isoWeek"), K("week", "w"), 
                K("isoWeek", "W"), X("w", od), X("ww", od, kd), X("W", od), X("WW", od, kd), aa([ "w", "ww", "W", "WW" ], function(a, b, c, d) {
                    b[d.substr(0, 1)] = s(a);
                });
                var ee = {
                    dow: 0,
                    doy: 6
                };
                S("D", [ "DD", 2 ], "Do", "date"), K("date", "D"), X("D", od), X("DD", od, kd), 
                X("Do", function(a, b) {
                    return a ? b._ordinalParse : b._ordinalParseLenient;
                }), _([ "D", "DD" ], Ed), _("Do", function(a, b) {
                    b[Ed] = s(a.match(od)[0], 10);
                });
                var fe = N("Date", !0);
                S("d", 0, "do", "day"), S("dd", 0, 0, function(a) {
                    return this.localeData().weekdaysMin(this, a);
                }), S("ddd", 0, 0, function(a) {
                    return this.localeData().weekdaysShort(this, a);
                }), S("dddd", 0, 0, function(a) {
                    return this.localeData().weekdays(this, a);
                }), S("e", 0, 0, "weekday"), S("E", 0, 0, "isoWeekday"), K("day", "d"), K("weekday", "e"), 
                K("isoWeekday", "E"), X("d", od), X("e", od), X("E", od), X("dd", zd), X("ddd", zd), 
                X("dddd", zd), aa([ "dd", "ddd", "dddd" ], function(a, b, c, d) {
                    var e = c._locale.weekdaysParse(a, d, c._strict);
                    null != e ? b.d = e : k(c).invalidWeekday = a;
                }), aa([ "d", "e", "E" ], function(a, b, c, d) {
                    b[d] = s(a);
                });
                var ge = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), he = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), ie = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
                S("DDD", [ "DDDD", 3 ], "DDDo", "dayOfYear"), K("dayOfYear", "DDD"), X("DDD", rd), 
                X("DDDD", ld), _([ "DDD", "DDDD" ], function(a, b, c) {
                    c._dayOfYear = s(a);
                }), S("H", [ "HH", 2 ], 0, "hour"), S("h", [ "hh", 2 ], 0, jc), S("hmm", 0, 0, function() {
                    return "" + jc.apply(this) + R(this.minutes(), 2);
                }), S("hmmss", 0, 0, function() {
                    return "" + jc.apply(this) + R(this.minutes(), 2) + R(this.seconds(), 2);
                }), S("Hmm", 0, 0, function() {
                    return "" + this.hours() + R(this.minutes(), 2);
                }), S("Hmmss", 0, 0, function() {
                    return "" + this.hours() + R(this.minutes(), 2) + R(this.seconds(), 2);
                }), kc("a", !0), kc("A", !1), K("hour", "h"), X("a", lc), X("A", lc), X("H", od), 
                X("h", od), X("HH", od, kd), X("hh", od, kd), X("hmm", pd), X("hmmss", qd), X("Hmm", pd), 
                X("Hmmss", qd), _([ "H", "HH" ], Fd), _([ "a", "A" ], function(a, b, c) {
                    c._isPm = c._locale.isPM(a), c._meridiem = a;
                }), _([ "h", "hh" ], function(a, b, c) {
                    b[Fd] = s(a), k(c).bigHour = !0;
                }), _("hmm", function(a, b, c) {
                    var d = a.length - 2;
                    b[Fd] = s(a.substr(0, d)), b[Gd] = s(a.substr(d)), k(c).bigHour = !0;
                }), _("hmmss", function(a, b, c) {
                    var d = a.length - 4, e = a.length - 2;
                    b[Fd] = s(a.substr(0, d)), b[Gd] = s(a.substr(d, 2)), b[Hd] = s(a.substr(e)), k(c).bigHour = !0;
                }), _("Hmm", function(a, b, c) {
                    var d = a.length - 2;
                    b[Fd] = s(a.substr(0, d)), b[Gd] = s(a.substr(d));
                }), _("Hmmss", function(a, b, c) {
                    var d = a.length - 4, e = a.length - 2;
                    b[Fd] = s(a.substr(0, d)), b[Gd] = s(a.substr(d, 2)), b[Hd] = s(a.substr(e));
                });
                var je = /[ap]\.?m?\.?/i, ke = N("Hours", !0);
                S("m", [ "mm", 2 ], 0, "minute"), K("minute", "m"), X("m", od), X("mm", od, kd), 
                _([ "m", "mm" ], Gd);
                var le = N("Minutes", !1);
                S("s", [ "ss", 2 ], 0, "second"), K("second", "s"), X("s", od), X("ss", od, kd), 
                _([ "s", "ss" ], Hd);
                var me = N("Seconds", !1);
                S("S", 0, 0, function() {
                    return ~~(this.millisecond() / 100);
                }), S(0, [ "SS", 2 ], 0, function() {
                    return ~~(this.millisecond() / 10);
                }), S(0, [ "SSS", 3 ], 0, "millisecond"), S(0, [ "SSSS", 4 ], 0, function() {
                    return 10 * this.millisecond();
                }), S(0, [ "SSSSS", 5 ], 0, function() {
                    return 100 * this.millisecond();
                }), S(0, [ "SSSSSS", 6 ], 0, function() {
                    return 1e3 * this.millisecond();
                }), S(0, [ "SSSSSSS", 7 ], 0, function() {
                    return 1e4 * this.millisecond();
                }), S(0, [ "SSSSSSSS", 8 ], 0, function() {
                    return 1e5 * this.millisecond();
                }), S(0, [ "SSSSSSSSS", 9 ], 0, function() {
                    return 1e6 * this.millisecond();
                }), K("millisecond", "ms"), X("S", rd, jd), X("SS", rd, kd), X("SSS", rd, ld);
                var ne;
                for (ne = "SSSS"; ne.length <= 9; ne += "S") X(ne, ud);
                for (ne = "S"; ne.length <= 9; ne += "S") _(ne, oc);
                var oe = N("Milliseconds", !1);
                S("z", 0, 0, "zoneAbbr"), S("zz", 0, 0, "zoneName");
                var pe = p.prototype;
                pe.add = be, pe.calendar = kb, pe.clone = lb, pe.diff = sb, pe.endOf = Eb, pe.format = wb, 
                pe.from = xb, pe.fromNow = yb, pe.to = zb, pe.toNow = Ab, pe.get = Q, pe.invalidAt = Nb, 
                pe.isAfter = mb, pe.isBefore = nb, pe.isBetween = ob, pe.isSame = pb, pe.isSameOrAfter = qb, 
                pe.isSameOrBefore = rb, pe.isValid = Lb, pe.lang = de, pe.locale = Bb, pe.localeData = Cb, 
                pe.max = Yd, pe.min = Xd, pe.parsingFlags = Mb, pe.set = Q, pe.startOf = Db, pe.subtract = ce, 
                pe.toArray = Ib, pe.toObject = Jb, pe.toDate = Hb, pe.toISOString = vb, pe.toJSON = Kb, 
                pe.toString = ub, pe.unix = Gb, pe.valueOf = Fb, pe.creationData = Ob, pe.year = Wd, 
                pe.isLeapYear = ta, pe.weekYear = Qb, pe.isoWeekYear = Rb, pe.quarter = pe.quarters = Wb, 
                pe.month = ha, pe.daysInMonth = ia, pe.week = pe.weeks = $b, pe.isoWeek = pe.isoWeeks = _b, 
                pe.weeksInYear = Tb, pe.isoWeeksInYear = Sb, pe.date = fe, pe.day = pe.days = fc, 
                pe.weekday = gc, pe.isoWeekday = hc, pe.dayOfYear = ic, pe.hour = pe.hours = ke, 
                pe.minute = pe.minutes = le, pe.second = pe.seconds = me, pe.millisecond = pe.milliseconds = oe, 
                pe.utcOffset = Ua, pe.utc = Wa, pe.local = Xa, pe.parseZone = Ya, pe.hasAlignedHourOffset = Za, 
                pe.isDST = $a, pe.isDSTShifted = _a, pe.isLocal = ab, pe.isUtcOffset = bb, pe.isUtc = cb, 
                pe.isUTC = cb, pe.zoneAbbr = pc, pe.zoneName = qc, pe.dates = v("dates accessor is deprecated. Use date instead.", fe), 
                pe.months = v("months accessor is deprecated. Use month instead", ha), pe.years = v("years accessor is deprecated. Use year instead", Wd), 
                pe.zone = v("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", Va);
                var qe = pe, re = {
                    sameDay: "[Today at] LT",
                    nextDay: "[Tomorrow at] LT",
                    nextWeek: "dddd [at] LT",
                    lastDay: "[Yesterday at] LT",
                    lastWeek: "[Last] dddd [at] LT",
                    sameElse: "L"
                }, se = {
                    LTS: "h:mm:ss A",
                    LT: "h:mm A",
                    L: "MM/DD/YYYY",
                    LL: "MMMM D, YYYY",
                    LLL: "MMMM D, YYYY h:mm A",
                    LLLL: "dddd, MMMM D, YYYY h:mm A"
                }, te = "Invalid date", ue = "%d", ve = /\d{1,2}/, we = {
                    future: "in %s",
                    past: "%s ago",
                    s: "a few seconds",
                    m: "a minute",
                    mm: "%d minutes",
                    h: "an hour",
                    hh: "%d hours",
                    d: "a day",
                    dd: "%d days",
                    M: "a month",
                    MM: "%d months",
                    y: "a year",
                    yy: "%d years"
                }, xe = B.prototype;
                xe._calendar = re, xe.calendar = tc, xe._longDateFormat = se, xe.longDateFormat = uc, 
                xe._invalidDate = te, xe.invalidDate = vc, xe._ordinal = ue, xe.ordinal = wc, xe._ordinalParse = ve, 
                xe.preparse = xc, xe.postformat = xc, xe._relativeTime = we, xe.relativeTime = yc, 
                xe.pastFuture = zc, xe.set = z, xe.months = da, xe._months = Md, xe.monthsShort = ea, 
                xe._monthsShort = Nd, xe.monthsParse = fa, xe._monthsRegex = Pd, xe.monthsRegex = ka, 
                xe._monthsShortRegex = Od, xe.monthsShortRegex = ja, xe.week = Xb, xe._week = ee, 
                xe.firstDayOfYear = Zb, xe.firstDayOfWeek = Yb, xe.weekdays = bc, xe._weekdays = ge, 
                xe.weekdaysMin = dc, xe._weekdaysMin = ie, xe.weekdaysShort = cc, xe._weekdaysShort = he, 
                xe.weekdaysParse = ec, xe.isPM = mc, xe._meridiemParse = je, xe.meridiem = nc, F("en", {
                    ordinalParse: /\d{1,2}(th|st|nd|rd)/,
                    ordinal: function(a) {
                        var b = a % 10, c = 1 === s(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
                        return a + c;
                    }
                }), b.lang = v("moment.lang is deprecated. Use moment.locale instead.", F), b.langData = v("moment.langData is deprecated. Use moment.localeData instead.", I);
                var ye = Math.abs, ze = Rc("ms"), Ae = Rc("s"), Be = Rc("m"), Ce = Rc("h"), De = Rc("d"), Ee = Rc("w"), Fe = Rc("M"), Ge = Rc("y"), He = Tc("milliseconds"), Ie = Tc("seconds"), Je = Tc("minutes"), Ke = Tc("hours"), Le = Tc("days"), Me = Tc("months"), Ne = Tc("years"), Oe = Math.round, Pe = {
                    s: 45,
                    m: 45,
                    h: 22,
                    d: 26,
                    M: 11
                }, Qe = Math.abs, Re = Oa.prototype;
                Re.abs = Hc, Re.add = Jc, Re.subtract = Kc, Re.as = Pc, Re.asMilliseconds = ze, 
                Re.asSeconds = Ae, Re.asMinutes = Be, Re.asHours = Ce, Re.asDays = De, Re.asWeeks = Ee, 
                Re.asMonths = Fe, Re.asYears = Ge, Re.valueOf = Qc, Re._bubble = Mc, Re.get = Sc, 
                Re.milliseconds = He, Re.seconds = Ie, Re.minutes = Je, Re.hours = Ke, Re.days = Le, 
                Re.weeks = Uc, Re.months = Me, Re.years = Ne, Re.humanize = Yc, Re.toISOString = Zc, 
                Re.toString = Zc, Re.toJSON = Zc, Re.locale = Bb, Re.localeData = Cb, Re.toIsoString = v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Zc), 
                Re.lang = de, S("X", 0, 0, "unix"), S("x", 0, 0, "valueOf"), X("x", vd), X("X", yd), 
                _("X", function(a, b, c) {
                    c._d = new Date(1e3 * parseFloat(a, 10));
                }), _("x", function(a, b, c) {
                    c._d = new Date(s(a));
                }), b.version = "2.12.0", c(Ka), b.fn = qe, b.min = Ma, b.max = Na, b.now = Zd, 
                b.utc = i, b.unix = rc, b.months = Cc, b.isDate = e, b.locale = F, b.invalid = m, 
                b.duration = db, b.isMoment = q, b.weekdays = Ec, b.parseZone = sc, b.localeData = I, 
                b.isDuration = Pa, b.monthsShort = Dc, b.weekdaysMin = Gc, b.defineLocale = G, b.updateLocale = H, 
                b.locales = J, b.weekdaysShort = Fc, b.normalizeUnits = L, b.relativeTimeThreshold = Xc, 
                b.prototype = qe;
                var Se = b;
                return Se;
            });
        }).call(b, c(4)(a));
    }, function(a, b) {
        a.exports = function(a) {
            return a.webpackPolyfill || (a.deprecate = function() {}, a.paths = [], a.children = [], 
            a.webpackPolyfill = 1), a;
        };
    }, function(a, b) {
        function c(a) {
            throw new Error("Cannot find module '" + a + "'.");
        }
        c.keys = function() {
            return [];
        }, c.resolve = c, a.exports = c, c.id = 5;
    }, function(a, b) {
        (function(b) {
            "use strict";
            function c(a, b, c) {
                var d = b && c || 0, e = 0;
                for (b = b || [], a.toLowerCase().replace(/[0-9a-f]{2}/g, function(a) {
                    16 > e && (b[d + e++] = l[a]);
                }); 16 > e; ) b[d + e++] = 0;
                return b;
            }
            function d(a, b) {
                var c = b || 0, d = k;
                return d[a[c++]] + d[a[c++]] + d[a[c++]] + d[a[c++]] + "-" + d[a[c++]] + d[a[c++]] + "-" + d[a[c++]] + d[a[c++]] + "-" + d[a[c++]] + d[a[c++]] + "-" + d[a[c++]] + d[a[c++]] + d[a[c++]] + d[a[c++]] + d[a[c++]] + d[a[c++]];
            }
            function e(a, b, c) {
                var e = b && c || 0, f = b || [];
                a = a || {};
                var g = void 0 !== a.clockseq ? a.clockseq : p, h = void 0 !== a.msecs ? a.msecs : new Date().getTime(), i = void 0 !== a.nsecs ? a.nsecs : r + 1, j = h - q + (i - r) / 1e4;
                if (0 > j && void 0 === a.clockseq && (g = g + 1 & 16383), (0 > j || h > q) && void 0 === a.nsecs && (i = 0), 
                i >= 1e4) throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
                q = h, r = i, p = g, h += 122192928e5;
                var k = (1e4 * (268435455 & h) + i) % 4294967296;
                f[e++] = k >>> 24 & 255, f[e++] = k >>> 16 & 255, f[e++] = k >>> 8 & 255, f[e++] = 255 & k;
                var l = h / 4294967296 * 1e4 & 268435455;
                f[e++] = l >>> 8 & 255, f[e++] = 255 & l, f[e++] = l >>> 24 & 15 | 16, f[e++] = l >>> 16 & 255, 
                f[e++] = g >>> 8 | 128, f[e++] = 255 & g;
                for (var m = a.node || o, n = 0; 6 > n; n++) f[e + n] = m[n];
                return b ? b : d(f);
            }
            function f(a, b, c) {
                var e = b && c || 0;
                "string" == typeof a && (b = "binary" == a ? new Array(16) : null, a = null), a = a || {};
                var f = a.random || (a.rng || g)();
                if (f[6] = 15 & f[6] | 64, f[8] = 63 & f[8] | 128, b) for (var h = 0; 16 > h; h++) b[e + h] = f[h];
                return b || d(f);
            }
            var g, h = "undefined" != typeof window ? window : "undefined" != typeof b ? b : null;
            if (h && h.crypto && crypto.getRandomValues) {
                var i = new Uint8Array(16);
                g = function() {
                    return crypto.getRandomValues(i), i;
                };
            }
            if (!g) {
                var j = new Array(16);
                g = function() {
                    for (var a, b = 0; 16 > b; b++) 0 === (3 & b) && (a = 4294967296 * Math.random()), 
                    j[b] = a >>> ((3 & b) << 3) & 255;
                    return j;
                };
            }
            for (var k = [], l = {}, m = 0; 256 > m; m++) k[m] = (m + 256).toString(16).substr(1), 
            l[k[m]] = m;
            var n = g(), o = [ 1 | n[0], n[1], n[2], n[3], n[4], n[5] ], p = 16383 & (n[6] << 8 | n[7]), q = 0, r = 0, s = f;
            s.v1 = e, s.v4 = f, s.parse = c, s.unparse = d, a.exports = s;
        }).call(b, function() {
            return this;
        }());
    }, function(a, b) {
        "use strict";
        b.prepareElements = function(a) {
            for (var b in a) a.hasOwnProperty(b) && (a[b].redundant = a[b].used, a[b].used = []);
        }, b.cleanupElements = function(a) {
            for (var b in a) if (a.hasOwnProperty(b) && a[b].redundant) {
                for (var c = 0; c < a[b].redundant.length; c++) a[b].redundant[c].parentNode.removeChild(a[b].redundant[c]);
                a[b].redundant = [];
            }
        }, b.resetElements = function(a) {
            b.prepareElements(a), b.cleanupElements(a), b.prepareElements(a);
        }, b.getSVGElement = function(a, b, c) {
            var d;
            return b.hasOwnProperty(a) ? b[a].redundant.length > 0 ? (d = b[a].redundant[0], 
            b[a].redundant.shift()) : (d = document.createElementNS("http://www.w3.org/2000/svg", a), 
            c.appendChild(d)) : (d = document.createElementNS("http://www.w3.org/2000/svg", a), 
            b[a] = {
                used: [],
                redundant: []
            }, c.appendChild(d)), b[a].used.push(d), d;
        }, b.getDOMElement = function(a, b, c, d) {
            var e;
            return b.hasOwnProperty(a) ? b[a].redundant.length > 0 ? (e = b[a].redundant[0], 
            b[a].redundant.shift()) : (e = document.createElement(a), void 0 !== d ? c.insertBefore(e, d) : c.appendChild(e)) : (e = document.createElement(a), 
            b[a] = {
                used: [],
                redundant: []
            }, void 0 !== d ? c.insertBefore(e, d) : c.appendChild(e)), b[a].used.push(e), e;
        }, b.drawPoint = function(a, c, d, e, f, g) {
            var h;
            if ("circle" == d.style ? (h = b.getSVGElement("circle", e, f), h.setAttributeNS(null, "cx", a), 
            h.setAttributeNS(null, "cy", c), h.setAttributeNS(null, "r", .5 * d.size)) : (h = b.getSVGElement("rect", e, f), 
            h.setAttributeNS(null, "x", a - .5 * d.size), h.setAttributeNS(null, "y", c - .5 * d.size), 
            h.setAttributeNS(null, "width", d.size), h.setAttributeNS(null, "height", d.size)), 
            void 0 !== d.styles && h.setAttributeNS(null, "style", d.styles), h.setAttributeNS(null, "class", d.className + " vis-point"), 
            g) {
                var i = b.getSVGElement("text", e, f);
                g.xOffset && (a += g.xOffset), g.yOffset && (c += g.yOffset), g.content && (i.textContent = g.content), 
                g.className && i.setAttributeNS(null, "class", g.className + " vis-label"), i.setAttributeNS(null, "x", a), 
                i.setAttributeNS(null, "y", c);
            }
            return h;
        }, b.drawBar = function(a, c, d, e, f, g, h, i) {
            if (0 != e) {
                0 > e && (e *= -1, c -= e);
                var j = b.getSVGElement("rect", g, h);
                j.setAttributeNS(null, "x", a - .5 * d), j.setAttributeNS(null, "y", c), j.setAttributeNS(null, "width", d), 
                j.setAttributeNS(null, "height", e), j.setAttributeNS(null, "class", f), i && j.setAttributeNS(null, "style", i);
            }
        };
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (a && !Array.isArray(a) && (b = a, a = null), this._options = b || {}, this._data = {}, 
            this.length = 0, this._fieldId = this._options.fieldId || "id", this._type = {}, 
            this._options.type) for (var c = Object.keys(this._options.type), d = 0, e = c.length; e > d; d++) {
                var f = c[d], g = this._options.type[f];
                "Date" == g || "ISODate" == g || "ASPDate" == g ? this._type[f] = "Date" : this._type[f] = g;
            }
            if (this._options.convert) throw new Error('Option "convert" is deprecated. Use "type" instead.');
            this._subscribers = {}, a && this.add(a), this.setOptions(b);
        }
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(1), g = c(9);
        d.prototype.setOptions = function(a) {
            a && void 0 !== a.queue && (a.queue === !1 ? this._queue && (this._queue.destroy(), 
            delete this._queue) : (this._queue || (this._queue = g.extend(this, {
                replace: [ "add", "update", "remove" ]
            })), "object" === e(a.queue) && this._queue.setOptions(a.queue)));
        }, d.prototype.on = function(a, b) {
            var c = this._subscribers[a];
            c || (c = [], this._subscribers[a] = c), c.push({
                callback: b
            });
        }, d.prototype.subscribe = function() {
            throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.");
        }, d.prototype.off = function(a, b) {
            var c = this._subscribers[a];
            c && (this._subscribers[a] = c.filter(function(a) {
                return a.callback != b;
            }));
        }, d.prototype.unsubscribe = function() {
            throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.");
        }, d.prototype._trigger = function(a, b, c) {
            if ("*" == a) throw new Error("Cannot trigger event *");
            var d = [];
            a in this._subscribers && (d = d.concat(this._subscribers[a])), "*" in this._subscribers && (d = d.concat(this._subscribers["*"]));
            for (var e = 0, f = d.length; f > e; e++) {
                var g = d[e];
                g.callback && g.callback(a, b, c || null);
            }
        }, d.prototype.add = function(a, b) {
            var c, d = [], e = this;
            if (Array.isArray(a)) for (var f = 0, g = a.length; g > f; f++) c = e._addItem(a[f]), 
            d.push(c); else {
                if (!(a instanceof Object)) throw new Error("Unknown dataType");
                c = e._addItem(a), d.push(c);
            }
            return d.length && this._trigger("add", {
                items: d
            }, b), d;
        }, d.prototype.update = function(a, b) {
            var c = [], d = [], e = [], g = [], h = this, i = h._fieldId, j = function(a) {
                var b = a[i];
                if (h._data[b]) {
                    var j = f.extend({}, h._data[b]);
                    b = h._updateItem(a), d.push(b), g.push(a), e.push(j);
                } else b = h._addItem(a), c.push(b);
            };
            if (Array.isArray(a)) for (var k = 0, l = a.length; l > k; k++) a[k] instanceof Object ? j(a[k]) : console.warn("Ignoring input item, which is not an object at index " + k); else {
                if (!(a instanceof Object)) throw new Error("Unknown dataType");
                j(a);
            }
            if (c.length && this._trigger("add", {
                items: c
            }, b), d.length) {
                var m = {
                    items: d,
                    oldData: e,
                    data: g
                };
                this._trigger("update", m, b);
            }
            return c.concat(d);
        }, d.prototype.get = function(a) {
            var b, c, d, e = this, g = f.getType(arguments[0]);
            "String" == g || "Number" == g ? (b = arguments[0], d = arguments[1]) : "Array" == g ? (c = arguments[0], 
            d = arguments[1]) : d = arguments[0];
            var h;
            if (d && d.returnType) {
                var i = [ "Array", "Object" ];
                h = -1 == i.indexOf(d.returnType) ? "Array" : d.returnType;
            } else h = "Array";
            var j, k, l, m, n, o = d && d.type || this._options.type, p = d && d.filter, q = [];
            if (void 0 != b) j = e._getItem(b, o), j && p && !p(j) && (j = null); else if (void 0 != c) for (m = 0, 
            n = c.length; n > m; m++) j = e._getItem(c[m], o), p && !p(j) || q.push(j); else for (k = Object.keys(this._data), 
            m = 0, n = k.length; n > m; m++) l = k[m], j = e._getItem(l, o), p && !p(j) || q.push(j);
            if (d && d.order && void 0 == b && this._sort(q, d.order), d && d.fields) {
                var r = d.fields;
                if (void 0 != b) j = this._filterFields(j, r); else for (m = 0, n = q.length; n > m; m++) q[m] = this._filterFields(q[m], r);
            }
            if ("Object" == h) {
                var s, t = {};
                for (m = 0, n = q.length; n > m; m++) s = q[m], t[s.id] = s;
                return t;
            }
            return void 0 != b ? j : q;
        }, d.prototype.getIds = function(a) {
            var b, c, d, e, f, g = this._data, h = a && a.filter, i = a && a.order, j = a && a.type || this._options.type, k = Object.keys(g), l = [];
            if (h) if (i) {
                for (f = [], b = 0, c = k.length; c > b; b++) d = k[b], e = this._getItem(d, j), 
                h(e) && f.push(e);
                for (this._sort(f, i), b = 0, c = f.length; c > b; b++) l.push(f[b][this._fieldId]);
            } else for (b = 0, c = k.length; c > b; b++) d = k[b], e = this._getItem(d, j), 
            h(e) && l.push(e[this._fieldId]); else if (i) {
                for (f = [], b = 0, c = k.length; c > b; b++) d = k[b], f.push(g[d]);
                for (this._sort(f, i), b = 0, c = f.length; c > b; b++) l.push(f[b][this._fieldId]);
            } else for (b = 0, c = k.length; c > b; b++) d = k[b], e = g[d], l.push(e[this._fieldId]);
            return l;
        }, d.prototype.getDataSet = function() {
            return this;
        }, d.prototype.forEach = function(a, b) {
            var c, d, e, f, g = b && b.filter, h = b && b.type || this._options.type, i = this._data, j = Object.keys(i);
            if (b && b.order) {
                var k = this.get(b);
                for (c = 0, d = k.length; d > c; c++) e = k[c], f = e[this._fieldId], a(e, f);
            } else for (c = 0, d = j.length; d > c; c++) f = j[c], e = this._getItem(f, h), 
            g && !g(e) || a(e, f);
        }, d.prototype.map = function(a, b) {
            var c, d, e, f, g = b && b.filter, h = b && b.type || this._options.type, i = [], j = this._data, k = Object.keys(j);
            for (c = 0, d = k.length; d > c; c++) e = k[c], f = this._getItem(e, h), g && !g(f) || i.push(a(f, e));
            return b && b.order && this._sort(i, b.order), i;
        }, d.prototype._filterFields = function(a, b) {
            if (!a) return a;
            var c, d, e = {}, f = Object.keys(a), g = f.length;
            if (Array.isArray(b)) for (c = 0; g > c; c++) d = f[c], -1 != b.indexOf(d) && (e[d] = a[d]); else for (c = 0; g > c; c++) d = f[c], 
            b.hasOwnProperty(d) && (e[b[d]] = a[d]);
            return e;
        }, d.prototype._sort = function(a, b) {
            if (f.isString(b)) {
                var c = b;
                a.sort(function(a, b) {
                    var d = a[c], e = b[c];
                    return d > e ? 1 : e > d ? -1 : 0;
                });
            } else {
                if ("function" != typeof b) throw new TypeError("Order must be a function or a string");
                a.sort(b);
            }
        }, d.prototype.remove = function(a, b) {
            var c, d, e, f = [];
            if (Array.isArray(a)) for (c = 0, d = a.length; d > c; c++) e = this._remove(a[c]), 
            null != e && f.push(e); else e = this._remove(a), null != e && f.push(e);
            return f.length && this._trigger("remove", {
                items: f
            }, b), f;
        }, d.prototype._remove = function(a) {
            if (f.isNumber(a) || f.isString(a)) {
                if (this._data[a]) return delete this._data[a], this.length--, a;
            } else if (a instanceof Object) {
                var b = a[this._fieldId];
                if (void 0 !== b && this._data[b]) return delete this._data[b], this.length--, b;
            }
            return null;
        }, d.prototype.clear = function(a) {
            var b = Object.keys(this._data);
            return this._data = {}, this.length = 0, this._trigger("remove", {
                items: b
            }, a), b;
        }, d.prototype.max = function(a) {
            var b, c, d = this._data, e = Object.keys(d), f = null, g = null;
            for (b = 0, c = e.length; c > b; b++) {
                var h = e[b], i = d[h], j = i[a];
                null != j && (!f || j > g) && (f = i, g = j);
            }
            return f;
        }, d.prototype.min = function(a) {
            var b, c, d = this._data, e = Object.keys(d), f = null, g = null;
            for (b = 0, c = e.length; c > b; b++) {
                var h = e[b], i = d[h], j = i[a];
                null != j && (!f || g > j) && (f = i, g = j);
            }
            return f;
        }, d.prototype.distinct = function(a) {
            var b, c, d, e = this._data, g = Object.keys(e), h = [], i = this._options.type && this._options.type[a] || null, j = 0;
            for (b = 0, d = g.length; d > b; b++) {
                var k = g[b], l = e[k], m = l[a], n = !1;
                for (c = 0; j > c; c++) if (h[c] == m) {
                    n = !0;
                    break;
                }
                n || void 0 === m || (h[j] = m, j++);
            }
            if (i) for (b = 0, d = h.length; d > b; b++) h[b] = f.convert(h[b], i);
            return h;
        }, d.prototype._addItem = function(a) {
            var b = a[this._fieldId];
            if (void 0 != b) {
                if (this._data[b]) throw new Error("Cannot add item: item with id " + b + " already exists");
            } else b = f.randomUUID(), a[this._fieldId] = b;
            var c, d, e = {}, g = Object.keys(a);
            for (c = 0, d = g.length; d > c; c++) {
                var h = g[c], i = this._type[h];
                e[h] = f.convert(a[h], i);
            }
            return this._data[b] = e, this.length++, b;
        }, d.prototype._getItem = function(a, b) {
            var c, d, e, g, h = this._data[a];
            if (!h) return null;
            var i = {}, j = Object.keys(h);
            if (b) for (e = 0, g = j.length; g > e; e++) c = j[e], d = h[c], i[c] = f.convert(d, b[c]); else for (e = 0, 
            g = j.length; g > e; e++) c = j[e], d = h[c], i[c] = d;
            return i;
        }, d.prototype._updateItem = function(a) {
            var b = a[this._fieldId];
            if (void 0 == b) throw new Error("Cannot update item: item has no id (item: " + JSON.stringify(a) + ")");
            var c = this._data[b];
            if (!c) throw new Error("Cannot update item: no item with id " + b + " found");
            for (var d = Object.keys(a), e = 0, g = d.length; g > e; e++) {
                var h = d[e], i = this._type[h];
                c[h] = f.convert(a[h], i);
            }
            return b;
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        function c(a) {
            this.delay = null, this.max = 1 / 0, this._queue = [], this._timeout = null, this._extended = null, 
            this.setOptions(a);
        }
        c.prototype.setOptions = function(a) {
            a && "undefined" != typeof a.delay && (this.delay = a.delay), a && "undefined" != typeof a.max && (this.max = a.max), 
            this._flushIfNeeded();
        }, c.extend = function(a, b) {
            var d = new c(b);
            if (void 0 !== a.flush) throw new Error("Target object already has a property flush");
            a.flush = function() {
                d.flush();
            };
            var e = [ {
                name: "flush",
                original: void 0
            } ];
            if (b && b.replace) for (var f = 0; f < b.replace.length; f++) {
                var g = b.replace[f];
                e.push({
                    name: g,
                    original: a[g]
                }), d.replace(a, g);
            }
            return d._extended = {
                object: a,
                methods: e
            }, d;
        }, c.prototype.destroy = function() {
            if (this.flush(), this._extended) {
                for (var a = this._extended.object, b = this._extended.methods, c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.original ? a[d.name] = d.original : delete a[d.name];
                }
                this._extended = null;
            }
        }, c.prototype.replace = function(a, b) {
            var c = this, d = a[b];
            if (!d) throw new Error("Method " + b + " undefined");
            a[b] = function() {
                for (var a = [], b = 0; b < arguments.length; b++) a[b] = arguments[b];
                c.queue({
                    args: a,
                    fn: d,
                    context: this
                });
            };
        }, c.prototype.queue = function(a) {
            "function" == typeof a ? this._queue.push({
                fn: a
            }) : this._queue.push(a), this._flushIfNeeded();
        }, c.prototype._flushIfNeeded = function() {
            if (this._queue.length > this.max && this.flush(), clearTimeout(this._timeout), 
            this.queue.length > 0 && "number" == typeof this.delay) {
                var a = this;
                this._timeout = setTimeout(function() {
                    a.flush();
                }, this.delay);
            }
        }, c.prototype.flush = function() {
            for (;this._queue.length > 0; ) {
                var a = this._queue.shift();
                a.fn.apply(a.context || a.fn, a.args || []);
            }
        }, a.exports = c;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this._data = null, this._ids = {}, this.length = 0, this._options = b || {}, this._fieldId = "id", 
            this._subscribers = {};
            var c = this;
            this.listener = function() {
                c._onEvent.apply(c, arguments);
            }, this.setData(a);
        }
        var e = c(1), f = c(8);
        d.prototype.setData = function(a) {
            var b, c, d, e;
            if (this._data && (this._data.off && this._data.off("*", this.listener), b = Object.keys(this._ids), 
            this._ids = {}, this.length = 0, this._trigger("remove", {
                items: b
            })), this._data = a, this._data) {
                for (this._fieldId = this._options.fieldId || this._data && this._data.options && this._data.options.fieldId || "id", 
                b = this._data.getIds({
                    filter: this._options && this._options.filter
                }), d = 0, e = b.length; e > d; d++) c = b[d], this._ids[c] = !0;
                this.length = b.length, this._trigger("add", {
                    items: b
                }), this._data.on && this._data.on("*", this.listener);
            }
        }, d.prototype.refresh = function() {
            var a, b, c, d = this._data.getIds({
                filter: this._options && this._options.filter
            }), e = Object.keys(this._ids), f = {}, g = [], h = [];
            for (b = 0, c = d.length; c > b; b++) a = d[b], f[a] = !0, this._ids[a] || (g.push(a), 
            this._ids[a] = !0);
            for (b = 0, c = e.length; c > b; b++) a = e[b], f[a] || (h.push(a), delete this._ids[a]);
            this.length += g.length - h.length, g.length && this._trigger("add", {
                items: g
            }), h.length && this._trigger("remove", {
                items: h
            });
        }, d.prototype.get = function(a) {
            var b, c, d, f = this, g = e.getType(arguments[0]);
            "String" == g || "Number" == g || "Array" == g ? (b = arguments[0], c = arguments[1], 
            d = arguments[2]) : (c = arguments[0], d = arguments[1]);
            var h = e.extend({}, this._options, c);
            this._options.filter && c && c.filter && (h.filter = function(a) {
                return f._options.filter(a) && c.filter(a);
            });
            var i = [];
            return void 0 != b && i.push(b), i.push(h), i.push(d), this._data && this._data.get.apply(this._data, i);
        }, d.prototype.getIds = function(a) {
            var b;
            if (this._data) {
                var c, d = this._options.filter;
                c = a && a.filter ? d ? function(b) {
                    return d(b) && a.filter(b);
                } : a.filter : d, b = this._data.getIds({
                    filter: c,
                    order: a && a.order
                });
            } else b = [];
            return b;
        }, d.prototype.map = function(a, b) {
            var c = [];
            if (this._data) {
                var d, e = this._options.filter;
                d = b && b.filter ? e ? function(a) {
                    return e(a) && b.filter(a);
                } : b.filter : e, c = this._data.map(a, {
                    filter: d,
                    order: b && b.order
                });
            } else c = [];
            return c;
        }, d.prototype.getDataSet = function() {
            for (var a = this; a instanceof d; ) a = a._data;
            return a || null;
        }, d.prototype._onEvent = function(a, b, c) {
            var d, e, f, g, h = b && b.items, i = this._data, j = [], k = [], l = [], m = [];
            if (h && i) {
                switch (a) {
                  case "add":
                    for (d = 0, e = h.length; e > d; d++) f = h[d], g = this.get(f), g && (this._ids[f] = !0, 
                    k.push(f));
                    break;

                  case "update":
                    for (d = 0, e = h.length; e > d; d++) f = h[d], g = this.get(f), g ? this._ids[f] ? (l.push(f), 
                    j.push(b.data[d])) : (this._ids[f] = !0, k.push(f)) : this._ids[f] && (delete this._ids[f], 
                    m.push(f));
                    break;

                  case "remove":
                    for (d = 0, e = h.length; e > d; d++) f = h[d], this._ids[f] && (delete this._ids[f], 
                    m.push(f));
                }
                this.length += k.length - m.length, k.length && this._trigger("add", {
                    items: k
                }, c), l.length && this._trigger("update", {
                    items: l,
                    data: j
                }, c), m.length && this._trigger("remove", {
                    items: m
                }, c);
            }
        }, d.prototype.on = f.prototype.on, d.prototype.off = f.prototype.off, d.prototype._trigger = f.prototype._trigger, 
        d.prototype.subscribe = d.prototype.on, d.prototype.unsubscribe = d.prototype.off, 
        a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            if (!(this instanceof d)) throw new SyntaxError("Constructor must be called with the new operator");
            this.containerElement = a, this.width = "400px", this.height = "400px", this.margin = 10, 
            this.defaultXCenter = "55%", this.defaultYCenter = "50%", this.xLabel = "x", this.yLabel = "y", 
            this.zLabel = "z";
            var e = function(a) {
                return a;
            };
            this.xValueLabel = e, this.yValueLabel = e, this.zValueLabel = e, this.filterLabel = "time", 
            this.legendLabel = "value", this.style = d.STYLE.DOT, this.showPerspective = !0, 
            this.showGrid = !0, this.keepAspectRatio = !0, this.showShadow = !1, this.showGrayBottom = !1, 
            this.showTooltip = !1, this.verticalRatio = .5, this.animationInterval = 1e3, this.animationPreload = !1, 
            this.camera = new n(), this.camera.setArmRotation(1, .5), this.camera.setArmLength(1.7), 
            this.eye = new l(0, 0, -1), this.dataTable = null, this.dataPoints = null, this.colX = void 0, 
            this.colY = void 0, this.colZ = void 0, this.colValue = void 0, this.colFilter = void 0, 
            this.xMin = 0, this.xStep = void 0, this.xMax = 1, this.yMin = 0, this.yStep = void 0, 
            this.yMax = 1, this.zMin = 0, this.zStep = void 0, this.zMax = 1, this.valueMin = 0, 
            this.valueMax = 1, this.xBarWidth = 1, this.yBarWidth = 1, this.axisColor = "#4D4D4D", 
            this.gridColor = "#D3D3D3", this.dataColor = {
                fill: "#7DC1FF",
                stroke: "#3267D2",
                strokeWidth: 1
            }, this.dotSizeRatio = .02, this.create(), this.setOptions(c), b && this.setData(b);
        }
        function e(a) {
            return "clientX" in a ? a.clientX : a.targetTouches[0] && a.targetTouches[0].clientX || 0;
        }
        function f(a) {
            return "clientY" in a ? a.clientY : a.targetTouches[0] && a.targetTouches[0].clientY || 0;
        }
        var g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, h = c(12), i = c(8), j = c(10), k = c(1), l = c(13), m = c(14), n = c(15), o = c(16), p = c(17), q = c(18);
        h(d.prototype), d.prototype._setScale = function() {
            this.scale = new l(1 / (this.xMax - this.xMin), 1 / (this.yMax - this.yMin), 1 / (this.zMax - this.zMin)), 
            this.keepAspectRatio && (this.scale.x < this.scale.y ? this.scale.y = this.scale.x : this.scale.x = this.scale.y), 
            this.scale.z *= this.verticalRatio, this.scale.value = 1 / (this.valueMax - this.valueMin);
            var a = (this.xMax + this.xMin) / 2 * this.scale.x, b = (this.yMax + this.yMin) / 2 * this.scale.y, c = (this.zMax + this.zMin) / 2 * this.scale.z;
            this.camera.setArmLocation(a, b, c);
        }, d.prototype._convert3Dto2D = function(a) {
            var b = this._convertPointToTranslation(a);
            return this._convertTranslationToScreen(b);
        }, d.prototype._convertPointToTranslation = function(a) {
            var b = a.x * this.scale.x, c = a.y * this.scale.y, d = a.z * this.scale.z, e = this.camera.getCameraLocation().x, f = this.camera.getCameraLocation().y, g = this.camera.getCameraLocation().z, h = Math.sin(this.camera.getCameraRotation().x), i = Math.cos(this.camera.getCameraRotation().x), j = Math.sin(this.camera.getCameraRotation().y), k = Math.cos(this.camera.getCameraRotation().y), m = Math.sin(this.camera.getCameraRotation().z), n = Math.cos(this.camera.getCameraRotation().z), o = k * (m * (c - f) + n * (b - e)) - j * (d - g), p = h * (k * (d - g) + j * (m * (c - f) + n * (b - e))) + i * (n * (c - f) - m * (b - e)), q = i * (k * (d - g) + j * (m * (c - f) + n * (b - e))) - h * (n * (c - f) - m * (b - e));
            return new l(o, p, q);
        }, d.prototype._convertTranslationToScreen = function(a) {
            var b, c, d = this.eye.x, e = this.eye.y, f = this.eye.z, g = a.x, h = a.y, i = a.z;
            return this.showPerspective ? (b = (g - d) * (f / i), c = (h - e) * (f / i)) : (b = g * -(f / this.camera.getArmLength()), 
            c = h * -(f / this.camera.getArmLength())), new m(this.xcenter + b * this.frame.canvas.clientWidth, this.ycenter - c * this.frame.canvas.clientWidth);
        }, d.prototype._setBackgroundColor = function(a) {
            var b = "white", c = "gray", d = 1;
            if ("string" == typeof a) b = a, c = "none", d = 0; else if ("object" === ("undefined" == typeof a ? "undefined" : g(a))) void 0 !== a.fill && (b = a.fill), 
            void 0 !== a.stroke && (c = a.stroke), void 0 !== a.strokeWidth && (d = a.strokeWidth); else if (void 0 !== a) throw "Unsupported type of backgroundColor";
            this.frame.style.backgroundColor = b, this.frame.style.borderColor = c, this.frame.style.borderWidth = d + "px", 
            this.frame.style.borderStyle = "solid";
        }, d.STYLE = {
            BAR: 0,
            BARCOLOR: 1,
            BARSIZE: 2,
            DOT: 3,
            DOTLINE: 4,
            DOTCOLOR: 5,
            DOTSIZE: 6,
            GRID: 7,
            LINE: 8,
            SURFACE: 9
        }, d.prototype._getStyleNumber = function(a) {
            switch (a) {
              case "dot":
                return d.STYLE.DOT;

              case "dot-line":
                return d.STYLE.DOTLINE;

              case "dot-color":
                return d.STYLE.DOTCOLOR;

              case "dot-size":
                return d.STYLE.DOTSIZE;

              case "line":
                return d.STYLE.LINE;

              case "grid":
                return d.STYLE.GRID;

              case "surface":
                return d.STYLE.SURFACE;

              case "bar":
                return d.STYLE.BAR;

              case "bar-color":
                return d.STYLE.BARCOLOR;

              case "bar-size":
                return d.STYLE.BARSIZE;
            }
            return -1;
        }, d.prototype._determineColumnIndexes = function(a, b) {
            if (this.style === d.STYLE.DOT || this.style === d.STYLE.DOTLINE || this.style === d.STYLE.LINE || this.style === d.STYLE.GRID || this.style === d.STYLE.SURFACE || this.style === d.STYLE.BAR) this.colX = 0, 
            this.colY = 1, this.colZ = 2, this.colValue = void 0, a.getNumberOfColumns() > 3 && (this.colFilter = 3); else {
                if (this.style !== d.STYLE.DOTCOLOR && this.style !== d.STYLE.DOTSIZE && this.style !== d.STYLE.BARCOLOR && this.style !== d.STYLE.BARSIZE) throw 'Unknown style "' + this.style + '"';
                this.colX = 0, this.colY = 1, this.colZ = 2, this.colValue = 3, a.getNumberOfColumns() > 4 && (this.colFilter = 4);
            }
        }, d.prototype.getNumberOfRows = function(a) {
            return a.length;
        }, d.prototype.getNumberOfColumns = function(a) {
            var b = 0;
            for (var c in a[0]) a[0].hasOwnProperty(c) && b++;
            return b;
        }, d.prototype.getDistinctValues = function(a, b) {
            for (var c = [], d = 0; d < a.length; d++) -1 == c.indexOf(a[d][b]) && c.push(a[d][b]);
            return c;
        }, d.prototype.getColumnRange = function(a, b) {
            for (var c = {
                min: a[0][b],
                max: a[0][b]
            }, d = 0; d < a.length; d++) c.min > a[d][b] && (c.min = a[d][b]), c.max < a[d][b] && (c.max = a[d][b]);
            return c;
        }, d.prototype._dataInitialize = function(a, b) {
            var c = this;
            if (this.dataSet && this.dataSet.off("*", this._onChange), void 0 !== a) {
                Array.isArray(a) && (a = new i(a));
                var e;
                if (!(a instanceof i || a instanceof j)) throw new Error("Array, DataSet, or DataView expected");
                if (e = a.get(), 0 != e.length) {
                    this.dataSet = a, this.dataTable = e, this._onChange = function() {
                        c.setData(c.dataSet);
                    }, this.dataSet.on("*", this._onChange), this.colX = "x", this.colY = "y", this.colZ = "z", 
                    this.colValue = "style", this.colFilter = "filter", e[0].hasOwnProperty("filter") && void 0 === this.dataFilter && (this.dataFilter = new o(a, this.colFilter, this), 
                    this.dataFilter.setOnLoadCallback(function() {
                        c.redraw();
                    }));
                    var f = this.style == d.STYLE.BAR || this.style == d.STYLE.BARCOLOR || this.style == d.STYLE.BARSIZE;
                    if (f) {
                        if (void 0 !== this.defaultXBarWidth) this.xBarWidth = this.defaultXBarWidth; else {
                            var g = this.getDistinctValues(e, this.colX);
                            this.xBarWidth = g[1] - g[0] || 1;
                        }
                        if (void 0 !== this.defaultYBarWidth) this.yBarWidth = this.defaultYBarWidth; else {
                            var h = this.getDistinctValues(e, this.colY);
                            this.yBarWidth = h[1] - h[0] || 1;
                        }
                    }
                    var k = this.getColumnRange(e, this.colX);
                    f && (k.min -= this.xBarWidth / 2, k.max += this.xBarWidth / 2), this.xMin = void 0 !== this.defaultXMin ? this.defaultXMin : k.min, 
                    this.xMax = void 0 !== this.defaultXMax ? this.defaultXMax : k.max, this.xMax <= this.xMin && (this.xMax = this.xMin + 1), 
                    this.xStep = void 0 !== this.defaultXStep ? this.defaultXStep : (this.xMax - this.xMin) / 5;
                    var l = this.getColumnRange(e, this.colY);
                    f && (l.min -= this.yBarWidth / 2, l.max += this.yBarWidth / 2), this.yMin = void 0 !== this.defaultYMin ? this.defaultYMin : l.min, 
                    this.yMax = void 0 !== this.defaultYMax ? this.defaultYMax : l.max, this.yMax <= this.yMin && (this.yMax = this.yMin + 1), 
                    this.yStep = void 0 !== this.defaultYStep ? this.defaultYStep : (this.yMax - this.yMin) / 5;
                    var m = this.getColumnRange(e, this.colZ);
                    if (this.zMin = void 0 !== this.defaultZMin ? this.defaultZMin : m.min, this.zMax = void 0 !== this.defaultZMax ? this.defaultZMax : m.max, 
                    this.zMax <= this.zMin && (this.zMax = this.zMin + 1), this.zStep = void 0 !== this.defaultZStep ? this.defaultZStep : (this.zMax - this.zMin) / 5, 
                    void 0 !== this.colValue) {
                        var n = this.getColumnRange(e, this.colValue);
                        this.valueMin = void 0 !== this.defaultValueMin ? this.defaultValueMin : n.min, 
                        this.valueMax = void 0 !== this.defaultValueMax ? this.defaultValueMax : n.max, 
                        this.valueMax <= this.valueMin && (this.valueMax = this.valueMin + 1);
                    }
                    this._setScale();
                }
            }
        }, d.prototype._getDataPoints = function(a) {
            var b, c, e, f, g, h, i = [];
            if (this.style === d.STYLE.GRID || this.style === d.STYLE.SURFACE) {
                var j = [], k = [];
                for (e = 0; e < this.getNumberOfRows(a); e++) b = a[e][this.colX] || 0, c = a[e][this.colY] || 0, 
                -1 === j.indexOf(b) && j.push(b), -1 === k.indexOf(c) && k.push(c);
                var m = function(a, b) {
                    return a - b;
                };
                j.sort(m), k.sort(m);
                var n = [];
                for (e = 0; e < a.length; e++) {
                    b = a[e][this.colX] || 0, c = a[e][this.colY] || 0, f = a[e][this.colZ] || 0;
                    var o = j.indexOf(b), p = k.indexOf(c);
                    void 0 === n[o] && (n[o] = []);
                    var q = new l();
                    q.x = b, q.y = c, q.z = f, g = {}, g.point = q, g.trans = void 0, g.screen = void 0, 
                    g.bottom = new l(b, c, this.zMin), n[o][p] = g, i.push(g);
                }
                for (b = 0; b < n.length; b++) for (c = 0; c < n[b].length; c++) n[b][c] && (n[b][c].pointRight = b < n.length - 1 ? n[b + 1][c] : void 0, 
                n[b][c].pointTop = c < n[b].length - 1 ? n[b][c + 1] : void 0, n[b][c].pointCross = b < n.length - 1 && c < n[b].length - 1 ? n[b + 1][c + 1] : void 0);
            } else for (e = 0; e < a.length; e++) h = new l(), h.x = a[e][this.colX] || 0, h.y = a[e][this.colY] || 0, 
            h.z = a[e][this.colZ] || 0, void 0 !== this.colValue && (h.value = a[e][this.colValue] || 0), 
            g = {}, g.point = h, g.bottom = new l(h.x, h.y, this.zMin), g.trans = void 0, g.screen = void 0, 
            i.push(g);
            return i;
        }, d.prototype.create = function() {
            for (;this.containerElement.hasChildNodes(); ) this.containerElement.removeChild(this.containerElement.firstChild);
            this.frame = document.createElement("div"), this.frame.style.position = "relative", 
            this.frame.style.overflow = "hidden", this.frame.canvas = document.createElement("canvas"), 
            this.frame.canvas.style.position = "relative", this.frame.appendChild(this.frame.canvas);
            var a = document.createElement("DIV");
            a.style.color = "red", a.style.fontWeight = "bold", a.style.padding = "10px", a.innerHTML = "Error: your browser does not support HTML canvas", 
            this.frame.canvas.appendChild(a), this.frame.filter = document.createElement("div"), 
            this.frame.filter.style.position = "absolute", this.frame.filter.style.bottom = "0px", 
            this.frame.filter.style.left = "0px", this.frame.filter.style.width = "100%", this.frame.appendChild(this.frame.filter);
            var b = this, c = function(a) {
                b._onMouseDown(a);
            }, d = function(a) {
                b._onTouchStart(a);
            }, e = function(a) {
                b._onWheel(a);
            }, f = function(a) {
                b._onTooltip(a);
            };
            k.addEventListener(this.frame.canvas, "keydown", onkeydown), k.addEventListener(this.frame.canvas, "mousedown", c), 
            k.addEventListener(this.frame.canvas, "touchstart", d), k.addEventListener(this.frame.canvas, "mousewheel", e), 
            k.addEventListener(this.frame.canvas, "mousemove", f), this.containerElement.appendChild(this.frame);
        }, d.prototype.setSize = function(a, b) {
            this.frame.style.width = a, this.frame.style.height = b, this._resizeCanvas();
        }, d.prototype._resizeCanvas = function() {
            this.frame.canvas.style.width = "100%", this.frame.canvas.style.height = "100%", 
            this.frame.canvas.width = this.frame.canvas.clientWidth, this.frame.canvas.height = this.frame.canvas.clientHeight, 
            this.frame.filter.style.width = this.frame.canvas.clientWidth - 20 + "px";
        }, d.prototype.animationStart = function() {
            if (!this.frame.filter || !this.frame.filter.slider) throw "No animation available";
            this.frame.filter.slider.play();
        }, d.prototype.animationStop = function() {
            this.frame.filter && this.frame.filter.slider && this.frame.filter.slider.stop();
        }, d.prototype._resizeCenter = function() {
            "%" === this.defaultXCenter.charAt(this.defaultXCenter.length - 1) ? this.xcenter = parseFloat(this.defaultXCenter) / 100 * this.frame.canvas.clientWidth : this.xcenter = parseFloat(this.defaultXCenter), 
            "%" === this.defaultYCenter.charAt(this.defaultYCenter.length - 1) ? this.ycenter = parseFloat(this.defaultYCenter) / 100 * (this.frame.canvas.clientHeight - this.frame.filter.clientHeight) : this.ycenter = parseFloat(this.defaultYCenter);
        }, d.prototype.setCameraPosition = function(a) {
            void 0 !== a && (void 0 !== a.horizontal && void 0 !== a.vertical && this.camera.setArmRotation(a.horizontal, a.vertical), 
            void 0 !== a.distance && this.camera.setArmLength(a.distance), this.redraw());
        }, d.prototype.getCameraPosition = function() {
            var a = this.camera.getArmRotation();
            return a.distance = this.camera.getArmLength(), a;
        }, d.prototype._readData = function(a) {
            this._dataInitialize(a, this.style), this.dataFilter ? this.dataPoints = this.dataFilter._getDataPoints() : this.dataPoints = this._getDataPoints(this.dataTable), 
            this._redrawFilter();
        }, d.prototype.setData = function(a) {
            this._readData(a), this.redraw(), this.animationAutoStart && this.dataFilter && this.animationStart();
        }, d.prototype.setOptions = function(a) {
            var b = void 0;
            if (this.animationStop(), void 0 !== a) {
                if (void 0 !== a.width && (this.width = a.width), void 0 !== a.height && (this.height = a.height), 
                void 0 !== a.xCenter && (this.defaultXCenter = a.xCenter), void 0 !== a.yCenter && (this.defaultYCenter = a.yCenter), 
                void 0 !== a.filterLabel && (this.filterLabel = a.filterLabel), void 0 !== a.legendLabel && (this.legendLabel = a.legendLabel), 
                void 0 !== a.xLabel && (this.xLabel = a.xLabel), void 0 !== a.yLabel && (this.yLabel = a.yLabel), 
                void 0 !== a.zLabel && (this.zLabel = a.zLabel), void 0 !== a.xValueLabel && (this.xValueLabel = a.xValueLabel), 
                void 0 !== a.yValueLabel && (this.yValueLabel = a.yValueLabel), void 0 !== a.zValueLabel && (this.zValueLabel = a.zValueLabel), 
                void 0 !== a.dotSizeRatio && (this.dotSizeRatio = a.dotSizeRatio), void 0 !== a.style) {
                    var c = this._getStyleNumber(a.style);
                    -1 !== c && (this.style = c);
                }
                void 0 !== a.showGrid && (this.showGrid = a.showGrid), void 0 !== a.showPerspective && (this.showPerspective = a.showPerspective), 
                void 0 !== a.showShadow && (this.showShadow = a.showShadow), void 0 !== a.tooltip && (this.showTooltip = a.tooltip), 
                void 0 !== a.showAnimationControls && (this.showAnimationControls = a.showAnimationControls), 
                void 0 !== a.keepAspectRatio && (this.keepAspectRatio = a.keepAspectRatio), void 0 !== a.verticalRatio && (this.verticalRatio = a.verticalRatio), 
                void 0 !== a.animationInterval && (this.animationInterval = a.animationInterval), 
                void 0 !== a.animationPreload && (this.animationPreload = a.animationPreload), void 0 !== a.animationAutoStart && (this.animationAutoStart = a.animationAutoStart), 
                void 0 !== a.xBarWidth && (this.defaultXBarWidth = a.xBarWidth), void 0 !== a.yBarWidth && (this.defaultYBarWidth = a.yBarWidth), 
                void 0 !== a.xMin && (this.defaultXMin = a.xMin), void 0 !== a.xStep && (this.defaultXStep = a.xStep), 
                void 0 !== a.xMax && (this.defaultXMax = a.xMax), void 0 !== a.yMin && (this.defaultYMin = a.yMin), 
                void 0 !== a.yStep && (this.defaultYStep = a.yStep), void 0 !== a.yMax && (this.defaultYMax = a.yMax), 
                void 0 !== a.zMin && (this.defaultZMin = a.zMin), void 0 !== a.zStep && (this.defaultZStep = a.zStep), 
                void 0 !== a.zMax && (this.defaultZMax = a.zMax), void 0 !== a.valueMin && (this.defaultValueMin = a.valueMin), 
                void 0 !== a.valueMax && (this.defaultValueMax = a.valueMax), void 0 !== a.backgroundColor && this._setBackgroundColor(a.backgroundColor), 
                void 0 !== a.cameraPosition && (b = a.cameraPosition), void 0 !== b && (this.camera.setArmRotation(b.horizontal, b.vertical), 
                this.camera.setArmLength(b.distance)), void 0 !== a.axisColor && (this.axisColor = a.axisColor), 
                void 0 !== a.gridColor && (this.gridColor = a.gridColor), a.dataColor && ("string" == typeof a.dataColor ? (this.dataColor.fill = a.dataColor, 
                this.dataColor.stroke = a.dataColor) : (a.dataColor.fill && (this.dataColor.fill = a.dataColor.fill), 
                a.dataColor.stroke && (this.dataColor.stroke = a.dataColor.stroke), void 0 !== a.dataColor.strokeWidth && (this.dataColor.strokeWidth = a.dataColor.strokeWidth)));
            }
            this.setSize(this.width, this.height), this.dataTable && this.setData(this.dataTable), 
            this.animationAutoStart && this.dataFilter && this.animationStart();
        }, d.prototype.redraw = function() {
            if (void 0 === this.dataPoints) throw "Error: graph data not initialized";
            this._resizeCanvas(), this._resizeCenter(), this._redrawSlider(), this._redrawClear(), 
            this._redrawAxis(), this.style === d.STYLE.GRID || this.style === d.STYLE.SURFACE ? this._redrawDataGrid() : this.style === d.STYLE.LINE ? this._redrawDataLine() : this.style === d.STYLE.BAR || this.style === d.STYLE.BARCOLOR || this.style === d.STYLE.BARSIZE ? this._redrawDataBar() : this._redrawDataDot(), 
            this._redrawInfo(), this._redrawLegend();
        }, d.prototype._redrawClear = function() {
            var a = this.frame.canvas, b = a.getContext("2d");
            b.clearRect(0, 0, a.width, a.height);
        }, d.prototype._redrawLegend = function() {
            var a;
            if (this.style === d.STYLE.DOTCOLOR || this.style === d.STYLE.DOTSIZE) {
                var b, c, e = this.frame.clientWidth * this.dotSizeRatio;
                this.style === d.STYLE.DOTSIZE ? (b = e / 2, c = e / 2 + 2 * e) : (b = 20, c = 20);
                var f = Math.max(.25 * this.frame.clientHeight, 100), g = this.margin, h = this.frame.clientWidth - this.margin, i = h - c, j = g + f;
            }
            var k = this.frame.canvas, l = k.getContext("2d");
            if (l.lineWidth = 1, l.font = "14px arial", this.style === d.STYLE.DOTCOLOR) {
                var m = 0, n = f;
                for (a = m; n > a; a++) {
                    var o = (a - m) / (n - m), p = 240 * o, r = this._hsv2rgb(p, 1, 1);
                    l.strokeStyle = r, l.beginPath(), l.moveTo(i, g + a), l.lineTo(h, g + a), l.stroke();
                }
                l.strokeStyle = this.axisColor, l.strokeRect(i, g, c, f);
            }
            if (this.style === d.STYLE.DOTSIZE && (l.strokeStyle = this.axisColor, l.fillStyle = this.dataColor.fill, 
            l.beginPath(), l.moveTo(i, g), l.lineTo(h, g), l.lineTo(h - c + b, j), l.lineTo(i, j), 
            l.closePath(), l.fill(), l.stroke()), this.style === d.STYLE.DOTCOLOR || this.style === d.STYLE.DOTSIZE) {
                var s = 5, t = new q(this.valueMin, this.valueMax, (this.valueMax - this.valueMin) / 5, !0);
                for (t.start(), t.getCurrent() < this.valueMin && t.next(); !t.end(); ) a = j - (t.getCurrent() - this.valueMin) / (this.valueMax - this.valueMin) * f, 
                l.beginPath(), l.moveTo(i - s, a), l.lineTo(i, a), l.stroke(), l.textAlign = "right", 
                l.textBaseline = "middle", l.fillStyle = this.axisColor, l.fillText(t.getCurrent(), i - 2 * s, a), 
                t.next();
                l.textAlign = "right", l.textBaseline = "top";
                var u = this.legendLabel;
                l.fillText(u, h, j + this.margin);
            }
        }, d.prototype._redrawFilter = function() {
            if (this.frame.filter.innerHTML = "", this.dataFilter) {
                var a = {
                    visible: this.showAnimationControls
                }, b = new p(this.frame.filter, a);
                this.frame.filter.slider = b, this.frame.filter.style.padding = "10px", b.setValues(this.dataFilter.values), 
                b.setPlayInterval(this.animationInterval);
                var c = this, d = function() {
                    var a = b.getIndex();
                    c.dataFilter.selectValue(a), c.dataPoints = c.dataFilter._getDataPoints(), c.redraw();
                };
                b.setOnChangeCallback(d);
            } else this.frame.filter.slider = void 0;
        }, d.prototype._redrawSlider = function() {
            void 0 !== this.frame.filter.slider && this.frame.filter.slider.redraw();
        }, d.prototype._redrawInfo = function() {
            if (this.dataFilter) {
                var a = this.frame.canvas, b = a.getContext("2d");
                b.font = "14px arial", b.lineStyle = "gray", b.fillStyle = "gray", b.textAlign = "left", 
                b.textBaseline = "top";
                var c = this.margin, d = this.margin;
                b.fillText(this.dataFilter.getLabel() + ": " + this.dataFilter.getSelectedValue(), c, d);
            }
        }, d.prototype._redrawAxis = function() {
            var a, b, c, d, e, f, g, h, i, j, k, m, n, o = this.frame.canvas, p = o.getContext("2d");
            p.font = 24 / this.camera.getArmLength() + "px arial";
            var r = .025 / this.scale.x, s = .025 / this.scale.y, t = 5 / this.camera.getArmLength(), u = this.camera.getArmRotation().horizontal;
            for (p.lineWidth = 1, d = void 0 === this.defaultXStep, c = new q(this.xMin, this.xMax, this.xStep, d), 
            c.start(), c.getCurrent() < this.xMin && c.next(); !c.end(); ) {
                var v = c.getCurrent();
                this.showGrid ? (a = this._convert3Dto2D(new l(v, this.yMin, this.zMin)), b = this._convert3Dto2D(new l(v, this.yMax, this.zMin)), 
                p.strokeStyle = this.gridColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
                p.stroke()) : (a = this._convert3Dto2D(new l(v, this.yMin, this.zMin)), b = this._convert3Dto2D(new l(v, this.yMin + r, this.zMin)), 
                p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
                p.stroke(), a = this._convert3Dto2D(new l(v, this.yMax, this.zMin)), b = this._convert3Dto2D(new l(v, this.yMax - r, this.zMin)), 
                p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
                p.stroke()), g = Math.cos(u) > 0 ? this.yMin : this.yMax, e = this._convert3Dto2D(new l(v, g, this.zMin)), 
                Math.cos(2 * u) > 0 ? (p.textAlign = "center", p.textBaseline = "top", e.y += t) : Math.sin(2 * u) < 0 ? (p.textAlign = "right", 
                p.textBaseline = "middle") : (p.textAlign = "left", p.textBaseline = "middle"), 
                p.fillStyle = this.axisColor, p.fillText("  " + this.xValueLabel(c.getCurrent()) + "  ", e.x, e.y), 
                c.next();
            }
            for (p.lineWidth = 1, d = void 0 === this.defaultYStep, c = new q(this.yMin, this.yMax, this.yStep, d), 
            c.start(), c.getCurrent() < this.yMin && c.next(); !c.end(); ) this.showGrid ? (a = this._convert3Dto2D(new l(this.xMin, c.getCurrent(), this.zMin)), 
            b = this._convert3Dto2D(new l(this.xMax, c.getCurrent(), this.zMin)), p.strokeStyle = this.gridColor, 
            p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), p.stroke()) : (a = this._convert3Dto2D(new l(this.xMin, c.getCurrent(), this.zMin)), 
            b = this._convert3Dto2D(new l(this.xMin + s, c.getCurrent(), this.zMin)), p.strokeStyle = this.axisColor, 
            p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), p.stroke(), a = this._convert3Dto2D(new l(this.xMax, c.getCurrent(), this.zMin)), 
            b = this._convert3Dto2D(new l(this.xMax - s, c.getCurrent(), this.zMin)), p.strokeStyle = this.axisColor, 
            p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), p.stroke()), f = Math.sin(u) > 0 ? this.xMin : this.xMax, 
            e = this._convert3Dto2D(new l(f, c.getCurrent(), this.zMin)), Math.cos(2 * u) < 0 ? (p.textAlign = "center", 
            p.textBaseline = "top", e.y += t) : Math.sin(2 * u) > 0 ? (p.textAlign = "right", 
            p.textBaseline = "middle") : (p.textAlign = "left", p.textBaseline = "middle"), 
            p.fillStyle = this.axisColor, p.fillText("  " + this.yValueLabel(c.getCurrent()) + "  ", e.x, e.y), 
            c.next();
            for (p.lineWidth = 1, d = void 0 === this.defaultZStep, c = new q(this.zMin, this.zMax, this.zStep, d), 
            c.start(), c.getCurrent() < this.zMin && c.next(), f = Math.cos(u) > 0 ? this.xMin : this.xMax, 
            g = Math.sin(u) < 0 ? this.yMin : this.yMax; !c.end(); ) a = this._convert3Dto2D(new l(f, g, c.getCurrent())), 
            p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(a.x - t, a.y), 
            p.stroke(), p.textAlign = "right", p.textBaseline = "middle", p.fillStyle = this.axisColor, 
            p.fillText(this.zValueLabel(c.getCurrent()) + " ", a.x - 5, a.y), c.next();
            p.lineWidth = 1, a = this._convert3Dto2D(new l(f, g, this.zMin)), b = this._convert3Dto2D(new l(f, g, this.zMax)), 
            p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
            p.stroke(), p.lineWidth = 1, m = this._convert3Dto2D(new l(this.xMin, this.yMin, this.zMin)), 
            n = this._convert3Dto2D(new l(this.xMax, this.yMin, this.zMin)), p.strokeStyle = this.axisColor, 
            p.beginPath(), p.moveTo(m.x, m.y), p.lineTo(n.x, n.y), p.stroke(), m = this._convert3Dto2D(new l(this.xMin, this.yMax, this.zMin)), 
            n = this._convert3Dto2D(new l(this.xMax, this.yMax, this.zMin)), p.strokeStyle = this.axisColor, 
            p.beginPath(), p.moveTo(m.x, m.y), p.lineTo(n.x, n.y), p.stroke(), p.lineWidth = 1, 
            a = this._convert3Dto2D(new l(this.xMin, this.yMin, this.zMin)), b = this._convert3Dto2D(new l(this.xMin, this.yMax, this.zMin)), 
            p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
            p.stroke(), a = this._convert3Dto2D(new l(this.xMax, this.yMin, this.zMin)), b = this._convert3Dto2D(new l(this.xMax, this.yMax, this.zMin)), 
            p.strokeStyle = this.axisColor, p.beginPath(), p.moveTo(a.x, a.y), p.lineTo(b.x, b.y), 
            p.stroke();
            var w = this.xLabel;
            w.length > 0 && (k = .1 / this.scale.y, f = (this.xMin + this.xMax) / 2, g = Math.cos(u) > 0 ? this.yMin - k : this.yMax + k, 
            e = this._convert3Dto2D(new l(f, g, this.zMin)), Math.cos(2 * u) > 0 ? (p.textAlign = "center", 
            p.textBaseline = "top") : Math.sin(2 * u) < 0 ? (p.textAlign = "right", p.textBaseline = "middle") : (p.textAlign = "left", 
            p.textBaseline = "middle"), p.fillStyle = this.axisColor, p.fillText(w, e.x, e.y));
            var x = this.yLabel;
            x.length > 0 && (j = .1 / this.scale.x, f = Math.sin(u) > 0 ? this.xMin - j : this.xMax + j, 
            g = (this.yMin + this.yMax) / 2, e = this._convert3Dto2D(new l(f, g, this.zMin)), 
            Math.cos(2 * u) < 0 ? (p.textAlign = "center", p.textBaseline = "top") : Math.sin(2 * u) > 0 ? (p.textAlign = "right", 
            p.textBaseline = "middle") : (p.textAlign = "left", p.textBaseline = "middle"), 
            p.fillStyle = this.axisColor, p.fillText(x, e.x, e.y));
            var y = this.zLabel;
            y.length > 0 && (i = 30, f = Math.cos(u) > 0 ? this.xMin : this.xMax, g = Math.sin(u) < 0 ? this.yMin : this.yMax, 
            h = (this.zMin + this.zMax) / 2, e = this._convert3Dto2D(new l(f, g, h)), p.textAlign = "right", 
            p.textBaseline = "middle", p.fillStyle = this.axisColor, p.fillText(y, e.x - i, e.y));
        }, d.prototype._hsv2rgb = function(a, b, c) {
            var d, e, f, g, h, i;
            switch (g = c * b, h = Math.floor(a / 60), i = g * (1 - Math.abs(a / 60 % 2 - 1)), 
            h) {
              case 0:
                d = g, e = i, f = 0;
                break;

              case 1:
                d = i, e = g, f = 0;
                break;

              case 2:
                d = 0, e = g, f = i;
                break;

              case 3:
                d = 0, e = i, f = g;
                break;

              case 4:
                d = i, e = 0, f = g;
                break;

              case 5:
                d = g, e = 0, f = i;
                break;

              default:
                d = 0, e = 0, f = 0;
            }
            return "RGB(" + parseInt(255 * d) + "," + parseInt(255 * e) + "," + parseInt(255 * f) + ")";
        }, d.prototype._redrawDataGrid = function() {
            var a, b, c, e, f, g, h, i, j, k, m, n, o = this.frame.canvas, p = o.getContext("2d");
            if (p.lineJoin = "round", p.lineCap = "round", !(void 0 === this.dataPoints || this.dataPoints.length <= 0)) {
                for (f = 0; f < this.dataPoints.length; f++) {
                    var q = this._convertPointToTranslation(this.dataPoints[f].point), r = this._convertTranslationToScreen(q);
                    this.dataPoints[f].trans = q, this.dataPoints[f].screen = r;
                    var s = this._convertPointToTranslation(this.dataPoints[f].bottom);
                    this.dataPoints[f].dist = this.showPerspective ? s.length() : -s.z;
                }
                var t = function(a, b) {
                    return b.dist - a.dist;
                };
                if (this.dataPoints.sort(t), this.style === d.STYLE.SURFACE) {
                    for (f = 0; f < this.dataPoints.length; f++) if (a = this.dataPoints[f], b = this.dataPoints[f].pointRight, 
                    c = this.dataPoints[f].pointTop, e = this.dataPoints[f].pointCross, void 0 !== a && void 0 !== b && void 0 !== c && void 0 !== e) {
                        if (this.showGrayBottom || this.showShadow) {
                            var u = l.subtract(e.trans, a.trans), v = l.subtract(c.trans, b.trans), w = l.crossProduct(u, v), x = w.length();
                            g = w.z > 0;
                        } else g = !0;
                        g ? (n = (a.point.z + b.point.z + c.point.z + e.point.z) / 4, j = 240 * (1 - (n - this.zMin) * this.scale.z / this.verticalRatio), 
                        k = 1, this.showShadow ? (m = Math.min(1 + w.x / x / 2, 1), h = this._hsv2rgb(j, k, m), 
                        i = h) : (m = 1, h = this._hsv2rgb(j, k, m), i = this.axisColor)) : (h = "gray", 
                        i = this.axisColor), p.lineWidth = this._getStrokeWidth(a), p.fillStyle = h, p.strokeStyle = i, 
                        p.beginPath(), p.moveTo(a.screen.x, a.screen.y), p.lineTo(b.screen.x, b.screen.y), 
                        p.lineTo(e.screen.x, e.screen.y), p.lineTo(c.screen.x, c.screen.y), p.closePath(), 
                        p.fill(), p.stroke();
                    }
                } else for (f = 0; f < this.dataPoints.length; f++) a = this.dataPoints[f], b = this.dataPoints[f].pointRight, 
                c = this.dataPoints[f].pointTop, void 0 !== a && void 0 !== b && (n = (a.point.z + b.point.z) / 2, 
                j = 240 * (1 - (n - this.zMin) * this.scale.z / this.verticalRatio), p.lineWidth = 2 * this._getStrokeWidth(a), 
                p.strokeStyle = this._hsv2rgb(j, 1, 1), p.beginPath(), p.moveTo(a.screen.x, a.screen.y), 
                p.lineTo(b.screen.x, b.screen.y), p.stroke()), void 0 !== a && void 0 !== c && (n = (a.point.z + c.point.z) / 2, 
                j = 240 * (1 - (n - this.zMin) * this.scale.z / this.verticalRatio), p.lineWidth = 2 * this._getStrokeWidth(a), 
                p.strokeStyle = this._hsv2rgb(j, 1, 1), p.beginPath(), p.moveTo(a.screen.x, a.screen.y), 
                p.lineTo(c.screen.x, c.screen.y), p.stroke());
            }
        }, d.prototype._getStrokeWidth = function(a) {
            return void 0 !== a ? this.showPerspective ? 1 / -a.trans.z * this.dataColor.strokeWidth : -(this.eye.z / this.camera.getArmLength()) * this.dataColor.strokeWidth : this.dataColor.strokeWidth;
        }, d.prototype._redrawDataDot = function() {
            var a, b = this.frame.canvas, c = b.getContext("2d");
            if (!(void 0 === this.dataPoints || this.dataPoints.length <= 0)) {
                for (a = 0; a < this.dataPoints.length; a++) {
                    var e = this._convertPointToTranslation(this.dataPoints[a].point), f = this._convertTranslationToScreen(e);
                    this.dataPoints[a].trans = e, this.dataPoints[a].screen = f;
                    var g = this._convertPointToTranslation(this.dataPoints[a].bottom);
                    this.dataPoints[a].dist = this.showPerspective ? g.length() : -g.z;
                }
                var h = function(a, b) {
                    return b.dist - a.dist;
                };
                this.dataPoints.sort(h);
                var i = this.frame.clientWidth * this.dotSizeRatio;
                for (a = 0; a < this.dataPoints.length; a++) {
                    var j = this.dataPoints[a];
                    if (this.style === d.STYLE.DOTLINE) {
                        var k = this._convert3Dto2D(j.bottom);
                        c.lineWidth = 1, c.strokeStyle = this.gridColor, c.beginPath(), c.moveTo(k.x, k.y), 
                        c.lineTo(j.screen.x, j.screen.y), c.stroke();
                    }
                    var l;
                    l = this.style === d.STYLE.DOTSIZE ? i / 2 + 2 * i * (j.point.value - this.valueMin) / (this.valueMax - this.valueMin) : i;
                    var m;
                    m = this.showPerspective ? l / -j.trans.z : l * -(this.eye.z / this.camera.getArmLength()), 
                    0 > m && (m = 0);
                    var n, o, p;
                    this.style === d.STYLE.DOTCOLOR ? (n = 240 * (1 - (j.point.value - this.valueMin) * this.scale.value), 
                    o = this._hsv2rgb(n, 1, 1), p = this._hsv2rgb(n, 1, .8)) : this.style === d.STYLE.DOTSIZE ? (o = this.dataColor.fill, 
                    p = this.dataColor.stroke) : (n = 240 * (1 - (j.point.z - this.zMin) * this.scale.z / this.verticalRatio), 
                    o = this._hsv2rgb(n, 1, 1), p = this._hsv2rgb(n, 1, .8)), c.lineWidth = this._getStrokeWidth(j), 
                    c.strokeStyle = p, c.fillStyle = o, c.beginPath(), c.arc(j.screen.x, j.screen.y, m, 0, 2 * Math.PI, !0), 
                    c.fill(), c.stroke();
                }
            }
        }, d.prototype._redrawDataBar = function() {
            var a, b, c, e, f = this.frame.canvas, g = f.getContext("2d");
            if (!(void 0 === this.dataPoints || this.dataPoints.length <= 0)) {
                for (a = 0; a < this.dataPoints.length; a++) {
                    var h = this._convertPointToTranslation(this.dataPoints[a].point), i = this._convertTranslationToScreen(h);
                    this.dataPoints[a].trans = h, this.dataPoints[a].screen = i;
                    var j = this._convertPointToTranslation(this.dataPoints[a].bottom);
                    this.dataPoints[a].dist = this.showPerspective ? j.length() : -j.z;
                }
                var k = function(a, b) {
                    return b.dist - a.dist;
                };
                this.dataPoints.sort(k), g.lineJoin = "round", g.lineCap = "round";
                var m = this.xBarWidth / 2, n = this.yBarWidth / 2;
                for (a = 0; a < this.dataPoints.length; a++) {
                    var o, p, q, r = this.dataPoints[a];
                    this.style === d.STYLE.BARCOLOR ? (o = 240 * (1 - (r.point.value - this.valueMin) * this.scale.value), 
                    p = this._hsv2rgb(o, 1, 1), q = this._hsv2rgb(o, 1, .8)) : this.style === d.STYLE.BARSIZE ? (p = this.dataColor.fill, 
                    q = this.dataColor.stroke) : (o = 240 * (1 - (r.point.z - this.zMin) * this.scale.z / this.verticalRatio), 
                    p = this._hsv2rgb(o, 1, 1), q = this._hsv2rgb(o, 1, .8)), this.style === d.STYLE.BARSIZE && (m = this.xBarWidth / 2 * ((r.point.value - this.valueMin) / (this.valueMax - this.valueMin) * .8 + .2), 
                    n = this.yBarWidth / 2 * ((r.point.value - this.valueMin) / (this.valueMax - this.valueMin) * .8 + .2));
                    var s = this, t = r.point, u = [ {
                        point: new l(t.x - m, t.y - n, t.z)
                    }, {
                        point: new l(t.x + m, t.y - n, t.z)
                    }, {
                        point: new l(t.x + m, t.y + n, t.z)
                    }, {
                        point: new l(t.x - m, t.y + n, t.z)
                    } ], v = [ {
                        point: new l(t.x - m, t.y - n, this.zMin)
                    }, {
                        point: new l(t.x + m, t.y - n, this.zMin)
                    }, {
                        point: new l(t.x + m, t.y + n, this.zMin)
                    }, {
                        point: new l(t.x - m, t.y + n, this.zMin)
                    } ];
                    u.forEach(function(a) {
                        a.screen = s._convert3Dto2D(a.point);
                    }), v.forEach(function(a) {
                        a.screen = s._convert3Dto2D(a.point);
                    });
                    var w = [ {
                        corners: u,
                        center: l.avg(v[0].point, v[2].point)
                    }, {
                        corners: [ u[0], u[1], v[1], v[0] ],
                        center: l.avg(v[1].point, v[0].point)
                    }, {
                        corners: [ u[1], u[2], v[2], v[1] ],
                        center: l.avg(v[2].point, v[1].point)
                    }, {
                        corners: [ u[2], u[3], v[3], v[2] ],
                        center: l.avg(v[3].point, v[2].point)
                    }, {
                        corners: [ u[3], u[0], v[0], v[3] ],
                        center: l.avg(v[0].point, v[3].point)
                    } ];
                    for (r.surfaces = w, b = 0; b < w.length; b++) {
                        c = w[b];
                        var x = this._convertPointToTranslation(c.center);
                        c.dist = this.showPerspective ? x.length() : -x.z;
                    }
                    for (w.sort(function(a, b) {
                        var c = b.dist - a.dist;
                        return c ? c : a.corners === u ? 1 : b.corners === u ? -1 : 0;
                    }), g.lineWidth = this._getStrokeWidth(r), g.strokeStyle = q, g.fillStyle = p, b = 2; b < w.length; b++) c = w[b], 
                    e = c.corners, g.beginPath(), g.moveTo(e[3].screen.x, e[3].screen.y), g.lineTo(e[0].screen.x, e[0].screen.y), 
                    g.lineTo(e[1].screen.x, e[1].screen.y), g.lineTo(e[2].screen.x, e[2].screen.y), 
                    g.lineTo(e[3].screen.x, e[3].screen.y), g.fill(), g.stroke();
                }
            }
        }, d.prototype._redrawDataLine = function() {
            var a, b, c = this.frame.canvas, d = c.getContext("2d");
            if (!(void 0 === this.dataPoints || this.dataPoints.length <= 0)) {
                for (b = 0; b < this.dataPoints.length; b++) {
                    var e = this._convertPointToTranslation(this.dataPoints[b].point), f = this._convertTranslationToScreen(e);
                    this.dataPoints[b].trans = e, this.dataPoints[b].screen = f;
                }
                if (this.dataPoints.length > 0) {
                    for (a = this.dataPoints[0], d.lineWidth = this._getStrokeWidth(a), d.lineJoin = "round", 
                    d.lineCap = "round", d.strokeStyle = this.dataColor.stroke, d.beginPath(), d.moveTo(a.screen.x, a.screen.y), 
                    b = 1; b < this.dataPoints.length; b++) a = this.dataPoints[b], d.lineTo(a.screen.x, a.screen.y);
                    d.stroke();
                }
            }
        }, d.prototype._onMouseDown = function(a) {
            if (a = a || window.event, this.leftButtonDown && this._onMouseUp(a), this.leftButtonDown = a.which ? 1 === a.which : 1 === a.button, 
            this.leftButtonDown || this.touchDown) {
                this.startMouseX = e(a), this.startMouseY = f(a), this.startStart = new Date(this.start), 
                this.startEnd = new Date(this.end), this.startArmRotation = this.camera.getArmRotation(), 
                this.frame.style.cursor = "move";
                var b = this;
                this.onmousemove = function(a) {
                    b._onMouseMove(a);
                }, this.onmouseup = function(a) {
                    b._onMouseUp(a);
                }, k.addEventListener(document, "mousemove", b.onmousemove), k.addEventListener(document, "mouseup", b.onmouseup), 
                k.preventDefault(a);
            }
        }, d.prototype._onMouseMove = function(a) {
            a = a || window.event;
            var b = parseFloat(e(a)) - this.startMouseX, c = parseFloat(f(a)) - this.startMouseY, d = this.startArmRotation.horizontal + b / 200, g = this.startArmRotation.vertical + c / 200, h = 4, i = Math.sin(h / 360 * 2 * Math.PI);
            Math.abs(Math.sin(d)) < i && (d = Math.round(d / Math.PI) * Math.PI - .001), Math.abs(Math.cos(d)) < i && (d = (Math.round(d / Math.PI - .5) + .5) * Math.PI - .001), 
            Math.abs(Math.sin(g)) < i && (g = Math.round(g / Math.PI) * Math.PI), Math.abs(Math.cos(g)) < i && (g = (Math.round(g / Math.PI - .5) + .5) * Math.PI), 
            this.camera.setArmRotation(d, g), this.redraw();
            var j = this.getCameraPosition();
            this.emit("cameraPositionChange", j), k.preventDefault(a);
        }, d.prototype._onMouseUp = function(a) {
            this.frame.style.cursor = "auto", this.leftButtonDown = !1, k.removeEventListener(document, "mousemove", this.onmousemove), 
            k.removeEventListener(document, "mouseup", this.onmouseup), k.preventDefault(a);
        }, d.prototype._onTooltip = function(a) {
            var b = 300, c = this.frame.getBoundingClientRect(), d = e(a) - c.left, g = f(a) - c.top;
            if (this.showTooltip) {
                if (this.tooltipTimeout && clearTimeout(this.tooltipTimeout), this.leftButtonDown) return void this._hideTooltip();
                if (this.tooltip && this.tooltip.dataPoint) {
                    var h = this._dataPointFromXY(d, g);
                    h !== this.tooltip.dataPoint && (h ? this._showTooltip(h) : this._hideTooltip());
                } else {
                    var i = this;
                    this.tooltipTimeout = setTimeout(function() {
                        i.tooltipTimeout = null;
                        var a = i._dataPointFromXY(d, g);
                        a && i._showTooltip(a);
                    }, b);
                }
            }
        }, d.prototype._onTouchStart = function(a) {
            this.touchDown = !0;
            var b = this;
            this.ontouchmove = function(a) {
                b._onTouchMove(a);
            }, this.ontouchend = function(a) {
                b._onTouchEnd(a);
            }, k.addEventListener(document, "touchmove", b.ontouchmove), k.addEventListener(document, "touchend", b.ontouchend), 
            this._onMouseDown(a);
        }, d.prototype._onTouchMove = function(a) {
            this._onMouseMove(a);
        }, d.prototype._onTouchEnd = function(a) {
            this.touchDown = !1, k.removeEventListener(document, "touchmove", this.ontouchmove), 
            k.removeEventListener(document, "touchend", this.ontouchend), this._onMouseUp(a);
        }, d.prototype._onWheel = function(a) {
            a || (a = window.event);
            var b = 0;
            if (a.wheelDelta ? b = a.wheelDelta / 120 : a.detail && (b = -a.detail / 3), b) {
                var c = this.camera.getArmLength(), d = c * (1 - b / 10);
                this.camera.setArmLength(d), this.redraw(), this._hideTooltip();
            }
            var e = this.getCameraPosition();
            this.emit("cameraPositionChange", e), k.preventDefault(a);
        }, d.prototype._insideTriangle = function(a, b) {
            function c(a) {
                return a > 0 ? 1 : 0 > a ? -1 : 0;
            }
            var d = b[0], e = b[1], f = b[2], g = c((e.x - d.x) * (a.y - d.y) - (e.y - d.y) * (a.x - d.x)), h = c((f.x - e.x) * (a.y - e.y) - (f.y - e.y) * (a.x - e.x)), i = c((d.x - f.x) * (a.y - f.y) - (d.y - f.y) * (a.x - f.x));
            return !(0 != g && 0 != h && g != h || 0 != h && 0 != i && h != i || 0 != g && 0 != i && g != i);
        }, d.prototype._dataPointFromXY = function(a, b) {
            var c, e = 100, f = null, g = null, h = null, i = new m(a, b);
            if (this.style === d.STYLE.BAR || this.style === d.STYLE.BARCOLOR || this.style === d.STYLE.BARSIZE) for (c = this.dataPoints.length - 1; c >= 0; c--) {
                f = this.dataPoints[c];
                var j = f.surfaces;
                if (j) for (var k = j.length - 1; k >= 0; k--) {
                    var l = j[k], n = l.corners, o = [ n[0].screen, n[1].screen, n[2].screen ], p = [ n[2].screen, n[3].screen, n[0].screen ];
                    if (this._insideTriangle(i, o) || this._insideTriangle(i, p)) return f;
                }
            } else for (c = 0; c < this.dataPoints.length; c++) {
                f = this.dataPoints[c];
                var q = f.screen;
                if (q) {
                    var r = Math.abs(a - q.x), s = Math.abs(b - q.y), t = Math.sqrt(r * r + s * s);
                    (null === h || h > t) && e > t && (h = t, g = f);
                }
            }
            return g;
        }, d.prototype._showTooltip = function(a) {
            var b, c, d;
            this.tooltip ? (b = this.tooltip.dom.content, c = this.tooltip.dom.line, d = this.tooltip.dom.dot) : (b = document.createElement("div"), 
            b.style.position = "absolute", b.style.padding = "10px", b.style.border = "1px solid #4d4d4d", 
            b.style.color = "#1a1a1a", b.style.background = "rgba(255,255,255,0.7)", b.style.borderRadius = "2px", 
            b.style.boxShadow = "5px 5px 10px rgba(128,128,128,0.5)", c = document.createElement("div"), 
            c.style.position = "absolute", c.style.height = "40px", c.style.width = "0", c.style.borderLeft = "1px solid #4d4d4d", 
            d = document.createElement("div"), d.style.position = "absolute", d.style.height = "0", 
            d.style.width = "0", d.style.border = "5px solid #4d4d4d", d.style.borderRadius = "5px", 
            this.tooltip = {
                dataPoint: null,
                dom: {
                    content: b,
                    line: c,
                    dot: d
                }
            }), this._hideTooltip(), this.tooltip.dataPoint = a, "function" == typeof this.showTooltip ? b.innerHTML = this.showTooltip(a.point) : b.innerHTML = "<table><tr><td>" + this.xLabel + ":</td><td>" + a.point.x + "</td></tr><tr><td>" + this.yLabel + ":</td><td>" + a.point.y + "</td></tr><tr><td>" + this.zLabel + ":</td><td>" + a.point.z + "</td></tr></table>", 
            b.style.left = "0", b.style.top = "0", this.frame.appendChild(b), this.frame.appendChild(c), 
            this.frame.appendChild(d);
            var e = b.offsetWidth, f = b.offsetHeight, g = c.offsetHeight, h = d.offsetWidth, i = d.offsetHeight, j = a.screen.x - e / 2;
            j = Math.min(Math.max(j, 10), this.frame.clientWidth - 10 - e), c.style.left = a.screen.x + "px", 
            c.style.top = a.screen.y - g + "px", b.style.left = j + "px", b.style.top = a.screen.y - g - f + "px", 
            d.style.left = a.screen.x - h / 2 + "px", d.style.top = a.screen.y - i / 2 + "px";
        }, d.prototype._hideTooltip = function() {
            if (this.tooltip) {
                this.tooltip.dataPoint = null;
                for (var a in this.tooltip.dom) if (this.tooltip.dom.hasOwnProperty(a)) {
                    var b = this.tooltip.dom[a];
                    b && b.parentNode && b.parentNode.removeChild(b);
                }
            }
        }, a.exports = d;
    }, function(a, b) {
        function c(a) {
            return a ? d(a) : void 0;
        }
        function d(a) {
            for (var b in c.prototype) a[b] = c.prototype[b];
            return a;
        }
        a.exports = c, c.prototype.on = c.prototype.addEventListener = function(a, b) {
            return this._callbacks = this._callbacks || {}, (this._callbacks[a] = this._callbacks[a] || []).push(b), 
            this;
        }, c.prototype.once = function(a, b) {
            function c() {
                d.off(a, c), b.apply(this, arguments);
            }
            var d = this;
            return this._callbacks = this._callbacks || {}, c.fn = b, this.on(a, c), this;
        }, c.prototype.off = c.prototype.removeListener = c.prototype.removeAllListeners = c.prototype.removeEventListener = function(a, b) {
            if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, 
            this;
            var c = this._callbacks[a];
            if (!c) return this;
            if (1 == arguments.length) return delete this._callbacks[a], this;
            for (var d, e = 0; e < c.length; e++) if (d = c[e], d === b || d.fn === b) {
                c.splice(e, 1);
                break;
            }
            return this;
        }, c.prototype.emit = function(a) {
            this._callbacks = this._callbacks || {};
            var b = [].slice.call(arguments, 1), c = this._callbacks[a];
            if (c) {
                c = c.slice(0);
                for (var d = 0, e = c.length; e > d; ++d) c[d].apply(this, b);
            }
            return this;
        }, c.prototype.listeners = function(a) {
            return this._callbacks = this._callbacks || {}, this._callbacks[a] || [];
        }, c.prototype.hasListeners = function(a) {
            return !!this.listeners(a).length;
        };
    }, function(a, b) {
        "use strict";
        function c(a, b, c) {
            this.x = void 0 !== a ? a : 0, this.y = void 0 !== b ? b : 0, this.z = void 0 !== c ? c : 0;
        }
        c.subtract = function(a, b) {
            var d = new c();
            return d.x = a.x - b.x, d.y = a.y - b.y, d.z = a.z - b.z, d;
        }, c.add = function(a, b) {
            var d = new c();
            return d.x = a.x + b.x, d.y = a.y + b.y, d.z = a.z + b.z, d;
        }, c.avg = function(a, b) {
            return new c((a.x + b.x) / 2, (a.y + b.y) / 2, (a.z + b.z) / 2);
        }, c.crossProduct = function(a, b) {
            var d = new c();
            return d.x = a.y * b.z - a.z * b.y, d.y = a.z * b.x - a.x * b.z, d.z = a.x * b.y - a.y * b.x, 
            d;
        }, c.prototype.length = function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        }, a.exports = c;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            this.x = void 0 !== a ? a : 0, this.y = void 0 !== b ? b : 0;
        }
        a.exports = c;
    }, function(a, b, c) {
        "use strict";
        function d() {
            this.armLocation = new e(), this.armRotation = {}, this.armRotation.horizontal = 0, 
            this.armRotation.vertical = 0, this.armLength = 1.7, this.cameraLocation = new e(), 
            this.cameraRotation = new e(.5 * Math.PI, 0, 0), this.calculateCameraOrientation();
        }
        var e = c(13);
        d.prototype.setArmLocation = function(a, b, c) {
            this.armLocation.x = a, this.armLocation.y = b, this.armLocation.z = c, this.calculateCameraOrientation();
        }, d.prototype.setArmRotation = function(a, b) {
            void 0 !== a && (this.armRotation.horizontal = a), void 0 !== b && (this.armRotation.vertical = b, 
            this.armRotation.vertical < 0 && (this.armRotation.vertical = 0), this.armRotation.vertical > .5 * Math.PI && (this.armRotation.vertical = .5 * Math.PI)), 
            void 0 === a && void 0 === b || this.calculateCameraOrientation();
        }, d.prototype.getArmRotation = function() {
            var a = {};
            return a.horizontal = this.armRotation.horizontal, a.vertical = this.armRotation.vertical, 
            a;
        }, d.prototype.setArmLength = function(a) {
            void 0 !== a && (this.armLength = a, this.armLength < .71 && (this.armLength = .71), 
            this.armLength > 5 && (this.armLength = 5), this.calculateCameraOrientation());
        }, d.prototype.getArmLength = function() {
            return this.armLength;
        }, d.prototype.getCameraLocation = function() {
            return this.cameraLocation;
        }, d.prototype.getCameraRotation = function() {
            return this.cameraRotation;
        }, d.prototype.calculateCameraOrientation = function() {
            this.cameraLocation.x = this.armLocation.x - this.armLength * Math.sin(this.armRotation.horizontal) * Math.cos(this.armRotation.vertical), 
            this.cameraLocation.y = this.armLocation.y - this.armLength * Math.cos(this.armRotation.horizontal) * Math.cos(this.armRotation.vertical), 
            this.cameraLocation.z = this.armLocation.z + this.armLength * Math.sin(this.armRotation.vertical), 
            this.cameraRotation.x = Math.PI / 2 - this.armRotation.vertical, this.cameraRotation.y = 0, 
            this.cameraRotation.z = -this.armRotation.horizontal;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            this.data = a, this.column = b, this.graph = c, this.index = void 0, this.value = void 0, 
            this.values = c.getDistinctValues(a.get(), this.column), this.values.sort(function(a, b) {
                return a > b ? 1 : b > a ? -1 : 0;
            }), this.values.length > 0 && this.selectValue(0), this.dataPoints = [], this.loaded = !1, 
            this.onLoadCallback = void 0, c.animationPreload ? (this.loaded = !1, this.loadInBackground()) : this.loaded = !0;
        }
        var e = c(10);
        d.prototype.isLoaded = function() {
            return this.loaded;
        }, d.prototype.getLoadedProgress = function() {
            for (var a = this.values.length, b = 0; this.dataPoints[b]; ) b++;
            return Math.round(b / a * 100);
        }, d.prototype.getLabel = function() {
            return this.graph.filterLabel;
        }, d.prototype.getColumn = function() {
            return this.column;
        }, d.prototype.getSelectedValue = function() {
            return void 0 !== this.index ? this.values[this.index] : void 0;
        }, d.prototype.getValues = function() {
            return this.values;
        }, d.prototype.getValue = function(a) {
            if (a >= this.values.length) throw "Error: index out of range";
            return this.values[a];
        }, d.prototype._getDataPoints = function(a) {
            if (void 0 === a && (a = this.index), void 0 === a) return [];
            var b;
            if (this.dataPoints[a]) b = this.dataPoints[a]; else {
                var c = {};
                c.column = this.column, c.value = this.values[a];
                var d = new e(this.data, {
                    filter: function(a) {
                        return a[c.column] == c.value;
                    }
                }).get();
                b = this.graph._getDataPoints(d), this.dataPoints[a] = b;
            }
            return b;
        }, d.prototype.setOnLoadCallback = function(a) {
            this.onLoadCallback = a;
        }, d.prototype.selectValue = function(a) {
            if (a >= this.values.length) throw "Error: index out of range";
            this.index = a, this.value = this.values[a];
        }, d.prototype.loadInBackground = function(a) {
            void 0 === a && (a = 0);
            var b = this.graph.frame;
            if (a < this.values.length) {
                this._getDataPoints(a);
                void 0 === b.progress && (b.progress = document.createElement("DIV"), b.progress.style.position = "absolute", 
                b.progress.style.color = "gray", b.appendChild(b.progress));
                var c = this.getLoadedProgress();
                b.progress.innerHTML = "Loading animation... " + c + "%", b.progress.style.bottom = "60px", 
                b.progress.style.left = "10px";
                var d = this;
                setTimeout(function() {
                    d.loadInBackground(a + 1);
                }, 10), this.loaded = !1;
            } else this.loaded = !0, void 0 !== b.progress && (b.removeChild(b.progress), b.progress = void 0), 
            this.onLoadCallback && this.onLoadCallback();
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (void 0 === a) throw "Error: No container element defined";
            if (this.container = a, this.visible = b && void 0 != b.visible ? b.visible : !0, 
            this.visible) {
                this.frame = document.createElement("DIV"), this.frame.style.width = "100%", this.frame.style.position = "relative", 
                this.container.appendChild(this.frame), this.frame.prev = document.createElement("INPUT"), 
                this.frame.prev.type = "BUTTON", this.frame.prev.value = "Prev", this.frame.appendChild(this.frame.prev), 
                this.frame.play = document.createElement("INPUT"), this.frame.play.type = "BUTTON", 
                this.frame.play.value = "Play", this.frame.appendChild(this.frame.play), this.frame.next = document.createElement("INPUT"), 
                this.frame.next.type = "BUTTON", this.frame.next.value = "Next", this.frame.appendChild(this.frame.next), 
                this.frame.bar = document.createElement("INPUT"), this.frame.bar.type = "BUTTON", 
                this.frame.bar.style.position = "absolute", this.frame.bar.style.border = "1px solid red", 
                this.frame.bar.style.width = "100px", this.frame.bar.style.height = "6px", this.frame.bar.style.borderRadius = "2px", 
                this.frame.bar.style.MozBorderRadius = "2px", this.frame.bar.style.border = "1px solid #7F7F7F", 
                this.frame.bar.style.backgroundColor = "#E5E5E5", this.frame.appendChild(this.frame.bar), 
                this.frame.slide = document.createElement("INPUT"), this.frame.slide.type = "BUTTON", 
                this.frame.slide.style.margin = "0px", this.frame.slide.value = " ", this.frame.slide.style.position = "relative", 
                this.frame.slide.style.left = "-100px", this.frame.appendChild(this.frame.slide);
                var c = this;
                this.frame.slide.onmousedown = function(a) {
                    c._onMouseDown(a);
                }, this.frame.prev.onclick = function(a) {
                    c.prev(a);
                }, this.frame.play.onclick = function(a) {
                    c.togglePlay(a);
                }, this.frame.next.onclick = function(a) {
                    c.next(a);
                };
            }
            this.onChangeCallback = void 0, this.values = [], this.index = void 0, this.playTimeout = void 0, 
            this.playInterval = 1e3, this.playLoop = !0;
        }
        var e = c(1);
        d.prototype.prev = function() {
            var a = this.getIndex();
            a > 0 && (a--, this.setIndex(a));
        }, d.prototype.next = function() {
            var a = this.getIndex();
            a < this.values.length - 1 && (a++, this.setIndex(a));
        }, d.prototype.playNext = function() {
            var a = new Date(), b = this.getIndex();
            b < this.values.length - 1 ? (b++, this.setIndex(b)) : this.playLoop && (b = 0, 
            this.setIndex(b));
            var c = new Date(), d = c - a, e = Math.max(this.playInterval - d, 0), f = this;
            this.playTimeout = setTimeout(function() {
                f.playNext();
            }, e);
        }, d.prototype.togglePlay = function() {
            void 0 === this.playTimeout ? this.play() : this.stop();
        }, d.prototype.play = function() {
            this.playTimeout || (this.playNext(), this.frame && (this.frame.play.value = "Stop"));
        }, d.prototype.stop = function() {
            clearInterval(this.playTimeout), this.playTimeout = void 0, this.frame && (this.frame.play.value = "Play");
        }, d.prototype.setOnChangeCallback = function(a) {
            this.onChangeCallback = a;
        }, d.prototype.setPlayInterval = function(a) {
            this.playInterval = a;
        }, d.prototype.getPlayInterval = function(a) {
            return this.playInterval;
        }, d.prototype.setPlayLoop = function(a) {
            this.playLoop = a;
        }, d.prototype.onChange = function() {
            void 0 !== this.onChangeCallback && this.onChangeCallback();
        }, d.prototype.redraw = function() {
            if (this.frame) {
                this.frame.bar.style.top = this.frame.clientHeight / 2 - this.frame.bar.offsetHeight / 2 + "px", 
                this.frame.bar.style.width = this.frame.clientWidth - this.frame.prev.clientWidth - this.frame.play.clientWidth - this.frame.next.clientWidth - 30 + "px";
                var a = this.indexToLeft(this.index);
                this.frame.slide.style.left = a + "px";
            }
        }, d.prototype.setValues = function(a) {
            this.values = a, this.values.length > 0 ? this.setIndex(0) : this.index = void 0;
        }, d.prototype.setIndex = function(a) {
            if (!(a < this.values.length)) throw "Error: index out of range";
            this.index = a, this.redraw(), this.onChange();
        }, d.prototype.getIndex = function() {
            return this.index;
        }, d.prototype.get = function() {
            return this.values[this.index];
        }, d.prototype._onMouseDown = function(a) {
            var b = a.which ? 1 === a.which : 1 === a.button;
            if (b) {
                this.startClientX = a.clientX, this.startSlideX = parseFloat(this.frame.slide.style.left), 
                this.frame.style.cursor = "move";
                var c = this;
                this.onmousemove = function(a) {
                    c._onMouseMove(a);
                }, this.onmouseup = function(a) {
                    c._onMouseUp(a);
                }, e.addEventListener(document, "mousemove", this.onmousemove), e.addEventListener(document, "mouseup", this.onmouseup), 
                e.preventDefault(a);
            }
        }, d.prototype.leftToIndex = function(a) {
            var b = parseFloat(this.frame.bar.style.width) - this.frame.slide.clientWidth - 10, c = a - 3, d = Math.round(c / b * (this.values.length - 1));
            return 0 > d && (d = 0), d > this.values.length - 1 && (d = this.values.length - 1), 
            d;
        }, d.prototype.indexToLeft = function(a) {
            var b = parseFloat(this.frame.bar.style.width) - this.frame.slide.clientWidth - 10, c = a / (this.values.length - 1) * b, d = c + 3;
            return d;
        }, d.prototype._onMouseMove = function(a) {
            var b = a.clientX - this.startClientX, c = this.startSlideX + b, d = this.leftToIndex(c);
            this.setIndex(d), e.preventDefault();
        }, d.prototype._onMouseUp = function(a) {
            this.frame.style.cursor = "auto", e.removeEventListener(document, "mousemove", this.onmousemove), 
            e.removeEventListener(document, "mouseup", this.onmouseup), e.preventDefault();
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        function c(a, b, c, d) {
            this._start = 0, this._end = 0, this._step = 1, this.prettyStep = !0, this.precision = 5, 
            this._current = 0, this.setRange(a, b, c, d);
        }
        c.prototype.setRange = function(a, b, c, d) {
            this._start = a ? a : 0, this._end = b ? b : 0, this.setStep(c, d);
        }, c.prototype.setStep = function(a, b) {
            void 0 === a || 0 >= a || (void 0 !== b && (this.prettyStep = b), this.prettyStep === !0 ? this._step = c.calculatePrettyStep(a) : this._step = a);
        }, c.calculatePrettyStep = function(a) {
            var b = function(a) {
                return Math.log(a) / Math.LN10;
            }, c = Math.pow(10, Math.round(b(a))), d = 2 * Math.pow(10, Math.round(b(a / 2))), e = 5 * Math.pow(10, Math.round(b(a / 5))), f = c;
            return Math.abs(d - a) <= Math.abs(f - a) && (f = d), Math.abs(e - a) <= Math.abs(f - a) && (f = e), 
            0 >= f && (f = 1), f;
        }, c.prototype.getCurrent = function() {
            return parseFloat(this._current.toPrecision(this.precision));
        }, c.prototype.getStep = function() {
            return this._step;
        }, c.prototype.start = function() {
            this._current = this._start - this._start % this._step;
        }, c.prototype.next = function() {
            this._current += this._step;
        }, c.prototype.end = function() {
            return this._current > this._end;
        }, a.exports = c;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b, c, d) {
            if (!(this instanceof e)) throw new SyntaxError("Constructor must be called with the new operator");
            if (!(Array.isArray(c) || c instanceof l || c instanceof m) && c instanceof Object) {
                var f = d;
                d = c, c = f;
            }
            var g = this;
            this.defaultOptions = {
                start: null,
                end: null,
                autoResize: !0,
                throttleRedraw: 0,
                orientation: {
                    axis: "bottom",
                    item: "bottom"
                },
                moment: j,
                width: null,
                height: null,
                maxHeight: null,
                minHeight: null
            }, this.options = k.deepExtend({}, this.defaultOptions), this._create(a), this.components = [], 
            this.body = {
                dom: this.dom,
                domProps: this.props,
                emitter: {
                    on: this.on.bind(this),
                    off: this.off.bind(this),
                    emit: this.emit.bind(this)
                },
                hiddenDates: [],
                util: {
                    getScale: function() {
                        return g.timeAxis.step.scale;
                    },
                    getStep: function() {
                        return g.timeAxis.step.step;
                    },
                    toScreen: g._toScreen.bind(g),
                    toGlobalScreen: g._toGlobalScreen.bind(g),
                    toTime: g._toTime.bind(g),
                    toGlobalTime: g._toGlobalTime.bind(g)
                }
            }, this.range = new n(this.body), this.components.push(this.range), this.body.range = this.range, 
            this.timeAxis = new p(this.body), this.timeAxis2 = null, this.components.push(this.timeAxis), 
            this.currentTime = new q(this.body), this.components.push(this.currentTime), this.itemSet = new s(this.body), 
            this.components.push(this.itemSet), this.itemsData = null, this.groupsData = null, 
            this.on("tap", function(a) {
                g.emit("click", g.getEventProperties(a));
            }), this.on("doubletap", function(a) {
                g.emit("doubleClick", g.getEventProperties(a));
            }), this.dom.root.oncontextmenu = function(a) {
                g.emit("contextmenu", g.getEventProperties(a));
            }, this.fitDone = !1, this.on("changed", function() {
                if (null != this.itemsData && !g.fitDone) if (g.fitDone = !0, void 0 != g.options.start || void 0 != g.options.end) {
                    if (void 0 == g.options.start || void 0 == g.options.end) var a = g.getItemRange();
                    var b = void 0 != g.options.start ? g.options.start : a.min, c = void 0 != g.options.end ? g.options.end : a.max;
                    g.setWindow(b, c, {
                        animation: !1
                    });
                } else g.fit({
                    animation: !1
                });
            }), d && this.setOptions(d), c && this.setGroups(c), b && this.setItems(b), this._redraw();
        }
        var f = c(20), g = d(f), h = c(26), i = d(h), j = (c(12), c(22), c(2)), k = c(1), l = c(8), m = c(10), n = c(27), o = c(30), p = c(41), q = c(46), r = c(44), s = c(31), t = c(26).printStyle, u = c(47).allOptions, v = c(47).configureOptions;
        e.prototype = new o(), e.prototype._createConfigurator = function() {
            return new g["default"](this, this.dom.container, v);
        }, e.prototype.redraw = function() {
            this.itemSet && this.itemSet.markDirty({
                refreshItems: !0
            }), this._redraw();
        }, e.prototype.setOptions = function(a) {
            var b = i["default"].validate(a, u);
            if (b === !0 && console.log("%cErrors have been found in the supplied options object.", t), 
            o.prototype.setOptions.call(this, a), "type" in a && a.type !== this.options.type) {
                this.options.type = a.type;
                var c = this.itemsData;
                if (c) {
                    var d = this.getSelection();
                    this.setItems(null), this.setItems(c), this.setSelection(d);
                }
            }
        }, e.prototype.setItems = function(a) {
            var b;
            b = a ? a instanceof l || a instanceof m ? a : new l(a, {
                type: {
                    start: "Date",
                    end: "Date"
                }
            }) : null, this.itemsData = b, this.itemSet && this.itemSet.setItems(b);
        }, e.prototype.setGroups = function(a) {
            var b;
            b = a ? a instanceof l || a instanceof m ? a : new l(a) : null, this.groupsData = b, 
            this.itemSet.setGroups(b);
        }, e.prototype.setData = function(a) {
            a && a.groups && this.setGroups(a.groups), a && a.items && this.setItems(a.items);
        }, e.prototype.setSelection = function(a, b) {
            this.itemSet && this.itemSet.setSelection(a), b && b.focus && this.focus(a, b);
        }, e.prototype.getSelection = function() {
            return this.itemSet && this.itemSet.getSelection() || [];
        }, e.prototype.focus = function(a, b) {
            if (this.itemsData && void 0 != a) {
                var c = Array.isArray(a) ? a : [ a ], d = this.itemsData.getDataSet().get(c, {
                    type: {
                        start: "Date",
                        end: "Date"
                    }
                }), e = null, f = null;
                if (d.forEach(function(a) {
                    var b = a.start.valueOf(), c = "end" in a ? a.end.valueOf() : a.start.valueOf();
                    (null === e || e > b) && (e = b), (null === f || c > f) && (f = c);
                }), null !== e && null !== f) {
                    var g = (e + f) / 2, h = Math.max(this.range.end - this.range.start, 1.1 * (f - e)), i = b && void 0 !== b.animation ? b.animation : !0;
                    this.range.setRange(g - h / 2, g + h / 2, i);
                }
            }
        }, e.prototype.fit = function(a) {
            var b = a && void 0 !== a.animation ? a.animation : !0, c = this.getItemRange();
            this.range.setRange(c.min, c.max, b);
        }, e.prototype.getItemRange = function() {
            var a = this, b = this.getDataRange(), c = null !== b.min ? b.min.valueOf() : null, d = null !== b.max ? b.max.valueOf() : null, e = null, f = null;
            if (null != c && null != d) {
                var g, h, i, j, l;
                !function() {
                    var b = function(a) {
                        return k.convert(a.data.start, "Date").valueOf();
                    }, m = function(a) {
                        var b = void 0 != a.data.end ? a.data.end : a.data.start;
                        return k.convert(b, "Date").valueOf();
                    };
                    g = d - c, 0 >= g && (g = 10), h = g / a.props.center.width, k.forEach(a.itemSet.items, function(a) {
                        a.show(), a.repositionX();
                        var g = b(a), i = m(a), j = g - (a.getWidthLeft() + 10) * h, k = i + (a.getWidthRight() + 10) * h;
                        c > j && (c = j, e = a), k > d && (d = k, f = a);
                    }.bind(a)), e && f && (i = e.getWidthLeft() + 10, j = f.getWidthRight() + 10, l = a.props.center.width - i - j, 
                    l > 0 && (c = b(e) - i * g / l, d = m(f) + j * g / l));
                }();
            }
            return {
                min: null != c ? new Date(c) : null,
                max: null != d ? new Date(d) : null
            };
        }, e.prototype.getDataRange = function() {
            var a = null, b = null, c = this.itemsData && this.itemsData.getDataSet();
            return c && c.forEach(function(c) {
                var d = k.convert(c.start, "Date").valueOf(), e = k.convert(void 0 != c.end ? c.end : c.start, "Date").valueOf();
                (null === a || a > d) && (a = d), (null === b || e > b) && (b = e);
            }), {
                min: null != a ? new Date(a) : null,
                max: null != b ? new Date(b) : null
            };
        }, e.prototype.getEventProperties = function(a) {
            var b = a.center ? a.center.x : a.clientX, c = a.center ? a.center.y : a.clientY, d = b - k.getAbsoluteLeft(this.dom.centerContainer), e = c - k.getAbsoluteTop(this.dom.centerContainer), f = this.itemSet.itemFromTarget(a), g = this.itemSet.groupFromTarget(a), h = r.customTimeFromTarget(a), i = this.itemSet.options.snap || null, j = this.body.util.getScale(), l = this.body.util.getStep(), m = this._toTime(d), n = i ? i(m, j, l) : m, o = k.getTarget(a), p = null;
            return null != f ? p = "item" : null != h ? p = "custom-time" : k.hasParent(o, this.timeAxis.dom.foreground) ? p = "axis" : this.timeAxis2 && k.hasParent(o, this.timeAxis2.dom.foreground) ? p = "axis" : k.hasParent(o, this.itemSet.dom.labelSet) ? p = "group-label" : k.hasParent(o, this.currentTime.bar) ? p = "current-time" : k.hasParent(o, this.dom.center) && (p = "background"), 
            {
                event: a,
                item: f ? f.id : null,
                group: g ? g.groupId : null,
                what: p,
                pageX: a.srcEvent ? a.srcEvent.pageX : a.pageX,
                pageY: a.srcEvent ? a.srcEvent.pageY : a.pageY,
                x: d,
                y: e,
                time: m,
                snappedTime: n
            };
        }, a.exports = e;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, g = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), h = c(21), i = d(h), j = c(1), k = function() {
            function a(b, c, d) {
                var f = arguments.length <= 3 || void 0 === arguments[3] ? 1 : arguments[3];
                e(this, a), this.parent = b, this.changedOptions = [], this.container = c, this.allowCreation = !1, 
                this.options = {}, this.initialized = !1, this.popupCounter = 0, this.defaultOptions = {
                    enabled: !1,
                    filter: !0,
                    container: void 0,
                    showButton: !0
                }, j.extend(this.options, this.defaultOptions), this.configureOptions = d, this.moduleOptions = {}, 
                this.domElements = [], this.popupDiv = {}, this.popupLimit = 5, this.popupHistory = {}, 
                this.colorPicker = new i["default"](f), this.wrapper = void 0;
            }
            return g(a, [ {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        this.popupHistory = {}, this._removePopup();
                        var b = !0;
                        "string" == typeof a ? this.options.filter = a : a instanceof Array ? this.options.filter = a.join() : "object" === ("undefined" == typeof a ? "undefined" : f(a)) ? (void 0 !== a.container && (this.options.container = a.container), 
                        void 0 !== a.filter && (this.options.filter = a.filter), void 0 !== a.showButton && (this.options.showButton = a.showButton), 
                        void 0 !== a.enabled && (b = a.enabled)) : "boolean" == typeof a ? (this.options.filter = !0, 
                        b = a) : "function" == typeof a && (this.options.filter = a, b = !0), this.options.filter === !1 && (b = !1), 
                        this.options.enabled = b;
                    }
                    this._clean();
                }
            }, {
                key: "setModuleOptions",
                value: function(a) {
                    this.moduleOptions = a, this.options.enabled === !0 && (this._clean(), void 0 !== this.options.container && (this.container = this.options.container), 
                    this._create());
                }
            }, {
                key: "_create",
                value: function() {
                    var a = this;
                    this._clean(), this.changedOptions = [];
                    var b = this.options.filter, c = 0, d = !1;
                    for (var e in this.configureOptions) this.configureOptions.hasOwnProperty(e) && (this.allowCreation = !1, 
                    d = !1, "function" == typeof b ? (d = b(e, []), d = d || this._handleObject(this.configureOptions[e], [ e ], !0)) : b !== !0 && -1 === b.indexOf(e) || (d = !0), 
                    d !== !1 && (this.allowCreation = !0, c > 0 && this._makeItem([]), this._makeHeader(e), 
                    this._handleObject(this.configureOptions[e], [ e ])), c++);
                    this.options.showButton === !0 && !function() {
                        var b = document.createElement("div");
                        b.className = "vis-configuration vis-config-button", b.innerHTML = "generate options", 
                        b.onclick = function() {
                            a._printOptions();
                        }, b.onmouseover = function() {
                            b.className = "vis-configuration vis-config-button hover";
                        }, b.onmouseout = function() {
                            b.className = "vis-configuration vis-config-button";
                        }, a.optionsContainer = document.createElement("div"), a.optionsContainer.className = "vis-configuration vis-config-option-container", 
                        a.domElements.push(a.optionsContainer), a.domElements.push(b);
                    }(), this._push();
                }
            }, {
                key: "_push",
                value: function() {
                    this.wrapper = document.createElement("div"), this.wrapper.className = "vis-configuration-wrapper", 
                    this.container.appendChild(this.wrapper);
                    for (var a = 0; a < this.domElements.length; a++) this.wrapper.appendChild(this.domElements[a]);
                    this._showPopupIfNeeded();
                }
            }, {
                key: "_clean",
                value: function() {
                    for (var a = 0; a < this.domElements.length; a++) this.wrapper.removeChild(this.domElements[a]);
                    void 0 !== this.wrapper && (this.container.removeChild(this.wrapper), this.wrapper = void 0), 
                    this.domElements = [], this._removePopup();
                }
            }, {
                key: "_getValue",
                value: function(a) {
                    for (var b = this.moduleOptions, c = 0; c < a.length; c++) {
                        if (void 0 === b[a[c]]) {
                            b = void 0;
                            break;
                        }
                        b = b[a[c]];
                    }
                    return b;
                }
            }, {
                key: "_makeItem",
                value: function(a) {
                    var b = arguments, c = this;
                    if (this.allowCreation === !0) {
                        var d, e, g, h = function() {
                            var f = document.createElement("div");
                            for (f.className = "vis-configuration vis-config-item vis-config-s" + a.length, 
                            d = b.length, e = Array(d > 1 ? d - 1 : 0), g = 1; d > g; g++) e[g - 1] = b[g];
                            return e.forEach(function(a) {
                                f.appendChild(a);
                            }), c.domElements.push(f), {
                                v: c.domElements.length
                            };
                        }();
                        if ("object" === ("undefined" == typeof h ? "undefined" : f(h))) return h.v;
                    }
                    return 0;
                }
            }, {
                key: "_makeHeader",
                value: function(a) {
                    var b = document.createElement("div");
                    b.className = "vis-configuration vis-config-header", b.innerHTML = a, this._makeItem([], b);
                }
            }, {
                key: "_makeLabel",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = document.createElement("div");
                    return d.className = "vis-configuration vis-config-label vis-config-s" + b.length, 
                    c === !0 ? d.innerHTML = "<i><b>" + a + ":</b></i>" : d.innerHTML = a + ":", d;
                }
            }, {
                key: "_makeDropdown",
                value: function(a, b, c) {
                    var d = document.createElement("select");
                    d.className = "vis-configuration vis-config-select";
                    var e = 0;
                    void 0 !== b && -1 !== a.indexOf(b) && (e = a.indexOf(b));
                    for (var f = 0; f < a.length; f++) {
                        var g = document.createElement("option");
                        g.value = a[f], f === e && (g.selected = "selected"), g.innerHTML = a[f], d.appendChild(g);
                    }
                    var h = this;
                    d.onchange = function() {
                        h._update(this.value, c);
                    };
                    var i = this._makeLabel(c[c.length - 1], c);
                    this._makeItem(c, i, d);
                }
            }, {
                key: "_makeRange",
                value: function(a, b, c) {
                    var d = a[0], e = a[1], f = a[2], g = a[3], h = document.createElement("input");
                    h.className = "vis-configuration vis-config-range";
                    try {
                        h.type = "range", h.min = e, h.max = f;
                    } catch (i) {}
                    h.step = g;
                    var j = "", k = 0;
                    if (void 0 !== b) {
                        var l = 1.2;
                        0 > b && e > b * l ? (h.min = Math.ceil(b * l), k = h.min, j = "range increased") : e > b / l && (h.min = Math.ceil(b / l), 
                        k = h.min, j = "range increased"), b * l > f && 1 !== f && (h.max = Math.ceil(b * l), 
                        k = h.max, j = "range increased"), h.value = b;
                    } else h.value = d;
                    var m = document.createElement("input");
                    m.className = "vis-configuration vis-config-rangeinput", m.value = h.value;
                    var n = this;
                    h.onchange = function() {
                        m.value = this.value, n._update(Number(this.value), c);
                    }, h.oninput = function() {
                        m.value = this.value;
                    };
                    var o = this._makeLabel(c[c.length - 1], c), p = this._makeItem(c, o, h, m);
                    "" !== j && this.popupHistory[p] !== k && (this.popupHistory[p] = k, this._setupPopup(j, p));
                }
            }, {
                key: "_setupPopup",
                value: function(a, b) {
                    var c = this;
                    if (this.initialized === !0 && this.allowCreation === !0 && this.popupCounter < this.popupLimit) {
                        var d = document.createElement("div");
                        d.id = "vis-configuration-popup", d.className = "vis-configuration-popup", d.innerHTML = a, 
                        d.onclick = function() {
                            c._removePopup();
                        }, this.popupCounter += 1, this.popupDiv = {
                            html: d,
                            index: b
                        };
                    }
                }
            }, {
                key: "_removePopup",
                value: function() {
                    void 0 !== this.popupDiv.html && (this.popupDiv.html.parentNode.removeChild(this.popupDiv.html), 
                    clearTimeout(this.popupDiv.hideTimeout), clearTimeout(this.popupDiv.deleteTimeout), 
                    this.popupDiv = {});
                }
            }, {
                key: "_showPopupIfNeeded",
                value: function() {
                    var a = this;
                    if (void 0 !== this.popupDiv.html) {
                        var b = this.domElements[this.popupDiv.index], c = b.getBoundingClientRect();
                        this.popupDiv.html.style.left = c.left + "px", this.popupDiv.html.style.top = c.top - 30 + "px", 
                        document.body.appendChild(this.popupDiv.html), this.popupDiv.hideTimeout = setTimeout(function() {
                            a.popupDiv.html.style.opacity = 0;
                        }, 1500), this.popupDiv.deleteTimeout = setTimeout(function() {
                            a._removePopup();
                        }, 1800);
                    }
                }
            }, {
                key: "_makeCheckbox",
                value: function(a, b, c) {
                    var d = document.createElement("input");
                    d.type = "checkbox", d.className = "vis-configuration vis-config-checkbox", d.checked = a, 
                    void 0 !== b && (d.checked = b, b !== a && ("object" === ("undefined" == typeof a ? "undefined" : f(a)) ? b !== a.enabled && this.changedOptions.push({
                        path: c,
                        value: b
                    }) : this.changedOptions.push({
                        path: c,
                        value: b
                    })));
                    var e = this;
                    d.onchange = function() {
                        e._update(this.checked, c);
                    };
                    var g = this._makeLabel(c[c.length - 1], c);
                    this._makeItem(c, g, d);
                }
            }, {
                key: "_makeTextInput",
                value: function(a, b, c) {
                    var d = document.createElement("input");
                    d.type = "text", d.className = "vis-configuration vis-config-text", d.value = b, 
                    b !== a && this.changedOptions.push({
                        path: c,
                        value: b
                    });
                    var e = this;
                    d.onchange = function() {
                        e._update(this.value, c);
                    };
                    var f = this._makeLabel(c[c.length - 1], c);
                    this._makeItem(c, f, d);
                }
            }, {
                key: "_makeColorField",
                value: function(a, b, c) {
                    var d = this, e = a[1], f = document.createElement("div");
                    b = void 0 === b ? e : b, "none" !== b ? (f.className = "vis-configuration vis-config-colorBlock", 
                    f.style.backgroundColor = b) : f.className = "vis-configuration vis-config-colorBlock none", 
                    b = void 0 === b ? e : b, f.onclick = function() {
                        d._showColorPicker(b, f, c);
                    };
                    var g = this._makeLabel(c[c.length - 1], c);
                    this._makeItem(c, g, f);
                }
            }, {
                key: "_showColorPicker",
                value: function(a, b, c) {
                    var d = this;
                    b.onclick = function() {}, this.colorPicker.insertTo(b), this.colorPicker.show(), 
                    this.colorPicker.setColor(a), this.colorPicker.setUpdateCallback(function(a) {
                        var e = "rgba(" + a.r + "," + a.g + "," + a.b + "," + a.a + ")";
                        b.style.backgroundColor = e, d._update(e, c);
                    }), this.colorPicker.setCloseCallback(function() {
                        b.onclick = function() {
                            d._showColorPicker(a, b, c);
                        };
                    });
                }
            }, {
                key: "_handleObject",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1], c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = !1, e = this.options.filter, f = !1;
                    for (var g in a) if (a.hasOwnProperty(g)) {
                        d = !0;
                        var h = a[g], i = j.copyAndExtendArray(b, g);
                        if ("function" == typeof e && (d = e(g, b), d === !1 && !(h instanceof Array) && "string" != typeof h && "boolean" != typeof h && h instanceof Object && (this.allowCreation = !1, 
                        d = this._handleObject(h, i, !0), this.allowCreation = c === !1)), d !== !1) {
                            f = !0;
                            var k = this._getValue(i);
                            if (h instanceof Array) this._handleArray(h, k, i); else if ("string" == typeof h) this._makeTextInput(h, k, i); else if ("boolean" == typeof h) this._makeCheckbox(h, k, i); else if (h instanceof Object) {
                                var l = !0;
                                if (-1 !== b.indexOf("physics") && this.moduleOptions.physics.solver !== g && (l = !1), 
                                l === !0) if (void 0 !== h.enabled) {
                                    var m = j.copyAndExtendArray(i, "enabled"), n = this._getValue(m);
                                    if (n === !0) {
                                        var o = this._makeLabel(g, i, !0);
                                        this._makeItem(i, o), f = this._handleObject(h, i) || f;
                                    } else this._makeCheckbox(h, n, i);
                                } else {
                                    var p = this._makeLabel(g, i, !0);
                                    this._makeItem(i, p), f = this._handleObject(h, i) || f;
                                }
                            } else console.error("dont know how to handle", h, g, i);
                        }
                    }
                    return f;
                }
            }, {
                key: "_handleArray",
                value: function(a, b, c) {
                    "string" == typeof a[0] && "color" === a[0] ? (this._makeColorField(a, b, c), a[1] !== b && this.changedOptions.push({
                        path: c,
                        value: b
                    })) : "string" == typeof a[0] ? (this._makeDropdown(a, b, c), a[0] !== b && this.changedOptions.push({
                        path: c,
                        value: b
                    })) : "number" == typeof a[0] && (this._makeRange(a, b, c), a[0] !== b && this.changedOptions.push({
                        path: c,
                        value: Number(b)
                    }));
                }
            }, {
                key: "_update",
                value: function(a, b) {
                    var c = this._constructOptions(a, b);
                    this.parent.body && this.parent.body.emitter && this.parent.body.emitter.emit && this.parent.body.emitter.emit("configChange", c), 
                    this.initialized = !0, this.parent.setOptions(c);
                }
            }, {
                key: "_constructOptions",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? {} : arguments[2], d = c;
                    a = "true" === a ? !0 : a, a = "false" === a ? !1 : a;
                    for (var e = 0; e < b.length; e++) "global" !== b[e] && (void 0 === d[b[e]] && (d[b[e]] = {}), 
                    e !== b.length - 1 ? d = d[b[e]] : d[b[e]] = a);
                    return c;
                }
            }, {
                key: "_printOptions",
                value: function() {
                    var a = this.getOptions();
                    this.optionsContainer.innerHTML = "<pre>var options = " + JSON.stringify(a, null, 2) + "</pre>";
                }
            }, {
                key: "getOptions",
                value: function() {
                    for (var a = {}, b = 0; b < this.changedOptions.length; b++) this._constructOptions(this.changedOptions[b].value, this.changedOptions[b].path, a);
                    return a;
                }
            } ]), a;
        }();
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = c(22), g = c(25), h = c(1), i = function() {
            function a() {
                var b = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0];
                d(this, a), this.pixelRatio = b, this.generated = !1, this.centerCoordinates = {
                    x: 144.5,
                    y: 144.5
                }, this.r = 289 * .49, this.color = {
                    r: 255,
                    g: 255,
                    b: 255,
                    a: 1
                }, this.hueCircle = void 0, this.initialColor = {
                    r: 255,
                    g: 255,
                    b: 255,
                    a: 1
                }, this.previousColor = void 0, this.applied = !1, this.updateCallback = function() {}, 
                this.closeCallback = function() {}, this._create();
            }
            return e(a, [ {
                key: "insertTo",
                value: function(a) {
                    void 0 !== this.hammer && (this.hammer.destroy(), this.hammer = void 0), this.container = a, 
                    this.container.appendChild(this.frame), this._bindHammer(), this._setSize();
                }
            }, {
                key: "setUpdateCallback",
                value: function(a) {
                    if ("function" != typeof a) throw new Error("Function attempted to set as colorPicker update callback is not a function.");
                    this.updateCallback = a;
                }
            }, {
                key: "setCloseCallback",
                value: function(a) {
                    if ("function" != typeof a) throw new Error("Function attempted to set as colorPicker closing callback is not a function.");
                    this.closeCallback = a;
                }
            }, {
                key: "_isColorString",
                value: function(a) {
                    var b = {
                        black: "#000000",
                        navy: "#000080",
                        darkblue: "#00008B",
                        mediumblue: "#0000CD",
                        blue: "#0000FF",
                        darkgreen: "#006400",
                        green: "#008000",
                        teal: "#008080",
                        darkcyan: "#008B8B",
                        deepskyblue: "#00BFFF",
                        darkturquoise: "#00CED1",
                        mediumspringgreen: "#00FA9A",
                        lime: "#00FF00",
                        springgreen: "#00FF7F",
                        aqua: "#00FFFF",
                        cyan: "#00FFFF",
                        midnightblue: "#191970",
                        dodgerblue: "#1E90FF",
                        lightseagreen: "#20B2AA",
                        forestgreen: "#228B22",
                        seagreen: "#2E8B57",
                        darkslategray: "#2F4F4F",
                        limegreen: "#32CD32",
                        mediumseagreen: "#3CB371",
                        turquoise: "#40E0D0",
                        royalblue: "#4169E1",
                        steelblue: "#4682B4",
                        darkslateblue: "#483D8B",
                        mediumturquoise: "#48D1CC",
                        indigo: "#4B0082",
                        darkolivegreen: "#556B2F",
                        cadetblue: "#5F9EA0",
                        cornflowerblue: "#6495ED",
                        mediumaquamarine: "#66CDAA",
                        dimgray: "#696969",
                        slateblue: "#6A5ACD",
                        olivedrab: "#6B8E23",
                        slategray: "#708090",
                        lightslategray: "#778899",
                        mediumslateblue: "#7B68EE",
                        lawngreen: "#7CFC00",
                        chartreuse: "#7FFF00",
                        aquamarine: "#7FFFD4",
                        maroon: "#800000",
                        purple: "#800080",
                        olive: "#808000",
                        gray: "#808080",
                        skyblue: "#87CEEB",
                        lightskyblue: "#87CEFA",
                        blueviolet: "#8A2BE2",
                        darkred: "#8B0000",
                        darkmagenta: "#8B008B",
                        saddlebrown: "#8B4513",
                        darkseagreen: "#8FBC8F",
                        lightgreen: "#90EE90",
                        mediumpurple: "#9370D8",
                        darkviolet: "#9400D3",
                        palegreen: "#98FB98",
                        darkorchid: "#9932CC",
                        yellowgreen: "#9ACD32",
                        sienna: "#A0522D",
                        brown: "#A52A2A",
                        darkgray: "#A9A9A9",
                        lightblue: "#ADD8E6",
                        greenyellow: "#ADFF2F",
                        paleturquoise: "#AFEEEE",
                        lightsteelblue: "#B0C4DE",
                        powderblue: "#B0E0E6",
                        firebrick: "#B22222",
                        darkgoldenrod: "#B8860B",
                        mediumorchid: "#BA55D3",
                        rosybrown: "#BC8F8F",
                        darkkhaki: "#BDB76B",
                        silver: "#C0C0C0",
                        mediumvioletred: "#C71585",
                        indianred: "#CD5C5C",
                        peru: "#CD853F",
                        chocolate: "#D2691E",
                        tan: "#D2B48C",
                        lightgrey: "#D3D3D3",
                        palevioletred: "#D87093",
                        thistle: "#D8BFD8",
                        orchid: "#DA70D6",
                        goldenrod: "#DAA520",
                        crimson: "#DC143C",
                        gainsboro: "#DCDCDC",
                        plum: "#DDA0DD",
                        burlywood: "#DEB887",
                        lightcyan: "#E0FFFF",
                        lavender: "#E6E6FA",
                        darksalmon: "#E9967A",
                        violet: "#EE82EE",
                        palegoldenrod: "#EEE8AA",
                        lightcoral: "#F08080",
                        khaki: "#F0E68C",
                        aliceblue: "#F0F8FF",
                        honeydew: "#F0FFF0",
                        azure: "#F0FFFF",
                        sandybrown: "#F4A460",
                        wheat: "#F5DEB3",
                        beige: "#F5F5DC",
                        whitesmoke: "#F5F5F5",
                        mintcream: "#F5FFFA",
                        ghostwhite: "#F8F8FF",
                        salmon: "#FA8072",
                        antiquewhite: "#FAEBD7",
                        linen: "#FAF0E6",
                        lightgoldenrodyellow: "#FAFAD2",
                        oldlace: "#FDF5E6",
                        red: "#FF0000",
                        fuchsia: "#FF00FF",
                        magenta: "#FF00FF",
                        deeppink: "#FF1493",
                        orangered: "#FF4500",
                        tomato: "#FF6347",
                        hotpink: "#FF69B4",
                        coral: "#FF7F50",
                        darkorange: "#FF8C00",
                        lightsalmon: "#FFA07A",
                        orange: "#FFA500",
                        lightpink: "#FFB6C1",
                        pink: "#FFC0CB",
                        gold: "#FFD700",
                        peachpuff: "#FFDAB9",
                        navajowhite: "#FFDEAD",
                        moccasin: "#FFE4B5",
                        bisque: "#FFE4C4",
                        mistyrose: "#FFE4E1",
                        blanchedalmond: "#FFEBCD",
                        papayawhip: "#FFEFD5",
                        lavenderblush: "#FFF0F5",
                        seashell: "#FFF5EE",
                        cornsilk: "#FFF8DC",
                        lemonchiffon: "#FFFACD",
                        floralwhite: "#FFFAF0",
                        snow: "#FFFAFA",
                        yellow: "#FFFF00",
                        lightyellow: "#FFFFE0",
                        ivory: "#FFFFF0",
                        white: "#FFFFFF"
                    };
                    return "string" == typeof a ? b[a] : void 0;
                }
            }, {
                key: "setColor",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    if ("none" !== a) {
                        var c = void 0, d = this._isColorString(a);
                        if (void 0 !== d && (a = d), h.isString(a) === !0) {
                            if (h.isValidRGB(a) === !0) {
                                var e = a.substr(4).substr(0, a.length - 5).split(",");
                                c = {
                                    r: e[0],
                                    g: e[1],
                                    b: e[2],
                                    a: 1
                                };
                            } else if (h.isValidRGBA(a) === !0) {
                                var f = a.substr(5).substr(0, a.length - 6).split(",");
                                c = {
                                    r: f[0],
                                    g: f[1],
                                    b: f[2],
                                    a: f[3]
                                };
                            } else if (h.isValidHex(a) === !0) {
                                var g = h.hexToRGB(a);
                                c = {
                                    r: g.r,
                                    g: g.g,
                                    b: g.b,
                                    a: 1
                                };
                            }
                        } else if (a instanceof Object && void 0 !== a.r && void 0 !== a.g && void 0 !== a.b) {
                            var i = void 0 !== a.a ? a.a : "1.0";
                            c = {
                                r: a.r,
                                g: a.g,
                                b: a.b,
                                a: i
                            };
                        }
                        if (void 0 === c) throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: " + JSON.stringify(a));
                        this._setColor(c, b);
                    }
                }
            }, {
                key: "show",
                value: function() {
                    void 0 !== this.closeCallback && (this.closeCallback(), this.closeCallback = void 0), 
                    this.applied = !1, this.frame.style.display = "block", this._generateHueCircle();
                }
            }, {
                key: "_hide",
                value: function() {
                    var a = this, b = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0];
                    b === !0 && (this.previousColor = h.extend({}, this.color)), this.applied === !0 && this.updateCallback(this.initialColor), 
                    this.frame.style.display = "none", setTimeout(function() {
                        void 0 !== a.closeCallback && (a.closeCallback(), a.closeCallback = void 0);
                    }, 0);
                }
            }, {
                key: "_save",
                value: function() {
                    this.updateCallback(this.color), this.applied = !1, this._hide();
                }
            }, {
                key: "_apply",
                value: function() {
                    this.applied = !0, this.updateCallback(this.color), this._updatePicker(this.color);
                }
            }, {
                key: "_loadLast",
                value: function() {
                    void 0 !== this.previousColor ? this.setColor(this.previousColor, !1) : alert("There is no last color to load...");
                }
            }, {
                key: "_setColor",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    b === !0 && (this.initialColor = h.extend({}, a)), this.color = a;
                    var c = h.RGBToHSV(a.r, a.g, a.b), d = 2 * Math.PI, e = this.r * c.s, f = this.centerCoordinates.x + e * Math.sin(d * c.h), g = this.centerCoordinates.y + e * Math.cos(d * c.h);
                    this.colorPickerSelector.style.left = f - .5 * this.colorPickerSelector.clientWidth + "px", 
                    this.colorPickerSelector.style.top = g - .5 * this.colorPickerSelector.clientHeight + "px", 
                    this._updatePicker(a);
                }
            }, {
                key: "_setOpacity",
                value: function(a) {
                    this.color.a = a / 100, this._updatePicker(this.color);
                }
            }, {
                key: "_setBrightness",
                value: function(a) {
                    var b = h.RGBToHSV(this.color.r, this.color.g, this.color.b);
                    b.v = a / 100;
                    var c = h.HSVToRGB(b.h, b.s, b.v);
                    c.a = this.color.a, this.color = c, this._updatePicker();
                }
            }, {
                key: "_updatePicker",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? this.color : arguments[0], b = h.RGBToHSV(a.r, a.g, a.b), c = this.colorPickerCanvas.getContext("2d");
                    void 0 === this.pixelRation && (this.pixelRatio = (window.devicePixelRatio || 1) / (c.webkitBackingStorePixelRatio || c.mozBackingStorePixelRatio || c.msBackingStorePixelRatio || c.oBackingStorePixelRatio || c.backingStorePixelRatio || 1)), 
                    c.setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0);
                    var d = this.colorPickerCanvas.clientWidth, e = this.colorPickerCanvas.clientHeight;
                    c.clearRect(0, 0, d, e), c.putImageData(this.hueCircle, 0, 0), c.fillStyle = "rgba(0,0,0," + (1 - b.v) + ")", 
                    c.circle(this.centerCoordinates.x, this.centerCoordinates.y, this.r), c.fill(), 
                    this.brightnessRange.value = 100 * b.v, this.opacityRange.value = 100 * a.a, this.initialColorDiv.style.backgroundColor = "rgba(" + this.initialColor.r + "," + this.initialColor.g + "," + this.initialColor.b + "," + this.initialColor.a + ")", 
                    this.newColorDiv.style.backgroundColor = "rgba(" + this.color.r + "," + this.color.g + "," + this.color.b + "," + this.color.a + ")";
                }
            }, {
                key: "_setSize",
                value: function() {
                    this.colorPickerCanvas.style.width = "100%", this.colorPickerCanvas.style.height = "100%", 
                    this.colorPickerCanvas.width = 289 * this.pixelRatio, this.colorPickerCanvas.height = 289 * this.pixelRatio;
                }
            }, {
                key: "_create",
                value: function() {
                    if (this.frame = document.createElement("div"), this.frame.className = "vis-color-picker", 
                    this.colorPickerDiv = document.createElement("div"), this.colorPickerSelector = document.createElement("div"), 
                    this.colorPickerSelector.className = "vis-selector", this.colorPickerDiv.appendChild(this.colorPickerSelector), 
                    this.colorPickerCanvas = document.createElement("canvas"), this.colorPickerDiv.appendChild(this.colorPickerCanvas), 
                    this.colorPickerCanvas.getContext) {
                        var a = this.colorPickerCanvas.getContext("2d");
                        this.pixelRatio = (window.devicePixelRatio || 1) / (a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1), 
                        this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0);
                    } else {
                        var b = document.createElement("DIV");
                        b.style.color = "red", b.style.fontWeight = "bold", b.style.padding = "10px", b.innerHTML = "Error: your browser does not support HTML canvas", 
                        this.colorPickerCanvas.appendChild(b);
                    }
                    this.colorPickerDiv.className = "vis-color", this.opacityDiv = document.createElement("div"), 
                    this.opacityDiv.className = "vis-opacity", this.brightnessDiv = document.createElement("div"), 
                    this.brightnessDiv.className = "vis-brightness", this.arrowDiv = document.createElement("div"), 
                    this.arrowDiv.className = "vis-arrow", this.opacityRange = document.createElement("input");
                    try {
                        this.opacityRange.type = "range", this.opacityRange.min = "0", this.opacityRange.max = "100";
                    } catch (c) {}
                    this.opacityRange.value = "100", this.opacityRange.className = "vis-range", this.brightnessRange = document.createElement("input");
                    try {
                        this.brightnessRange.type = "range", this.brightnessRange.min = "0", this.brightnessRange.max = "100";
                    } catch (c) {}
                    this.brightnessRange.value = "100", this.brightnessRange.className = "vis-range", 
                    this.opacityDiv.appendChild(this.opacityRange), this.brightnessDiv.appendChild(this.brightnessRange);
                    var d = this;
                    this.opacityRange.onchange = function() {
                        d._setOpacity(this.value);
                    }, this.opacityRange.oninput = function() {
                        d._setOpacity(this.value);
                    }, this.brightnessRange.onchange = function() {
                        d._setBrightness(this.value);
                    }, this.brightnessRange.oninput = function() {
                        d._setBrightness(this.value);
                    }, this.brightnessLabel = document.createElement("div"), this.brightnessLabel.className = "vis-label vis-brightness", 
                    this.brightnessLabel.innerHTML = "brightness:", this.opacityLabel = document.createElement("div"), 
                    this.opacityLabel.className = "vis-label vis-opacity", this.opacityLabel.innerHTML = "opacity:", 
                    this.newColorDiv = document.createElement("div"), this.newColorDiv.className = "vis-new-color", 
                    this.newColorDiv.innerHTML = "new", this.initialColorDiv = document.createElement("div"), 
                    this.initialColorDiv.className = "vis-initial-color", this.initialColorDiv.innerHTML = "initial", 
                    this.cancelButton = document.createElement("div"), this.cancelButton.className = "vis-button vis-cancel", 
                    this.cancelButton.innerHTML = "cancel", this.cancelButton.onclick = this._hide.bind(this, !1), 
                    this.applyButton = document.createElement("div"), this.applyButton.className = "vis-button vis-apply", 
                    this.applyButton.innerHTML = "apply", this.applyButton.onclick = this._apply.bind(this), 
                    this.saveButton = document.createElement("div"), this.saveButton.className = "vis-button vis-save", 
                    this.saveButton.innerHTML = "save", this.saveButton.onclick = this._save.bind(this), 
                    this.loadButton = document.createElement("div"), this.loadButton.className = "vis-button vis-load", 
                    this.loadButton.innerHTML = "load last", this.loadButton.onclick = this._loadLast.bind(this), 
                    this.frame.appendChild(this.colorPickerDiv), this.frame.appendChild(this.arrowDiv), 
                    this.frame.appendChild(this.brightnessLabel), this.frame.appendChild(this.brightnessDiv), 
                    this.frame.appendChild(this.opacityLabel), this.frame.appendChild(this.opacityDiv), 
                    this.frame.appendChild(this.newColorDiv), this.frame.appendChild(this.initialColorDiv), 
                    this.frame.appendChild(this.cancelButton), this.frame.appendChild(this.applyButton), 
                    this.frame.appendChild(this.saveButton), this.frame.appendChild(this.loadButton);
                }
            }, {
                key: "_bindHammer",
                value: function() {
                    var a = this;
                    this.drag = {}, this.pinch = {}, this.hammer = new f(this.colorPickerCanvas), this.hammer.get("pinch").set({
                        enable: !0
                    }), g.onTouch(this.hammer, function(b) {
                        a._moveSelector(b);
                    }), this.hammer.on("tap", function(b) {
                        a._moveSelector(b);
                    }), this.hammer.on("panstart", function(b) {
                        a._moveSelector(b);
                    }), this.hammer.on("panmove", function(b) {
                        a._moveSelector(b);
                    }), this.hammer.on("panend", function(b) {
                        a._moveSelector(b);
                    });
                }
            }, {
                key: "_generateHueCircle",
                value: function() {
                    if (this.generated === !1) {
                        var a = this.colorPickerCanvas.getContext("2d");
                        void 0 === this.pixelRation && (this.pixelRatio = (window.devicePixelRatio || 1) / (a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1)), 
                        a.setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0);
                        var b = this.colorPickerCanvas.clientWidth, c = this.colorPickerCanvas.clientHeight;
                        a.clearRect(0, 0, b, c);
                        var d = void 0, e = void 0, f = void 0, g = void 0;
                        this.centerCoordinates = {
                            x: .5 * b,
                            y: .5 * c
                        }, this.r = .49 * b;
                        var i = 2 * Math.PI / 360, j = 1 / 360, k = 1 / this.r, l = void 0;
                        for (f = 0; 360 > f; f++) for (g = 0; g < this.r; g++) d = this.centerCoordinates.x + g * Math.sin(i * f), 
                        e = this.centerCoordinates.y + g * Math.cos(i * f), l = h.HSVToRGB(f * j, g * k, 1), 
                        a.fillStyle = "rgb(" + l.r + "," + l.g + "," + l.b + ")", a.fillRect(d - .5, e - .5, 2, 2);
                        a.strokeStyle = "rgba(0,0,0,1)", a.circle(this.centerCoordinates.x, this.centerCoordinates.y, this.r), 
                        a.stroke(), this.hueCircle = a.getImageData(0, 0, b, c);
                    }
                    this.generated = !0;
                }
            }, {
                key: "_moveSelector",
                value: function(a) {
                    var b = this.colorPickerDiv.getBoundingClientRect(), c = a.center.x - b.left, d = a.center.y - b.top, e = .5 * this.colorPickerDiv.clientHeight, f = .5 * this.colorPickerDiv.clientWidth, g = c - f, i = d - e, j = Math.atan2(g, i), k = .98 * Math.min(Math.sqrt(g * g + i * i), f), l = Math.cos(j) * k + e, m = Math.sin(j) * k + f;
                    this.colorPickerSelector.style.top = l - .5 * this.colorPickerSelector.clientHeight + "px", 
                    this.colorPickerSelector.style.left = m - .5 * this.colorPickerSelector.clientWidth + "px";
                    var n = j / (2 * Math.PI);
                    n = 0 > n ? n + 1 : n;
                    var o = k / this.r, p = h.RGBToHSV(this.color.r, this.color.g, this.color.b);
                    p.h = n, p.s = o;
                    var q = h.HSVToRGB(p.h, p.s, p.v);
                    q.a = this.color.a, this.color = q, this.initialColorDiv.style.backgroundColor = "rgba(" + this.initialColor.r + "," + this.initialColor.g + "," + this.initialColor.b + "," + this.initialColor.a + ")", 
                    this.newColorDiv.style.backgroundColor = "rgba(" + this.color.r + "," + this.color.g + "," + this.color.b + "," + this.color.a + ")";
                }
            } ]), a;
        }();
        b["default"] = i;
    }, function(a, b, c) {
        "use strict";
        if ("undefined" != typeof window) {
            var d = c(23), e = window.Hammer || c(24);
            a.exports = d(e, {
                preventDefault: "mouse"
            });
        } else a.exports = function() {
            throw Error("hammer.js is only available in a browser, not in node.js.");
        };
    }, function(a, b, c) {
        var d, e, f;
        !function(c) {
            e = [], d = c, f = "function" == typeof d ? d.apply(b, e) : d, !(void 0 !== f && (a.exports = f));
        }(function() {
            var a = null;
            return function b(c, d) {
                function e(a) {
                    return a.match(/[^ ]+/g);
                }
                function f(b) {
                    if ("hammer.input" !== b.type) {
                        if (b.srcEvent._handled || (b.srcEvent._handled = {}), b.srcEvent._handled[b.type]) return;
                        b.srcEvent._handled[b.type] = !0;
                    }
                    var c = !1;
                    b.stopPropagation = function() {
                        c = !0;
                    };
                    var d = b.srcEvent.stopPropagation.bind(b.srcEvent);
                    "function" == typeof d && (b.srcEvent.stopPropagation = function() {
                        d(), b.stopPropagation();
                    }), b.firstTarget = a;
                    for (var e = a; e && !c; ) {
                        var f = e.hammer;
                        if (f) for (var g, h = 0; h < f.length; h++) if (g = f[h]._handlers[b.type]) for (var i = 0; i < g.length && !c; i++) g[i](b);
                        e = e.parentNode;
                    }
                }
                var g = d || {
                    preventDefault: !1
                };
                if (c.Manager) {
                    var h = c, i = function(a, c) {
                        var d = Object.create(g);
                        return c && h.assign(d, c), b(new h(a, d), d);
                    };
                    return h.assign(i, h), i.Manager = function(a, c) {
                        var d = Object.create(g);
                        return c && h.assign(d, c), b(new h.Manager(a, d), d);
                    }, i;
                }
                var j = Object.create(c), k = c.element;
                return k.hammer || (k.hammer = []), k.hammer.push(j), c.on("hammer.input", function(b) {
                    g.preventDefault !== !0 && g.preventDefault !== b.pointerType || b.preventDefault(), 
                    b.isFirst && (a = b.target);
                }), j._handlers = {}, j.on = function(a, b) {
                    return e(a).forEach(function(a) {
                        var d = j._handlers[a];
                        d || (j._handlers[a] = d = [], c.on(a, f)), d.push(b);
                    }), j;
                }, j.off = function(a, b) {
                    return e(a).forEach(function(a) {
                        var d = j._handlers[a];
                        d && (d = b ? d.filter(function(a) {
                            return a !== b;
                        }) : [], d.length > 0 ? j._handlers[a] = d : (c.off(a, f), delete j._handlers[a]));
                    }), j;
                }, j.emit = function(b, d) {
                    a = d.target, c.emit(b, d);
                }, j.destroy = function() {
                    var a = c.element.hammer, b = a.indexOf(j);
                    -1 !== b && a.splice(b, 1), a.length || delete c.element.hammer, j._handlers = {}, 
                    c.destroy();
                }, j;
            };
        });
    }, function(a, b, c) {
        var d;
        !function(e, f, g, h) {
            "use strict";
            function i(a, b, c) {
                return setTimeout(n(a, c), b);
            }
            function j(a, b, c) {
                return Array.isArray(a) ? (k(a, c[b], c), !0) : !1;
            }
            function k(a, b, c) {
                var d;
                if (a) if (a.forEach) a.forEach(b, c); else if (a.length !== h) for (d = 0; d < a.length; ) b.call(c, a[d], d, a), 
                d++; else for (d in a) a.hasOwnProperty(d) && b.call(c, a[d], d, a);
            }
            function l(a, b, c) {
                var d = "DEPRECATED METHOD: " + b + "\n" + c + " AT \n";
                return function() {
                    var b = new Error("get-stack-trace"), c = b && b.stack ? b.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace", f = e.console && (e.console.warn || e.console.log);
                    return f && f.call(e.console, d, c), a.apply(this, arguments);
                };
            }
            function m(a, b, c) {
                var d, e = b.prototype;
                d = a.prototype = Object.create(e), d.constructor = a, d._super = e, c && la(d, c);
            }
            function n(a, b) {
                return function() {
                    return a.apply(b, arguments);
                };
            }
            function o(a, b) {
                return typeof a == oa ? a.apply(b ? b[0] || h : h, b) : a;
            }
            function p(a, b) {
                return a === h ? b : a;
            }
            function q(a, b, c) {
                k(u(b), function(b) {
                    a.addEventListener(b, c, !1);
                });
            }
            function r(a, b, c) {
                k(u(b), function(b) {
                    a.removeEventListener(b, c, !1);
                });
            }
            function s(a, b) {
                for (;a; ) {
                    if (a == b) return !0;
                    a = a.parentNode;
                }
                return !1;
            }
            function t(a, b) {
                return a.indexOf(b) > -1;
            }
            function u(a) {
                return a.trim().split(/\s+/g);
            }
            function v(a, b, c) {
                if (a.indexOf && !c) return a.indexOf(b);
                for (var d = 0; d < a.length; ) {
                    if (c && a[d][c] == b || !c && a[d] === b) return d;
                    d++;
                }
                return -1;
            }
            function w(a) {
                return Array.prototype.slice.call(a, 0);
            }
            function x(a, b, c) {
                for (var d = [], e = [], f = 0; f < a.length; ) {
                    var g = b ? a[f][b] : a[f];
                    v(e, g) < 0 && d.push(a[f]), e[f] = g, f++;
                }
                return c && (d = b ? d.sort(function(a, c) {
                    return a[b] > c[b];
                }) : d.sort()), d;
            }
            function y(a, b) {
                for (var c, d, e = b[0].toUpperCase() + b.slice(1), f = 0; f < ma.length; ) {
                    if (c = ma[f], d = c ? c + e : b, d in a) return d;
                    f++;
                }
                return h;
            }
            function z() {
                return ua++;
            }
            function A(a) {
                var b = a.ownerDocument || a;
                return b.defaultView || b.parentWindow || e;
            }
            function B(a, b) {
                var c = this;
                this.manager = a, this.callback = b, this.element = a.element, this.target = a.options.inputTarget, 
                this.domHandler = function(b) {
                    o(a.options.enable, [ a ]) && c.handler(b);
                }, this.init();
            }
            function C(a) {
                var b, c = a.options.inputClass;
                return new (b = c ? c : xa ? Q : ya ? T : wa ? V : P)(a, D);
            }
            function D(a, b, c) {
                var d = c.pointers.length, e = c.changedPointers.length, f = b & Ea && d - e === 0, g = b & (Ga | Ha) && d - e === 0;
                c.isFirst = !!f, c.isFinal = !!g, f && (a.session = {}), c.eventType = b, E(a, c), 
                a.emit("hammer.input", c), a.recognize(c), a.session.prevInput = c;
            }
            function E(a, b) {
                var c = a.session, d = b.pointers, e = d.length;
                c.firstInput || (c.firstInput = H(b)), e > 1 && !c.firstMultiple ? c.firstMultiple = H(b) : 1 === e && (c.firstMultiple = !1);
                var f = c.firstInput, g = c.firstMultiple, h = g ? g.center : f.center, i = b.center = I(d);
                b.timeStamp = ra(), b.deltaTime = b.timeStamp - f.timeStamp, b.angle = M(h, i), 
                b.distance = L(h, i), F(c, b), b.offsetDirection = K(b.deltaX, b.deltaY);
                var j = J(b.deltaTime, b.deltaX, b.deltaY);
                b.overallVelocityX = j.x, b.overallVelocityY = j.y, b.overallVelocity = qa(j.x) > qa(j.y) ? j.x : j.y, 
                b.scale = g ? O(g.pointers, d) : 1, b.rotation = g ? N(g.pointers, d) : 0, b.maxPointers = c.prevInput ? b.pointers.length > c.prevInput.maxPointers ? b.pointers.length : c.prevInput.maxPointers : b.pointers.length, 
                G(c, b);
                var k = a.element;
                s(b.srcEvent.target, k) && (k = b.srcEvent.target), b.target = k;
            }
            function F(a, b) {
                var c = b.center, d = a.offsetDelta || {}, e = a.prevDelta || {}, f = a.prevInput || {};
                b.eventType !== Ea && f.eventType !== Ga || (e = a.prevDelta = {
                    x: f.deltaX || 0,
                    y: f.deltaY || 0
                }, d = a.offsetDelta = {
                    x: c.x,
                    y: c.y
                }), b.deltaX = e.x + (c.x - d.x), b.deltaY = e.y + (c.y - d.y);
            }
            function G(a, b) {
                var c, d, e, f, g = a.lastInterval || b, i = b.timeStamp - g.timeStamp;
                if (b.eventType != Ha && (i > Da || g.velocity === h)) {
                    var j = b.deltaX - g.deltaX, k = b.deltaY - g.deltaY, l = J(i, j, k);
                    d = l.x, e = l.y, c = qa(l.x) > qa(l.y) ? l.x : l.y, f = K(j, k), a.lastInterval = b;
                } else c = g.velocity, d = g.velocityX, e = g.velocityY, f = g.direction;
                b.velocity = c, b.velocityX = d, b.velocityY = e, b.direction = f;
            }
            function H(a) {
                for (var b = [], c = 0; c < a.pointers.length; ) b[c] = {
                    clientX: pa(a.pointers[c].clientX),
                    clientY: pa(a.pointers[c].clientY)
                }, c++;
                return {
                    timeStamp: ra(),
                    pointers: b,
                    center: I(b),
                    deltaX: a.deltaX,
                    deltaY: a.deltaY
                };
            }
            function I(a) {
                var b = a.length;
                if (1 === b) return {
                    x: pa(a[0].clientX),
                    y: pa(a[0].clientY)
                };
                for (var c = 0, d = 0, e = 0; b > e; ) c += a[e].clientX, d += a[e].clientY, e++;
                return {
                    x: pa(c / b),
                    y: pa(d / b)
                };
            }
            function J(a, b, c) {
                return {
                    x: b / a || 0,
                    y: c / a || 0
                };
            }
            function K(a, b) {
                return a === b ? Ia : qa(a) >= qa(b) ? 0 > a ? Ja : Ka : 0 > b ? La : Ma;
            }
            function L(a, b, c) {
                c || (c = Qa);
                var d = b[c[0]] - a[c[0]], e = b[c[1]] - a[c[1]];
                return Math.sqrt(d * d + e * e);
            }
            function M(a, b, c) {
                c || (c = Qa);
                var d = b[c[0]] - a[c[0]], e = b[c[1]] - a[c[1]];
                return 180 * Math.atan2(e, d) / Math.PI;
            }
            function N(a, b) {
                return M(b[1], b[0], Ra) + M(a[1], a[0], Ra);
            }
            function O(a, b) {
                return L(b[0], b[1], Ra) / L(a[0], a[1], Ra);
            }
            function P() {
                this.evEl = Ta, this.evWin = Ua, this.allow = !0, this.pressed = !1, B.apply(this, arguments);
            }
            function Q() {
                this.evEl = Xa, this.evWin = Ya, B.apply(this, arguments), this.store = this.manager.session.pointerEvents = [];
            }
            function R() {
                this.evTarget = $a, this.evWin = _a, this.started = !1, B.apply(this, arguments);
            }
            function S(a, b) {
                var c = w(a.touches), d = w(a.changedTouches);
                return b & (Ga | Ha) && (c = x(c.concat(d), "identifier", !0)), [ c, d ];
            }
            function T() {
                this.evTarget = bb, this.targetIds = {}, B.apply(this, arguments);
            }
            function U(a, b) {
                var c = w(a.touches), d = this.targetIds;
                if (b & (Ea | Fa) && 1 === c.length) return d[c[0].identifier] = !0, [ c, c ];
                var e, f, g = w(a.changedTouches), h = [], i = this.target;
                if (f = c.filter(function(a) {
                    return s(a.target, i);
                }), b === Ea) for (e = 0; e < f.length; ) d[f[e].identifier] = !0, e++;
                for (e = 0; e < g.length; ) d[g[e].identifier] && h.push(g[e]), b & (Ga | Ha) && delete d[g[e].identifier], 
                e++;
                return h.length ? [ x(f.concat(h), "identifier", !0), h ] : void 0;
            }
            function V() {
                B.apply(this, arguments);
                var a = n(this.handler, this);
                this.touch = new T(this.manager, a), this.mouse = new P(this.manager, a);
            }
            function W(a, b) {
                this.manager = a, this.set(b);
            }
            function X(a) {
                if (t(a, hb)) return hb;
                var b = t(a, ib), c = t(a, jb);
                return b && c ? hb : b || c ? b ? ib : jb : t(a, gb) ? gb : fb;
            }
            function Y(a) {
                this.options = la({}, this.defaults, a || {}), this.id = z(), this.manager = null, 
                this.options.enable = p(this.options.enable, !0), this.state = kb, this.simultaneous = {}, 
                this.requireFail = [];
            }
            function Z(a) {
                return a & pb ? "cancel" : a & nb ? "end" : a & mb ? "move" : a & lb ? "start" : "";
            }
            function $(a) {
                return a == Ma ? "down" : a == La ? "up" : a == Ja ? "left" : a == Ka ? "right" : "";
            }
            function _(a, b) {
                var c = b.manager;
                return c ? c.get(a) : a;
            }
            function aa() {
                Y.apply(this, arguments);
            }
            function ba() {
                aa.apply(this, arguments), this.pX = null, this.pY = null;
            }
            function ca() {
                aa.apply(this, arguments);
            }
            function da() {
                Y.apply(this, arguments), this._timer = null, this._input = null;
            }
            function ea() {
                aa.apply(this, arguments);
            }
            function fa() {
                aa.apply(this, arguments);
            }
            function ga() {
                Y.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, 
                this._input = null, this.count = 0;
            }
            function ha(a, b) {
                return b = b || {}, b.recognizers = p(b.recognizers, ha.defaults.preset), new ia(a, b);
            }
            function ia(a, b) {
                this.options = la({}, ha.defaults, b || {}), this.options.inputTarget = this.options.inputTarget || a, 
                this.handlers = {}, this.session = {}, this.recognizers = [], this.element = a, 
                this.input = C(this), this.touchAction = new W(this, this.options.touchAction), 
                ja(this, !0), k(this.options.recognizers, function(a) {
                    var b = this.add(new a[0](a[1]));
                    a[2] && b.recognizeWith(a[2]), a[3] && b.requireFailure(a[3]);
                }, this);
            }
            function ja(a, b) {
                var c = a.element;
                c.style && k(a.options.cssProps, function(a, d) {
                    c.style[y(c.style, d)] = b ? a : "";
                });
            }
            function ka(a, b) {
                var c = f.createEvent("Event");
                c.initEvent(a, !0, !0), c.gesture = b, b.target.dispatchEvent(c);
            }
            var la, ma = [ "", "webkit", "Moz", "MS", "ms", "o" ], na = f.createElement("div"), oa = "function", pa = Math.round, qa = Math.abs, ra = Date.now;
            la = "function" != typeof Object.assign ? function(a) {
                if (a === h || null === a) throw new TypeError("Cannot convert undefined or null to object");
                for (var b = Object(a), c = 1; c < arguments.length; c++) {
                    var d = arguments[c];
                    if (d !== h && null !== d) for (var e in d) d.hasOwnProperty(e) && (b[e] = d[e]);
                }
                return b;
            } : Object.assign;
            var sa = l(function(a, b, c) {
                for (var d = Object.keys(b), e = 0; e < d.length; ) (!c || c && a[d[e]] === h) && (a[d[e]] = b[d[e]]), 
                e++;
                return a;
            }, "extend", "Use `assign`."), ta = l(function(a, b) {
                return sa(a, b, !0);
            }, "merge", "Use `assign`."), ua = 1, va = /mobile|tablet|ip(ad|hone|od)|android/i, wa = "ontouchstart" in e, xa = y(e, "PointerEvent") !== h, ya = wa && va.test(navigator.userAgent), za = "touch", Aa = "pen", Ba = "mouse", Ca = "kinect", Da = 25, Ea = 1, Fa = 2, Ga = 4, Ha = 8, Ia = 1, Ja = 2, Ka = 4, La = 8, Ma = 16, Na = Ja | Ka, Oa = La | Ma, Pa = Na | Oa, Qa = [ "x", "y" ], Ra = [ "clientX", "clientY" ];
            B.prototype = {
                handler: function() {},
                init: function() {
                    this.evEl && q(this.element, this.evEl, this.domHandler), this.evTarget && q(this.target, this.evTarget, this.domHandler), 
                    this.evWin && q(A(this.element), this.evWin, this.domHandler);
                },
                destroy: function() {
                    this.evEl && r(this.element, this.evEl, this.domHandler), this.evTarget && r(this.target, this.evTarget, this.domHandler), 
                    this.evWin && r(A(this.element), this.evWin, this.domHandler);
                }
            };
            var Sa = {
                mousedown: Ea,
                mousemove: Fa,
                mouseup: Ga
            }, Ta = "mousedown", Ua = "mousemove mouseup";
            m(P, B, {
                handler: function(a) {
                    var b = Sa[a.type];
                    b & Ea && 0 === a.button && (this.pressed = !0), b & Fa && 1 !== a.which && (b = Ga), 
                    this.pressed && this.allow && (b & Ga && (this.pressed = !1), this.callback(this.manager, b, {
                        pointers: [ a ],
                        changedPointers: [ a ],
                        pointerType: Ba,
                        srcEvent: a
                    }));
                }
            });
            var Va = {
                pointerdown: Ea,
                pointermove: Fa,
                pointerup: Ga,
                pointercancel: Ha,
                pointerout: Ha
            }, Wa = {
                2: za,
                3: Aa,
                4: Ba,
                5: Ca
            }, Xa = "pointerdown", Ya = "pointermove pointerup pointercancel";
            e.MSPointerEvent && !e.PointerEvent && (Xa = "MSPointerDown", Ya = "MSPointerMove MSPointerUp MSPointerCancel"), 
            m(Q, B, {
                handler: function(a) {
                    var b = this.store, c = !1, d = a.type.toLowerCase().replace("ms", ""), e = Va[d], f = Wa[a.pointerType] || a.pointerType, g = f == za, h = v(b, a.pointerId, "pointerId");
                    e & Ea && (0 === a.button || g) ? 0 > h && (b.push(a), h = b.length - 1) : e & (Ga | Ha) && (c = !0), 
                    0 > h || (b[h] = a, this.callback(this.manager, e, {
                        pointers: b,
                        changedPointers: [ a ],
                        pointerType: f,
                        srcEvent: a
                    }), c && b.splice(h, 1));
                }
            });
            var Za = {
                touchstart: Ea,
                touchmove: Fa,
                touchend: Ga,
                touchcancel: Ha
            }, $a = "touchstart", _a = "touchstart touchmove touchend touchcancel";
            m(R, B, {
                handler: function(a) {
                    var b = Za[a.type];
                    if (b === Ea && (this.started = !0), this.started) {
                        var c = S.call(this, a, b);
                        b & (Ga | Ha) && c[0].length - c[1].length === 0 && (this.started = !1), this.callback(this.manager, b, {
                            pointers: c[0],
                            changedPointers: c[1],
                            pointerType: za,
                            srcEvent: a
                        });
                    }
                }
            });
            var ab = {
                touchstart: Ea,
                touchmove: Fa,
                touchend: Ga,
                touchcancel: Ha
            }, bb = "touchstart touchmove touchend touchcancel";
            m(T, B, {
                handler: function(a) {
                    var b = ab[a.type], c = U.call(this, a, b);
                    c && this.callback(this.manager, b, {
                        pointers: c[0],
                        changedPointers: c[1],
                        pointerType: za,
                        srcEvent: a
                    });
                }
            }), m(V, B, {
                handler: function(a, b, c) {
                    var d = c.pointerType == za, e = c.pointerType == Ba;
                    if (d) this.mouse.allow = !1; else if (e && !this.mouse.allow) return;
                    b & (Ga | Ha) && (this.mouse.allow = !0), this.callback(a, b, c);
                },
                destroy: function() {
                    this.touch.destroy(), this.mouse.destroy();
                }
            });
            var cb = y(na.style, "touchAction"), db = cb !== h, eb = "compute", fb = "auto", gb = "manipulation", hb = "none", ib = "pan-x", jb = "pan-y";
            W.prototype = {
                set: function(a) {
                    a == eb && (a = this.compute()), db && this.manager.element.style && (this.manager.element.style[cb] = a), 
                    this.actions = a.toLowerCase().trim();
                },
                update: function() {
                    this.set(this.manager.options.touchAction);
                },
                compute: function() {
                    var a = [];
                    return k(this.manager.recognizers, function(b) {
                        o(b.options.enable, [ b ]) && (a = a.concat(b.getTouchAction()));
                    }), X(a.join(" "));
                },
                preventDefaults: function(a) {
                    if (!db) {
                        var b = a.srcEvent, c = a.offsetDirection;
                        if (this.manager.session.prevented) return void b.preventDefault();
                        var d = this.actions, e = t(d, hb), f = t(d, jb), g = t(d, ib);
                        if (e) {
                            var h = 1 === a.pointers.length, i = a.distance < 2, j = a.deltaTime < 250;
                            if (h && i && j) return;
                        }
                        if (!g || !f) return e || f && c & Na || g && c & Oa ? this.preventSrc(b) : void 0;
                    }
                },
                preventSrc: function(a) {
                    this.manager.session.prevented = !0, a.preventDefault();
                }
            };
            var kb = 1, lb = 2, mb = 4, nb = 8, ob = nb, pb = 16, qb = 32;
            Y.prototype = {
                defaults: {},
                set: function(a) {
                    return la(this.options, a), this.manager && this.manager.touchAction.update(), this;
                },
                recognizeWith: function(a) {
                    if (j(a, "recognizeWith", this)) return this;
                    var b = this.simultaneous;
                    return a = _(a, this), b[a.id] || (b[a.id] = a, a.recognizeWith(this)), this;
                },
                dropRecognizeWith: function(a) {
                    return j(a, "dropRecognizeWith", this) ? this : (a = _(a, this), delete this.simultaneous[a.id], 
                    this);
                },
                requireFailure: function(a) {
                    if (j(a, "requireFailure", this)) return this;
                    var b = this.requireFail;
                    return a = _(a, this), -1 === v(b, a) && (b.push(a), a.requireFailure(this)), this;
                },
                dropRequireFailure: function(a) {
                    if (j(a, "dropRequireFailure", this)) return this;
                    a = _(a, this);
                    var b = v(this.requireFail, a);
                    return b > -1 && this.requireFail.splice(b, 1), this;
                },
                hasRequireFailures: function() {
                    return this.requireFail.length > 0;
                },
                canRecognizeWith: function(a) {
                    return !!this.simultaneous[a.id];
                },
                emit: function(a) {
                    function b(b) {
                        c.manager.emit(b, a);
                    }
                    var c = this, d = this.state;
                    nb > d && b(c.options.event + Z(d)), b(c.options.event), a.additionalEvent && b(a.additionalEvent), 
                    d >= nb && b(c.options.event + Z(d));
                },
                tryEmit: function(a) {
                    return this.canEmit() ? this.emit(a) : void (this.state = qb);
                },
                canEmit: function() {
                    for (var a = 0; a < this.requireFail.length; ) {
                        if (!(this.requireFail[a].state & (qb | kb))) return !1;
                        a++;
                    }
                    return !0;
                },
                recognize: function(a) {
                    var b = la({}, a);
                    return o(this.options.enable, [ this, b ]) ? (this.state & (ob | pb | qb) && (this.state = kb), 
                    this.state = this.process(b), void (this.state & (lb | mb | nb | pb) && this.tryEmit(b))) : (this.reset(), 
                    void (this.state = qb));
                },
                process: function(a) {},
                getTouchAction: function() {},
                reset: function() {}
            }, m(aa, Y, {
                defaults: {
                    pointers: 1
                },
                attrTest: function(a) {
                    var b = this.options.pointers;
                    return 0 === b || a.pointers.length === b;
                },
                process: function(a) {
                    var b = this.state, c = a.eventType, d = b & (lb | mb), e = this.attrTest(a);
                    return d && (c & Ha || !e) ? b | pb : d || e ? c & Ga ? b | nb : b & lb ? b | mb : lb : qb;
                }
            }), m(ba, aa, {
                defaults: {
                    event: "pan",
                    threshold: 10,
                    pointers: 1,
                    direction: Pa
                },
                getTouchAction: function() {
                    var a = this.options.direction, b = [];
                    return a & Na && b.push(jb), a & Oa && b.push(ib), b;
                },
                directionTest: function(a) {
                    var b = this.options, c = !0, d = a.distance, e = a.direction, f = a.deltaX, g = a.deltaY;
                    return e & b.direction || (b.direction & Na ? (e = 0 === f ? Ia : 0 > f ? Ja : Ka, 
                    c = f != this.pX, d = Math.abs(a.deltaX)) : (e = 0 === g ? Ia : 0 > g ? La : Ma, 
                    c = g != this.pY, d = Math.abs(a.deltaY))), a.direction = e, c && d > b.threshold && e & b.direction;
                },
                attrTest: function(a) {
                    return aa.prototype.attrTest.call(this, a) && (this.state & lb || !(this.state & lb) && this.directionTest(a));
                },
                emit: function(a) {
                    this.pX = a.deltaX, this.pY = a.deltaY;
                    var b = $(a.direction);
                    b && (a.additionalEvent = this.options.event + b), this._super.emit.call(this, a);
                }
            }), m(ca, aa, {
                defaults: {
                    event: "pinch",
                    threshold: 0,
                    pointers: 2
                },
                getTouchAction: function() {
                    return [ hb ];
                },
                attrTest: function(a) {
                    return this._super.attrTest.call(this, a) && (Math.abs(a.scale - 1) > this.options.threshold || this.state & lb);
                },
                emit: function(a) {
                    if (1 !== a.scale) {
                        var b = a.scale < 1 ? "in" : "out";
                        a.additionalEvent = this.options.event + b;
                    }
                    this._super.emit.call(this, a);
                }
            }), m(da, Y, {
                defaults: {
                    event: "press",
                    pointers: 1,
                    time: 251,
                    threshold: 9
                },
                getTouchAction: function() {
                    return [ fb ];
                },
                process: function(a) {
                    var b = this.options, c = a.pointers.length === b.pointers, d = a.distance < b.threshold, e = a.deltaTime > b.time;
                    if (this._input = a, !d || !c || a.eventType & (Ga | Ha) && !e) this.reset(); else if (a.eventType & Ea) this.reset(), 
                    this._timer = i(function() {
                        this.state = ob, this.tryEmit();
                    }, b.time, this); else if (a.eventType & Ga) return ob;
                    return qb;
                },
                reset: function() {
                    clearTimeout(this._timer);
                },
                emit: function(a) {
                    this.state === ob && (a && a.eventType & Ga ? this.manager.emit(this.options.event + "up", a) : (this._input.timeStamp = ra(), 
                    this.manager.emit(this.options.event, this._input)));
                }
            }), m(ea, aa, {
                defaults: {
                    event: "rotate",
                    threshold: 0,
                    pointers: 2
                },
                getTouchAction: function() {
                    return [ hb ];
                },
                attrTest: function(a) {
                    return this._super.attrTest.call(this, a) && (Math.abs(a.rotation) > this.options.threshold || this.state & lb);
                }
            }), m(fa, aa, {
                defaults: {
                    event: "swipe",
                    threshold: 10,
                    velocity: .3,
                    direction: Na | Oa,
                    pointers: 1
                },
                getTouchAction: function() {
                    return ba.prototype.getTouchAction.call(this);
                },
                attrTest: function(a) {
                    var b, c = this.options.direction;
                    return c & (Na | Oa) ? b = a.overallVelocity : c & Na ? b = a.overallVelocityX : c & Oa && (b = a.overallVelocityY), 
                    this._super.attrTest.call(this, a) && c & a.offsetDirection && a.distance > this.options.threshold && a.maxPointers == this.options.pointers && qa(b) > this.options.velocity && a.eventType & Ga;
                },
                emit: function(a) {
                    var b = $(a.offsetDirection);
                    b && this.manager.emit(this.options.event + b, a), this.manager.emit(this.options.event, a);
                }
            }), m(ga, Y, {
                defaults: {
                    event: "tap",
                    pointers: 1,
                    taps: 1,
                    interval: 300,
                    time: 250,
                    threshold: 9,
                    posThreshold: 10
                },
                getTouchAction: function() {
                    return [ gb ];
                },
                process: function(a) {
                    var b = this.options, c = a.pointers.length === b.pointers, d = a.distance < b.threshold, e = a.deltaTime < b.time;
                    if (this.reset(), a.eventType & Ea && 0 === this.count) return this.failTimeout();
                    if (d && e && c) {
                        if (a.eventType != Ga) return this.failTimeout();
                        var f = this.pTime ? a.timeStamp - this.pTime < b.interval : !0, g = !this.pCenter || L(this.pCenter, a.center) < b.posThreshold;
                        this.pTime = a.timeStamp, this.pCenter = a.center, g && f ? this.count += 1 : this.count = 1, 
                        this._input = a;
                        var h = this.count % b.taps;
                        if (0 === h) return this.hasRequireFailures() ? (this._timer = i(function() {
                            this.state = ob, this.tryEmit();
                        }, b.interval, this), lb) : ob;
                    }
                    return qb;
                },
                failTimeout: function() {
                    return this._timer = i(function() {
                        this.state = qb;
                    }, this.options.interval, this), qb;
                },
                reset: function() {
                    clearTimeout(this._timer);
                },
                emit: function() {
                    this.state == ob && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input));
                }
            }), ha.VERSION = "2.0.6", ha.defaults = {
                domEvents: !1,
                touchAction: eb,
                enable: !0,
                inputTarget: null,
                inputClass: null,
                preset: [ [ ea, {
                    enable: !1
                } ], [ ca, {
                    enable: !1
                }, [ "rotate" ] ], [ fa, {
                    direction: Na
                } ], [ ba, {
                    direction: Na
                }, [ "swipe" ] ], [ ga ], [ ga, {
                    event: "doubletap",
                    taps: 2
                }, [ "tap" ] ], [ da ] ],
                cssProps: {
                    userSelect: "none",
                    touchSelect: "none",
                    touchCallout: "none",
                    contentZooming: "none",
                    userDrag: "none",
                    tapHighlightColor: "rgba(0,0,0,0)"
                }
            };
            var rb = 1, sb = 2;
            ia.prototype = {
                set: function(a) {
                    return la(this.options, a), a.touchAction && this.touchAction.update(), a.inputTarget && (this.input.destroy(), 
                    this.input.target = a.inputTarget, this.input.init()), this;
                },
                stop: function(a) {
                    this.session.stopped = a ? sb : rb;
                },
                recognize: function(a) {
                    var b = this.session;
                    if (!b.stopped) {
                        this.touchAction.preventDefaults(a);
                        var c, d = this.recognizers, e = b.curRecognizer;
                        (!e || e && e.state & ob) && (e = b.curRecognizer = null);
                        for (var f = 0; f < d.length; ) c = d[f], b.stopped === sb || e && c != e && !c.canRecognizeWith(e) ? c.reset() : c.recognize(a), 
                        !e && c.state & (lb | mb | nb) && (e = b.curRecognizer = c), f++;
                    }
                },
                get: function(a) {
                    if (a instanceof Y) return a;
                    for (var b = this.recognizers, c = 0; c < b.length; c++) if (b[c].options.event == a) return b[c];
                    return null;
                },
                add: function(a) {
                    if (j(a, "add", this)) return this;
                    var b = this.get(a.options.event);
                    return b && this.remove(b), this.recognizers.push(a), a.manager = this, this.touchAction.update(), 
                    a;
                },
                remove: function(a) {
                    if (j(a, "remove", this)) return this;
                    if (a = this.get(a)) {
                        var b = this.recognizers, c = v(b, a);
                        -1 !== c && (b.splice(c, 1), this.touchAction.update());
                    }
                    return this;
                },
                on: function(a, b) {
                    var c = this.handlers;
                    return k(u(a), function(a) {
                        c[a] = c[a] || [], c[a].push(b);
                    }), this;
                },
                off: function(a, b) {
                    var c = this.handlers;
                    return k(u(a), function(a) {
                        b ? c[a] && c[a].splice(v(c[a], b), 1) : delete c[a];
                    }), this;
                },
                emit: function(a, b) {
                    this.options.domEvents && ka(a, b);
                    var c = this.handlers[a] && this.handlers[a].slice();
                    if (c && c.length) {
                        b.type = a, b.preventDefault = function() {
                            b.srcEvent.preventDefault();
                        };
                        for (var d = 0; d < c.length; ) c[d](b), d++;
                    }
                },
                destroy: function() {
                    this.element && ja(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), 
                    this.element = null;
                }
            }, la(ha, {
                INPUT_START: Ea,
                INPUT_MOVE: Fa,
                INPUT_END: Ga,
                INPUT_CANCEL: Ha,
                STATE_POSSIBLE: kb,
                STATE_BEGAN: lb,
                STATE_CHANGED: mb,
                STATE_ENDED: nb,
                STATE_RECOGNIZED: ob,
                STATE_CANCELLED: pb,
                STATE_FAILED: qb,
                DIRECTION_NONE: Ia,
                DIRECTION_LEFT: Ja,
                DIRECTION_RIGHT: Ka,
                DIRECTION_UP: La,
                DIRECTION_DOWN: Ma,
                DIRECTION_HORIZONTAL: Na,
                DIRECTION_VERTICAL: Oa,
                DIRECTION_ALL: Pa,
                Manager: ia,
                Input: B,
                TouchAction: W,
                TouchInput: T,
                MouseInput: P,
                PointerEventInput: Q,
                TouchMouseInput: V,
                SingleTouchInput: R,
                Recognizer: Y,
                AttrRecognizer: aa,
                Tap: ga,
                Pan: ba,
                Swipe: fa,
                Pinch: ca,
                Rotate: ea,
                Press: da,
                on: q,
                off: r,
                each: k,
                merge: ta,
                extend: sa,
                assign: la,
                inherit: m,
                bindFn: n,
                prefixed: y
            });
            var tb = "undefined" != typeof e ? e : "undefined" != typeof self ? self : {};
            tb.Hammer = ha, d = function() {
                return ha;
            }.call(b, c, b, a), !(d !== h && (a.exports = d));
        }(window, document, "Hammer");
    }, function(a, b, c) {
        "use strict";
        c(22);
        b.onTouch = function(a, b) {
            b.inputHandler = function(a) {
                a.isFirst && b(a);
            }, a.on("hammer.input", b.inputHandler);
        }, b.onRelease = function(a, b) {
            return b.inputHandler = function(a) {
                a.isFinal && b(a);
            }, a.on("hammer.input", b.inputHandler);
        }, b.offTouch = function(a, b) {
            a.off("hammer.input", b.inputHandler);
        }, b.offRelease = b.offTouch, b.disablePreventDefaultVertically = function(a) {
            var b = "pan-y";
            return a.getTouchAction = function() {
                return [ b ];
            }, a;
        };
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(1), h = !1, i = void 0, j = "background: #FFeeee; color: #dd0000", k = function() {
            function a() {
                d(this, a);
            }
            return f(a, null, [ {
                key: "validate",
                value: function(b, c, d) {
                    h = !1, i = c;
                    var e = c;
                    return void 0 !== d && (e = c[d]), a.parse(b, e, []), h;
                }
            }, {
                key: "parse",
                value: function(b, c, d) {
                    for (var e in b) b.hasOwnProperty(e) && a.check(e, b, c, d);
                }
            }, {
                key: "check",
                value: function(b, c, d, e) {
                    void 0 === d[b] && void 0 === d.__any__ ? a.getSuggestion(b, d, e) : void 0 === d[b] && void 0 !== d.__any__ ? "object" === a.getType(c[b]) && void 0 !== d.__any__.__type__ ? a.checkFields(b, c, d, "__any__", d.__any__.__type__, e) : a.checkFields(b, c, d, "__any__", d.__any__, e) : void 0 !== d[b].__type__ ? a.checkFields(b, c, d, b, d[b].__type__, e) : a.checkFields(b, c, d, b, d[b], e);
                }
            }, {
                key: "checkFields",
                value: function(b, c, d, e, f, i) {
                    var k = a.getType(c[b]), l = f[k];
                    void 0 !== l ? "array" === a.getType(l) && -1 === l.indexOf(c[b]) ? (console.log('%cInvalid option detected in "' + b + '". Allowed values are:' + a.print(l) + ' not "' + c[b] + '". ' + a.printLocation(i, b), j), 
                    h = !0) : "object" === k && "__any__" !== e && (i = g.copyAndExtendArray(i, b), 
                    a.parse(c[b], d[e], i)) : void 0 === f.any && (console.log('%cInvalid type received for "' + b + '". Expected: ' + a.print(Object.keys(f)) + ". Received [" + k + '] "' + c[b] + '"' + a.printLocation(i, b), j), 
                    h = !0);
                }
            }, {
                key: "getType",
                value: function(a) {
                    var b = "undefined" == typeof a ? "undefined" : e(a);
                    return "object" === b ? null === a ? "null" : a instanceof Boolean ? "boolean" : a instanceof Number ? "number" : a instanceof String ? "string" : Array.isArray(a) ? "array" : a instanceof Date ? "date" : void 0 !== a.nodeType ? "dom" : a._isAMomentObject === !0 ? "moment" : "object" : "number" === b ? "number" : "boolean" === b ? "boolean" : "string" === b ? "string" : void 0 === b ? "undefined" : b;
                }
            }, {
                key: "getSuggestion",
                value: function(b, c, d) {
                    var e = a.findInOptions(b, c, d, !1), f = a.findInOptions(b, i, [], !0), g = 8, k = 4;
                    void 0 !== e.indexMatch ? console.log('%cUnknown option detected: "' + b + '" in ' + a.printLocation(e.path, b, "") + 'Perhaps it was incomplete? Did you mean: "' + e.indexMatch + '"?\n\n', j) : f.distance <= k && e.distance > f.distance ? console.log('%cUnknown option detected: "' + b + '" in ' + a.printLocation(e.path, b, "") + "Perhaps it was misplaced? Matching option found at: " + a.printLocation(f.path, f.closestMatch, ""), j) : e.distance <= g ? console.log('%cUnknown option detected: "' + b + '". Did you mean "' + e.closestMatch + '"?' + a.printLocation(e.path, b), j) : console.log('%cUnknown option detected: "' + b + '". Did you mean one of these: ' + a.print(Object.keys(c)) + a.printLocation(d, b), j), 
                    h = !0;
                }
            }, {
                key: "findInOptions",
                value: function(b, c, d) {
                    var e = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3], f = 1e9, h = "", i = [], j = b.toLowerCase(), k = void 0;
                    for (var l in c) {
                        var m = void 0;
                        if (void 0 !== c[l].__type__ && e === !0) {
                            var n = a.findInOptions(b, c[l], g.copyAndExtendArray(d, l));
                            f > n.distance && (h = n.closestMatch, i = n.path, f = n.distance, k = n.indexMatch);
                        } else -1 !== l.toLowerCase().indexOf(j) && (k = l), m = a.levenshteinDistance(b, l), 
                        f > m && (h = l, i = g.copyArray(d), f = m);
                    }
                    return {
                        closestMatch: h,
                        path: i,
                        distance: f,
                        indexMatch: k
                    };
                }
            }, {
                key: "printLocation",
                value: function(a, b) {
                    for (var c = arguments.length <= 2 || void 0 === arguments[2] ? "Problem value found at: \n" : arguments[2], d = "\n\n" + c + "options = {\n", e = 0; e < a.length; e++) {
                        for (var f = 0; e + 1 > f; f++) d += "  ";
                        d += a[e] + ": {\n";
                    }
                    for (var g = 0; g < a.length + 1; g++) d += "  ";
                    d += b + "\n";
                    for (var h = 0; h < a.length + 1; h++) {
                        for (var i = 0; i < a.length - h; i++) d += "  ";
                        d += "}\n";
                    }
                    return d + "\n\n";
                }
            }, {
                key: "print",
                value: function(a) {
                    return JSON.stringify(a).replace(/(\")|(\[)|(\])|(,"__type__")/g, "").replace(/(\,)/g, ", ");
                }
            }, {
                key: "levenshteinDistance",
                value: function(a, b) {
                    if (0 === a.length) return b.length;
                    if (0 === b.length) return a.length;
                    var c, d = [];
                    for (c = 0; c <= b.length; c++) d[c] = [ c ];
                    var e;
                    for (e = 0; e <= a.length; e++) d[0][e] = e;
                    for (c = 1; c <= b.length; c++) for (e = 1; e <= a.length; e++) b.charAt(c - 1) == a.charAt(e - 1) ? d[c][e] = d[c - 1][e - 1] : d[c][e] = Math.min(d[c - 1][e - 1] + 1, Math.min(d[c][e - 1] + 1, d[c - 1][e] + 1));
                    return d[b.length][a.length];
                }
            } ]), a;
        }();
        b["default"] = k, b.printStyle = j;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            var c = i().hours(0).minutes(0).seconds(0).milliseconds(0);
            this.start = c.clone().add(-3, "days").valueOf(), this.end = c.clone().add(4, "days").valueOf(), 
            this.body = a, this.deltaDifference = 0, this.scaleOffset = 0, this.startToFront = !1, 
            this.endToFront = !0, this.defaultOptions = {
                start: null,
                end: null,
                moment: i,
                direction: "horizontal",
                moveable: !0,
                zoomable: !0,
                min: null,
                max: null,
                zoomMin: 10,
                zoomMax: 31536e10
            }, this.options = h.extend({}, this.defaultOptions), this.props = {
                touch: {}
            }, this.animationTimer = null, this.body.emitter.on("panstart", this._onDragStart.bind(this)), 
            this.body.emitter.on("panmove", this._onDrag.bind(this)), this.body.emitter.on("panend", this._onDragEnd.bind(this)), 
            this.body.emitter.on("mousewheel", this._onMouseWheel.bind(this)), this.body.emitter.on("touch", this._onTouch.bind(this)), 
            this.body.emitter.on("pinch", this._onPinch.bind(this)), this.setOptions(b);
        }
        function e(a) {
            if ("horizontal" != a && "vertical" != a) throw new TypeError('Unknown direction "' + a + '". Choose "horizontal" or "vertical".');
        }
        function f(a, b) {
            return {
                x: a.x - h.getAbsoluteLeft(b),
                y: a.y - h.getAbsoluteTop(b)
            };
        }
        var g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, h = c(1), i = (c(25), c(2)), j = c(28), k = c(29);
        d.prototype = new j(), d.prototype.setOptions = function(a) {
            if (a) {
                var b = [ "direction", "min", "max", "zoomMin", "zoomMax", "moveable", "zoomable", "moment", "activate", "hiddenDates", "zoomKey" ];
                h.selectiveExtend(b, this.options, a), ("start" in a || "end" in a) && this.setRange(a.start, a.end);
            }
        }, d.prototype.setRange = function(a, b, c, d) {
            d !== !0 && (d = !1);
            var e = void 0 != a ? h.convert(a, "Date").valueOf() : null, f = void 0 != b ? h.convert(b, "Date").valueOf() : null;
            if (this._cancelAnimation(), c) {
                var i = this, j = this.start, l = this.end, m = "object" === ("undefined" == typeof c ? "undefined" : g(c)) && "duration" in c ? c.duration : 500, n = "object" === ("undefined" == typeof c ? "undefined" : g(c)) && "easingFunction" in c ? c.easingFunction : "easeInOutQuad", o = h.easingFunctions[n];
                if (!o) throw new Error("Unknown easing function " + JSON.stringify(n) + ". Choose from: " + Object.keys(h.easingFunctions).join(", "));
                var p = new Date().valueOf(), q = !1, r = function u() {
                    if (!i.props.touch.dragging) {
                        var a = new Date().valueOf(), b = a - p, c = o(b / m), g = b > m, h = g || null === e ? e : j + (e - j) * c, n = g || null === f ? f : l + (f - l) * c;
                        s = i._applyRange(h, n), k.updateHiddenDates(i.options.moment, i.body, i.options.hiddenDates), 
                        q = q || s, s && i.body.emitter.emit("rangechange", {
                            start: new Date(i.start),
                            end: new Date(i.end),
                            byUser: d
                        }), g ? q && i.body.emitter.emit("rangechanged", {
                            start: new Date(i.start),
                            end: new Date(i.end),
                            byUser: d
                        }) : i.animationTimer = setTimeout(u, 20);
                    }
                };
                return r();
            }
            var s = this._applyRange(e, f);
            if (k.updateHiddenDates(this.options.moment, this.body, this.options.hiddenDates), 
            s) {
                var t = {
                    start: new Date(this.start),
                    end: new Date(this.end),
                    byUser: d
                };
                this.body.emitter.emit("rangechange", t), this.body.emitter.emit("rangechanged", t);
            }
        }, d.prototype._cancelAnimation = function() {
            this.animationTimer && (clearTimeout(this.animationTimer), this.animationTimer = null);
        }, d.prototype._applyRange = function(a, b) {
            var c, d = null != a ? h.convert(a, "Date").valueOf() : this.start, e = null != b ? h.convert(b, "Date").valueOf() : this.end, f = null != this.options.max ? h.convert(this.options.max, "Date").valueOf() : null, g = null != this.options.min ? h.convert(this.options.min, "Date").valueOf() : null;
            if (isNaN(d) || null === d) throw new Error('Invalid start "' + a + '"');
            if (isNaN(e) || null === e) throw new Error('Invalid end "' + b + '"');
            if (d > e && (e = d), null !== g && g > d && (c = g - d, d += c, e += c, null != f && e > f && (e = f)), 
            null !== f && e > f && (c = e - f, d -= c, e -= c, null != g && g > d && (d = g)), 
            null !== this.options.zoomMin) {
                var i = parseFloat(this.options.zoomMin);
                0 > i && (i = 0), i > e - d && (this.end - this.start === i && d > this.start && e < this.end ? (d = this.start, 
                e = this.end) : (c = i - (e - d), d -= c / 2, e += c / 2));
            }
            if (null !== this.options.zoomMax) {
                var j = parseFloat(this.options.zoomMax);
                0 > j && (j = 0), e - d > j && (this.end - this.start === j && d < this.start && e > this.end ? (d = this.start, 
                e = this.end) : (c = e - d - j, d += c / 2, e -= c / 2));
            }
            var k = this.start != d || this.end != e;
            return d >= this.start && d <= this.end || e >= this.start && e <= this.end || this.start >= d && this.start <= e || this.end >= d && this.end <= e || this.body.emitter.emit("checkRangedItems"), 
            this.start = d, this.end = e, k;
        }, d.prototype.getRange = function() {
            return {
                start: this.start,
                end: this.end
            };
        }, d.prototype.conversion = function(a, b) {
            return d.conversion(this.start, this.end, a, b);
        }, d.conversion = function(a, b, c, d) {
            return void 0 === d && (d = 0), 0 != c && b - a != 0 ? {
                offset: a,
                scale: c / (b - a - d)
            } : {
                offset: 0,
                scale: 1
            };
        }, d.prototype._onDragStart = function(a) {
            this.deltaDifference = 0, this.previousDelta = 0, this.options.moveable && this._isInsideRange(a) && this.props.touch.allowDragging && (this.props.touch.start = this.start, 
            this.props.touch.end = this.end, this.props.touch.dragging = !0, this.body.dom.root && (this.body.dom.root.style.cursor = "move"));
        }, d.prototype._onDrag = function(a) {
            if (this.props.touch.dragging && this.options.moveable && this.props.touch.allowDragging) {
                var b = this.options.direction;
                e(b);
                var c = "horizontal" == b ? a.deltaX : a.deltaY;
                c -= this.deltaDifference;
                var d = this.props.touch.end - this.props.touch.start, f = k.getHiddenDurationBetween(this.body.hiddenDates, this.start, this.end);
                d -= f;
                var g = "horizontal" == b ? this.body.domProps.center.width : this.body.domProps.center.height, h = -c / g * d, i = this.props.touch.start + h, j = this.props.touch.end + h, l = k.snapAwayFromHidden(this.body.hiddenDates, i, this.previousDelta - c, !0), m = k.snapAwayFromHidden(this.body.hiddenDates, j, this.previousDelta - c, !0);
                if (l != i || m != j) return this.deltaDifference += c, this.props.touch.start = l, 
                this.props.touch.end = m, void this._onDrag(a);
                this.previousDelta = c, this._applyRange(i, j);
                var n = new Date(this.start), o = new Date(this.end);
                this.body.emitter.emit("rangechange", {
                    start: n,
                    end: o,
                    byUser: !0
                });
            }
        }, d.prototype._onDragEnd = function(a) {
            this.props.touch.dragging && this.options.moveable && this.props.touch.allowDragging && (this.props.touch.dragging = !1, 
            this.body.dom.root && (this.body.dom.root.style.cursor = "auto"), this.body.emitter.emit("rangechanged", {
                start: new Date(this.start),
                end: new Date(this.end),
                byUser: !0
            }));
        }, d.prototype._onMouseWheel = function(a) {
            if (this.options.zoomable && this.options.moveable && this._isInsideRange(a) && (!this.options.zoomKey || a[this.options.zoomKey])) {
                var b = 0;
                if (a.wheelDelta ? b = a.wheelDelta / 120 : a.detail && (b = -a.detail / 3), b) {
                    var c;
                    c = 0 > b ? 1 - b / 5 : 1 / (1 + b / 5);
                    var d = f({
                        x: a.clientX,
                        y: a.clientY
                    }, this.body.dom.center), e = this._pointerToDate(d);
                    this.zoom(c, e, b);
                }
                a.preventDefault();
            }
        }, d.prototype._onTouch = function(a) {
            this.props.touch.start = this.start, this.props.touch.end = this.end, this.props.touch.allowDragging = !0, 
            this.props.touch.center = null, this.scaleOffset = 0, this.deltaDifference = 0;
        }, d.prototype._onPinch = function(a) {
            if (this.options.zoomable && this.options.moveable) {
                this.props.touch.allowDragging = !1, this.props.touch.center || (this.props.touch.center = f(a.center, this.body.dom.center));
                var b = 1 / (a.scale + this.scaleOffset), c = this._pointerToDate(this.props.touch.center), d = k.getHiddenDurationBetween(this.body.hiddenDates, this.start, this.end), e = k.getHiddenDurationBefore(this.options.moment, this.body.hiddenDates, this, c), g = d - e, h = c - e + (this.props.touch.start - (c - e)) * b, i = c + g + (this.props.touch.end - (c + g)) * b;
                this.startToFront = 0 >= 1 - b, this.endToFront = 0 >= b - 1;
                var j = k.snapAwayFromHidden(this.body.hiddenDates, h, 1 - b, !0), l = k.snapAwayFromHidden(this.body.hiddenDates, i, b - 1, !0);
                j == h && l == i || (this.props.touch.start = j, this.props.touch.end = l, this.scaleOffset = 1 - a.scale, 
                h = j, i = l), this.setRange(h, i, !1, !0), this.startToFront = !1, this.endToFront = !0;
            }
        }, d.prototype._isInsideRange = function(a) {
            var b = a.center ? a.center.x : a.clientX, c = b - h.getAbsoluteLeft(this.body.dom.centerContainer), d = this.body.util.toTime(c);
            return d >= this.start && d <= this.end;
        }, d.prototype._pointerToDate = function(a) {
            var b, c = this.options.direction;
            if (e(c), "horizontal" == c) return this.body.util.toTime(a.x).valueOf();
            var d = this.body.domProps.center.height;
            return b = this.conversion(d), a.y / b.scale + b.offset;
        }, d.prototype.zoom = function(a, b, c) {
            null == b && (b = (this.start + this.end) / 2);
            var d = k.getHiddenDurationBetween(this.body.hiddenDates, this.start, this.end), e = k.getHiddenDurationBefore(this.options.moment, this.body.hiddenDates, this, b), f = d - e, g = b - e + (this.start - (b - e)) * a, h = b + f + (this.end - (b + f)) * a;
            this.startToFront = !(c > 0), this.endToFront = !(-c > 0);
            var i = k.snapAwayFromHidden(this.body.hiddenDates, g, c, !0), j = k.snapAwayFromHidden(this.body.hiddenDates, h, -c, !0);
            i == g && j == h || (g = i, h = j), this.setRange(g, h, !1, !0), this.startToFront = !1, 
            this.endToFront = !0;
        }, d.prototype.move = function(a) {
            var b = this.end - this.start, c = this.start + b * a, d = this.end + b * a;
            this.start = c, this.end = d;
        }, d.prototype.moveTo = function(a) {
            var b = (this.start + this.end) / 2, c = b - a, d = this.start - c, e = this.end - c;
            this.setRange(d, e);
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            this.options = null, this.props = null;
        }
        c.prototype.setOptions = function(a) {
            a && util.extend(this.options, a);
        }, c.prototype.redraw = function() {
            return !1;
        }, c.prototype.destroy = function() {}, c.prototype._isResized = function() {
            var a = this.props._previousWidth !== this.props.width || this.props._previousHeight !== this.props.height;
            return this.props._previousWidth = this.props.width, this.props._previousHeight = this.props.height, 
            a;
        }, a.exports = c;
    }, function(a, b) {
        "use strict";
        b.convertHiddenOptions = function(a, c, d) {
            if (d && !Array.isArray(d)) return b.convertHiddenOptions(a, c, [ d ]);
            if (c.hiddenDates = [], d && 1 == Array.isArray(d)) {
                for (var e = 0; e < d.length; e++) if (void 0 === d[e].repeat) {
                    var f = {};
                    f.start = a(d[e].start).toDate().valueOf(), f.end = a(d[e].end).toDate().valueOf(), 
                    c.hiddenDates.push(f);
                }
                c.hiddenDates.sort(function(a, b) {
                    return a.start - b.start;
                });
            }
        }, b.updateHiddenDates = function(a, c, d) {
            if (d && !Array.isArray(d)) return b.updateHiddenDates(a, c, [ d ]);
            if (d && void 0 !== c.domProps.centerContainer.width) {
                b.convertHiddenOptions(a, c, d);
                for (var e = a(c.range.start), f = a(c.range.end), g = c.range.end - c.range.start, h = g / c.domProps.centerContainer.width, i = 0; i < d.length; i++) if (void 0 !== d[i].repeat) {
                    var j = a(d[i].start), k = a(d[i].end);
                    if ("Invalid Date" == j._d) throw new Error("Supplied start date is not valid: " + d[i].start);
                    if ("Invalid Date" == k._d) throw new Error("Supplied end date is not valid: " + d[i].end);
                    var l = k - j;
                    if (l >= 4 * h) {
                        var m = 0, n = f.clone();
                        switch (d[i].repeat) {
                          case "daily":
                            j.day() != k.day() && (m = 1), j.dayOfYear(e.dayOfYear()), j.year(e.year()), j.subtract(7, "days"), 
                            k.dayOfYear(e.dayOfYear()), k.year(e.year()), k.subtract(7 - m, "days"), n.add(1, "weeks");
                            break;

                          case "weekly":
                            var o = k.diff(j, "days"), p = j.day();
                            j.date(e.date()), j.month(e.month()), j.year(e.year()), k = j.clone(), j.day(p), 
                            k.day(p), k.add(o, "days"), j.subtract(1, "weeks"), k.subtract(1, "weeks"), n.add(1, "weeks");
                            break;

                          case "monthly":
                            j.month() != k.month() && (m = 1), j.month(e.month()), j.year(e.year()), j.subtract(1, "months"), 
                            k.month(e.month()), k.year(e.year()), k.subtract(1, "months"), k.add(m, "months"), 
                            n.add(1, "months");
                            break;

                          case "yearly":
                            j.year() != k.year() && (m = 1), j.year(e.year()), j.subtract(1, "years"), k.year(e.year()), 
                            k.subtract(1, "years"), k.add(m, "years"), n.add(1, "years");
                            break;

                          default:
                            return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:", d[i].repeat);
                        }
                        for (;n > j; ) switch (c.hiddenDates.push({
                            start: j.valueOf(),
                            end: k.valueOf()
                        }), d[i].repeat) {
                          case "daily":
                            j.add(1, "days"), k.add(1, "days");
                            break;

                          case "weekly":
                            j.add(1, "weeks"), k.add(1, "weeks");
                            break;

                          case "monthly":
                            j.add(1, "months"), k.add(1, "months");
                            break;

                          case "yearly":
                            j.add(1, "y"), k.add(1, "y");
                            break;

                          default:
                            return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:", d[i].repeat);
                        }
                        c.hiddenDates.push({
                            start: j.valueOf(),
                            end: k.valueOf()
                        });
                    }
                }
                b.removeDuplicates(c);
                var q = b.isHidden(c.range.start, c.hiddenDates), r = b.isHidden(c.range.end, c.hiddenDates), s = c.range.start, t = c.range.end;
                1 == q.hidden && (s = 1 == c.range.startToFront ? q.startDate - 1 : q.endDate + 1), 
                1 == r.hidden && (t = 1 == c.range.endToFront ? r.startDate - 1 : r.endDate + 1), 
                1 != q.hidden && 1 != r.hidden || c.range._applyRange(s, t);
            }
        }, b.removeDuplicates = function(a) {
            for (var b = a.hiddenDates, c = [], d = 0; d < b.length; d++) for (var e = 0; e < b.length; e++) d != e && 1 != b[e].remove && 1 != b[d].remove && (b[e].start >= b[d].start && b[e].end <= b[d].end ? b[e].remove = !0 : b[e].start >= b[d].start && b[e].start <= b[d].end ? (b[d].end = b[e].end, 
            b[e].remove = !0) : b[e].end >= b[d].start && b[e].end <= b[d].end && (b[d].start = b[e].start, 
            b[e].remove = !0));
            for (var d = 0; d < b.length; d++) b[d].remove !== !0 && c.push(b[d]);
            a.hiddenDates = c, a.hiddenDates.sort(function(a, b) {
                return a.start - b.start;
            });
        }, b.printDates = function(a) {
            for (var b = 0; b < a.length; b++) console.log(b, new Date(a[b].start), new Date(a[b].end), a[b].start, a[b].end, a[b].remove);
        }, b.stepOverHiddenDates = function(a, b, c) {
            for (var d = !1, e = b.current.valueOf(), f = 0; f < b.hiddenDates.length; f++) {
                var g = b.hiddenDates[f].start, h = b.hiddenDates[f].end;
                if (e >= g && h > e) {
                    d = !0;
                    break;
                }
            }
            if (1 == d && e < b._end.valueOf() && e != c) {
                var i = a(c), j = a(h);
                i.year() != j.year() ? b.switchedYear = !0 : i.month() != j.month() ? b.switchedMonth = !0 : i.dayOfYear() != j.dayOfYear() && (b.switchedDay = !0), 
                b.current = j;
            }
        }, b.toScreen = function(a, c, d) {
            if (0 == a.body.hiddenDates.length) {
                var e = a.range.conversion(d);
                return (c.valueOf() - e.offset) * e.scale;
            }
            var f = b.isHidden(c, a.body.hiddenDates);
            1 == f.hidden && (c = f.startDate);
            var g = b.getHiddenDurationBetween(a.body.hiddenDates, a.range.start, a.range.end);
            c = b.correctTimeForHidden(a.options.moment, a.body.hiddenDates, a.range, c);
            var e = a.range.conversion(d, g);
            return (c.valueOf() - e.offset) * e.scale;
        }, b.toTime = function(a, c, d) {
            if (0 == a.body.hiddenDates.length) {
                var e = a.range.conversion(d);
                return new Date(c / e.scale + e.offset);
            }
            var f = b.getHiddenDurationBetween(a.body.hiddenDates, a.range.start, a.range.end), g = a.range.end - a.range.start - f, h = g * c / d, i = b.getAccumulatedHiddenDuration(a.body.hiddenDates, a.range, h), j = new Date(i + h + a.range.start);
            return j;
        }, b.getHiddenDurationBetween = function(a, b, c) {
            for (var d = 0, e = 0; e < a.length; e++) {
                var f = a[e].start, g = a[e].end;
                f >= b && c > g && (d += g - f);
            }
            return d;
        }, b.correctTimeForHidden = function(a, c, d, e) {
            return e = a(e).toDate().valueOf(), e -= b.getHiddenDurationBefore(a, c, d, e);
        }, b.getHiddenDurationBefore = function(a, b, c, d) {
            var e = 0;
            d = a(d).toDate().valueOf();
            for (var f = 0; f < b.length; f++) {
                var g = b[f].start, h = b[f].end;
                g >= c.start && h < c.end && d >= h && (e += h - g);
            }
            return e;
        }, b.getAccumulatedHiddenDuration = function(a, b, c) {
            for (var d = 0, e = 0, f = b.start, g = 0; g < a.length; g++) {
                var h = a[g].start, i = a[g].end;
                if (h >= b.start && i < b.end) {
                    if (e += h - f, f = i, e >= c) break;
                    d += i - h;
                }
            }
            return d;
        }, b.snapAwayFromHidden = function(a, c, d, e) {
            var f = b.isHidden(c, a);
            return 1 == f.hidden ? 0 > d ? 1 == e ? f.startDate - (f.endDate - c) - 1 : f.startDate - 1 : 1 == e ? f.endDate + (c - f.startDate) + 1 : f.endDate + 1 : c;
        }, b.isHidden = function(a, b) {
            for (var c = 0; c < b.length; c++) {
                var d = b[c].start, e = b[c].end;
                if (a >= d && e > a) return {
                    hidden: !0,
                    startDate: d,
                    endDate: e
                };
            }
            return {
                hidden: !1,
                startDate: d,
                endDate: e
            };
        };
    }, function(a, b, c) {
        "use strict";
        function d() {}
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(12), g = c(22), h = c(25), i = c(1), j = (c(8), c(10), c(27), c(31), c(41)), k = c(42), l = c(29), m = c(44);
        f(d.prototype), d.prototype._create = function(a) {
            function b(a) {
                c.isActive() && c.emit("mousewheel", a);
            }
            this.dom = {}, this.dom.container = a, this.dom.root = document.createElement("div"), 
            this.dom.background = document.createElement("div"), this.dom.backgroundVertical = document.createElement("div"), 
            this.dom.backgroundHorizontal = document.createElement("div"), this.dom.centerContainer = document.createElement("div"), 
            this.dom.leftContainer = document.createElement("div"), this.dom.rightContainer = document.createElement("div"), 
            this.dom.center = document.createElement("div"), this.dom.left = document.createElement("div"), 
            this.dom.right = document.createElement("div"), this.dom.top = document.createElement("div"), 
            this.dom.bottom = document.createElement("div"), this.dom.shadowTop = document.createElement("div"), 
            this.dom.shadowBottom = document.createElement("div"), this.dom.shadowTopLeft = document.createElement("div"), 
            this.dom.shadowBottomLeft = document.createElement("div"), this.dom.shadowTopRight = document.createElement("div"), 
            this.dom.shadowBottomRight = document.createElement("div"), this.dom.root.className = "vis-timeline", 
            this.dom.background.className = "vis-panel vis-background", this.dom.backgroundVertical.className = "vis-panel vis-background vis-vertical", 
            this.dom.backgroundHorizontal.className = "vis-panel vis-background vis-horizontal", 
            this.dom.centerContainer.className = "vis-panel vis-center", this.dom.leftContainer.className = "vis-panel vis-left", 
            this.dom.rightContainer.className = "vis-panel vis-right", this.dom.top.className = "vis-panel vis-top", 
            this.dom.bottom.className = "vis-panel vis-bottom", this.dom.left.className = "vis-content", 
            this.dom.center.className = "vis-content", this.dom.right.className = "vis-content", 
            this.dom.shadowTop.className = "vis-shadow vis-top", this.dom.shadowBottom.className = "vis-shadow vis-bottom", 
            this.dom.shadowTopLeft.className = "vis-shadow vis-top", this.dom.shadowBottomLeft.className = "vis-shadow vis-bottom", 
            this.dom.shadowTopRight.className = "vis-shadow vis-top", this.dom.shadowBottomRight.className = "vis-shadow vis-bottom", 
            this.dom.root.appendChild(this.dom.background), this.dom.root.appendChild(this.dom.backgroundVertical), 
            this.dom.root.appendChild(this.dom.backgroundHorizontal), this.dom.root.appendChild(this.dom.centerContainer), 
            this.dom.root.appendChild(this.dom.leftContainer), this.dom.root.appendChild(this.dom.rightContainer), 
            this.dom.root.appendChild(this.dom.top), this.dom.root.appendChild(this.dom.bottom), 
            this.dom.centerContainer.appendChild(this.dom.center), this.dom.leftContainer.appendChild(this.dom.left), 
            this.dom.rightContainer.appendChild(this.dom.right), this.dom.centerContainer.appendChild(this.dom.shadowTop), 
            this.dom.centerContainer.appendChild(this.dom.shadowBottom), this.dom.leftContainer.appendChild(this.dom.shadowTopLeft), 
            this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft), this.dom.rightContainer.appendChild(this.dom.shadowTopRight), 
            this.dom.rightContainer.appendChild(this.dom.shadowBottomRight), this.on("rangechange", function() {
                this.initialDrawDone === !0 && this._redraw();
            }.bind(this)), this.on("touch", this._onTouch.bind(this)), this.on("pan", this._onDrag.bind(this));
            var c = this;
            this.on("_change", function(a) {
                a && 1 == a.queue ? c._redrawTimer || (c._redrawTimer = setTimeout(function() {
                    c._redrawTimer = null, c._redraw();
                }, 0)) : c._redraw();
            }), this.hammer = new g(this.dom.root);
            var d = this.hammer.get("pinch").set({
                enable: !0
            });
            h.disablePreventDefaultVertically(d), this.hammer.get("pan").set({
                threshold: 5,
                direction: g.DIRECTION_HORIZONTAL
            }), this.listeners = {};
            var e = [ "tap", "doubletap", "press", "pinch", "pan", "panstart", "panmove", "panend" ];
            if (e.forEach(function(a) {
                var b = function(b) {
                    c.isActive() && c.emit(a, b);
                };
                c.hammer.on(a, b), c.listeners[a] = b;
            }), h.onTouch(this.hammer, function(a) {
                c.emit("touch", a);
            }.bind(this)), h.onRelease(this.hammer, function(a) {
                c.emit("release", a);
            }.bind(this)), this.dom.root.addEventListener("mousewheel", b), this.dom.root.addEventListener("DOMMouseScroll", b), 
            this.props = {
                root: {},
                background: {},
                centerContainer: {},
                leftContainer: {},
                rightContainer: {},
                center: {},
                left: {},
                right: {},
                top: {},
                bottom: {},
                border: {},
                scrollTop: 0,
                scrollTopMin: 0
            }, this.customTimes = [], this.touch = {}, this.redrawCount = 0, this.initialDrawDone = !1, 
            !a) throw new Error("No container provided");
            a.appendChild(this.dom.root);
        }, d.prototype.setOptions = function(a) {
            if (a) {
                var b = [ "width", "height", "minHeight", "maxHeight", "autoResize", "start", "end", "clickToUse", "dataAttributes", "hiddenDates", "locale", "locales", "moment", "throttleRedraw" ];
                if (i.selectiveExtend(b, this.options, a), this.options.orientation = {
                    item: void 0,
                    axis: void 0
                }, "orientation" in a && ("string" == typeof a.orientation ? this.options.orientation = {
                    item: a.orientation,
                    axis: a.orientation
                } : "object" === e(a.orientation) && ("item" in a.orientation && (this.options.orientation.item = a.orientation.item), 
                "axis" in a.orientation && (this.options.orientation.axis = a.orientation.axis))), 
                "both" === this.options.orientation.axis) {
                    if (!this.timeAxis2) {
                        var c = this.timeAxis2 = new j(this.body);
                        c.setOptions = function(a) {
                            var b = a ? i.extend({}, a) : {};
                            b.orientation = "top", j.prototype.setOptions.call(c, b);
                        }, this.components.push(c);
                    }
                } else if (this.timeAxis2) {
                    var d = this.components.indexOf(this.timeAxis2);
                    -1 !== d && this.components.splice(d, 1), this.timeAxis2.destroy(), this.timeAxis2 = null;
                }
                if ("function" == typeof a.drawPoints && (a.drawPoints = {
                    onRender: a.drawPoints
                }), "hiddenDates" in this.options && l.convertHiddenOptions(this.options.moment, this.body, this.options.hiddenDates), 
                "clickToUse" in a && (a.clickToUse ? this.activator || (this.activator = new k(this.dom.root)) : this.activator && (this.activator.destroy(), 
                delete this.activator)), "showCustomTime" in a) throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");
                this._initAutoResize();
            }
            if (this.components.forEach(function(b) {
                return b.setOptions(a);
            }), "configure" in a) {
                this.configurator || (this.configurator = this._createConfigurator()), this.configurator.setOptions(a.configure);
                var f = i.deepExtend({}, this.options);
                this.components.forEach(function(a) {
                    i.deepExtend(f, a.options);
                }), this.configurator.setModuleOptions({
                    global: f
                });
            }
            this._origRedraw ? this._redraw() : (this._origRedraw = this._redraw.bind(this), 
            this._redraw = i.throttle(this._origRedraw, this.options.throttleRedraw));
        }, d.prototype.isActive = function() {
            return !this.activator || this.activator.active;
        }, d.prototype.destroy = function() {
            this.setItems(null), this.setGroups(null), this.off(), this._stopAutoResize(), this.dom.root.parentNode && this.dom.root.parentNode.removeChild(this.dom.root), 
            this.dom = null, this.activator && (this.activator.destroy(), delete this.activator);
            for (var a in this.listeners) this.listeners.hasOwnProperty(a) && delete this.listeners[a];
            this.listeners = null, this.hammer = null, this.components.forEach(function(a) {
                return a.destroy();
            }), this.body = null;
        }, d.prototype.setCustomTime = function(a, b) {
            var c = this.customTimes.filter(function(a) {
                return b === a.options.id;
            });
            if (0 === c.length) throw new Error("No custom time bar found with id " + JSON.stringify(b));
            c.length > 0 && c[0].setCustomTime(a);
        }, d.prototype.getCustomTime = function(a) {
            var b = this.customTimes.filter(function(b) {
                return b.options.id === a;
            });
            if (0 === b.length) throw new Error("No custom time bar found with id " + JSON.stringify(a));
            return b[0].getCustomTime();
        }, d.prototype.setCustomTimeTitle = function(a, b) {
            var c = this.customTimes.filter(function(a) {
                return a.options.id === b;
            });
            if (0 === c.length) throw new Error("No custom time bar found with id " + JSON.stringify(b));
            return c.length > 0 ? c[0].setCustomTitle(a) : void 0;
        }, d.prototype.getEventProperties = function(a) {
            return {
                event: a
            };
        }, d.prototype.addCustomTime = function(a, b) {
            var c = void 0 !== a ? i.convert(a, "Date").valueOf() : new Date(), d = this.customTimes.some(function(a) {
                return a.options.id === b;
            });
            if (d) throw new Error("A custom time with id " + JSON.stringify(b) + " already exists");
            var e = new m(this.body, i.extend({}, this.options, {
                time: c,
                id: b
            }));
            return this.customTimes.push(e), this.components.push(e), this._redraw(), b;
        }, d.prototype.removeCustomTime = function(a) {
            var b = this.customTimes.filter(function(b) {
                return b.options.id === a;
            });
            if (0 === b.length) throw new Error("No custom time bar found with id " + JSON.stringify(a));
            b.forEach(function(a) {
                this.customTimes.splice(this.customTimes.indexOf(a), 1), this.components.splice(this.components.indexOf(a), 1), 
                a.destroy();
            }.bind(this));
        }, d.prototype.getVisibleItems = function() {
            return this.itemSet && this.itemSet.getVisibleItems() || [];
        }, d.prototype.fit = function(a) {
            var b = this.getDataRange();
            if (null !== b.min || null !== b.max) {
                var c = b.max - b.min, d = new Date(b.min.valueOf() - .01 * c), e = new Date(b.max.valueOf() + .01 * c), f = a && void 0 !== a.animation ? a.animation : !0;
                this.range.setRange(d, e, f);
            }
        }, d.prototype.getDataRange = function() {
            throw new Error("Cannot invoke abstract method getDataRange");
        }, d.prototype.setWindow = function(a, b, c) {
            var d;
            if (1 == arguments.length) {
                var e = arguments[0];
                d = void 0 !== e.animation ? e.animation : !0, this.range.setRange(e.start, e.end, d);
            } else d = c && void 0 !== c.animation ? c.animation : !0, this.range.setRange(a, b, d);
        }, d.prototype.moveTo = function(a, b) {
            var c = this.range.end - this.range.start, d = i.convert(a, "Date").valueOf(), e = d - c / 2, f = d + c / 2, g = b && void 0 !== b.animation ? b.animation : !0;
            this.range.setRange(e, f, g);
        }, d.prototype.getWindow = function() {
            var a = this.range.getRange();
            return {
                start: new Date(a.start),
                end: new Date(a.end)
            };
        }, d.prototype.redraw = function() {
            this._redraw();
        }, d.prototype._redraw = function() {
            this.redrawCount++;
            var a = !1, b = this.options, c = this.props, d = this.dom;
            if (d && d.container && 0 != d.container.clientWidth) {
                l.updateHiddenDates(this.options.moment, this.body, this.options.hiddenDates), "top" == b.orientation ? (i.addClassName(d.root, "vis-top"), 
                i.removeClassName(d.root, "vis-bottom")) : (i.removeClassName(d.root, "vis-top"), 
                i.addClassName(d.root, "vis-bottom")), d.root.style.maxHeight = i.option.asSize(b.maxHeight, ""), 
                d.root.style.minHeight = i.option.asSize(b.minHeight, ""), d.root.style.width = i.option.asSize(b.width, ""), 
                c.border.left = (d.centerContainer.offsetWidth - d.centerContainer.clientWidth) / 2, 
                c.border.right = c.border.left, c.border.top = (d.centerContainer.offsetHeight - d.centerContainer.clientHeight) / 2, 
                c.border.bottom = c.border.top;
                var e = d.root.offsetHeight - d.root.clientHeight, f = d.root.offsetWidth - d.root.clientWidth;
                0 === d.centerContainer.clientHeight && (c.border.left = c.border.top, c.border.right = c.border.left), 
                0 === d.root.clientHeight && (f = e), c.center.height = d.center.offsetHeight, c.left.height = d.left.offsetHeight, 
                c.right.height = d.right.offsetHeight, c.top.height = d.top.clientHeight || -c.border.top, 
                c.bottom.height = d.bottom.clientHeight || -c.border.bottom;
                var h = Math.max(c.left.height, c.center.height, c.right.height), j = c.top.height + h + c.bottom.height + e + c.border.top + c.border.bottom;
                d.root.style.height = i.option.asSize(b.height, j + "px"), c.root.height = d.root.offsetHeight, 
                c.background.height = c.root.height - e;
                var k = c.root.height - c.top.height - c.bottom.height - e;
                c.centerContainer.height = k, c.leftContainer.height = k, c.rightContainer.height = c.leftContainer.height, 
                c.root.width = d.root.offsetWidth, c.background.width = c.root.width - f, c.left.width = d.leftContainer.clientWidth || -c.border.left, 
                c.leftContainer.width = c.left.width, c.right.width = d.rightContainer.clientWidth || -c.border.right, 
                c.rightContainer.width = c.right.width;
                var m = c.root.width - c.left.width - c.right.width - f;
                c.center.width = m, c.centerContainer.width = m, c.top.width = m, c.bottom.width = m, 
                d.background.style.height = c.background.height + "px", d.backgroundVertical.style.height = c.background.height + "px", 
                d.backgroundHorizontal.style.height = c.centerContainer.height + "px", d.centerContainer.style.height = c.centerContainer.height + "px", 
                d.leftContainer.style.height = c.leftContainer.height + "px", d.rightContainer.style.height = c.rightContainer.height + "px", 
                d.background.style.width = c.background.width + "px", d.backgroundVertical.style.width = c.centerContainer.width + "px", 
                d.backgroundHorizontal.style.width = c.background.width + "px", d.centerContainer.style.width = c.center.width + "px", 
                d.top.style.width = c.top.width + "px", d.bottom.style.width = c.bottom.width + "px", 
                d.background.style.left = "0", d.background.style.top = "0", d.backgroundVertical.style.left = c.left.width + c.border.left + "px", 
                d.backgroundVertical.style.top = "0", d.backgroundHorizontal.style.left = "0", d.backgroundHorizontal.style.top = c.top.height + "px", 
                d.centerContainer.style.left = c.left.width + "px", d.centerContainer.style.top = c.top.height + "px", 
                d.leftContainer.style.left = "0", d.leftContainer.style.top = c.top.height + "px", 
                d.rightContainer.style.left = c.left.width + c.center.width + "px", d.rightContainer.style.top = c.top.height + "px", 
                d.top.style.left = c.left.width + "px", d.top.style.top = "0", d.bottom.style.left = c.left.width + "px", 
                d.bottom.style.top = c.top.height + c.centerContainer.height + "px", this._updateScrollTop();
                var n = this.props.scrollTop;
                "top" != b.orientation.item && (n += Math.max(this.props.centerContainer.height - this.props.center.height - this.props.border.top - this.props.border.bottom, 0)), 
                d.center.style.left = "0", d.center.style.top = n + "px", d.left.style.left = "0", 
                d.left.style.top = n + "px", d.right.style.left = "0", d.right.style.top = n + "px";
                var o = 0 == this.props.scrollTop ? "hidden" : "", p = this.props.scrollTop == this.props.scrollTopMin ? "hidden" : "";
                d.shadowTop.style.visibility = o, d.shadowBottom.style.visibility = p, d.shadowTopLeft.style.visibility = o, 
                d.shadowBottomLeft.style.visibility = p, d.shadowTopRight.style.visibility = o, 
                d.shadowBottomRight.style.visibility = p;
                var q = this.props.center.height > this.props.centerContainer.height;
                this.hammer.get("pan").set({
                    direction: q ? g.DIRECTION_ALL : g.DIRECTION_HORIZONTAL
                }), this.components.forEach(function(b) {
                    a = b.redraw() || a;
                });
                var r = 5;
                if (a) {
                    if (this.redrawCount < r) return void this.body.emitter.emit("_change");
                    console.log("WARNING: infinite loop in redraw?");
                } else this.redrawCount = 0;
                this.initialDrawDone = !0, this.body.emitter.emit("changed");
            }
        }, d.prototype.repaint = function() {
            throw new Error("Function repaint is deprecated. Use redraw instead.");
        }, d.prototype.setCurrentTime = function(a) {
            if (!this.currentTime) throw new Error("Option showCurrentTime must be true");
            this.currentTime.setCurrentTime(a);
        }, d.prototype.getCurrentTime = function() {
            if (!this.currentTime) throw new Error("Option showCurrentTime must be true");
            return this.currentTime.getCurrentTime();
        }, d.prototype._toTime = function(a) {
            return l.toTime(this, a, this.props.center.width);
        }, d.prototype._toGlobalTime = function(a) {
            return l.toTime(this, a, this.props.root.width);
        }, d.prototype._toScreen = function(a) {
            return l.toScreen(this, a, this.props.center.width);
        }, d.prototype._toGlobalScreen = function(a) {
            return l.toScreen(this, a, this.props.root.width);
        }, d.prototype._initAutoResize = function() {
            1 == this.options.autoResize ? this._startAutoResize() : this._stopAutoResize();
        }, d.prototype._startAutoResize = function() {
            var a = this;
            this._stopAutoResize(), this._onResize = function() {
                return 1 != a.options.autoResize ? void a._stopAutoResize() : void (a.dom.root && (a.dom.root.offsetWidth == a.props.lastWidth && a.dom.root.offsetHeight == a.props.lastHeight || (a.props.lastWidth = a.dom.root.offsetWidth, 
                a.props.lastHeight = a.dom.root.offsetHeight, a.body.emitter.emit("_change"))));
            }, i.addEventListener(window, "resize", this._onResize), a.dom.root && (a.props.lastWidth = a.dom.root.offsetWidth, 
            a.props.lastHeight = a.dom.root.offsetHeight), this.watchTimer = setInterval(this._onResize, 1e3);
        }, d.prototype._stopAutoResize = function() {
            this.watchTimer && (clearInterval(this.watchTimer), this.watchTimer = void 0), this._onResize && (i.removeEventListener(window, "resize", this._onResize), 
            this._onResize = null);
        }, d.prototype._onTouch = function(a) {
            this.touch.allowDragging = !0, this.touch.initialScrollTop = this.props.scrollTop;
        }, d.prototype._onPinch = function(a) {
            this.touch.allowDragging = !1;
        }, d.prototype._onDrag = function(a) {
            if (this.touch.allowDragging) {
                var b = a.deltaY, c = this._getScrollTop(), d = this._setScrollTop(this.touch.initialScrollTop + b);
                d != c && this.emit("verticalDrag");
            }
        }, d.prototype._setScrollTop = function(a) {
            return this.props.scrollTop = a, this._updateScrollTop(), this.props.scrollTop;
        }, d.prototype._updateScrollTop = function() {
            var a = Math.min(this.props.centerContainer.height - this.props.center.height, 0);
            return a != this.props.scrollTopMin && ("top" != this.options.orientation.item && (this.props.scrollTop += a - this.props.scrollTopMin), 
            this.props.scrollTopMin = a), this.props.scrollTop > 0 && (this.props.scrollTop = 0), 
            this.props.scrollTop < a && (this.props.scrollTop = a), this.props.scrollTop;
        }, d.prototype._getScrollTop = function() {
            return this.props.scrollTop;
        }, d.prototype._createConfigurator = function() {
            throw new Error("Cannot invoke abstract method _createConfigurator");
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this.body = a, this.defaultOptions = {
                type: null,
                orientation: {
                    item: "bottom"
                },
                align: "auto",
                stack: !0,
                groupOrderSwap: function(a, b, c) {
                    var d = b.order;
                    b.order = a.order, a.order = d;
                },
                groupOrder: "order",
                selectable: !0,
                multiselect: !1,
                itemsAlwaysDraggable: !1,
                editable: {
                    updateTime: !1,
                    updateGroup: !1,
                    add: !1,
                    remove: !1
                },
                groupEditable: {
                    order: !1,
                    add: !1,
                    remove: !1
                },
                snap: j.snap,
                onAdd: function(a, b) {
                    b(a);
                },
                onUpdate: function(a, b) {
                    b(a);
                },
                onMove: function(a, b) {
                    b(a);
                },
                onRemove: function(a, b) {
                    b(a);
                },
                onMoving: function(a, b) {
                    b(a);
                },
                onAddGroup: function(a, b) {
                    b(a);
                },
                onMoveGroup: function(a, b) {
                    b(a);
                },
                onRemoveGroup: function(a, b) {
                    b(a);
                },
                margin: {
                    item: {
                        horizontal: 10,
                        vertical: 10
                    },
                    axis: 20
                }
            }, this.options = g.extend({}, this.defaultOptions), this.itemOptions = {
                type: {
                    start: "Date",
                    end: "Date"
                }
            }, this.conversion = {
                toScreen: a.util.toScreen,
                toTime: a.util.toTime
            }, this.dom = {}, this.props = {}, this.hammer = null;
            var c = this;
            this.itemsData = null, this.groupsData = null, this.itemListeners = {
                add: function(a, b, d) {
                    c._onAdd(b.items);
                },
                update: function(a, b, d) {
                    c._onUpdate(b.items);
                },
                remove: function(a, b, d) {
                    c._onRemove(b.items);
                }
            }, this.groupListeners = {
                add: function(a, b, d) {
                    c._onAddGroups(b.items);
                },
                update: function(a, b, d) {
                    c._onUpdateGroups(b.items);
                },
                remove: function(a, b, d) {
                    c._onRemoveGroups(b.items);
                }
            }, this.items = {}, this.groups = {}, this.groupIds = [], this.selection = [], this.stackDirty = !0, 
            this.touchParams = {}, this.groupTouchParams = {}, this._create(), this.setOptions(b);
        }
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(22), g = c(1), h = c(8), i = c(10), j = c(32), k = c(28), l = c(33), m = c(37), n = c(38), o = c(39), p = c(35), q = c(40), r = "__ungrouped__", s = "__background__";
        d.prototype = new k(), d.types = {
            background: q,
            box: n,
            range: p,
            point: o
        }, d.prototype._create = function() {
            var a = document.createElement("div");
            a.className = "vis-itemset", a["timeline-itemset"] = this, this.dom.frame = a;
            var b = document.createElement("div");
            b.className = "vis-background", a.appendChild(b), this.dom.background = b;
            var c = document.createElement("div");
            c.className = "vis-foreground", a.appendChild(c), this.dom.foreground = c;
            var d = document.createElement("div");
            d.className = "vis-axis", this.dom.axis = d;
            var e = document.createElement("div");
            e.className = "vis-labelset", this.dom.labelSet = e, this._updateUngrouped();
            var g = new m(s, null, this);
            g.show(), this.groups[s] = g, this.hammer = new f(this.body.dom.centerContainer), 
            this.hammer.on("hammer.input", function(a) {
                a.isFirst && this._onTouch(a);
            }.bind(this)), this.hammer.on("panstart", this._onDragStart.bind(this)), this.hammer.on("panmove", this._onDrag.bind(this)), 
            this.hammer.on("panend", this._onDragEnd.bind(this)), this.hammer.get("pan").set({
                threshold: 5,
                direction: f.DIRECTION_HORIZONTAL
            }), this.hammer.on("tap", this._onSelectItem.bind(this)), this.hammer.on("press", this._onMultiSelectItem.bind(this)), 
            this.hammer.on("doubletap", this._onAddItem.bind(this)), this.groupHammer = new f(this.body.dom.leftContainer), 
            this.groupHammer.on("panstart", this._onGroupDragStart.bind(this)), this.groupHammer.on("panmove", this._onGroupDrag.bind(this)), 
            this.groupHammer.on("panend", this._onGroupDragEnd.bind(this)), this.groupHammer.get("pan").set({
                threshold: 5,
                direction: f.DIRECTION_HORIZONTAL
            }), this.show();
        }, d.prototype.setOptions = function(a) {
            if (a) {
                var b = [ "type", "align", "order", "stack", "selectable", "multiselect", "itemsAlwaysDraggable", "multiselectPerGroup", "groupOrder", "dataAttributes", "template", "groupTemplate", "hide", "snap", "groupOrderSwap" ];
                g.selectiveExtend(b, this.options, a), "orientation" in a && ("string" == typeof a.orientation ? this.options.orientation.item = "top" === a.orientation ? "top" : "bottom" : "object" === e(a.orientation) && "item" in a.orientation && (this.options.orientation.item = a.orientation.item)), 
                "margin" in a && ("number" == typeof a.margin ? (this.options.margin.axis = a.margin, 
                this.options.margin.item.horizontal = a.margin, this.options.margin.item.vertical = a.margin) : "object" === e(a.margin) && (g.selectiveExtend([ "axis" ], this.options.margin, a.margin), 
                "item" in a.margin && ("number" == typeof a.margin.item ? (this.options.margin.item.horizontal = a.margin.item, 
                this.options.margin.item.vertical = a.margin.item) : "object" === e(a.margin.item) && g.selectiveExtend([ "horizontal", "vertical" ], this.options.margin.item, a.margin.item)))), 
                "editable" in a && ("boolean" == typeof a.editable ? (this.options.editable.updateTime = a.editable, 
                this.options.editable.updateGroup = a.editable, this.options.editable.add = a.editable, 
                this.options.editable.remove = a.editable) : "object" === e(a.editable) && g.selectiveExtend([ "updateTime", "updateGroup", "add", "remove" ], this.options.editable, a.editable)), 
                "groupEditable" in a && ("boolean" == typeof a.groupEditable ? (this.options.groupEditable.order = a.groupEditable, 
                this.options.groupEditable.add = a.groupEditable, this.options.groupEditable.remove = a.groupEditable) : "object" === e(a.groupEditable) && g.selectiveExtend([ "order", "add", "remove" ], this.options.groupEditable, a.groupEditable));
                var c = function(b) {
                    var c = a[b];
                    if (c) {
                        if (!(c instanceof Function)) throw new Error("option " + b + " must be a function " + b + "(item, callback)");
                        this.options[b] = c;
                    }
                }.bind(this);
                [ "onAdd", "onUpdate", "onRemove", "onMove", "onMoving", "onAddGroup", "onMoveGroup", "onRemoveGroup" ].forEach(c), 
                this.markDirty();
            }
        }, d.prototype.markDirty = function(a) {
            this.groupIds = [], this.stackDirty = !0, a && a.refreshItems && g.forEach(this.items, function(a) {
                a.dirty = !0, a.displayed && a.redraw();
            });
        }, d.prototype.destroy = function() {
            this.hide(), this.setItems(null), this.setGroups(null), this.hammer = null, this.body = null, 
            this.conversion = null;
        }, d.prototype.hide = function() {
            this.dom.frame.parentNode && this.dom.frame.parentNode.removeChild(this.dom.frame), 
            this.dom.axis.parentNode && this.dom.axis.parentNode.removeChild(this.dom.axis), 
            this.dom.labelSet.parentNode && this.dom.labelSet.parentNode.removeChild(this.dom.labelSet);
        }, d.prototype.show = function() {
            this.dom.frame.parentNode || this.body.dom.center.appendChild(this.dom.frame), this.dom.axis.parentNode || this.body.dom.backgroundVertical.appendChild(this.dom.axis), 
            this.dom.labelSet.parentNode || this.body.dom.left.appendChild(this.dom.labelSet);
        }, d.prototype.setSelection = function(a) {
            var b, c, d, e;
            for (void 0 == a && (a = []), Array.isArray(a) || (a = [ a ]), b = 0, c = this.selection.length; c > b; b++) d = this.selection[b], 
            e = this.items[d], e && e.unselect();
            for (this.selection = [], b = 0, c = a.length; c > b; b++) d = a[b], e = this.items[d], 
            e && (this.selection.push(d), e.select());
        }, d.prototype.getSelection = function() {
            return this.selection.concat([]);
        }, d.prototype.getVisibleItems = function() {
            var a = this.body.range.getRange(), b = this.body.util.toScreen(a.start), c = this.body.util.toScreen(a.end), d = [];
            for (var e in this.groups) if (this.groups.hasOwnProperty(e)) for (var f = this.groups[e], g = f.visibleItems, h = 0; h < g.length; h++) {
                var i = g[h];
                i.left < c && i.left + i.width > b && d.push(i.id);
            }
            return d;
        }, d.prototype._deselect = function(a) {
            for (var b = this.selection, c = 0, d = b.length; d > c; c++) if (b[c] == a) {
                b.splice(c, 1);
                break;
            }
        }, d.prototype.redraw = function() {
            var a = this.options.margin, b = this.body.range, c = g.option.asSize, d = this.options, e = d.orientation.item, f = !1, h = this.dom.frame;
            this.props.top = this.body.domProps.top.height + this.body.domProps.border.top, 
            this.props.left = this.body.domProps.left.width + this.body.domProps.border.left, 
            h.className = "vis-itemset", f = this._orderGroups() || f;
            var i = b.end - b.start, j = i != this.lastVisibleInterval || this.props.width != this.props.lastWidth;
            j && (this.stackDirty = !0), this.lastVisibleInterval = i, this.props.lastWidth = this.props.width;
            var k = this.stackDirty, l = this._firstGroup(), m = {
                item: a.item,
                axis: a.axis
            }, n = {
                item: a.item,
                axis: a.item.vertical / 2
            }, o = 0, p = a.axis + a.item.vertical;
            return this.groups[s].redraw(b, n, k), g.forEach(this.groups, function(a) {
                var c = a == l ? m : n, d = a.redraw(b, c, k);
                f = d || f, o += a.height;
            }), o = Math.max(o, p), this.stackDirty = !1, h.style.height = c(o), this.props.width = h.offsetWidth, 
            this.props.height = o, this.dom.axis.style.top = c("top" == e ? this.body.domProps.top.height + this.body.domProps.border.top : this.body.domProps.top.height + this.body.domProps.centerContainer.height), 
            this.dom.axis.style.left = "0", f = this._isResized() || f;
        }, d.prototype._firstGroup = function() {
            var a = "top" == this.options.orientation.item ? 0 : this.groupIds.length - 1, b = this.groupIds[a], c = this.groups[b] || this.groups[r];
            return c || null;
        }, d.prototype._updateUngrouped = function() {
            var a, b, c = this.groups[r];
            this.groups[s];
            if (this.groupsData) {
                if (c) {
                    c.hide(), delete this.groups[r];
                    for (b in this.items) if (this.items.hasOwnProperty(b)) {
                        a = this.items[b], a.parent && a.parent.remove(a);
                        var d = this._getGroupId(a.data), e = this.groups[d];
                        e && e.add(a) || a.hide();
                    }
                }
            } else if (!c) {
                var f = null, g = null;
                c = new l(f, g, this), this.groups[r] = c;
                for (b in this.items) this.items.hasOwnProperty(b) && (a = this.items[b], c.add(a));
                c.show();
            }
        }, d.prototype.getLabelSet = function() {
            return this.dom.labelSet;
        }, d.prototype.setItems = function(a) {
            var b, c = this, d = this.itemsData;
            if (a) {
                if (!(a instanceof h || a instanceof i)) throw new TypeError("Data must be an instance of DataSet or DataView");
                this.itemsData = a;
            } else this.itemsData = null;
            if (d && (g.forEach(this.itemListeners, function(a, b) {
                d.off(b, a);
            }), b = d.getIds(), this._onRemove(b)), this.itemsData) {
                var e = this.id;
                g.forEach(this.itemListeners, function(a, b) {
                    c.itemsData.on(b, a, e);
                }), b = this.itemsData.getIds(), this._onAdd(b), this._updateUngrouped();
            }
            this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype.getItems = function() {
            return this.itemsData;
        }, d.prototype.setGroups = function(a) {
            var b, c = this;
            if (this.groupsData && (g.forEach(this.groupListeners, function(a, b) {
                c.groupsData.off(b, a);
            }), b = this.groupsData.getIds(), this.groupsData = null, this._onRemoveGroups(b)), 
            a) {
                if (!(a instanceof h || a instanceof i)) throw new TypeError("Data must be an instance of DataSet or DataView");
                this.groupsData = a;
            } else this.groupsData = null;
            if (this.groupsData) {
                var d = this.id;
                g.forEach(this.groupListeners, function(a, b) {
                    c.groupsData.on(b, a, d);
                }), b = this.groupsData.getIds(), this._onAddGroups(b);
            }
            this._updateUngrouped(), this._order(), this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype.getGroups = function() {
            return this.groupsData;
        }, d.prototype.removeItem = function(a) {
            var b = this.itemsData.get(a), c = this.itemsData.getDataSet();
            b && this.options.onRemove(b, function(b) {
                b && c.remove(a);
            });
        }, d.prototype._getType = function(a) {
            return a.type || this.options.type || (a.end ? "range" : "box");
        }, d.prototype._getGroupId = function(a) {
            var b = this._getType(a);
            return "background" == b && void 0 == a.group ? s : this.groupsData ? a.group : r;
        }, d.prototype._onUpdate = function(a) {
            var b = this;
            a.forEach(function(a) {
                var c, e = b.itemsData.get(a, b.itemOptions), f = b.items[a], g = b._getType(e), h = d.types[g];
                if (f && (h && f instanceof h ? b._updateItem(f, e) : (c = f.selected, b._removeItem(f), 
                f = null)), !f) {
                    if (!h) throw "rangeoverflow" == g ? new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}') : new TypeError('Unknown item type "' + g + '"');
                    f = new h(e, b.conversion, b.options), f.id = a, b._addItem(f), c && (this.selection.push(a), 
                    f.select());
                }
            }.bind(this)), this._order(), this.stackDirty = !0, this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype._onAdd = d.prototype._onUpdate, d.prototype._onRemove = function(a) {
            var b = 0, c = this;
            a.forEach(function(a) {
                var d = c.items[a];
                d && (b++, c._removeItem(d));
            }), b && (this._order(), this.stackDirty = !0, this.body.emitter.emit("_change", {
                queue: !0
            }));
        }, d.prototype._order = function() {
            g.forEach(this.groups, function(a) {
                a.order();
            });
        }, d.prototype._onUpdateGroups = function(a) {
            this._onAddGroups(a);
        }, d.prototype._onAddGroups = function(a) {
            var b = this;
            a.forEach(function(a) {
                var c = b.groupsData.get(a), d = b.groups[a];
                if (d) d.setData(c); else {
                    if (a == r || a == s) throw new Error("Illegal group id. " + a + " is a reserved id.");
                    var e = Object.create(b.options);
                    g.extend(e, {
                        height: null
                    }), d = new l(a, c, b), b.groups[a] = d;
                    for (var f in b.items) if (b.items.hasOwnProperty(f)) {
                        var h = b.items[f];
                        h.data.group == a && d.add(h);
                    }
                    d.order(), d.show();
                }
            }), this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype._onRemoveGroups = function(a) {
            var b = this.groups;
            a.forEach(function(a) {
                var c = b[a];
                c && (c.hide(), delete b[a]);
            }), this.markDirty(), this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype._orderGroups = function() {
            if (this.groupsData) {
                var a = this.groupsData.getIds({
                    order: this.options.groupOrder
                }), b = !g.equalArray(a, this.groupIds);
                if (b) {
                    var c = this.groups;
                    a.forEach(function(a) {
                        c[a].hide();
                    }), a.forEach(function(a) {
                        c[a].show();
                    }), this.groupIds = a;
                }
                return b;
            }
            return !1;
        }, d.prototype._addItem = function(a) {
            this.items[a.id] = a;
            var b = this._getGroupId(a.data), c = this.groups[b];
            c && c.add(a);
        }, d.prototype._updateItem = function(a, b) {
            var c = a.data.group, d = a.data.subgroup;
            if (a.setData(b), c != a.data.group || d != a.data.subgroup) {
                var e = this.groups[c];
                e && e.remove(a);
                var f = this._getGroupId(a.data), g = this.groups[f];
                g && g.add(a);
            }
        }, d.prototype._removeItem = function(a) {
            a.hide(), delete this.items[a.id];
            var b = this.selection.indexOf(a.id);
            -1 != b && this.selection.splice(b, 1), a.parent && a.parent.remove(a);
        }, d.prototype._constructByEndArray = function(a) {
            for (var b = [], c = 0; c < a.length; c++) a[c] instanceof p && b.push(a[c]);
            return b;
        }, d.prototype._onTouch = function(a) {
            this.touchParams.item = this.itemFromTarget(a), this.touchParams.dragLeftItem = a.target.dragLeftItem || !1, 
            this.touchParams.dragRightItem = a.target.dragRightItem || !1, this.touchParams.itemProps = null;
        }, d.prototype._getGroupIndex = function(a) {
            for (var b = 0; b < this.groupIds.length; b++) if (a == this.groupIds[b]) return b;
        }, d.prototype._onDragStart = function(a) {
            var b, c = this.touchParams.item || null, d = this;
            if (c && (c.selected || this.options.itemsAlwaysDraggable)) {
                if (!this.options.editable.updateTime && !this.options.editable.updateGroup && !c.editable) return;
                if (c.editable === !1) return;
                var e = this.touchParams.dragLeftItem, f = this.touchParams.dragRightItem;
                if (e) b = {
                    item: e,
                    initialX: a.center.x,
                    dragLeft: !0,
                    data: this._cloneItemData(c.data)
                }, this.touchParams.itemProps = [ b ]; else if (f) b = {
                    item: f,
                    initialX: a.center.x,
                    dragRight: !0,
                    data: this._cloneItemData(c.data)
                }, this.touchParams.itemProps = [ b ]; else {
                    this.touchParams.selectedItem = c;
                    var g = this._getGroupIndex(c.data.group), h = this.options.itemsAlwaysDraggable && !c.selected ? [ c.id ] : this.getSelection();
                    this.touchParams.itemProps = h.map(function(b) {
                        var c = d.items[b], e = d._getGroupIndex(c.data.group);
                        return {
                            item: c,
                            initialX: a.center.x,
                            groupOffset: g - e,
                            data: this._cloneItemData(c.data)
                        };
                    }.bind(this));
                }
                a.stopPropagation();
            } else this.options.editable.add && (a.srcEvent.ctrlKey || a.srcEvent.metaKey) && this._onDragStartAddItem(a);
        }, d.prototype._onDragStartAddItem = function(a) {
            var b = this.options.snap || null, c = g.getAbsoluteLeft(this.dom.frame), d = a.center.x - c - 10, e = this.body.util.toTime(d), f = this.body.util.getScale(), h = this.body.util.getStep(), i = b ? b(e, f, h) : e, j = i, k = {
                type: "range",
                start: i,
                end: j,
                content: "new item"
            }, l = g.randomUUID();
            k[this.itemsData._fieldId] = l;
            var m = this.groupFromTarget(a);
            m && (k.group = m.groupId);
            var n = new p(k, this.conversion, this.options);
            n.id = l, n.data = this._cloneItemData(k), this._addItem(n);
            var o = {
                item: n,
                dragRight: !0,
                initialX: a.center.x,
                data: n.data
            };
            this.touchParams.itemProps = [ o ], a.stopPropagation();
        }, d.prototype._onDrag = function(a) {
            if (this.touchParams.itemProps) {
                a.stopPropagation();
                var b = this, c = this.options.snap || null, d = this.body.dom.root.offsetLeft + this.body.domProps.left.width, e = this.body.util.getScale(), f = this.body.util.getStep(), h = this.touchParams.selectedItem, i = b.options.editable.updateGroup, j = null;
                if (i && h && void 0 != h.data.group) {
                    var k = b.groupFromTarget(a);
                    k && (j = this._getGroupIndex(k.groupId));
                }
                this.touchParams.itemProps.forEach(function(h) {
                    var i = b.body.util.toTime(a.center.x - d), k = b.body.util.toTime(h.initialX - d), l = i - k, m = this._cloneItemData(h.item.data);
                    if (h.item.editable !== !1) {
                        var n = b.options.editable.updateTime || h.item.editable === !0;
                        if (n) if (h.dragLeft) {
                            if (void 0 != m.start) {
                                var o = g.convert(h.data.start, "Date"), p = new Date(o.valueOf() + l);
                                m.start = c ? c(p, e, f) : p;
                            }
                        } else if (h.dragRight) {
                            if (void 0 != m.end) {
                                var q = g.convert(h.data.end, "Date"), r = new Date(q.valueOf() + l);
                                m.end = c ? c(r, e, f) : r;
                            }
                        } else if (void 0 != m.start) {
                            var o = g.convert(h.data.start, "Date").valueOf(), p = new Date(o + l);
                            if (void 0 != m.end) {
                                var q = g.convert(h.data.end, "Date"), s = q.valueOf() - o.valueOf();
                                m.start = c ? c(p, e, f) : p, m.end = new Date(m.start.valueOf() + s);
                            } else m.start = c ? c(p, e, f) : p;
                        }
                        var t = b.options.editable.updateGroup || h.item.editable === !0;
                        if (t && !h.dragLeft && !h.dragRight && null != j && void 0 != m.group) {
                            var u = j - h.groupOffset;
                            u = Math.max(0, u), u = Math.min(b.groupIds.length - 1, u), m.group = b.groupIds[u];
                        }
                        m = this._cloneItemData(m), b.options.onMoving(m, function(a) {
                            a && h.item.setData(this._cloneItemData(a, "Date"));
                        }.bind(this));
                    }
                }.bind(this)), this.stackDirty = !0, this.body.emitter.emit("_change");
            }
        }, d.prototype._moveToGroup = function(a, b) {
            var c = this.groups[b];
            if (c && c.groupId != a.data.group) {
                var d = a.parent;
                d.remove(a), d.order(), c.add(a), c.order(), a.data.group = c.groupId;
            }
        }, d.prototype._onDragEnd = function(a) {
            if (this.touchParams.itemProps) {
                a.stopPropagation();
                var b = this, c = this.itemsData.getDataSet(), d = this.touchParams.itemProps;
                this.touchParams.itemProps = null, d.forEach(function(a) {
                    var d = a.item.id, e = null != b.itemsData.get(d, b.itemOptions);
                    if (e) {
                        var f = this._cloneItemData(a.item.data);
                        b.options.onMove(f, function(e) {
                            e ? (e[c._fieldId] = d, c.update(e)) : (a.item.setData(a.data), b.stackDirty = !0, 
                            b.body.emitter.emit("_change"));
                        });
                    } else b.options.onAdd(a.item.data, function(c) {
                        b._removeItem(a.item), c && b.itemsData.getDataSet().add(c), b.stackDirty = !0, 
                        b.body.emitter.emit("_change");
                    });
                }.bind(this));
            }
        }, d.prototype._onGroupDragStart = function(a) {
            this.options.groupEditable.order && (this.groupTouchParams.group = this.groupFromTarget(a), 
            this.groupTouchParams.group && (a.stopPropagation(), this.groupTouchParams.originalOrder = this.groupsData.getIds({
                order: this.options.groupOrder
            })));
        }, d.prototype._onGroupDrag = function(a) {
            if (this.options.groupEditable.order && this.groupTouchParams.group) {
                a.stopPropagation();
                var b = this.groupFromTarget(a);
                if (b && b.height != this.groupTouchParams.group.height) {
                    var c = b.top < this.groupTouchParams.group.top, d = a.center ? a.center.y : a.clientY, e = g.getAbsoluteTop(b.dom.foreground), f = this.groupTouchParams.group.height;
                    if (c) {
                        if (d > e + f) return;
                    } else {
                        var h = b.height;
                        if (e + h - f > d) return;
                    }
                }
                if (b && b != this.groupTouchParams.group) {
                    var i = this.groupsData, j = i.get(b.groupId), k = i.get(this.groupTouchParams.group.groupId);
                    k && j && (this.options.groupOrderSwap(k, j, this.groupsData), this.groupsData.update(k), 
                    this.groupsData.update(j));
                    var l = this.groupsData.getIds({
                        order: this.options.groupOrder
                    });
                    if (!g.equalArray(l, this.groupTouchParams.originalOrder)) for (var i = this.groupsData, m = this.groupTouchParams.originalOrder, n = this.groupTouchParams.group.groupId, o = Math.min(m.length, l.length), p = 0, q = 0, r = 0; o > p; ) {
                        for (;o > p + q && o > p + r && l[p + q] == m[p + r]; ) p++;
                        if (p + q >= o) break;
                        if (l[p + q] != n) if (m[p + r] != n) {
                            var s = l.indexOf(m[p + r]), t = i.get(l[p + q]), u = i.get(m[p + r]);
                            this.options.groupOrderSwap(t, u, i), i.update(t), i.update(u);
                            var v = l[p + q];
                            l[p + q] = m[p + r], l[s] = v, p++;
                        } else r = 1; else q = 1;
                    }
                }
            }
        }, d.prototype._onGroupDragEnd = function(a) {
            if (this.options.groupEditable.order && this.groupTouchParams.group) {
                a.stopPropagation();
                var b = this, c = b.groupTouchParams.group.groupId, d = b.groupsData.getDataSet(), e = g.extend({}, d.get(c));
                b.options.onMoveGroup(e, function(a) {
                    if (a) a[d._fieldId] = c, d.update(a); else {
                        var e = d.getIds({
                            order: b.options.groupOrder
                        });
                        if (!g.equalArray(e, b.groupTouchParams.originalOrder)) for (var f = b.groupTouchParams.originalOrder, h = Math.min(f.length, e.length), i = 0; h > i; ) {
                            for (;h > i && e[i] == f[i]; ) i++;
                            if (i >= h) break;
                            var j = e.indexOf(f[i]), k = d.get(e[i]), l = d.get(f[i]);
                            b.options.groupOrderSwap(k, l, d), groupsData.update(k), groupsData.update(l);
                            var m = e[i];
                            e[i] = f[i], e[j] = m, i++;
                        }
                    }
                }), b.body.emitter.emit("groupDragged", {
                    groupId: c
                });
            }
        }, d.prototype._onSelectItem = function(a) {
            if (this.options.selectable) {
                var b = a.srcEvent && (a.srcEvent.ctrlKey || a.srcEvent.metaKey), c = a.srcEvent && a.srcEvent.shiftKey;
                if (b || c) return void this._onMultiSelectItem(a);
                var d = this.getSelection(), e = this.itemFromTarget(a), f = e ? [ e.id ] : [];
                this.setSelection(f);
                var g = this.getSelection();
                (g.length > 0 || d.length > 0) && this.body.emitter.emit("select", {
                    items: g,
                    event: a
                });
            }
        }, d.prototype._onAddItem = function(a) {
            if (this.options.selectable && this.options.editable.add) {
                var b = this, c = this.options.snap || null, d = this.itemFromTarget(a);
                if (d) {
                    var e = b.itemsData.get(d.id);
                    this.options.onUpdate(e, function(a) {
                        a && b.itemsData.getDataSet().update(a);
                    });
                } else {
                    var f = g.getAbsoluteLeft(this.dom.frame), h = a.center.x - f, i = this.body.util.toTime(h), j = this.body.util.getScale(), k = this.body.util.getStep(), l = {
                        start: c ? c(i, j, k) : i,
                        content: "new item"
                    };
                    if ("range" === this.options.type) {
                        var m = this.body.util.toTime(h + this.props.width / 5);
                        l.end = c ? c(m, j, k) : m;
                    }
                    l[this.itemsData._fieldId] = g.randomUUID();
                    var n = this.groupFromTarget(a);
                    n && (l.group = n.groupId), l = this._cloneItemData(l), this.options.onAdd(l, function(a) {
                        a && b.itemsData.getDataSet().add(a);
                    });
                }
            }
        }, d.prototype._onMultiSelectItem = function(a) {
            if (this.options.selectable) {
                var b = this.itemFromTarget(a);
                if (b) {
                    var c = this.options.multiselect ? this.getSelection() : [], e = a.srcEvent && a.srcEvent.shiftKey || !1;
                    if (e && this.options.multiselect) {
                        var f = this.itemsData.get(b.id).group, g = void 0;
                        this.options.multiselectPerGroup && c.length > 0 && (g = this.itemsData.get(c[0]).group), 
                        this.options.multiselectPerGroup && void 0 != g && g != f || c.push(b.id);
                        var h = d._getItemRange(this.itemsData.get(c, this.itemOptions));
                        if (!this.options.multiselectPerGroup || g == f) {
                            c = [];
                            for (var i in this.items) if (this.items.hasOwnProperty(i)) {
                                var j = this.items[i], k = j.data.start, l = void 0 !== j.data.end ? j.data.end : k;
                                !(k >= h.min && l <= h.max) || this.options.multiselectPerGroup && g != this.itemsData.get(j.id).group || j instanceof q || c.push(j.id);
                            }
                        }
                    } else {
                        var m = c.indexOf(b.id);
                        -1 == m ? c.push(b.id) : c.splice(m, 1);
                    }
                    this.setSelection(c), this.body.emitter.emit("select", {
                        items: this.getSelection(),
                        event: a
                    });
                }
            }
        }, d._getItemRange = function(a) {
            var b = null, c = null;
            return a.forEach(function(a) {
                (null == c || a.start < c) && (c = a.start), void 0 != a.end ? (null == b || a.end > b) && (b = a.end) : (null == b || a.start > b) && (b = a.start);
            }), {
                min: c,
                max: b
            };
        }, d.prototype.itemFromTarget = function(a) {
            for (var b = a.target; b; ) {
                if (b.hasOwnProperty("timeline-item")) return b["timeline-item"];
                b = b.parentNode;
            }
            return null;
        }, d.prototype.groupFromTarget = function(a) {
            for (var b = a.center ? a.center.y : a.clientY, c = 0; c < this.groupIds.length; c++) {
                var d = this.groupIds[c], e = this.groups[d], f = e.dom.foreground, h = g.getAbsoluteTop(f);
                if (b > h && b < h + f.offsetHeight) return e;
                if ("top" === this.options.orientation.item) {
                    if (c === this.groupIds.length - 1 && b > h) return e;
                } else if (0 === c && b < h + f.offset) return e;
            }
            return null;
        }, d.itemSetFromTarget = function(a) {
            for (var b = a.target; b; ) {
                if (b.hasOwnProperty("timeline-itemset")) return b["timeline-itemset"];
                b = b.parentNode;
            }
            return null;
        }, d.prototype._cloneItemData = function(a, b) {
            var c = g.extend({}, a);
            return b || (b = this.itemsData.getDataSet()._options.type), void 0 != c.start && (c.start = g.convert(c.start, b && b.start || "Date")), 
            void 0 != c.end && (c.end = g.convert(c.end, b && b.end || "Date")), c;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c, f) {
            this.moment = e, this.current = this.moment(), this._start = this.moment(), this._end = this.moment(), 
            this.autoScale = !0, this.scale = "day", this.step = 1, this.setRange(a, b, c), 
            this.switchedDay = !1, this.switchedMonth = !1, this.switchedYear = !1, Array.isArray(f) ? this.hiddenDates = f : void 0 != f ? this.hiddenDates = [ f ] : this.hiddenDates = [], 
            this.format = d.FORMAT;
        }
        var e = c(2), f = c(29), g = c(1);
        d.FORMAT = {
            minorLabels: {
                millisecond: "SSS",
                second: "s",
                minute: "HH:mm",
                hour: "HH:mm",
                weekday: "ddd D",
                day: "D",
                month: "MMM",
                year: "YYYY"
            },
            majorLabels: {
                millisecond: "HH:mm:ss",
                second: "D MMMM HH:mm",
                minute: "ddd D MMMM",
                hour: "ddd D MMMM",
                weekday: "MMMM YYYY",
                day: "MMMM YYYY",
                month: "YYYY",
                year: ""
            }
        }, d.prototype.setMoment = function(a) {
            this.moment = a, this.current = this.moment(this.current), this._start = this.moment(this._start), 
            this._end = this.moment(this._end);
        }, d.prototype.setFormat = function(a) {
            var b = g.deepExtend({}, d.FORMAT);
            this.format = g.deepExtend(b, a);
        }, d.prototype.setRange = function(a, b, c) {
            if (!(a instanceof Date && b instanceof Date)) throw "No legal start or end date in method setRange";
            this._start = void 0 != a ? this.moment(a.valueOf()) : new Date(), this._end = void 0 != b ? this.moment(b.valueOf()) : new Date(), 
            this.autoScale && this.setMinimumStep(c);
        }, d.prototype.start = function() {
            this.current = this._start.clone(), this.roundToMinor();
        }, d.prototype.roundToMinor = function() {
            switch (this.scale) {
              case "year":
                this.current.year(this.step * Math.floor(this.current.year() / this.step)), this.current.month(0);

              case "month":
                this.current.date(1);

              case "day":
              case "weekday":
                this.current.hours(0);

              case "hour":
                this.current.minutes(0);

              case "minute":
                this.current.seconds(0);

              case "second":
                this.current.milliseconds(0);
            }
            if (1 != this.step) switch (this.scale) {
              case "millisecond":
                this.current.subtract(this.current.milliseconds() % this.step, "milliseconds");
                break;

              case "second":
                this.current.subtract(this.current.seconds() % this.step, "seconds");
                break;

              case "minute":
                this.current.subtract(this.current.minutes() % this.step, "minutes");
                break;

              case "hour":
                this.current.subtract(this.current.hours() % this.step, "hours");
                break;

              case "weekday":
              case "day":
                this.current.subtract((this.current.date() - 1) % this.step, "day");
                break;

              case "month":
                this.current.subtract(this.current.month() % this.step, "month");
                break;

              case "year":
                this.current.subtract(this.current.year() % this.step, "year");
            }
        }, d.prototype.hasNext = function() {
            return this.current.valueOf() <= this._end.valueOf();
        }, d.prototype.next = function() {
            var a = this.current.valueOf();
            if (this.current.month() < 6) switch (this.scale) {
              case "millisecond":
                this.current.add(this.step, "millisecond");
                break;

              case "second":
                this.current.add(this.step, "second");
                break;

              case "minute":
                this.current.add(this.step, "minute");
                break;

              case "hour":
                this.current.add(this.step, "hour"), this.current.subtract(this.current.hours() % this.step, "hour");
                break;

              case "weekday":
              case "day":
                this.current.add(this.step, "day");
                break;

              case "month":
                this.current.add(this.step, "month");
                break;

              case "year":
                this.current.add(this.step, "year");
            } else switch (this.scale) {
              case "millisecond":
                this.current.add(this.step, "millisecond");
                break;

              case "second":
                this.current.add(this.step, "second");
                break;

              case "minute":
                this.current.add(this.step, "minute");
                break;

              case "hour":
                this.current.add(this.step, "hour");
                break;

              case "weekday":
              case "day":
                this.current.add(this.step, "day");
                break;

              case "month":
                this.current.add(this.step, "month");
                break;

              case "year":
                this.current.add(this.step, "year");
            }
            if (1 != this.step) switch (this.scale) {
              case "millisecond":
                this.current.milliseconds() < this.step && this.current.milliseconds(0);
                break;

              case "second":
                this.current.seconds() < this.step && this.current.seconds(0);
                break;

              case "minute":
                this.current.minutes() < this.step && this.current.minutes(0);
                break;

              case "hour":
                this.current.hours() < this.step && this.current.hours(0);
                break;

              case "weekday":
              case "day":
                this.current.date() < this.step + 1 && this.current.date(1);
                break;

              case "month":
                this.current.month() < this.step && this.current.month(0);
                break;

              case "year":            }
            this.current.valueOf() == a && (this.current = this._end.clone()), f.stepOverHiddenDates(this.moment, this, a);
        }, d.prototype.getCurrent = function() {
            return this.current;
        }, d.prototype.setScale = function(a) {
            a && "string" == typeof a.scale && (this.scale = a.scale, this.step = a.step > 0 ? a.step : 1, 
            this.autoScale = !1);
        }, d.prototype.setAutoScale = function(a) {
            this.autoScale = a;
        }, d.prototype.setMinimumStep = function(a) {
            if (void 0 != a) {
                var b = 31104e6, c = 2592e6, d = 864e5, e = 36e5, f = 6e4, g = 1e3, h = 1;
                1e3 * b > a && (this.scale = "year", this.step = 1e3), 500 * b > a && (this.scale = "year", 
                this.step = 500), 100 * b > a && (this.scale = "year", this.step = 100), 50 * b > a && (this.scale = "year", 
                this.step = 50), 10 * b > a && (this.scale = "year", this.step = 10), 5 * b > a && (this.scale = "year", 
                this.step = 5), b > a && (this.scale = "year", this.step = 1), 3 * c > a && (this.scale = "month", 
                this.step = 3), c > a && (this.scale = "month", this.step = 1), 5 * d > a && (this.scale = "day", 
                this.step = 5), 2 * d > a && (this.scale = "day", this.step = 2), d > a && (this.scale = "day", 
                this.step = 1), d / 2 > a && (this.scale = "weekday", this.step = 1), 4 * e > a && (this.scale = "hour", 
                this.step = 4), e > a && (this.scale = "hour", this.step = 1), 15 * f > a && (this.scale = "minute", 
                this.step = 15), 10 * f > a && (this.scale = "minute", this.step = 10), 5 * f > a && (this.scale = "minute", 
                this.step = 5), f > a && (this.scale = "minute", this.step = 1), 15 * g > a && (this.scale = "second", 
                this.step = 15), 10 * g > a && (this.scale = "second", this.step = 10), 5 * g > a && (this.scale = "second", 
                this.step = 5), g > a && (this.scale = "second", this.step = 1), 200 * h > a && (this.scale = "millisecond", 
                this.step = 200), 100 * h > a && (this.scale = "millisecond", this.step = 100), 
                50 * h > a && (this.scale = "millisecond", this.step = 50), 10 * h > a && (this.scale = "millisecond", 
                this.step = 10), 5 * h > a && (this.scale = "millisecond", this.step = 5), h > a && (this.scale = "millisecond", 
                this.step = 1);
            }
        }, d.snap = function(a, b, c) {
            var d = e(a);
            if ("year" == b) {
                var f = d.year() + Math.round(d.month() / 12);
                d.year(Math.round(f / c) * c), d.month(0), d.date(0), d.hours(0), d.minutes(0), 
                d.seconds(0), d.milliseconds(0);
            } else if ("month" == b) d.date() > 15 ? (d.date(1), d.add(1, "month")) : d.date(1), 
            d.hours(0), d.minutes(0), d.seconds(0), d.milliseconds(0); else if ("day" == b) {
                switch (c) {
                  case 5:
                  case 2:
                    d.hours(24 * Math.round(d.hours() / 24));
                    break;

                  default:
                    d.hours(12 * Math.round(d.hours() / 12));
                }
                d.minutes(0), d.seconds(0), d.milliseconds(0);
            } else if ("weekday" == b) {
                switch (c) {
                  case 5:
                  case 2:
                    d.hours(12 * Math.round(d.hours() / 12));
                    break;

                  default:
                    d.hours(6 * Math.round(d.hours() / 6));
                }
                d.minutes(0), d.seconds(0), d.milliseconds(0);
            } else if ("hour" == b) {
                switch (c) {
                  case 4:
                    d.minutes(60 * Math.round(d.minutes() / 60));
                    break;

                  default:
                    d.minutes(30 * Math.round(d.minutes() / 30));
                }
                d.seconds(0), d.milliseconds(0);
            } else if ("minute" == b) {
                switch (c) {
                  case 15:
                  case 10:
                    d.minutes(5 * Math.round(d.minutes() / 5)), d.seconds(0);
                    break;

                  case 5:
                    d.seconds(60 * Math.round(d.seconds() / 60));
                    break;

                  default:
                    d.seconds(30 * Math.round(d.seconds() / 30));
                }
                d.milliseconds(0);
            } else if ("second" == b) switch (c) {
              case 15:
              case 10:
                d.seconds(5 * Math.round(d.seconds() / 5)), d.milliseconds(0);
                break;

              case 5:
                d.milliseconds(1e3 * Math.round(d.milliseconds() / 1e3));
                break;

              default:
                d.milliseconds(500 * Math.round(d.milliseconds() / 500));
            } else if ("millisecond" == b) {
                var g = c > 5 ? c / 2 : 1;
                d.milliseconds(Math.round(d.milliseconds() / g) * g);
            }
            return d;
        }, d.prototype.isMajor = function() {
            if (1 == this.switchedYear) switch (this.switchedYear = !1, this.scale) {
              case "year":
              case "month":
              case "weekday":
              case "day":
              case "hour":
              case "minute":
              case "second":
              case "millisecond":
                return !0;

              default:
                return !1;
            } else if (1 == this.switchedMonth) switch (this.switchedMonth = !1, this.scale) {
              case "weekday":
              case "day":
              case "hour":
              case "minute":
              case "second":
              case "millisecond":
                return !0;

              default:
                return !1;
            } else if (1 == this.switchedDay) switch (this.switchedDay = !1, this.scale) {
              case "millisecond":
              case "second":
              case "minute":
              case "hour":
                return !0;

              default:
                return !1;
            }
            var a = this.moment(this.current);
            switch (this.scale) {
              case "millisecond":
                return 0 == a.milliseconds();

              case "second":
                return 0 == a.seconds();

              case "minute":
                return 0 == a.hours() && 0 == a.minutes();

              case "hour":
                return 0 == a.hours();

              case "weekday":
              case "day":
                return 1 == a.date();

              case "month":
                return 0 == a.month();

              case "year":
                return !1;

              default:
                return !1;
            }
        }, d.prototype.getLabelMinor = function(a) {
            void 0 == a && (a = this.current);
            var b = this.format.minorLabels[this.scale];
            return b && b.length > 0 ? this.moment(a).format(b) : "";
        }, d.prototype.getLabelMajor = function(a) {
            void 0 == a && (a = this.current);
            var b = this.format.majorLabels[this.scale];
            return b && b.length > 0 ? this.moment(a).format(b) : "";
        }, d.prototype.getClassName = function() {
            function a(a) {
                return a / i % 2 == 0 ? " vis-even" : " vis-odd";
            }
            function b(a) {
                return a.isSame(new Date(), "day") ? " vis-today" : a.isSame(f().add(1, "day"), "day") ? " vis-tomorrow" : a.isSame(f().add(-1, "day"), "day") ? " vis-yesterday" : "";
            }
            function c(a) {
                return a.isSame(new Date(), "week") ? " vis-current-week" : "";
            }
            function d(a) {
                return a.isSame(new Date(), "month") ? " vis-current-month" : "";
            }
            function e(a) {
                return a.isSame(new Date(), "year") ? " vis-current-year" : "";
            }
            var f = this.moment, g = this.moment(this.current), h = g.locale ? g.locale("en") : g.lang("en"), i = this.step;
            switch (this.scale) {
              case "millisecond":
                return a(h.milliseconds()).trim();

              case "second":
                return a(h.seconds()).trim();

              case "minute":
                return a(h.minutes()).trim();

              case "hour":
                var j = h.hours();
                return 4 == this.step && (j = j + "-h" + (j + 4)), "vis-h" + j + b(h) + a(h.hours());

              case "weekday":
                return "vis-" + h.format("dddd").toLowerCase() + b(h) + c(h) + a(h.date());

              case "day":
                var k = h.date(), l = h.format("MMMM").toLowerCase();
                return "vis-day" + k + " vis-" + l + d(h) + a(k - 1);

              case "month":
                return "vis-" + h.format("MMMM").toLowerCase() + d(h) + a(h.month());

              case "year":
                var m = h.year();
                return "vis-year" + m + e(h) + a(m);

              default:
                return "";
            }
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            this.groupId = a, this.subgroups = {}, this.subgroupIndex = 0, this.subgroupOrderer = b && b.subgroupOrder, 
            this.itemSet = c, this.dom = {}, this.props = {
                label: {
                    width: 0,
                    height: 0
                }
            }, this.className = null, this.items = {}, this.visibleItems = [], this.orderedItems = {
                byStart: [],
                byEnd: []
            }, this.checkRangedItems = !1;
            var d = this;
            this.itemSet.body.emitter.on("checkRangedItems", function() {
                d.checkRangedItems = !0;
            }), this._create(), this.setData(b);
        }
        var e = c(1), f = c(34);
        c(35);
        d.prototype._create = function() {
            var a = document.createElement("div");
            this.itemSet.options.groupEditable.order ? a.className = "vis-label draggable" : a.className = "vis-label", 
            this.dom.label = a;
            var b = document.createElement("div");
            b.className = "vis-inner", a.appendChild(b), this.dom.inner = b;
            var c = document.createElement("div");
            c.className = "vis-group", c["timeline-group"] = this, this.dom.foreground = c, 
            this.dom.background = document.createElement("div"), this.dom.background.className = "vis-group", 
            this.dom.axis = document.createElement("div"), this.dom.axis.className = "vis-group", 
            this.dom.marker = document.createElement("div"), this.dom.marker.style.visibility = "hidden", 
            this.dom.marker.innerHTML = "?", this.dom.background.appendChild(this.dom.marker);
        }, d.prototype.setData = function(a) {
            var b;
            if (b = this.itemSet.options && this.itemSet.options.groupTemplate ? this.itemSet.options.groupTemplate(a) : a && a.content, 
            b instanceof Element) {
                for (this.dom.inner.appendChild(b); this.dom.inner.firstChild; ) this.dom.inner.removeChild(this.dom.inner.firstChild);
                this.dom.inner.appendChild(b);
            } else void 0 !== b && null !== b ? this.dom.inner.innerHTML = b : this.dom.inner.innerHTML = this.groupId || "";
            this.dom.label.title = a && a.title || "", this.dom.inner.firstChild ? e.removeClassName(this.dom.inner, "vis-hidden") : e.addClassName(this.dom.inner, "vis-hidden");
            var c = a && a.className || null;
            c != this.className && (this.className && (e.removeClassName(this.dom.label, this.className), 
            e.removeClassName(this.dom.foreground, this.className), e.removeClassName(this.dom.background, this.className), 
            e.removeClassName(this.dom.axis, this.className)), e.addClassName(this.dom.label, c), 
            e.addClassName(this.dom.foreground, c), e.addClassName(this.dom.background, c), 
            e.addClassName(this.dom.axis, c), this.className = c), this.style && (e.removeCssText(this.dom.label, this.style), 
            this.style = null), a && a.style && (e.addCssText(this.dom.label, a.style), this.style = a.style);
        }, d.prototype.getLabelWidth = function() {
            return this.props.label.width;
        }, d.prototype.redraw = function(a, b, c) {
            var d = !1, g = this.dom.marker.clientHeight;
            if (g != this.lastMarkerHeight && (this.lastMarkerHeight = g, e.forEach(this.items, function(a) {
                a.dirty = !0, a.displayed && a.redraw();
            }), c = !0), this._calculateSubGroupHeights(), "function" == typeof this.itemSet.options.order) {
                if (c) {
                    var h = this, i = !1;
                    e.forEach(this.items, function(a) {
                        a.displayed || (a.redraw(), h.visibleItems.push(a)), a.repositionX(i);
                    });
                    var j = this.orderedItems.byStart.slice().sort(function(a, b) {
                        return h.itemSet.options.order(a.data, b.data);
                    });
                    f.stack(j, b, !0);
                }
                this.visibleItems = this._updateVisibleItems(this.orderedItems, this.visibleItems, a);
            } else this.visibleItems = this._updateVisibleItems(this.orderedItems, this.visibleItems, a), 
            this.itemSet.options.stack ? f.stack(this.visibleItems, b, c) : f.nostack(this.visibleItems, b, this.subgroups);
            var k = this._calculateHeight(b), l = this.dom.foreground;
            this.top = l.offsetTop, this.left = l.offsetLeft, this.width = l.offsetWidth, d = e.updateProperty(this, "height", k) || d, 
            d = e.updateProperty(this.props.label, "width", this.dom.inner.clientWidth) || d, 
            d = e.updateProperty(this.props.label, "height", this.dom.inner.clientHeight) || d, 
            this.dom.background.style.height = k + "px", this.dom.foreground.style.height = k + "px", 
            this.dom.label.style.height = k + "px";
            for (var m = 0, n = this.visibleItems.length; n > m; m++) {
                var o = this.visibleItems[m];
                o.repositionY(b);
            }
            return d;
        }, d.prototype._calculateSubGroupHeights = function() {
            if (Object.keys(this.subgroups).length > 0) {
                var a = this;
                this.resetSubgroups(), e.forEach(this.visibleItems, function(b) {
                    void 0 !== b.data.subgroup && (a.subgroups[b.data.subgroup].height = Math.max(a.subgroups[b.data.subgroup].height, b.height), 
                    a.subgroups[b.data.subgroup].visible = !0);
                });
            }
        }, d.prototype._calculateHeight = function(a) {
            var b, c = this.visibleItems;
            if (c.length > 0) {
                var d = c[0].top, f = c[0].top + c[0].height;
                if (e.forEach(c, function(a) {
                    d = Math.min(d, a.top), f = Math.max(f, a.top + a.height);
                }), d > a.axis) {
                    var g = d - a.axis;
                    f -= g, e.forEach(c, function(a) {
                        a.top -= g;
                    });
                }
                b = f + a.item.vertical / 2;
            } else b = 0;
            return b = Math.max(b, this.props.label.height);
        }, d.prototype.show = function() {
            this.dom.label.parentNode || this.itemSet.dom.labelSet.appendChild(this.dom.label), 
            this.dom.foreground.parentNode || this.itemSet.dom.foreground.appendChild(this.dom.foreground), 
            this.dom.background.parentNode || this.itemSet.dom.background.appendChild(this.dom.background), 
            this.dom.axis.parentNode || this.itemSet.dom.axis.appendChild(this.dom.axis);
        }, d.prototype.hide = function() {
            var a = this.dom.label;
            a.parentNode && a.parentNode.removeChild(a);
            var b = this.dom.foreground;
            b.parentNode && b.parentNode.removeChild(b);
            var c = this.dom.background;
            c.parentNode && c.parentNode.removeChild(c);
            var d = this.dom.axis;
            d.parentNode && d.parentNode.removeChild(d);
        }, d.prototype.add = function(a) {
            if (this.items[a.id] = a, a.setParent(this), void 0 !== a.data.subgroup && (void 0 === this.subgroups[a.data.subgroup] && (this.subgroups[a.data.subgroup] = {
                height: 0,
                visible: !1,
                index: this.subgroupIndex,
                items: []
            }, this.subgroupIndex++), this.subgroups[a.data.subgroup].items.push(a)), this.orderSubgroups(), 
            -1 == this.visibleItems.indexOf(a)) {
                var b = this.itemSet.body.range;
                this._checkIfVisible(a, this.visibleItems, b);
            }
        }, d.prototype.orderSubgroups = function() {
            if (void 0 !== this.subgroupOrderer) {
                var a = [];
                if ("string" == typeof this.subgroupOrderer) {
                    for (var b in this.subgroups) a.push({
                        subgroup: b,
                        sortField: this.subgroups[b].items[0].data[this.subgroupOrderer]
                    });
                    a.sort(function(a, b) {
                        return a.sortField - b.sortField;
                    });
                } else if ("function" == typeof this.subgroupOrderer) {
                    for (var b in this.subgroups) a.push(this.subgroups[b].items[0].data);
                    a.sort(this.subgroupOrderer);
                }
                if (a.length > 0) for (var c = 0; c < a.length; c++) this.subgroups[a[c].subgroup].index = c;
            }
        }, d.prototype.resetSubgroups = function() {
            for (var a in this.subgroups) this.subgroups.hasOwnProperty(a) && (this.subgroups[a].visible = !1);
        }, d.prototype.remove = function(a) {
            delete this.items[a.id], a.setParent(null);
            var b = this.visibleItems.indexOf(a);
            if (-1 != b && this.visibleItems.splice(b, 1), void 0 !== a.data.subgroup) {
                var c = this.subgroups[a.data.subgroup];
                if (c) {
                    var d = c.items.indexOf(a);
                    c.items.splice(d, 1), c.items.length || (delete this.subgroups[a.data.subgroup], 
                    this.subgroupIndex--), this.orderSubgroups();
                }
            }
        }, d.prototype.removeFromDataSet = function(a) {
            this.itemSet.removeItem(a.id);
        }, d.prototype.order = function() {
            for (var a = e.toArray(this.items), b = [], c = [], d = 0; d < a.length; d++) void 0 !== a[d].data.end && c.push(a[d]), 
            b.push(a[d]);
            this.orderedItems = {
                byStart: b,
                byEnd: c
            }, f.orderByStart(this.orderedItems.byStart), f.orderByEnd(this.orderedItems.byEnd);
        }, d.prototype._updateVisibleItems = function(a, b, c) {
            var d, f, g = [], h = {}, i = (c.end - c.start) / 4, j = c.start - i, k = c.end + i, l = function(a) {
                return j > a ? -1 : k >= a ? 0 : 1;
            };
            if (b.length > 0) for (f = 0; f < b.length; f++) this._checkIfVisibleWithReference(b[f], g, h, c);
            var m = e.binarySearchCustom(a.byStart, l, "data", "start");
            if (this._traceVisible(m, a.byStart, g, h, function(a) {
                return a.data.start < j || a.data.start > k;
            }), 1 == this.checkRangedItems) for (this.checkRangedItems = !1, f = 0; f < a.byEnd.length; f++) this._checkIfVisibleWithReference(a.byEnd[f], g, h, c); else {
                var n = e.binarySearchCustom(a.byEnd, l, "data", "end");
                this._traceVisible(n, a.byEnd, g, h, function(a) {
                    return a.data.end < j || a.data.end > k;
                });
            }
            for (f = 0; f < g.length; f++) d = g[f], d.displayed || d.show(), d.repositionX();
            return g;
        }, d.prototype._traceVisible = function(a, b, c, d, e) {
            var f, g;
            if (-1 != a) {
                for (g = a; g >= 0 && (f = b[g], !e(f)); g--) void 0 === d[f.id] && (d[f.id] = !0, 
                c.push(f));
                for (g = a + 1; g < b.length && (f = b[g], !e(f)); g++) void 0 === d[f.id] && (d[f.id] = !0, 
                c.push(f));
            }
        }, d.prototype._checkIfVisible = function(a, b, c) {
            a.isVisible(c) ? (a.displayed || a.show(), a.repositionX(), b.push(a)) : a.displayed && a.hide();
        }, d.prototype._checkIfVisibleWithReference = function(a, b, c, d) {
            a.isVisible(d) ? void 0 === c[a.id] && (c[a.id] = !0, b.push(a)) : a.displayed && a.hide();
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        var c = .001;
        b.orderByStart = function(a) {
            a.sort(function(a, b) {
                return a.data.start - b.data.start;
            });
        }, b.orderByEnd = function(a) {
            a.sort(function(a, b) {
                var c = "end" in a.data ? a.data.end : a.data.start, d = "end" in b.data ? b.data.end : b.data.start;
                return c - d;
            });
        }, b.stack = function(a, c, d) {
            var e, f;
            if (d) for (e = 0, f = a.length; f > e; e++) a[e].top = null;
            for (e = 0, f = a.length; f > e; e++) {
                var g = a[e];
                if (g.stack && null === g.top) {
                    g.top = c.axis;
                    do {
                        for (var h = null, i = 0, j = a.length; j > i; i++) {
                            var k = a[i];
                            if (null !== k.top && k !== g && k.stack && b.collision(g, k, c.item)) {
                                h = k;
                                break;
                            }
                        }
                        null != h && (g.top = h.top + h.height + c.item.vertical);
                    } while (h);
                }
            }
        }, b.nostack = function(a, b, c) {
            var d, e, f;
            for (d = 0, e = a.length; e > d; d++) if (void 0 !== a[d].data.subgroup) {
                f = b.axis;
                for (var g in c) c.hasOwnProperty(g) && 1 == c[g].visible && c[g].index < c[a[d].data.subgroup].index && (f += c[g].height + b.item.vertical);
                a[d].top = f;
            } else a[d].top = b.axis;
        }, b.collision = function(a, b, d) {
            return a.left - d.horizontal + c < b.left + b.width && a.left + a.width + d.horizontal - c > b.left && a.top - d.vertical + c < b.top + b.height && a.top + a.height + d.vertical - c > b.top;
        };
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            if (this.props = {
                content: {
                    width: 0
                }
            }, this.overflow = !1, a) {
                if (void 0 == a.start) throw new Error('Property "start" missing in item ' + a.id);
                if (void 0 == a.end) throw new Error('Property "end" missing in item ' + a.id);
            }
            e.call(this, a, b, c);
        }
        var e = (c(22), c(36));
        d.prototype = new e(null, null, null), d.prototype.baseClassName = "vis-item vis-range", 
        d.prototype.isVisible = function(a) {
            return this.data.start < a.end && this.data.end > a.start;
        }, d.prototype.redraw = function() {
            var a = this.dom;
            if (a || (this.dom = {}, a = this.dom, a.box = document.createElement("div"), a.frame = document.createElement("div"), 
            a.frame.className = "vis-item-overflow", a.box.appendChild(a.frame), a.content = document.createElement("div"), 
            a.content.className = "vis-item-content", a.frame.appendChild(a.content), a.box["timeline-item"] = this, 
            this.dirty = !0), !this.parent) throw new Error("Cannot redraw item: no parent attached");
            if (!a.box.parentNode) {
                var b = this.parent.dom.foreground;
                if (!b) throw new Error("Cannot redraw item: parent has no foreground container element");
                b.appendChild(a.box);
            }
            if (this.displayed = !0, this.dirty) {
                this._updateContents(this.dom.content), this._updateTitle(this.dom.box), this._updateDataAttributes(this.dom.box), 
                this._updateStyle(this.dom.box);
                var c = (this.options.editable.updateTime || this.options.editable.updateGroup || this.editable === !0) && this.editable !== !1, d = (this.data.className ? " " + this.data.className : "") + (this.selected ? " vis-selected" : "") + (c ? " vis-editable" : " vis-readonly");
                a.box.className = this.baseClassName + d, this.overflow = "hidden" !== window.getComputedStyle(a.frame).overflow, 
                this.dom.content.style.maxWidth = "none", this.props.content.width = this.dom.content.offsetWidth, 
                this.height = this.dom.box.offsetHeight, this.dom.content.style.maxWidth = "", this.dirty = !1;
            }
            this._repaintDeleteButton(a.box), this._repaintDragLeft(), this._repaintDragRight();
        }, d.prototype.show = function() {
            this.displayed || this.redraw();
        }, d.prototype.hide = function() {
            if (this.displayed) {
                var a = this.dom.box;
                a.parentNode && a.parentNode.removeChild(a), this.displayed = !1;
            }
        }, d.prototype.repositionX = function(a) {
            var b, c, d = this.parent.width, e = this.conversion.toScreen(this.data.start), f = this.conversion.toScreen(this.data.end);
            void 0 !== a && a !== !0 || (-d > e && (e = -d), f > 2 * d && (f = 2 * d));
            var g = Math.max(f - e, 1);
            switch (this.overflow ? (this.left = e, this.width = g + this.props.content.width, 
            c = this.props.content.width) : (this.left = e, this.width = g, c = Math.min(f - e, this.props.content.width)), 
            this.dom.box.style.left = this.left + "px", this.dom.box.style.width = g + "px", 
            this.options.align) {
              case "left":
                this.dom.content.style.left = "0";
                break;

              case "right":
                this.dom.content.style.left = Math.max(g - c, 0) + "px";
                break;

              case "center":
                this.dom.content.style.left = Math.max((g - c) / 2, 0) + "px";
                break;

              default:
                b = this.overflow ? f > 0 ? Math.max(-e, 0) : -c : 0 > e ? -e : 0, this.dom.content.style.left = b + "px";
            }
        }, d.prototype.repositionY = function() {
            var a = this.options.orientation.item, b = this.dom.box;
            "top" == a ? b.style.top = this.top + "px" : b.style.top = this.parent.height - this.top - this.height + "px";
        }, d.prototype._repaintDragLeft = function() {
            if (this.selected && this.options.editable.updateTime && !this.dom.dragLeft) {
                var a = document.createElement("div");
                a.className = "vis-drag-left", a.dragLeftItem = this, this.dom.box.appendChild(a), 
                this.dom.dragLeft = a;
            } else !this.selected && this.dom.dragLeft && (this.dom.dragLeft.parentNode && this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft), 
            this.dom.dragLeft = null);
        }, d.prototype._repaintDragRight = function() {
            if (this.selected && this.options.editable.updateTime && !this.dom.dragRight) {
                var a = document.createElement("div");
                a.className = "vis-drag-right", a.dragRightItem = this, this.dom.box.appendChild(a), 
                this.dom.dragRight = a;
            } else !this.selected && this.dom.dragRight && (this.dom.dragRight.parentNode && this.dom.dragRight.parentNode.removeChild(this.dom.dragRight), 
            this.dom.dragRight = null);
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            this.id = null, this.parent = null, this.data = a, this.dom = null, this.conversion = b || {}, 
            this.options = c || {}, this.selected = !1, this.displayed = !1, this.dirty = !0, 
            this.top = null, this.left = null, this.width = null, this.height = null, this.editable = null, 
            this.data && this.data.hasOwnProperty("editable") && "boolean" == typeof this.data.editable && (this.editable = a.editable);
        }
        var e = c(22), f = c(1);
        d.prototype.stack = !0, d.prototype.select = function() {
            this.selected = !0, this.dirty = !0, this.displayed && this.redraw();
        }, d.prototype.unselect = function() {
            this.selected = !1, this.dirty = !0, this.displayed && this.redraw();
        }, d.prototype.setData = function(a) {
            var b = void 0 != a.group && this.data.group != a.group;
            b && this.parent.itemSet._moveToGroup(this, a.group), a.hasOwnProperty("editable") && "boolean" == typeof a.editable && (this.editable = a.editable), 
            this.data = a, this.dirty = !0, this.displayed && this.redraw();
        }, d.prototype.setParent = function(a) {
            this.displayed ? (this.hide(), this.parent = a, this.parent && this.show()) : this.parent = a;
        }, d.prototype.isVisible = function(a) {
            return !1;
        }, d.prototype.show = function() {
            return !1;
        }, d.prototype.hide = function() {
            return !1;
        }, d.prototype.redraw = function() {}, d.prototype.repositionX = function() {}, 
        d.prototype.repositionY = function() {}, d.prototype._repaintDeleteButton = function(a) {
            var b = (this.options.editable.remove || this.data.editable === !0) && this.data.editable !== !1;
            if (this.selected && b && !this.dom.deleteButton) {
                var c = this, d = document.createElement("div");
                d.className = "vis-delete", d.title = "Delete this item", new e(d).on("tap", function(a) {
                    a.stopPropagation(), c.parent.removeFromDataSet(c);
                }), a.appendChild(d), this.dom.deleteButton = d;
            } else !this.selected && this.dom.deleteButton && (this.dom.deleteButton.parentNode && this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton), 
            this.dom.deleteButton = null);
        }, d.prototype._updateContents = function(a) {
            var b;
            if (this.options.template) {
                var c = this.parent.itemSet.itemsData.get(this.id);
                b = this.options.template(c);
            } else b = this.data.content;
            var d = this._contentToString(this.content) !== this._contentToString(b);
            if (d) {
                if (b instanceof Element) a.innerHTML = "", a.appendChild(b); else if (void 0 != b) a.innerHTML = b; else if ("background" != this.data.type || void 0 !== this.data.content) throw new Error('Property "content" missing in item ' + this.id);
                this.content = b;
            }
        }, d.prototype._updateTitle = function(a) {
            null != this.data.title ? a.title = this.data.title || "" : a.removeAttribute("vis-title");
        }, d.prototype._updateDataAttributes = function(a) {
            if (this.options.dataAttributes && this.options.dataAttributes.length > 0) {
                var b = [];
                if (Array.isArray(this.options.dataAttributes)) b = this.options.dataAttributes; else {
                    if ("all" != this.options.dataAttributes) return;
                    b = Object.keys(this.data);
                }
                for (var c = 0; c < b.length; c++) {
                    var d = b[c], e = this.data[d];
                    null != e ? a.setAttribute("data-" + d, e) : a.removeAttribute("data-" + d);
                }
            }
        }, d.prototype._updateStyle = function(a) {
            this.style && (f.removeCssText(a, this.style), this.style = null), this.data.style && (f.addCssText(a, this.data.style), 
            this.style = this.data.style);
        }, d.prototype._contentToString = function(a) {
            return "string" == typeof a ? a : a && "outerHTML" in a ? a.outerHTML : a;
        }, d.prototype.getWidthLeft = function() {
            return 0;
        }, d.prototype.getWidthRight = function() {
            return 0;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            e.call(this, a, b, c), this.width = 0, this.height = 0, this.top = 0, this.left = 0;
        }
        var e = (c(1), c(33));
        d.prototype = Object.create(e.prototype), d.prototype.redraw = function(a, b, c) {
            var d = !1;
            this.visibleItems = this._updateVisibleItems(this.orderedItems, this.visibleItems, a), 
            this.width = this.dom.background.offsetWidth, this.dom.background.style.height = "0";
            for (var e = 0, f = this.visibleItems.length; f > e; e++) {
                var g = this.visibleItems[e];
                g.repositionY(b);
            }
            return d;
        }, d.prototype.show = function() {
            this.dom.background.parentNode || this.itemSet.dom.background.appendChild(this.dom.background);
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            if (this.props = {
                dot: {
                    width: 0,
                    height: 0
                },
                line: {
                    width: 0,
                    height: 0
                }
            }, a && void 0 == a.start) throw new Error('Property "start" missing in item ' + a);
            e.call(this, a, b, c);
        }
        var e = c(36);
        c(1);
        d.prototype = new e(null, null, null), d.prototype.isVisible = function(a) {
            var b = (a.end - a.start) / 4;
            return this.data.start > a.start - b && this.data.start < a.end + b;
        }, d.prototype.redraw = function() {
            var a = this.dom;
            if (a || (this.dom = {}, a = this.dom, a.box = document.createElement("DIV"), a.content = document.createElement("DIV"), 
            a.content.className = "vis-item-content", a.box.appendChild(a.content), a.line = document.createElement("DIV"), 
            a.line.className = "vis-line", a.dot = document.createElement("DIV"), a.dot.className = "vis-dot", 
            a.box["timeline-item"] = this, this.dirty = !0), !this.parent) throw new Error("Cannot redraw item: no parent attached");
            if (!a.box.parentNode) {
                var b = this.parent.dom.foreground;
                if (!b) throw new Error("Cannot redraw item: parent has no foreground container element");
                b.appendChild(a.box);
            }
            if (!a.line.parentNode) {
                var c = this.parent.dom.background;
                if (!c) throw new Error("Cannot redraw item: parent has no background container element");
                c.appendChild(a.line);
            }
            if (!a.dot.parentNode) {
                var d = this.parent.dom.axis;
                if (!c) throw new Error("Cannot redraw item: parent has no axis container element");
                d.appendChild(a.dot);
            }
            if (this.displayed = !0, this.dirty) {
                this._updateContents(this.dom.content), this._updateTitle(this.dom.box), this._updateDataAttributes(this.dom.box), 
                this._updateStyle(this.dom.box);
                var e = (this.options.editable.updateTime || this.options.editable.updateGroup || this.editable === !0) && this.editable !== !1, f = (this.data.className ? " " + this.data.className : "") + (this.selected ? " vis-selected" : "") + (e ? " vis-editable" : " vis-readonly");
                a.box.className = "vis-item vis-box" + f, a.line.className = "vis-item vis-line" + f, 
                a.dot.className = "vis-item vis-dot" + f, this.props.dot.height = a.dot.offsetHeight, 
                this.props.dot.width = a.dot.offsetWidth, this.props.line.width = a.line.offsetWidth, 
                this.width = a.box.offsetWidth, this.height = a.box.offsetHeight, this.dirty = !1;
            }
            this._repaintDeleteButton(a.box);
        }, d.prototype.show = function() {
            this.displayed || this.redraw();
        }, d.prototype.hide = function() {
            if (this.displayed) {
                var a = this.dom;
                a.box.parentNode && a.box.parentNode.removeChild(a.box), a.line.parentNode && a.line.parentNode.removeChild(a.line), 
                a.dot.parentNode && a.dot.parentNode.removeChild(a.dot), this.displayed = !1;
            }
        }, d.prototype.repositionX = function() {
            var a = this.conversion.toScreen(this.data.start), b = this.options.align;
            "right" == b ? (this.left = a - this.width, this.dom.box.style.left = this.left + "px", 
            this.dom.line.style.left = a - this.props.line.width + "px", this.dom.dot.style.left = a - this.props.line.width / 2 - this.props.dot.width / 2 + "px") : "left" == b ? (this.left = a, 
            this.dom.box.style.left = this.left + "px", this.dom.line.style.left = a + "px", 
            this.dom.dot.style.left = a + this.props.line.width / 2 - this.props.dot.width / 2 + "px") : (this.left = a - this.width / 2, 
            this.dom.box.style.left = this.left + "px", this.dom.line.style.left = a - this.props.line.width / 2 + "px", 
            this.dom.dot.style.left = a - this.props.dot.width / 2 + "px");
        }, d.prototype.repositionY = function() {
            var a = this.options.orientation.item, b = this.dom.box, c = this.dom.line, d = this.dom.dot;
            if ("top" == a) b.style.top = (this.top || 0) + "px", c.style.top = "0", c.style.height = this.parent.top + this.top + 1 + "px", 
            c.style.bottom = ""; else {
                var e = this.parent.itemSet.props.height, f = e - this.parent.top - this.parent.height + this.top;
                b.style.top = (this.parent.height - this.top - this.height || 0) + "px", c.style.top = e - f + "px", 
                c.style.bottom = "0";
            }
            d.style.top = -this.props.dot.height / 2 + "px";
        }, d.prototype.getWidthLeft = function() {
            return this.width / 2;
        }, d.prototype.getWidthRight = function() {
            return this.width / 2;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            if (this.props = {
                dot: {
                    top: 0,
                    width: 0,
                    height: 0
                },
                content: {
                    height: 0,
                    marginLeft: 0
                }
            }, a && void 0 == a.start) throw new Error('Property "start" missing in item ' + a);
            e.call(this, a, b, c);
        }
        var e = c(36);
        d.prototype = new e(null, null, null), d.prototype.isVisible = function(a) {
            var b = (a.end - a.start) / 4;
            return this.data.start > a.start - b && this.data.start < a.end + b;
        }, d.prototype.redraw = function() {
            var a = this.dom;
            if (a || (this.dom = {}, a = this.dom, a.point = document.createElement("div"), 
            a.content = document.createElement("div"), a.content.className = "vis-item-content", 
            a.point.appendChild(a.content), a.dot = document.createElement("div"), a.point.appendChild(a.dot), 
            a.point["timeline-item"] = this, this.dirty = !0), !this.parent) throw new Error("Cannot redraw item: no parent attached");
            if (!a.point.parentNode) {
                var b = this.parent.dom.foreground;
                if (!b) throw new Error("Cannot redraw item: parent has no foreground container element");
                b.appendChild(a.point);
            }
            if (this.displayed = !0, this.dirty) {
                this._updateContents(this.dom.content), this._updateTitle(this.dom.point), this._updateDataAttributes(this.dom.point), 
                this._updateStyle(this.dom.point);
                var c = (this.options.editable.updateTime || this.options.editable.updateGroup || this.editable === !0) && this.editable !== !1, d = (this.data.className ? " " + this.data.className : "") + (this.selected ? " vis-selected" : "") + (c ? " vis-editable" : " vis-readonly");
                a.point.className = "vis-item vis-point" + d, a.dot.className = "vis-item vis-dot" + d, 
                this.props.dot.width = a.dot.offsetWidth, this.props.dot.height = a.dot.offsetHeight, 
                this.props.content.height = a.content.offsetHeight, a.content.style.marginLeft = 2 * this.props.dot.width + "px", 
                this.width = a.point.offsetWidth, this.height = a.point.offsetHeight, a.dot.style.top = (this.height - this.props.dot.height) / 2 + "px", 
                a.dot.style.left = this.props.dot.width / 2 + "px", this.dirty = !1;
            }
            this._repaintDeleteButton(a.point);
        }, d.prototype.show = function() {
            this.displayed || this.redraw();
        }, d.prototype.hide = function() {
            this.displayed && (this.dom.point.parentNode && this.dom.point.parentNode.removeChild(this.dom.point), 
            this.displayed = !1);
        }, d.prototype.repositionX = function() {
            var a = this.conversion.toScreen(this.data.start);
            this.left = a - this.props.dot.width, this.dom.point.style.left = this.left + "px";
        }, d.prototype.repositionY = function() {
            var a = this.options.orientation.item, b = this.dom.point;
            "top" == a ? b.style.top = this.top + "px" : b.style.top = this.parent.height - this.top - this.height + "px";
        }, d.prototype.getWidthLeft = function() {
            return this.props.dot.width;
        }, d.prototype.getWidthRight = function() {
            return this.width - this.props.dot.width;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c) {
            if (this.props = {
                content: {
                    width: 0
                }
            }, this.overflow = !1, a) {
                if (void 0 == a.start) throw new Error('Property "start" missing in item ' + a.id);
                if (void 0 == a.end) throw new Error('Property "end" missing in item ' + a.id);
            }
            e.call(this, a, b, c);
        }
        var e = (c(22), c(36)), f = c(37), g = c(35);
        d.prototype = new e(null, null, null), d.prototype.baseClassName = "vis-item vis-background", 
        d.prototype.stack = !1, d.prototype.isVisible = function(a) {
            return this.data.start < a.end && this.data.end > a.start;
        }, d.prototype.redraw = function() {
            var a = this.dom;
            if (a || (this.dom = {}, a = this.dom, a.box = document.createElement("div"), a.frame = document.createElement("div"), 
            a.frame.className = "vis-item-overflow", a.box.appendChild(a.frame), a.content = document.createElement("div"), 
            a.content.className = "vis-item-content", a.frame.appendChild(a.content), this.dirty = !0), 
            !this.parent) throw new Error("Cannot redraw item: no parent attached");
            if (!a.box.parentNode) {
                var b = this.parent.dom.background;
                if (!b) throw new Error("Cannot redraw item: parent has no background container element");
                b.appendChild(a.box);
            }
            if (this.displayed = !0, this.dirty) {
                this._updateContents(this.dom.content), this._updateTitle(this.dom.content), this._updateDataAttributes(this.dom.content), 
                this._updateStyle(this.dom.box);
                var c = (this.data.className ? " " + this.data.className : "") + (this.selected ? " vis-selected" : "");
                a.box.className = this.baseClassName + c, this.overflow = "hidden" !== window.getComputedStyle(a.content).overflow, 
                this.props.content.width = this.dom.content.offsetWidth, this.height = 0, this.dirty = !1;
            }
        }, d.prototype.show = g.prototype.show, d.prototype.hide = g.prototype.hide, d.prototype.repositionX = g.prototype.repositionX, 
        d.prototype.repositionY = function(a) {
            var b = "top" === this.options.orientation.item;
            this.dom.content.style.top = b ? "" : "0", this.dom.content.style.bottom = b ? "0" : "";
            var c;
            if (void 0 !== this.data.subgroup) {
                var d = this.data.subgroup, e = this.parent.subgroups, g = e[d].index;
                if (1 == b) {
                    c = this.parent.subgroups[d].height + a.item.vertical, c += 0 == g ? a.axis - .5 * a.item.vertical : 0;
                    var h = this.parent.top;
                    for (var i in e) e.hasOwnProperty(i) && 1 == e[i].visible && e[i].index < g && (h += e[i].height + a.item.vertical);
                    h += 0 != g ? a.axis - .5 * a.item.vertical : 0, this.dom.box.style.top = h + "px", 
                    this.dom.box.style.bottom = "";
                } else {
                    var h = this.parent.top, j = 0;
                    for (var i in e) if (e.hasOwnProperty(i) && 1 == e[i].visible) {
                        var k = e[i].height + a.item.vertical;
                        j += k, e[i].index > g && (h += k);
                    }
                    c = this.parent.subgroups[d].height + a.item.vertical, this.dom.box.style.top = this.parent.height - j + h + "px", 
                    this.dom.box.style.bottom = "";
                }
            } else this.parent instanceof f ? (c = Math.max(this.parent.height, this.parent.itemSet.body.domProps.center.height, this.parent.itemSet.body.domProps.centerContainer.height), 
            this.dom.box.style.top = b ? "0" : "", this.dom.box.style.bottom = b ? "" : "0") : (c = this.parent.height, 
            this.dom.box.style.top = this.parent.top + "px", this.dom.box.style.bottom = "");
            this.dom.box.style.height = c + "px";
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this.dom = {
                foreground: null,
                lines: [],
                majorTexts: [],
                minorTexts: [],
                redundant: {
                    lines: [],
                    majorTexts: [],
                    minorTexts: []
                }
            }, this.props = {
                range: {
                    start: 0,
                    end: 0,
                    minimumStep: 0
                },
                lineTop: 0
            }, this.defaultOptions = {
                orientation: {
                    axis: "bottom"
                },
                showMinorLabels: !0,
                showMajorLabels: !0,
                maxMinorChars: 7,
                format: h.FORMAT,
                moment: j,
                timeAxis: null
            }, this.options = f.extend({}, this.defaultOptions), this.body = a, this._create(), 
            this.setOptions(b);
        }
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(1), g = c(28), h = c(32), i = c(29), j = c(2);
        d.prototype = new g(), d.prototype.setOptions = function(a) {
            a && (f.selectiveExtend([ "showMinorLabels", "showMajorLabels", "maxMinorChars", "hiddenDates", "timeAxis", "moment" ], this.options, a), 
            f.selectiveDeepExtend([ "format" ], this.options, a), "orientation" in a && ("string" == typeof a.orientation ? this.options.orientation.axis = a.orientation : "object" === e(a.orientation) && "axis" in a.orientation && (this.options.orientation.axis = a.orientation.axis)), 
            "locale" in a && ("function" == typeof j.locale ? j.locale(a.locale) : j.lang(a.locale)));
        }, d.prototype._create = function() {
            this.dom.foreground = document.createElement("div"), this.dom.background = document.createElement("div"), 
            this.dom.foreground.className = "vis-time-axis vis-foreground", this.dom.background.className = "vis-time-axis vis-background";
        }, d.prototype.destroy = function() {
            this.dom.foreground.parentNode && this.dom.foreground.parentNode.removeChild(this.dom.foreground), 
            this.dom.background.parentNode && this.dom.background.parentNode.removeChild(this.dom.background), 
            this.body = null;
        }, d.prototype.redraw = function() {
            var a = this.props, b = this.dom.foreground, c = this.dom.background, d = "top" == this.options.orientation.axis ? this.body.dom.top : this.body.dom.bottom, e = b.parentNode !== d;
            this._calculateCharSize();
            var f = this.options.showMinorLabels && "none" !== this.options.orientation.axis, g = this.options.showMajorLabels && "none" !== this.options.orientation.axis;
            a.minorLabelHeight = f ? a.minorCharHeight : 0, a.majorLabelHeight = g ? a.majorCharHeight : 0, 
            a.height = a.minorLabelHeight + a.majorLabelHeight, a.width = b.offsetWidth, a.minorLineHeight = this.body.domProps.root.height - a.majorLabelHeight - ("top" == this.options.orientation.axis ? this.body.domProps.bottom.height : this.body.domProps.top.height), 
            a.minorLineWidth = 1, a.majorLineHeight = a.minorLineHeight + a.majorLabelHeight, 
            a.majorLineWidth = 1;
            var h = b.nextSibling, i = c.nextSibling;
            return b.parentNode && b.parentNode.removeChild(b), c.parentNode && c.parentNode.removeChild(c), 
            b.style.height = this.props.height + "px", this._repaintLabels(), h ? d.insertBefore(b, h) : d.appendChild(b), 
            i ? this.body.dom.backgroundVertical.insertBefore(c, i) : this.body.dom.backgroundVertical.appendChild(c), 
            this._isResized() || e;
        }, d.prototype._repaintLabels = function() {
            var a = this.options.orientation.axis, b = f.convert(this.body.range.start, "Number"), c = f.convert(this.body.range.end, "Number"), d = this.body.util.toTime((this.props.minorCharWidth || 10) * this.options.maxMinorChars).valueOf(), e = d - i.getHiddenDurationBefore(this.options.moment, this.body.hiddenDates, this.body.range, d);
            e -= this.body.util.toTime(0).valueOf();
            var g = new h(new Date(b), new Date(c), e, this.body.hiddenDates);
            g.setMoment(this.options.moment), this.options.format && g.setFormat(this.options.format), 
            this.options.timeAxis && g.setScale(this.options.timeAxis), this.step = g;
            var j = this.dom;
            j.redundant.lines = j.lines, j.redundant.majorTexts = j.majorTexts, j.redundant.minorTexts = j.minorTexts, 
            j.lines = [], j.majorTexts = [], j.minorTexts = [];
            var l, m, n, o, p, q, r, s, t, u, v = 0, w = void 0, x = 0, y = 1e3;
            for (g.start(), m = g.getCurrent(), o = this.body.util.toScreen(m); g.hasNext() && y > x; ) {
                x++, p = g.isMajor(), u = g.getClassName(), t = g.getLabelMinor(), l = m, n = o, 
                g.next(), m = g.getCurrent(), q = g.isMajor(), o = this.body.util.toScreen(m), r = v, 
                v = o - n;
                var z = v >= .4 * r;
                if (this.options.showMinorLabels && z) {
                    var A = this._repaintMinorText(n, t, a, u);
                    A.style.width = v + "px";
                }
                p && this.options.showMajorLabels ? (n > 0 && (void 0 == w && (w = n), A = this._repaintMajorText(n, g.getLabelMajor(), a, u)), 
                s = this._repaintMajorLine(n, v, a, u)) : z ? s = this._repaintMinorLine(n, v, a, u) : s && (s.style.width = parseInt(s.style.width) + v + "px");
            }
            if (x !== y || k || (console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to " + y + " lines."), 
            k = !0), this.options.showMajorLabels) {
                var B = this.body.util.toTime(0), C = g.getLabelMajor(B), D = C.length * (this.props.majorCharWidth || 10) + 10;
                (void 0 == w || w > D) && this._repaintMajorText(0, C, a, u);
            }
            f.forEach(this.dom.redundant, function(a) {
                for (;a.length; ) {
                    var b = a.pop();
                    b && b.parentNode && b.parentNode.removeChild(b);
                }
            });
        }, d.prototype._repaintMinorText = function(a, b, c, d) {
            var e = this.dom.redundant.minorTexts.shift();
            if (!e) {
                var f = document.createTextNode("");
                e = document.createElement("div"), e.appendChild(f), this.dom.foreground.appendChild(e);
            }
            return this.dom.minorTexts.push(e), e.childNodes[0].nodeValue = b, e.style.top = "top" == c ? this.props.majorLabelHeight + "px" : "0", 
            e.style.left = a + "px", e.className = "vis-text vis-minor " + d, e;
        }, d.prototype._repaintMajorText = function(a, b, c, d) {
            var e = this.dom.redundant.majorTexts.shift();
            if (!e) {
                var f = document.createTextNode(b);
                e = document.createElement("div"), e.appendChild(f), this.dom.foreground.appendChild(e);
            }
            return this.dom.majorTexts.push(e), e.childNodes[0].nodeValue = b, e.className = "vis-text vis-major " + d, 
            e.style.top = "top" == c ? "0" : this.props.minorLabelHeight + "px", e.style.left = a + "px", 
            e;
        }, d.prototype._repaintMinorLine = function(a, b, c, d) {
            var e = this.dom.redundant.lines.shift();
            e || (e = document.createElement("div"), this.dom.background.appendChild(e)), this.dom.lines.push(e);
            var f = this.props;
            return "top" == c ? e.style.top = f.majorLabelHeight + "px" : e.style.top = this.body.domProps.top.height + "px", 
            e.style.height = f.minorLineHeight + "px", e.style.left = a - f.minorLineWidth / 2 + "px", 
            e.style.width = b + "px", e.className = "vis-grid vis-vertical vis-minor " + d, 
            e;
        }, d.prototype._repaintMajorLine = function(a, b, c, d) {
            var e = this.dom.redundant.lines.shift();
            e || (e = document.createElement("div"), this.dom.background.appendChild(e)), this.dom.lines.push(e);
            var f = this.props;
            return "top" == c ? e.style.top = "0" : e.style.top = this.body.domProps.top.height + "px", 
            e.style.left = a - f.majorLineWidth / 2 + "px", e.style.height = f.majorLineHeight + "px", 
            e.style.width = b + "px", e.className = "vis-grid vis-vertical vis-major " + d, 
            e;
        }, d.prototype._calculateCharSize = function() {
            this.dom.measureCharMinor || (this.dom.measureCharMinor = document.createElement("DIV"), 
            this.dom.measureCharMinor.className = "vis-text vis-minor vis-measure", this.dom.measureCharMinor.style.position = "absolute", 
            this.dom.measureCharMinor.appendChild(document.createTextNode("0")), this.dom.foreground.appendChild(this.dom.measureCharMinor)), 
            this.props.minorCharHeight = this.dom.measureCharMinor.clientHeight, this.props.minorCharWidth = this.dom.measureCharMinor.clientWidth, 
            this.dom.measureCharMajor || (this.dom.measureCharMajor = document.createElement("DIV"), 
            this.dom.measureCharMajor.className = "vis-text vis-major vis-measure", this.dom.measureCharMajor.style.position = "absolute", 
            this.dom.measureCharMajor.appendChild(document.createTextNode("0")), this.dom.foreground.appendChild(this.dom.measureCharMajor)), 
            this.props.majorCharHeight = this.dom.measureCharMajor.clientHeight, this.props.majorCharWidth = this.dom.measureCharMajor.clientWidth;
        };
        var k = !1;
        a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            this.active = !1, this.dom = {
                container: a
            }, this.dom.overlay = document.createElement("div"), this.dom.overlay.className = "vis-overlay", 
            this.dom.container.appendChild(this.dom.overlay), this.hammer = h(this.dom.overlay), 
            this.hammer.on("tap", this._onTapOverlay.bind(this));
            var b = this, c = [ "tap", "doubletap", "press", "pinch", "pan", "panstart", "panmove", "panend" ];
            c.forEach(function(a) {
                b.hammer.on(a, function(a) {
                    a.stopPropagation();
                });
            }), document && document.body && (this.onClick = function(c) {
                e(c.target, a) || b.deactivate();
            }, document.body.addEventListener("click", this.onClick)), void 0 !== this.keycharm && this.keycharm.destroy(), 
            this.keycharm = f(), this.escListener = this.deactivate.bind(this);
        }
        function e(a, b) {
            for (;a; ) {
                if (a === b) return !0;
                a = a.parentNode;
            }
            return !1;
        }
        var f = c(43), g = c(12), h = c(22), i = c(1);
        g(d.prototype), d.current = null, d.prototype.destroy = function() {
            this.deactivate(), this.dom.overlay.parentNode.removeChild(this.dom.overlay), this.onClick && document.body.removeEventListener("click", this.onClick), 
            this.hammer.destroy(), this.hammer = null;
        }, d.prototype.activate = function() {
            d.current && d.current.deactivate(), d.current = this, this.active = !0, this.dom.overlay.style.display = "none", 
            i.addClassName(this.dom.container, "vis-active"), this.emit("change"), this.emit("activate"), 
            this.keycharm.bind("esc", this.escListener);
        }, d.prototype.deactivate = function() {
            this.active = !1, this.dom.overlay.style.display = "", i.removeClassName(this.dom.container, "vis-active"), 
            this.keycharm.unbind("esc", this.escListener), this.emit("change"), this.emit("deactivate");
        }, d.prototype._onTapOverlay = function(a) {
            this.activate(), a.stopPropagation();
        }, a.exports = d;
    }, function(a, b, c) {
        var d, e, f;
        !function(c, g) {
            e = [], d = g, f = "function" == typeof d ? d.apply(b, e) : d, !(void 0 !== f && (a.exports = f));
        }(this, function() {
            function a(a) {
                var b, c = a && a.preventDefault || !1, d = a && a.container || window, e = {}, f = {
                    keydown: {},
                    keyup: {}
                }, g = {};
                for (b = 97; 122 >= b; b++) g[String.fromCharCode(b)] = {
                    code: 65 + (b - 97),
                    shift: !1
                };
                for (b = 65; 90 >= b; b++) g[String.fromCharCode(b)] = {
                    code: b,
                    shift: !0
                };
                for (b = 0; 9 >= b; b++) g["" + b] = {
                    code: 48 + b,
                    shift: !1
                };
                for (b = 1; 12 >= b; b++) g["F" + b] = {
                    code: 111 + b,
                    shift: !1
                };
                for (b = 0; 9 >= b; b++) g["num" + b] = {
                    code: 96 + b,
                    shift: !1
                };
                g["num*"] = {
                    code: 106,
                    shift: !1
                }, g["num+"] = {
                    code: 107,
                    shift: !1
                }, g["num-"] = {
                    code: 109,
                    shift: !1
                }, g["num/"] = {
                    code: 111,
                    shift: !1
                }, g["num."] = {
                    code: 110,
                    shift: !1
                }, g.left = {
                    code: 37,
                    shift: !1
                }, g.up = {
                    code: 38,
                    shift: !1
                }, g.right = {
                    code: 39,
                    shift: !1
                }, g.down = {
                    code: 40,
                    shift: !1
                }, g.space = {
                    code: 32,
                    shift: !1
                }, g.enter = {
                    code: 13,
                    shift: !1
                }, g.shift = {
                    code: 16,
                    shift: void 0
                }, g.esc = {
                    code: 27,
                    shift: !1
                }, g.backspace = {
                    code: 8,
                    shift: !1
                }, g.tab = {
                    code: 9,
                    shift: !1
                }, g.ctrl = {
                    code: 17,
                    shift: !1
                }, g.alt = {
                    code: 18,
                    shift: !1
                }, g["delete"] = {
                    code: 46,
                    shift: !1
                }, g.pageup = {
                    code: 33,
                    shift: !1
                }, g.pagedown = {
                    code: 34,
                    shift: !1
                }, g["="] = {
                    code: 187,
                    shift: !1
                }, g["-"] = {
                    code: 189,
                    shift: !1
                }, g["]"] = {
                    code: 221,
                    shift: !1
                }, g["["] = {
                    code: 219,
                    shift: !1
                };
                var h = function(a) {
                    j(a, "keydown");
                }, i = function(a) {
                    j(a, "keyup");
                }, j = function(a, b) {
                    if (void 0 !== f[b][a.keyCode]) {
                        for (var d = f[b][a.keyCode], e = 0; e < d.length; e++) void 0 === d[e].shift ? d[e].fn(a) : 1 == d[e].shift && 1 == a.shiftKey ? d[e].fn(a) : 0 == d[e].shift && 0 == a.shiftKey && d[e].fn(a);
                        1 == c && a.preventDefault();
                    }
                };
                return e.bind = function(a, b, c) {
                    if (void 0 === c && (c = "keydown"), void 0 === g[a]) throw new Error("unsupported key: " + a);
                    void 0 === f[c][g[a].code] && (f[c][g[a].code] = []), f[c][g[a].code].push({
                        fn: b,
                        shift: g[a].shift
                    });
                }, e.bindAll = function(a, b) {
                    void 0 === b && (b = "keydown");
                    for (var c in g) g.hasOwnProperty(c) && e.bind(c, a, b);
                }, e.getKey = function(a) {
                    for (var b in g) if (g.hasOwnProperty(b)) {
                        if (1 == a.shiftKey && 1 == g[b].shift && a.keyCode == g[b].code) return b;
                        if (0 == a.shiftKey && 0 == g[b].shift && a.keyCode == g[b].code) return b;
                        if (a.keyCode == g[b].code && "shift" == b) return b;
                    }
                    return "unknown key, currently not supported";
                }, e.unbind = function(a, b, c) {
                    if (void 0 === c && (c = "keydown"), void 0 === g[a]) throw new Error("unsupported key: " + a);
                    if (void 0 !== b) {
                        var d = [], e = f[c][g[a].code];
                        if (void 0 !== e) for (var h = 0; h < e.length; h++) e[h].fn == b && e[h].shift == g[a].shift || d.push(f[c][g[a].code][h]);
                        f[c][g[a].code] = d;
                    } else f[c][g[a].code] = [];
                }, e.reset = function() {
                    f = {
                        keydown: {},
                        keyup: {}
                    };
                }, e.destroy = function() {
                    f = {
                        keydown: {},
                        keyup: {}
                    }, d.removeEventListener("keydown", h, !0), d.removeEventListener("keyup", i, !0);
                }, d.addEventListener("keydown", h, !0), d.addEventListener("keyup", i, !0), e;
            }
            return a;
        });
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this.body = a, this.defaultOptions = {
                moment: h,
                locales: i,
                locale: "en",
                id: void 0,
                title: void 0
            }, this.options = f.extend({}, this.defaultOptions), b && b.time ? this.customTime = b.time : this.customTime = new Date(), 
            this.eventParams = {}, this.setOptions(b), this._create();
        }
        var e = c(22), f = c(1), g = c(28), h = c(2), i = c(45);
        d.prototype = new g(), d.prototype.setOptions = function(a) {
            a && f.selectiveExtend([ "moment", "locale", "locales", "id" ], this.options, a);
        }, d.prototype._create = function() {
            var a = document.createElement("div");
            a["custom-time"] = this, a.className = "vis-custom-time " + (this.options.id || ""), 
            a.style.position = "absolute", a.style.top = "0px", a.style.height = "100%", this.bar = a;
            var b = document.createElement("div");
            b.style.position = "relative", b.style.top = "0px", b.style.left = "-10px", b.style.height = "100%", 
            b.style.width = "20px", a.appendChild(b), this.hammer = new e(b), this.hammer.on("panstart", this._onDragStart.bind(this)), 
            this.hammer.on("panmove", this._onDrag.bind(this)), this.hammer.on("panend", this._onDragEnd.bind(this)), 
            this.hammer.get("pan").set({
                threshold: 5,
                direction: e.DIRECTION_HORIZONTAL
            });
        }, d.prototype.destroy = function() {
            this.hide(), this.hammer.destroy(), this.hammer = null, this.body = null;
        }, d.prototype.redraw = function() {
            var a = this.body.dom.backgroundVertical;
            this.bar.parentNode != a && (this.bar.parentNode && this.bar.parentNode.removeChild(this.bar), 
            a.appendChild(this.bar));
            var b = this.body.util.toScreen(this.customTime), c = this.options.locales[this.options.locale];
            c || (this.warned || (console.log("WARNING: options.locales['" + this.options.locale + "'] not found. See http://visjs.org/docs/timeline.html#Localization"), 
            this.warned = !0), c = this.options.locales.en);
            var d = this.options.title;
            return void 0 === d && (d = c.time + ": " + this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"), 
            d = d.charAt(0).toUpperCase() + d.substring(1)), this.bar.style.left = b + "px", 
            this.bar.title = d, !1;
        }, d.prototype.hide = function() {
            this.bar.parentNode && this.bar.parentNode.removeChild(this.bar);
        }, d.prototype.setCustomTime = function(a) {
            this.customTime = f.convert(a, "Date"), this.redraw();
        }, d.prototype.getCustomTime = function() {
            return new Date(this.customTime.valueOf());
        }, d.prototype.setCustomTitle = function(a) {
            this.options.title = a;
        }, d.prototype._onDragStart = function(a) {
            this.eventParams.dragging = !0, this.eventParams.customTime = this.customTime, a.stopPropagation();
        }, d.prototype._onDrag = function(a) {
            if (this.eventParams.dragging) {
                var b = this.body.util.toScreen(this.eventParams.customTime) + a.deltaX, c = this.body.util.toTime(b);
                this.setCustomTime(c), this.body.emitter.emit("timechange", {
                    id: this.options.id,
                    time: new Date(this.customTime.valueOf())
                }), a.stopPropagation();
            }
        }, d.prototype._onDragEnd = function(a) {
            this.eventParams.dragging && (this.body.emitter.emit("timechanged", {
                id: this.options.id,
                time: new Date(this.customTime.valueOf())
            }), a.stopPropagation());
        }, d.customTimeFromTarget = function(a) {
            for (var b = a.target; b; ) {
                if (b.hasOwnProperty("custom-time")) return b["custom-time"];
                b = b.parentNode;
            }
            return null;
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        b.en = {
            current: "current",
            time: "time"
        }, b.en_EN = b.en, b.en_US = b.en, b.nl = {
            current: "huidige",
            time: "tijd"
        }, b.nl_NL = b.nl, b.nl_BE = b.nl;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this.body = a, this.defaultOptions = {
                showCurrentTime: !0,
                moment: g,
                locales: h,
                locale: "en"
            }, this.options = e.extend({}, this.defaultOptions), this.offset = 0, this._create(), 
            this.setOptions(b);
        }
        var e = c(1), f = c(28), g = c(2), h = c(45);
        d.prototype = new f(), d.prototype._create = function() {
            var a = document.createElement("div");
            a.className = "vis-current-time", a.style.position = "absolute", a.style.top = "0px", 
            a.style.height = "100%", this.bar = a;
        }, d.prototype.destroy = function() {
            this.options.showCurrentTime = !1, this.redraw(), this.body = null;
        }, d.prototype.setOptions = function(a) {
            a && e.selectiveExtend([ "showCurrentTime", "moment", "locale", "locales" ], this.options, a);
        }, d.prototype.redraw = function() {
            if (this.options.showCurrentTime) {
                var a = this.body.dom.backgroundVertical;
                this.bar.parentNode != a && (this.bar.parentNode && this.bar.parentNode.removeChild(this.bar), 
                a.appendChild(this.bar), this.start());
                var b = this.options.moment(new Date().valueOf() + this.offset), c = this.body.util.toScreen(b), d = this.options.locales[this.options.locale];
                d || (this.warned || (console.log("WARNING: options.locales['" + this.options.locale + "'] not found. See http://visjs.org/docs/timeline/#Localization"), 
                this.warned = !0), d = this.options.locales.en);
                var e = d.current + " " + d.time + ": " + b.format("dddd, MMMM Do YYYY, H:mm:ss");
                e = e.charAt(0).toUpperCase() + e.substring(1), this.bar.style.left = c + "px", 
                this.bar.title = e;
            } else this.bar.parentNode && this.bar.parentNode.removeChild(this.bar), this.stop();
            return !1;
        }, d.prototype.start = function() {
            function a() {
                b.stop();
                var c = b.body.range.conversion(b.body.domProps.center.width).scale, d = 1 / c / 10;
                30 > d && (d = 30), d > 1e3 && (d = 1e3), b.redraw(), b.body.emitter.emit("currentTimeTick"), 
                b.currentTimeTimer = setTimeout(a, d);
            }
            var b = this;
            a();
        }, d.prototype.stop = function() {
            void 0 !== this.currentTimeTimer && (clearTimeout(this.currentTimeTimer), delete this.currentTimeTimer);
        }, d.prototype.setCurrentTime = function(a) {
            var b = e.convert(a, "Date").valueOf(), c = new Date().valueOf();
            this.offset = b - c, this.redraw();
        }, d.prototype.getCurrentTime = function() {
            return new Date(new Date().valueOf() + this.offset);
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var c = "string", d = "boolean", e = "number", f = "array", g = "date", h = "object", i = "dom", j = "moment", k = "any", l = {
            configure: {
                enabled: {
                    "boolean": d
                },
                filter: {
                    "boolean": d,
                    "function": "function"
                },
                container: {
                    dom: i
                },
                __type__: {
                    object: h,
                    "boolean": d,
                    "function": "function"
                }
            },
            align: {
                string: c
            },
            autoResize: {
                "boolean": d
            },
            throttleRedraw: {
                number: e
            },
            clickToUse: {
                "boolean": d
            },
            dataAttributes: {
                string: c,
                array: f
            },
            editable: {
                add: {
                    "boolean": d,
                    undefined: "undefined"
                },
                remove: {
                    "boolean": d,
                    undefined: "undefined"
                },
                updateGroup: {
                    "boolean": d,
                    undefined: "undefined"
                },
                updateTime: {
                    "boolean": d,
                    undefined: "undefined"
                },
                __type__: {
                    "boolean": d,
                    object: h
                }
            },
            end: {
                number: e,
                date: g,
                string: c,
                moment: j
            },
            format: {
                minorLabels: {
                    millisecond: {
                        string: c,
                        undefined: "undefined"
                    },
                    second: {
                        string: c,
                        undefined: "undefined"
                    },
                    minute: {
                        string: c,
                        undefined: "undefined"
                    },
                    hour: {
                        string: c,
                        undefined: "undefined"
                    },
                    weekday: {
                        string: c,
                        undefined: "undefined"
                    },
                    day: {
                        string: c,
                        undefined: "undefined"
                    },
                    month: {
                        string: c,
                        undefined: "undefined"
                    },
                    year: {
                        string: c,
                        undefined: "undefined"
                    },
                    __type__: {
                        object: h
                    }
                },
                majorLabels: {
                    millisecond: {
                        string: c,
                        undefined: "undefined"
                    },
                    second: {
                        string: c,
                        undefined: "undefined"
                    },
                    minute: {
                        string: c,
                        undefined: "undefined"
                    },
                    hour: {
                        string: c,
                        undefined: "undefined"
                    },
                    weekday: {
                        string: c,
                        undefined: "undefined"
                    },
                    day: {
                        string: c,
                        undefined: "undefined"
                    },
                    month: {
                        string: c,
                        undefined: "undefined"
                    },
                    year: {
                        string: c,
                        undefined: "undefined"
                    },
                    __type__: {
                        object: h
                    }
                },
                __type__: {
                    object: h
                }
            },
            moment: {
                "function": "function"
            },
            groupOrder: {
                string: c,
                "function": "function"
            },
            groupEditable: {
                add: {
                    "boolean": d,
                    undefined: "undefined"
                },
                remove: {
                    "boolean": d,
                    undefined: "undefined"
                },
                order: {
                    "boolean": d,
                    undefined: "undefined"
                },
                __type__: {
                    "boolean": d,
                    object: h
                }
            },
            groupOrderSwap: {
                "function": "function"
            },
            height: {
                string: c,
                number: e
            },
            hiddenDates: {
                start: {
                    date: g,
                    number: e,
                    string: c,
                    moment: j
                },
                end: {
                    date: g,
                    number: e,
                    string: c,
                    moment: j
                },
                repeat: {
                    string: c
                },
                __type__: {
                    object: h,
                    array: f
                }
            },
            itemsAlwaysDraggable: {
                "boolean": d
            },
            locale: {
                string: c
            },
            locales: {
                __any__: {
                    any: k
                },
                __type__: {
                    object: h
                }
            },
            margin: {
                axis: {
                    number: e
                },
                item: {
                    horizontal: {
                        number: e,
                        undefined: "undefined"
                    },
                    vertical: {
                        number: e,
                        undefined: "undefined"
                    },
                    __type__: {
                        object: h,
                        number: e
                    }
                },
                __type__: {
                    object: h,
                    number: e
                }
            },
            max: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            maxHeight: {
                number: e,
                string: c
            },
            maxMinorChars: {
                number: e
            },
            min: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            minHeight: {
                number: e,
                string: c
            },
            moveable: {
                "boolean": d
            },
            multiselect: {
                "boolean": d
            },
            multiselectPerGroup: {
                "boolean": d
            },
            onAdd: {
                "function": "function"
            },
            onUpdate: {
                "function": "function"
            },
            onMove: {
                "function": "function"
            },
            onMoving: {
                "function": "function"
            },
            onRemove: {
                "function": "function"
            },
            onAddGroup: {
                "function": "function"
            },
            onMoveGroup: {
                "function": "function"
            },
            onRemoveGroup: {
                "function": "function"
            },
            order: {
                "function": "function"
            },
            orientation: {
                axis: {
                    string: c,
                    undefined: "undefined"
                },
                item: {
                    string: c,
                    undefined: "undefined"
                },
                __type__: {
                    string: c,
                    object: h
                }
            },
            selectable: {
                "boolean": d
            },
            showCurrentTime: {
                "boolean": d
            },
            showMajorLabels: {
                "boolean": d
            },
            showMinorLabels: {
                "boolean": d
            },
            stack: {
                "boolean": d
            },
            snap: {
                "function": "function",
                "null": "null"
            },
            start: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            template: {
                "function": "function"
            },
            groupTemplate: {
                "function": "function"
            },
            timeAxis: {
                scale: {
                    string: c,
                    undefined: "undefined"
                },
                step: {
                    number: e,
                    undefined: "undefined"
                },
                __type__: {
                    object: h
                }
            },
            type: {
                string: c
            },
            width: {
                string: c,
                number: e
            },
            zoomable: {
                "boolean": d
            },
            zoomKey: {
                string: [ "ctrlKey", "altKey", "metaKey", "" ]
            },
            zoomMax: {
                number: e
            },
            zoomMin: {
                number: e
            },
            __type__: {
                object: h
            }
        }, m = {
            global: {
                align: [ "center", "left", "right" ],
                autoResize: !0,
                throttleRedraw: [ 10, 0, 1e3, 10 ],
                clickToUse: !1,
                editable: {
                    add: !1,
                    remove: !1,
                    updateGroup: !1,
                    updateTime: !1
                },
                end: "",
                format: {
                    minorLabels: {
                        millisecond: "SSS",
                        second: "s",
                        minute: "HH:mm",
                        hour: "HH:mm",
                        weekday: "ddd D",
                        day: "D",
                        month: "MMM",
                        year: "YYYY"
                    },
                    majorLabels: {
                        millisecond: "HH:mm:ss",
                        second: "D MMMM HH:mm",
                        minute: "ddd D MMMM",
                        hour: "ddd D MMMM",
                        weekday: "MMMM YYYY",
                        day: "MMMM YYYY",
                        month: "YYYY",
                        year: ""
                    }
                },
                groupsDraggable: !1,
                height: "",
                locale: "",
                margin: {
                    axis: [ 20, 0, 100, 1 ],
                    item: {
                        horizontal: [ 10, 0, 100, 1 ],
                        vertical: [ 10, 0, 100, 1 ]
                    }
                },
                max: "",
                maxHeight: "",
                maxMinorChars: [ 7, 0, 20, 1 ],
                min: "",
                minHeight: "",
                moveable: !1,
                multiselect: !1,
                multiselectPerGroup: !1,
                orientation: {
                    axis: [ "both", "bottom", "top" ],
                    item: [ "bottom", "top" ]
                },
                selectable: !0,
                showCurrentTime: !1,
                showMajorLabels: !0,
                showMinorLabels: !0,
                stack: !0,
                start: "",
                type: [ "box", "point", "range", "background" ],
                width: "100%",
                zoomable: !0,
                zoomKey: [ "ctrlKey", "altKey", "metaKey", "" ],
                zoomMax: [ 31536e10, 10, 31536e10, 1 ],
                zoomMin: [ 10, 10, 31536e10, 1 ]
            }
        };
        b.allOptions = l, b.configureOptions = m;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b, c, d) {
            if (!(Array.isArray(c) || c instanceof l || c instanceof m) && c instanceof Object) {
                var e = d;
                d = c, c = e;
            }
            var f = this;
            this.defaultOptions = {
                start: null,
                end: null,
                autoResize: !0,
                orientation: {
                    axis: "bottom",
                    item: "bottom"
                },
                moment: j,
                width: null,
                height: null,
                maxHeight: null,
                minHeight: null
            }, this.options = k.deepExtend({}, this.defaultOptions), this._create(a), this.components = [], 
            this.body = {
                dom: this.dom,
                domProps: this.props,
                emitter: {
                    on: this.on.bind(this),
                    off: this.off.bind(this),
                    emit: this.emit.bind(this)
                },
                hiddenDates: [],
                util: {
                    toScreen: f._toScreen.bind(f),
                    toGlobalScreen: f._toGlobalScreen.bind(f),
                    toTime: f._toTime.bind(f),
                    toGlobalTime: f._toGlobalTime.bind(f)
                }
            }, this.range = new n(this.body), this.components.push(this.range), this.body.range = this.range, 
            this.timeAxis = new p(this.body), this.components.push(this.timeAxis), this.currentTime = new q(this.body), 
            this.components.push(this.currentTime), this.linegraph = new s(this.body), this.components.push(this.linegraph), 
            this.itemsData = null, this.groupsData = null, this.on("tap", function(a) {
                f.emit("click", f.getEventProperties(a));
            }), this.on("doubletap", function(a) {
                f.emit("doubleClick", f.getEventProperties(a));
            }), this.dom.root.oncontextmenu = function(a) {
                f.emit("contextmenu", f.getEventProperties(a));
            }, d && this.setOptions(d), c && this.setGroups(c), b && this.setItems(b), this._redraw();
        }
        var f = c(20), g = d(f), h = c(26), i = d(h), j = (c(12), c(22), c(2)), k = c(1), l = c(8), m = c(10), n = c(27), o = c(30), p = c(41), q = c(46), r = c(44), s = c(49), t = c(26).printStyle, u = c(57).allOptions, v = c(57).configureOptions;
        e.prototype = new o(), e.prototype.setOptions = function(a) {
            var b = i["default"].validate(a, u);
            b === !0 && console.log("%cErrors have been found in the supplied options object.", t), 
            o.prototype.setOptions.call(this, a);
        }, e.prototype.setItems = function(a) {
            var b, c = null == this.itemsData;
            if (b = a ? a instanceof l || a instanceof m ? a : new l(a, {
                type: {
                    start: "Date",
                    end: "Date"
                }
            }) : null, this.itemsData = b, this.linegraph && this.linegraph.setItems(b), c) if (void 0 != this.options.start || void 0 != this.options.end) {
                var d = void 0 != this.options.start ? this.options.start : null, e = void 0 != this.options.end ? this.options.end : null;
                this.setWindow(d, e, {
                    animation: !1
                });
            } else this.fit({
                animation: !1
            });
        }, e.prototype.setGroups = function(a) {
            var b;
            b = a ? a instanceof l || a instanceof m ? a : new l(a) : null, this.groupsData = b, 
            this.linegraph.setGroups(b);
        }, e.prototype.getLegend = function(a, b, c) {
            return void 0 === b && (b = 15), void 0 === c && (c = 15), void 0 !== this.linegraph.groups[a] ? this.linegraph.groups[a].getLegend(b, c) : "cannot find group:'" + a + "'";
        }, e.prototype.isGroupVisible = function(a) {
            return void 0 !== this.linegraph.groups[a] ? this.linegraph.groups[a].visible && (void 0 === this.linegraph.options.groups.visibility[a] || 1 == this.linegraph.options.groups.visibility[a]) : !1;
        }, e.prototype.getDataRange = function() {
            var a = null, b = null;
            for (var c in this.linegraph.groups) if (this.linegraph.groups.hasOwnProperty(c) && 1 == this.linegraph.groups[c].visible) for (var d = 0; d < this.linegraph.groups[c].itemsData.length; d++) {
                var e = this.linegraph.groups[c].itemsData[d], f = k.convert(e.x, "Date").valueOf();
                a = null == a ? f : a > f ? f : a, b = null == b ? f : f > b ? f : b;
            }
            return {
                min: null != a ? new Date(a) : null,
                max: null != b ? new Date(b) : null
            };
        }, e.prototype.getEventProperties = function(a) {
            var b = a.center ? a.center.x : a.clientX, c = a.center ? a.center.y : a.clientY, d = b - k.getAbsoluteLeft(this.dom.centerContainer), e = c - k.getAbsoluteTop(this.dom.centerContainer), f = this._toTime(d), g = r.customTimeFromTarget(a), h = k.getTarget(a), i = null;
            k.hasParent(h, this.timeAxis.dom.foreground) ? i = "axis" : this.timeAxis2 && k.hasParent(h, this.timeAxis2.dom.foreground) ? i = "axis" : k.hasParent(h, this.linegraph.yAxisLeft.dom.frame) ? i = "data-axis" : k.hasParent(h, this.linegraph.yAxisRight.dom.frame) ? i = "data-axis" : k.hasParent(h, this.linegraph.legendLeft.dom.frame) ? i = "legend" : k.hasParent(h, this.linegraph.legendRight.dom.frame) ? i = "legend" : null != g ? i = "custom-time" : k.hasParent(h, this.currentTime.bar) ? i = "current-time" : k.hasParent(h, this.dom.center) && (i = "background");
            var j = [], l = this.linegraph.yAxisLeft, m = this.linegraph.yAxisRight;
            return l.hidden || j.push(l.screenToValue(e)), m.hidden || j.push(m.screenToValue(e)), 
            {
                event: a,
                what: i,
                pageX: a.srcEvent ? a.srcEvent.pageX : a.pageX,
                pageY: a.srcEvent ? a.srcEvent.pageY : a.pageY,
                x: d,
                y: e,
                time: f,
                value: j
            };
        }, e.prototype._createConfigurator = function() {
            return new g["default"](this, this.dom.container, v);
        }, a.exports = e;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            this.id = f.randomUUID(), this.body = a, this.defaultOptions = {
                yAxisOrientation: "left",
                defaultGroup: "default",
                sort: !0,
                sampling: !0,
                stack: !1,
                graphHeight: "400px",
                shaded: {
                    enabled: !1,
                    orientation: "bottom"
                },
                style: "line",
                barChart: {
                    width: 50,
                    sideBySide: !1,
                    align: "center"
                },
                interpolation: {
                    enabled: !0,
                    parametrization: "centripetal",
                    alpha: .5
                },
                drawPoints: {
                    enabled: !0,
                    size: 6,
                    style: "square"
                },
                dataAxis: {},
                legend: {},
                groups: {
                    visibility: {}
                }
            }, this.options = f.extend({}, this.defaultOptions), this.dom = {}, this.props = {}, 
            this.hammer = null, this.groups = {}, this.abortedGraphUpdate = !1, this.updateSVGheight = !1, 
            this.updateSVGheightOnResize = !1, this.forceGraphUpdate = !0;
            var c = this;
            this.itemsData = null, this.groupsData = null, this.itemListeners = {
                add: function(a, b, d) {
                    c._onAdd(b.items);
                },
                update: function(a, b, d) {
                    c._onUpdate(b.items);
                },
                remove: function(a, b, d) {
                    c._onRemove(b.items);
                }
            }, this.groupListeners = {
                add: function(a, b, d) {
                    c._onAddGroups(b.items);
                },
                update: function(a, b, d) {
                    c._onUpdateGroups(b.items);
                },
                remove: function(a, b, d) {
                    c._onRemoveGroups(b.items);
                }
            }, this.items = {}, this.selection = [], this.lastStart = this.body.range.start, 
            this.touchParams = {}, this.svgElements = {}, this.setOptions(b), this.groupsUsingDefaultStyles = [ 0 ], 
            this.body.emitter.on("rangechanged", function() {
                c.lastStart = c.body.range.start, c.svg.style.left = f.option.asSize(-c.props.width), 
                c.forceGraphUpdate = !0, c.redraw.call(c);
            }), this._create(), this.framework = {
                svg: this.svg,
                svgElements: this.svgElements,
                options: this.options,
                groups: this.groups
            };
        }
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(1), g = c(7), h = c(8), i = c(10), j = c(28), k = c(50), l = c(52), m = c(56), n = c(53), o = c(55), p = c(54), q = "__ungrouped__";
        d.prototype = new j(), d.prototype._create = function() {
            var a = document.createElement("div");
            a.className = "vis-line-graph", this.dom.frame = a, this.svg = document.createElementNS("http://www.w3.org/2000/svg", "svg"), 
            this.svg.style.position = "relative", this.svg.style.height = ("" + this.options.graphHeight).replace("px", "") + "px", 
            this.svg.style.display = "block", a.appendChild(this.svg), this.options.dataAxis.orientation = "left", 
            this.yAxisLeft = new k(this.body, this.options.dataAxis, this.svg, this.options.groups), 
            this.options.dataAxis.orientation = "right", this.yAxisRight = new k(this.body, this.options.dataAxis, this.svg, this.options.groups), 
            delete this.options.dataAxis.orientation, this.legendLeft = new m(this.body, this.options.legend, "left", this.options.groups), 
            this.legendRight = new m(this.body, this.options.legend, "right", this.options.groups), 
            this.show();
        }, d.prototype.setOptions = function(a) {
            if (a) {
                var b = [ "sampling", "defaultGroup", "stack", "height", "graphHeight", "yAxisOrientation", "style", "barChart", "dataAxis", "sort", "groups" ];
                void 0 === a.graphHeight && void 0 !== a.height ? (this.updateSVGheight = !0, this.updateSVGheightOnResize = !0) : void 0 !== this.body.domProps.centerContainer.height && void 0 !== a.graphHeight && parseInt((a.graphHeight + "").replace("px", "")) < this.body.domProps.centerContainer.height && (this.updateSVGheight = !0), 
                f.selectiveDeepExtend(b, this.options, a), f.mergeOptions(this.options, a, "interpolation"), 
                f.mergeOptions(this.options, a, "drawPoints"), f.mergeOptions(this.options, a, "shaded"), 
                f.mergeOptions(this.options, a, "legend"), a.interpolation && "object" == e(a.interpolation) && a.interpolation.parametrization && ("uniform" == a.interpolation.parametrization ? this.options.interpolation.alpha = 0 : "chordal" == a.interpolation.parametrization ? this.options.interpolation.alpha = 1 : (this.options.interpolation.parametrization = "centripetal", 
                this.options.interpolation.alpha = .5)), this.yAxisLeft && void 0 !== a.dataAxis && (this.yAxisLeft.setOptions(this.options.dataAxis), 
                this.yAxisRight.setOptions(this.options.dataAxis)), this.legendLeft && void 0 !== a.legend && (this.legendLeft.setOptions(this.options.legend), 
                this.legendRight.setOptions(this.options.legend)), this.groups.hasOwnProperty(q) && this.groups[q].setOptions(a);
            }
            this.dom.frame && (this.forceGraphUpdate = !0, this.body.emitter.emit("_change", {
                queue: !0
            }));
        }, d.prototype.hide = function() {
            this.dom.frame.parentNode && this.dom.frame.parentNode.removeChild(this.dom.frame);
        }, d.prototype.show = function() {
            this.dom.frame.parentNode || this.body.dom.center.appendChild(this.dom.frame);
        }, d.prototype.setItems = function(a) {
            var b, c = this, d = this.itemsData;
            if (a) {
                if (!(a instanceof h || a instanceof i)) throw new TypeError("Data must be an instance of DataSet or DataView");
                this.itemsData = a;
            } else this.itemsData = null;
            if (d && (f.forEach(this.itemListeners, function(a, b) {
                d.off(b, a);
            }), b = d.getIds(), this._onRemove(b)), this.itemsData) {
                var e = this.id;
                f.forEach(this.itemListeners, function(a, b) {
                    c.itemsData.on(b, a, e);
                }), b = this.itemsData.getIds(), this._onAdd(b);
            }
        }, d.prototype.setGroups = function(a) {
            var b, c = this;
            if (this.groupsData) {
                f.forEach(this.groupListeners, function(a, b) {
                    c.groupsData.off(b, a);
                }), b = this.groupsData.getIds(), this.groupsData = null;
                for (var d = 0; d < b.length; d++) this._removeGroup(b[d]);
            }
            if (a) {
                if (!(a instanceof h || a instanceof i)) throw new TypeError("Data must be an instance of DataSet or DataView");
                this.groupsData = a;
            } else this.groupsData = null;
            if (this.groupsData) {
                var e = this.id;
                f.forEach(this.groupListeners, function(a, b) {
                    c.groupsData.on(b, a, e);
                }), b = this.groupsData.getIds(), this._onAddGroups(b);
            }
        }, d.prototype._onUpdate = function(a) {
            this._updateAllGroupData();
        }, d.prototype._onAdd = function(a) {
            this._onUpdate(a);
        }, d.prototype._onRemove = function(a) {
            this._onUpdate(a);
        }, d.prototype._onUpdateGroups = function(a) {
            this._updateAllGroupData();
        }, d.prototype._onAddGroups = function(a) {
            this._onUpdateGroups(a);
        }, d.prototype._onRemoveGroups = function(a) {
            for (var b = 0; b < a.length; b++) this._removeGroup(a[b]);
            this.forceGraphUpdate = !0, this.body.emitter.emit("_change", {
                queue: !0
            });
        }, d.prototype._removeGroup = function(a) {
            this.groups.hasOwnProperty(a) && ("right" == this.groups[a].options.yAxisOrientation ? (this.yAxisRight.removeGroup(a), 
            this.legendRight.removeGroup(a), this.legendRight.redraw()) : (this.yAxisLeft.removeGroup(a), 
            this.legendLeft.removeGroup(a), this.legendLeft.redraw()), delete this.groups[a]);
        }, d.prototype._updateGroup = function(a, b) {
            this.groups.hasOwnProperty(b) ? (this.groups[b].update(a), "right" == this.groups[b].options.yAxisOrientation ? (this.yAxisRight.updateGroup(b, this.groups[b]), 
            this.legendRight.updateGroup(b, this.groups[b]), this.yAxisLeft.removeGroup(b), 
            this.legendLeft.removeGroup(b)) : (this.yAxisLeft.updateGroup(b, this.groups[b]), 
            this.legendLeft.updateGroup(b, this.groups[b]), this.yAxisRight.removeGroup(b), 
            this.legendRight.removeGroup(b))) : (this.groups[b] = new l(a, b, this.options, this.groupsUsingDefaultStyles), 
            "right" == this.groups[b].options.yAxisOrientation ? (this.yAxisRight.addGroup(b, this.groups[b]), 
            this.legendRight.addGroup(b, this.groups[b])) : (this.yAxisLeft.addGroup(b, this.groups[b]), 
            this.legendLeft.addGroup(b, this.groups[b]))), this.legendLeft.redraw(), this.legendRight.redraw();
        }, d.prototype._updateAllGroupData = function() {
            if (null != this.itemsData) {
                for (var a = {}, b = this.itemsData.get(), c = {}, d = 0; d < b.length; d++) {
                    var e = b[d], g = e.group;
                    null !== g && void 0 !== g || (g = q), c.hasOwnProperty(g) ? c[g]++ : c[g] = 1;
                }
                for (var d = 0; d < b.length; d++) {
                    var e = b[d], g = e.group;
                    null !== g && void 0 !== g || (g = q), a.hasOwnProperty(g) || (a[g] = new Array(c[g]));
                    var h = f.bridgeObject(e);
                    h.x = f.convert(e.x, "Date"), h.orginalY = e.y, h.y = Number(e.y);
                    var i = a[g].length - c[g]--;
                    a[g][i] = h;
                }
                for (var g in this.groups) this.groups.hasOwnProperty(g) && (a.hasOwnProperty(g) || (a[g] = new Array(0)));
                for (var g in a) if (a.hasOwnProperty(g)) if (0 == a[g].length) this.groups.hasOwnProperty(g) && this._removeGroup(g); else {
                    var j = void 0;
                    void 0 != this.groupsData && (j = this.groupsData.get(g)), void 0 == j && (j = {
                        id: g,
                        content: this.options.defaultGroup + g
                    }), this._updateGroup(j, g), this.groups[g].setItems(a[g]);
                }
                this.forceGraphUpdate = !0, this.body.emitter.emit("_change", {
                    queue: !0
                });
            }
        }, d.prototype.redraw = function() {
            var a = !1;
            this.props.width = this.dom.frame.offsetWidth, this.props.height = this.body.domProps.centerContainer.height - this.body.domProps.border.top - this.body.domProps.border.bottom, 
            a = this._isResized() || a;
            var b = this.body.range.end - this.body.range.start, c = b != this.lastVisibleInterval;
            if (this.lastVisibleInterval = b, 1 == a && (this.svg.style.width = f.option.asSize(3 * this.props.width), 
            this.svg.style.left = f.option.asSize(-this.props.width), -1 == (this.options.height + "").indexOf("%") && 1 != this.updateSVGheightOnResize || (this.updateSVGheight = !0)), 
            1 == this.updateSVGheight ? (this.options.graphHeight != this.props.height + "px" && (this.options.graphHeight = this.props.height + "px", 
            this.svg.style.height = this.props.height + "px"), this.updateSVGheight = !1) : this.svg.style.height = ("" + this.options.graphHeight).replace("px", "") + "px", 
            1 == a || 1 == c || 1 == this.abortedGraphUpdate || 1 == this.forceGraphUpdate) a = this._updateGraph() || a, 
            this.forceGraphUpdate = !1; else if (0 != this.lastStart) {
                var d = this.body.range.start - this.lastStart, e = this.body.range.end - this.body.range.start;
                if (0 != this.props.width) {
                    var g = this.props.width / e, h = d * g;
                    this.svg.style.left = -this.props.width - h + "px";
                }
            }
            return this.legendLeft.redraw(), this.legendRight.redraw(), a;
        }, d.prototype._getSortedGroupIds = function() {
            var a = [];
            for (var b in this.groups) if (this.groups.hasOwnProperty(b)) {
                var c = this.groups[b];
                1 != c.visible || void 0 !== this.options.groups.visibility[b] && 1 != this.options.groups.visibility[b] || a.push({
                    id: b,
                    zIndex: c.options.zIndex
                });
            }
            f.insertSort(a, function(a, b) {
                var c = a.zIndex, d = b.zIndex;
                return void 0 === c && (c = 0), void 0 === d && (d = 0), c == d ? 0 : d > c ? -1 : 1;
            });
            for (var d = new Array(a.length), e = 0; e < a.length; e++) d[e] = a[e].id;
            return d;
        }, d.prototype._updateGraph = function() {
            if (g.prepareElements(this.svgElements), 0 != this.props.width && null != this.itemsData) {
                var a, b, c = {}, d = !1, e = this.body.util.toGlobalTime(-this.body.domProps.root.width), f = this.body.util.toGlobalTime(2 * this.body.domProps.root.width), h = this._getSortedGroupIds();
                if (h.length > 0) {
                    var i = {};
                    for (this._getRelevantData(h, i, e, f), this._applySampling(h, i), b = 0; b < h.length; b++) this._convertXcoordinates(i[h[b]]);
                    if (this._getYRanges(h, i, c), d = this._updateYAxis(h, c), 1 == d) return g.cleanupElements(this.svgElements), 
                    this.abortedGraphUpdate = !0, !0;
                    this.abortedGraphUpdate = !1;
                    var j = void 0;
                    for (b = 0; b < h.length; b++) a = this.groups[h[b]], this.options.stack === !0 && "line" === this.options.style && (void 0 != a.options.excludeFromStacking && a.options.excludeFromStacking || (void 0 != j && (this._stack(i[a.id], i[j.id]), 
                    1 == a.options.shaded.enabled && "group" !== a.options.shaded.orientation && ("top" == a.options.shaded.orientation && "group" !== j.options.shaded.orientation ? (j.options.shaded.orientation = "group", 
                    j.options.shaded.groupId = a.id) : (a.options.shaded.orientation = "group", a.options.shaded.groupId = j.id))), 
                    j = a)), this._convertYcoordinates(i[h[b]], a);
                    var k = {};
                    for (b = 0; b < h.length; b++) if (a = this.groups[h[b]], "line" === a.options.style && 1 == a.options.shaded.enabled) {
                        var l = i[h[b]];
                        if (null == l || 0 == l.length) continue;
                        if (k.hasOwnProperty(h[b]) || (k[h[b]] = o.calcPath(l, a)), "group" === a.options.shaded.orientation) {
                            var m = a.options.shaded.groupId;
                            if (-1 === h.indexOf(m)) {
                                console.log(a.id + ": Unknown shading group target given:" + m);
                                continue;
                            }
                            k.hasOwnProperty(m) || (k[m] = o.calcPath(i[m], this.groups[m])), o.drawShading(k[h[b]], a, k[m], this.framework);
                        } else o.drawShading(k[h[b]], a, void 0, this.framework);
                    }
                    for (n.draw(h, i, this.framework), b = 0; b < h.length; b++) if (a = this.groups[h[b]], 
                    i[h[b]].length > 0) switch (a.options.style) {
                      case "line":
                        k.hasOwnProperty(h[b]) || (k[h[b]] = o.calcPath(i[h[b]], a)), o.draw(k[h[b]], a, this.framework);

                      case "point":
                      case "points":
                        "point" != a.options.style && "points" != a.options.style && 1 != a.options.drawPoints.enabled || p.draw(i[h[b]], a, this.framework);
                        break;

                      case "bar":                    }
                }
            }
            return g.cleanupElements(this.svgElements), !1;
        }, d.prototype._stack = function(a, b) {
            var c, d, e, f, g;
            c = 0;
            for (var h = 0; h < a.length; h++) {
                f = void 0, g = void 0;
                for (var i = c; i < b.length; i++) {
                    if (b[i].x === a[h].x) {
                        f = b[i], g = b[i], c = i;
                        break;
                    }
                    if (b[i].x > a[h].x) {
                        g = b[i], f = 0 == i ? g : b[i - 1], c = i;
                        break;
                    }
                }
                void 0 === g && (f = b[b.length - 1], g = b[b.length - 1]), d = g.x - f.x, e = g.y - f.y, 
                0 == d ? a[h].y = a[h].orginalY + g.y : a[h].y = a[h].orginalY + e / d * (a[h].x - f.x) + f.y;
            }
        }, d.prototype._getRelevantData = function(a, b, c, d) {
            var e, g, h, i;
            if (a.length > 0) for (g = 0; g < a.length; g++) {
                e = this.groups[a[g]];
                var j = e.getItems();
                if (1 == e.options.sort) {
                    var k = function(a, b) {
                        return a.getTime() == b.getTime() ? 0 : b > a ? -1 : 1;
                    }, l = Math.max(0, f.binarySearchValue(j, c, "x", "before", k)), m = Math.min(j.length, f.binarySearchValue(j, d, "x", "after", k) + 1);
                    0 >= m && (m = j.length);
                    var n = new Array(m - l);
                    for (h = l; m > h; h++) i = e.itemsData[h], n[h - l] = i;
                    b[a[g]] = n;
                } else b[a[g]] = e.itemsData;
            }
        }, d.prototype._applySampling = function(a, b) {
            var c;
            if (a.length > 0) for (var d = 0; d < a.length; d++) if (c = this.groups[a[d]], 
            1 == c.options.sampling) {
                var e = b[a[d]];
                if (e.length > 0) {
                    var f = 1, g = e.length, h = this.body.util.toGlobalScreen(e[e.length - 1].x) - this.body.util.toGlobalScreen(e[0].x), i = g / h;
                    f = Math.min(Math.ceil(.2 * g), Math.max(1, Math.round(i)));
                    for (var j = new Array(g), k = 0; g > k; k += f) {
                        var l = Math.round(k / f);
                        j[l] = e[k];
                    }
                    b[a[d]] = j.splice(0, Math.round(g / f));
                }
            }
        }, d.prototype._getYRanges = function(a, b, c) {
            var d, e, f, g, h = [], i = [];
            if (a.length > 0) {
                for (f = 0; f < a.length; f++) d = b[a[f]], g = this.groups[a[f]].options, d.length > 0 && (e = this.groups[a[f]], 
                g.stack === !0 && "bar" === g.style ? "left" === g.yAxisOrientation ? h = h.concat(e.getItems()) : i = i.concat(e.getItems()) : c[a[f]] = e.getYRange(d, a[f]));
                n.getStackedYRange(h, c, a, "__barStackLeft", "left"), n.getStackedYRange(i, c, a, "__barStackRight", "right");
            }
        }, d.prototype._updateYAxis = function(a, b) {
            var c, d, e = !1, f = !1, g = !1, h = 1e9, i = 1e9, j = -1e9, k = -1e9;
            if (a.length > 0) {
                for (var l = 0; l < a.length; l++) {
                    var m = this.groups[a[l]];
                    m && "right" != m.options.yAxisOrientation ? (f = !0, h = 1e9, j = -1e9) : m && m.options.yAxisOrientation && (g = !0, 
                    i = 1e9, k = -1e9);
                }
                for (var l = 0; l < a.length; l++) b.hasOwnProperty(a[l]) && b[a[l]].ignore !== !0 && (c = b[a[l]].min, 
                d = b[a[l]].max, "right" != b[a[l]].yAxisOrientation ? (f = !0, h = h > c ? c : h, 
                j = d > j ? d : j) : (g = !0, i = i > c ? c : i, k = d > k ? d : k));
                1 == f && this.yAxisLeft.setRange(h, j), 1 == g && this.yAxisRight.setRange(i, k);
            }
            e = this._toggleAxisVisiblity(f, this.yAxisLeft) || e, e = this._toggleAxisVisiblity(g, this.yAxisRight) || e, 
            1 == g && 1 == f ? (this.yAxisLeft.drawIcons = !0, this.yAxisRight.drawIcons = !0) : (this.yAxisLeft.drawIcons = !1, 
            this.yAxisRight.drawIcons = !1), this.yAxisRight.master = !f, this.yAxisRight.masterAxis = this.yAxisLeft, 
            0 == this.yAxisRight.master ? (1 == g ? this.yAxisLeft.lineOffset = this.yAxisRight.width : this.yAxisLeft.lineOffset = 0, 
            e = this.yAxisLeft.redraw() || e, e = this.yAxisRight.redraw() || e) : e = this.yAxisRight.redraw() || e;
            for (var n = [ "__barStackLeft", "__barStackRight", "__lineStackLeft", "__lineStackRight" ], l = 0; l < n.length; l++) -1 != a.indexOf(n[l]) && a.splice(a.indexOf(n[l]), 1);
            return e;
        }, d.prototype._toggleAxisVisiblity = function(a, b) {
            var c = !1;
            return 0 == a ? b.dom.frame.parentNode && 0 == b.hidden && (b.hide(), c = !0) : b.dom.frame.parentNode || 1 != b.hidden || (b.show(), 
            c = !0), c;
        }, d.prototype._convertXcoordinates = function(a) {
            for (var b = this.body.util.toScreen, c = 0; c < a.length; c++) a[c].screen_x = b(a[c].x) + this.props.width, 
            a[c].screen_y = a[c].y;
        }, d.prototype._convertYcoordinates = function(a, b) {
            var c = this.yAxisLeft, d = Number(this.svg.style.height.replace("px", ""));
            "right" == b.options.yAxisOrientation && (c = this.yAxisRight);
            for (var e = 0; e < a.length; e++) a[e].screen_y = Math.round(c.convertValue(a[e].y));
            b.setZeroPosition(Math.min(d, c.convertValue(0)));
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c, d) {
            this.id = e.randomUUID(), this.body = a, this.defaultOptions = {
                orientation: "left",
                showMinorLabels: !0,
                showMajorLabels: !0,
                icons: !1,
                majorLinesOffset: 7,
                minorLinesOffset: 4,
                labelOffsetX: 10,
                labelOffsetY: 2,
                iconWidth: 20,
                width: "40px",
                visible: !0,
                alignZeros: !0,
                left: {
                    range: {
                        min: void 0,
                        max: void 0
                    },
                    format: function(a) {
                        return "" + parseFloat(a.toPrecision(3));
                    },
                    title: {
                        text: void 0,
                        style: void 0
                    }
                },
                right: {
                    range: {
                        min: void 0,
                        max: void 0
                    },
                    format: function(a) {
                        return "" + parseFloat(a.toPrecision(3));
                    },
                    title: {
                        text: void 0,
                        style: void 0
                    }
                }
            }, this.linegraphOptions = d, this.linegraphSVG = c, this.props = {}, this.DOMelements = {
                lines: {},
                labels: {},
                title: {}
            }, this.dom = {}, this.scale = void 0, this.range = {
                start: 0,
                end: 0
            }, this.options = e.extend({}, this.defaultOptions), this.conversionFactor = 1, 
            this.setOptions(b), this.width = Number(("" + this.options.width).replace("px", "")), 
            this.minWidth = this.width, this.height = this.linegraphSVG.getBoundingClientRect().height, 
            this.hidden = !1, this.stepPixels = 25, this.zeroCrossing = -1, this.amountOfSteps = -1, 
            this.lineOffset = 0, this.master = !0, this.masterAxis = null, this.svgElements = {}, 
            this.iconsRemoved = !1, this.groups = {}, this.amountOfGroups = 0, this._create(), 
            this.framework = {
                svg: this.svg,
                svgElements: this.svgElements,
                options: this.options,
                groups: this.groups
            };
            var f = this;
            this.body.emitter.on("verticalDrag", function() {
                f.dom.lineContainer.style.top = f.body.domProps.scrollTop + "px";
            });
        }
        var e = c(1), f = c(7), g = c(28), h = c(51);
        d.prototype = new g(), d.prototype.addGroup = function(a, b) {
            this.groups.hasOwnProperty(a) || (this.groups[a] = b), this.amountOfGroups += 1;
        }, d.prototype.updateGroup = function(a, b) {
            this.groups.hasOwnProperty(a) || (this.amountOfGroups += 1), this.groups[a] = b;
        }, d.prototype.removeGroup = function(a) {
            this.groups.hasOwnProperty(a) && (delete this.groups[a], this.amountOfGroups -= 1);
        }, d.prototype.setOptions = function(a) {
            if (a) {
                var b = !1;
                this.options.orientation != a.orientation && void 0 !== a.orientation && (b = !0);
                var c = [ "orientation", "showMinorLabels", "showMajorLabels", "icons", "majorLinesOffset", "minorLinesOffset", "labelOffsetX", "labelOffsetY", "iconWidth", "width", "visible", "left", "right", "alignZeros" ];
                e.selectiveDeepExtend(c, this.options, a), this.minWidth = Number(("" + this.options.width).replace("px", "")), 
                b === !0 && this.dom.frame && (this.hide(), this.show());
            }
        }, d.prototype._create = function() {
            this.dom.frame = document.createElement("div"), this.dom.frame.style.width = this.options.width, 
            this.dom.frame.style.height = this.height, this.dom.lineContainer = document.createElement("div"), 
            this.dom.lineContainer.style.width = "100%", this.dom.lineContainer.style.height = this.height, 
            this.dom.lineContainer.style.position = "relative", this.svg = document.createElementNS("http://www.w3.org/2000/svg", "svg"), 
            this.svg.style.position = "absolute", this.svg.style.top = "0px", this.svg.style.height = "100%", 
            this.svg.style.width = "100%", this.svg.style.display = "block", this.dom.frame.appendChild(this.svg);
        }, d.prototype._redrawGroupIcons = function() {
            f.prepareElements(this.svgElements);
            var a, b = this.options.iconWidth, c = 15, d = 4, e = d + .5 * c;
            a = "left" === this.options.orientation ? d : this.width - b - d;
            var g = Object.keys(this.groups);
            g.sort(function(a, b) {
                return b > a ? -1 : 1;
            });
            for (var h = 0; h < g.length; h++) {
                var i = g[h];
                this.groups[i].visible !== !0 || void 0 !== this.linegraphOptions.visibility[i] && this.linegraphOptions.visibility[i] !== !0 || (this.groups[i].getLegend(b, c, this.framework, a, e), 
                e += c + d);
            }
            f.cleanupElements(this.svgElements), this.iconsRemoved = !1;
        }, d.prototype._cleanupIcons = function() {
            this.iconsRemoved === !1 && (f.prepareElements(this.svgElements), f.cleanupElements(this.svgElements), 
            this.iconsRemoved = !0);
        }, d.prototype.show = function() {
            this.hidden = !1, this.dom.frame.parentNode || ("left" === this.options.orientation ? this.body.dom.left.appendChild(this.dom.frame) : this.body.dom.right.appendChild(this.dom.frame)), 
            this.dom.lineContainer.parentNode || this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer);
        }, d.prototype.hide = function() {
            this.hidden = !0, this.dom.frame.parentNode && this.dom.frame.parentNode.removeChild(this.dom.frame), 
            this.dom.lineContainer.parentNode && this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer);
        }, d.prototype.setRange = function(a, b) {
            this.range.start = a, this.range.end = b;
        }, d.prototype.redraw = function() {
            var a = !1, b = 0;
            this.dom.lineContainer.style.top = this.body.domProps.scrollTop + "px";
            for (var c in this.groups) this.groups.hasOwnProperty(c) && (this.groups[c].visible !== !0 || void 0 !== this.linegraphOptions.visibility[c] && this.linegraphOptions.visibility[c] !== !0 || b++);
            if (0 === this.amountOfGroups || 0 === b) this.hide(); else {
                this.show(), this.height = Number(this.linegraphSVG.style.height.replace("px", "")), 
                this.dom.lineContainer.style.height = this.height + "px", this.width = this.options.visible === !0 ? Number(("" + this.options.width).replace("px", "")) : 0;
                var d = this.props, e = this.dom.frame;
                e.className = "vis-data-axis", this._calculateCharSize();
                var f = this.options.orientation, g = this.options.showMinorLabels, h = this.options.showMajorLabels;
                d.minorLabelHeight = g ? d.minorCharHeight : 0, d.majorLabelHeight = h ? d.majorCharHeight : 0, 
                d.minorLineWidth = this.body.dom.backgroundHorizontal.offsetWidth - this.lineOffset - this.width + 2 * this.options.minorLinesOffset, 
                d.minorLineHeight = 1, d.majorLineWidth = this.body.dom.backgroundHorizontal.offsetWidth - this.lineOffset - this.width + 2 * this.options.majorLinesOffset, 
                d.majorLineHeight = 1, "left" === f ? (e.style.top = "0", e.style.left = "0", e.style.bottom = "", 
                e.style.width = this.width + "px", e.style.height = this.height + "px", this.props.width = this.body.domProps.left.width, 
                this.props.height = this.body.domProps.left.height) : (e.style.top = "", e.style.bottom = "0", 
                e.style.left = "0", e.style.width = this.width + "px", e.style.height = this.height + "px", 
                this.props.width = this.body.domProps.right.width, this.props.height = this.body.domProps.right.height), 
                a = this._redrawLabels(), a = this._isResized() || a, this.options.icons === !0 ? this._redrawGroupIcons() : this._cleanupIcons(), 
                this._redrawTitle(f);
            }
            return a;
        }, d.prototype._redrawLabels = function() {
            var a = this, b = !1;
            f.prepareElements(this.DOMelements.lines), f.prepareElements(this.DOMelements.labels);
            var c = this.options.orientation, d = void 0 != this.options[c].range ? this.options[c].range : {}, e = !0;
            void 0 != d.max && (this.range.end = d.max, e = !1);
            var g = !0;
            void 0 != d.min && (this.range.start = d.min, g = !1), this.scale = new h(this.range.start, this.range.end, g, e, this.dom.frame.offsetHeight, this.props.majorCharHeight, this.options.alignZeros, this.options[c].format), 
            this.master === !1 && void 0 != this.masterAxis && this.scale.followScale(this.masterAxis.scale), 
            this.maxLabelSize = 0;
            var i = this.scale.getLines();
            i.forEach(function(b) {
                var d = b.y, e = b.major;
                a.options.showMinorLabels && e === !1 && a._redrawLabel(d - 2, b.val, c, "vis-y-axis vis-minor", a.props.minorCharHeight), 
                e && d >= 0 && a._redrawLabel(d - 2, b.val, c, "vis-y-axis vis-major", a.props.majorCharHeight), 
                a.master === !0 && (e ? a._redrawLine(d, c, "vis-grid vis-horizontal vis-major", a.options.majorLinesOffset, a.props.majorLineWidth) : a._redrawLine(d, c, "vis-grid vis-horizontal vis-minor", a.options.minorLinesOffset, a.props.minorLineWidth));
            });
            var j = 0;
            void 0 !== this.options[c].title && void 0 !== this.options[c].title.text && (j = this.props.titleCharHeight);
            var k = this.options.icons === !0 ? Math.max(this.options.iconWidth, j) + this.options.labelOffsetX + 15 : j + this.options.labelOffsetX + 15;
            return this.maxLabelSize > this.width - k && this.options.visible === !0 ? (this.width = this.maxLabelSize + k, 
            this.options.width = this.width + "px", f.cleanupElements(this.DOMelements.lines), 
            f.cleanupElements(this.DOMelements.labels), this.redraw(), b = !0) : this.maxLabelSize < this.width - k && this.options.visible === !0 && this.width > this.minWidth ? (this.width = Math.max(this.minWidth, this.maxLabelSize + k), 
            this.options.width = this.width + "px", f.cleanupElements(this.DOMelements.lines), 
            f.cleanupElements(this.DOMelements.labels), this.redraw(), b = !0) : (f.cleanupElements(this.DOMelements.lines), 
            f.cleanupElements(this.DOMelements.labels), b = !1), b;
        }, d.prototype.convertValue = function(a) {
            return this.scale.convertValue(a);
        }, d.prototype.screenToValue = function(a) {
            return this.scale.screenToValue(a);
        }, d.prototype._redrawLabel = function(a, b, c, d, e) {
            var g = f.getDOMElement("div", this.DOMelements.labels, this.dom.frame);
            g.className = d, g.innerHTML = b, "left" === c ? (g.style.left = "-" + this.options.labelOffsetX + "px", 
            g.style.textAlign = "right") : (g.style.right = "-" + this.options.labelOffsetX + "px", 
            g.style.textAlign = "left"), g.style.top = a - .5 * e + this.options.labelOffsetY + "px", 
            b += "";
            var h = Math.max(this.props.majorCharWidth, this.props.minorCharWidth);
            this.maxLabelSize < b.length * h && (this.maxLabelSize = b.length * h);
        }, d.prototype._redrawLine = function(a, b, c, d, e) {
            if (this.master === !0) {
                var g = f.getDOMElement("div", this.DOMelements.lines, this.dom.lineContainer);
                g.className = c, g.innerHTML = "", "left" === b ? g.style.left = this.width - d + "px" : g.style.right = this.width - d + "px", 
                g.style.width = e + "px", g.style.top = a + "px";
            }
        }, d.prototype._redrawTitle = function(a) {
            if (f.prepareElements(this.DOMelements.title), void 0 !== this.options[a].title && void 0 !== this.options[a].title.text) {
                var b = f.getDOMElement("div", this.DOMelements.title, this.dom.frame);
                b.className = "vis-y-axis vis-title vis-" + a, b.innerHTML = this.options[a].title.text, 
                void 0 !== this.options[a].title.style && e.addCssText(b, this.options[a].title.style), 
                "left" === a ? b.style.left = this.props.titleCharHeight + "px" : b.style.right = this.props.titleCharHeight + "px", 
                b.style.width = this.height + "px";
            }
            f.cleanupElements(this.DOMelements.title);
        }, d.prototype._calculateCharSize = function() {
            if (!("minorCharHeight" in this.props)) {
                var a = document.createTextNode("0"), b = document.createElement("div");
                b.className = "vis-y-axis vis-minor vis-measure", b.appendChild(a), this.dom.frame.appendChild(b), 
                this.props.minorCharHeight = b.clientHeight, this.props.minorCharWidth = b.clientWidth, 
                this.dom.frame.removeChild(b);
            }
            if (!("majorCharHeight" in this.props)) {
                var c = document.createTextNode("0"), d = document.createElement("div");
                d.className = "vis-y-axis vis-major vis-measure", d.appendChild(c), this.dom.frame.appendChild(d), 
                this.props.majorCharHeight = d.clientHeight, this.props.majorCharWidth = d.clientWidth, 
                this.dom.frame.removeChild(d);
            }
            if (!("titleCharHeight" in this.props)) {
                var e = document.createTextNode("0"), f = document.createElement("div");
                f.className = "vis-y-axis vis-title vis-measure", f.appendChild(e), this.dom.frame.appendChild(f), 
                this.props.titleCharHeight = f.clientHeight, this.props.titleCharWidth = f.clientWidth, 
                this.dom.frame.removeChild(f);
            }
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        function c(a, b, c, d, e, f) {
            var g = arguments.length <= 6 || void 0 === arguments[6] ? !1 : arguments[6], h = arguments.length <= 7 || void 0 === arguments[7] ? !1 : arguments[7];
            if (this.majorSteps = [ 1, 2, 5, 10 ], this.minorSteps = [ .25, .5, 1, 2 ], this.customLines = null, 
            this.containerHeight = e, this.majorCharHeight = f, this._start = a, this._end = b, 
            this.scale = 1, this.minorStepIdx = -1, this.magnitudefactor = 1, this.determineScale(), 
            this.zeroAlign = g, this.autoScaleStart = c, this.autoScaleEnd = d, this.formattingFunction = h, 
            c || d) {
                var i = this, j = function(a) {
                    var b = a - a % (i.magnitudefactor * i.minorSteps[i.minorStepIdx]);
                    return a % (i.magnitudefactor * i.minorSteps[i.minorStepIdx]) > .5 * (i.magnitudefactor * i.minorSteps[i.minorStepIdx]) ? b + i.magnitudefactor * i.minorSteps[i.minorStepIdx] : b;
                };
                c && (this._start -= 2 * this.magnitudefactor * this.minorSteps[this.minorStepIdx], 
                this._start = j(this._start)), d && (this._end += this.magnitudefactor * this.minorSteps[this.minorStepIdx], 
                this._end = j(this._end)), this.determineScale();
            }
        }
        c.prototype.setCharHeight = function(a) {
            this.majorCharHeight = a;
        }, c.prototype.setHeight = function(a) {
            this.containerHeight = a;
        }, c.prototype.determineScale = function() {
            var a = this._end - this._start;
            this.scale = this.containerHeight / a;
            var b = this.majorCharHeight / this.scale, c = a > 0 ? Math.round(Math.log(a) / Math.LN10) : 0;
            this.minorStepIdx = -1, this.magnitudefactor = Math.pow(10, c);
            var d = 0;
            0 > c && (d = c);
            for (var e = !1, f = d; Math.abs(f) <= Math.abs(c); f++) {
                this.magnitudefactor = Math.pow(10, f);
                for (var g = 0; g < this.minorSteps.length; g++) {
                    var h = this.magnitudefactor * this.minorSteps[g];
                    if (h >= b) {
                        e = !0, this.minorStepIdx = g;
                        break;
                    }
                }
                if (e === !0) break;
            }
        }, c.prototype.is_major = function(a) {
            return a % (this.magnitudefactor * this.majorSteps[this.minorStepIdx]) === 0;
        }, c.prototype.getStep = function() {
            return this.magnitudefactor * this.minorSteps[this.minorStepIdx];
        }, c.prototype.getFirstMajor = function() {
            var a = this.magnitudefactor * this.majorSteps[this.minorStepIdx];
            return this.convertValue(this._start + (a - this._start % a) % a);
        }, c.prototype.formatValue = function(a) {
            var b = a.toPrecision(5);
            return "function" == typeof this.formattingFunction && (b = this.formattingFunction(a)), 
            "number" == typeof b ? "" + b : "string" == typeof b ? b : a.toPrecision(5);
        }, c.prototype.getLines = function() {
            for (var a = [], b = this.getStep(), c = (b - this._start % b) % b, d = this._start + c; this._end - d > 1e-5; d += b) d != this._start && a.push({
                major: this.is_major(d),
                y: this.convertValue(d),
                val: this.formatValue(d)
            });
            return a;
        }, c.prototype.followScale = function(a) {
            var b = this.minorStepIdx, c = this._start, d = this._end, e = this, f = function() {
                e.magnitudefactor *= 2;
            }, g = function() {
                e.magnitudefactor /= 2;
            };
            a.minorStepIdx <= 1 && this.minorStepIdx <= 1 || a.minorStepIdx > 1 && this.minorStepIdx > 1 || (a.minorStepIdx < this.minorStepIdx ? (this.minorStepIdx = 1, 
            2 == b ? f() : (f(), f())) : (this.minorStepIdx = 2, 1 == b ? g() : (g(), g())));
            for (var h = (a.getLines(), a.convertValue(0)), i = a.getStep() * a.scale, j = !1, k = 0; !j && k++ < 5; ) {
                this.scale = i / (this.minorSteps[this.minorStepIdx] * this.magnitudefactor);
                var l = this.containerHeight / this.scale;
                this._start = c, this._end = this._start + l;
                var m = this._end * this.scale, n = this.magnitudefactor * this.majorSteps[this.minorStepIdx], o = this.getFirstMajor() - a.getFirstMajor();
                if (this.zeroAlign) {
                    var p = h - m;
                    this._end += p / this.scale, this._start = this._end - l;
                } else this.autoScaleStart ? (this._start -= o / this.scale, this._end = this._start + l) : (this._start += n - o / this.scale, 
                this._end = this._start + l);
                if (!this.autoScaleEnd && this._end > d + 1e-5) g(), j = !1; else {
                    if (!this.autoScaleStart && this._start < c - 1e-5) {
                        if (!(this.zeroAlign && c >= 0)) {
                            g(), j = !1;
                            continue;
                        }
                        console.warn("Can't adhere to given 'min' range, due to zeroalign");
                    }
                    this.autoScaleStart && this.autoScaleEnd && d - c > l ? (f(), j = !1) : j = !0;
                }
            }
        }, c.prototype.convertValue = function(a) {
            return this.containerHeight - (a - this._start) * this.scale;
        }, c.prototype.screenToValue = function(a) {
            return (this.containerHeight - a) / this.scale + this._start;
        }, a.exports = c;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c, d) {
            this.id = b;
            var e = [ "sampling", "style", "sort", "yAxisOrientation", "barChart", "drawPoints", "shaded", "interpolation", "zIndex", "excludeFromStacking", "excludeFromLegend" ];
            this.options = f.selectiveBridgeObject(e, c), this.usingDefaultStyle = void 0 === a.className, 
            this.groupsUsingDefaultStyles = d, this.zeroPosition = 0, this.update(a), 1 == this.usingDefaultStyle && (this.groupsUsingDefaultStyles[0] += 1), 
            this.itemsData = [], this.visible = void 0 === a.visible ? !0 : a.visible;
        }
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, f = c(1), g = (c(7), c(53)), h = c(55), i = c(54);
        d.prototype.setItems = function(a) {
            null != a ? (this.itemsData = a, 1 == this.options.sort && f.insertSort(this.itemsData, function(a, b) {
                return a.x > b.x ? 1 : -1;
            })) : this.itemsData = [];
        }, d.prototype.getItems = function() {
            return this.itemsData;
        }, d.prototype.setZeroPosition = function(a) {
            this.zeroPosition = a;
        }, d.prototype.setOptions = function(a) {
            if (void 0 !== a) {
                var b = [ "sampling", "style", "sort", "yAxisOrientation", "barChart", "zIndex", "excludeFromStacking", "excludeFromLegend" ];
                f.selectiveDeepExtend(b, this.options, a), "function" == typeof a.drawPoints && (a.drawPoints = {
                    onRender: a.drawPoints
                }), f.mergeOptions(this.options, a, "interpolation"), f.mergeOptions(this.options, a, "drawPoints"), 
                f.mergeOptions(this.options, a, "shaded"), a.interpolation && "object" == e(a.interpolation) && a.interpolation.parametrization && ("uniform" == a.interpolation.parametrization ? this.options.interpolation.alpha = 0 : "chordal" == a.interpolation.parametrization ? this.options.interpolation.alpha = 1 : (this.options.interpolation.parametrization = "centripetal", 
                this.options.interpolation.alpha = .5));
            }
        }, d.prototype.update = function(a) {
            this.group = a, this.content = a.content || "graph", this.className = a.className || this.className || "vis-graph-group" + this.groupsUsingDefaultStyles[0] % 10, 
            this.visible = void 0 === a.visible ? !0 : a.visible, this.style = a.style, this.setOptions(a.options);
        }, d.prototype.getLegend = function(a, b, c, d, e) {
            if (void 0 == c || null == c) {
                var f = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                c = {
                    svg: f,
                    svgElements: {},
                    options: this.options,
                    groups: [ this ]
                };
            }
            switch (void 0 != d && null != d || (d = 0), void 0 != e && null != e || (e = .5 * b), 
            this.options.style) {
              case "line":
                h.drawIcon(this, d, e, a, b, c);
                break;

              case "points":
              case "point":
                i.drawIcon(this, d, e, a, b, c);
                break;

              case "bar":
                g.drawIcon(this, d, e, a, b, c);
            }
            return {
                icon: c.svg,
                label: this.content,
                orientation: this.options.yAxisOrientation
            };
        }, d.prototype.getYRange = function(a) {
            for (var b = a[0].y, c = a[0].y, d = 0; d < a.length; d++) b = b > a[d].y ? a[d].y : b, 
            c = c < a[d].y ? a[d].y : c;
            return {
                min: b,
                max: c,
                yAxisOrientation: this.options.yAxisOrientation
            };
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {}
        var e = c(7), f = c(54);
        d.drawIcon = function(a, b, c, d, f, g) {
            var h = .5 * f, i = e.getSVGElement("rect", g.svgElements, g.svg);
            i.setAttributeNS(null, "x", b), i.setAttributeNS(null, "y", c - h), i.setAttributeNS(null, "width", d), 
            i.setAttributeNS(null, "height", 2 * h), i.setAttributeNS(null, "class", "vis-outline");
            var j = Math.round(.3 * d), k = a.options.barChart.width, l = k / j, m = Math.round(.4 * f), n = Math.round(.75 * f), o = Math.round((d - 2 * j) / 3);
            if (e.drawBar(b + .5 * j + o, c + h - m - 1, j, m, a.className + " vis-bar", g.svgElements, g.svg, a.style), 
            e.drawBar(b + 1.5 * j + o + 2, c + h - n - 1, j, n, a.className + " vis-bar", g.svgElements, g.svg, a.style), 
            1 == a.options.drawPoints.enabled) {
                var p = {
                    style: a.options.drawPoints.style,
                    styles: a.options.drawPoints.styles,
                    size: a.options.drawPoints.size / l,
                    className: a.className
                };
                e.drawPoint(b + .5 * j + o, c + h - m - 1, p, g.svgElements, g.svg), e.drawPoint(b + 1.5 * j + o + 2, c + h - n - 1, p, g.svgElements, g.svg);
            }
        }, d.draw = function(a, b, c) {
            var g, h, i, j, k, l, m = [], n = {}, o = 0;
            for (k = 0; k < a.length; k++) if (j = c.groups[a[k]], "bar" === j.options.style && j.visible === !0 && (void 0 === c.options.groups.visibility[a[k]] || c.options.groups.visibility[a[k]] === !0)) for (l = 0; l < b[a[k]].length; l++) m.push({
                screen_x: b[a[k]][l].screen_x,
                screen_y: b[a[k]][l].screen_y,
                x: b[a[k]][l].x,
                y: b[a[k]][l].y,
                groupId: a[k],
                label: b[a[k]][l].label
            }), o += 1;
            if (0 !== o) for (m.sort(function(a, b) {
                return a.screen_x === b.screen_x ? a.groupId < b.groupId ? -1 : 1 : a.screen_x - b.screen_x;
            }), d._getDataIntersections(n, m), k = 0; k < m.length; k++) {
                j = c.groups[m[k].groupId];
                var p = void 0 != j.options.barChart.minWidth ? j.options.barChart.minWidth : .1 * j.options.barChart.width;
                h = m[k].screen_x;
                var q = 0;
                if (void 0 === n[h]) k + 1 < m.length && (g = Math.abs(m[k + 1].screen_x - h)), 
                i = d._getSafeDrawData(g, j, p); else {
                    var r = k + (n[h].amount - n[h].resolved);
                    k - (n[h].resolved + 1);
                    r < m.length && (g = Math.abs(m[r].screen_x - h)), i = d._getSafeDrawData(g, j, p), 
                    n[h].resolved += 1, j.options.stack === !0 && j.options.excludeFromStacking !== !0 ? m[k].screen_y < j.zeroPosition ? (q = n[h].accumulatedNegative, 
                    n[h].accumulatedNegative += j.zeroPosition - m[k].screen_y) : (q = n[h].accumulatedPositive, 
                    n[h].accumulatedPositive += j.zeroPosition - m[k].screen_y) : j.options.barChart.sideBySide === !0 && (i.width = i.width / n[h].amount, 
                    i.offset += n[h].resolved * i.width - .5 * i.width * (n[h].amount + 1));
                }
                if (e.drawBar(m[k].screen_x + i.offset, m[k].screen_y - q, i.width, j.zeroPosition - m[k].screen_y, j.className + " vis-bar", c.svgElements, c.svg, j.style), 
                j.options.drawPoints.enabled === !0) {
                    var s = {
                        screen_x: m[k].screen_x,
                        screen_y: m[k].screen_y - q,
                        x: m[k].x,
                        y: m[k].y,
                        groupId: m[k].groupId,
                        label: m[k].label
                    };
                    f.draw([ s ], j, c, i.offset);
                }
            }
        }, d._getDataIntersections = function(a, b) {
            for (var c, d = 0; d < b.length; d++) d + 1 < b.length && (c = Math.abs(b[d + 1].screen_x - b[d].screen_x)), 
            d > 0 && (c = Math.min(c, Math.abs(b[d - 1].screen_x - b[d].screen_x))), 0 === c && (void 0 === a[b[d].screen_x] && (a[b[d].screen_x] = {
                amount: 0,
                resolved: 0,
                accumulatedPositive: 0,
                accumulatedNegative: 0
            }), a[b[d].screen_x].amount += 1);
        }, d._getSafeDrawData = function(a, b, c) {
            var d, e;
            return a < b.options.barChart.width && a > 0 ? (d = c > a ? c : a, e = 0, "left" === b.options.barChart.align ? e -= .5 * a : "right" === b.options.barChart.align && (e += .5 * a)) : (d = b.options.barChart.width, 
            e = 0, "left" === b.options.barChart.align ? e -= .5 * b.options.barChart.width : "right" === b.options.barChart.align && (e += .5 * b.options.barChart.width)), 
            {
                width: d,
                offset: e
            };
        }, d.getStackedYRange = function(a, b, c, e, f) {
            if (a.length > 0) {
                a.sort(function(a, b) {
                    return a.screen_x === b.screen_x ? a.groupId < b.groupId ? -1 : 1 : a.screen_x - b.screen_x;
                });
                var g = {};
                d._getDataIntersections(g, a), b[e] = d._getStackedYRange(g, a), b[e].yAxisOrientation = f, 
                c.push(e);
            }
        }, d._getStackedYRange = function(a, b) {
            for (var c, d = b[0].screen_y, e = b[0].screen_y, f = 0; f < b.length; f++) c = b[f].screen_x, 
            void 0 === a[c] ? (d = d > b[f].screen_y ? b[f].screen_y : d, e = e < b[f].screen_y ? b[f].screen_y : e) : b[f].screen_y < 0 ? a[c].accumulatedNegative += b[f].screen_y : a[c].accumulatedPositive += b[f].screen_y;
            for (var g in a) a.hasOwnProperty(g) && (d = d > a[g].accumulatedNegative ? a[g].accumulatedNegative : d, 
            d = d > a[g].accumulatedPositive ? a[g].accumulatedPositive : d, e = e < a[g].accumulatedNegative ? a[g].accumulatedNegative : e, 
            e = e < a[g].accumulatedPositive ? a[g].accumulatedPositive : e);
            return {
                min: d,
                max: e
            };
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {}
        function e(a, b) {
            return b = "undefined" == typeof b ? {} : b, {
                style: b.style || a.options.drawPoints.style,
                styles: b.styles || a.options.drawPoints.styles,
                size: b.size || a.options.drawPoints.size,
                className: b.className || a.className
            };
        }
        function f(a, b) {
            var c = void 0;
            return a.options && a.options.drawPoints && a.options.drawPoints.onRender && "function" == typeof a.options.drawPoints.onRender && (c = a.options.drawPoints.onRender), 
            b.group.options && b.group.options.drawPoints && b.group.options.drawPoints.onRender && "function" == typeof b.group.options.drawPoints.onRender && (c = b.group.options.drawPoints.onRender), 
            c;
        }
        var g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, h = c(7);
        d.draw = function(a, b, c, d) {
            d = d || 0;
            for (var i = f(c, b), j = 0; j < a.length; j++) if (i) {
                var k = i(a[j], b);
                k !== !0 && "object" !== ("undefined" == typeof k ? "undefined" : g(k)) || h.drawPoint(a[j].screen_x + d, a[j].screen_y, e(b, k), c.svgElements, c.svg, a[j].label);
            } else h.drawPoint(a[j].screen_x + d, a[j].screen_y, e(b), c.svgElements, c.svg, a[j].label);
        }, d.drawIcon = function(a, b, c, d, f, g) {
            var i = .5 * f, j = h.getSVGElement("rect", g.svgElements, g.svg);
            j.setAttributeNS(null, "x", b), j.setAttributeNS(null, "y", c - i), j.setAttributeNS(null, "width", d), 
            j.setAttributeNS(null, "height", 2 * i), j.setAttributeNS(null, "class", "vis-outline"), 
            h.drawPoint(b + .5 * d, c, e(a), g.svgElements, g.svg);
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {}
        var e = c(7);
        d.calcPath = function(a, b) {
            if (null != a && a.length > 0) {
                var c = [];
                return c = 1 == b.options.interpolation.enabled ? d._catmullRom(a, b) : d._linear(a);
            }
        }, d.drawIcon = function(a, b, c, d, f, g) {
            var h, i, j = .5 * f, k = e.getSVGElement("rect", g.svgElements, g.svg);
            if (k.setAttributeNS(null, "x", b), k.setAttributeNS(null, "y", c - j), k.setAttributeNS(null, "width", d), 
            k.setAttributeNS(null, "height", 2 * j), k.setAttributeNS(null, "class", "vis-outline"), 
            h = e.getSVGElement("path", g.svgElements, g.svg), h.setAttributeNS(null, "class", a.className), 
            void 0 !== a.style && h.setAttributeNS(null, "style", a.style), h.setAttributeNS(null, "d", "M" + b + "," + c + " L" + (b + d) + "," + c), 
            1 == a.options.shaded.enabled && (i = e.getSVGElement("path", g.svgElements, g.svg), 
            "top" == a.options.shaded.orientation ? i.setAttributeNS(null, "d", "M" + b + ", " + (c - j) + "L" + b + "," + c + " L" + (b + d) + "," + c + " L" + (b + d) + "," + (c - j)) : i.setAttributeNS(null, "d", "M" + b + "," + c + " L" + b + "," + (c + j) + " L" + (b + d) + "," + (c + j) + "L" + (b + d) + "," + c), 
            i.setAttributeNS(null, "class", a.className + " vis-icon-fill"), void 0 !== a.options.shaded.style && "" !== a.options.shaded.style && i.setAttributeNS(null, "style", a.options.shaded.style)), 
            1 == a.options.drawPoints.enabled) {
                var l = {
                    style: a.options.drawPoints.style,
                    styles: a.options.drawPoints.styles,
                    size: a.options.drawPoints.size,
                    className: a.className
                };
                e.drawPoint(b + .5 * d, c, l, g.svgElements, g.svg);
            }
        }, d.drawShading = function(a, b, c, d) {
            if (1 == b.options.shaded.enabled) {
                var f = Number(d.svg.style.height.replace("px", "")), g = e.getSVGElement("path", d.svgElements, d.svg), h = "L";
                1 == b.options.interpolation.enabled && (h = "C");
                var i, j = 0;
                j = "top" == b.options.shaded.orientation ? 0 : "bottom" == b.options.shaded.orientation ? f : Math.min(Math.max(0, b.zeroPosition), f), 
                i = "group" == b.options.shaded.orientation && null != c && void 0 != c ? "M" + a[0][0] + "," + a[0][1] + " " + this.serializePath(a, h, !1) + " L" + c[c.length - 1][0] + "," + c[c.length - 1][1] + " " + this.serializePath(c, h, !0) + c[0][0] + "," + c[0][1] + " Z" : "M" + a[0][0] + "," + a[0][1] + " " + this.serializePath(a, h, !1) + " V" + j + " H" + a[0][0] + " Z", 
                g.setAttributeNS(null, "class", b.className + " vis-fill"), void 0 !== b.options.shaded.style && g.setAttributeNS(null, "style", b.options.shaded.style), 
                g.setAttributeNS(null, "d", i);
            }
        }, d.draw = function(a, b, c) {
            if (null != a && void 0 != a) {
                var d = e.getSVGElement("path", c.svgElements, c.svg);
                d.setAttributeNS(null, "class", b.className), void 0 !== b.style && d.setAttributeNS(null, "style", b.style);
                var f = "L";
                1 == b.options.interpolation.enabled && (f = "C"), d.setAttributeNS(null, "d", "M" + a[0][0] + "," + a[0][1] + " " + this.serializePath(a, f, !1));
            }
        }, d.serializePath = function(a, b, c) {
            if (a.length < 2) return "";
            var d = b;
            if (c) for (var e = a.length - 2; e > 0; e--) d += a[e][0] + "," + a[e][1] + " "; else for (var e = 1; e < a.length; e++) d += a[e][0] + "," + a[e][1] + " ";
            return d;
        }, d._catmullRomUniform = function(a) {
            var b, c, d, e, f, g, h = [];
            h.push([ Math.round(a[0].screen_x), Math.round(a[0].screen_y) ]);
            for (var i = 1 / 6, j = a.length, k = 0; j - 1 > k; k++) b = 0 == k ? a[0] : a[k - 1], 
            c = a[k], d = a[k + 1], e = j > k + 2 ? a[k + 2] : d, f = {
                screen_x: (-b.screen_x + 6 * c.screen_x + d.screen_x) * i,
                screen_y: (-b.screen_y + 6 * c.screen_y + d.screen_y) * i
            }, g = {
                screen_x: (c.screen_x + 6 * d.screen_x - e.screen_x) * i,
                screen_y: (c.screen_y + 6 * d.screen_y - e.screen_y) * i
            }, h.push([ f.screen_x, f.screen_y ]), h.push([ g.screen_x, g.screen_y ]), h.push([ d.screen_x, d.screen_y ]);
            return h;
        }, d._catmullRom = function(a, b) {
            var c = b.options.interpolation.alpha;
            if (0 == c || void 0 === c) return this._catmullRomUniform(a);
            var d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w = [];
            w.push([ Math.round(a[0].screen_x), Math.round(a[0].screen_y) ]);
            for (var x = a.length, y = 0; x - 1 > y; y++) d = 0 == y ? a[0] : a[y - 1], e = a[y], 
            f = a[y + 1], g = x > y + 2 ? a[y + 2] : f, j = Math.sqrt(Math.pow(d.screen_x - e.screen_x, 2) + Math.pow(d.screen_y - e.screen_y, 2)), 
            k = Math.sqrt(Math.pow(e.screen_x - f.screen_x, 2) + Math.pow(e.screen_y - f.screen_y, 2)), 
            l = Math.sqrt(Math.pow(f.screen_x - g.screen_x, 2) + Math.pow(f.screen_y - g.screen_y, 2)), 
            q = Math.pow(l, c), s = Math.pow(l, 2 * c), r = Math.pow(k, c), t = Math.pow(k, 2 * c), 
            v = Math.pow(j, c), u = Math.pow(j, 2 * c), m = 2 * u + 3 * v * r + t, n = 2 * s + 3 * q * r + t, 
            o = 3 * v * (v + r), o > 0 && (o = 1 / o), p = 3 * q * (q + r), p > 0 && (p = 1 / p), 
            h = {
                screen_x: (-t * d.screen_x + m * e.screen_x + u * f.screen_x) * o,
                screen_y: (-t * d.screen_y + m * e.screen_y + u * f.screen_y) * o
            }, i = {
                screen_x: (s * e.screen_x + n * f.screen_x - t * g.screen_x) * p,
                screen_y: (s * e.screen_y + n * f.screen_y - t * g.screen_y) * p
            }, 0 == h.screen_x && 0 == h.screen_y && (h = e), 0 == i.screen_x && 0 == i.screen_y && (i = f), 
            w.push([ h.screen_x, h.screen_y ]), w.push([ i.screen_x, i.screen_y ]), w.push([ f.screen_x, f.screen_y ]);
            return w;
        }, d._linear = function(a) {
            for (var b = [], c = 0; c < a.length; c++) b.push([ a[c].screen_x, a[c].screen_y ]);
            return b;
        }, a.exports = d;
    }, function(a, b, c) {
        "use strict";
        function d(a, b, c, d) {
            this.body = a, this.defaultOptions = {
                enabled: !1,
                icons: !0,
                iconSize: 20,
                iconSpacing: 6,
                left: {
                    visible: !0,
                    position: "top-left"
                },
                right: {
                    visible: !0,
                    position: "top-right"
                }
            }, this.side = c, this.options = e.extend({}, this.defaultOptions), this.linegraphOptions = d, 
            this.svgElements = {}, this.dom = {}, this.groups = {}, this.amountOfGroups = 0, 
            this._create(), this.framework = {
                svg: this.svg,
                svgElements: this.svgElements,
                options: this.options,
                groups: this.groups
            }, this.setOptions(b);
        }
        var e = c(1), f = c(7), g = c(28);
        d.prototype = new g(), d.prototype.clear = function() {
            this.groups = {}, this.amountOfGroups = 0;
        }, d.prototype.addGroup = function(a, b) {
            1 != b.options.excludeFromLegend && (this.groups.hasOwnProperty(a) || (this.groups[a] = b), 
            this.amountOfGroups += 1);
        }, d.prototype.updateGroup = function(a, b) {
            this.groups[a] = b;
        }, d.prototype.removeGroup = function(a) {
            this.groups.hasOwnProperty(a) && (delete this.groups[a], this.amountOfGroups -= 1);
        }, d.prototype._create = function() {
            this.dom.frame = document.createElement("div"), this.dom.frame.className = "vis-legend", 
            this.dom.frame.style.position = "absolute", this.dom.frame.style.top = "10px", this.dom.frame.style.display = "block", 
            this.dom.textArea = document.createElement("div"), this.dom.textArea.className = "vis-legend-text", 
            this.dom.textArea.style.position = "relative", this.dom.textArea.style.top = "0px", 
            this.svg = document.createElementNS("http://www.w3.org/2000/svg", "svg"), this.svg.style.position = "absolute", 
            this.svg.style.top = "0px", this.svg.style.width = this.options.iconSize + 5 + "px", 
            this.svg.style.height = "100%", this.dom.frame.appendChild(this.svg), this.dom.frame.appendChild(this.dom.textArea);
        }, d.prototype.hide = function() {
            this.dom.frame.parentNode && this.dom.frame.parentNode.removeChild(this.dom.frame);
        }, d.prototype.show = function() {
            this.dom.frame.parentNode || this.body.dom.center.appendChild(this.dom.frame);
        }, d.prototype.setOptions = function(a) {
            var b = [ "enabled", "orientation", "icons", "left", "right" ];
            e.selectiveDeepExtend(b, this.options, a);
        }, d.prototype.redraw = function() {
            var a = 0, b = Object.keys(this.groups);
            b.sort(function(a, b) {
                return b > a ? -1 : 1;
            });
            for (var c = 0; c < b.length; c++) {
                var d = b[c];
                1 != this.groups[d].visible || void 0 !== this.linegraphOptions.visibility[d] && 1 != this.linegraphOptions.visibility[d] || a++;
            }
            if (0 == this.options[this.side].visible || 0 == this.amountOfGroups || 0 == this.options.enabled || 0 == a) this.hide(); else {
                if (this.show(), "top-left" == this.options[this.side].position || "bottom-left" == this.options[this.side].position ? (this.dom.frame.style.left = "4px", 
                this.dom.frame.style.textAlign = "left", this.dom.textArea.style.textAlign = "left", 
                this.dom.textArea.style.left = this.options.iconSize + 15 + "px", this.dom.textArea.style.right = "", 
                this.svg.style.left = "0px", this.svg.style.right = "") : (this.dom.frame.style.right = "4px", 
                this.dom.frame.style.textAlign = "right", this.dom.textArea.style.textAlign = "right", 
                this.dom.textArea.style.right = this.options.iconSize + 15 + "px", this.dom.textArea.style.left = "", 
                this.svg.style.right = "0px", this.svg.style.left = ""), "top-left" == this.options[this.side].position || "top-right" == this.options[this.side].position) this.dom.frame.style.top = 4 - Number(this.body.dom.center.style.top.replace("px", "")) + "px", 
                this.dom.frame.style.bottom = ""; else {
                    var e = this.body.domProps.center.height - this.body.domProps.centerContainer.height;
                    this.dom.frame.style.bottom = 4 + e + Number(this.body.dom.center.style.top.replace("px", "")) + "px", 
                    this.dom.frame.style.top = "";
                }
                0 == this.options.icons ? (this.dom.frame.style.width = this.dom.textArea.offsetWidth + 10 + "px", 
                this.dom.textArea.style.right = "", this.dom.textArea.style.left = "", this.svg.style.width = "0px") : (this.dom.frame.style.width = this.options.iconSize + 15 + this.dom.textArea.offsetWidth + 10 + "px", 
                this.drawLegendIcons());
                for (var f = "", c = 0; c < b.length; c++) {
                    var d = b[c];
                    1 != this.groups[d].visible || void 0 !== this.linegraphOptions.visibility[d] && 1 != this.linegraphOptions.visibility[d] || (f += this.groups[d].content + "<br />");
                }
                this.dom.textArea.innerHTML = f, this.dom.textArea.style.lineHeight = .75 * this.options.iconSize + this.options.iconSpacing + "px";
            }
        }, d.prototype.drawLegendIcons = function() {
            if (this.dom.frame.parentNode) {
                var a = Object.keys(this.groups);
                a.sort(function(a, b) {
                    return b > a ? -1 : 1;
                }), f.resetElements(this.svgElements);
                var b = window.getComputedStyle(this.dom.frame).paddingTop, c = Number(b.replace("px", "")), d = c, e = this.options.iconSize, g = .75 * this.options.iconSize, h = c + .5 * g + 3;
                this.svg.style.width = e + 5 + c + "px";
                for (var i = 0; i < a.length; i++) {
                    var j = a[i];
                    1 != this.groups[j].visible || void 0 !== this.linegraphOptions.visibility[j] && 1 != this.linegraphOptions.visibility[j] || (this.groups[j].getLegend(e, g, this.framework, d, h), 
                    h += g + this.options.iconSpacing);
                }
            }
        }, a.exports = d;
    }, function(a, b) {
        "use strict";
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var c = "string", d = "boolean", e = "number", f = "array", g = "date", h = "object", i = "dom", j = "moment", k = "any", l = {
            configure: {
                enabled: {
                    "boolean": d
                },
                filter: {
                    "boolean": d,
                    "function": "function"
                },
                container: {
                    dom: i
                },
                __type__: {
                    object: h,
                    "boolean": d,
                    "function": "function"
                }
            },
            yAxisOrientation: {
                string: [ "left", "right" ]
            },
            defaultGroup: {
                string: c
            },
            sort: {
                "boolean": d
            },
            sampling: {
                "boolean": d
            },
            stack: {
                "boolean": d
            },
            graphHeight: {
                string: c,
                number: e
            },
            shaded: {
                enabled: {
                    "boolean": d
                },
                orientation: {
                    string: [ "bottom", "top", "zero", "group" ]
                },
                groupId: {
                    object: h
                },
                __type__: {
                    "boolean": d,
                    object: h
                }
            },
            style: {
                string: [ "line", "bar", "points" ]
            },
            barChart: {
                width: {
                    number: e
                },
                minWidth: {
                    number: e
                },
                sideBySide: {
                    "boolean": d
                },
                align: {
                    string: [ "left", "center", "right" ]
                },
                __type__: {
                    object: h
                }
            },
            interpolation: {
                enabled: {
                    "boolean": d
                },
                parametrization: {
                    string: [ "centripetal", "chordal", "uniform" ]
                },
                alpha: {
                    number: e
                },
                __type__: {
                    object: h,
                    "boolean": d
                }
            },
            drawPoints: {
                enabled: {
                    "boolean": d
                },
                onRender: {
                    "function": "function"
                },
                size: {
                    number: e
                },
                style: {
                    string: [ "square", "circle" ]
                },
                __type__: {
                    object: h,
                    "boolean": d,
                    "function": "function"
                }
            },
            dataAxis: {
                showMinorLabels: {
                    "boolean": d
                },
                showMajorLabels: {
                    "boolean": d
                },
                icons: {
                    "boolean": d
                },
                width: {
                    string: c,
                    number: e
                },
                visible: {
                    "boolean": d
                },
                alignZeros: {
                    "boolean": d
                },
                left: {
                    range: {
                        min: {
                            number: e
                        },
                        max: {
                            number: e
                        },
                        __type__: {
                            object: h
                        }
                    },
                    format: {
                        "function": "function"
                    },
                    title: {
                        text: {
                            string: c,
                            number: e
                        },
                        style: {
                            string: c
                        },
                        __type__: {
                            object: h
                        }
                    },
                    __type__: {
                        object: h
                    }
                },
                right: {
                    range: {
                        min: {
                            number: e
                        },
                        max: {
                            number: e
                        },
                        __type__: {
                            object: h
                        }
                    },
                    format: {
                        "function": "function"
                    },
                    title: {
                        text: {
                            string: c,
                            number: e
                        },
                        style: {
                            string: c
                        },
                        __type__: {
                            object: h
                        }
                    },
                    __type__: {
                        object: h
                    }
                },
                __type__: {
                    object: h
                }
            },
            legend: {
                enabled: {
                    "boolean": d
                },
                icons: {
                    "boolean": d
                },
                left: {
                    visible: {
                        "boolean": d
                    },
                    position: {
                        string: [ "top-right", "bottom-right", "top-left", "bottom-left" ]
                    },
                    __type__: {
                        object: h
                    }
                },
                right: {
                    visible: {
                        "boolean": d
                    },
                    position: {
                        string: [ "top-right", "bottom-right", "top-left", "bottom-left" ]
                    },
                    __type__: {
                        object: h
                    }
                },
                __type__: {
                    object: h,
                    "boolean": d
                }
            },
            groups: {
                visibility: {
                    any: k
                },
                __type__: {
                    object: h
                }
            },
            autoResize: {
                "boolean": d
            },
            throttleRedraw: {
                number: e
            },
            clickToUse: {
                "boolean": d
            },
            end: {
                number: e,
                date: g,
                string: c,
                moment: j
            },
            format: {
                minorLabels: {
                    millisecond: {
                        string: c,
                        undefined: "undefined"
                    },
                    second: {
                        string: c,
                        undefined: "undefined"
                    },
                    minute: {
                        string: c,
                        undefined: "undefined"
                    },
                    hour: {
                        string: c,
                        undefined: "undefined"
                    },
                    weekday: {
                        string: c,
                        undefined: "undefined"
                    },
                    day: {
                        string: c,
                        undefined: "undefined"
                    },
                    month: {
                        string: c,
                        undefined: "undefined"
                    },
                    year: {
                        string: c,
                        undefined: "undefined"
                    },
                    __type__: {
                        object: h
                    }
                },
                majorLabels: {
                    millisecond: {
                        string: c,
                        undefined: "undefined"
                    },
                    second: {
                        string: c,
                        undefined: "undefined"
                    },
                    minute: {
                        string: c,
                        undefined: "undefined"
                    },
                    hour: {
                        string: c,
                        undefined: "undefined"
                    },
                    weekday: {
                        string: c,
                        undefined: "undefined"
                    },
                    day: {
                        string: c,
                        undefined: "undefined"
                    },
                    month: {
                        string: c,
                        undefined: "undefined"
                    },
                    year: {
                        string: c,
                        undefined: "undefined"
                    },
                    __type__: {
                        object: h
                    }
                },
                __type__: {
                    object: h
                }
            },
            moment: {
                "function": "function"
            },
            height: {
                string: c,
                number: e
            },
            hiddenDates: {
                start: {
                    date: g,
                    number: e,
                    string: c,
                    moment: j
                },
                end: {
                    date: g,
                    number: e,
                    string: c,
                    moment: j
                },
                repeat: {
                    string: c
                },
                __type__: {
                    object: h,
                    array: f
                }
            },
            locale: {
                string: c
            },
            locales: {
                __any__: {
                    any: k
                },
                __type__: {
                    object: h
                }
            },
            max: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            maxHeight: {
                number: e,
                string: c
            },
            maxMinorChars: {
                number: e
            },
            min: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            minHeight: {
                number: e,
                string: c
            },
            moveable: {
                "boolean": d
            },
            multiselect: {
                "boolean": d
            },
            orientation: {
                string: c
            },
            showCurrentTime: {
                "boolean": d
            },
            showMajorLabels: {
                "boolean": d
            },
            showMinorLabels: {
                "boolean": d
            },
            start: {
                date: g,
                number: e,
                string: c,
                moment: j
            },
            timeAxis: {
                scale: {
                    string: c,
                    undefined: "undefined"
                },
                step: {
                    number: e,
                    undefined: "undefined"
                },
                __type__: {
                    object: h
                }
            },
            width: {
                string: c,
                number: e
            },
            zoomable: {
                "boolean": d
            },
            zoomKey: {
                string: [ "ctrlKey", "altKey", "metaKey", "" ]
            },
            zoomMax: {
                number: e
            },
            zoomMin: {
                number: e
            },
            zIndex: {
                number: e
            },
            __type__: {
                object: h
            }
        }, m = {
            global: {
                sort: !0,
                sampling: !0,
                stack: !1,
                shaded: {
                    enabled: !1,
                    orientation: [ "zero", "top", "bottom", "group" ]
                },
                style: [ "line", "bar", "points" ],
                barChart: {
                    width: [ 50, 5, 100, 5 ],
                    minWidth: [ 50, 5, 100, 5 ],
                    sideBySide: !1,
                    align: [ "left", "center", "right" ]
                },
                interpolation: {
                    enabled: !0,
                    parametrization: [ "centripetal", "chordal", "uniform" ]
                },
                drawPoints: {
                    enabled: !0,
                    size: [ 6, 2, 30, 1 ],
                    style: [ "square", "circle" ]
                },
                dataAxis: {
                    showMinorLabels: !0,
                    showMajorLabels: !0,
                    icons: !1,
                    width: [ 40, 0, 200, 1 ],
                    visible: !0,
                    alignZeros: !0,
                    left: {
                        title: {
                            text: "",
                            style: ""
                        }
                    },
                    right: {
                        title: {
                            text: "",
                            style: ""
                        }
                    }
                },
                legend: {
                    enabled: !1,
                    icons: !0,
                    left: {
                        visible: !0,
                        position: [ "top-right", "bottom-right", "top-left", "bottom-left" ]
                    },
                    right: {
                        visible: !0,
                        position: [ "top-right", "bottom-right", "top-left", "bottom-left" ]
                    }
                },
                autoResize: !0,
                throttleRedraw: [ 10, 0, 1e3, 10 ],
                clickToUse: !1,
                end: "",
                format: {
                    minorLabels: {
                        millisecond: "SSS",
                        second: "s",
                        minute: "HH:mm",
                        hour: "HH:mm",
                        weekday: "ddd D",
                        day: "D",
                        month: "MMM",
                        year: "YYYY"
                    },
                    majorLabels: {
                        millisecond: "HH:mm:ss",
                        second: "D MMMM HH:mm",
                        minute: "ddd D MMMM",
                        hour: "ddd D MMMM",
                        weekday: "MMMM YYYY",
                        day: "MMMM YYYY",
                        month: "YYYY",
                        year: ""
                    }
                },
                height: "",
                locale: "",
                max: "",
                maxHeight: "",
                maxMinorChars: [ 7, 0, 20, 1 ],
                min: "",
                minHeight: "",
                moveable: !0,
                orientation: [ "both", "bottom", "top" ],
                showCurrentTime: !1,
                showMajorLabels: !0,
                showMinorLabels: !0,
                start: "",
                width: "100%",
                zoomable: !0,
                zoomKey: [ "ctrlKey", "altKey", "metaKey", "" ],
                zoomMax: [ 31536e10, 10, 31536e10, 1 ],
                zoomMin: [ 10, 10, 31536e10, 1 ],
                zIndex: 0
            }
        };
        b.allOptions = l, b.configureOptions = m;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b, c) {
            var d = this;
            if (!(this instanceof e)) throw new SyntaxError("Constructor must be called with the new operator");
            this.options = {}, this.defaultOptions = {
                locale: "en",
                locales: R,
                clickToUse: !1
            }, N.extend(this.options, this.defaultOptions), this.body = {
                container: a,
                nodes: {},
                nodeIndices: [],
                edges: {},
                edgeIndices: [],
                emitter: {
                    on: this.on.bind(this),
                    off: this.off.bind(this),
                    emit: this.emit.bind(this),
                    once: this.once.bind(this)
                },
                eventListeners: {
                    onTap: function() {},
                    onTouch: function() {},
                    onDoubleTap: function() {},
                    onHold: function() {},
                    onDragStart: function() {},
                    onDrag: function() {},
                    onDragEnd: function() {},
                    onMouseWheel: function() {},
                    onPinch: function() {},
                    onMouseMove: function() {},
                    onRelease: function() {},
                    onContext: function() {}
                },
                data: {
                    nodes: null,
                    edges: null
                },
                functions: {
                    createNode: function() {},
                    createEdge: function() {},
                    getPointer: function() {}
                },
                modules: {},
                view: {
                    scale: 1,
                    translation: {
                        x: 0,
                        y: 0
                    }
                }
            }, this.bindEventListeners(), this.images = new g["default"](function() {
                return d.body.emitter.emit("_requestRedraw");
            }), this.groups = new i["default"](), this.canvas = new u["default"](this.body), 
            this.selectionHandler = new A["default"](this.body, this.canvas), this.interactionHandler = new y["default"](this.body, this.canvas, this.selectionHandler), 
            this.view = new w["default"](this.body, this.canvas), this.renderer = new s["default"](this.body, this.canvas), 
            this.physics = new o["default"](this.body), this.layoutEngine = new C["default"](this.body), 
            this.clustering = new q["default"](this.body), this.manipulation = new E["default"](this.body, this.canvas, this.selectionHandler), 
            this.nodesHandler = new k["default"](this.body, this.images, this.groups, this.layoutEngine), 
            this.edgesHandler = new m["default"](this.body, this.images, this.groups), this.body.modules.kamadaKawai = new L["default"](this.body, 150, .05), 
            this.body.modules.clustering = this.clustering, this.canvas._create(), this.setOptions(c), 
            this.setData(b);
        }
        var f = c(59), g = d(f), h = c(60), i = d(h), j = c(61), k = d(j), l = c(81), m = d(l), n = c(90), o = d(n), p = c(99), q = d(p), r = c(102), s = d(r), t = c(103), u = d(t), v = c(104), w = d(v), x = c(105), y = d(x), z = c(108), A = d(z), B = c(109), C = d(B), D = c(110), E = d(D), F = c(20), G = d(F), H = c(26), I = d(H), J = c(111), K = c(112), L = d(K);
        c(114);
        var M = c(12), N = c(1), O = (c(8), c(10), c(115)), P = c(116), Q = c(42), R = c(117);
        M(e.prototype), e.prototype.setOptions = function(a) {
            var b = this;
            if (void 0 !== a) {
                var c = I["default"].validate(a, J.allOptions);
                c === !0 && console.log("%cErrors have been found in the supplied options object.", H.printStyle);
                var d = [ "locale", "locales", "clickToUse" ];
                if (N.selectiveDeepExtend(d, this.options, a), a = this.layoutEngine.setOptions(a.layout, a), 
                this.canvas.setOptions(a), this.groups.setOptions(a.groups), this.nodesHandler.setOptions(a.nodes), 
                this.edgesHandler.setOptions(a.edges), this.physics.setOptions(a.physics), this.manipulation.setOptions(a.manipulation, a, this.options), 
                this.interactionHandler.setOptions(a.interaction), this.renderer.setOptions(a.interaction), 
                this.selectionHandler.setOptions(a.interaction), void 0 !== a.groups && this.body.emitter.emit("refreshNodes"), 
                "configure" in a && (this.configurator || (this.configurator = new G["default"](this, this.body.container, J.configureOptions, this.canvas.pixelRatio)), 
                this.configurator.setOptions(a.configure)), this.configurator && this.configurator.options.enabled === !0) {
                    var e = {
                        nodes: {},
                        edges: {},
                        layout: {},
                        interaction: {},
                        manipulation: {},
                        physics: {},
                        global: {}
                    };
                    N.deepExtend(e.nodes, this.nodesHandler.options), N.deepExtend(e.edges, this.edgesHandler.options), 
                    N.deepExtend(e.layout, this.layoutEngine.options), N.deepExtend(e.interaction, this.selectionHandler.options), 
                    N.deepExtend(e.interaction, this.renderer.options), N.deepExtend(e.interaction, this.interactionHandler.options), 
                    N.deepExtend(e.manipulation, this.manipulation.options), N.deepExtend(e.physics, this.physics.options), 
                    N.deepExtend(e.global, this.canvas.options), N.deepExtend(e.global, this.options), 
                    this.configurator.setModuleOptions(e);
                }
                void 0 !== a.clickToUse ? a.clickToUse === !0 ? void 0 === this.activator && (this.activator = new Q(this.canvas.frame), 
                this.activator.on("change", function() {
                    b.body.emitter.emit("activate");
                })) : (void 0 !== this.activator && (this.activator.destroy(), delete this.activator), 
                this.body.emitter.emit("activate")) : this.body.emitter.emit("activate"), this.canvas.setSize(), 
                this.body.emitter.emit("startSimulation");
            }
        }, e.prototype._updateVisibleIndices = function() {
            var a = this.body.nodes, b = this.body.edges;
            this.body.nodeIndices = [], this.body.edgeIndices = [];
            for (var c in a) a.hasOwnProperty(c) && a[c].options.hidden === !1 && this.body.nodeIndices.push(a[c].id);
            for (var d in b) b.hasOwnProperty(d) && b[d].options.hidden === !1 && this.body.edgeIndices.push(b[d].id);
        }, e.prototype.bindEventListeners = function() {
            var a = this;
            this.body.emitter.on("_dataChanged", function() {
                a._updateVisibleIndices(), a.body.emitter.emit("_requestRedraw"), a.body.emitter.emit("_dataUpdated");
            }), this.body.emitter.on("_dataUpdated", function() {
                a._updateValueRange(a.body.nodes), a._updateValueRange(a.body.edges), a.body.emitter.emit("startSimulation"), 
                a.body.emitter.emit("_requestRedraw");
            });
        }, e.prototype.setData = function(a) {
            if (this.body.emitter.emit("resetPhysics"), this.body.emitter.emit("_resetData"), 
            this.selectionHandler.unselectAll(), a && a.dot && (a.nodes || a.edges)) throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');
            if (this.setOptions(a && a.options), a && a.dot) {
                console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");
                var b = O.DOTToGraph(a.dot);
                return void this.setData(b);
            }
            if (a && a.gephi) {
                console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");
                var c = P.parseGephi(a.gephi);
                return void this.setData(c);
            }
            this.nodesHandler.setData(a && a.nodes, !0), this.edgesHandler.setData(a && a.edges, !0), 
            this.body.emitter.emit("_dataChanged"), this.body.emitter.emit("_dataLoaded"), this.body.emitter.emit("initPhysics");
        }, e.prototype.destroy = function() {
            this.body.emitter.emit("destroy"), this.body.emitter.off(), this.off(), delete this.groups, 
            delete this.canvas, delete this.selectionHandler, delete this.interactionHandler, 
            delete this.view, delete this.renderer, delete this.physics, delete this.layoutEngine, 
            delete this.clustering, delete this.manipulation, delete this.nodesHandler, delete this.edgesHandler, 
            delete this.configurator, delete this.images;
            for (var a in this.body.nodes) delete this.body.nodes[a];
            for (var b in this.body.edges) delete this.body.edges[b];
            N.recursiveDOMDelete(this.body.container);
        }, e.prototype._updateValueRange = function(a) {
            var b, c = void 0, d = void 0, e = 0;
            for (b in a) if (a.hasOwnProperty(b)) {
                var f = a[b].getValue();
                void 0 !== f && (c = void 0 === c ? f : Math.min(f, c), d = void 0 === d ? f : Math.max(f, d), 
                e += f);
            }
            if (void 0 !== c && void 0 !== d) for (b in a) a.hasOwnProperty(b) && a[b].setValueRange(c, d, e);
        }, e.prototype.isActive = function() {
            return !this.activator || this.activator.active;
        }, e.prototype.setSize = function() {
            return this.canvas.setSize.apply(this.canvas, arguments);
        }, e.prototype.canvasToDOM = function() {
            return this.canvas.canvasToDOM.apply(this.canvas, arguments);
        }, e.prototype.DOMtoCanvas = function() {
            return this.canvas.DOMtoCanvas.apply(this.canvas, arguments);
        }, e.prototype.findNode = function() {
            return this.clustering.findNode.apply(this.clustering, arguments);
        }, e.prototype.isCluster = function() {
            return this.clustering.isCluster.apply(this.clustering, arguments);
        }, e.prototype.openCluster = function() {
            return this.clustering.openCluster.apply(this.clustering, arguments);
        }, e.prototype.cluster = function() {
            return this.clustering.cluster.apply(this.clustering, arguments);
        }, e.prototype.getNodesInCluster = function() {
            return this.clustering.getNodesInCluster.apply(this.clustering, arguments);
        }, e.prototype.clusterByConnection = function() {
            return this.clustering.clusterByConnection.apply(this.clustering, arguments);
        }, e.prototype.clusterByHubsize = function() {
            return this.clustering.clusterByHubsize.apply(this.clustering, arguments);
        }, e.prototype.clusterOutliers = function() {
            return this.clustering.clusterOutliers.apply(this.clustering, arguments);
        }, e.prototype.getSeed = function() {
            return this.layoutEngine.getSeed.apply(this.layoutEngine, arguments);
        }, e.prototype.enableEditMode = function() {
            return this.manipulation.enableEditMode.apply(this.manipulation, arguments);
        }, e.prototype.disableEditMode = function() {
            return this.manipulation.disableEditMode.apply(this.manipulation, arguments);
        }, e.prototype.addNodeMode = function() {
            return this.manipulation.addNodeMode.apply(this.manipulation, arguments);
        }, e.prototype.editNode = function() {
            return this.manipulation.editNode.apply(this.manipulation, arguments);
        }, e.prototype.editNodeMode = function() {
            return console.log("Deprecated: Please use editNode instead of editNodeMode."), 
            this.manipulation.editNode.apply(this.manipulation, arguments);
        }, e.prototype.addEdgeMode = function() {
            return this.manipulation.addEdgeMode.apply(this.manipulation, arguments);
        }, e.prototype.editEdgeMode = function() {
            return this.manipulation.editEdgeMode.apply(this.manipulation, arguments);
        }, e.prototype.deleteSelected = function() {
            return this.manipulation.deleteSelected.apply(this.manipulation, arguments);
        }, e.prototype.getPositions = function() {
            return this.nodesHandler.getPositions.apply(this.nodesHandler, arguments);
        }, e.prototype.storePositions = function() {
            return this.nodesHandler.storePositions.apply(this.nodesHandler, arguments);
        }, e.prototype.moveNode = function() {
            return this.nodesHandler.moveNode.apply(this.nodesHandler, arguments);
        }, e.prototype.getBoundingBox = function() {
            return this.nodesHandler.getBoundingBox.apply(this.nodesHandler, arguments);
        }, e.prototype.getConnectedNodes = function(a) {
            return void 0 !== this.body.nodes[a] ? this.nodesHandler.getConnectedNodes.apply(this.nodesHandler, arguments) : this.edgesHandler.getConnectedNodes.apply(this.edgesHandler, arguments);
        }, e.prototype.getConnectedEdges = function() {
            return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler, arguments);
        }, e.prototype.startSimulation = function() {
            return this.physics.startSimulation.apply(this.physics, arguments);
        }, e.prototype.stopSimulation = function() {
            return this.physics.stopSimulation.apply(this.physics, arguments);
        }, e.prototype.stabilize = function() {
            return this.physics.stabilize.apply(this.physics, arguments);
        }, e.prototype.getSelection = function() {
            return this.selectionHandler.getSelection.apply(this.selectionHandler, arguments);
        }, e.prototype.setSelection = function() {
            return this.selectionHandler.setSelection.apply(this.selectionHandler, arguments);
        }, e.prototype.getSelectedNodes = function() {
            return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler, arguments);
        }, e.prototype.getSelectedEdges = function() {
            return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler, arguments);
        }, e.prototype.getNodeAt = function() {
            var a = this.selectionHandler.getNodeAt.apply(this.selectionHandler, arguments);
            return void 0 !== a && void 0 !== a.id ? a.id : a;
        }, e.prototype.getEdgeAt = function() {
            var a = this.selectionHandler.getEdgeAt.apply(this.selectionHandler, arguments);
            return void 0 !== a && void 0 !== a.id ? a.id : a;
        }, e.prototype.selectNodes = function() {
            return this.selectionHandler.selectNodes.apply(this.selectionHandler, arguments);
        }, e.prototype.selectEdges = function() {
            return this.selectionHandler.selectEdges.apply(this.selectionHandler, arguments);
        }, e.prototype.unselectAll = function() {
            this.selectionHandler.unselectAll.apply(this.selectionHandler, arguments), this.redraw();
        }, e.prototype.redraw = function() {
            return this.renderer.redraw.apply(this.renderer, arguments);
        }, e.prototype.getScale = function() {
            return this.view.getScale.apply(this.view, arguments);
        }, e.prototype.getViewPosition = function() {
            return this.view.getViewPosition.apply(this.view, arguments);
        }, e.prototype.fit = function() {
            return this.view.fit.apply(this.view, arguments);
        }, e.prototype.moveTo = function() {
            return this.view.moveTo.apply(this.view, arguments);
        }, e.prototype.focus = function() {
            return this.view.focus.apply(this.view, arguments);
        }, e.prototype.releaseNode = function() {
            return this.view.releaseNode.apply(this.view, arguments);
        }, e.prototype.getOptionsFromConfigurator = function() {
            var a = {};
            return this.configurator && (a = this.configurator.getOptions.apply(this.configurator)), 
            a;
        }, a.exports = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b) {
                c(this, a), this.images = {}, this.imageBroken = {}, this.callback = b;
            }
            return d(a, [ {
                key: "_addImageToCache",
                value: function(a, b) {
                    0 === b.width && (document.body.appendChild(b), b.width = b.offsetWidth, b.height = b.offsetHeight, 
                    document.body.removeChild(b)), this.images[a] = b;
                }
            }, {
                key: "_tryloadBrokenUrl",
                value: function(a, b, c) {
                    var d = this;
                    void 0 !== a && void 0 !== b && void 0 !== c && (c.onerror = function() {
                        console.error("Could not load brokenImage:", b), d._addImageToCache(a, new Image());
                    }, c.src = b);
                }
            }, {
                key: "_redrawWithImage",
                value: function(a) {
                    this.callback && this.callback(a);
                }
            }, {
                key: "load",
                value: function(a, b, c) {
                    var d = this, e = this.images[a];
                    if (e) return e;
                    var f = new Image();
                    return f.onload = function() {
                        d._addImageToCache(a, f), d._redrawWithImage(f);
                    }, f.onerror = function() {
                        console.error("Could not load image:", a), d._tryloadBrokenUrl(a, b, f);
                    }, f.src = a, f;
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = c(1), g = function() {
            function a() {
                d(this, a), this.clear(), this.defaultIndex = 0, this.groupsArray = [], this.groupIndex = 0, 
                this.defaultGroups = [ {
                    border: "#2B7CE9",
                    background: "#97C2FC",
                    highlight: {
                        border: "#2B7CE9",
                        background: "#D2E5FF"
                    },
                    hover: {
                        border: "#2B7CE9",
                        background: "#D2E5FF"
                    }
                }, {
                    border: "#FFA500",
                    background: "#FFFF00",
                    highlight: {
                        border: "#FFA500",
                        background: "#FFFFA3"
                    },
                    hover: {
                        border: "#FFA500",
                        background: "#FFFFA3"
                    }
                }, {
                    border: "#FA0A10",
                    background: "#FB7E81",
                    highlight: {
                        border: "#FA0A10",
                        background: "#FFAFB1"
                    },
                    hover: {
                        border: "#FA0A10",
                        background: "#FFAFB1"
                    }
                }, {
                    border: "#41A906",
                    background: "#7BE141",
                    highlight: {
                        border: "#41A906",
                        background: "#A1EC76"
                    },
                    hover: {
                        border: "#41A906",
                        background: "#A1EC76"
                    }
                }, {
                    border: "#E129F0",
                    background: "#EB7DF4",
                    highlight: {
                        border: "#E129F0",
                        background: "#F0B3F5"
                    },
                    hover: {
                        border: "#E129F0",
                        background: "#F0B3F5"
                    }
                }, {
                    border: "#7C29F0",
                    background: "#AD85E4",
                    highlight: {
                        border: "#7C29F0",
                        background: "#D3BDF0"
                    },
                    hover: {
                        border: "#7C29F0",
                        background: "#D3BDF0"
                    }
                }, {
                    border: "#C37F00",
                    background: "#FFA807",
                    highlight: {
                        border: "#C37F00",
                        background: "#FFCA66"
                    },
                    hover: {
                        border: "#C37F00",
                        background: "#FFCA66"
                    }
                }, {
                    border: "#4220FB",
                    background: "#6E6EFD",
                    highlight: {
                        border: "#4220FB",
                        background: "#9B9BFD"
                    },
                    hover: {
                        border: "#4220FB",
                        background: "#9B9BFD"
                    }
                }, {
                    border: "#FD5A77",
                    background: "#FFC0CB",
                    highlight: {
                        border: "#FD5A77",
                        background: "#FFD1D9"
                    },
                    hover: {
                        border: "#FD5A77",
                        background: "#FFD1D9"
                    }
                }, {
                    border: "#4AD63A",
                    background: "#C2FABC",
                    highlight: {
                        border: "#4AD63A",
                        background: "#E6FFE3"
                    },
                    hover: {
                        border: "#4AD63A",
                        background: "#E6FFE3"
                    }
                }, {
                    border: "#990000",
                    background: "#EE0000",
                    highlight: {
                        border: "#BB0000",
                        background: "#FF3333"
                    },
                    hover: {
                        border: "#BB0000",
                        background: "#FF3333"
                    }
                }, {
                    border: "#FF6000",
                    background: "#FF6000",
                    highlight: {
                        border: "#FF6000",
                        background: "#FF6000"
                    },
                    hover: {
                        border: "#FF6000",
                        background: "#FF6000"
                    }
                }, {
                    border: "#97C2FC",
                    background: "#2B7CE9",
                    highlight: {
                        border: "#D2E5FF",
                        background: "#2B7CE9"
                    },
                    hover: {
                        border: "#D2E5FF",
                        background: "#2B7CE9"
                    }
                }, {
                    border: "#399605",
                    background: "#255C03",
                    highlight: {
                        border: "#399605",
                        background: "#255C03"
                    },
                    hover: {
                        border: "#399605",
                        background: "#255C03"
                    }
                }, {
                    border: "#B70054",
                    background: "#FF007E",
                    highlight: {
                        border: "#B70054",
                        background: "#FF007E"
                    },
                    hover: {
                        border: "#B70054",
                        background: "#FF007E"
                    }
                }, {
                    border: "#AD85E4",
                    background: "#7C29F0",
                    highlight: {
                        border: "#D3BDF0",
                        background: "#7C29F0"
                    },
                    hover: {
                        border: "#D3BDF0",
                        background: "#7C29F0"
                    }
                }, {
                    border: "#4557FA",
                    background: "#000EA1",
                    highlight: {
                        border: "#6E6EFD",
                        background: "#000EA1"
                    },
                    hover: {
                        border: "#6E6EFD",
                        background: "#000EA1"
                    }
                }, {
                    border: "#FFC0CB",
                    background: "#FD5A77",
                    highlight: {
                        border: "#FFD1D9",
                        background: "#FD5A77"
                    },
                    hover: {
                        border: "#FFD1D9",
                        background: "#FD5A77"
                    }
                }, {
                    border: "#C2FABC",
                    background: "#74D66A",
                    highlight: {
                        border: "#E6FFE3",
                        background: "#74D66A"
                    },
                    hover: {
                        border: "#E6FFE3",
                        background: "#74D66A"
                    }
                }, {
                    border: "#EE0000",
                    background: "#990000",
                    highlight: {
                        border: "#FF3333",
                        background: "#BB0000"
                    },
                    hover: {
                        border: "#FF3333",
                        background: "#BB0000"
                    }
                } ], this.options = {}, this.defaultOptions = {
                    useDefaultGroups: !0
                }, f.extend(this.options, this.defaultOptions);
            }
            return e(a, [ {
                key: "setOptions",
                value: function(a) {
                    var b = [ "useDefaultGroups" ];
                    if (void 0 !== a) for (var c in a) if (a.hasOwnProperty(c) && -1 === b.indexOf(c)) {
                        var d = a[c];
                        this.add(c, d);
                    }
                }
            }, {
                key: "clear",
                value: function() {
                    this.groups = {}, this.groupsArray = [];
                }
            }, {
                key: "get",
                value: function(a) {
                    var b = this.groups[a];
                    if (void 0 === b) if (this.options.useDefaultGroups === !1 && this.groupsArray.length > 0) {
                        var c = this.groupIndex % this.groupsArray.length;
                        this.groupIndex++, b = {}, b.color = this.groups[this.groupsArray[c]], this.groups[a] = b;
                    } else {
                        var d = this.defaultIndex % this.defaultGroups.length;
                        this.defaultIndex++, b = {}, b.color = this.defaultGroups[d], this.groups[a] = b;
                    }
                    return b;
                }
            }, {
                key: "add",
                value: function(a, b) {
                    return this.groups[a] = b, this.groupsArray.push(a), b;
                }
            } ]), a;
        }();
        b["default"] = g;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(62), h = d(g), i = c(63), j = d(i), k = c(1), l = c(8), m = c(10), n = function() {
            function a(b, c, d, f) {
                var g = this;
                e(this, a), this.body = b, this.images = c, this.groups = d, this.layoutEngine = f, 
                this.body.functions.createNode = this.create.bind(this), this.nodesListeners = {
                    add: function(a, b) {
                        g.add(b.items);
                    },
                    update: function(a, b) {
                        g.update(b.items, b.data);
                    },
                    remove: function(a, b) {
                        g.remove(b.items);
                    }
                }, this.options = {}, this.defaultOptions = {
                    borderWidth: 1,
                    borderWidthSelected: 2,
                    brokenImage: void 0,
                    color: {
                        border: "#2B7CE9",
                        background: "#97C2FC",
                        highlight: {
                            border: "#2B7CE9",
                            background: "#D2E5FF"
                        },
                        hover: {
                            border: "#2B7CE9",
                            background: "#D2E5FF"
                        }
                    },
                    fixed: {
                        x: !1,
                        y: !1
                    },
                    font: {
                        color: "#343434",
                        size: 14,
                        face: "arial",
                        background: "none",
                        strokeWidth: 0,
                        strokeColor: "#ffffff",
                        align: "center"
                    },
                    group: void 0,
                    hidden: !1,
                    icon: {
                        face: "FontAwesome",
                        code: void 0,
                        size: 50,
                        color: "#2B7CE9"
                    },
                    image: void 0,
                    label: void 0,
                    labelHighlightBold: !0,
                    level: void 0,
                    mass: 1,
                    physics: !0,
                    scaling: {
                        min: 10,
                        max: 30,
                        label: {
                            enabled: !1,
                            min: 14,
                            max: 30,
                            maxVisible: 30,
                            drawThreshold: 5
                        },
                        customScalingFunction: function(a, b, c, d) {
                            if (b === a) return .5;
                            var e = 1 / (b - a);
                            return Math.max(0, (d - a) * e);
                        }
                    },
                    shadow: {
                        enabled: !1,
                        color: "rgba(0,0,0,0.5)",
                        size: 10,
                        x: 5,
                        y: 5
                    },
                    shape: "ellipse",
                    shapeProperties: {
                        borderDashes: !1,
                        borderRadius: 6,
                        interpolation: !0,
                        useImageSize: !1,
                        useBorderWithImage: !1
                    },
                    size: 25,
                    title: void 0,
                    value: void 0,
                    x: void 0,
                    y: void 0
                }, k.extend(this.options, this.defaultOptions), this.bindEventListeners();
            }
            return f(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("refreshNodes", this.refresh.bind(this)), this.body.emitter.on("refresh", this.refresh.bind(this)), 
                    this.body.emitter.on("destroy", function() {
                        k.forEach(a.nodesListeners, function(b, c) {
                            a.body.data.nodes && a.body.data.nodes.off(c, b);
                        }), delete a.body.functions.createNode, delete a.nodesListeners.add, delete a.nodesListeners.update, 
                        delete a.nodesListeners.remove, delete a.nodesListeners;
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        if (h["default"].parseOptions(this.options, a), void 0 !== a.shape) for (var b in this.body.nodes) this.body.nodes.hasOwnProperty(b) && this.body.nodes[b].updateShape();
                        if (void 0 !== a.font) {
                            j["default"].parseOptions(this.options.font, a);
                            for (var c in this.body.nodes) this.body.nodes.hasOwnProperty(c) && (this.body.nodes[c].updateLabelModule(), 
                            this.body.nodes[c]._reset());
                        }
                        if (void 0 !== a.size) for (var d in this.body.nodes) this.body.nodes.hasOwnProperty(d) && this.body.nodes[d]._reset();
                        void 0 === a.hidden && void 0 === a.physics || this.body.emitter.emit("_dataChanged");
                    }
                }
            }, {
                key: "setData",
                value: function(a) {
                    var b = this, c = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], d = this.body.data.nodes;
                    if (a instanceof l || a instanceof m) this.body.data.nodes = a; else if (Array.isArray(a)) this.body.data.nodes = new l(), 
                    this.body.data.nodes.add(a); else {
                        if (a) throw new TypeError("Array or DataSet expected");
                        this.body.data.nodes = new l();
                    }
                    d && k.forEach(this.nodesListeners, function(a, b) {
                        d.off(b, a);
                    }), this.body.nodes = {}, this.body.data.nodes && !function() {
                        var a = b;
                        k.forEach(b.nodesListeners, function(b, c) {
                            a.body.data.nodes.on(c, b);
                        });
                        var c = b.body.data.nodes.getIds();
                        b.add(c, !0);
                    }(), c === !1 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "add",
                value: function(a) {
                    for (var b = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], c = void 0, d = [], e = 0; e < a.length; e++) {
                        c = a[e];
                        var f = this.body.data.nodes.get(c), g = this.create(f);
                        d.push(g), this.body.nodes[c] = g;
                    }
                    this.layoutEngine.positionInitially(d), b === !1 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "update",
                value: function(a, b) {
                    for (var c = this.body.nodes, d = !1, e = 0; e < a.length; e++) {
                        var f = a[e], g = c[f], h = b[e];
                        void 0 !== g ? d = g.setOptions(h) : (d = !0, g = this.create(h), c[f] = g);
                    }
                    d === !0 ? this.body.emitter.emit("_dataChanged") : this.body.emitter.emit("_dataUpdated");
                }
            }, {
                key: "remove",
                value: function(a) {
                    for (var b = this.body.nodes, c = 0; c < a.length; c++) {
                        var d = a[c];
                        delete b[d];
                    }
                    this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "create",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? h["default"] : arguments[1];
                    return new b(a, this.body, this.images, this.groups, this.options);
                }
            }, {
                key: "refresh",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0], b = this.body.nodes;
                    for (var c in b) {
                        var d = void 0;
                        b.hasOwnProperty(c) && (d = b[c]);
                        var e = this.body.data.nodes._data[c];
                        void 0 !== d && void 0 !== e && (a === !0 && d.setOptions({
                            x: null,
                            y: null
                        }), d.setOptions({
                            fixed: !1
                        }), d.setOptions(e));
                    }
                }
            }, {
                key: "getPositions",
                value: function(a) {
                    var b = {};
                    if (void 0 !== a) {
                        if (Array.isArray(a) === !0) {
                            for (var c = 0; c < a.length; c++) if (void 0 !== this.body.nodes[a[c]]) {
                                var d = this.body.nodes[a[c]];
                                b[a[c]] = {
                                    x: Math.round(d.x),
                                    y: Math.round(d.y)
                                };
                            }
                        } else if (void 0 !== this.body.nodes[a]) {
                            var e = this.body.nodes[a];
                            b[a] = {
                                x: Math.round(e.x),
                                y: Math.round(e.y)
                            };
                        }
                    } else for (var f = 0; f < this.body.nodeIndices.length; f++) {
                        var g = this.body.nodes[this.body.nodeIndices[f]];
                        b[this.body.nodeIndices[f]] = {
                            x: Math.round(g.x),
                            y: Math.round(g.y)
                        };
                    }
                    return b;
                }
            }, {
                key: "storePositions",
                value: function() {
                    var a = [], b = this.body.data.nodes.getDataSet();
                    for (var c in b._data) if (b._data.hasOwnProperty(c)) {
                        var d = this.body.nodes[c];
                        b._data[c].x == Math.round(d.x) && b._data[c].y == Math.round(d.y) || a.push({
                            id: d.id,
                            x: Math.round(d.x),
                            y: Math.round(d.y)
                        });
                    }
                    b.update(a);
                }
            }, {
                key: "getBoundingBox",
                value: function(a) {
                    return void 0 !== this.body.nodes[a] ? this.body.nodes[a].shape.boundingBox : void 0;
                }
            }, {
                key: "getConnectedNodes",
                value: function(a) {
                    var b = [];
                    if (void 0 !== this.body.nodes[a]) for (var c = this.body.nodes[a], d = {}, e = 0; e < c.edges.length; e++) {
                        var f = c.edges[e];
                        f.toId == c.id ? void 0 === d[f.fromId] && (b.push(f.fromId), d[f.fromId] = !0) : f.fromId == c.id && void 0 === d[f.toId] && (b.push(f.toId), 
                        d[f.toId] = !0);
                    }
                    return b;
                }
            }, {
                key: "getConnectedEdges",
                value: function(a) {
                    var b = [];
                    if (void 0 !== this.body.nodes[a]) for (var c = this.body.nodes[a], d = 0; d < c.edges.length; d++) b.push(c.edges[d].id); else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ", a);
                    return b;
                }
            }, {
                key: "moveNode",
                value: function(a, b, c) {
                    var d = this;
                    void 0 !== this.body.nodes[a] ? (this.body.nodes[a].x = Number(b), this.body.nodes[a].y = Number(c), 
                    setTimeout(function() {
                        d.body.emitter.emit("startSimulation");
                    }, 0)) : console.log("Node id supplied to moveNode does not exist. Provided: ", a);
                }
            } ]), a;
        }();
        b["default"] = n;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(63), h = d(g), i = c(64), j = d(i), k = c(66), l = d(k), m = c(68), n = d(m), o = c(69), p = d(o), q = c(70), r = d(q), s = c(72), t = d(s), u = c(73), v = d(u), w = c(74), x = d(w), y = c(75), z = d(y), A = c(76), B = d(A), C = c(77), D = d(C), E = c(78), F = d(E), G = c(79), H = d(G), I = c(80), J = d(I), K = c(26), L = (d(K), 
        c(1)), M = function() {
            function a(b, c, d, f, g) {
                e(this, a), this.options = L.bridgeObject(g), this.globalOptions = g, this.body = c, 
                this.edges = [], this.id = void 0, this.imagelist = d, this.grouplist = f, this.x = void 0, 
                this.y = void 0, this.baseSize = this.options.size, this.baseFontSize = this.options.font.size, 
                this.predefinedPosition = !1, this.selected = !1, this.hover = !1, this.labelModule = new h["default"](this.body, this.options, !1), 
                this.setOptions(b);
            }
            return f(a, [ {
                key: "attachEdge",
                value: function(a) {
                    -1 === this.edges.indexOf(a) && this.edges.push(a);
                }
            }, {
                key: "detachEdge",
                value: function(a) {
                    var b = this.edges.indexOf(a);
                    -1 != b && this.edges.splice(b, 1);
                }
            }, {
                key: "setOptions",
                value: function(b) {
                    var c = this.options.shape;
                    if (b) {
                        if (void 0 !== b.id && (this.id = b.id), void 0 === this.id) throw "Node must have an id";
                        if (void 0 !== b.x && (null === b.x ? (this.x = void 0, this.predefinedPosition = !1) : (this.x = parseInt(b.x), 
                        this.predefinedPosition = !0)), void 0 !== b.y && (null === b.y ? (this.y = void 0, 
                        this.predefinedPosition = !1) : (this.y = parseInt(b.y), this.predefinedPosition = !0)), 
                        void 0 !== b.size && (this.baseSize = b.size), void 0 !== b.value && (b.value = parseFloat(b.value)), 
                        "number" == typeof b.group || "string" == typeof b.group && "" != b.group) {
                            var d = this.grouplist.get(b.group);
                            L.deepExtend(this.options, d), this.options.color = L.parseColor(this.options.color);
                        }
                        if (a.parseOptions(this.options, b, !0, this.globalOptions), void 0 !== this.options.image) {
                            if (!this.imagelist) throw "No imagelist provided";
                            this.imageObj = this.imagelist.load(this.options.image, this.options.brokenImage, this.id);
                        }
                        return this.updateLabelModule(), this.updateShape(c), void 0 !== b.hidden || void 0 !== b.physics;
                    }
                }
            }, {
                key: "updateLabelModule",
                value: function() {
                    void 0 !== this.options.label && null !== this.options.label || (this.options.label = ""), 
                    this.labelModule.setOptions(this.options, !0), void 0 !== this.labelModule.baseSize && (this.baseFontSize = this.labelModule.baseSize);
                }
            }, {
                key: "updateShape",
                value: function(a) {
                    if (a === this.options.shape && this.shape) this.shape.setOptions(this.options, this.imageObj); else switch (this.options.shape) {
                      case "box":
                        this.shape = new j["default"](this.options, this.body, this.labelModule);
                        break;

                      case "circle":
                        this.shape = new l["default"](this.options, this.body, this.labelModule);
                        break;

                      case "circularImage":
                        this.shape = new n["default"](this.options, this.body, this.labelModule, this.imageObj);
                        break;

                      case "database":
                        this.shape = new p["default"](this.options, this.body, this.labelModule);
                        break;

                      case "diamond":
                        this.shape = new r["default"](this.options, this.body, this.labelModule);
                        break;

                      case "dot":
                        this.shape = new t["default"](this.options, this.body, this.labelModule);
                        break;

                      case "ellipse":
                        this.shape = new v["default"](this.options, this.body, this.labelModule);
                        break;

                      case "icon":
                        this.shape = new x["default"](this.options, this.body, this.labelModule);
                        break;

                      case "image":
                        this.shape = new z["default"](this.options, this.body, this.labelModule, this.imageObj);
                        break;

                      case "square":
                        this.shape = new B["default"](this.options, this.body, this.labelModule);
                        break;

                      case "star":
                        this.shape = new D["default"](this.options, this.body, this.labelModule);
                        break;

                      case "text":
                        this.shape = new F["default"](this.options, this.body, this.labelModule);
                        break;

                      case "triangle":
                        this.shape = new H["default"](this.options, this.body, this.labelModule);
                        break;

                      case "triangleDown":
                        this.shape = new J["default"](this.options, this.body, this.labelModule);
                        break;

                      default:
                        this.shape = new v["default"](this.options, this.body, this.labelModule);
                    }
                    this._reset();
                }
            }, {
                key: "select",
                value: function() {
                    this.selected = !0, this._reset();
                }
            }, {
                key: "unselect",
                value: function() {
                    this.selected = !1, this._reset();
                }
            }, {
                key: "_reset",
                value: function() {
                    this.shape.width = void 0, this.shape.height = void 0;
                }
            }, {
                key: "getTitle",
                value: function() {
                    return this.options.title;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this.shape.distanceToBorder(a, b);
                }
            }, {
                key: "isFixed",
                value: function() {
                    return this.options.fixed.x && this.options.fixed.y;
                }
            }, {
                key: "isSelected",
                value: function() {
                    return this.selected;
                }
            }, {
                key: "getValue",
                value: function() {
                    return this.options.value;
                }
            }, {
                key: "setValueRange",
                value: function(a, b, c) {
                    if (void 0 !== this.options.value) {
                        var d = this.options.scaling.customScalingFunction(a, b, c, this.options.value), e = this.options.scaling.max - this.options.scaling.min;
                        if (this.options.scaling.label.enabled === !0) {
                            var f = this.options.scaling.label.max - this.options.scaling.label.min;
                            this.options.font.size = this.options.scaling.label.min + d * f;
                        }
                        this.options.size = this.options.scaling.min + d * e;
                    } else this.options.size = this.baseSize, this.options.font.size = this.baseFontSize;
                    this.updateLabelModule();
                }
            }, {
                key: "draw",
                value: function(a) {
                    this.shape.draw(a, this.x, this.y, this.selected, this.hover);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a) {
                    this.shape.updateBoundingBox(this.x, this.y, a);
                }
            }, {
                key: "resize",
                value: function(a) {
                    this.shape.resize(a, this.selected);
                }
            }, {
                key: "isOverlappingWith",
                value: function(a) {
                    return this.shape.left < a.right && this.shape.left + this.shape.width > a.left && this.shape.top < a.bottom && this.shape.top + this.shape.height > a.top;
                }
            }, {
                key: "isBoundingBoxOverlappingWith",
                value: function(a) {
                    return this.shape.boundingBox.left < a.right && this.shape.boundingBox.right > a.left && this.shape.boundingBox.top < a.bottom && this.shape.boundingBox.bottom > a.top;
                }
            } ], [ {
                key: "parseOptions",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = arguments.length <= 3 || void 0 === arguments[3] ? {} : arguments[3], e = [ "color", "font", "fixed", "shadow" ];
                    if (L.selectiveNotDeepExtend(e, a, b, c), L.mergeOptions(a, b, "shadow", c, d), 
                    void 0 !== b.color && null !== b.color) {
                        var f = L.parseColor(b.color);
                        L.fillIfDefined(a.color, f);
                    } else c === !0 && null === b.color && (a.color = L.bridgeObject(d.color));
                    void 0 !== b.fixed && null !== b.fixed && ("boolean" == typeof b.fixed ? (a.fixed.x = b.fixed, 
                    a.fixed.y = b.fixed) : (void 0 !== b.fixed.x && "boolean" == typeof b.fixed.x && (a.fixed.x = b.fixed.x), 
                    void 0 !== b.fixed.y && "boolean" == typeof b.fixed.y && (a.fixed.y = b.fixed.y))), 
                    void 0 !== b.font && null !== b.font ? h["default"].parseOptions(a.font, b) : c === !0 && null === b.font && (a.font = L.bridgeObject(d.font)), 
                    void 0 !== b.scaling && L.mergeOptions(a.scaling, b.scaling, "label", c, d.scaling);
                }
            } ]), a;
        }();
        b["default"] = M;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                var c = [], d = !0, e = !1, f = void 0;
                try {
                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value), 
                    !b || c.length !== b); d = !0) ;
                } catch (i) {
                    e = !0, f = i;
                } finally {
                    try {
                        !d && h["return"] && h["return"]();
                    } finally {
                        if (e) throw f;
                    }
                }
                return c;
            }
            return function(b, c) {
                if (Array.isArray(b)) return b;
                if (Symbol.iterator in Object(b)) return a(b, c);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            };
        }(), f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, g = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), h = c(1), i = function() {
            function a(b, c) {
                var e = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                d(this, a), this.body = b, this.pointToSelf = !1, this.baseSize = void 0, this.fontOptions = {}, 
                this.setOptions(c), this.size = {
                    top: 0,
                    left: 0,
                    width: 0,
                    height: 0,
                    yLine: 0
                }, this.isEdgeLabel = e;
            }
            return g(a, [ {
                key: "setOptions",
                value: function(b) {
                    var c = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1];
                    this.nodeOptions = b, this.fontOptions = h.deepExtend({}, b.font, !0), void 0 !== b.label && (this.labelDirty = !0), 
                    void 0 !== b.font && (a.parseOptions(this.fontOptions, b, c), "string" == typeof b.font ? this.baseSize = this.fontOptions.size : "object" === f(b.font) && void 0 !== b.font.size && (this.baseSize = b.font.size));
                }
            }, {
                key: "draw",
                value: function(a, b, c, d) {
                    var e = arguments.length <= 4 || void 0 === arguments[4] ? "middle" : arguments[4];
                    if (void 0 !== this.nodeOptions.label) {
                        var f = this.fontOptions.size * this.body.view.scale;
                        this.nodeOptions.label && f < this.nodeOptions.scaling.label.drawThreshold - 1 || (this.calculateLabelSize(a, d, b, c, e), 
                        this._drawBackground(a), this._drawText(a, d, b, c, e));
                    }
                }
            }, {
                key: "_drawBackground",
                value: function(a) {
                    if (void 0 !== this.fontOptions.background && "none" !== this.fontOptions.background) {
                        a.fillStyle = this.fontOptions.background;
                        var b = 2;
                        if (this.isEdgeLabel) switch (this.fontOptions.align) {
                          case "middle":
                            a.fillRect(.5 * -this.size.width, .5 * -this.size.height, this.size.width, this.size.height);
                            break;

                          case "top":
                            a.fillRect(.5 * -this.size.width, -(this.size.height + b), this.size.width, this.size.height);
                            break;

                          case "bottom":
                            a.fillRect(.5 * -this.size.width, b, this.size.width, this.size.height);
                            break;

                          default:
                            a.fillRect(this.size.left, this.size.top - .5 * b, this.size.width, this.size.height);
                        } else a.fillRect(this.size.left, this.size.top - .5 * b, this.size.width, this.size.height);
                    }
                }
            }, {
                key: "_drawText",
                value: function(a, b, c, d) {
                    var f = arguments.length <= 4 || void 0 === arguments[4] ? "middle" : arguments[4], g = this.fontOptions.size, h = g * this.body.view.scale;
                    h >= this.nodeOptions.scaling.label.maxVisible && (g = Number(this.nodeOptions.scaling.label.maxVisible) / this.body.view.scale);
                    var i = this.size.yLine, j = this._getColor(h), k = e(j, 2), l = k[0], m = k[1], n = this._setAlignment(a, c, i, f), o = e(n, 2);
                    c = o[0], i = o[1], a.font = (b && this.nodeOptions.labelHighlightBold ? "bold " : "") + g + "px " + this.fontOptions.face, 
                    a.fillStyle = l, this.isEdgeLabel || "left" !== this.fontOptions.align ? a.textAlign = "center" : (a.textAlign = this.fontOptions.align, 
                    c -= .5 * this.size.width), this.fontOptions.strokeWidth > 0 && (a.lineWidth = this.fontOptions.strokeWidth, 
                    a.strokeStyle = m, a.lineJoin = "round");
                    for (var p = 0; p < this.lineCount; p++) this.fontOptions.strokeWidth > 0 && a.strokeText(this.lines[p], c, i), 
                    a.fillText(this.lines[p], c, i), i += g;
                }
            }, {
                key: "_setAlignment",
                value: function(a, b, c, d) {
                    if (this.isEdgeLabel && "horizontal" !== this.fontOptions.align && this.pointToSelf === !1) {
                        b = 0, c = 0;
                        var e = 2;
                        "top" === this.fontOptions.align ? (a.textBaseline = "alphabetic", c -= 2 * e) : "bottom" === this.fontOptions.align ? (a.textBaseline = "hanging", 
                        c += 2 * e) : a.textBaseline = "middle";
                    } else a.textBaseline = d;
                    return [ b, c ];
                }
            }, {
                key: "_getColor",
                value: function(a) {
                    var b = this.fontOptions.color || "#000000", c = this.fontOptions.strokeColor || "#ffffff";
                    if (a <= this.nodeOptions.scaling.label.drawThreshold) {
                        var d = Math.max(0, Math.min(1, 1 - (this.nodeOptions.scaling.label.drawThreshold - a)));
                        b = h.overrideOpacity(b, d), c = h.overrideOpacity(c, d);
                    }
                    return [ b, c ];
                }
            }, {
                key: "getTextSize",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], c = {
                        width: this._processLabel(a, b),
                        height: this.fontOptions.size * this.lineCount,
                        lineCount: this.lineCount
                    };
                    return c;
                }
            }, {
                key: "calculateLabelSize",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? 0 : arguments[2], d = arguments.length <= 3 || void 0 === arguments[3] ? 0 : arguments[3], e = arguments.length <= 4 || void 0 === arguments[4] ? "middle" : arguments[4];
                    this.labelDirty === !0 && (this.size.width = this._processLabel(a, b)), this.size.height = this.fontOptions.size * this.lineCount, 
                    this.size.left = c - .5 * this.size.width, this.size.top = d - .5 * this.size.height, 
                    this.size.yLine = d + .5 * (1 - this.lineCount) * this.fontOptions.size, "hanging" === e && (this.size.top += .5 * this.fontOptions.size, 
                    this.size.top += 4, this.size.yLine += 4), this.labelDirty = !1;
                }
            }, {
                key: "_processLabel",
                value: function(a, b) {
                    var c = 0, d = [ "" ], e = 0;
                    if (void 0 !== this.nodeOptions.label) {
                        d = String(this.nodeOptions.label).split("\n"), e = d.length, a.font = (b && this.nodeOptions.labelHighlightBold ? "bold " : "") + this.fontOptions.size + "px " + this.fontOptions.face, 
                        c = a.measureText(d[0]).width;
                        for (var f = 1; e > f; f++) {
                            var g = a.measureText(d[f]).width;
                            c = g > c ? g : c;
                        }
                    }
                    return this.lines = d, this.lineCount = e, c;
                }
            } ], [ {
                key: "parseOptions",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                    if ("string" == typeof b.font) {
                        var d = b.font.split(" ");
                        a.size = d[0].replace("px", ""), a.face = d[1], a.color = d[2];
                    } else "object" === f(b.font) && h.fillIfDefined(a, b.font, c);
                    a.size = Number(a.size);
                }
            } ]), a;
        }();
        b["default"] = i;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a, b) {
                    if (void 0 === this.width) {
                        var c = 5, d = this.labelModule.getTextSize(a, b);
                        this.width = d.width + 2 * c, this.height = d.height + 2 * c, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(a, d), this.left = b - this.width / 2, this.top = c - this.height / 2;
                    var f = this.options.borderWidth, g = this.options.borderWidthSelected || 2 * this.options.borderWidth;
                    a.strokeStyle = d ? this.options.color.highlight.border : e ? this.options.color.hover.border : this.options.color.border, 
                    a.lineWidth = d ? g : f, a.lineWidth /= this.body.view.scale, a.lineWidth = Math.min(this.width, a.lineWidth), 
                    a.fillStyle = d ? this.options.color.highlight.background : e ? this.options.color.hover.background : this.options.color.background;
                    var h = this.options.shapeProperties.borderRadius;
                    a.roundRect(this.left, this.top, this.width, this.height, h), this.enableShadow(a), 
                    a.fill(), this.disableShadow(a), a.save(), f > 0 && (this.enableBorderDashes(a), 
                    a.stroke(), this.disableBorderDashes(a)), a.restore(), this.updateBoundingBox(b, c, a, d), 
                    this.labelModule.draw(a, b, c, d);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b, c, d) {
                    this.resize(c, d), this.left = a - .5 * this.width, this.top = b - .5 * this.height;
                    var e = this.options.shapeProperties.borderRadius;
                    this.boundingBox.left = this.left - e, this.boundingBox.top = this.top - e, this.boundingBox.bottom = this.top + this.height + e, 
                    this.boundingBox.right = this.left + this.width + e;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    this.resize(a);
                    var c = this.options.borderWidth;
                    return Math.min(Math.abs(this.width / 2 / Math.cos(b)), Math.abs(this.height / 2 / Math.sin(b))) + c;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = d, this.labelModule = e, this.setOptions(b), this.top = void 0, 
                this.left = void 0, this.height = void 0, this.width = void 0, this.radius = void 0, 
                this.boundingBox = {
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0
                };
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "_distanceToBorder",
                value: function(a, b) {
                    var c = this.options.borderWidth;
                    return this.resize(a), Math.min(Math.abs(this.width / 2 / Math.cos(b)), Math.abs(this.height / 2 / Math.sin(b))) + c;
                }
            }, {
                key: "enableShadow",
                value: function(a) {
                    this.options.shadow.enabled === !0 && (a.shadowColor = this.options.shadow.color, 
                    a.shadowBlur = this.options.shadow.size, a.shadowOffsetX = this.options.shadow.x, 
                    a.shadowOffsetY = this.options.shadow.y);
                }
            }, {
                key: "disableShadow",
                value: function(a) {
                    this.options.shadow.enabled === !0 && (a.shadowColor = "rgba(0,0,0,0)", a.shadowBlur = 0, 
                    a.shadowOffsetX = 0, a.shadowOffsetY = 0);
                }
            }, {
                key: "enableBorderDashes",
                value: function(a) {
                    if (this.options.shapeProperties.borderDashes !== !1) if (void 0 !== a.setLineDash) {
                        var b = this.options.shapeProperties.borderDashes;
                        b === !0 && (b = [ 5, 15 ]), a.setLineDash(b);
                    } else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."), 
                    this.options.shapeProperties.borderDashes = !1;
                }
            }, {
                key: "disableBorderDashes",
                value: function(a) {
                    this.options.shapeProperties.borderDashes !== !1 && (void 0 !== a.setLineDash ? a.setLineDash([ 0 ]) : (console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."), 
                    this.options.shapeProperties.borderDashes = !1));
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(67), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a, b) {
                    if (void 0 === this.width) {
                        var c = 5, d = this.labelModule.getTextSize(a, b), e = Math.max(d.width, d.height) + 2 * c;
                        this.options.size = e / 2, this.width = e, this.height = e, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(a, d), this.left = b - this.width / 2, this.top = c - this.height / 2, 
                    this._drawRawCircle(a, b, c, d, e, this.options.size), this.boundingBox.top = c - this.options.size, 
                    this.boundingBox.left = b - this.options.size, this.boundingBox.right = b + this.options.size, 
                    this.boundingBox.bottom = c + this.options.size, this.updateBoundingBox(b, c), this.labelModule.draw(a, b, c, d);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b) {
                    this.boundingBox.top = b - this.options.size, this.boundingBox.left = a - this.options.size, 
                    this.boundingBox.right = a + this.options.size, this.boundingBox.bottom = b + this.options.size;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this.resize(a), .5 * this.width;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                e(this, b);
                var g = f(this, Object.getPrototypeOf(b).call(this, a, c, d));
                return g.labelOffset = 0, g.imageLoaded = !1, g;
            }
            return g(b, a), h(b, [ {
                key: "setOptions",
                value: function(a, b) {
                    this.options = a, b && (this.imageObj = b);
                }
            }, {
                key: "_resizeImage",
                value: function() {
                    var a = !1;
                    if (this.imageObj.width && this.imageObj.height ? this.imageLoaded === !1 && (this.imageLoaded = !0, 
                    a = !0) : this.imageLoaded = !1, !this.width || !this.height || a === !0) {
                        var b, c, d;
                        this.imageObj.width && this.imageObj.height && (b = 0, c = 0), this.options.shapeProperties.useImageSize === !1 ? this.imageObj.width > this.imageObj.height ? (d = this.imageObj.width / this.imageObj.height, 
                        b = 2 * this.options.size * d || this.imageObj.width, c = 2 * this.options.size || this.imageObj.height) : (d = this.imageObj.width && this.imageObj.height ? this.imageObj.height / this.imageObj.width : 1, 
                        b = 2 * this.options.size, c = 2 * this.options.size * d) : (b = this.imageObj.width, 
                        c = this.imageObj.height), this.width = b, this.height = c, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "_drawRawCircle",
                value: function(a, b, c, d, e, f) {
                    var g = this.options.borderWidth, h = this.options.borderWidthSelected || 2 * this.options.borderWidth, i = (d ? h : g) / this.body.view.scale;
                    a.lineWidth = Math.min(this.width, i), a.strokeStyle = d ? this.options.color.highlight.border : e ? this.options.color.hover.border : this.options.color.border, 
                    a.fillStyle = d ? this.options.color.highlight.background : e ? this.options.color.hover.background : this.options.color.background, 
                    a.circle(b, c, f), this.enableShadow(a), a.fill(), this.disableShadow(a), a.save(), 
                    i > 0 && (this.enableBorderDashes(a), a.stroke(), this.disableBorderDashes(a)), 
                    a.restore();
                }
            }, {
                key: "_drawImageAtPosition",
                value: function(a) {
                    if (0 != this.imageObj.width) {
                        a.globalAlpha = 1, this.enableShadow(a);
                        var b = this.imageObj.width / this.width / this.body.view.scale;
                        if (b > 2 && this.options.shapeProperties.interpolation === !0) {
                            var c = this.imageObj.width, d = this.imageObj.height, e = document.createElement("canvas");
                            e.width = c, e.height = c;
                            var f = e.getContext("2d");
                            b *= .5, c *= .5, d *= .5, f.drawImage(this.imageObj, 0, 0, c, d);
                            for (var g = 0, h = 1; b > 2 && 4 > h; ) f.drawImage(e, g, 0, c, d, g + c, 0, c / 2, d / 2), 
                            g += c, b *= .5, c *= .5, d *= .5, h += 1;
                            a.drawImage(e, g, 0, c, d, this.left, this.top, this.width, this.height);
                        } else a.drawImage(this.imageObj, this.left, this.top, this.width, this.height);
                        this.disableShadow(a);
                    }
                }
            }, {
                key: "_drawImageLabel",
                value: function(a, b, c, d) {
                    var e, f = 0;
                    if (void 0 !== this.height) {
                        f = .5 * this.height;
                        var g = this.labelModule.getTextSize(a);
                        g.lineCount >= 1 && (f += g.height / 2);
                    }
                    e = c + f, this.options.label && (this.labelOffset = f), this.labelModule.draw(a, b, e, d, "hanging");
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(67), j = d(i), k = function(a) {
            function b(a, c, d, g) {
                e(this, b);
                var h = f(this, Object.getPrototypeOf(b).call(this, a, c, d));
                return h.imageObj = g, h._swapToImageResizeWhenImageLoaded = !0, h;
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function() {
                    if (void 0 === this.imageObj.src || void 0 === this.imageObj.width || void 0 === this.imageObj.height) {
                        if (!this.width) {
                            var a = 2 * this.options.size;
                            this.width = a, this.height = a, this._swapToImageResizeWhenImageLoaded = !0, this.radius = .5 * this.width;
                        }
                    } else this._swapToImageResizeWhenImageLoaded && (this.width = void 0, this.height = void 0, 
                    this._swapToImageResizeWhenImageLoaded = !1), this._resizeImage();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(), this.left = b - this.width / 2, this.top = c - this.height / 2;
                    var f = Math.min(.5 * this.height, .5 * this.width);
                    this._drawRawCircle(a, b, c, d, e, f), a.save(), a.clip(), this._drawImageAtPosition(a), 
                    a.restore(), this._drawImageLabel(a, b, c, d), this.updateBoundingBox(b, c);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b) {
                    this.boundingBox.top = b - this.options.size, this.boundingBox.left = a - this.options.size, 
                    this.boundingBox.right = a + this.options.size, this.boundingBox.bottom = b + this.options.size, 
                    this.boundingBox.left = Math.min(this.boundingBox.left, this.labelModule.size.left), 
                    this.boundingBox.right = Math.max(this.boundingBox.right, this.labelModule.size.left + this.labelModule.size.width), 
                    this.boundingBox.bottom = Math.max(this.boundingBox.bottom, this.boundingBox.bottom + this.labelOffset);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this.resize(a), .5 * this.width;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a, b) {
                    if (void 0 === this.width) {
                        var c = 5, d = this.labelModule.getTextSize(a, b), e = d.width + 2 * c;
                        this.width = e, this.height = e, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(a, d), this.left = b - this.width / 2, this.top = c - this.height / 2;
                    var f = this.options.borderWidth, g = this.options.borderWidthSelected || 2 * this.options.borderWidth, h = (d ? g : f) / this.body.view.scale;
                    a.lineWidth = Math.min(this.width, h), a.strokeStyle = d ? this.options.color.highlight.border : e ? this.options.color.hover.border : this.options.color.border, 
                    a.fillStyle = d ? this.options.color.highlight.background : e ? this.options.color.hover.background : this.options.color.background, 
                    a.database(b - this.width / 2, c - .5 * this.height, this.width, this.height), this.enableShadow(a), 
                    a.fill(), this.disableShadow(a), a.save(), h > 0 && (this.enableBorderDashes(a), 
                    a.stroke(), this.disableBorderDashes(a)), a.restore(), this.updateBoundingBox(b, c, a, d), 
                    this.labelModule.draw(a, b, c, d);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b, c, d) {
                    this.resize(c, d), this.left = a - .5 * this.width, this.top = b - .5 * this.height, 
                    this.boundingBox.left = this.left, this.boundingBox.top = this.top, this.boundingBox.bottom = this.top + this.height, 
                    this.boundingBox.right = this.left + this.width;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "diamond", 4, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_resizeShape",
                value: function() {
                    if (void 0 === this.width) {
                        var a = 2 * this.options.size;
                        this.width = a, this.height = a, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "_drawShape",
                value: function(a, b, c, d, e, f, g) {
                    this._resizeShape(), this.left = d - this.width / 2, this.top = e - this.height / 2;
                    var h = this.options.borderWidth, i = this.options.borderWidthSelected || 2 * this.options.borderWidth, j = (f ? i : h) / this.body.view.scale;
                    if (a.lineWidth = Math.min(this.width, j), a.strokeStyle = f ? this.options.color.highlight.border : g ? this.options.color.hover.border : this.options.color.border, 
                    a.fillStyle = f ? this.options.color.highlight.background : g ? this.options.color.hover.background : this.options.color.background, 
                    a[b](d, e, this.options.size), this.enableShadow(a), a.fill(), this.disableShadow(a), 
                    a.save(), j > 0 && (this.enableBorderDashes(a), a.stroke(), this.disableBorderDashes(a)), 
                    a.restore(), void 0 !== this.options.label) {
                        var k = e + .5 * this.height + 3;
                        this.labelModule.draw(a, d, k, f, "hanging");
                    }
                    this.updateBoundingBox(d, e);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b) {
                    this.boundingBox.top = b - this.options.size, this.boundingBox.left = a - this.options.size, 
                    this.boundingBox.right = a + this.options.size, this.boundingBox.bottom = b + this.options.size, 
                    void 0 !== this.options.label && this.labelModule.size.width > 0 && (this.boundingBox.left = Math.min(this.boundingBox.left, this.labelModule.size.left), 
                    this.boundingBox.right = Math.max(this.boundingBox.right, this.labelModule.size.left + this.labelModule.size.width), 
                    this.boundingBox.bottom = Math.max(this.boundingBox.bottom, this.boundingBox.bottom + this.labelModule.size.height + 3));
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "circle", 2, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this.resize(a), this.options.size;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a, b) {
                    if (void 0 === this.width) {
                        var c = this.labelModule.getTextSize(a, b);
                        this.width = 1.5 * c.width, this.height = 2 * c.height, this.width < this.height && (this.width = this.height), 
                        this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(a, d), this.left = b - .5 * this.width, this.top = c - .5 * this.height;
                    var f = this.options.borderWidth, g = this.options.borderWidthSelected || 2 * this.options.borderWidth, h = (d ? g : f) / this.body.view.scale;
                    a.lineWidth = Math.min(this.width, h), a.strokeStyle = d ? this.options.color.highlight.border : e ? this.options.color.hover.border : this.options.color.border, 
                    a.fillStyle = d ? this.options.color.highlight.background : e ? this.options.color.hover.background : this.options.color.background, 
                    a.ellipse(this.left, this.top, this.width, this.height), this.enableShadow(a), a.fill(), 
                    this.disableShadow(a), a.save(), h > 0 && (this.enableBorderDashes(a), a.stroke(), 
                    this.disableBorderDashes(a)), a.restore(), this.updateBoundingBox(b, c, a, d), this.labelModule.draw(a, b, c, d);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b, c, d) {
                    this.resize(c, d), this.left = a - .5 * this.width, this.top = b - .5 * this.height, 
                    this.boundingBox.left = this.left, this.boundingBox.top = this.top, this.boundingBox.bottom = this.top + this.height, 
                    this.boundingBox.right = this.left + this.width;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    this.resize(a);
                    var c = .5 * this.width, d = .5 * this.height, e = Math.sin(b) * c, f = Math.cos(b) * d;
                    return c * d / Math.sqrt(e * e + f * f);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    if (void 0 === this.width) {
                        var b = 5, c = {
                            width: Number(this.options.icon.size),
                            height: Number(this.options.icon.size)
                        };
                        this.width = c.width + 2 * b, this.height = c.height + 2 * b, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    if (this.resize(a), this.options.icon.size = this.options.icon.size || 50, this.left = b - .5 * this.width, 
                    this.top = c - .5 * this.height, this._icon(a, b, c, d), void 0 !== this.options.label) {
                        var f = 5;
                        this.labelModule.draw(a, b, c + .5 * this.height + f, d);
                    }
                    this.updateBoundingBox(b, c);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b) {
                    if (this.boundingBox.top = b - .5 * this.options.icon.size, this.boundingBox.left = a - .5 * this.options.icon.size, 
                    this.boundingBox.right = a + .5 * this.options.icon.size, this.boundingBox.bottom = b + .5 * this.options.icon.size, 
                    void 0 !== this.options.label && this.labelModule.size.width > 0) {
                        var c = 5;
                        this.boundingBox.left = Math.min(this.boundingBox.left, this.labelModule.size.left), 
                        this.boundingBox.right = Math.max(this.boundingBox.right, this.labelModule.size.left + this.labelModule.size.width), 
                        this.boundingBox.bottom = Math.max(this.boundingBox.bottom, this.boundingBox.bottom + this.labelModule.size.height + c);
                    }
                }
            }, {
                key: "_icon",
                value: function(a, b, c, d) {
                    var e = Number(this.options.icon.size);
                    void 0 !== this.options.icon.code ? (a.font = (d ? "bold " : "") + e + "px " + this.options.icon.face, 
                    a.fillStyle = this.options.icon.color || "black", a.textAlign = "center", a.textBaseline = "middle", 
                    this.enableShadow(a), a.fillText(this.options.icon.code, b, c), this.disableShadow(a)) : console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.");
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(67), j = d(i), k = function(a) {
            function b(a, c, d, g) {
                e(this, b);
                var h = f(this, Object.getPrototypeOf(b).call(this, a, c, d));
                return h.imageObj = g, h;
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function() {
                    this._resizeImage();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    if (this.resize(), this.left = b - this.width / 2, this.top = c - this.height / 2, 
                    this.options.shapeProperties.useBorderWithImage === !0) {
                        var f = this.options.borderWidth, g = this.options.borderWidthSelected || 2 * this.options.borderWidth, h = (d ? g : f) / this.body.view.scale;
                        a.lineWidth = Math.min(this.width, h), a.beginPath(), a.strokeStyle = d ? this.options.color.highlight.border : e ? this.options.color.hover.border : this.options.color.border, 
                        a.fillStyle = d ? this.options.color.highlight.background : e ? this.options.color.hover.background : this.options.color.background, 
                        a.rect(this.left - .5 * a.lineWidth, this.top - .5 * a.lineWidth, this.width + a.lineWidth, this.height + a.lineWidth), 
                        a.fill(), a.save(), h > 0 && (this.enableBorderDashes(a), a.stroke(), this.disableBorderDashes(a)), 
                        a.restore(), a.closePath();
                    }
                    this._drawImageAtPosition(a), this._drawImageLabel(a, b, c, d || e), this.updateBoundingBox(b, c);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b) {
                    this.resize(), this.left = a - this.width / 2, this.top = b - this.height / 2, this.boundingBox.top = this.top, 
                    this.boundingBox.left = this.left, this.boundingBox.right = this.left + this.width, 
                    this.boundingBox.bottom = this.top + this.height, void 0 !== this.options.label && this.labelModule.size.width > 0 && (this.boundingBox.left = Math.min(this.boundingBox.left, this.labelModule.size.left), 
                    this.boundingBox.right = Math.max(this.boundingBox.right, this.labelModule.size.left + this.labelModule.size.width), 
                    this.boundingBox.bottom = Math.max(this.boundingBox.bottom, this.boundingBox.bottom + this.labelOffset));
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function() {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "square", 2, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "star", 4, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(65), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a, b) {
                    if (void 0 === this.width) {
                        var c = 5, d = this.labelModule.getTextSize(a, b);
                        this.width = d.width + 2 * c, this.height = d.height + 2 * c, this.radius = .5 * this.width;
                    }
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this.resize(a, d || e), this.left = b - this.width / 2, this.top = c - this.height / 2, 
                    this.enableShadow(a), this.labelModule.draw(a, b, c, d || e), this.disableShadow(a), 
                    this.updateBoundingBox(b, c, a, d);
                }
            }, {
                key: "updateBoundingBox",
                value: function(a, b, c, d) {
                    this.resize(c, d), this.left = a - this.width / 2, this.top = b - this.height / 2, 
                    this.boundingBox.top = this.top, this.boundingBox.left = this.left, this.boundingBox.right = this.left + this.width, 
                    this.boundingBox.bottom = this.top + this.height;
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "triangle", 3, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(71), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "resize",
                value: function(a) {
                    this._resizeShape();
                }
            }, {
                key: "draw",
                value: function(a, b, c, d, e) {
                    this._drawShape(a, "triangleDown", 3, b, c, d, e);
                }
            }, {
                key: "distanceToBorder",
                value: function(a, b) {
                    return this._distanceToBorder(a, b);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(82), h = d(g), i = c(63), j = d(i), k = c(1), l = c(8), m = c(10), n = function() {
            function a(b, c, d) {
                var f = this;
                e(this, a), this.body = b, this.images = c, this.groups = d, this.body.functions.createEdge = this.create.bind(this), 
                this.edgesListeners = {
                    add: function(a, b) {
                        f.add(b.items);
                    },
                    update: function(a, b) {
                        f.update(b.items);
                    },
                    remove: function(a, b) {
                        f.remove(b.items);
                    }
                }, this.options = {}, this.defaultOptions = {
                    arrows: {
                        to: {
                            enabled: !1,
                            scaleFactor: 1
                        },
                        middle: {
                            enabled: !1,
                            scaleFactor: 1
                        },
                        from: {
                            enabled: !1,
                            scaleFactor: 1
                        }
                    },
                    arrowStrikethrough: !0,
                    color: {
                        color: "#848484",
                        highlight: "#848484",
                        hover: "#848484",
                        inherit: "from",
                        opacity: 1
                    },
                    dashes: !1,
                    font: {
                        color: "#343434",
                        size: 14,
                        face: "arial",
                        background: "none",
                        strokeWidth: 2,
                        strokeColor: "#ffffff",
                        align: "horizontal"
                    },
                    hidden: !1,
                    hoverWidth: 1.5,
                    label: void 0,
                    labelHighlightBold: !0,
                    length: void 0,
                    physics: !0,
                    scaling: {
                        min: 1,
                        max: 15,
                        label: {
                            enabled: !0,
                            min: 14,
                            max: 30,
                            maxVisible: 30,
                            drawThreshold: 5
                        },
                        customScalingFunction: function(a, b, c, d) {
                            if (b === a) return .5;
                            var e = 1 / (b - a);
                            return Math.max(0, (d - a) * e);
                        }
                    },
                    selectionWidth: 1.5,
                    selfReferenceSize: 20,
                    shadow: {
                        enabled: !1,
                        color: "rgba(0,0,0,0.5)",
                        size: 10,
                        x: 5,
                        y: 5
                    },
                    smooth: {
                        enabled: !0,
                        type: "dynamic",
                        forceDirection: "none",
                        roundness: .5
                    },
                    title: void 0,
                    width: 1,
                    value: void 0
                }, k.extend(this.options, this.defaultOptions), this.bindEventListeners();
            }
            return f(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("_forceDisableDynamicCurves", function(b) {
                        "dynamic" === b && (b = "continuous");
                        var c = !1;
                        for (var d in a.body.edges) if (a.body.edges.hasOwnProperty(d)) {
                            var e = a.body.edges[d], f = a.body.data.edges._data[d];
                            if (void 0 !== f) {
                                var g = f.smooth;
                                void 0 !== g && g.enabled === !0 && "dynamic" === g.type && (void 0 === b ? e.setOptions({
                                    smooth: !1
                                }) : e.setOptions({
                                    smooth: {
                                        type: b
                                    }
                                }), c = !0);
                            }
                        }
                        c === !0 && a.body.emitter.emit("_dataChanged");
                    }), this.body.emitter.on("_dataUpdated", function() {
                        a.reconnectEdges(), a.markAllEdgesAsDirty();
                    }), this.body.emitter.on("refreshEdges", this.refresh.bind(this)), this.body.emitter.on("refresh", this.refresh.bind(this)), 
                    this.body.emitter.on("destroy", function() {
                        k.forEach(a.edgesListeners, function(b, c) {
                            a.body.data.edges && a.body.data.edges.off(c, b);
                        }), delete a.body.functions.createEdge, delete a.edgesListeners.add, delete a.edgesListeners.update, 
                        delete a.edgesListeners.remove, delete a.edgesListeners;
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        h["default"].parseOptions(this.options, a), void 0 !== a.color && this.markAllEdgesAsDirty();
                        var b = !1;
                        if (void 0 !== a.smooth) for (var c in this.body.edges) this.body.edges.hasOwnProperty(c) && (b = this.body.edges[c].updateEdgeType() || b);
                        if (void 0 !== a.font) {
                            j["default"].parseOptions(this.options.font, a);
                            for (var d in this.body.edges) this.body.edges.hasOwnProperty(d) && this.body.edges[d].updateLabelModule();
                        }
                        void 0 === a.hidden && void 0 === a.physics && b !== !0 || this.body.emitter.emit("_dataChanged");
                    }
                }
            }, {
                key: "setData",
                value: function(a) {
                    var b = this, c = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], d = this.body.data.edges;
                    if (a instanceof l || a instanceof m) this.body.data.edges = a; else if (Array.isArray(a)) this.body.data.edges = new l(), 
                    this.body.data.edges.add(a); else {
                        if (a) throw new TypeError("Array or DataSet expected");
                        this.body.data.edges = new l();
                    }
                    if (d && k.forEach(this.edgesListeners, function(a, b) {
                        d.off(b, a);
                    }), this.body.edges = {}, this.body.data.edges) {
                        k.forEach(this.edgesListeners, function(a, c) {
                            b.body.data.edges.on(c, a);
                        });
                        var e = this.body.data.edges.getIds();
                        this.add(e, !0);
                    }
                    c === !1 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "add",
                value: function(a) {
                    for (var b = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], c = this.body.edges, d = this.body.data.edges, e = 0; e < a.length; e++) {
                        var f = a[e], g = c[f];
                        g && g.disconnect();
                        var h = d.get(f, {
                            showInternalIds: !0
                        });
                        c[f] = this.create(h);
                    }
                    b === !1 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "update",
                value: function(a) {
                    for (var b = this.body.edges, c = this.body.data.edges, d = !1, e = 0; e < a.length; e++) {
                        var f = a[e], g = c.get(f), h = b[f];
                        void 0 !== h ? (h.disconnect(), d = h.setOptions(g) || d, h.connect()) : (this.body.edges[f] = this.create(g), 
                        d = !0);
                    }
                    d === !0 ? this.body.emitter.emit("_dataChanged") : this.body.emitter.emit("_dataUpdated");
                }
            }, {
                key: "remove",
                value: function(a) {
                    for (var b = this.body.edges, c = 0; c < a.length; c++) {
                        var d = a[c], e = b[d];
                        void 0 !== e && (e.cleanup(), e.disconnect(), delete b[d]);
                    }
                    this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "refresh",
                value: function() {
                    var a = this.body.edges;
                    for (var b in a) {
                        var c = void 0;
                        a.hasOwnProperty(b) && (c = a[b]);
                        var d = this.body.data.edges._data[b];
                        void 0 !== c && void 0 !== d && c.setOptions(d);
                    }
                }
            }, {
                key: "create",
                value: function(a) {
                    return new h["default"](a, this.body, this.options);
                }
            }, {
                key: "markAllEdgesAsDirty",
                value: function() {
                    for (var a in this.body.edges) this.body.edges[a].edgeType.colorDirty = !0;
                }
            }, {
                key: "reconnectEdges",
                value: function() {
                    var a, b = this.body.nodes, c = this.body.edges;
                    for (a in b) b.hasOwnProperty(a) && (b[a].edges = []);
                    for (a in c) if (c.hasOwnProperty(a)) {
                        var d = c[a];
                        d.from = null, d.to = null, d.connect();
                    }
                }
            }, {
                key: "getConnectedNodes",
                value: function(a) {
                    var b = [];
                    if (void 0 !== this.body.edges[a]) {
                        var c = this.body.edges[a];
                        c.fromId && b.push(c.fromId), c.toId && b.push(c.toId);
                    }
                    return b;
                }
            } ]), a;
        }();
        b["default"] = n;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, g = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), h = c(63), i = d(h), j = c(83), k = d(j), l = c(87), m = d(l), n = c(88), o = d(n), p = c(89), q = d(p), r = c(1), s = function() {
            function a(b, c, d) {
                if (e(this, a), void 0 === c) throw "No body provided";
                this.options = r.bridgeObject(d), this.globalOptions = d, this.body = c, this.id = void 0, 
                this.fromId = void 0, this.toId = void 0, this.selected = !1, this.hover = !1, this.labelDirty = !0, 
                this.colorDirty = !0, this.baseWidth = this.options.width, this.baseFontSize = this.options.font.size, 
                this.from = void 0, this.to = void 0, this.edgeType = void 0, this.connected = !1, 
                this.labelModule = new i["default"](this.body, this.options, !0), this.setOptions(b);
            }
            return g(a, [ {
                key: "setOptions",
                value: function(b) {
                    if (b) {
                        this.colorDirty = !0, a.parseOptions(this.options, b, !0, this.globalOptions), void 0 !== b.id && (this.id = b.id), 
                        void 0 !== b.from && (this.fromId = b.from), void 0 !== b.to && (this.toId = b.to), 
                        void 0 !== b.title && (this.title = b.title), void 0 !== b.value && (b.value = parseFloat(b.value)), 
                        this.updateLabelModule();
                        var c = this.updateEdgeType();
                        return this._setInteractionWidths(), this.connect(), void 0 === b.hidden && void 0 === b.physics || (c = !0), 
                        c;
                    }
                }
            }, {
                key: "updateLabelModule",
                value: function() {
                    this.labelModule.setOptions(this.options, !0), void 0 !== this.labelModule.baseSize && (this.baseFontSize = this.labelModule.baseSize);
                }
            }, {
                key: "updateEdgeType",
                value: function() {
                    var a = !1, b = !0, c = this.options.smooth;
                    return void 0 !== this.edgeType && (this.edgeType instanceof m["default"] && c.enabled === !0 && "dynamic" === c.type && (b = !1), 
                    this.edgeType instanceof k["default"] && c.enabled === !0 && "cubicBezier" === c.type && (b = !1), 
                    this.edgeType instanceof o["default"] && c.enabled === !0 && "dynamic" !== c.type && "cubicBezier" !== c.type && (b = !1), 
                    this.edgeType instanceof q["default"] && c.enabled === !1 && (b = !1), b === !0 && (a = this.cleanup())), 
                    b === !0 ? this.options.smooth.enabled === !0 ? "dynamic" === this.options.smooth.type ? (a = !0, 
                    this.edgeType = new m["default"](this.options, this.body, this.labelModule)) : "cubicBezier" === this.options.smooth.type ? this.edgeType = new k["default"](this.options, this.body, this.labelModule) : this.edgeType = new o["default"](this.options, this.body, this.labelModule) : this.edgeType = new q["default"](this.options, this.body, this.labelModule) : this.edgeType.setOptions(this.options), 
                    a;
                }
            }, {
                key: "connect",
                value: function() {
                    this.disconnect(), this.from = this.body.nodes[this.fromId] || void 0, this.to = this.body.nodes[this.toId] || void 0, 
                    this.connected = void 0 !== this.from && void 0 !== this.to, this.connected === !0 ? (this.from.attachEdge(this), 
                    this.to.attachEdge(this)) : (this.from && this.from.detachEdge(this), this.to && this.to.detachEdge(this)), 
                    this.edgeType.connect();
                }
            }, {
                key: "disconnect",
                value: function() {
                    this.from && (this.from.detachEdge(this), this.from = void 0), this.to && (this.to.detachEdge(this), 
                    this.to = void 0), this.connected = !1;
                }
            }, {
                key: "getTitle",
                value: function() {
                    return this.title;
                }
            }, {
                key: "isSelected",
                value: function() {
                    return this.selected;
                }
            }, {
                key: "getValue",
                value: function() {
                    return this.options.value;
                }
            }, {
                key: "setValueRange",
                value: function(a, b, c) {
                    if (void 0 !== this.options.value) {
                        var d = this.options.scaling.customScalingFunction(a, b, c, this.options.value), e = this.options.scaling.max - this.options.scaling.min;
                        if (this.options.scaling.label.enabled === !0) {
                            var f = this.options.scaling.label.max - this.options.scaling.label.min;
                            this.options.font.size = this.options.scaling.label.min + d * f;
                        }
                        this.options.width = this.options.scaling.min + d * e;
                    } else this.options.width = this.baseWidth, this.options.font.size = this.baseFontSize;
                    this._setInteractionWidths(), this.updateLabelModule();
                }
            }, {
                key: "_setInteractionWidths",
                value: function() {
                    "function" == typeof this.options.hoverWidth ? this.edgeType.hoverWidth = this.options.hoverWidth(this.options.width) : this.edgeType.hoverWidth = this.options.hoverWidth + this.options.width, 
                    "function" == typeof this.options.selectionWidth ? this.edgeType.selectionWidth = this.options.selectionWidth(this.options.width) : this.edgeType.selectionWidth = this.options.selectionWidth + this.options.width;
                }
            }, {
                key: "draw",
                value: function(a) {
                    var b = this.edgeType.getViaNode(), c = {};
                    this.edgeType.fromPoint = this.edgeType.from, this.edgeType.toPoint = this.edgeType.to, 
                    this.options.arrows.from.enabled === !0 && (c.from = this.edgeType.getArrowData(a, "from", b, this.selected, this.hover), 
                    this.options.arrowStrikethrough === !1 && (this.edgeType.fromPoint = c.from.core)), 
                    this.options.arrows.to.enabled === !0 && (c.to = this.edgeType.getArrowData(a, "to", b, this.selected, this.hover), 
                    this.options.arrowStrikethrough === !1 && (this.edgeType.toPoint = c.to.core)), 
                    this.options.arrows.middle.enabled === !0 && (c.middle = this.edgeType.getArrowData(a, "middle", b, this.selected, this.hover)), 
                    this.edgeType.drawLine(a, this.selected, this.hover, b), this.drawArrows(a, c), 
                    this.drawLabel(a, b);
                }
            }, {
                key: "drawArrows",
                value: function(a, b) {
                    this.options.arrows.from.enabled === !0 && this.edgeType.drawArrowHead(a, this.selected, this.hover, b.from), 
                    this.options.arrows.middle.enabled === !0 && this.edgeType.drawArrowHead(a, this.selected, this.hover, b.middle), 
                    this.options.arrows.to.enabled === !0 && this.edgeType.drawArrowHead(a, this.selected, this.hover, b.to);
                }
            }, {
                key: "drawLabel",
                value: function(a, b) {
                    if (void 0 !== this.options.label) {
                        var c = this.from, d = this.to, e = this.from.selected || this.to.selected || this.selected;
                        if (c.id != d.id) {
                            this.labelModule.pointToSelf = !1;
                            var f = this.edgeType.getPoint(.5, b);
                            a.save(), "horizontal" !== this.options.font.align && (this.labelModule.calculateLabelSize(a, e, f.x, f.y), 
                            a.translate(f.x, this.labelModule.size.yLine), this._rotateForLabelAlignment(a)), 
                            this.labelModule.draw(a, f.x, f.y, e), a.restore();
                        } else {
                            this.labelModule.pointToSelf = !0;
                            var g, h, i = this.options.selfReferenceSize;
                            c.shape.width > c.shape.height ? (g = c.x + .5 * c.shape.width, h = c.y - i) : (g = c.x + i, 
                            h = c.y - .5 * c.shape.height), f = this._pointOnCircle(g, h, i, .125), this.labelModule.draw(a, f.x, f.y, e);
                        }
                    }
                }
            }, {
                key: "isOverlappingWith",
                value: function(a) {
                    if (this.connected) {
                        var b = 10, c = this.from.x, d = this.from.y, e = this.to.x, f = this.to.y, g = a.left, h = a.top, i = this.edgeType.getDistanceToEdge(c, d, e, f, g, h);
                        return b > i;
                    }
                    return !1;
                }
            }, {
                key: "_rotateForLabelAlignment",
                value: function(a) {
                    var b = this.from.y - this.to.y, c = this.from.x - this.to.x, d = Math.atan2(b, c);
                    (-1 > d && 0 > c || d > 0 && 0 > c) && (d += Math.PI), a.rotate(d);
                }
            }, {
                key: "_pointOnCircle",
                value: function(a, b, c, d) {
                    var e = 2 * d * Math.PI;
                    return {
                        x: a + c * Math.cos(e),
                        y: b - c * Math.sin(e)
                    };
                }
            }, {
                key: "select",
                value: function() {
                    this.selected = !0;
                }
            }, {
                key: "unselect",
                value: function() {
                    this.selected = !1;
                }
            }, {
                key: "cleanup",
                value: function() {
                    return this.edgeType.cleanup();
                }
            } ], [ {
                key: "parseOptions",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = arguments.length <= 3 || void 0 === arguments[3] ? {} : arguments[3], e = [ "arrowStrikethrough", "id", "from", "hidden", "hoverWidth", "label", "labelHighlightBold", "length", "line", "opacity", "physics", "scaling", "selectionWidth", "selfReferenceSize", "to", "title", "value", "width" ];
                    if (r.selectiveDeepExtend(e, a, b, c), r.mergeOptions(a, b, "smooth", c, d), r.mergeOptions(a, b, "shadow", c, d), 
                    void 0 !== b.dashes && null !== b.dashes ? a.dashes = b.dashes : c === !0 && null === b.dashes && (a.dashes = Object.create(d.dashes)), 
                    void 0 !== b.scaling && null !== b.scaling ? (void 0 !== b.scaling.min && (a.scaling.min = b.scaling.min), 
                    void 0 !== b.scaling.max && (a.scaling.max = b.scaling.max), r.mergeOptions(a.scaling, b.scaling, "label", c, d.scaling)) : c === !0 && null === b.scaling && (a.scaling = Object.create(d.scaling)), 
                    void 0 !== b.arrows && null !== b.arrows) if ("string" == typeof b.arrows) {
                        var g = b.arrows.toLowerCase();
                        -1 != g.indexOf("to") && (a.arrows.to.enabled = !0), -1 != g.indexOf("middle") && (a.arrows.middle.enabled = !0), 
                        -1 != g.indexOf("from") && (a.arrows.from.enabled = !0);
                    } else {
                        if ("object" !== f(b.arrows)) throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:" + JSON.stringify(b.arrows));
                        r.mergeOptions(a.arrows, b.arrows, "to", c, d.arrows), r.mergeOptions(a.arrows, b.arrows, "middle", c, d.arrows), 
                        r.mergeOptions(a.arrows, b.arrows, "from", c, d.arrows);
                    } else c === !0 && null === b.arrows && (a.arrows = Object.create(d.arrows));
                    if (void 0 !== b.color && null !== b.color) if (a.color = r.deepExtend({}, a.color, !0), 
                    r.isString(b.color)) a.color.color = b.color, a.color.highlight = b.color, a.color.hover = b.color, 
                    a.color.inherit = !1; else {
                        var h = !1;
                        void 0 !== b.color.color && (a.color.color = b.color.color, h = !0), void 0 !== b.color.highlight && (a.color.highlight = b.color.highlight, 
                        h = !0), void 0 !== b.color.hover && (a.color.hover = b.color.hover, h = !0), void 0 !== b.color.inherit && (a.color.inherit = b.color.inherit), 
                        void 0 !== b.color.opacity && (a.color.opacity = Math.min(1, Math.max(0, b.color.opacity))), 
                        void 0 === b.color.inherit && h === !0 && (a.color.inherit = !1);
                    } else c === !0 && null === b.color && (a.color = r.bridgeObject(d.color));
                    void 0 !== b.font && null !== b.font ? i["default"].parseOptions(a.font, b) : c === !0 && null === b.font && (a.font = r.bridgeObject(d.font));
                }
            } ]), a;
        }();
        b["default"] = s;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                var c = [], d = !0, e = !1, f = void 0;
                try {
                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value), 
                    !b || c.length !== b); d = !0) ;
                } catch (i) {
                    e = !0, f = i;
                } finally {
                    try {
                        !d && h["return"] && h["return"]();
                    } finally {
                        if (e) throw f;
                    }
                }
                return c;
            }
            return function(b, c) {
                if (Array.isArray(b)) return b;
                if (Symbol.iterator in Object(b)) return a(b, c);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            };
        }(), i = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), j = c(84), k = d(j), l = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), i(b, [ {
                key: "_line",
                value: function(a, b) {
                    var c = b[0], d = b[1];
                    a.beginPath(), a.moveTo(this.fromPoint.x, this.fromPoint.y), void 0 === b || void 0 === c.x ? a.lineTo(this.toPoint.x, this.toPoint.y) : a.bezierCurveTo(c.x, c.y, d.x, d.y, this.toPoint.x, this.toPoint.y), 
                    this.enableShadow(a), a.stroke(), this.disableShadow(a);
                }
            }, {
                key: "_getViaCoordinates",
                value: function() {
                    var a = this.from.x - this.to.x, b = this.from.y - this.to.y, c = void 0, d = void 0, e = void 0, f = void 0, g = this.options.smooth.roundness;
                    return (Math.abs(a) > Math.abs(b) || this.options.smooth.forceDirection === !0 || "horizontal" === this.options.smooth.forceDirection) && "vertical" !== this.options.smooth.forceDirection ? (d = this.from.y, 
                    f = this.to.y, c = this.from.x - g * a, e = this.to.x + g * a) : (d = this.from.y - g * b, 
                    f = this.to.y + g * b, c = this.from.x, e = this.to.x), [ {
                        x: c,
                        y: d
                    }, {
                        x: e,
                        y: f
                    } ];
                }
            }, {
                key: "getViaNode",
                value: function() {
                    return this._getViaCoordinates();
                }
            }, {
                key: "_findBorderPosition",
                value: function(a, b) {
                    return this._findBorderPositionBezier(a, b);
                }
            }, {
                key: "_getDistanceToEdge",
                value: function(a, b, c, d, e, f) {
                    var g = arguments.length <= 6 || void 0 === arguments[6] ? this._getViaCoordinates() : arguments[6], i = h(g, 2), j = i[0], k = i[1];
                    return this._getDistanceToBezierEdge(a, b, c, d, e, f, j, k);
                }
            }, {
                key: "getPoint",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? this._getViaCoordinates() : arguments[1], c = h(b, 2), d = c[0], e = c[1], f = a, g = [];
                    g[0] = Math.pow(1 - f, 3), g[1] = 3 * f * Math.pow(1 - f, 2), g[2] = 3 * Math.pow(f, 2) * (1 - f), 
                    g[3] = Math.pow(f, 3);
                    var i = g[0] * this.fromPoint.x + g[1] * d.x + g[2] * e.x + g[3] * this.toPoint.x, j = g[0] * this.fromPoint.y + g[1] * d.y + g[2] * e.y + g[3] * this.toPoint.y;
                    return {
                        x: i,
                        y: j
                    };
                }
            } ]), b;
        }(k["default"]);
        b["default"] = l;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(85), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_getDistanceToBezierEdge",
                value: function(a, b, c, d, e, f, g, h) {
                    var i = 1e9, j = void 0, k = void 0, l = void 0, m = void 0, n = void 0, o = a, p = b, q = [ 0, 0, 0, 0 ];
                    for (k = 1; 10 > k; k++) l = .1 * k, q[0] = Math.pow(1 - l, 3), q[1] = 3 * l * Math.pow(1 - l, 2), 
                    q[2] = 3 * Math.pow(l, 2) * (1 - l), q[3] = Math.pow(l, 3), m = q[0] * a + q[1] * g.x + q[2] * h.x + q[3] * c, 
                    n = q[0] * b + q[1] * g.y + q[2] * h.y + q[3] * d, k > 0 && (j = this._getDistanceToLine(o, p, m, n, e, f), 
                    i = i > j ? j : i), o = m, p = n;
                    return i;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(86), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_findBorderPositionBezier",
                value: function(a, b) {
                    var c, d, e, f, g, h = arguments.length <= 2 || void 0 === arguments[2] ? this._getViaCoordinates() : arguments[2], i = 10, j = 0, k = 0, l = 1, m = .2, n = this.to, o = !1;
                    for (a.id === this.from.id && (n = this.from, o = !0); l >= k && i > j; ) {
                        var p = .5 * (k + l);
                        if (c = this.getPoint(p, h), d = Math.atan2(n.y - c.y, n.x - c.x), e = n.distanceToBorder(b, d), 
                        f = Math.sqrt(Math.pow(c.x - n.x, 2) + Math.pow(c.y - n.y, 2)), g = e - f, Math.abs(g) < m) break;
                        0 > g ? o === !1 ? k = p : l = p : o === !1 ? l = p : k = p, j++;
                    }
                    return c.t = p, c;
                }
            }, {
                key: "_getDistanceToBezierEdge",
                value: function(a, b, c, d, e, f, g) {
                    var h = 1e9, i = void 0, j = void 0, k = void 0, l = void 0, m = void 0, n = a, o = b;
                    for (j = 1; 10 > j; j++) k = .1 * j, l = Math.pow(1 - k, 2) * a + 2 * k * (1 - k) * g.x + Math.pow(k, 2) * c, 
                    m = Math.pow(1 - k, 2) * b + 2 * k * (1 - k) * g.y + Math.pow(k, 2) * d, j > 0 && (i = this._getDistanceToLine(n, o, l, m, e, f), 
                    h = h > i ? i : h), n = l, o = m;
                    return h;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                var c = [], d = !0, e = !1, f = void 0;
                try {
                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value), 
                    !b || c.length !== b); d = !0) ;
                } catch (i) {
                    e = !0, f = i;
                } finally {
                    try {
                        !d && h["return"] && h["return"]();
                    } finally {
                        if (e) throw f;
                    }
                }
                return c;
            }
            return function(b, c) {
                if (Array.isArray(b)) return b;
                if (Symbol.iterator in Object(b)) return a(b, c);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            };
        }(), f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(1), h = function() {
            function a(b, c, e) {
                d(this, a), this.body = c, this.labelModule = e, this.options = {}, this.setOptions(b), 
                this.colorDirty = !0, this.color = {}, this.selectionWidth = 2, this.hoverWidth = 1.5, 
                this.fromPoint = this.from, this.toPoint = this.to;
            }
            return f(a, [ {
                key: "connect",
                value: function() {
                    this.from = this.body.nodes[this.options.from], this.to = this.body.nodes[this.options.to];
                }
            }, {
                key: "cleanup",
                value: function() {
                    return !1;
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    this.options = a, this.from = this.body.nodes[this.options.from], this.to = this.body.nodes[this.options.to], 
                    this.id = this.options.id;
                }
            }, {
                key: "drawLine",
                value: function(a, b, c, d) {
                    a.strokeStyle = this.getColor(a, b, c), a.lineWidth = this.getLineWidth(b, c), this.options.dashes !== !1 ? this._drawDashedLine(a, d) : this._drawLine(a, d);
                }
            }, {
                key: "_drawLine",
                value: function(a, b, c, d) {
                    if (this.from != this.to) this._line(a, b, c, d); else {
                        var f = this._getCircleData(a), g = e(f, 3), h = g[0], i = g[1], j = g[2];
                        this._circle(a, h, i, j);
                    }
                }
            }, {
                key: "_drawDashedLine",
                value: function(a, b, c, d) {
                    a.lineCap = "round";
                    var f = [ 5, 5 ];
                    if (Array.isArray(this.options.dashes) === !0 && (f = this.options.dashes), void 0 !== a.setLineDash) {
                        if (a.save(), a.setLineDash(f), a.lineDashOffset = 0, this.from != this.to) this._line(a, b); else {
                            var g = this._getCircleData(a), h = e(g, 3), i = h[0], j = h[1], k = h[2];
                            this._circle(a, i, j, k);
                        }
                        a.setLineDash([ 0 ]), a.lineDashOffset = 0, a.restore();
                    } else {
                        if (this.from != this.to) a.dashedLine(this.from.x, this.from.y, this.to.x, this.to.y, f); else {
                            var l = this._getCircleData(a), m = e(l, 3), n = m[0], o = m[1], p = m[2];
                            this._circle(a, n, o, p);
                        }
                        this.enableShadow(a), a.stroke(), this.disableShadow(a);
                    }
                }
            }, {
                key: "findBorderPosition",
                value: function(a, b, c) {
                    return this.from != this.to ? this._findBorderPosition(a, b, c) : this._findBorderPositionCircle(a, b, c);
                }
            }, {
                key: "findBorderPositions",
                value: function(a) {
                    var b = {}, c = {};
                    if (this.from != this.to) b = this._findBorderPosition(this.from, a), c = this._findBorderPosition(this.to, a); else {
                        var d = this._getCircleData(a), f = e(d, 3), g = f[0], h = f[1];
                        f[2];
                        b = this._findBorderPositionCircle(this.from, a, {
                            x: g,
                            y: h,
                            low: .25,
                            high: .6,
                            direction: -1
                        }), c = this._findBorderPositionCircle(this.from, a, {
                            x: g,
                            y: h,
                            low: .6,
                            high: .8,
                            direction: 1
                        });
                    }
                    return {
                        from: b,
                        to: c
                    };
                }
            }, {
                key: "_getCircleData",
                value: function(a) {
                    var b = void 0, c = void 0, d = this.from, e = this.options.selfReferenceSize;
                    return void 0 !== a && void 0 === d.shape.width && d.shape.resize(a), d.shape.width > d.shape.height ? (b = d.x + .5 * d.shape.width, 
                    c = d.y - e) : (b = d.x + e, c = d.y - .5 * d.shape.height), [ b, c, e ];
                }
            }, {
                key: "_pointOnCircle",
                value: function(a, b, c, d) {
                    var e = 2 * d * Math.PI;
                    return {
                        x: a + c * Math.cos(e),
                        y: b - c * Math.sin(e)
                    };
                }
            }, {
                key: "_findBorderPositionCircle",
                value: function(a, b, c) {
                    for (var d = c.x, e = c.y, f = c.low, g = c.high, h = c.direction, i = 10, j = 0, k = this.options.selfReferenceSize, l = void 0, m = void 0, n = void 0, o = void 0, p = void 0, q = .05, r = .5 * (f + g); g >= f && i > j && (r = .5 * (f + g), 
                    l = this._pointOnCircle(d, e, k, r), m = Math.atan2(a.y - l.y, a.x - l.x), n = a.distanceToBorder(b, m), 
                    o = Math.sqrt(Math.pow(l.x - a.x, 2) + Math.pow(l.y - a.y, 2)), p = n - o, !(Math.abs(p) < q)); ) p > 0 ? h > 0 ? f = r : g = r : h > 0 ? g = r : f = r, 
                    j++;
                    return l.t = r, l;
                }
            }, {
                key: "getLineWidth",
                value: function(a, b) {
                    return a === !0 ? Math.max(this.selectionWidth, .3 / this.body.view.scale) : b === !0 ? Math.max(this.hoverWidth, .3 / this.body.view.scale) : Math.max(this.options.width, .3 / this.body.view.scale);
                }
            }, {
                key: "getColor",
                value: function(a, b, c) {
                    var d = this.options.color;
                    if (d.inherit !== !1) {
                        if ("both" === d.inherit && this.from.id !== this.to.id) {
                            var e = a.createLinearGradient(this.from.x, this.from.y, this.to.x, this.to.y), f = void 0, h = void 0;
                            return f = this.from.options.color.highlight.border, h = this.to.options.color.highlight.border, 
                            this.from.selected === !1 && this.to.selected === !1 ? (f = g.overrideOpacity(this.from.options.color.border, this.options.color.opacity), 
                            h = g.overrideOpacity(this.to.options.color.border, this.options.color.opacity)) : this.from.selected === !0 && this.to.selected === !1 ? h = this.to.options.color.border : this.from.selected === !1 && this.to.selected === !0 && (f = this.from.options.color.border), 
                            e.addColorStop(0, f), e.addColorStop(1, h), e;
                        }
                        this.colorDirty === !0 && ("to" === d.inherit ? (this.color.highlight = this.to.options.color.highlight.border, 
                        this.color.hover = this.to.options.color.hover.border, this.color.color = g.overrideOpacity(this.to.options.color.border, d.opacity)) : (this.color.highlight = this.from.options.color.highlight.border, 
                        this.color.hover = this.from.options.color.hover.border, this.color.color = g.overrideOpacity(this.from.options.color.border, d.opacity)));
                    } else this.colorDirty === !0 && (this.color.highlight = d.highlight, this.color.hover = d.hover, 
                    this.color.color = g.overrideOpacity(d.color, d.opacity));
                    return this.colorDirty = !1, b === !0 ? this.color.highlight : c === !0 ? this.color.hover : this.color.color;
                }
            }, {
                key: "_circle",
                value: function(a, b, c, d) {
                    this.enableShadow(a), a.beginPath(), a.arc(b, c, d, 0, 2 * Math.PI, !1), a.stroke(), 
                    this.disableShadow(a);
                }
            }, {
                key: "getDistanceToEdge",
                value: function(a, b, c, d, f, g, h) {
                    var i = 0;
                    if (this.from != this.to) i = this._getDistanceToEdge(a, b, c, d, f, g, h); else {
                        var j = this._getCircleData(), k = e(j, 3), l = k[0], m = k[1], n = k[2], o = l - f, p = m - g;
                        i = Math.abs(Math.sqrt(o * o + p * p) - n);
                    }
                    return this.labelModule.size.left < f && this.labelModule.size.left + this.labelModule.size.width > f && this.labelModule.size.top < g && this.labelModule.size.top + this.labelModule.size.height > g ? 0 : i;
                }
            }, {
                key: "_getDistanceToLine",
                value: function(a, b, c, d, e, f) {
                    var g = c - a, h = d - b, i = g * g + h * h, j = ((e - a) * g + (f - b) * h) / i;
                    j > 1 ? j = 1 : 0 > j && (j = 0);
                    var k = a + j * g, l = b + j * h, m = k - e, n = l - f;
                    return Math.sqrt(m * m + n * n);
                }
            }, {
                key: "getArrowData",
                value: function(a, b, c, d, f) {
                    var g = void 0, h = void 0, i = void 0, j = void 0, k = void 0, l = void 0, m = this.getLineWidth(d, f);
                    if ("from" === b ? (i = this.from, j = this.to, k = .1, l = this.options.arrows.from.scaleFactor) : "to" === b ? (i = this.to, 
                    j = this.from, k = -.1, l = this.options.arrows.to.scaleFactor) : (i = this.to, 
                    j = this.from, l = this.options.arrows.middle.scaleFactor), i != j) if ("middle" !== b) if (this.options.smooth.enabled === !0) {
                        h = this.findBorderPosition(i, a, {
                            via: c
                        });
                        var n = this.getPoint(Math.max(0, Math.min(1, h.t + k)), c);
                        g = Math.atan2(h.y - n.y, h.x - n.x);
                    } else g = Math.atan2(i.y - j.y, i.x - j.x), h = this.findBorderPosition(i, a); else g = Math.atan2(i.y - j.y, i.x - j.x), 
                    h = this.getPoint(.5, c); else {
                        var o = this._getCircleData(a), p = e(o, 3), q = p[0], r = p[1], s = p[2];
                        "from" === b ? (h = this.findBorderPosition(this.from, a, {
                            x: q,
                            y: r,
                            low: .25,
                            high: .6,
                            direction: -1
                        }), g = -2 * h.t * Math.PI + 1.5 * Math.PI + .1 * Math.PI) : "to" === b ? (h = this.findBorderPosition(this.from, a, {
                            x: q,
                            y: r,
                            low: .6,
                            high: 1,
                            direction: 1
                        }), g = -2 * h.t * Math.PI + 1.5 * Math.PI - 1.1 * Math.PI) : (h = this._pointOnCircle(q, r, s, .175), 
                        g = 3.9269908169872414);
                    }
                    var t = 15 * l + 3 * m, u = h.x - .9 * t * Math.cos(g), v = h.y - .9 * t * Math.sin(g), w = {
                        x: u,
                        y: v
                    };
                    return {
                        point: h,
                        core: w,
                        angle: g,
                        length: t
                    };
                }
            }, {
                key: "drawArrowHead",
                value: function(a, b, c, d) {
                    a.strokeStyle = this.getColor(a, b, c), a.fillStyle = a.strokeStyle, a.lineWidth = this.getLineWidth(b, c), 
                    a.arrow(d.point.x, d.point.y, d.angle, d.length), this.enableShadow(a), a.fill(), 
                    this.disableShadow(a);
                }
            }, {
                key: "enableShadow",
                value: function(a) {
                    this.options.shadow.enabled === !0 && (a.shadowColor = this.options.shadow.color, 
                    a.shadowBlur = this.options.shadow.size, a.shadowOffsetX = this.options.shadow.x, 
                    a.shadowOffsetY = this.options.shadow.y);
                }
            }, {
                key: "disableShadow",
                value: function(a) {
                    this.options.shadow.enabled === !0 && (a.shadowColor = "rgba(0,0,0,0)", a.shadowBlur = 0, 
                    a.shadowOffsetX = 0, a.shadowOffsetY = 0);
                }
            } ]), a;
        }();
        b["default"] = h;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(85), j = d(i), k = function(a) {
            function b(a, c, d) {
                e(this, b);
                var g = f(this, Object.getPrototypeOf(b).call(this, a, c, d));
                return g._boundFunction = function() {
                    g.positionBezierNode();
                }, g.body.emitter.on("_repositionBezierNodes", g._boundFunction), g;
            }
            return g(b, a), h(b, [ {
                key: "setOptions",
                value: function(a) {
                    var b = !1;
                    this.options.physics !== a.physics && (b = !0), this.options = a, this.id = this.options.id, 
                    this.from = this.body.nodes[this.options.from], this.to = this.body.nodes[this.options.to], 
                    this.setupSupportNode(), this.connect(), b === !0 && (this.via.setOptions({
                        physics: this.options.physics
                    }), this.positionBezierNode());
                }
            }, {
                key: "connect",
                value: function() {
                    this.from = this.body.nodes[this.options.from], this.to = this.body.nodes[this.options.to], 
                    void 0 === this.from || void 0 === this.to || this.options.physics === !1 ? this.via.setOptions({
                        physics: !1
                    }) : this.from.id === this.to.id ? this.via.setOptions({
                        physics: !1
                    }) : this.via.setOptions({
                        physics: !0
                    });
                }
            }, {
                key: "cleanup",
                value: function() {
                    return this.body.emitter.off("_repositionBezierNodes", this._boundFunction), void 0 !== this.via ? (delete this.body.nodes[this.via.id], 
                    this.via = void 0, !0) : !1;
                }
            }, {
                key: "setupSupportNode",
                value: function() {
                    if (void 0 === this.via) {
                        var a = "edgeId:" + this.id, b = this.body.functions.createNode({
                            id: a,
                            shape: "circle",
                            physics: !0,
                            hidden: !0
                        });
                        this.body.nodes[a] = b, this.via = b, this.via.parentEdgeId = this.id, this.positionBezierNode();
                    }
                }
            }, {
                key: "positionBezierNode",
                value: function() {
                    void 0 !== this.via && void 0 !== this.from && void 0 !== this.to ? (this.via.x = .5 * (this.from.x + this.to.x), 
                    this.via.y = .5 * (this.from.y + this.to.y)) : void 0 !== this.via && (this.via.x = 0, 
                    this.via.y = 0);
                }
            }, {
                key: "_line",
                value: function(a, b) {
                    a.beginPath(), a.moveTo(this.fromPoint.x, this.fromPoint.y), void 0 === b.x ? a.lineTo(this.toPoint.x, this.toPoint.y) : a.quadraticCurveTo(b.x, b.y, this.toPoint.x, this.toPoint.y), 
                    this.enableShadow(a), a.stroke(), this.disableShadow(a);
                }
            }, {
                key: "getViaNode",
                value: function() {
                    return this.via;
                }
            }, {
                key: "getPoint",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? this.via : arguments[1], c = a, d = Math.pow(1 - c, 2) * this.fromPoint.x + 2 * c * (1 - c) * b.x + Math.pow(c, 2) * this.toPoint.x, e = Math.pow(1 - c, 2) * this.fromPoint.y + 2 * c * (1 - c) * b.y + Math.pow(c, 2) * this.toPoint.y;
                    return {
                        x: d,
                        y: e
                    };
                }
            }, {
                key: "_findBorderPosition",
                value: function(a, b) {
                    return this._findBorderPositionBezier(a, b, this.via);
                }
            }, {
                key: "_getDistanceToEdge",
                value: function(a, b, c, d, e, f) {
                    return this._getDistanceToBezierEdge(a, b, c, d, e, f, this.via);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(85), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_line",
                value: function(a, b) {
                    a.beginPath(), a.moveTo(this.fromPoint.x, this.fromPoint.y), void 0 === b.x ? a.lineTo(this.toPoint.x, this.toPoint.y) : a.quadraticCurveTo(b.x, b.y, this.toPoint.x, this.toPoint.y), 
                    this.enableShadow(a), a.stroke(), this.disableShadow(a);
                }
            }, {
                key: "getViaNode",
                value: function() {
                    return this._getViaCoordinates();
                }
            }, {
                key: "_getViaCoordinates",
                value: function() {
                    var a = void 0, b = void 0, c = this.options.smooth.roundness, d = this.options.smooth.type, e = Math.abs(this.from.x - this.to.x), f = Math.abs(this.from.y - this.to.y);
                    if ("discrete" === d || "diagonalCross" === d) Math.abs(this.from.x - this.to.x) <= Math.abs(this.from.y - this.to.y) ? (this.from.y >= this.to.y ? this.from.x <= this.to.x ? (a = this.from.x + c * f, 
                    b = this.from.y - c * f) : this.from.x > this.to.x && (a = this.from.x - c * f, 
                    b = this.from.y - c * f) : this.from.y < this.to.y && (this.from.x <= this.to.x ? (a = this.from.x + c * f, 
                    b = this.from.y + c * f) : this.from.x > this.to.x && (a = this.from.x - c * f, 
                    b = this.from.y + c * f)), "discrete" === d && (a = c * f > e ? this.from.x : a)) : Math.abs(this.from.x - this.to.x) > Math.abs(this.from.y - this.to.y) && (this.from.y >= this.to.y ? this.from.x <= this.to.x ? (a = this.from.x + c * e, 
                    b = this.from.y - c * e) : this.from.x > this.to.x && (a = this.from.x - c * e, 
                    b = this.from.y - c * e) : this.from.y < this.to.y && (this.from.x <= this.to.x ? (a = this.from.x + c * e, 
                    b = this.from.y + c * e) : this.from.x > this.to.x && (a = this.from.x - c * e, 
                    b = this.from.y + c * e)), "discrete" === d && (b = c * e > f ? this.from.y : b)); else if ("straightCross" === d) Math.abs(this.from.x - this.to.x) <= Math.abs(this.from.y - this.to.y) ? (a = this.from.x, 
                    b = this.from.y < this.to.y ? this.to.y - (1 - c) * f : this.to.y + (1 - c) * f) : Math.abs(this.from.x - this.to.x) > Math.abs(this.from.y - this.to.y) && (a = this.from.x < this.to.x ? this.to.x - (1 - c) * e : this.to.x + (1 - c) * e, 
                    b = this.from.y); else if ("horizontal" === d) a = this.from.x < this.to.x ? this.to.x - (1 - c) * e : this.to.x + (1 - c) * e, 
                    b = this.from.y; else if ("vertical" === d) a = this.from.x, b = this.from.y < this.to.y ? this.to.y - (1 - c) * f : this.to.y + (1 - c) * f; else if ("curvedCW" === d) {
                        e = this.to.x - this.from.x, f = this.from.y - this.to.y;
                        var g = Math.sqrt(e * e + f * f), h = Math.PI, i = Math.atan2(f, e), j = (i + (.5 * c + .5) * h) % (2 * h);
                        a = this.from.x + (.5 * c + .5) * g * Math.sin(j), b = this.from.y + (.5 * c + .5) * g * Math.cos(j);
                    } else if ("curvedCCW" === d) {
                        e = this.to.x - this.from.x, f = this.from.y - this.to.y;
                        var k = Math.sqrt(e * e + f * f), l = Math.PI, m = Math.atan2(f, e), n = (m + (.5 * -c + .5) * l) % (2 * l);
                        a = this.from.x + (.5 * c + .5) * k * Math.sin(n), b = this.from.y + (.5 * c + .5) * k * Math.cos(n);
                    } else Math.abs(this.from.x - this.to.x) <= Math.abs(this.from.y - this.to.y) ? this.from.y >= this.to.y ? this.from.x <= this.to.x ? (a = this.from.x + c * f, 
                    b = this.from.y - c * f, a = this.to.x < a ? this.to.x : a) : this.from.x > this.to.x && (a = this.from.x - c * f, 
                    b = this.from.y - c * f, a = this.to.x > a ? this.to.x : a) : this.from.y < this.to.y && (this.from.x <= this.to.x ? (a = this.from.x + c * f, 
                    b = this.from.y + c * f, a = this.to.x < a ? this.to.x : a) : this.from.x > this.to.x && (a = this.from.x - c * f, 
                    b = this.from.y + c * f, a = this.to.x > a ? this.to.x : a)) : Math.abs(this.from.x - this.to.x) > Math.abs(this.from.y - this.to.y) && (this.from.y >= this.to.y ? this.from.x <= this.to.x ? (a = this.from.x + c * e, 
                    b = this.from.y - c * e, b = this.to.y > b ? this.to.y : b) : this.from.x > this.to.x && (a = this.from.x - c * e, 
                    b = this.from.y - c * e, b = this.to.y > b ? this.to.y : b) : this.from.y < this.to.y && (this.from.x <= this.to.x ? (a = this.from.x + c * e, 
                    b = this.from.y + c * e, b = this.to.y < b ? this.to.y : b) : this.from.x > this.to.x && (a = this.from.x - c * e, 
                    b = this.from.y + c * e, b = this.to.y < b ? this.to.y : b)));
                    return {
                        x: a,
                        y: b
                    };
                }
            }, {
                key: "_findBorderPosition",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? {} : arguments[2];
                    return this._findBorderPositionBezier(a, b, c.via);
                }
            }, {
                key: "_getDistanceToEdge",
                value: function(a, b, c, d, e, f) {
                    var g = arguments.length <= 6 || void 0 === arguments[6] ? this._getViaCoordinates() : arguments[6];
                    return this._getDistanceToBezierEdge(a, b, c, d, e, f, g);
                }
            }, {
                key: "getPoint",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? this._getViaCoordinates() : arguments[1], c = a, d = Math.pow(1 - c, 2) * this.fromPoint.x + 2 * c * (1 - c) * b.x + Math.pow(c, 2) * this.toPoint.x, e = Math.pow(1 - c, 2) * this.fromPoint.y + 2 * c * (1 - c) * b.y + Math.pow(c, 2) * this.toPoint.y;
                    return {
                        x: d,
                        y: e
                    };
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(86), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_line",
                value: function(a) {
                    a.beginPath(), a.moveTo(this.fromPoint.x, this.fromPoint.y), a.lineTo(this.toPoint.x, this.toPoint.y), 
                    this.enableShadow(a), a.stroke(), this.disableShadow(a);
                }
            }, {
                key: "getViaNode",
                value: function() {}
            }, {
                key: "getPoint",
                value: function(a) {
                    return {
                        x: (1 - a) * this.fromPoint.x + a * this.toPoint.x,
                        y: (1 - a) * this.fromPoint.y + a * this.toPoint.y
                    };
                }
            }, {
                key: "_findBorderPosition",
                value: function(a, b) {
                    var c = this.to, d = this.from;
                    a.id === this.from.id && (c = this.from, d = this.to);
                    var e = Math.atan2(c.y - d.y, c.x - d.x), f = c.x - d.x, g = c.y - d.y, h = Math.sqrt(f * f + g * g), i = a.distanceToBorder(b, e), j = (h - i) / h, k = {};
                    return k.x = (1 - j) * d.x + j * c.x, k.y = (1 - j) * d.y + j * c.y, k;
                }
            }, {
                key: "_getDistanceToEdge",
                value: function(a, b, c, d, e, f) {
                    return this._getDistanceToLine(a, b, c, d, e, f);
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(91), h = d(g), i = c(92), j = d(i), k = c(93), l = d(k), m = c(94), n = d(m), o = c(95), p = d(o), q = c(96), r = d(q), s = c(97), t = d(s), u = c(98), v = d(u), w = c(1), x = function() {
            function a(b) {
                e(this, a), this.body = b, this.physicsBody = {
                    physicsNodeIndices: [],
                    physicsEdgeIndices: [],
                    forces: {},
                    velocities: {}
                }, this.physicsEnabled = !0, this.simulationInterval = 1e3 / 60, this.requiresTimeout = !0, 
                this.previousStates = {}, this.referenceState = {}, this.freezeCache = {}, this.renderTimer = void 0, 
                this.adaptiveTimestep = !1, this.adaptiveTimestepEnabled = !1, this.adaptiveCounter = 0, 
                this.adaptiveInterval = 3, this.stabilized = !1, this.startedStabilization = !1, 
                this.stabilizationIterations = 0, this.ready = !1, this.options = {}, this.defaultOptions = {
                    enabled: !0,
                    barnesHut: {
                        theta: .5,
                        gravitationalConstant: -2e3,
                        centralGravity: .3,
                        springLength: 95,
                        springConstant: .04,
                        damping: .09,
                        avoidOverlap: 0
                    },
                    forceAtlas2Based: {
                        theta: .5,
                        gravitationalConstant: -50,
                        centralGravity: .01,
                        springConstant: .08,
                        springLength: 100,
                        damping: .4,
                        avoidOverlap: 0
                    },
                    repulsion: {
                        centralGravity: .2,
                        springLength: 200,
                        springConstant: .05,
                        nodeDistance: 100,
                        damping: .09,
                        avoidOverlap: 0
                    },
                    hierarchicalRepulsion: {
                        centralGravity: 0,
                        springLength: 100,
                        springConstant: .01,
                        nodeDistance: 120,
                        damping: .09
                    },
                    maxVelocity: 50,
                    minVelocity: .75,
                    solver: "barnesHut",
                    stabilization: {
                        enabled: !0,
                        iterations: 1e3,
                        updateInterval: 50,
                        onlyDynamicEdges: !1,
                        fit: !0
                    },
                    timestep: .5,
                    adaptiveTimestep: !0
                }, w.extend(this.options, this.defaultOptions), this.timestep = .5, this.layoutFailed = !1, 
                this.bindEventListeners();
            }
            return f(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("initPhysics", function() {
                        a.initPhysics();
                    }), this.body.emitter.on("_layoutFailed", function() {
                        a.layoutFailed = !0;
                    }), this.body.emitter.on("resetPhysics", function() {
                        a.stopSimulation(), a.ready = !1;
                    }), this.body.emitter.on("disablePhysics", function() {
                        a.physicsEnabled = !1, a.stopSimulation();
                    }), this.body.emitter.on("restorePhysics", function() {
                        a.setOptions(a.options), a.ready === !0 && a.startSimulation();
                    }), this.body.emitter.on("startSimulation", function() {
                        a.ready === !0 && a.startSimulation();
                    }), this.body.emitter.on("stopSimulation", function() {
                        a.stopSimulation();
                    }), this.body.emitter.on("destroy", function() {
                        a.stopSimulation(!1), a.body.emitter.off();
                    }), this.body.emitter.on("_dataChanged", function() {
                        a.updatePhysicsData();
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    void 0 !== a && (a === !1 ? (this.options.enabled = !1, this.physicsEnabled = !1, 
                    this.stopSimulation()) : (this.physicsEnabled = !0, w.selectiveNotDeepExtend([ "stabilization" ], this.options, a), 
                    w.mergeOptions(this.options, a, "stabilization"), void 0 === a.enabled && (this.options.enabled = !0), 
                    this.options.enabled === !1 && (this.physicsEnabled = !1, this.stopSimulation()), 
                    this.timestep = this.options.timestep)), this.init();
                }
            }, {
                key: "init",
                value: function() {
                    var a;
                    "forceAtlas2Based" === this.options.solver ? (a = this.options.forceAtlas2Based, 
                    this.nodesSolver = new t["default"](this.body, this.physicsBody, a), this.edgesSolver = new n["default"](this.body, this.physicsBody, a), 
                    this.gravitySolver = new v["default"](this.body, this.physicsBody, a)) : "repulsion" === this.options.solver ? (a = this.options.repulsion, 
                    this.nodesSolver = new j["default"](this.body, this.physicsBody, a), this.edgesSolver = new n["default"](this.body, this.physicsBody, a), 
                    this.gravitySolver = new r["default"](this.body, this.physicsBody, a)) : "hierarchicalRepulsion" === this.options.solver ? (a = this.options.hierarchicalRepulsion, 
                    this.nodesSolver = new l["default"](this.body, this.physicsBody, a), this.edgesSolver = new p["default"](this.body, this.physicsBody, a), 
                    this.gravitySolver = new r["default"](this.body, this.physicsBody, a)) : (a = this.options.barnesHut, 
                    this.nodesSolver = new h["default"](this.body, this.physicsBody, a), this.edgesSolver = new n["default"](this.body, this.physicsBody, a), 
                    this.gravitySolver = new r["default"](this.body, this.physicsBody, a)), this.modelOptions = a;
                }
            }, {
                key: "initPhysics",
                value: function() {
                    this.physicsEnabled === !0 && this.options.enabled === !0 ? this.options.stabilization.enabled === !0 ? this.stabilize() : (this.stabilized = !1, 
                    this.ready = !0, this.body.emitter.emit("fit", {}, this.layoutFailed), this.startSimulation()) : (this.ready = !0, 
                    this.body.emitter.emit("fit"));
                }
            }, {
                key: "startSimulation",
                value: function() {
                    this.physicsEnabled === !0 && this.options.enabled === !0 ? (this.stabilized = !1, 
                    this.adaptiveTimestep = !1, this.body.emitter.emit("_resizeNodes"), void 0 === this.viewFunction && (this.viewFunction = this.simulationStep.bind(this), 
                    this.body.emitter.on("initRedraw", this.viewFunction), this.body.emitter.emit("_startRendering"))) : this.body.emitter.emit("_redraw");
                }
            }, {
                key: "stopSimulation",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0];
                    this.stabilized = !0, a === !0 && this._emitStabilized(), void 0 !== this.viewFunction && (this.body.emitter.off("initRedraw", this.viewFunction), 
                    this.viewFunction = void 0, a === !0 && this.body.emitter.emit("_stopRendering"));
                }
            }, {
                key: "simulationStep",
                value: function() {
                    var a = Date.now();
                    this.physicsTick();
                    var b = Date.now() - a;
                    (b < .4 * this.simulationInterval || this.runDoubleSpeed === !0) && this.stabilized === !1 && (this.physicsTick(), 
                    this.runDoubleSpeed = !0), this.stabilized === !0 && this.stopSimulation();
                }
            }, {
                key: "_emitStabilized",
                value: function() {
                    var a = this, b = arguments.length <= 0 || void 0 === arguments[0] ? this.stabilizationIterations : arguments[0];
                    (this.stabilizationIterations > 1 || this.startedStabilization === !0) && setTimeout(function() {
                        a.body.emitter.emit("stabilized", {
                            iterations: b
                        }), a.startedStabilization = !1, a.stabilizationIterations = 0;
                    }, 0);
                }
            }, {
                key: "physicsTick",
                value: function() {
                    if (this.startedStabilization === !1 && (this.body.emitter.emit("startStabilizing"), 
                    this.startedStabilization = !0), this.stabilized === !1) {
                        if (this.adaptiveTimestep === !0 && this.adaptiveTimestepEnabled === !0) {
                            var a = 1.2;
                            this.adaptiveCounter % this.adaptiveInterval === 0 ? (this.timestep = 2 * this.timestep, 
                            this.calculateForces(), this.moveNodes(), this.revert(), this.timestep = .5 * this.timestep, 
                            this.calculateForces(), this.moveNodes(), this.calculateForces(), this.moveNodes(), 
                            this._evaluateStepQuality() === !0 ? this.timestep = a * this.timestep : this.timestep / a < this.options.timestep ? this.timestep = this.options.timestep : (this.adaptiveCounter = -1, 
                            this.timestep = Math.max(this.options.timestep, this.timestep / a))) : (this.calculateForces(), 
                            this.moveNodes()), this.adaptiveCounter += 1;
                        } else this.timestep = this.options.timestep, this.calculateForces(), this.moveNodes();
                        this.stabilized === !0 && this.revert(), this.stabilizationIterations++;
                    }
                }
            }, {
                key: "updatePhysicsData",
                value: function() {
                    this.physicsBody.forces = {}, this.physicsBody.physicsNodeIndices = [], this.physicsBody.physicsEdgeIndices = [];
                    var a = this.body.nodes, b = this.body.edges;
                    for (var c in a) a.hasOwnProperty(c) && a[c].options.physics === !0 && this.physicsBody.physicsNodeIndices.push(a[c].id);
                    for (var d in b) b.hasOwnProperty(d) && b[d].options.physics === !0 && this.physicsBody.physicsEdgeIndices.push(b[d].id);
                    for (var e = 0; e < this.physicsBody.physicsNodeIndices.length; e++) {
                        var f = this.physicsBody.physicsNodeIndices[e];
                        this.physicsBody.forces[f] = {
                            x: 0,
                            y: 0
                        }, void 0 === this.physicsBody.velocities[f] && (this.physicsBody.velocities[f] = {
                            x: 0,
                            y: 0
                        });
                    }
                    for (var g in this.physicsBody.velocities) void 0 === a[g] && delete this.physicsBody.velocities[g];
                }
            }, {
                key: "revert",
                value: function() {
                    var a = Object.keys(this.previousStates), b = this.body.nodes, c = this.physicsBody.velocities;
                    this.referenceState = {};
                    for (var d = 0; d < a.length; d++) {
                        var e = a[d];
                        void 0 !== b[e] ? b[e].options.physics === !0 && (this.referenceState[e] = {
                            positions: {
                                x: b[e].x,
                                y: b[e].y
                            }
                        }, c[e].x = this.previousStates[e].vx, c[e].y = this.previousStates[e].vy, b[e].x = this.previousStates[e].x, 
                        b[e].y = this.previousStates[e].y) : delete this.previousStates[e];
                    }
                }
            }, {
                key: "_evaluateStepQuality",
                value: function() {
                    var a = void 0, b = void 0, c = void 0, d = this.body.nodes, e = this.referenceState, f = .3;
                    for (var g in this.referenceState) if (this.referenceState.hasOwnProperty(g) && void 0 !== d[g] && (a = d[g].x - e[g].positions.x, 
                    b = d[g].y - e[g].positions.y, c = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2)), c > f)) return !1;
                    return !0;
                }
            }, {
                key: "moveNodes",
                value: function() {
                    for (var a = this.physicsBody.physicsNodeIndices, b = this.options.maxVelocity ? this.options.maxVelocity : 1e9, c = 0, d = 0, e = 5, f = 0; f < a.length; f++) {
                        var g = a[f], h = this._performStep(g, b);
                        c = Math.max(c, h), d += h;
                    }
                    this.adaptiveTimestepEnabled = d / a.length < e, this.stabilized = c < this.options.minVelocity;
                }
            }, {
                key: "_performStep",
                value: function(a, b) {
                    var c = this.body.nodes[a], d = this.timestep, e = this.physicsBody.forces, f = this.physicsBody.velocities;
                    if (this.previousStates[a] = {
                        x: c.x,
                        y: c.y,
                        vx: f[a].x,
                        vy: f[a].y
                    }, c.options.fixed.x === !1) {
                        var g = this.modelOptions.damping * f[a].x, h = (e[a].x - g) / c.options.mass;
                        f[a].x += h * d, f[a].x = Math.abs(f[a].x) > b ? f[a].x > 0 ? b : -b : f[a].x, c.x += f[a].x * d;
                    } else e[a].x = 0, f[a].x = 0;
                    if (c.options.fixed.y === !1) {
                        var i = this.modelOptions.damping * f[a].y, j = (e[a].y - i) / c.options.mass;
                        f[a].y += j * d, f[a].y = Math.abs(f[a].y) > b ? f[a].y > 0 ? b : -b : f[a].y, c.y += f[a].y * d;
                    } else e[a].y = 0, f[a].y = 0;
                    var k = Math.sqrt(Math.pow(f[a].x, 2) + Math.pow(f[a].y, 2));
                    return k;
                }
            }, {
                key: "calculateForces",
                value: function() {
                    this.gravitySolver.solve(), this.nodesSolver.solve(), this.edgesSolver.solve();
                }
            }, {
                key: "_freezeNodes",
                value: function() {
                    var a = this.body.nodes;
                    for (var b in a) a.hasOwnProperty(b) && a[b].x && a[b].y && (this.freezeCache[b] = {
                        x: a[b].options.fixed.x,
                        y: a[b].options.fixed.y
                    }, a[b].options.fixed.x = !0, a[b].options.fixed.y = !0);
                }
            }, {
                key: "_restoreFrozenNodes",
                value: function() {
                    var a = this.body.nodes;
                    for (var b in a) a.hasOwnProperty(b) && void 0 !== this.freezeCache[b] && (a[b].options.fixed.x = this.freezeCache[b].x, 
                    a[b].options.fixed.y = this.freezeCache[b].y);
                    this.freezeCache = {};
                }
            }, {
                key: "stabilize",
                value: function() {
                    var a = this, b = arguments.length <= 0 || void 0 === arguments[0] ? this.options.stabilization.iterations : arguments[0];
                    return "number" != typeof b && (console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ", this.options.stabilization.iterations), 
                    b = this.options.stabilization.iterations), 0 === this.physicsBody.physicsNodeIndices.length ? void (this.ready = !0) : (this.adaptiveTimestep = this.options.adaptiveTimestep, 
                    this.body.emitter.emit("_resizeNodes"), this.stopSimulation(), this.stabilized = !1, 
                    this.body.emitter.emit("_blockRedraw"), this.targetIterations = b, this.options.stabilization.onlyDynamicEdges === !0 && this._freezeNodes(), 
                    this.stabilizationIterations = 0, void setTimeout(function() {
                        return a._stabilizationBatch();
                    }, 0));
                }
            }, {
                key: "_stabilizationBatch",
                value: function() {
                    this.startedStabilization === !1 && (this.body.emitter.emit("startStabilizing"), 
                    this.startedStabilization = !0);
                    for (var a = 0; this.stabilized === !1 && a < this.options.stabilization.updateInterval && this.stabilizationIterations < this.targetIterations; ) this.physicsTick(), 
                    a++;
                    this.stabilized === !1 && this.stabilizationIterations < this.targetIterations ? (this.body.emitter.emit("stabilizationProgress", {
                        iterations: this.stabilizationIterations,
                        total: this.targetIterations
                    }), setTimeout(this._stabilizationBatch.bind(this), 0)) : this._finalizeStabilization();
                }
            }, {
                key: "_finalizeStabilization",
                value: function() {
                    this.body.emitter.emit("_allowRedraw"), this.options.stabilization.fit === !0 && this.body.emitter.emit("fit"), 
                    this.options.stabilization.onlyDynamicEdges === !0 && this._restoreFrozenNodes(), 
                    this.body.emitter.emit("stabilizationIterationsDone"), this.body.emitter.emit("_requestRedraw"), 
                    this.stabilized === !0 ? this._emitStabilized() : this.startSimulation(), this.ready = !0;
                }
            }, {
                key: "_drawForces",
                value: function(a) {
                    for (var b = 0; b < this.physicsBody.physicsNodeIndices.length; b++) {
                        var c = this.body.nodes[this.physicsBody.physicsNodeIndices[b]], d = this.physicsBody.forces[this.physicsBody.physicsNodeIndices[b]], e = 20, f = .03, g = Math.sqrt(Math.pow(d.x, 2) + Math.pow(d.x, 2)), h = Math.min(Math.max(5, g), 15), i = 3 * h, j = w.HSVToHex((180 - 180 * Math.min(1, Math.max(0, f * g))) / 360, 1, 1);
                        a.lineWidth = h, a.strokeStyle = j, a.beginPath(), a.moveTo(c.x, c.y), a.lineTo(c.x + e * d.x, c.y + e * d.y), 
                        a.stroke();
                        var k = Math.atan2(d.y, d.x);
                        a.fillStyle = j, a.arrow(c.x + e * d.x + Math.cos(k) * i, c.y + e * d.y + Math.sin(k) * i, k, i), 
                        a.fill();
                    }
                }
            } ]), a;
        }();
        b["default"] = x;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.barnesHutTree, this.setOptions(e), 
                this.randomSeed = 5;
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a, this.thetaInversed = 1 / this.options.theta, this.overlapAvoidanceFactor = 1 - Math.max(0, Math.min(1, this.options.avoidOverlap));
                }
            }, {
                key: "seededRandom",
                value: function() {
                    var a = 1e4 * Math.sin(this.randomSeed++);
                    return a - Math.floor(a);
                }
            }, {
                key: "solve",
                value: function() {
                    if (0 !== this.options.gravitationalConstant && this.physicsBody.physicsNodeIndices.length > 0) {
                        var a = void 0, b = this.body.nodes, c = this.physicsBody.physicsNodeIndices, d = c.length, e = this._formBarnesHutTree(b, c);
                        this.barnesHutTree = e;
                        for (var f = 0; d > f; f++) a = b[c[f]], a.options.mass > 0 && (this._getForceContribution(e.root.children.NW, a), 
                        this._getForceContribution(e.root.children.NE, a), this._getForceContribution(e.root.children.SW, a), 
                        this._getForceContribution(e.root.children.SE, a));
                    }
                }
            }, {
                key: "_getForceContribution",
                value: function(a, b) {
                    if (a.childrenCount > 0) {
                        var c = void 0, d = void 0, e = void 0;
                        c = a.centerOfMass.x - b.x, d = a.centerOfMass.y - b.y, e = Math.sqrt(c * c + d * d), 
                        e * a.calcSize > this.thetaInversed ? this._calculateForces(e, c, d, b, a) : 4 === a.childrenCount ? (this._getForceContribution(a.children.NW, b), 
                        this._getForceContribution(a.children.NE, b), this._getForceContribution(a.children.SW, b), 
                        this._getForceContribution(a.children.SE, b)) : a.children.data.id != b.id && this._calculateForces(e, c, d, b, a);
                    }
                }
            }, {
                key: "_calculateForces",
                value: function(a, b, c, d, e) {
                    0 === a && (a = .1, b = a), this.overlapAvoidanceFactor < 1 && (a = Math.max(.1 + this.overlapAvoidanceFactor * d.shape.radius, a - d.shape.radius));
                    var f = this.options.gravitationalConstant * e.mass * d.options.mass / Math.pow(a, 3), g = b * f, h = c * f;
                    this.physicsBody.forces[d.id].x += g, this.physicsBody.forces[d.id].y += h;
                }
            }, {
                key: "_formBarnesHutTree",
                value: function(a, b) {
                    for (var c = void 0, d = b.length, e = a[b[0]].x, f = a[b[0]].y, g = a[b[0]].x, h = a[b[0]].y, i = 1; d > i; i++) {
                        var j = a[b[i]].x, k = a[b[i]].y;
                        a[b[i]].options.mass > 0 && (e > j && (e = j), j > g && (g = j), f > k && (f = k), 
                        k > h && (h = k));
                    }
                    var l = Math.abs(g - e) - Math.abs(h - f);
                    l > 0 ? (f -= .5 * l, h += .5 * l) : (e += .5 * l, g -= .5 * l);
                    var m = 1e-5, n = Math.max(m, Math.abs(g - e)), o = .5 * n, p = .5 * (e + g), q = .5 * (f + h), r = {
                        root: {
                            centerOfMass: {
                                x: 0,
                                y: 0
                            },
                            mass: 0,
                            range: {
                                minX: p - o,
                                maxX: p + o,
                                minY: q - o,
                                maxY: q + o
                            },
                            size: n,
                            calcSize: 1 / n,
                            children: {
                                data: null
                            },
                            maxWidth: 0,
                            level: 0,
                            childrenCount: 4
                        }
                    };
                    this._splitBranch(r.root);
                    for (var s = 0; d > s; s++) c = a[b[s]], c.options.mass > 0 && this._placeInTree(r.root, c);
                    return r;
                }
            }, {
                key: "_updateBranchMass",
                value: function(a, b) {
                    var c = a.mass + b.options.mass, d = 1 / c;
                    a.centerOfMass.x = a.centerOfMass.x * a.mass + b.x * b.options.mass, a.centerOfMass.x *= d, 
                    a.centerOfMass.y = a.centerOfMass.y * a.mass + b.y * b.options.mass, a.centerOfMass.y *= d, 
                    a.mass = c;
                    var e = Math.max(Math.max(b.height, b.radius), b.width);
                    a.maxWidth = a.maxWidth < e ? e : a.maxWidth;
                }
            }, {
                key: "_placeInTree",
                value: function(a, b, c) {
                    1 == c && void 0 !== c || this._updateBranchMass(a, b), a.children.NW.range.maxX > b.x ? a.children.NW.range.maxY > b.y ? this._placeInRegion(a, b, "NW") : this._placeInRegion(a, b, "SW") : a.children.NW.range.maxY > b.y ? this._placeInRegion(a, b, "NE") : this._placeInRegion(a, b, "SE");
                }
            }, {
                key: "_placeInRegion",
                value: function(a, b, c) {
                    switch (a.children[c].childrenCount) {
                      case 0:
                        a.children[c].children.data = b, a.children[c].childrenCount = 1, this._updateBranchMass(a.children[c], b);
                        break;

                      case 1:
                        a.children[c].children.data.x === b.x && a.children[c].children.data.y === b.y ? (b.x += this.seededRandom(), 
                        b.y += this.seededRandom()) : (this._splitBranch(a.children[c]), this._placeInTree(a.children[c], b));
                        break;

                      case 4:
                        this._placeInTree(a.children[c], b);
                    }
                }
            }, {
                key: "_splitBranch",
                value: function(a) {
                    var b = null;
                    1 === a.childrenCount && (b = a.children.data, a.mass = 0, a.centerOfMass.x = 0, 
                    a.centerOfMass.y = 0), a.childrenCount = 4, a.children.data = null, this._insertRegion(a, "NW"), 
                    this._insertRegion(a, "NE"), this._insertRegion(a, "SW"), this._insertRegion(a, "SE"), 
                    null != b && this._placeInTree(a, b);
                }
            }, {
                key: "_insertRegion",
                value: function(a, b) {
                    var c = void 0, d = void 0, e = void 0, f = void 0, g = .5 * a.size;
                    switch (b) {
                      case "NW":
                        c = a.range.minX, d = a.range.minX + g, e = a.range.minY, f = a.range.minY + g;
                        break;

                      case "NE":
                        c = a.range.minX + g, d = a.range.maxX, e = a.range.minY, f = a.range.minY + g;
                        break;

                      case "SW":
                        c = a.range.minX, d = a.range.minX + g, e = a.range.minY + g, f = a.range.maxY;
                        break;

                      case "SE":
                        c = a.range.minX + g, d = a.range.maxX, e = a.range.minY + g, f = a.range.maxY;
                    }
                    a.children[b] = {
                        centerOfMass: {
                            x: 0,
                            y: 0
                        },
                        mass: 0,
                        range: {
                            minX: c,
                            maxX: d,
                            minY: e,
                            maxY: f
                        },
                        size: .5 * a.size,
                        calcSize: 2 * a.calcSize,
                        children: {
                            data: null
                        },
                        maxWidth: 0,
                        level: a.level + 1,
                        childrenCount: 0
                    };
                }
            }, {
                key: "_debug",
                value: function(a, b) {
                    void 0 !== this.barnesHutTree && (a.lineWidth = 1, this._drawBranch(this.barnesHutTree.root, a, b));
                }
            }, {
                key: "_drawBranch",
                value: function(a, b, c) {
                    void 0 === c && (c = "#FF0000"), 4 === a.childrenCount && (this._drawBranch(a.children.NW, b), 
                    this._drawBranch(a.children.NE, b), this._drawBranch(a.children.SE, b), this._drawBranch(a.children.SW, b)), 
                    b.strokeStyle = c, b.beginPath(), b.moveTo(a.range.minX, a.range.minY), b.lineTo(a.range.maxX, a.range.minY), 
                    b.stroke(), b.beginPath(), b.moveTo(a.range.maxX, a.range.minY), b.lineTo(a.range.maxX, a.range.maxY), 
                    b.stroke(), b.beginPath(), b.moveTo(a.range.maxX, a.range.maxY), b.lineTo(a.range.minX, a.range.maxY), 
                    b.stroke(), b.beginPath(), b.moveTo(a.range.minX, a.range.maxY), b.lineTo(a.range.minX, a.range.minY), 
                    b.stroke();
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.setOptions(e);
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "solve",
                value: function() {
                    for (var a, b, c, d, e, f, g, h, i = this.body.nodes, j = this.physicsBody.physicsNodeIndices, k = this.physicsBody.forces, l = this.options.nodeDistance, m = -2 / 3 / l, n = 4 / 3, o = 0; o < j.length - 1; o++) {
                        g = i[j[o]];
                        for (var p = o + 1; p < j.length; p++) h = i[j[p]], a = h.x - g.x, b = h.y - g.y, 
                        c = Math.sqrt(a * a + b * b), 0 === c && (c = .1 * Math.random(), a = c), 2 * l > c && (f = .5 * l > c ? 1 : m * c + n, 
                        f /= c, d = a * f, e = b * f, k[g.id].x -= d, k[g.id].y -= e, k[h.id].x += d, k[h.id].y += e);
                    }
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.setOptions(e);
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "solve",
                value: function() {
                    var a, b, c, d, e, f, g, h, i, j, k = this.body.nodes, l = this.physicsBody.physicsNodeIndices, m = this.physicsBody.forces, n = this.options.nodeDistance;
                    for (i = 0; i < l.length - 1; i++) for (g = k[l[i]], j = i + 1; j < l.length; j++) if (h = k[l[j]], 
                    g.level === h.level) {
                        a = h.x - g.x, b = h.y - g.y, c = Math.sqrt(a * a + b * b);
                        var o = .05;
                        f = n > c ? -Math.pow(o * c, 2) + Math.pow(o * n, 2) : 0, 0 === c ? c = .01 : f /= c, 
                        d = a * f, e = b * f, m[g.id].x -= d, m[g.id].y -= e, m[h.id].x += d, m[h.id].y += e;
                    }
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.setOptions(e);
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "solve",
                value: function() {
                    for (var a = void 0, b = void 0, c = this.physicsBody.physicsEdgeIndices, d = this.body.edges, e = void 0, f = void 0, g = void 0, h = 0; h < c.length; h++) b = d[c[h]], 
                    b.connected === !0 && b.toId !== b.fromId && void 0 !== this.body.nodes[b.toId] && void 0 !== this.body.nodes[b.fromId] && (void 0 !== b.edgeType.via ? (a = void 0 === b.options.length ? this.options.springLength : b.options.length, 
                    e = b.to, f = b.edgeType.via, g = b.from, this._calculateSpringForce(e, f, .5 * a), 
                    this._calculateSpringForce(f, g, .5 * a)) : (a = void 0 === b.options.length ? 1.5 * this.options.springLength : b.options.length, 
                    this._calculateSpringForce(b.from, b.to, a)));
                }
            }, {
                key: "_calculateSpringForce",
                value: function(a, b, c) {
                    var d = a.x - b.x, e = a.y - b.y, f = Math.max(Math.sqrt(d * d + e * e), .01), g = this.options.springConstant * (c - f) / f, h = d * g, i = e * g;
                    void 0 !== this.physicsBody.forces[a.id] && (this.physicsBody.forces[a.id].x += h, 
                    this.physicsBody.forces[a.id].y += i), void 0 !== this.physicsBody.forces[b.id] && (this.physicsBody.forces[b.id].x -= h, 
                    this.physicsBody.forces[b.id].y -= i);
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.setOptions(e);
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "solve",
                value: function() {
                    for (var a, b, c, d, e, f, g, h, i = this.body.edges, j = .5, k = this.physicsBody.physicsEdgeIndices, l = this.physicsBody.physicsNodeIndices, m = this.physicsBody.forces, n = 0; n < l.length; n++) {
                        var o = l[n];
                        m[o].springFx = 0, m[o].springFy = 0;
                    }
                    for (var p = 0; p < k.length; p++) b = i[k[p]], b.connected === !0 && (a = void 0 === b.options.length ? this.options.springLength : b.options.length, 
                    c = b.from.x - b.to.x, d = b.from.y - b.to.y, h = Math.sqrt(c * c + d * d), h = 0 === h ? .01 : h, 
                    g = this.options.springConstant * (a - h) / h, e = c * g, f = d * g, b.to.level != b.from.level ? (void 0 !== m[b.toId] && (m[b.toId].springFx -= e, 
                    m[b.toId].springFy -= f), void 0 !== m[b.fromId] && (m[b.fromId].springFx += e, 
                    m[b.fromId].springFy += f)) : (void 0 !== m[b.toId] && (m[b.toId].x -= j * e, m[b.toId].y -= j * f), 
                    void 0 !== m[b.fromId] && (m[b.fromId].x += j * e, m[b.fromId].y += j * f)));
                    for (var q, r, g = 1, s = 0; s < l.length; s++) {
                        var t = l[s];
                        q = Math.min(g, Math.max(-g, m[t].springFx)), r = Math.min(g, Math.max(-g, m[t].springFy)), 
                        m[t].x += q, m[t].y += r;
                    }
                    for (var u = 0, v = 0, w = 0; w < l.length; w++) {
                        var x = l[w];
                        u += m[x].x, v += m[x].y;
                    }
                    for (var y = u / l.length, z = v / l.length, A = 0; A < l.length; A++) {
                        var B = l[A];
                        m[B].x -= y, m[B].y -= z;
                    }
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b, d, e) {
                c(this, a), this.body = b, this.physicsBody = d, this.setOptions(e);
            }
            return d(a, [ {
                key: "setOptions",
                value: function(a) {
                    this.options = a;
                }
            }, {
                key: "solve",
                value: function() {
                    for (var a = void 0, b = void 0, c = void 0, d = void 0, e = this.body.nodes, f = this.physicsBody.physicsNodeIndices, g = this.physicsBody.forces, h = 0; h < f.length; h++) {
                        var i = f[h];
                        d = e[i], a = -d.x, b = -d.y, c = Math.sqrt(a * a + b * b), this._calculateForces(c, a, b, g, d);
                    }
                }
            }, {
                key: "_calculateForces",
                value: function(a, b, c, d, e) {
                    var f = 0 === a ? 0 : this.options.centralGravity / a;
                    d[e.id].x = b * f, d[e.id].y = c * f;
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(91), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_calculateForces",
                value: function(a, b, c, d, e) {
                    0 === a && (a = .1 * Math.random(), b = a), this.overlapAvoidanceFactor < 1 && (a = Math.max(.1 + this.overlapAvoidanceFactor * d.shape.radius, a - d.shape.radius));
                    var f = d.edges.length + 1, g = this.options.gravitationalConstant * e.mass * d.options.mass * f / Math.pow(a, 2), h = b * g, i = c * g;
                    this.physicsBody.forces[d.id].x += h, this.physicsBody.forces[d.id].y += i;
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(96), j = d(i), k = function(a) {
            function b(a, c, d) {
                return e(this, b), f(this, Object.getPrototypeOf(b).call(this, a, c, d));
            }
            return g(b, a), h(b, [ {
                key: "_calculateForces",
                value: function(a, b, c, d, e) {
                    if (a > 0) {
                        var f = e.edges.length + 1, g = this.options.centralGravity * f * e.options.mass;
                        d[e.id].x = b * g, d[e.id].y = c * g;
                    }
                }
            } ]), b;
        }(j["default"]);
        b["default"] = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, g = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), h = c(100), i = d(h), j = c(101), k = d(j), l = c(1), m = function() {
            function a(b) {
                var c = this;
                e(this, a), this.body = b, this.clusteredNodes = {}, this.clusteredEdges = {}, this.options = {}, 
                this.defaultOptions = {}, l.extend(this.options, this.defaultOptions), this.body.emitter.on("_resetData", function() {
                    c.clusteredNodes = {}, c.clusteredEdges = {};
                });
            }
            return g(a, [ {
                key: "setOptions",
                value: function(a) {}
            }, {
                key: "clusterByHubsize",
                value: function(a, b) {
                    void 0 === a ? a = this._getHubSize() : "object" === ("undefined" == typeof a ? "undefined" : f(a)) && (b = this._checkOptions(a), 
                    a = this._getHubSize());
                    for (var c = [], d = 0; d < this.body.nodeIndices.length; d++) {
                        var e = this.body.nodes[this.body.nodeIndices[d]];
                        e.edges.length >= a && c.push(e.id);
                    }
                    for (var g = 0; g < c.length; g++) this.clusterByConnection(c[g], b, !0);
                    this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "cluster",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0], b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    if (void 0 === a.joinCondition) throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");
                    a = this._checkOptions(a);
                    for (var c = {}, d = {}, e = 0; e < this.body.nodeIndices.length; e++) {
                        var f = this.body.nodeIndices[e], g = this.body.nodes[f], h = i["default"].cloneOptions(g);
                        if (a.joinCondition(h) === !0) {
                            c[f] = this.body.nodes[f];
                            for (var j = 0; j < g.edges.length; j++) {
                                var k = g.edges[j];
                                void 0 === this.clusteredEdges[k.id] && (d[k.id] = k);
                            }
                        }
                    }
                    this._cluster(c, d, a, b);
                }
            }, {
                key: "clusterByEdgeCount",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !0 : arguments[2];
                    b = this._checkOptions(b);
                    for (var d = [], e = {}, f = void 0, g = void 0, h = void 0, j = void 0, k = void 0, l = 0; l < this.body.nodeIndices.length; l++) {
                        var m = {}, n = {};
                        if (j = this.body.nodeIndices[l], void 0 === e[j]) {
                            k = 0, h = this.body.nodes[j], g = [];
                            for (var o = 0; o < h.edges.length; o++) f = h.edges[o], void 0 === this.clusteredEdges[f.id] && (f.toId !== f.fromId && k++, 
                            g.push(f));
                            if (k === a) {
                                for (var p = !0, q = 0; q < g.length; q++) {
                                    f = g[q];
                                    var r = this._getConnectedId(f, j);
                                    if (void 0 === b.joinCondition) n[f.id] = f, m[j] = this.body.nodes[j], m[r] = this.body.nodes[r], 
                                    e[j] = !0; else {
                                        var s = i["default"].cloneOptions(this.body.nodes[j]);
                                        if (b.joinCondition(s) !== !0) {
                                            p = !1;
                                            break;
                                        }
                                        n[f.id] = f, m[j] = this.body.nodes[j], e[j] = !0;
                                    }
                                }
                                Object.keys(m).length > 0 && Object.keys(n).length > 0 && p === !0 && d.push({
                                    nodes: m,
                                    edges: n
                                });
                            }
                        }
                    }
                    for (var t = 0; t < d.length; t++) this._cluster(d[t].nodes, d[t].edges, b, !1);
                    c === !0 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "clusterOutliers",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    this.clusterByEdgeCount(1, a, b);
                }
            }, {
                key: "clusterBridges",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    this.clusterByEdgeCount(2, a, b);
                }
            }, {
                key: "clusterByConnection",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !0 : arguments[2];
                    if (void 0 === a) throw new Error("No nodeId supplied to clusterByConnection!");
                    if (void 0 === this.body.nodes[a]) throw new Error("The nodeId given to clusterByConnection does not exist!");
                    var d = this.body.nodes[a];
                    b = this._checkOptions(b, d), void 0 === b.clusterNodeProperties.x && (b.clusterNodeProperties.x = d.x), 
                    void 0 === b.clusterNodeProperties.y && (b.clusterNodeProperties.y = d.y), void 0 === b.clusterNodeProperties.fixed && (b.clusterNodeProperties.fixed = {}, 
                    b.clusterNodeProperties.fixed.x = d.options.fixed.x, b.clusterNodeProperties.fixed.y = d.options.fixed.y);
                    var e = {}, f = {}, g = d.id, h = i["default"].cloneOptions(d);
                    e[g] = d;
                    for (var j = 0; j < d.edges.length; j++) {
                        var k = d.edges[j];
                        if (void 0 === this.clusteredEdges[k.id]) {
                            var l = this._getConnectedId(k, g);
                            if (void 0 === this.clusteredNodes[l]) if (l !== g) if (void 0 === b.joinCondition) f[k.id] = k, 
                            e[l] = this.body.nodes[l]; else {
                                var m = i["default"].cloneOptions(this.body.nodes[l]);
                                b.joinCondition(h, m) === !0 && (f[k.id] = k, e[l] = this.body.nodes[l]);
                            } else f[k.id] = k;
                        }
                    }
                    this._cluster(e, f, b, c);
                }
            }, {
                key: "_createClusterEdges",
                value: function(a, b, c, d) {
                    for (var e = void 0, f = void 0, g = void 0, h = void 0, j = void 0, k = void 0, m = Object.keys(a), n = [], o = 0; o < m.length; o++) {
                        f = m[o], g = a[f];
                        for (var p = 0; p < g.edges.length; p++) e = g.edges[p], void 0 === this.clusteredEdges[e.id] && (e.toId == e.fromId ? b[e.id] = e : e.toId == f ? (h = c.id, 
                        j = e.fromId, k = j) : (h = e.toId, j = c.id, k = h), void 0 === a[k] && n.push({
                            edge: e,
                            fromId: j,
                            toId: h
                        }));
                    }
                    for (var q = 0; q < n.length; q++) {
                        var r = n[q].edge, s = i["default"].cloneOptions(r, "edge");
                        l.deepExtend(s, d), s.from = n[q].fromId, s.to = n[q].toId, s.id = "clusterEdge:" + l.randomUUID();
                        var t = this.body.functions.createEdge(s);
                        t.clusteringEdgeReplacingId = r.id, this.body.edges[t.id] = t, t.connect(), this._backupEdgeOptions(r), 
                        r.setOptions({
                            physics: !1,
                            hidden: !0
                        });
                    }
                }
            }, {
                key: "_checkOptions",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    return void 0 === a.clusterEdgeProperties && (a.clusterEdgeProperties = {}), void 0 === a.clusterNodeProperties && (a.clusterNodeProperties = {}), 
                    a;
                }
            }, {
                key: "_cluster",
                value: function(a, b, c) {
                    var d = arguments.length <= 3 || void 0 === arguments[3] ? !0 : arguments[3];
                    if (!(Object.keys(a).length < 2)) {
                        for (var e in a) if (a.hasOwnProperty(e) && void 0 !== this.clusteredNodes[e]) return;
                        var f = l.deepExtend({}, c.clusterNodeProperties);
                        if (void 0 !== c.processProperties) {
                            var g = [];
                            for (var h in a) if (a.hasOwnProperty(h)) {
                                var j = i["default"].cloneOptions(a[h]);
                                g.push(j);
                            }
                            var m = [];
                            for (var n in b) if (b.hasOwnProperty(n) && "clusterEdge:" !== n.substr(0, 12)) {
                                var o = i["default"].cloneOptions(b[n], "edge");
                                m.push(o);
                            }
                            if (f = c.processProperties(f, g, m), !f) throw new Error("The processProperties function does not return properties!");
                        }
                        void 0 === f.id && (f.id = "cluster:" + l.randomUUID());
                        var p = f.id;
                        void 0 === f.label && (f.label = "cluster");
                        var q = void 0;
                        void 0 === f.x && (q = this._getClusterPosition(a), f.x = q.x), void 0 === f.y && (void 0 === q && (q = this._getClusterPosition(a)), 
                        f.y = q.y), f.id = p;
                        var r = this.body.functions.createNode(f, k["default"]);
                        r.isCluster = !0, r.containedNodes = a, r.containedEdges = b, r.clusterEdgeProperties = c.clusterEdgeProperties, 
                        this.body.nodes[f.id] = r, this._createClusterEdges(a, b, f, c.clusterEdgeProperties);
                        for (var s in b) if (b.hasOwnProperty(s) && void 0 !== this.body.edges[s]) {
                            var t = this.body.edges[s];
                            this._backupEdgeOptions(t), t.setOptions({
                                physics: !1,
                                hidden: !0
                            });
                        }
                        for (var u in a) a.hasOwnProperty(u) && (this.clusteredNodes[u] = {
                            clusterId: f.id,
                            node: this.body.nodes[u]
                        }, this.body.nodes[u].setOptions({
                            hidden: !0,
                            physics: !1
                        }));
                        f.id = void 0, d === !0 && this.body.emitter.emit("_dataChanged");
                    }
                }
            }, {
                key: "_backupEdgeOptions",
                value: function(a) {
                    void 0 === this.clusteredEdges[a.id] && (this.clusteredEdges[a.id] = {
                        physics: a.options.physics,
                        hidden: a.options.hidden
                    });
                }
            }, {
                key: "_restoreEdge",
                value: function(a) {
                    var b = this.clusteredEdges[a.id];
                    void 0 !== b && (a.setOptions({
                        physics: b.physics,
                        hidden: b.hidden
                    }), delete this.clusteredEdges[a.id]);
                }
            }, {
                key: "isCluster",
                value: function(a) {
                    return void 0 !== this.body.nodes[a] ? this.body.nodes[a].isCluster === !0 : (console.log("Node does not exist."), 
                    !1);
                }
            }, {
                key: "_getClusterPosition",
                value: function(a) {
                    for (var b = Object.keys(a), c = a[b[0]].x, d = a[b[0]].x, e = a[b[0]].y, f = a[b[0]].y, g = void 0, h = 1; h < b.length; h++) g = a[b[h]], 
                    c = g.x < c ? g.x : c, d = g.x > d ? g.x : d, e = g.y < e ? g.y : e, f = g.y > f ? g.y : f;
                    return {
                        x: .5 * (c + d),
                        y: .5 * (e + f)
                    };
                }
            }, {
                key: "openCluster",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !0 : arguments[2];
                    if (void 0 === a) throw new Error("No clusterNodeId supplied to openCluster.");
                    if (void 0 === this.body.nodes[a]) throw new Error("The clusterNodeId supplied to openCluster does not exist.");
                    if (void 0 === this.body.nodes[a].containedNodes) return void console.log("The node:" + a + " is not a cluster.");
                    var d = this.body.nodes[a], e = d.containedNodes, f = d.containedEdges;
                    if (void 0 !== b && void 0 !== b.releaseFunction && "function" == typeof b.releaseFunction) {
                        var g = {}, h = {
                            x: d.x,
                            y: d.y
                        };
                        for (var j in e) if (e.hasOwnProperty(j)) {
                            var k = this.body.nodes[j];
                            g[j] = {
                                x: k.x,
                                y: k.y
                            };
                        }
                        var m = b.releaseFunction(h, g);
                        for (var n in e) if (e.hasOwnProperty(n)) {
                            var o = this.body.nodes[n];
                            void 0 !== m[n] && (o.x = void 0 === m[n].x ? d.x : m[n].x, o.y = void 0 === m[n].y ? d.y : m[n].y);
                        }
                    } else for (var p in e) if (e.hasOwnProperty(p)) {
                        var q = this.body.nodes[p];
                        q = e[p], q.options.fixed.x === !1 && (q.x = d.x), q.options.fixed.y === !1 && (q.y = d.y);
                    }
                    for (var r in e) if (e.hasOwnProperty(r)) {
                        var s = this.body.nodes[r];
                        s.vx = d.vx, s.vy = d.vy, s.setOptions({
                            hidden: !1,
                            physics: !0
                        }), delete this.clusteredNodes[r];
                    }
                    for (var t = [], u = 0; u < d.edges.length; u++) t.push(d.edges[u]);
                    for (var v = 0; v < t.length; v++) {
                        var w = t[v], x = this._getConnectedId(w, a);
                        if (void 0 !== this.clusteredNodes[x]) {
                            var y = this.body.nodes[this.clusteredNodes[x].clusterId], z = this.body.edges[w.clusteringEdgeReplacingId];
                            if (void 0 !== z) {
                                y.containedEdges[z.id] = z, delete f[z.id];
                                var A = z.fromId, B = z.toId;
                                z.toId == x ? B = this.clusteredNodes[x].clusterId : A = this.clusteredNodes[x].clusterId;
                                var C = i["default"].cloneOptions(z, "edge");
                                l.deepExtend(C, y.clusterEdgeProperties);
                                var D = "clusterEdge:" + l.randomUUID();
                                l.deepExtend(C, {
                                    from: A,
                                    to: B,
                                    hidden: !1,
                                    physics: !0,
                                    id: D
                                });
                                var E = this.body.functions.createEdge(C);
                                E.clusteringEdgeReplacingId = z.id, this.body.edges[D] = E, this.body.edges[D].connect();
                            }
                        } else {
                            var F = this.body.edges[w.clusteringEdgeReplacingId];
                            void 0 !== F && this._restoreEdge(F);
                        }
                        w.cleanup(), w.disconnect(), delete this.body.edges[w.id];
                    }
                    for (var G in f) f.hasOwnProperty(G) && this._restoreEdge(f[G]);
                    delete this.body.nodes[a], c === !0 && this.body.emitter.emit("_dataChanged");
                }
            }, {
                key: "getNodesInCluster",
                value: function(a) {
                    var b = [];
                    if (this.isCluster(a) === !0) {
                        var c = this.body.nodes[a].containedNodes;
                        for (var d in c) c.hasOwnProperty(d) && b.push(this.body.nodes[d].id);
                    }
                    return b;
                }
            }, {
                key: "findNode",
                value: function(a) {
                    for (var b = [], c = 100, d = 0; void 0 !== this.clusteredNodes[a] && c > d; ) b.push(this.body.nodes[a].id), 
                    a = this.clusteredNodes[a].clusterId, d++;
                    return b.push(this.body.nodes[a].id), b.reverse(), b;
                }
            }, {
                key: "_getConnectedId",
                value: function(a, b) {
                    return a.toId != b ? a.toId : a.fromId != b ? a.fromId : a.fromId;
                }
            }, {
                key: "_getHubSize",
                value: function() {
                    for (var a = 0, b = 0, c = 0, d = 0, e = 0; e < this.body.nodeIndices.length; e++) {
                        var f = this.body.nodes[this.body.nodeIndices[e]];
                        f.edges.length > d && (d = f.edges.length), a += f.edges.length, b += Math.pow(f.edges.length, 2), 
                        c += 1;
                    }
                    a /= c, b /= c;
                    var g = b - Math.pow(a, 2), h = Math.sqrt(g), i = Math.floor(a + 2 * h);
                    return i > d && (i = d), i;
                }
            } ]), a;
        }();
        b["default"] = m;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = c(1), g = function() {
            function a() {
                d(this, a);
            }
            return e(a, null, [ {
                key: "getRange",
                value: function(a) {
                    var b, c = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1], d = 1e9, e = -1e9, f = 1e9, g = -1e9;
                    if (c.length > 0) for (var h = 0; h < c.length; h++) b = a[c[h]], f > b.shape.boundingBox.left && (f = b.shape.boundingBox.left), 
                    g < b.shape.boundingBox.right && (g = b.shape.boundingBox.right), d > b.shape.boundingBox.top && (d = b.shape.boundingBox.top), 
                    e < b.shape.boundingBox.bottom && (e = b.shape.boundingBox.bottom);
                    return 1e9 === f && -1e9 === g && 1e9 === d && -1e9 === e && (d = 0, e = 0, f = 0, 
                    g = 0), {
                        minX: f,
                        maxX: g,
                        minY: d,
                        maxY: e
                    };
                }
            }, {
                key: "getRangeCore",
                value: function(a) {
                    var b, c = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1], d = 1e9, e = -1e9, f = 1e9, g = -1e9;
                    if (c.length > 0) for (var h = 0; h < c.length; h++) b = a[c[h]], f > b.x && (f = b.x), 
                    g < b.x && (g = b.x), d > b.y && (d = b.y), e < b.y && (e = b.y);
                    return 1e9 === f && -1e9 === g && 1e9 === d && -1e9 === e && (d = 0, e = 0, f = 0, 
                    g = 0), {
                        minX: f,
                        maxX: g,
                        minY: d,
                        maxY: e
                    };
                }
            }, {
                key: "findCenter",
                value: function(a) {
                    return {
                        x: .5 * (a.maxX + a.minX),
                        y: .5 * (a.maxY + a.minY)
                    };
                }
            }, {
                key: "cloneOptions",
                value: function(a, b) {
                    var c = {};
                    return void 0 === b || "node" === b ? (f.deepExtend(c, a.options, !0), c.x = a.x, 
                    c.y = a.y, c.amountOfConnections = a.edges.length) : f.deepExtend(c, a.options, !0), 
                    c;
                }
            } ]), a;
        }();
        b["default"] = g;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        function f(a, b) {
            if (!a) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !b || "object" != typeof b && "function" != typeof b ? a : b;
        }
        function g(a, b) {
            if ("function" != typeof b && null !== b) throw new TypeError("Super expression must either be null or a function, not " + typeof b);
            a.prototype = Object.create(b && b.prototype, {
                constructor: {
                    value: a,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var h = c(62), i = d(h), j = function(a) {
            function b(a, c, d, g, h) {
                e(this, b);
                var i = f(this, Object.getPrototypeOf(b).call(this, a, c, d, g, h));
                return i.isCluster = !0, i.containedNodes = {}, i.containedEdges = {}, i;
            }
            return g(b, a), b;
        }(i["default"]);
        b["default"] = j;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }();
        "undefined" != typeof window && (window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame);
        var f = c(1), g = function() {
            function a(b, c) {
                d(this, a), this.body = b, this.canvas = c, this.redrawRequested = !1, this.renderTimer = void 0, 
                this.requiresTimeout = !0, this.renderingActive = !1, this.renderRequests = 0, this.pixelRatio = void 0, 
                this.allowRedraw = !0, this.dragging = !1, this.options = {}, this.defaultOptions = {
                    hideEdgesOnDrag: !1,
                    hideNodesOnDrag: !1
                }, f.extend(this.options, this.defaultOptions), this._determineBrowserMethod(), 
                this.bindEventListeners();
            }
            return e(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("dragStart", function() {
                        a.dragging = !0;
                    }), this.body.emitter.on("dragEnd", function() {
                        return a.dragging = !1;
                    }), this.body.emitter.on("_resizeNodes", function() {
                        return a._resizeNodes();
                    }), this.body.emitter.on("_redraw", function() {
                        a.renderingActive === !1 && a._redraw();
                    }), this.body.emitter.on("_blockRedraw", function() {
                        a.allowRedraw = !1;
                    }), this.body.emitter.on("_allowRedraw", function() {
                        a.allowRedraw = !0, a.redrawRequested = !1;
                    }), this.body.emitter.on("_requestRedraw", this._requestRedraw.bind(this)), this.body.emitter.on("_startRendering", function() {
                        a.renderRequests += 1, a.renderingActive = !0, a._startRendering();
                    }), this.body.emitter.on("_stopRendering", function() {
                        a.renderRequests -= 1, a.renderingActive = a.renderRequests > 0, a.renderTimer = void 0;
                    }), this.body.emitter.on("destroy", function() {
                        a.renderRequests = 0, a.allowRedraw = !1, a.renderingActive = !1, a.requiresTimeout === !0 ? clearTimeout(a.renderTimer) : cancelAnimationFrame(a.renderTimer), 
                        a.body.emitter.off();
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        var b = [ "hideEdgesOnDrag", "hideNodesOnDrag" ];
                        f.selectiveDeepExtend(b, this.options, a);
                    }
                }
            }, {
                key: "_startRendering",
                value: function() {
                    this.renderingActive === !0 && void 0 === this.renderTimer && (this.requiresTimeout === !0 ? this.renderTimer = window.setTimeout(this._renderStep.bind(this), this.simulationInterval) : this.renderTimer = window.requestAnimationFrame(this._renderStep.bind(this)));
                }
            }, {
                key: "_renderStep",
                value: function() {
                    this.renderingActive === !0 && (this.renderTimer = void 0, this.requiresTimeout === !0 && this._startRendering(), 
                    this._redraw(), this.requiresTimeout === !1 && this._startRendering());
                }
            }, {
                key: "redraw",
                value: function() {
                    this.body.emitter.emit("setSize"), this._redraw();
                }
            }, {
                key: "_requestRedraw",
                value: function() {
                    var a = this;
                    this.redrawRequested !== !0 && this.renderingActive === !1 && this.allowRedraw === !0 && (this.redrawRequested = !0, 
                    this.requiresTimeout === !0 ? window.setTimeout(function() {
                        a._redraw(!1);
                    }, 0) : window.requestAnimationFrame(function() {
                        a._redraw(!1);
                    }));
                }
            }, {
                key: "_redraw",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0];
                    if (this.allowRedraw === !0) {
                        this.body.emitter.emit("initRedraw"), this.redrawRequested = !1;
                        var b = this.canvas.frame.canvas.getContext("2d");
                        0 !== this.canvas.frame.canvas.width && 0 !== this.canvas.frame.canvas.height || this.canvas.setSize(), 
                        this.pixelRatio = (window.devicePixelRatio || 1) / (b.webkitBackingStorePixelRatio || b.mozBackingStorePixelRatio || b.msBackingStorePixelRatio || b.oBackingStorePixelRatio || b.backingStorePixelRatio || 1), 
                        b.setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0);
                        var c = this.canvas.frame.canvas.clientWidth, d = this.canvas.frame.canvas.clientHeight;
                        if (b.clearRect(0, 0, c, d), 0 === this.canvas.frame.clientWidth) return;
                        b.save(), b.translate(this.body.view.translation.x, this.body.view.translation.y), 
                        b.scale(this.body.view.scale, this.body.view.scale), b.beginPath(), this.body.emitter.emit("beforeDrawing", b), 
                        b.closePath(), a === !1 && (this.dragging === !1 || this.dragging === !0 && this.options.hideEdgesOnDrag === !1) && this._drawEdges(b), 
                        (this.dragging === !1 || this.dragging === !0 && this.options.hideNodesOnDrag === !1) && this._drawNodes(b, a), 
                        b.beginPath(), this.body.emitter.emit("afterDrawing", b), b.closePath(), b.restore(), 
                        a === !0 && b.clearRect(0, 0, c, d);
                    }
                }
            }, {
                key: "_resizeNodes",
                value: function() {
                    var a = this.canvas.frame.canvas.getContext("2d");
                    void 0 === this.pixelRatio && (this.pixelRatio = (window.devicePixelRatio || 1) / (a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1)), 
                    a.setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0), a.save(), a.translate(this.body.view.translation.x, this.body.view.translation.y), 
                    a.scale(this.body.view.scale, this.body.view.scale);
                    var b = this.body.nodes, c = void 0;
                    for (var d in b) b.hasOwnProperty(d) && (c = b[d], c.resize(a), c.updateBoundingBox(a, c.selected));
                    a.restore();
                }
            }, {
                key: "_drawNodes",
                value: function(a) {
                    for (var b = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], c = this.body.nodes, d = this.body.nodeIndices, e = void 0, f = [], g = 20, h = this.canvas.DOMtoCanvas({
                        x: -g,
                        y: -g
                    }), i = this.canvas.DOMtoCanvas({
                        x: this.canvas.frame.canvas.clientWidth + g,
                        y: this.canvas.frame.canvas.clientHeight + g
                    }), j = {
                        top: h.y,
                        left: h.x,
                        bottom: i.y,
                        right: i.x
                    }, k = 0; k < d.length; k++) e = c[d[k]], e.isSelected() ? f.push(d[k]) : b === !0 ? e.draw(a) : e.isBoundingBoxOverlappingWith(j) === !0 ? e.draw(a) : e.updateBoundingBox(a, e.selected);
                    for (var l = 0; l < f.length; l++) e = c[f[l]], e.draw(a);
                }
            }, {
                key: "_drawEdges",
                value: function(a) {
                    for (var b = this.body.edges, c = this.body.edgeIndices, d = void 0, e = 0; e < c.length; e++) d = b[c[e]], 
                    d.connected === !0 && d.draw(a);
                }
            }, {
                key: "_determineBrowserMethod",
                value: function() {
                    if ("undefined" != typeof window) {
                        var a = navigator.userAgent.toLowerCase();
                        this.requiresTimeout = !1, -1 != a.indexOf("msie 9.0") ? this.requiresTimeout = !0 : -1 != a.indexOf("safari") && a.indexOf("chrome") <= -1 && (this.requiresTimeout = !0);
                    } else this.requiresTimeout = !0;
                }
            } ]), a;
        }();
        b["default"] = g;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = c(22), g = c(25), h = c(1), i = function() {
            function a(b) {
                d(this, a), this.body = b, this.pixelRatio = 1, this.resizeTimer = void 0, this.resizeFunction = this._onResize.bind(this), 
                this.cameraState = {}, this.initialized = !1, this.options = {}, this.defaultOptions = {
                    autoResize: !0,
                    height: "100%",
                    width: "100%"
                }, h.extend(this.options, this.defaultOptions), this.bindEventListeners();
            }
            return e(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.once("resize", function(b) {
                        0 !== b.width && (a.body.view.translation.x = .5 * b.width), 0 !== b.height && (a.body.view.translation.y = .5 * b.height);
                    }), this.body.emitter.on("setSize", this.setSize.bind(this)), this.body.emitter.on("destroy", function() {
                        a.hammerFrame.destroy(), a.hammer.destroy(), a._cleanUp();
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    var b = this;
                    if (void 0 !== a) {
                        var c = [ "width", "height", "autoResize" ];
                        h.selectiveDeepExtend(c, this.options, a);
                    }
                    this.options.autoResize === !0 && (this._cleanUp(), this.resizeTimer = setInterval(function() {
                        var a = b.setSize();
                        a === !0 && b.body.emitter.emit("_requestRedraw");
                    }, 1e3), this.resizeFunction = this._onResize.bind(this), h.addEventListener(window, "resize", this.resizeFunction));
                }
            }, {
                key: "_cleanUp",
                value: function() {
                    void 0 !== this.resizeTimer && clearInterval(this.resizeTimer), h.removeEventListener(window, "resize", this.resizeFunction), 
                    this.resizeFunction = void 0;
                }
            }, {
                key: "_onResize",
                value: function() {
                    this.setSize(), this.body.emitter.emit("_redraw");
                }
            }, {
                key: "_getCameraState",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? this.pixelRatio : arguments[0];
                    this.initialized === !0 && (this.cameraState.previousWidth = this.frame.canvas.width / a, 
                    this.cameraState.previousHeight = this.frame.canvas.height / a, this.cameraState.scale = this.body.view.scale, 
                    this.cameraState.position = this.DOMtoCanvas({
                        x: .5 * this.frame.canvas.width / a,
                        y: .5 * this.frame.canvas.height / a
                    }));
                }
            }, {
                key: "_setCameraState",
                value: function() {
                    if (void 0 !== this.cameraState.scale && 0 !== this.frame.canvas.clientWidth && 0 !== this.frame.canvas.clientHeight && 0 !== this.pixelRatio && this.cameraState.previousWidth > 0) {
                        var a = this.frame.canvas.width / this.pixelRatio / this.cameraState.previousWidth, b = this.frame.canvas.height / this.pixelRatio / this.cameraState.previousHeight, c = this.cameraState.scale;
                        1 != a && 1 != b ? c = .5 * this.cameraState.scale * (a + b) : 1 != a ? c = this.cameraState.scale * a : 1 != b && (c = this.cameraState.scale * b), 
                        this.body.view.scale = c;
                        var d = this.DOMtoCanvas({
                            x: .5 * this.frame.canvas.clientWidth,
                            y: .5 * this.frame.canvas.clientHeight
                        }), e = {
                            x: d.x - this.cameraState.position.x,
                            y: d.y - this.cameraState.position.y
                        };
                        this.body.view.translation.x += e.x * this.body.view.scale, this.body.view.translation.y += e.y * this.body.view.scale;
                    }
                }
            }, {
                key: "_prepareValue",
                value: function(a) {
                    if ("number" == typeof a) return a + "px";
                    if ("string" == typeof a) {
                        if (-1 !== a.indexOf("%") || -1 !== a.indexOf("px")) return a;
                        if (-1 === a.indexOf("%")) return a + "px";
                    }
                    throw new Error("Could not use the value supplied for width or height:" + a);
                }
            }, {
                key: "_create",
                value: function() {
                    for (;this.body.container.hasChildNodes(); ) this.body.container.removeChild(this.body.container.firstChild);
                    if (this.frame = document.createElement("div"), this.frame.className = "vis-network", 
                    this.frame.style.position = "relative", this.frame.style.overflow = "hidden", this.frame.tabIndex = 900, 
                    this.frame.canvas = document.createElement("canvas"), this.frame.canvas.style.position = "relative", 
                    this.frame.appendChild(this.frame.canvas), this.frame.canvas.getContext) {
                        var a = this.frame.canvas.getContext("2d");
                        this.pixelRatio = (window.devicePixelRatio || 1) / (a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1), 
                        this.frame.canvas.getContext("2d").setTransform(this.pixelRatio, 0, 0, this.pixelRatio, 0, 0);
                    } else {
                        var b = document.createElement("DIV");
                        b.style.color = "red", b.style.fontWeight = "bold", b.style.padding = "10px", b.innerHTML = "Error: your browser does not support HTML canvas", 
                        this.frame.canvas.appendChild(b);
                    }
                    this.body.container.appendChild(this.frame), this.body.view.scale = 1, this.body.view.translation = {
                        x: .5 * this.frame.canvas.clientWidth,
                        y: .5 * this.frame.canvas.clientHeight
                    }, this._bindHammer();
                }
            }, {
                key: "_bindHammer",
                value: function() {
                    var a = this;
                    void 0 !== this.hammer && this.hammer.destroy(), this.drag = {}, this.pinch = {}, 
                    this.hammer = new f(this.frame.canvas), this.hammer.get("pinch").set({
                        enable: !0
                    }), this.hammer.get("pan").set({
                        threshold: 5,
                        direction: f.DIRECTION_ALL
                    }), g.onTouch(this.hammer, function(b) {
                        a.body.eventListeners.onTouch(b);
                    }), this.hammer.on("tap", function(b) {
                        a.body.eventListeners.onTap(b);
                    }), this.hammer.on("doubletap", function(b) {
                        a.body.eventListeners.onDoubleTap(b);
                    }), this.hammer.on("press", function(b) {
                        a.body.eventListeners.onHold(b);
                    }), this.hammer.on("panstart", function(b) {
                        a.body.eventListeners.onDragStart(b);
                    }), this.hammer.on("panmove", function(b) {
                        a.body.eventListeners.onDrag(b);
                    }), this.hammer.on("panend", function(b) {
                        a.body.eventListeners.onDragEnd(b);
                    }), this.hammer.on("pinch", function(b) {
                        a.body.eventListeners.onPinch(b);
                    }), this.frame.canvas.addEventListener("mousewheel", function(b) {
                        a.body.eventListeners.onMouseWheel(b);
                    }), this.frame.canvas.addEventListener("DOMMouseScroll", function(b) {
                        a.body.eventListeners.onMouseWheel(b);
                    }), this.frame.canvas.addEventListener("mousemove", function(b) {
                        a.body.eventListeners.onMouseMove(b);
                    }), this.frame.canvas.addEventListener("contextmenu", function(b) {
                        a.body.eventListeners.onContext(b);
                    }), this.hammerFrame = new f(this.frame), g.onRelease(this.hammerFrame, function(b) {
                        a.body.eventListeners.onRelease(b);
                    });
                }
            }, {
                key: "setSize",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? this.options.width : arguments[0], b = arguments.length <= 1 || void 0 === arguments[1] ? this.options.height : arguments[1];
                    a = this._prepareValue(a), b = this._prepareValue(b);
                    var c = !1, d = this.frame.canvas.width, e = this.frame.canvas.height, f = this.frame.canvas.getContext("2d"), g = this.pixelRatio;
                    return this.pixelRatio = (window.devicePixelRatio || 1) / (f.webkitBackingStorePixelRatio || f.mozBackingStorePixelRatio || f.msBackingStorePixelRatio || f.oBackingStorePixelRatio || f.backingStorePixelRatio || 1), 
                    a != this.options.width || b != this.options.height || this.frame.style.width != a || this.frame.style.height != b ? (this._getCameraState(g), 
                    this.frame.style.width = a, this.frame.style.height = b, this.frame.canvas.style.width = "100%", 
                    this.frame.canvas.style.height = "100%", this.frame.canvas.width = Math.round(this.frame.canvas.clientWidth * this.pixelRatio), 
                    this.frame.canvas.height = Math.round(this.frame.canvas.clientHeight * this.pixelRatio), 
                    this.options.width = a, this.options.height = b, c = !0) : (this.frame.canvas.width == Math.round(this.frame.canvas.clientWidth * this.pixelRatio) && this.frame.canvas.height == Math.round(this.frame.canvas.clientHeight * this.pixelRatio) || this._getCameraState(g), 
                    this.frame.canvas.width != Math.round(this.frame.canvas.clientWidth * this.pixelRatio) && (this.frame.canvas.width = Math.round(this.frame.canvas.clientWidth * this.pixelRatio), 
                    c = !0), this.frame.canvas.height != Math.round(this.frame.canvas.clientHeight * this.pixelRatio) && (this.frame.canvas.height = Math.round(this.frame.canvas.clientHeight * this.pixelRatio), 
                    c = !0)), c === !0 && (this.body.emitter.emit("resize", {
                        width: Math.round(this.frame.canvas.width / this.pixelRatio),
                        height: Math.round(this.frame.canvas.height / this.pixelRatio),
                        oldWidth: Math.round(d / this.pixelRatio),
                        oldHeight: Math.round(e / this.pixelRatio)
                    }), this._setCameraState()), this.initialized = !0, c;
                }
            }, {
                key: "_XconvertDOMtoCanvas",
                value: function(a) {
                    return (a - this.body.view.translation.x) / this.body.view.scale;
                }
            }, {
                key: "_XconvertCanvasToDOM",
                value: function(a) {
                    return a * this.body.view.scale + this.body.view.translation.x;
                }
            }, {
                key: "_YconvertDOMtoCanvas",
                value: function(a) {
                    return (a - this.body.view.translation.y) / this.body.view.scale;
                }
            }, {
                key: "_YconvertCanvasToDOM",
                value: function(a) {
                    return a * this.body.view.scale + this.body.view.translation.y;
                }
            }, {
                key: "canvasToDOM",
                value: function(a) {
                    return {
                        x: this._XconvertCanvasToDOM(a.x),
                        y: this._YconvertCanvasToDOM(a.y)
                    };
                }
            }, {
                key: "DOMtoCanvas",
                value: function(a) {
                    return {
                        x: this._XconvertDOMtoCanvas(a.x),
                        y: this._YconvertDOMtoCanvas(a.y)
                    };
                }
            } ]), a;
        }();
        b["default"] = i;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(100), h = d(g), i = c(1), j = function() {
            function a(b, c) {
                var d = this;
                e(this, a), this.body = b, this.canvas = c, this.animationSpeed = 1 / this.renderRefreshRate, 
                this.animationEasingFunction = "easeInOutQuint", this.easingTime = 0, this.sourceScale = 0, 
                this.targetScale = 0, this.sourceTranslation = 0, this.targetTranslation = 0, this.lockedOnNodeId = void 0, 
                this.lockedOnNodeOffset = void 0, this.touchTime = 0, this.viewFunction = void 0, 
                this.body.emitter.on("fit", this.fit.bind(this)), this.body.emitter.on("animationFinished", function() {
                    d.body.emitter.emit("_stopRendering");
                }), this.body.emitter.on("unlockNode", this.releaseNode.bind(this));
            }
            return f(a, [ {
                key: "setOptions",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    this.options = a;
                }
            }, {
                key: "fit",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? {
                        nodes: []
                    } : arguments[0], b = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1], c = void 0, d = void 0;
                    if (void 0 !== a.nodes && 0 !== a.nodes.length || (a.nodes = this.body.nodeIndices), 
                    b === !0) {
                        var e = 0;
                        for (var f in this.body.nodes) if (this.body.nodes.hasOwnProperty(f)) {
                            var g = this.body.nodes[f];
                            g.predefinedPosition === !0 && (e += 1);
                        }
                        if (e > .5 * this.body.nodeIndices.length) return void this.fit(a, !1);
                        c = h["default"].getRange(this.body.nodes, a.nodes);
                        var i = this.body.nodeIndices.length;
                        d = 12.662 / (i + 7.4147) + .0964822;
                        var j = Math.min(this.canvas.frame.canvas.clientWidth / 600, this.canvas.frame.canvas.clientHeight / 600);
                        d *= j;
                    } else {
                        this.body.emitter.emit("_resizeNodes"), c = h["default"].getRange(this.body.nodes, a.nodes);
                        var k = 1.1 * Math.abs(c.maxX - c.minX), l = 1.1 * Math.abs(c.maxY - c.minY), m = this.canvas.frame.canvas.clientWidth / k, n = this.canvas.frame.canvas.clientHeight / l;
                        d = n >= m ? m : n;
                    }
                    d > 1 ? d = 1 : 0 === d && (d = 1);
                    var o = h["default"].findCenter(c), p = {
                        position: o,
                        scale: d,
                        animation: a.animation
                    };
                    this.moveTo(p);
                }
            }, {
                key: "focus",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];
                    if (void 0 !== this.body.nodes[a]) {
                        var c = {
                            x: this.body.nodes[a].x,
                            y: this.body.nodes[a].y
                        };
                        b.position = c, b.lockedOnNode = a, this.moveTo(b);
                    } else console.log("Node: " + a + " cannot be found.");
                }
            }, {
                key: "moveTo",
                value: function(a) {
                    return void 0 === a ? void (a = {}) : (void 0 === a.offset && (a.offset = {
                        x: 0,
                        y: 0
                    }), void 0 === a.offset.x && (a.offset.x = 0), void 0 === a.offset.y && (a.offset.y = 0), 
                    void 0 === a.scale && (a.scale = this.body.view.scale), void 0 === a.position && (a.position = this.getViewPosition()), 
                    void 0 === a.animation && (a.animation = {
                        duration: 0
                    }), a.animation === !1 && (a.animation = {
                        duration: 0
                    }), a.animation === !0 && (a.animation = {}), void 0 === a.animation.duration && (a.animation.duration = 1e3), 
                    void 0 === a.animation.easingFunction && (a.animation.easingFunction = "easeInOutQuad"), 
                    void this.animateView(a));
                }
            }, {
                key: "animateView",
                value: function(a) {
                    if (void 0 !== a) {
                        this.animationEasingFunction = a.animation.easingFunction, this.releaseNode(), a.locked === !0 && (this.lockedOnNodeId = a.lockedOnNode, 
                        this.lockedOnNodeOffset = a.offset), 0 != this.easingTime && this._transitionRedraw(!0), 
                        this.sourceScale = this.body.view.scale, this.sourceTranslation = this.body.view.translation, 
                        this.targetScale = a.scale, this.body.view.scale = this.targetScale;
                        var b = this.canvas.DOMtoCanvas({
                            x: .5 * this.canvas.frame.canvas.clientWidth,
                            y: .5 * this.canvas.frame.canvas.clientHeight
                        }), c = {
                            x: b.x - a.position.x,
                            y: b.y - a.position.y
                        };
                        this.targetTranslation = {
                            x: this.sourceTranslation.x + c.x * this.targetScale + a.offset.x,
                            y: this.sourceTranslation.y + c.y * this.targetScale + a.offset.y
                        }, 0 === a.animation.duration ? void 0 != this.lockedOnNodeId ? (this.viewFunction = this._lockedRedraw.bind(this), 
                        this.body.emitter.on("initRedraw", this.viewFunction)) : (this.body.view.scale = this.targetScale, 
                        this.body.view.translation = this.targetTranslation, this.body.emitter.emit("_requestRedraw")) : (this.animationSpeed = 1 / (60 * a.animation.duration * .001) || 1 / 60, 
                        this.animationEasingFunction = a.animation.easingFunction, this.viewFunction = this._transitionRedraw.bind(this), 
                        this.body.emitter.on("initRedraw", this.viewFunction), this.body.emitter.emit("_startRendering"));
                    }
                }
            }, {
                key: "_lockedRedraw",
                value: function() {
                    var a = {
                        x: this.body.nodes[this.lockedOnNodeId].x,
                        y: this.body.nodes[this.lockedOnNodeId].y
                    }, b = this.canvas.DOMtoCanvas({
                        x: .5 * this.canvas.frame.canvas.clientWidth,
                        y: .5 * this.canvas.frame.canvas.clientHeight
                    }), c = {
                        x: b.x - a.x,
                        y: b.y - a.y
                    }, d = this.body.view.translation, e = {
                        x: d.x + c.x * this.body.view.scale + this.lockedOnNodeOffset.x,
                        y: d.y + c.y * this.body.view.scale + this.lockedOnNodeOffset.y
                    };
                    this.body.view.translation = e;
                }
            }, {
                key: "releaseNode",
                value: function() {
                    void 0 !== this.lockedOnNodeId && void 0 !== this.viewFunction && (this.body.emitter.off("initRedraw", this.viewFunction), 
                    this.lockedOnNodeId = void 0, this.lockedOnNodeOffset = void 0);
                }
            }, {
                key: "_transitionRedraw",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0];
                    this.easingTime += this.animationSpeed, this.easingTime = a === !0 ? 1 : this.easingTime;
                    var b = i.easingFunctions[this.animationEasingFunction](this.easingTime);
                    this.body.view.scale = this.sourceScale + (this.targetScale - this.sourceScale) * b, 
                    this.body.view.translation = {
                        x: this.sourceTranslation.x + (this.targetTranslation.x - this.sourceTranslation.x) * b,
                        y: this.sourceTranslation.y + (this.targetTranslation.y - this.sourceTranslation.y) * b
                    }, this.easingTime >= 1 && (this.body.emitter.off("initRedraw", this.viewFunction), 
                    this.easingTime = 0, void 0 != this.lockedOnNodeId && (this.viewFunction = this._lockedRedraw.bind(this), 
                    this.body.emitter.on("initRedraw", this.viewFunction)), this.body.emitter.emit("animationFinished"));
                }
            }, {
                key: "getScale",
                value: function() {
                    return this.body.view.scale;
                }
            }, {
                key: "getViewPosition",
                value: function() {
                    return this.canvas.DOMtoCanvas({
                        x: .5 * this.canvas.frame.canvas.clientWidth,
                        y: .5 * this.canvas.frame.canvas.clientHeight
                    });
                }
            } ]), a;
        }();
        b["default"] = j;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(106), h = d(g), i = c(107), j = d(i), k = c(1), l = function() {
            function a(b, c, d) {
                e(this, a), this.body = b, this.canvas = c, this.selectionHandler = d, this.navigationHandler = new h["default"](b, c), 
                this.body.eventListeners.onTap = this.onTap.bind(this), this.body.eventListeners.onTouch = this.onTouch.bind(this), 
                this.body.eventListeners.onDoubleTap = this.onDoubleTap.bind(this), this.body.eventListeners.onHold = this.onHold.bind(this), 
                this.body.eventListeners.onDragStart = this.onDragStart.bind(this), this.body.eventListeners.onDrag = this.onDrag.bind(this), 
                this.body.eventListeners.onDragEnd = this.onDragEnd.bind(this), this.body.eventListeners.onMouseWheel = this.onMouseWheel.bind(this), 
                this.body.eventListeners.onPinch = this.onPinch.bind(this), this.body.eventListeners.onMouseMove = this.onMouseMove.bind(this), 
                this.body.eventListeners.onRelease = this.onRelease.bind(this), this.body.eventListeners.onContext = this.onContext.bind(this), 
                this.touchTime = 0, this.drag = {}, this.pinch = {}, this.popup = void 0, this.popupObj = void 0, 
                this.popupTimer = void 0, this.body.functions.getPointer = this.getPointer.bind(this), 
                this.options = {}, this.defaultOptions = {
                    dragNodes: !0,
                    dragView: !0,
                    hover: !1,
                    keyboard: {
                        enabled: !1,
                        speed: {
                            x: 10,
                            y: 10,
                            zoom: .02
                        },
                        bindToWindow: !0
                    },
                    navigationButtons: !1,
                    tooltipDelay: 300,
                    zoomView: !0
                }, k.extend(this.options, this.defaultOptions), this.bindEventListeners();
            }
            return f(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("destroy", function() {
                        clearTimeout(a.popupTimer), delete a.body.functions.getPointer;
                    });
                }
            }, {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        var b = [ "hideEdgesOnDrag", "hideNodesOnDrag", "keyboard", "multiselect", "selectable", "selectConnectedEdges" ];
                        k.selectiveNotDeepExtend(b, this.options, a), k.mergeOptions(this.options, a, "keyboard"), 
                        a.tooltip && (k.extend(this.options.tooltip, a.tooltip), a.tooltip.color && (this.options.tooltip.color = k.parseColor(a.tooltip.color)));
                    }
                    this.navigationHandler.setOptions(this.options);
                }
            }, {
                key: "getPointer",
                value: function(a) {
                    return {
                        x: a.x - k.getAbsoluteLeft(this.canvas.frame.canvas),
                        y: a.y - k.getAbsoluteTop(this.canvas.frame.canvas)
                    };
                }
            }, {
                key: "onTouch",
                value: function(a) {
                    new Date().valueOf() - this.touchTime > 50 && (this.drag.pointer = this.getPointer(a.center), 
                    this.drag.pinched = !1, this.pinch.scale = this.body.view.scale, this.touchTime = new Date().valueOf());
                }
            }, {
                key: "onTap",
                value: function(a) {
                    var b = this.getPointer(a.center), c = this.selectionHandler.options.multiselect && (a.changedPointers[0].ctrlKey || a.changedPointers[0].metaKey);
                    this.checkSelectionChanges(b, a, c), this.selectionHandler._generateClickEvent("click", a, b);
                }
            }, {
                key: "onDoubleTap",
                value: function(a) {
                    var b = this.getPointer(a.center);
                    this.selectionHandler._generateClickEvent("doubleClick", a, b);
                }
            }, {
                key: "onHold",
                value: function(a) {
                    var b = this.getPointer(a.center), c = this.selectionHandler.options.multiselect;
                    this.checkSelectionChanges(b, a, c), this.selectionHandler._generateClickEvent("click", a, b), 
                    this.selectionHandler._generateClickEvent("hold", a, b);
                }
            }, {
                key: "onRelease",
                value: function(a) {
                    if (new Date().valueOf() - this.touchTime > 10) {
                        var b = this.getPointer(a.center);
                        this.selectionHandler._generateClickEvent("release", a, b), this.touchTime = new Date().valueOf();
                    }
                }
            }, {
                key: "onContext",
                value: function(a) {
                    var b = this.getPointer({
                        x: a.clientX,
                        y: a.clientY
                    });
                    this.selectionHandler._generateClickEvent("oncontext", a, b);
                }
            }, {
                key: "checkSelectionChanges",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = this.selectionHandler._getSelectedEdgeCount(), e = this.selectionHandler._getSelectedNodeCount(), f = this.selectionHandler.getSelection(), g = void 0;
                    g = c === !0 ? this.selectionHandler.selectAdditionalOnPoint(a) : this.selectionHandler.selectOnPoint(a);
                    var h = this.selectionHandler._getSelectedEdgeCount(), i = this.selectionHandler._getSelectedNodeCount(), j = this.selectionHandler.getSelection(), k = this._determineIfDifferent(f, j), l = k.nodesChanged, m = k.edgesChanged, n = !1;
                    i - e > 0 ? (this.selectionHandler._generateClickEvent("selectNode", b, a), g = !0, 
                    n = !0) : l === !0 && i > 0 ? (this.selectionHandler._generateClickEvent("deselectNode", b, a, f), 
                    this.selectionHandler._generateClickEvent("selectNode", b, a), n = !0, g = !0) : 0 > i - e && (this.selectionHandler._generateClickEvent("deselectNode", b, a, f), 
                    g = !0), h - d > 0 && n === !1 ? (this.selectionHandler._generateClickEvent("selectEdge", b, a), 
                    g = !0) : h > 0 && m === !0 ? (this.selectionHandler._generateClickEvent("deselectEdge", b, a, f), 
                    this.selectionHandler._generateClickEvent("selectEdge", b, a), g = !0) : 0 > h - d && (this.selectionHandler._generateClickEvent("deselectEdge", b, a, f), 
                    g = !0), g === !0 && this.selectionHandler._generateClickEvent("select", b, a);
                }
            }, {
                key: "_determineIfDifferent",
                value: function(a, b) {
                    for (var c = !1, d = !1, e = 0; e < a.nodes.length; e++) -1 === b.nodes.indexOf(a.nodes[e]) && (c = !0);
                    for (var f = 0; f < b.nodes.length; f++) -1 === a.nodes.indexOf(a.nodes[f]) && (c = !0);
                    for (var g = 0; g < a.edges.length; g++) -1 === b.edges.indexOf(a.edges[g]) && (d = !0);
                    for (var h = 0; h < b.edges.length; h++) -1 === a.edges.indexOf(a.edges[h]) && (d = !0);
                    return {
                        nodesChanged: c,
                        edgesChanged: d
                    };
                }
            }, {
                key: "onDragStart",
                value: function(a) {
                    void 0 === this.drag.pointer && this.onTouch(a);
                    var b = this.selectionHandler.getNodeAt(this.drag.pointer);
                    if (this.drag.dragging = !0, this.drag.selection = [], this.drag.translation = k.extend({}, this.body.view.translation), 
                    this.drag.nodeId = void 0, void 0 !== b && this.options.dragNodes === !0) {
                        this.drag.nodeId = b.id, b.isSelected() === !1 && (this.selectionHandler.unselectAll(), 
                        this.selectionHandler.selectObject(b)), this.selectionHandler._generateClickEvent("dragStart", a, this.drag.pointer);
                        var c = this.selectionHandler.selectionObj.nodes;
                        for (var d in c) if (c.hasOwnProperty(d)) {
                            var e = c[d], f = {
                                id: e.id,
                                node: e,
                                x: e.x,
                                y: e.y,
                                xFixed: e.options.fixed.x,
                                yFixed: e.options.fixed.y
                            };
                            e.options.fixed.x = !0, e.options.fixed.y = !0, this.drag.selection.push(f);
                        }
                    } else this.selectionHandler._generateClickEvent("dragStart", a, this.drag.pointer, void 0, !0);
                }
            }, {
                key: "onDrag",
                value: function(a) {
                    var b = this;
                    if (this.drag.pinched !== !0) {
                        this.body.emitter.emit("unlockNode");
                        var c = this.getPointer(a.center), d = this.drag.selection;
                        if (d && d.length && this.options.dragNodes === !0) !function() {
                            b.selectionHandler._generateClickEvent("dragging", a, c);
                            var e = c.x - b.drag.pointer.x, f = c.y - b.drag.pointer.y;
                            d.forEach(function(a) {
                                var c = a.node;
                                a.xFixed === !1 && (c.x = b.canvas._XconvertDOMtoCanvas(b.canvas._XconvertCanvasToDOM(a.x) + e)), 
                                a.yFixed === !1 && (c.y = b.canvas._YconvertDOMtoCanvas(b.canvas._YconvertCanvasToDOM(a.y) + f));
                            }), b.body.emitter.emit("startSimulation");
                        }(); else if (this.options.dragView === !0) {
                            if (this.selectionHandler._generateClickEvent("dragging", a, c, void 0, !0), void 0 === this.drag.pointer) return void this.onDragStart(a);
                            var e = c.x - this.drag.pointer.x, f = c.y - this.drag.pointer.y;
                            this.body.view.translation = {
                                x: this.drag.translation.x + e,
                                y: this.drag.translation.y + f
                            }, this.body.emitter.emit("_redraw");
                        }
                    }
                }
            }, {
                key: "onDragEnd",
                value: function(a) {
                    this.drag.dragging = !1;
                    var b = this.drag.selection;
                    b && b.length ? (b.forEach(function(a) {
                        a.node.options.fixed.x = a.xFixed, a.node.options.fixed.y = a.yFixed;
                    }), this.selectionHandler._generateClickEvent("dragEnd", a, this.getPointer(a.center)), 
                    this.body.emitter.emit("startSimulation")) : (this.selectionHandler._generateClickEvent("dragEnd", a, this.getPointer(a.center), void 0, !0), 
                    this.body.emitter.emit("_requestRedraw"));
                }
            }, {
                key: "onPinch",
                value: function(a) {
                    var b = this.getPointer(a.center);
                    this.drag.pinched = !0, void 0 === this.pinch.scale && (this.pinch.scale = 1);
                    var c = this.pinch.scale * a.scale;
                    this.zoom(c, b);
                }
            }, {
                key: "zoom",
                value: function(a, b) {
                    if (this.options.zoomView === !0) {
                        var c = this.body.view.scale;
                        1e-5 > a && (a = 1e-5), a > 10 && (a = 10);
                        var d = void 0;
                        void 0 !== this.drag && this.drag.dragging === !0 && (d = this.canvas.DOMtoCanvas(this.drag.pointer));
                        var e = this.body.view.translation, f = a / c, g = (1 - f) * b.x + e.x * f, h = (1 - f) * b.y + e.y * f;
                        if (this.body.view.scale = a, this.body.view.translation = {
                            x: g,
                            y: h
                        }, void 0 != d) {
                            var i = this.canvas.canvasToDOM(d);
                            this.drag.pointer.x = i.x, this.drag.pointer.y = i.y;
                        }
                        this.body.emitter.emit("_requestRedraw"), a > c ? this.body.emitter.emit("zoom", {
                            direction: "+",
                            scale: this.body.view.scale
                        }) : this.body.emitter.emit("zoom", {
                            direction: "-",
                            scale: this.body.view.scale
                        });
                    }
                }
            }, {
                key: "onMouseWheel",
                value: function(a) {
                    if (this.options.zoomView === !0) {
                        var b = 0;
                        if (a.wheelDelta ? b = a.wheelDelta / 120 : a.detail && (b = -a.detail / 3), 0 !== b) {
                            var c = this.body.view.scale, d = b / 10;
                            0 > b && (d /= 1 - d), c *= 1 + d;
                            var e = this.getPointer({
                                x: a.clientX,
                                y: a.clientY
                            });
                            this.zoom(c, e);
                        }
                        a.preventDefault();
                    }
                }
            }, {
                key: "onMouseMove",
                value: function(a) {
                    var b = this, c = this.getPointer({
                        x: a.clientX,
                        y: a.clientY
                    }), d = !1;
                    if (void 0 !== this.popup && (this.popup.hidden === !1 && this._checkHidePopup(c), 
                    this.popup.hidden === !1 && (d = !0, this.popup.setPosition(c.x + 3, c.y - 5), this.popup.show())), 
                    this.options.keyboard.bindToWindow === !1 && this.options.keyboard.enabled === !0 && this.canvas.frame.focus(), 
                    d === !1 && (void 0 !== this.popupTimer && (clearInterval(this.popupTimer), this.popupTimer = void 0), 
                    this.drag.dragging || (this.popupTimer = setTimeout(function() {
                        return b._checkShowPopup(c);
                    }, this.options.tooltipDelay))), this.options.hover === !0) {
                        var e = this.selectionHandler.getNodeAt(c);
                        void 0 === e && (e = this.selectionHandler.getEdgeAt(c)), this.selectionHandler.hoverObject(e);
                    }
                }
            }, {
                key: "_checkShowPopup",
                value: function(a) {
                    var b = this.canvas._XconvertDOMtoCanvas(a.x), c = this.canvas._YconvertDOMtoCanvas(a.y), d = {
                        left: b,
                        top: c,
                        right: b,
                        bottom: c
                    }, e = void 0 === this.popupObj ? void 0 : this.popupObj.id, f = !1, g = "node";
                    if (void 0 === this.popupObj) {
                        for (var h = this.body.nodeIndices, i = this.body.nodes, k = void 0, l = [], m = 0; m < h.length; m++) k = i[h[m]], 
                        k.isOverlappingWith(d) === !0 && void 0 !== k.getTitle() && l.push(h[m]);
                        l.length > 0 && (this.popupObj = i[l[l.length - 1]], f = !0);
                    }
                    if (void 0 === this.popupObj && f === !1) {
                        for (var n = this.body.edgeIndices, o = this.body.edges, p = void 0, q = [], r = 0; r < n.length; r++) p = o[n[r]], 
                        p.isOverlappingWith(d) === !0 && p.connected === !0 && void 0 !== p.getTitle() && q.push(n[r]);
                        q.length > 0 && (this.popupObj = o[q[q.length - 1]], g = "edge");
                    }
                    void 0 !== this.popupObj ? this.popupObj.id !== e && (void 0 === this.popup && (this.popup = new j["default"](this.canvas.frame)), 
                    this.popup.popupTargetType = g, this.popup.popupTargetId = this.popupObj.id, this.popup.setPosition(a.x + 3, a.y - 5), 
                    this.popup.setText(this.popupObj.getTitle()), this.popup.show(), this.body.emitter.emit("showPopup", this.popupObj.id)) : void 0 !== this.popup && (this.popup.hide(), 
                    this.body.emitter.emit("hidePopup"));
                }
            }, {
                key: "_checkHidePopup",
                value: function(a) {
                    var b = this.selectionHandler._pointerToPositionObject(a), c = !1;
                    if ("node" === this.popup.popupTargetType) {
                        if (void 0 !== this.body.nodes[this.popup.popupTargetId] && (c = this.body.nodes[this.popup.popupTargetId].isOverlappingWith(b), 
                        c === !0)) {
                            var d = this.selectionHandler.getNodeAt(a);
                            c = d.id === this.popup.popupTargetId;
                        }
                    } else void 0 === this.selectionHandler.getNodeAt(a) && void 0 !== this.body.edges[this.popup.popupTargetId] && (c = this.body.edges[this.popup.popupTargetId].isOverlappingWith(b));
                    c === !1 && (this.popupObj = void 0, this.popup.hide(), this.body.emitter.emit("hidePopup"));
                }
            } ]), a;
        }();
        b["default"] = l;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = (c(1), c(22)), g = c(25), h = c(43), i = function() {
            function a(b, c) {
                var e = this;
                d(this, a), this.body = b, this.canvas = c, this.iconsCreated = !1, this.navigationHammers = [], 
                this.boundFunctions = {}, this.touchTime = 0, this.activated = !1, this.body.emitter.on("activate", function() {
                    e.activated = !0, e.configureKeyboardBindings();
                }), this.body.emitter.on("deactivate", function() {
                    e.activated = !1, e.configureKeyboardBindings();
                }), this.body.emitter.on("destroy", function() {
                    void 0 !== e.keycharm && e.keycharm.destroy();
                }), this.options = {};
            }
            return e(a, [ {
                key: "setOptions",
                value: function(a) {
                    void 0 !== a && (this.options = a, this.create());
                }
            }, {
                key: "create",
                value: function() {
                    this.options.navigationButtons === !0 ? this.iconsCreated === !1 && this.loadNavigationElements() : this.iconsCreated === !0 && this.cleanNavigation(), 
                    this.configureKeyboardBindings();
                }
            }, {
                key: "cleanNavigation",
                value: function() {
                    if (0 != this.navigationHammers.length) {
                        for (var a = 0; a < this.navigationHammers.length; a++) this.navigationHammers[a].destroy();
                        this.navigationHammers = [];
                    }
                    this.navigationDOM && this.navigationDOM.wrapper && this.navigationDOM.wrapper.parentNode && this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper), 
                    this.iconsCreated = !1;
                }
            }, {
                key: "loadNavigationElements",
                value: function() {
                    var a = this;
                    this.cleanNavigation(), this.navigationDOM = {};
                    var b = [ "up", "down", "left", "right", "zoomIn", "zoomOut", "zoomExtends" ], c = [ "_moveUp", "_moveDown", "_moveLeft", "_moveRight", "_zoomIn", "_zoomOut", "_fit" ];
                    this.navigationDOM.wrapper = document.createElement("div"), this.navigationDOM.wrapper.className = "vis-navigation", 
                    this.canvas.frame.appendChild(this.navigationDOM.wrapper);
                    for (var d = 0; d < b.length; d++) {
                        this.navigationDOM[b[d]] = document.createElement("div"), this.navigationDOM[b[d]].className = "vis-button vis-" + b[d], 
                        this.navigationDOM.wrapper.appendChild(this.navigationDOM[b[d]]);
                        var e = new f(this.navigationDOM[b[d]]);
                        "_fit" === c[d] ? g.onTouch(e, this._fit.bind(this)) : g.onTouch(e, this.bindToRedraw.bind(this, c[d])), 
                        this.navigationHammers.push(e);
                    }
                    var h = new f(this.canvas.frame);
                    g.onRelease(h, function() {
                        a._stopMovement();
                    }), this.navigationHammers.push(h), this.iconsCreated = !0;
                }
            }, {
                key: "bindToRedraw",
                value: function(a) {
                    void 0 === this.boundFunctions[a] && (this.boundFunctions[a] = this[a].bind(this), 
                    this.body.emitter.on("initRedraw", this.boundFunctions[a]), this.body.emitter.emit("_startRendering"));
                }
            }, {
                key: "unbindFromRedraw",
                value: function(a) {
                    void 0 !== this.boundFunctions[a] && (this.body.emitter.off("initRedraw", this.boundFunctions[a]), 
                    this.body.emitter.emit("_stopRendering"), delete this.boundFunctions[a]);
                }
            }, {
                key: "_fit",
                value: function() {
                    new Date().valueOf() - this.touchTime > 700 && (this.body.emitter.emit("fit", {
                        duration: 700
                    }), this.touchTime = new Date().valueOf());
                }
            }, {
                key: "_stopMovement",
                value: function() {
                    for (var a in this.boundFunctions) this.boundFunctions.hasOwnProperty(a) && (this.body.emitter.off("initRedraw", this.boundFunctions[a]), 
                    this.body.emitter.emit("_stopRendering"));
                    this.boundFunctions = {};
                }
            }, {
                key: "_moveUp",
                value: function() {
                    this.body.view.translation.y += this.options.keyboard.speed.y;
                }
            }, {
                key: "_moveDown",
                value: function() {
                    this.body.view.translation.y -= this.options.keyboard.speed.y;
                }
            }, {
                key: "_moveLeft",
                value: function() {
                    this.body.view.translation.x += this.options.keyboard.speed.x;
                }
            }, {
                key: "_moveRight",
                value: function() {
                    this.body.view.translation.x -= this.options.keyboard.speed.x;
                }
            }, {
                key: "_zoomIn",
                value: function() {
                    this.body.view.scale *= 1 + this.options.keyboard.speed.zoom, this.body.emitter.emit("zoom", {
                        direction: "+",
                        scale: this.body.view.scale
                    });
                }
            }, {
                key: "_zoomOut",
                value: function() {
                    this.body.view.scale /= 1 + this.options.keyboard.speed.zoom, this.body.emitter.emit("zoom", {
                        direction: "-",
                        scale: this.body.view.scale
                    });
                }
            }, {
                key: "configureKeyboardBindings",
                value: function() {
                    var a = this;
                    void 0 !== this.keycharm && this.keycharm.destroy(), this.options.keyboard.enabled === !0 && (this.options.keyboard.bindToWindow === !0 ? this.keycharm = h({
                        container: window,
                        preventDefault: !0
                    }) : this.keycharm = h({
                        container: this.canvas.frame,
                        preventDefault: !0
                    }), this.keycharm.reset(), this.activated === !0 && (this.keycharm.bind("up", function() {
                        a.bindToRedraw("_moveUp");
                    }, "keydown"), this.keycharm.bind("down", function() {
                        a.bindToRedraw("_moveDown");
                    }, "keydown"), this.keycharm.bind("left", function() {
                        a.bindToRedraw("_moveLeft");
                    }, "keydown"), this.keycharm.bind("right", function() {
                        a.bindToRedraw("_moveRight");
                    }, "keydown"), this.keycharm.bind("=", function() {
                        a.bindToRedraw("_zoomIn");
                    }, "keydown"), this.keycharm.bind("num+", function() {
                        a.bindToRedraw("_zoomIn");
                    }, "keydown"), this.keycharm.bind("num-", function() {
                        a.bindToRedraw("_zoomOut");
                    }, "keydown"), this.keycharm.bind("-", function() {
                        a.bindToRedraw("_zoomOut");
                    }, "keydown"), this.keycharm.bind("[", function() {
                        a.bindToRedraw("_zoomOut");
                    }, "keydown"), this.keycharm.bind("]", function() {
                        a.bindToRedraw("_zoomIn");
                    }, "keydown"), this.keycharm.bind("pageup", function() {
                        a.bindToRedraw("_zoomIn");
                    }, "keydown"), this.keycharm.bind("pagedown", function() {
                        a.bindToRedraw("_zoomOut");
                    }, "keydown"), this.keycharm.bind("up", function() {
                        a.unbindFromRedraw("_moveUp");
                    }, "keyup"), this.keycharm.bind("down", function() {
                        a.unbindFromRedraw("_moveDown");
                    }, "keyup"), this.keycharm.bind("left", function() {
                        a.unbindFromRedraw("_moveLeft");
                    }, "keyup"), this.keycharm.bind("right", function() {
                        a.unbindFromRedraw("_moveRight");
                    }, "keyup"), this.keycharm.bind("=", function() {
                        a.unbindFromRedraw("_zoomIn");
                    }, "keyup"), this.keycharm.bind("num+", function() {
                        a.unbindFromRedraw("_zoomIn");
                    }, "keyup"), this.keycharm.bind("num-", function() {
                        a.unbindFromRedraw("_zoomOut");
                    }, "keyup"), this.keycharm.bind("-", function() {
                        a.unbindFromRedraw("_zoomOut");
                    }, "keyup"), this.keycharm.bind("[", function() {
                        a.unbindFromRedraw("_zoomOut");
                    }, "keyup"), this.keycharm.bind("]", function() {
                        a.unbindFromRedraw("_zoomIn");
                    }, "keyup"), this.keycharm.bind("pageup", function() {
                        a.unbindFromRedraw("_zoomIn");
                    }, "keyup"), this.keycharm.bind("pagedown", function() {
                        a.unbindFromRedraw("_zoomOut");
                    }, "keyup")));
                }
            } ]), a;
        }();
        b["default"] = i;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a(b) {
                c(this, a), this.container = b, this.x = 0, this.y = 0, this.padding = 5, this.hidden = !1, 
                this.frame = document.createElement("div"), this.frame.className = "vis-network-tooltip", 
                this.container.appendChild(this.frame);
            }
            return d(a, [ {
                key: "setPosition",
                value: function(a, b) {
                    this.x = parseInt(a), this.y = parseInt(b);
                }
            }, {
                key: "setText",
                value: function(a) {
                    a instanceof Element ? (this.frame.innerHTML = "", this.frame.appendChild(a)) : this.frame.innerHTML = a;
                }
            }, {
                key: "show",
                value: function(a) {
                    if (void 0 === a && (a = !0), a === !0) {
                        var b = this.frame.clientHeight, c = this.frame.clientWidth, d = this.frame.parentNode.clientHeight, e = this.frame.parentNode.clientWidth, f = this.y - b;
                        f + b + this.padding > d && (f = d - b - this.padding), f < this.padding && (f = this.padding);
                        var g = this.x;
                        g + c + this.padding > e && (g = e - c - this.padding), g < this.padding && (g = this.padding), 
                        this.frame.style.left = g + "px", this.frame.style.top = f + "px", this.frame.style.visibility = "visible", 
                        this.hidden = !1;
                    } else this.hide();
                }
            }, {
                key: "hide",
                value: function() {
                    this.hidden = !0, this.frame.style.visibility = "hidden";
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), g = c(62), h = d(g), i = c(82), j = d(i), k = c(1), l = function() {
            function a(b, c) {
                var d = this;
                e(this, a), this.body = b, this.canvas = c, this.selectionObj = {
                    nodes: [],
                    edges: []
                }, this.hoverObj = {
                    nodes: {},
                    edges: {}
                }, this.options = {}, this.defaultOptions = {
                    multiselect: !1,
                    selectable: !0,
                    selectConnectedEdges: !0,
                    hoverConnectedEdges: !0
                }, k.extend(this.options, this.defaultOptions), this.body.emitter.on("_dataChanged", function() {
                    d.updateSelection();
                });
            }
            return f(a, [ {
                key: "setOptions",
                value: function(a) {
                    if (void 0 !== a) {
                        var b = [ "multiselect", "hoverConnectedEdges", "selectable", "selectConnectedEdges" ];
                        k.selectiveDeepExtend(b, this.options, a);
                    }
                }
            }, {
                key: "selectOnPoint",
                value: function(a) {
                    var b = !1;
                    if (this.options.selectable === !0) {
                        var c = this.getNodeAt(a) || this.getEdgeAt(a);
                        this.unselectAll(), void 0 !== c && (b = this.selectObject(c)), this.body.emitter.emit("_requestRedraw");
                    }
                    return b;
                }
            }, {
                key: "selectAdditionalOnPoint",
                value: function(a) {
                    var b = !1;
                    if (this.options.selectable === !0) {
                        var c = this.getNodeAt(a) || this.getEdgeAt(a);
                        void 0 !== c && (b = !0, c.isSelected() === !0 ? this.deselectObject(c) : this.selectObject(c), 
                        this.body.emitter.emit("_requestRedraw"));
                    }
                    return b;
                }
            }, {
                key: "_generateClickEvent",
                value: function(a, b, c, d) {
                    var e = arguments.length <= 4 || void 0 === arguments[4] ? !1 : arguments[4], f = void 0;
                    f = e === !0 ? {
                        nodes: [],
                        edges: []
                    } : this.getSelection(), f.pointer = {
                        DOM: {
                            x: c.x,
                            y: c.y
                        },
                        canvas: this.canvas.DOMtoCanvas(c)
                    }, f.event = b, void 0 !== d && (f.previousSelection = d), this.body.emitter.emit(a, f);
                }
            }, {
                key: "selectObject",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? this.options.selectConnectedEdges : arguments[1];
                    return void 0 !== a ? (a instanceof h["default"] && b === !0 && this._selectConnectedEdges(a), 
                    a.select(), this._addToSelection(a), !0) : !1;
                }
            }, {
                key: "deselectObject",
                value: function(a) {
                    a.isSelected() === !0 && (a.selected = !1, this._removeFromSelection(a));
                }
            }, {
                key: "_getAllNodesOverlappingWith",
                value: function(a) {
                    for (var b = [], c = this.body.nodes, d = 0; d < this.body.nodeIndices.length; d++) {
                        var e = this.body.nodeIndices[d];
                        c[e].isOverlappingWith(a) && b.push(e);
                    }
                    return b;
                }
            }, {
                key: "_pointerToPositionObject",
                value: function(a) {
                    var b = this.canvas.DOMtoCanvas(a);
                    return {
                        left: b.x - 1,
                        top: b.y + 1,
                        right: b.x + 1,
                        bottom: b.y - 1
                    };
                }
            }, {
                key: "getNodeAt",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1], c = this._pointerToPositionObject(a), d = this._getAllNodesOverlappingWith(c);
                    return d.length > 0 ? b === !0 ? this.body.nodes[d[d.length - 1]] : d[d.length - 1] : void 0;
                }
            }, {
                key: "_getEdgesOverlappingWith",
                value: function(a, b) {
                    for (var c = this.body.edges, d = 0; d < this.body.edgeIndices.length; d++) {
                        var e = this.body.edgeIndices[d];
                        c[e].isOverlappingWith(a) && b.push(e);
                    }
                }
            }, {
                key: "_getAllEdgesOverlappingWith",
                value: function(a) {
                    var b = [];
                    return this._getEdgesOverlappingWith(a, b), b;
                }
            }, {
                key: "getEdgeAt",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1], c = this._pointerToPositionObject(a), d = this._getAllEdgesOverlappingWith(c);
                    return d.length > 0 ? b === !0 ? this.body.edges[d[d.length - 1]] : d[d.length - 1] : void 0;
                }
            }, {
                key: "_addToSelection",
                value: function(a) {
                    a instanceof h["default"] ? this.selectionObj.nodes[a.id] = a : this.selectionObj.edges[a.id] = a;
                }
            }, {
                key: "_addToHover",
                value: function(a) {
                    a instanceof h["default"] ? this.hoverObj.nodes[a.id] = a : this.hoverObj.edges[a.id] = a;
                }
            }, {
                key: "_removeFromSelection",
                value: function(a) {
                    a instanceof h["default"] ? (delete this.selectionObj.nodes[a.id], this._unselectConnectedEdges(a)) : delete this.selectionObj.edges[a.id];
                }
            }, {
                key: "unselectAll",
                value: function() {
                    for (var a in this.selectionObj.nodes) this.selectionObj.nodes.hasOwnProperty(a) && this.selectionObj.nodes[a].unselect();
                    for (var b in this.selectionObj.edges) this.selectionObj.edges.hasOwnProperty(b) && this.selectionObj.edges[b].unselect();
                    this.selectionObj = {
                        nodes: {},
                        edges: {}
                    };
                }
            }, {
                key: "_getSelectedNodeCount",
                value: function() {
                    var a = 0;
                    for (var b in this.selectionObj.nodes) this.selectionObj.nodes.hasOwnProperty(b) && (a += 1);
                    return a;
                }
            }, {
                key: "_getSelectedNode",
                value: function() {
                    for (var a in this.selectionObj.nodes) if (this.selectionObj.nodes.hasOwnProperty(a)) return this.selectionObj.nodes[a];
                }
            }, {
                key: "_getSelectedEdge",
                value: function() {
                    for (var a in this.selectionObj.edges) if (this.selectionObj.edges.hasOwnProperty(a)) return this.selectionObj.edges[a];
                }
            }, {
                key: "_getSelectedEdgeCount",
                value: function() {
                    var a = 0;
                    for (var b in this.selectionObj.edges) this.selectionObj.edges.hasOwnProperty(b) && (a += 1);
                    return a;
                }
            }, {
                key: "_getSelectedObjectCount",
                value: function() {
                    var a = 0;
                    for (var b in this.selectionObj.nodes) this.selectionObj.nodes.hasOwnProperty(b) && (a += 1);
                    for (var c in this.selectionObj.edges) this.selectionObj.edges.hasOwnProperty(c) && (a += 1);
                    return a;
                }
            }, {
                key: "_selectionIsEmpty",
                value: function() {
                    for (var a in this.selectionObj.nodes) if (this.selectionObj.nodes.hasOwnProperty(a)) return !1;
                    for (var b in this.selectionObj.edges) if (this.selectionObj.edges.hasOwnProperty(b)) return !1;
                    return !0;
                }
            }, {
                key: "_clusterInSelection",
                value: function() {
                    for (var a in this.selectionObj.nodes) if (this.selectionObj.nodes.hasOwnProperty(a) && this.selectionObj.nodes[a].clusterSize > 1) return !0;
                    return !1;
                }
            }, {
                key: "_selectConnectedEdges",
                value: function(a) {
                    for (var b = 0; b < a.edges.length; b++) {
                        var c = a.edges[b];
                        c.select(), this._addToSelection(c);
                    }
                }
            }, {
                key: "_hoverConnectedEdges",
                value: function(a) {
                    for (var b = 0; b < a.edges.length; b++) {
                        var c = a.edges[b];
                        c.hover = !0, this._addToHover(c);
                    }
                }
            }, {
                key: "_unselectConnectedEdges",
                value: function(a) {
                    for (var b = 0; b < a.edges.length; b++) {
                        var c = a.edges[b];
                        c.unselect(), this._removeFromSelection(c);
                    }
                }
            }, {
                key: "blurObject",
                value: function(a) {
                    a.hover === !0 && (a.hover = !1, a instanceof h["default"] ? this.body.emitter.emit("blurNode", {
                        node: a.id
                    }) : this.body.emitter.emit("blurEdge", {
                        edge: a.id
                    }));
                }
            }, {
                key: "hoverObject",
                value: function(a) {
                    var b = !1;
                    for (var c in this.hoverObj.nodes) this.hoverObj.nodes.hasOwnProperty(c) && (void 0 === a || a instanceof h["default"] && a.id != c || a instanceof j["default"]) && (this.blurObject(this.hoverObj.nodes[c]), 
                    delete this.hoverObj.nodes[c], b = !0);
                    for (var d in this.hoverObj.edges) this.hoverObj.edges.hasOwnProperty(d) && (b === !0 ? (this.hoverObj.edges[d].hover = !1, 
                    delete this.hoverObj.edges[d]) : void 0 === a && (this.blurObject(this.hoverObj.edges[d]), 
                    delete this.hoverObj.edges[d], b = !0));
                    void 0 !== a && (a.hover === !1 && (a.hover = !0, this._addToHover(a), b = !0, a instanceof h["default"] ? this.body.emitter.emit("hoverNode", {
                        node: a.id
                    }) : this.body.emitter.emit("hoverEdge", {
                        edge: a.id
                    })), a instanceof h["default"] && this.options.hoverConnectedEdges === !0 && this._hoverConnectedEdges(a)), 
                    b === !0 && this.body.emitter.emit("_requestRedraw");
                }
            }, {
                key: "getSelection",
                value: function() {
                    var a = this.getSelectedNodes(), b = this.getSelectedEdges();
                    return {
                        nodes: a,
                        edges: b
                    };
                }
            }, {
                key: "getSelectedNodes",
                value: function() {
                    var a = [];
                    if (this.options.selectable === !0) for (var b in this.selectionObj.nodes) this.selectionObj.nodes.hasOwnProperty(b) && a.push(this.selectionObj.nodes[b].id);
                    return a;
                }
            }, {
                key: "getSelectedEdges",
                value: function() {
                    var a = [];
                    if (this.options.selectable === !0) for (var b in this.selectionObj.edges) this.selectionObj.edges.hasOwnProperty(b) && a.push(this.selectionObj.edges[b].id);
                    return a;
                }
            }, {
                key: "setSelection",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], c = void 0, d = void 0;
                    if (!a || !a.nodes && !a.edges) throw "Selection must be an object with nodes and/or edges properties";
                    if ((b.unselectAll || void 0 === b.unselectAll) && this.unselectAll(), a.nodes) for (c = 0; c < a.nodes.length; c++) {
                        d = a.nodes[c];
                        var e = this.body.nodes[d];
                        if (!e) throw new RangeError('Node with id "' + d + '" not found');
                        this.selectObject(e, b.highlightEdges);
                    }
                    if (a.edges) for (c = 0; c < a.edges.length; c++) {
                        d = a.edges[c];
                        var f = this.body.edges[d];
                        if (!f) throw new RangeError('Edge with id "' + d + '" not found');
                        this.selectObject(f);
                    }
                    this.body.emitter.emit("_requestRedraw");
                }
            }, {
                key: "selectNodes",
                value: function(a) {
                    var b = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1];
                    if (!a || void 0 === a.length) throw "Selection must be an array with ids";
                    this.setSelection({
                        nodes: a
                    }, {
                        highlightEdges: b
                    });
                }
            }, {
                key: "selectEdges",
                value: function(a) {
                    if (!a || void 0 === a.length) throw "Selection must be an array with ids";
                    this.setSelection({
                        edges: a
                    });
                }
            }, {
                key: "updateSelection",
                value: function() {
                    for (var a in this.selectionObj.nodes) this.selectionObj.nodes.hasOwnProperty(a) && (this.body.nodes.hasOwnProperty(a) || delete this.selectionObj.nodes[a]);
                    for (var b in this.selectionObj.edges) this.selectionObj.edges.hasOwnProperty(b) && (this.body.edges.hasOwnProperty(b) || delete this.selectionObj.edges[b]);
                }
            } ]), a;
        }();
        b["default"] = l;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                var c = [], d = !0, e = !1, f = void 0;
                try {
                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value), 
                    !b || c.length !== b); d = !0) ;
                } catch (i) {
                    e = !0, f = i;
                } finally {
                    try {
                        !d && h["return"] && h["return"]();
                    } finally {
                        if (e) throw f;
                    }
                }
                return c;
            }
            return function(b, c) {
                if (Array.isArray(b)) return b;
                if (Symbol.iterator in Object(b)) return a(b, c);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            };
        }(), g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) {
            return typeof a;
        } : function(a) {
            return a && "function" == typeof Symbol && a.constructor === Symbol ? "symbol" : typeof a;
        }, h = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), i = c(100), j = d(i), k = c(1), l = function() {
            function a(b) {
                e(this, a), this.body = b, this.initialRandomSeed = Math.round(1e6 * Math.random()), 
                this.randomSeed = this.initialRandomSeed, this.setPhysics = !1, this.options = {}, 
                this.optionsBackup = {
                    physics: {}
                }, this.defaultOptions = {
                    randomSeed: void 0,
                    improvedLayout: !0,
                    hierarchical: {
                        enabled: !1,
                        levelSeparation: 150,
                        nodeSpacing: 100,
                        treeSpacing: 200,
                        blockShifting: !0,
                        edgeMinimization: !0,
                        parentCentralization: !0,
                        direction: "UD",
                        sortMethod: "hubsize"
                    }
                }, k.extend(this.options, this.defaultOptions), this.bindEventListeners();
            }
            return h(a, [ {
                key: "bindEventListeners",
                value: function() {
                    var a = this;
                    this.body.emitter.on("_dataChanged", function() {
                        a.setupHierarchicalLayout();
                    }), this.body.emitter.on("_dataLoaded", function() {
                        a.layoutNetwork();
                    }), this.body.emitter.on("_resetHierarchicalLayout", function() {
                        a.setupHierarchicalLayout();
                    });
                }
            }, {
                key: "setOptions",
                value: function(a, b) {
                    if (void 0 !== a) {
                        var c = this.options.hierarchical.enabled;
                        if (k.selectiveDeepExtend([ "randomSeed", "improvedLayout" ], this.options, a), 
                        k.mergeOptions(this.options, a, "hierarchical"), void 0 !== a.randomSeed && (this.initialRandomSeed = a.randomSeed), 
                        this.options.hierarchical.enabled === !0) return c === !0 && this.body.emitter.emit("refresh", !0), 
                        "RL" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? this.options.hierarchical.levelSeparation > 0 && (this.options.hierarchical.levelSeparation *= -1) : this.options.hierarchical.levelSeparation < 0 && (this.options.hierarchical.levelSeparation *= -1), 
                        this.body.emitter.emit("_resetHierarchicalLayout"), this.adaptAllOptionsForHierarchicalLayout(b);
                        if (c === !0) return this.body.emitter.emit("refresh"), k.deepExtend(b, this.optionsBackup);
                    }
                    return b;
                }
            }, {
                key: "adaptAllOptionsForHierarchicalLayout",
                value: function(a) {
                    if (this.options.hierarchical.enabled === !0) {
                        void 0 === a.physics || a.physics === !0 ? (a.physics = {
                            enabled: void 0 === this.optionsBackup.physics.enabled ? !0 : this.optionsBackup.physics.enabled,
                            solver: "hierarchicalRepulsion"
                        }, this.optionsBackup.physics.enabled = void 0 === this.optionsBackup.physics.enabled ? !0 : this.optionsBackup.physics.enabled, 
                        this.optionsBackup.physics.solver = this.optionsBackup.physics.solver || "barnesHut") : "object" === g(a.physics) ? (this.optionsBackup.physics.enabled = void 0 === a.physics.enabled ? !0 : a.physics.enabled, 
                        this.optionsBackup.physics.solver = a.physics.solver || "barnesHut", a.physics.solver = "hierarchicalRepulsion") : a.physics !== !1 && (this.optionsBackup.physics.solver = "barnesHut", 
                        a.physics = {
                            solver: "hierarchicalRepulsion"
                        });
                        var b = "horizontal";
                        "RL" !== this.options.hierarchical.direction && "LR" !== this.options.hierarchical.direction || (b = "vertical"), 
                        void 0 === a.edges ? (this.optionsBackup.edges = {
                            smooth: {
                                enabled: !0,
                                type: "dynamic"
                            }
                        }, a.edges = {
                            smooth: !1
                        }) : void 0 === a.edges.smooth ? (this.optionsBackup.edges = {
                            smooth: {
                                enabled: !0,
                                type: "dynamic"
                            }
                        }, a.edges.smooth = !1) : "boolean" == typeof a.edges.smooth ? (this.optionsBackup.edges = {
                            smooth: a.edges.smooth
                        }, a.edges.smooth = {
                            enabled: a.edges.smooth,
                            type: b
                        }) : (void 0 !== a.edges.smooth.type && "dynamic" !== a.edges.smooth.type && (b = a.edges.smooth.type), 
                        this.optionsBackup.edges = {
                            smooth: void 0 === a.edges.smooth.enabled ? !0 : a.edges.smooth.enabled,
                            type: void 0 === a.edges.smooth.type ? "dynamic" : a.edges.smooth.type,
                            roundness: void 0 === a.edges.smooth.roundness ? .5 : a.edges.smooth.roundness,
                            forceDirection: void 0 === a.edges.smooth.forceDirection ? !1 : a.edges.smooth.forceDirection
                        }, a.edges.smooth = {
                            enabled: void 0 === a.edges.smooth.enabled ? !0 : a.edges.smooth.enabled,
                            type: b,
                            roundness: void 0 === a.edges.smooth.roundness ? .5 : a.edges.smooth.roundness,
                            forceDirection: void 0 === a.edges.smooth.forceDirection ? !1 : a.edges.smooth.forceDirection
                        }), this.body.emitter.emit("_forceDisableDynamicCurves", b);
                    }
                    return a;
                }
            }, {
                key: "seededRandom",
                value: function() {
                    var a = 1e4 * Math.sin(this.randomSeed++);
                    return a - Math.floor(a);
                }
            }, {
                key: "positionInitially",
                value: function(a) {
                    if (this.options.hierarchical.enabled !== !0) {
                        this.randomSeed = this.initialRandomSeed;
                        for (var b = 0; b < a.length; b++) {
                            var c = a[b], d = 1 * a.length + 10, e = 2 * Math.PI * this.seededRandom();
                            void 0 === c.x && (c.x = d * Math.cos(e)), void 0 === c.y && (c.y = d * Math.sin(e));
                        }
                    }
                }
            }, {
                key: "layoutNetwork",
                value: function() {
                    if (this.options.hierarchical.enabled !== !0 && this.options.improvedLayout === !0) {
                        for (var a = 0, b = 0; b < this.body.nodeIndices.length; b++) {
                            var c = this.body.nodes[this.body.nodeIndices[b]];
                            c.predefinedPosition === !0 && (a += 1);
                        }
                        if (a < .5 * this.body.nodeIndices.length) {
                            var d = 10, e = 0, f = 100;
                            if (this.body.nodeIndices.length > f) {
                                for (var g = this.body.nodeIndices.length; this.body.nodeIndices.length > f; ) {
                                    e += 1;
                                    var h = this.body.nodeIndices.length;
                                    e % 3 === 0 ? this.body.modules.clustering.clusterBridges() : this.body.modules.clustering.clusterOutliers();
                                    var i = this.body.nodeIndices.length;
                                    if (h == i && e % 3 !== 0 || e > d) return this._declusterAll(), this.body.emitter.emit("_layoutFailed"), 
                                    void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");
                                }
                                this.body.modules.kamadaKawai.setOptions({
                                    springLength: Math.max(150, 2 * g)
                                });
                            }
                            this.body.modules.kamadaKawai.solve(this.body.nodeIndices, this.body.edgeIndices, !0), 
                            this._shiftToCenter();
                            for (var j = 70, k = 0; k < this.body.nodeIndices.length; k++) this.body.nodes[this.body.nodeIndices[k]].x += (.5 - this.seededRandom()) * j, 
                            this.body.nodes[this.body.nodeIndices[k]].y += (.5 - this.seededRandom()) * j;
                            this._declusterAll(), this.body.emitter.emit("_repositionBezierNodes");
                        }
                    }
                }
            }, {
                key: "_shiftToCenter",
                value: function() {
                    for (var a = j["default"].getRangeCore(this.body.nodes, this.body.nodeIndices), b = j["default"].findCenter(a), c = 0; c < this.body.nodeIndices.length; c++) this.body.nodes[this.body.nodeIndices[c]].x -= b.x, 
                    this.body.nodes[this.body.nodeIndices[c]].y -= b.y;
                }
            }, {
                key: "_declusterAll",
                value: function() {
                    for (var a = !0; a === !0; ) {
                        a = !1;
                        for (var b = 0; b < this.body.nodeIndices.length; b++) this.body.nodes[this.body.nodeIndices[b]].isCluster === !0 && (a = !0, 
                        this.body.modules.clustering.openCluster(this.body.nodeIndices[b], {}, !1));
                        a === !0 && this.body.emitter.emit("_dataChanged");
                    }
                }
            }, {
                key: "getSeed",
                value: function() {
                    return this.initialRandomSeed;
                }
            }, {
                key: "setupHierarchicalLayout",
                value: function() {
                    if (this.options.hierarchical.enabled === !0 && this.body.nodeIndices.length > 0) {
                        var a = void 0, b = void 0, c = !1, d = !0, e = !1;
                        this.hierarchicalLevels = {}, this.lastNodeOnLevel = {}, this.hierarchicalChildrenReference = {}, 
                        this.hierarchicalParentReference = {}, this.hierarchicalTrees = {}, this.treeIndex = -1, 
                        this.distributionOrdering = {}, this.distributionIndex = {}, this.distributionOrderingPresence = {};
                        for (b in this.body.nodes) this.body.nodes.hasOwnProperty(b) && (a = this.body.nodes[b], 
                        void 0 === a.options.x && void 0 === a.options.y && (d = !1), void 0 !== a.options.level ? (c = !0, 
                        this.hierarchicalLevels[b] = a.options.level) : e = !0);
                        if (e === !0 && c === !0) throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");
                        e === !0 && ("hubsize" === this.options.hierarchical.sortMethod ? this._determineLevelsByHubsize() : "directed" === this.options.hierarchical.sortMethod ? this._determineLevelsDirected() : "custom" === this.options.hierarchical.sortMethod && this._determineLevelsCustomCallback());
                        for (var f in this.body.nodes) this.body.nodes.hasOwnProperty(f) && void 0 === this.hierarchicalLevels[f] && (this.hierarchicalLevels[f] = 0);
                        var g = this._getDistribution();
                        this._generateMap(), this._placeNodesByHierarchy(g), this._condenseHierarchy(), 
                        this._shiftToCenter();
                    }
                }
            }, {
                key: "_condenseHierarchy",
                value: function() {
                    var a = this, b = !1, c = {}, d = function() {
                        for (var b = h(), c = 0; c < b.length - 1; c++) {
                            var d = b[c].max - b[c + 1].min;
                            e(c + 1, d + a.options.hierarchical.treeSpacing);
                        }
                    }, e = function(b, c) {
                        for (var d in a.hierarchicalTrees) if (a.hierarchicalTrees.hasOwnProperty(d) && a.hierarchicalTrees[d] === b) {
                            var e = a.body.nodes[d], f = a._getPositionForHierarchy(e);
                            a._setPositionForHierarchy(e, f + c, void 0, !0);
                        }
                    }, g = function(b) {
                        var c = 1e9, d = -1e9;
                        for (var e in a.hierarchicalTrees) if (a.hierarchicalTrees.hasOwnProperty(e) && a.hierarchicalTrees[e] === b) {
                            var f = a._getPositionForHierarchy(a.body.nodes[e]);
                            c = Math.min(f, c), d = Math.max(f, d);
                        }
                        return {
                            min: c,
                            max: d
                        };
                    }, h = function() {
                        for (var b = [], c = 0; c <= a.treeIndex; c++) b.push(g(c));
                        return b;
                    }, i = function u(b, c) {
                        if (c[b.id] = !0, a.hierarchicalChildrenReference[b.id]) {
                            var d = a.hierarchicalChildrenReference[b.id];
                            if (d.length > 0) for (var e = 0; e < d.length; e++) u(a.body.nodes[d[e]], c);
                        }
                    }, j = function(b) {
                        var c = arguments.length <= 1 || void 0 === arguments[1] ? 1e9 : arguments[1], d = 1e9, e = 1e9, g = 1e9, h = -1e9;
                        for (var i in b) if (b.hasOwnProperty(i)) {
                            var j = a.body.nodes[i], k = a.hierarchicalLevels[j.id], l = a._getPositionForHierarchy(j), m = a._getSpaceAroundNode(j, b), n = f(m, 2), o = n[0], p = n[1];
                            d = Math.min(o, d), e = Math.min(p, e), c >= k && (g = Math.min(l, g), h = Math.max(l, h));
                        }
                        return [ g, h, d, e ];
                    }, k = function v(b) {
                        var c = a.hierarchicalLevels[b];
                        if (a.hierarchicalChildrenReference[b]) {
                            var d = a.hierarchicalChildrenReference[b];
                            if (d.length > 0) for (var e = 0; e < d.length; e++) c = Math.max(c, v(d[e]));
                        }
                        return c;
                    }, l = function(a, b) {
                        var c = k(a.id), d = k(b.id);
                        return Math.min(c, d);
                    }, m = function(b, c) {
                        var d = a.hierarchicalParentReference[b.id], e = a.hierarchicalParentReference[c.id];
                        if (void 0 === d || void 0 === e) return !1;
                        for (var f = 0; f < d.length; f++) for (var g = 0; g < e.length; g++) if (d[f] == e[g]) return !0;
                        return !1;
                    }, n = function(b, c, d) {
                        for (var e = 0; e < c.length; e++) {
                            var f = c[e], g = a.distributionOrdering[f];
                            if (g.length > 1) for (var h = 0; h < g.length - 1; h++) m(g[h], g[h + 1]) === !0 && a.hierarchicalTrees[g[h].id] === a.hierarchicalTrees[g[h + 1].id] && b(g[h], g[h + 1], d);
                        }
                    }, o = function(c, d) {
                        var e = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], g = a._getPositionForHierarchy(c), h = a._getPositionForHierarchy(d), k = Math.abs(h - g);
                        if (k > a.options.hierarchical.nodeSpacing) {
                            var m = {};
                            m[c.id] = !0;
                            var n = {};
                            n[d.id] = !0, i(c, m), i(d, n);
                            var o = l(c, d), p = j(m, o), q = f(p, 4), r = (q[0], q[1]), s = (q[2], q[3], j(n, o)), t = f(s, 4), u = t[0], v = (t[1], 
                            t[2]), w = (t[3], Math.abs(r - u));
                            if (w > a.options.hierarchical.nodeSpacing) {
                                var x = r - u + a.options.hierarchical.nodeSpacing;
                                x < -v + a.options.hierarchical.nodeSpacing && (x = -v + a.options.hierarchical.nodeSpacing), 
                                0 > x && (a._shiftBlock(d.id, x), b = !0, e === !0 && a._centerParent(d));
                            }
                        }
                    }, p = function(d, e) {
                        for (var g = e.id, h = e.edges, k = a.hierarchicalLevels[e.id], l = a.options.hierarchical.levelSeparation * a.options.hierarchical.levelSeparation, m = {}, n = [], o = 0; o < h.length; o++) {
                            var p = h[o];
                            if (p.toId != p.fromId) {
                                var q = p.toId == g ? p.from : p.to;
                                m[h[o].id] = q, a.hierarchicalLevels[q.id] < k && n.push(p);
                            }
                        }
                        var r = function(b, c) {
                            for (var d = 0, e = 0; e < c.length; e++) if (void 0 !== m[c[e].id]) {
                                var f = a._getPositionForHierarchy(m[c[e].id]) - b;
                                d += f / Math.sqrt(f * f + l);
                            }
                            return d;
                        }, s = function(b, c) {
                            for (var d = 0, e = 0; e < c.length; e++) if (void 0 !== m[c[e].id]) {
                                var f = a._getPositionForHierarchy(m[c[e].id]) - b;
                                d -= l * Math.pow(f * f + l, -1.5);
                            }
                            return d;
                        }, t = function(b, c) {
                            for (var d = a._getPositionForHierarchy(e), f = {}, g = 0; b > g; g++) {
                                var h = r(d, c), i = s(d, c), j = 40, k = Math.max(-j, Math.min(j, Math.round(h / i)));
                                if (d -= k, void 0 !== f[d]) break;
                                f[d] = g;
                            }
                            return d;
                        }, u = function(d) {
                            var g = a._getPositionForHierarchy(e);
                            if (void 0 === c[e.id]) {
                                var h = {};
                                h[e.id] = !0, i(e, h), c[e.id] = h;
                            }
                            var k = j(c[e.id]), l = f(k, 4), m = (l[0], l[1], l[2]), n = l[3], o = d - g, p = 0;
                            o > 0 ? p = Math.min(o, n - a.options.hierarchical.nodeSpacing) : 0 > o && (p = -Math.min(-o, m - a.options.hierarchical.nodeSpacing)), 
                            0 != p && (a._shiftBlock(e.id, p), b = !0);
                        }, v = function(c) {
                            var d = a._getPositionForHierarchy(e), g = a._getSpaceAroundNode(e), h = f(g, 2), i = h[0], j = h[1], k = c - d, l = d;
                            k > 0 ? l = Math.min(d + (j - a.options.hierarchical.nodeSpacing), c) : 0 > k && (l = Math.max(d - (i - a.options.hierarchical.nodeSpacing), c)), 
                            l !== d && (a._setPositionForHierarchy(e, l, void 0, !0), b = !0);
                        }, w = t(d, n);
                        u(w), w = t(d, h), v(w);
                    }, q = function(c) {
                        var d = Object.keys(a.distributionOrdering);
                        d = d.reverse();
                        for (var e = 0; c > e; e++) {
                            b = !1;
                            for (var f = 0; f < d.length; f++) for (var g = d[f], h = a.distributionOrdering[g], i = 0; i < h.length; i++) p(1e3, h[i]);
                            if (b !== !0) break;
                        }
                    }, r = function(c) {
                        var d = Object.keys(a.distributionOrdering);
                        d = d.reverse();
                        for (var e = 0; c > e && (b = !1, n(o, d, !0), b === !0); e++) ;
                    }, s = function() {
                        for (var b in a.body.nodes) a.body.nodes.hasOwnProperty(b) && a._centerParent(a.body.nodes[b]);
                    }, t = function() {
                        var b = Object.keys(a.distributionOrdering);
                        b = b.reverse();
                        for (var c = 0; c < b.length; c++) for (var d = b[c], e = a.distributionOrdering[d], f = 0; f < e.length; f++) a._centerParent(e[f]);
                    };
                    this.options.hierarchical.blockShifting === !0 && (r(5), s()), this.options.hierarchical.edgeMinimization === !0 && q(20), 
                    this.options.hierarchical.parentCentralization === !0 && t(), d();
                }
            }, {
                key: "_getSpaceAroundNode",
                value: function(a, b) {
                    var c = !0;
                    void 0 === b && (c = !1);
                    var d = this.hierarchicalLevels[a.id];
                    if (void 0 !== d) {
                        var e = this.distributionIndex[a.id], f = this._getPositionForHierarchy(a), g = 1e9, h = 1e9;
                        if (0 !== e) {
                            var i = this.distributionOrdering[d][e - 1];
                            if (c === !0 && void 0 === b[i.id] || c === !1) {
                                var j = this._getPositionForHierarchy(i);
                                g = f - j;
                            }
                        }
                        if (e != this.distributionOrdering[d].length - 1) {
                            var k = this.distributionOrdering[d][e + 1];
                            if (c === !0 && void 0 === b[k.id] || c === !1) {
                                var l = this._getPositionForHierarchy(k);
                                h = Math.min(h, l - f);
                            }
                        }
                        return [ g, h ];
                    }
                    return [ 0, 0 ];
                }
            }, {
                key: "_centerParent",
                value: function(a) {
                    if (this.hierarchicalParentReference[a.id]) for (var b = this.hierarchicalParentReference[a.id], c = 0; c < b.length; c++) {
                        var d = b[c], e = this.body.nodes[d];
                        if (this.hierarchicalChildrenReference[d]) {
                            var g = 1e9, h = -1e9, i = this.hierarchicalChildrenReference[d];
                            if (i.length > 0) for (var j = 0; j < i.length; j++) {
                                var k = this.body.nodes[i[j]];
                                g = Math.min(g, this._getPositionForHierarchy(k)), h = Math.max(h, this._getPositionForHierarchy(k));
                            }
                            var l = this._getPositionForHierarchy(e), m = this._getSpaceAroundNode(e), n = f(m, 2), o = n[0], p = n[1], q = .5 * (g + h), r = l - q;
                            (0 > r && Math.abs(r) < p - this.options.hierarchical.nodeSpacing || r > 0 && Math.abs(r) < o - this.options.hierarchical.nodeSpacing) && this._setPositionForHierarchy(e, q, void 0, !0);
                        }
                    }
                }
            }, {
                key: "_placeNodesByHierarchy",
                value: function(a) {
                    this.positionedNodes = {};
                    for (var b in a) if (a.hasOwnProperty(b)) {
                        var c = Object.keys(a[b]);
                        c = this._indexArrayToNodes(c), this._sortNodeArray(c);
                        for (var d = 0, e = 0; e < c.length; e++) {
                            var f = c[e];
                            if (void 0 === this.positionedNodes[f.id]) {
                                var g = this.options.hierarchical.nodeSpacing * d;
                                d > 0 && (g = this._getPositionForHierarchy(c[e - 1]) + this.options.hierarchical.nodeSpacing), 
                                this._setPositionForHierarchy(f, g, b), this._validataPositionAndContinue(f, b, g), 
                                d++;
                            }
                        }
                    }
                }
            }, {
                key: "_placeBranchNodes",
                value: function(a, b) {
                    if (void 0 !== this.hierarchicalChildrenReference[a]) {
                        for (var c = [], d = 0; d < this.hierarchicalChildrenReference[a].length; d++) c.push(this.body.nodes[this.hierarchicalChildrenReference[a][d]]);
                        this._sortNodeArray(c);
                        for (var e = 0; e < c.length; e++) {
                            var f = c[e], g = this.hierarchicalLevels[f.id];
                            if (!(g > b && void 0 === this.positionedNodes[f.id])) return;
                            var h = void 0;
                            h = 0 === e ? this._getPositionForHierarchy(this.body.nodes[a]) : this._getPositionForHierarchy(c[e - 1]) + this.options.hierarchical.nodeSpacing, 
                            this._setPositionForHierarchy(f, h, g), this._validataPositionAndContinue(f, g, h);
                        }
                        for (var i = 1e9, j = -1e9, k = 0; k < c.length; k++) {
                            var l = c[k].id;
                            i = Math.min(i, this._getPositionForHierarchy(this.body.nodes[l])), j = Math.max(j, this._getPositionForHierarchy(this.body.nodes[l]));
                        }
                        this._setPositionForHierarchy(this.body.nodes[a], .5 * (i + j), b);
                    }
                }
            }, {
                key: "_validataPositionAndContinue",
                value: function(a, b, c) {
                    if (void 0 !== this.lastNodeOnLevel[b]) {
                        var d = this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[b]]);
                        if (c - d < this.options.hierarchical.nodeSpacing) {
                            var e = d + this.options.hierarchical.nodeSpacing - c, f = this._findCommonParent(this.lastNodeOnLevel[b], a.id);
                            this._shiftBlock(f.withChild, e);
                        }
                    }
                    this.lastNodeOnLevel[b] = a.id, this.positionedNodes[a.id] = !0, this._placeBranchNodes(a.id, b);
                }
            }, {
                key: "_indexArrayToNodes",
                value: function(a) {
                    for (var b = [], c = 0; c < a.length; c++) b.push(this.body.nodes[a[c]]);
                    return b;
                }
            }, {
                key: "_getDistribution",
                value: function() {
                    var a = {}, b = void 0, c = void 0;
                    for (b in this.body.nodes) if (this.body.nodes.hasOwnProperty(b)) {
                        c = this.body.nodes[b];
                        var d = void 0 === this.hierarchicalLevels[b] ? 0 : this.hierarchicalLevels[b];
                        "UD" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? (c.y = this.options.hierarchical.levelSeparation * d, 
                        c.options.fixed.y = !0) : (c.x = this.options.hierarchical.levelSeparation * d, 
                        c.options.fixed.x = !0), void 0 === a[d] && (a[d] = {}), a[d][b] = c;
                    }
                    return a;
                }
            }, {
                key: "_getHubSize",
                value: function() {
                    var a = 0;
                    for (var b in this.body.nodes) if (this.body.nodes.hasOwnProperty(b)) {
                        var c = this.body.nodes[b];
                        void 0 === this.hierarchicalLevels[b] && (a = c.edges.length < a ? a : c.edges.length);
                    }
                    return a;
                }
            }, {
                key: "_determineLevelsByHubsize",
                value: function() {
                    for (var a = this, b = 1, c = function(b, c) {
                        void 0 === a.hierarchicalLevels[c.id] && (void 0 === a.hierarchicalLevels[b.id] && (a.hierarchicalLevels[b.id] = 0), 
                        a.hierarchicalLevels[c.id] = a.hierarchicalLevels[b.id] + 1);
                    }; b > 0 && (b = this._getHubSize(), 0 !== b); ) for (var d in this.body.nodes) if (this.body.nodes.hasOwnProperty(d)) {
                        var e = this.body.nodes[d];
                        e.edges.length === b && this._crawlNetwork(c, d);
                    }
                }
            }, {
                key: "_determineLevelsCustomCallback",
                value: function() {
                    var a = this, b = 1e5, c = function(a, b, c) {}, d = function(d, e, f) {
                        var g = a.hierarchicalLevels[d.id];
                        void 0 === g && (a.hierarchicalLevels[d.id] = b);
                        var h = c(j["default"].cloneOptions(d, "node"), j["default"].cloneOptions(e, "node"), j["default"].cloneOptions(f, "edge"));
                        a.hierarchicalLevels[e.id] = a.hierarchicalLevels[d.id] + h;
                    };
                    this._crawlNetwork(d), this._setMinLevelToZero();
                }
            }, {
                key: "_determineLevelsDirected",
                value: function() {
                    var a = this, b = 1e4, c = function(c, d, e) {
                        var f = a.hierarchicalLevels[c.id];
                        void 0 === f && (a.hierarchicalLevels[c.id] = b), e.toId == d.id ? a.hierarchicalLevels[d.id] = a.hierarchicalLevels[c.id] + 1 : a.hierarchicalLevels[d.id] = a.hierarchicalLevels[c.id] - 1;
                    };
                    this._crawlNetwork(c), this._setMinLevelToZero();
                }
            }, {
                key: "_setMinLevelToZero",
                value: function() {
                    var a = 1e9;
                    for (var b in this.body.nodes) this.body.nodes.hasOwnProperty(b) && void 0 !== this.hierarchicalLevels[b] && (a = Math.min(this.hierarchicalLevels[b], a));
                    for (var c in this.body.nodes) this.body.nodes.hasOwnProperty(c) && void 0 !== this.hierarchicalLevels[c] && (this.hierarchicalLevels[c] -= a);
                }
            }, {
                key: "_generateMap",
                value: function() {
                    var a = this, b = function(b, c) {
                        if (a.hierarchicalLevels[c.id] > a.hierarchicalLevels[b.id]) {
                            var d = b.id, e = c.id;
                            void 0 === a.hierarchicalChildrenReference[d] && (a.hierarchicalChildrenReference[d] = []), 
                            a.hierarchicalChildrenReference[d].push(e), void 0 === a.hierarchicalParentReference[e] && (a.hierarchicalParentReference[e] = []), 
                            a.hierarchicalParentReference[e].push(d);
                        }
                    };
                    this._crawlNetwork(b);
                }
            }, {
                key: "_crawlNetwork",
                value: function() {
                    var a = this, b = arguments.length <= 0 || void 0 === arguments[0] ? function() {} : arguments[0], c = arguments[1], d = {}, e = 0, f = function j(c, e) {
                        if (void 0 === d[c.id]) {
                            void 0 === a.hierarchicalTrees[c.id] && (a.hierarchicalTrees[c.id] = e, a.treeIndex = Math.max(e, a.treeIndex)), 
                            d[c.id] = !0;
                            for (var f = void 0, g = 0; g < c.edges.length; g++) c.edges[g].connected === !0 && (f = c.edges[g].toId === c.id ? c.edges[g].from : c.edges[g].to, 
                            c.id !== f.id && (b(c, f, c.edges[g]), j(f, e)));
                        }
                    };
                    if (void 0 === c) for (var g = 0; g < this.body.nodeIndices.length; g++) {
                        var h = this.body.nodes[this.body.nodeIndices[g]];
                        void 0 === d[h.id] && (f(h, e), e += 1);
                    } else {
                        var i = this.body.nodes[c];
                        if (void 0 === i) return void console.error("Node not found:", c);
                        f(i);
                    }
                }
            }, {
                key: "_shiftBlock",
                value: function(a, b) {
                    if ("UD" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? this.body.nodes[a].x += b : this.body.nodes[a].y += b, 
                    void 0 !== this.hierarchicalChildrenReference[a]) for (var c = 0; c < this.hierarchicalChildrenReference[a].length; c++) this._shiftBlock(this.hierarchicalChildrenReference[a][c], b);
                }
            }, {
                key: "_findCommonParent",
                value: function(a, b) {
                    var c = this, d = {}, e = function g(a, b) {
                        if (void 0 !== c.hierarchicalParentReference[b]) for (var d = 0; d < c.hierarchicalParentReference[b].length; d++) {
                            var e = c.hierarchicalParentReference[b][d];
                            a[e] = !0, g(a, e);
                        }
                    }, f = function h(a, b) {
                        if (void 0 !== c.hierarchicalParentReference[b]) for (var d = 0; d < c.hierarchicalParentReference[b].length; d++) {
                            var e = c.hierarchicalParentReference[b][d];
                            if (void 0 !== a[e]) return {
                                foundParent: e,
                                withChild: b
                            };
                            var f = h(a, e);
                            if (null !== f.foundParent) return f;
                        }
                        return {
                            foundParent: null,
                            withChild: b
                        };
                    };
                    return e(d, a), f(d, b);
                }
            }, {
                key: "_setPositionForHierarchy",
                value: function(a, b, c) {
                    var d = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3];
                    d !== !0 && (void 0 === this.distributionOrdering[c] && (this.distributionOrdering[c] = [], 
                    this.distributionOrderingPresence[c] = {}), void 0 === this.distributionOrderingPresence[c][a.id] && (this.distributionOrdering[c].push(a), 
                    this.distributionIndex[a.id] = this.distributionOrdering[c].length - 1), this.distributionOrderingPresence[c][a.id] = !0), 
                    "UD" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? a.x = b : a.y = b;
                }
            }, {
                key: "_getPositionForHierarchy",
                value: function(a) {
                    return "UD" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? a.x : a.y;
                }
            }, {
                key: "_sortNodeArray",
                value: function(a) {
                    a.length > 1 && ("UD" === this.options.hierarchical.direction || "DU" === this.options.hierarchical.direction ? a.sort(function(a, b) {
                        return a.x - b.x;
                    }) : a.sort(function(a, b) {
                        return a.y - b.y;
                    }));
                }
            } ]), a;
        }();
        b["default"] = l;
    }, function(a, b, c) {
        "use strict";
        function d(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var e = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), f = c(1), g = c(22), h = c(25), i = function() {
            function a(b, c, e) {
                var g = this;
                d(this, a), this.body = b, this.canvas = c, this.selectionHandler = e, this.editMode = !1, 
                this.manipulationDiv = void 0, this.editModeDiv = void 0, this.closeDiv = void 0, 
                this.manipulationHammers = [], this.temporaryUIFunctions = {}, this.temporaryEventFunctions = [], 
                this.touchTime = 0, this.temporaryIds = {
                    nodes: [],
                    edges: []
                }, this.guiEnabled = !1, this.inMode = !1, this.selectedControlNode = void 0, this.options = {}, 
                this.defaultOptions = {
                    enabled: !1,
                    initiallyActive: !1,
                    addNode: !0,
                    addEdge: !0,
                    editNode: void 0,
                    editEdge: !0,
                    deleteNode: !0,
                    deleteEdge: !0,
                    controlNodeStyle: {
                        shape: "dot",
                        size: 6,
                        color: {
                            background: "#ff0000",
                            border: "#3c3c3c",
                            highlight: {
                                background: "#07f968",
                                border: "#3c3c3c"
                            }
                        },
                        borderWidth: 2,
                        borderWidthSelected: 2
                    }
                }, f.extend(this.options, this.defaultOptions), this.body.emitter.on("destroy", function() {
                    g._clean();
                }), this.body.emitter.on("_dataChanged", this._restore.bind(this)), this.body.emitter.on("_resetData", this._restore.bind(this));
            }
            return e(a, [ {
                key: "_restore",
                value: function() {
                    this.inMode !== !1 && (this.options.initiallyActive === !0 ? this.enableEditMode() : this.disableEditMode());
                }
            }, {
                key: "setOptions",
                value: function(a, b, c) {
                    void 0 !== b && (void 0 !== b.locale ? this.options.locale = b.locale : this.options.locale = c.locale, 
                    void 0 !== b.locales ? this.options.locales = b.locales : this.options.locales = c.locales), 
                    void 0 !== a && ("boolean" == typeof a ? this.options.enabled = a : (this.options.enabled = !0, 
                    f.deepExtend(this.options, a)), this.options.initiallyActive === !0 && (this.editMode = !0), 
                    this._setup());
                }
            }, {
                key: "toggleEditMode",
                value: function() {
                    this.editMode === !0 ? this.disableEditMode() : this.enableEditMode();
                }
            }, {
                key: "enableEditMode",
                value: function() {
                    this.editMode = !0, this._clean(), this.guiEnabled === !0 && (this.manipulationDiv.style.display = "block", 
                    this.closeDiv.style.display = "block", this.editModeDiv.style.display = "none", 
                    this.showManipulatorToolbar());
                }
            }, {
                key: "disableEditMode",
                value: function() {
                    this.editMode = !1, this._clean(), this.guiEnabled === !0 && (this.manipulationDiv.style.display = "none", 
                    this.closeDiv.style.display = "none", this.editModeDiv.style.display = "block", 
                    this._createEditButton());
                }
            }, {
                key: "showManipulatorToolbar",
                value: function() {
                    if (this._clean(), this.manipulationDOM = {}, this.guiEnabled === !0) {
                        this.editMode = !0, this.manipulationDiv.style.display = "block", this.closeDiv.style.display = "block";
                        var a = this.selectionHandler._getSelectedNodeCount(), b = this.selectionHandler._getSelectedEdgeCount(), c = a + b, d = this.options.locales[this.options.locale], e = !1;
                        this.options.addNode !== !1 && (this._createAddNodeButton(d), e = !0), this.options.addEdge !== !1 && (e === !0 ? this._createSeperator(1) : e = !0, 
                        this._createAddEdgeButton(d)), 1 === a && "function" == typeof this.options.editNode ? (e === !0 ? this._createSeperator(2) : e = !0, 
                        this._createEditNodeButton(d)) : 1 === b && 0 === a && this.options.editEdge !== !1 && (e === !0 ? this._createSeperator(3) : e = !0, 
                        this._createEditEdgeButton(d)), 0 !== c && (a > 0 && this.options.deleteNode !== !1 ? (e === !0 && this._createSeperator(4), 
                        this._createDeleteButton(d)) : 0 === a && this.options.deleteEdge !== !1 && (e === !0 && this._createSeperator(4), 
                        this._createDeleteButton(d))), this._bindHammerToDiv(this.closeDiv, this.toggleEditMode.bind(this)), 
                        this._temporaryBindEvent("select", this.showManipulatorToolbar.bind(this));
                    }
                    this.body.emitter.emit("_redraw");
                }
            }, {
                key: "addNodeMode",
                value: function() {
                    if (this.editMode !== !0 && this.enableEditMode(), this._clean(), this.inMode = "addNode", 
                    this.guiEnabled === !0) {
                        var a = this.options.locales[this.options.locale];
                        this.manipulationDOM = {}, this._createBackButton(a), this._createSeperator(), this._createDescription(a.addDescription || this.options.locales.en.addDescription), 
                        this._bindHammerToDiv(this.closeDiv, this.toggleEditMode.bind(this));
                    }
                    this._temporaryBindEvent("click", this._performAddNode.bind(this));
                }
            }, {
                key: "editNode",
                value: function() {
                    var a = this;
                    this.editMode !== !0 && this.enableEditMode(), this._clean();
                    var b = this.selectionHandler._getSelectedNode();
                    if (void 0 !== b) {
                        if (this.inMode = "editNode", "function" != typeof this.options.editNode) throw new Error("No function has been configured to handle the editing of nodes.");
                        if (b.isCluster !== !0) {
                            var c = f.deepExtend({}, b.options, !1);
                            if (c.x = b.x, c.y = b.y, 2 !== this.options.editNode.length) throw new Error("The function for edit does not support two arguments (data, callback)");
                            this.options.editNode(c, function(b) {
                                null !== b && void 0 !== b && "editNode" === a.inMode && a.body.data.nodes.getDataSet().update(b), 
                                a.showManipulatorToolbar();
                            });
                        } else alert(this.options.locales[this.options.locale].editClusterError || this.options.locales.en.editClusterError);
                    } else this.showManipulatorToolbar();
                }
            }, {
                key: "addEdgeMode",
                value: function() {
                    if (this.editMode !== !0 && this.enableEditMode(), this._clean(), this.inMode = "addEdge", 
                    this.guiEnabled === !0) {
                        var a = this.options.locales[this.options.locale];
                        this.manipulationDOM = {}, this._createBackButton(a), this._createSeperator(), this._createDescription(a.edgeDescription || this.options.locales.en.edgeDescription), 
                        this._bindHammerToDiv(this.closeDiv, this.toggleEditMode.bind(this));
                    }
                    this._temporaryBindUI("onTouch", this._handleConnect.bind(this)), this._temporaryBindUI("onDragEnd", this._finishConnect.bind(this)), 
                    this._temporaryBindUI("onDrag", this._dragControlNode.bind(this)), this._temporaryBindUI("onRelease", this._finishConnect.bind(this)), 
                    this._temporaryBindUI("onDragStart", function() {}), this._temporaryBindUI("onHold", function() {});
                }
            }, {
                key: "editEdgeMode",
                value: function() {
                    var a = this;
                    if (this.editMode !== !0 && this.enableEditMode(), this._clean(), this.inMode = "editEdge", 
                    this.guiEnabled === !0) {
                        var b = this.options.locales[this.options.locale];
                        this.manipulationDOM = {}, this._createBackButton(b), this._createSeperator(), this._createDescription(b.editEdgeDescription || this.options.locales.en.editEdgeDescription), 
                        this._bindHammerToDiv(this.closeDiv, this.toggleEditMode.bind(this));
                    }
                    this.edgeBeingEditedId = this.selectionHandler.getSelectedEdges()[0], void 0 !== this.edgeBeingEditedId ? !function() {
                        var b = a.body.edges[a.edgeBeingEditedId], c = a._getNewTargetNode(b.from.x, b.from.y), d = a._getNewTargetNode(b.to.x, b.to.y);
                        a.temporaryIds.nodes.push(c.id), a.temporaryIds.nodes.push(d.id), a.body.nodes[c.id] = c, 
                        a.body.nodeIndices.push(c.id), a.body.nodes[d.id] = d, a.body.nodeIndices.push(d.id), 
                        a._temporaryBindUI("onTouch", a._controlNodeTouch.bind(a)), a._temporaryBindUI("onTap", function() {}), 
                        a._temporaryBindUI("onHold", function() {}), a._temporaryBindUI("onDragStart", a._controlNodeDragStart.bind(a)), 
                        a._temporaryBindUI("onDrag", a._controlNodeDrag.bind(a)), a._temporaryBindUI("onDragEnd", a._controlNodeDragEnd.bind(a)), 
                        a._temporaryBindUI("onMouseMove", function() {}), a._temporaryBindEvent("beforeDrawing", function(a) {
                            var e = b.edgeType.findBorderPositions(a);
                            c.selected === !1 && (c.x = e.from.x, c.y = e.from.y), d.selected === !1 && (d.x = e.to.x, 
                            d.y = e.to.y);
                        }), a.body.emitter.emit("_redraw");
                    }() : this.showManipulatorToolbar();
                }
            }, {
                key: "deleteSelected",
                value: function() {
                    var a = this;
                    this.editMode !== !0 && this.enableEditMode(), this._clean(), this.inMode = "delete";
                    var b = this.selectionHandler.getSelectedNodes(), c = this.selectionHandler.getSelectedEdges(), d = void 0;
                    if (b.length > 0) {
                        for (var e = 0; e < b.length; e++) if (this.body.nodes[b[e]].isCluster === !0) return void alert(this.options.locales[this.options.locale].deleteClusterError || this.options.locales.en.deleteClusterError);
                        "function" == typeof this.options.deleteNode && (d = this.options.deleteNode);
                    } else c.length > 0 && "function" == typeof this.options.deleteEdge && (d = this.options.deleteEdge);
                    if ("function" == typeof d) {
                        var f = {
                            nodes: b,
                            edges: c
                        };
                        if (2 !== d.length) throw new Error("The function for delete does not support two arguments (data, callback)");
                        d(f, function(b) {
                            null !== b && void 0 !== b && "delete" === a.inMode ? (a.body.data.edges.getDataSet().remove(b.edges), 
                            a.body.data.nodes.getDataSet().remove(b.nodes), a.body.emitter.emit("startSimulation"), 
                            a.showManipulatorToolbar()) : (a.body.emitter.emit("startSimulation"), a.showManipulatorToolbar());
                        });
                    } else this.body.data.edges.getDataSet().remove(c), this.body.data.nodes.getDataSet().remove(b), 
                    this.body.emitter.emit("startSimulation"), this.showManipulatorToolbar();
                }
            }, {
                key: "_setup",
                value: function() {
                    this.options.enabled === !0 ? (this.guiEnabled = !0, this._createWrappers(), this.editMode === !1 ? this._createEditButton() : this.showManipulatorToolbar()) : (this._removeManipulationDOM(), 
                    this.guiEnabled = !1);
                }
            }, {
                key: "_createWrappers",
                value: function() {
                    void 0 === this.manipulationDiv && (this.manipulationDiv = document.createElement("div"), 
                    this.manipulationDiv.className = "vis-manipulation", this.editMode === !0 ? this.manipulationDiv.style.display = "block" : this.manipulationDiv.style.display = "none", 
                    this.canvas.frame.appendChild(this.manipulationDiv)), void 0 === this.editModeDiv && (this.editModeDiv = document.createElement("div"), 
                    this.editModeDiv.className = "vis-edit-mode", this.editMode === !0 ? this.editModeDiv.style.display = "none" : this.editModeDiv.style.display = "block", 
                    this.canvas.frame.appendChild(this.editModeDiv)), void 0 === this.closeDiv && (this.closeDiv = document.createElement("div"), 
                    this.closeDiv.className = "vis-close", this.closeDiv.style.display = this.manipulationDiv.style.display, 
                    this.canvas.frame.appendChild(this.closeDiv));
                }
            }, {
                key: "_getNewTargetNode",
                value: function(a, b) {
                    var c = f.deepExtend({}, this.options.controlNodeStyle);
                    c.id = "targetNode" + f.randomUUID(), c.hidden = !1, c.physics = !1, c.x = a, c.y = b;
                    var d = this.body.functions.createNode(c);
                    return d.shape.boundingBox = {
                        left: a,
                        right: a,
                        top: b,
                        bottom: b
                    }, d;
                }
            }, {
                key: "_createEditButton",
                value: function() {
                    this._clean(), this.manipulationDOM = {}, f.recursiveDOMDelete(this.editModeDiv);
                    var a = this.options.locales[this.options.locale], b = this._createButton("editMode", "vis-button vis-edit vis-edit-mode", a.edit || this.options.locales.en.edit);
                    this.editModeDiv.appendChild(b), this._bindHammerToDiv(b, this.toggleEditMode.bind(this));
                }
            }, {
                key: "_clean",
                value: function() {
                    this.inMode = !1, this.guiEnabled === !0 && (f.recursiveDOMDelete(this.editModeDiv), 
                    f.recursiveDOMDelete(this.manipulationDiv), this._cleanManipulatorHammers()), this._cleanupTemporaryNodesAndEdges(), 
                    this._unbindTemporaryUIs(), this._unbindTemporaryEvents(), this.body.emitter.emit("restorePhysics");
                }
            }, {
                key: "_cleanManipulatorHammers",
                value: function() {
                    if (0 != this.manipulationHammers.length) {
                        for (var a = 0; a < this.manipulationHammers.length; a++) this.manipulationHammers[a].destroy();
                        this.manipulationHammers = [];
                    }
                }
            }, {
                key: "_removeManipulationDOM",
                value: function() {
                    this._clean(), f.recursiveDOMDelete(this.manipulationDiv), f.recursiveDOMDelete(this.editModeDiv), 
                    f.recursiveDOMDelete(this.closeDiv), this.manipulationDiv && this.canvas.frame.removeChild(this.manipulationDiv), 
                    this.editModeDiv && this.canvas.frame.removeChild(this.editModeDiv), this.closeDiv && this.canvas.frame.removeChild(this.closeDiv), 
                    this.manipulationDiv = void 0, this.editModeDiv = void 0, this.closeDiv = void 0;
                }
            }, {
                key: "_createSeperator",
                value: function() {
                    var a = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0];
                    this.manipulationDOM["seperatorLineDiv" + a] = document.createElement("div"), this.manipulationDOM["seperatorLineDiv" + a].className = "vis-separator-line", 
                    this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv" + a]);
                }
            }, {
                key: "_createAddNodeButton",
                value: function(a) {
                    var b = this._createButton("addNode", "vis-button vis-add", a.addNode || this.options.locales.en.addNode);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.addNodeMode.bind(this));
                }
            }, {
                key: "_createAddEdgeButton",
                value: function(a) {
                    var b = this._createButton("addEdge", "vis-button vis-connect", a.addEdge || this.options.locales.en.addEdge);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.addEdgeMode.bind(this));
                }
            }, {
                key: "_createEditNodeButton",
                value: function(a) {
                    var b = this._createButton("editNode", "vis-button vis-edit", a.editNode || this.options.locales.en.editNode);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.editNode.bind(this));
                }
            }, {
                key: "_createEditEdgeButton",
                value: function(a) {
                    var b = this._createButton("editEdge", "vis-button vis-edit", a.editEdge || this.options.locales.en.editEdge);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.editEdgeMode.bind(this));
                }
            }, {
                key: "_createDeleteButton",
                value: function(a) {
                    var b = this._createButton("delete", "vis-button vis-delete", a.del || this.options.locales.en.del);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.deleteSelected.bind(this));
                }
            }, {
                key: "_createBackButton",
                value: function(a) {
                    var b = this._createButton("back", "vis-button vis-back", a.back || this.options.locales.en.back);
                    this.manipulationDiv.appendChild(b), this._bindHammerToDiv(b, this.showManipulatorToolbar.bind(this));
                }
            }, {
                key: "_createButton",
                value: function(a, b, c) {
                    var d = arguments.length <= 3 || void 0 === arguments[3] ? "vis-label" : arguments[3];
                    return this.manipulationDOM[a + "Div"] = document.createElement("div"), this.manipulationDOM[a + "Div"].className = b, 
                    this.manipulationDOM[a + "Label"] = document.createElement("div"), this.manipulationDOM[a + "Label"].className = d, 
                    this.manipulationDOM[a + "Label"].innerHTML = c, this.manipulationDOM[a + "Div"].appendChild(this.manipulationDOM[a + "Label"]), 
                    this.manipulationDOM[a + "Div"];
                }
            }, {
                key: "_createDescription",
                value: function(a) {
                    this.manipulationDiv.appendChild(this._createButton("description", "vis-button vis-none", a));
                }
            }, {
                key: "_temporaryBindEvent",
                value: function(a, b) {
                    this.temporaryEventFunctions.push({
                        event: a,
                        boundFunction: b
                    }), this.body.emitter.on(a, b);
                }
            }, {
                key: "_temporaryBindUI",
                value: function(a, b) {
                    if (void 0 === this.body.eventListeners[a]) throw new Error("This UI function does not exist. Typo? You tried: " + a + " possible are: " + JSON.stringify(Object.keys(this.body.eventListeners)));
                    this.temporaryUIFunctions[a] = this.body.eventListeners[a], this.body.eventListeners[a] = b;
                }
            }, {
                key: "_unbindTemporaryUIs",
                value: function() {
                    for (var a in this.temporaryUIFunctions) this.temporaryUIFunctions.hasOwnProperty(a) && (this.body.eventListeners[a] = this.temporaryUIFunctions[a], 
                    delete this.temporaryUIFunctions[a]);
                    this.temporaryUIFunctions = {};
                }
            }, {
                key: "_unbindTemporaryEvents",
                value: function() {
                    for (var a = 0; a < this.temporaryEventFunctions.length; a++) {
                        var b = this.temporaryEventFunctions[a].event, c = this.temporaryEventFunctions[a].boundFunction;
                        this.body.emitter.off(b, c);
                    }
                    this.temporaryEventFunctions = [];
                }
            }, {
                key: "_bindHammerToDiv",
                value: function(a, b) {
                    var c = new g(a, {});
                    h.onTouch(c, b), this.manipulationHammers.push(c);
                }
            }, {
                key: "_cleanupTemporaryNodesAndEdges",
                value: function() {
                    for (var a = 0; a < this.temporaryIds.edges.length; a++) {
                        this.body.edges[this.temporaryIds.edges[a]].disconnect(), delete this.body.edges[this.temporaryIds.edges[a]];
                        var b = this.body.edgeIndices.indexOf(this.temporaryIds.edges[a]);
                        -1 !== b && this.body.edgeIndices.splice(b, 1);
                    }
                    for (var c = 0; c < this.temporaryIds.nodes.length; c++) {
                        delete this.body.nodes[this.temporaryIds.nodes[c]];
                        var d = this.body.nodeIndices.indexOf(this.temporaryIds.nodes[c]);
                        -1 !== d && this.body.nodeIndices.splice(d, 1);
                    }
                    this.temporaryIds = {
                        nodes: [],
                        edges: []
                    };
                }
            }, {
                key: "_controlNodeTouch",
                value: function(a) {
                    this.selectionHandler.unselectAll(), this.lastTouch = this.body.functions.getPointer(a.center), 
                    this.lastTouch.translation = f.extend({}, this.body.view.translation);
                }
            }, {
                key: "_controlNodeDragStart",
                value: function(a) {
                    var b = this.lastTouch, c = this.selectionHandler._pointerToPositionObject(b), d = this.body.nodes[this.temporaryIds.nodes[0]], e = this.body.nodes[this.temporaryIds.nodes[1]], f = this.body.edges[this.edgeBeingEditedId];
                    this.selectedControlNode = void 0;
                    var g = d.isOverlappingWith(c), h = e.isOverlappingWith(c);
                    g === !0 ? (this.selectedControlNode = d, f.edgeType.from = d) : h === !0 && (this.selectedControlNode = e, 
                    f.edgeType.to = e), void 0 !== this.selectedControlNode && this.selectionHandler.selectObject(this.selectedControlNode), 
                    this.body.emitter.emit("_redraw");
                }
            }, {
                key: "_controlNodeDrag",
                value: function(a) {
                    this.body.emitter.emit("disablePhysics");
                    var b = this.body.functions.getPointer(a.center), c = this.canvas.DOMtoCanvas(b);
                    if (void 0 !== this.selectedControlNode) this.selectedControlNode.x = c.x, this.selectedControlNode.y = c.y; else {
                        var d = b.x - this.lastTouch.x, e = b.y - this.lastTouch.y;
                        this.body.view.translation = {
                            x: this.lastTouch.translation.x + d,
                            y: this.lastTouch.translation.y + e
                        };
                    }
                    this.body.emitter.emit("_redraw");
                }
            }, {
                key: "_controlNodeDragEnd",
                value: function(a) {
                    var b = this.body.functions.getPointer(a.center), c = this.selectionHandler._pointerToPositionObject(b), d = this.body.edges[this.edgeBeingEditedId];
                    if (void 0 !== this.selectedControlNode) {
                        this.selectionHandler.unselectAll();
                        for (var e = this.selectionHandler._getAllNodesOverlappingWith(c), f = void 0, g = e.length - 1; g >= 0; g--) if (e[g] !== this.selectedControlNode.id) {
                            f = this.body.nodes[e[g]];
                            break;
                        }
                        if (void 0 !== f && void 0 !== this.selectedControlNode) if (f.isCluster === !0) alert(this.options.locales[this.options.locale].createEdgeError || this.options.locales.en.createEdgeError); else {
                            var h = this.body.nodes[this.temporaryIds.nodes[0]];
                            this.selectedControlNode.id === h.id ? this._performEditEdge(f.id, d.to.id) : this._performEditEdge(d.from.id, f.id);
                        } else d.updateEdgeType(), this.body.emitter.emit("restorePhysics");
                        this.body.emitter.emit("_redraw");
                    }
                }
            }, {
                key: "_handleConnect",
                value: function(a) {
                    if (new Date().valueOf() - this.touchTime > 100) {
                        this.lastTouch = this.body.functions.getPointer(a.center), this.lastTouch.translation = f.extend({}, this.body.view.translation);
                        var b = this.lastTouch, c = this.selectionHandler.getNodeAt(b);
                        if (void 0 !== c) if (c.isCluster === !0) alert(this.options.locales[this.options.locale].createEdgeError || this.options.locales.en.createEdgeError); else {
                            var d = this._getNewTargetNode(c.x, c.y);
                            this.body.nodes[d.id] = d, this.body.nodeIndices.push(d.id);
                            var e = this.body.functions.createEdge({
                                id: "connectionEdge" + f.randomUUID(),
                                from: c.id,
                                to: d.id,
                                physics: !1,
                                smooth: {
                                    enabled: !0,
                                    type: "continuous",
                                    roundness: .5
                                }
                            });
                            this.body.edges[e.id] = e, this.body.edgeIndices.push(e.id), this.temporaryIds.nodes.push(d.id), 
                            this.temporaryIds.edges.push(e.id);
                        }
                        this.touchTime = new Date().valueOf();
                    }
                }
            }, {
                key: "_dragControlNode",
                value: function(a) {
                    var b = this.body.functions.getPointer(a.center);
                    if (void 0 !== this.temporaryIds.nodes[0]) {
                        var c = this.body.nodes[this.temporaryIds.nodes[0]];
                        c.x = this.canvas._XconvertDOMtoCanvas(b.x), c.y = this.canvas._YconvertDOMtoCanvas(b.y), 
                        this.body.emitter.emit("_redraw");
                    } else {
                        var d = b.x - this.lastTouch.x, e = b.y - this.lastTouch.y;
                        this.body.view.translation = {
                            x: this.lastTouch.translation.x + d,
                            y: this.lastTouch.translation.y + e
                        };
                    }
                }
            }, {
                key: "_finishConnect",
                value: function(a) {
                    var b = this.body.functions.getPointer(a.center), c = this.selectionHandler._pointerToPositionObject(b), d = void 0;
                    void 0 !== this.temporaryIds.edges[0] && (d = this.body.edges[this.temporaryIds.edges[0]].fromId);
                    for (var e = this.selectionHandler._getAllNodesOverlappingWith(c), f = void 0, g = e.length - 1; g >= 0; g--) if (-1 === this.temporaryIds.nodes.indexOf(e[g])) {
                        f = this.body.nodes[e[g]];
                        break;
                    }
                    this._cleanupTemporaryNodesAndEdges(), void 0 !== f && (f.isCluster === !0 ? alert(this.options.locales[this.options.locale].createEdgeError || this.options.locales.en.createEdgeError) : void 0 !== this.body.nodes[d] && void 0 !== this.body.nodes[f.id] && this._performAddEdge(d, f.id)), 
                    this.body.emitter.emit("_redraw");
                }
            }, {
                key: "_performAddNode",
                value: function(a) {
                    var b = this, c = {
                        id: f.randomUUID(),
                        x: a.pointer.canvas.x,
                        y: a.pointer.canvas.y,
                        label: "new"
                    };
                    if ("function" == typeof this.options.addNode) {
                        if (2 !== this.options.addNode.length) throw new Error("The function for add does not support two arguments (data,callback)");
                        this.options.addNode(c, function(a) {
                            null !== a && void 0 !== a && "addNode" === b.inMode && (b.body.data.nodes.getDataSet().add(a), 
                            b.showManipulatorToolbar());
                        });
                    } else this.body.data.nodes.getDataSet().add(c), this.showManipulatorToolbar();
                }
            }, {
                key: "_performAddEdge",
                value: function(a, b) {
                    var c = this, d = {
                        from: a,
                        to: b
                    };
                    if ("function" == typeof this.options.addEdge) {
                        if (2 !== this.options.addEdge.length) throw new Error("The function for connect does not support two arguments (data,callback)");
                        this.options.addEdge(d, function(a) {
                            null !== a && void 0 !== a && "addEdge" === c.inMode && (c.body.data.edges.getDataSet().add(a), 
                            c.selectionHandler.unselectAll(), c.showManipulatorToolbar());
                        });
                    } else this.body.data.edges.getDataSet().add(d), this.selectionHandler.unselectAll(), 
                    this.showManipulatorToolbar();
                }
            }, {
                key: "_performEditEdge",
                value: function(a, b) {
                    var c = this, d = {
                        id: this.edgeBeingEditedId,
                        from: a,
                        to: b
                    };
                    if ("function" == typeof this.options.editEdge) {
                        if (2 !== this.options.editEdge.length) throw new Error("The function for edit does not support two arguments (data, callback)");
                        this.options.editEdge(d, function(a) {
                            null === a || void 0 === a || "editEdge" !== c.inMode ? (c.body.edges[d.id].updateEdgeType(), 
                            c.body.emitter.emit("_redraw")) : (c.body.data.edges.getDataSet().update(a), c.selectionHandler.unselectAll(), 
                            c.showManipulatorToolbar());
                        });
                    } else this.body.data.edges.getDataSet().update(d), this.selectionHandler.unselectAll(), 
                    this.showManipulatorToolbar();
                }
            } ]), a;
        }();
        b["default"] = i;
    }, function(a, b) {
        "use strict";
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var c = "string", d = "boolean", e = "number", f = "array", g = "object", h = "dom", i = "any", j = {
            configure: {
                enabled: {
                    "boolean": d
                },
                filter: {
                    "boolean": d,
                    string: c,
                    array: f,
                    "function": "function"
                },
                container: {
                    dom: h
                },
                showButton: {
                    "boolean": d
                },
                __type__: {
                    object: g,
                    "boolean": d,
                    string: c,
                    array: f,
                    "function": "function"
                }
            },
            edges: {
                arrows: {
                    to: {
                        enabled: {
                            "boolean": d
                        },
                        scaleFactor: {
                            number: e
                        },
                        __type__: {
                            object: g,
                            "boolean": d
                        }
                    },
                    middle: {
                        enabled: {
                            "boolean": d
                        },
                        scaleFactor: {
                            number: e
                        },
                        __type__: {
                            object: g,
                            "boolean": d
                        }
                    },
                    from: {
                        enabled: {
                            "boolean": d
                        },
                        scaleFactor: {
                            number: e
                        },
                        __type__: {
                            object: g,
                            "boolean": d
                        }
                    },
                    __type__: {
                        string: [ "from", "to", "middle" ],
                        object: g
                    }
                },
                arrowStrikethrough: {
                    "boolean": d
                },
                color: {
                    color: {
                        string: c
                    },
                    highlight: {
                        string: c
                    },
                    hover: {
                        string: c
                    },
                    inherit: {
                        string: [ "from", "to", "both" ],
                        "boolean": d
                    },
                    opacity: {
                        number: e
                    },
                    __type__: {
                        object: g,
                        string: c
                    }
                },
                dashes: {
                    "boolean": d,
                    array: f
                },
                font: {
                    color: {
                        string: c
                    },
                    size: {
                        number: e
                    },
                    face: {
                        string: c
                    },
                    background: {
                        string: c
                    },
                    strokeWidth: {
                        number: e
                    },
                    strokeColor: {
                        string: c
                    },
                    align: {
                        string: [ "horizontal", "top", "middle", "bottom" ]
                    },
                    __type__: {
                        object: g,
                        string: c
                    }
                },
                hidden: {
                    "boolean": d
                },
                hoverWidth: {
                    "function": "function",
                    number: e
                },
                label: {
                    string: c,
                    undefined: "undefined"
                },
                labelHighlightBold: {
                    "boolean": d
                },
                length: {
                    number: e,
                    undefined: "undefined"
                },
                physics: {
                    "boolean": d
                },
                scaling: {
                    min: {
                        number: e
                    },
                    max: {
                        number: e
                    },
                    label: {
                        enabled: {
                            "boolean": d
                        },
                        min: {
                            number: e
                        },
                        max: {
                            number: e
                        },
                        maxVisible: {
                            number: e
                        },
                        drawThreshold: {
                            number: e
                        },
                        __type__: {
                            object: g,
                            "boolean": d
                        }
                    },
                    customScalingFunction: {
                        "function": "function"
                    },
                    __type__: {
                        object: g
                    }
                },
                selectionWidth: {
                    "function": "function",
                    number: e
                },
                selfReferenceSize: {
                    number: e
                },
                shadow: {
                    enabled: {
                        "boolean": d
                    },
                    color: {
                        string: c
                    },
                    size: {
                        number: e
                    },
                    x: {
                        number: e
                    },
                    y: {
                        number: e
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                smooth: {
                    enabled: {
                        "boolean": d
                    },
                    type: {
                        string: [ "dynamic", "continuous", "discrete", "diagonalCross", "straightCross", "horizontal", "vertical", "curvedCW", "curvedCCW", "cubicBezier" ]
                    },
                    roundness: {
                        number: e
                    },
                    forceDirection: {
                        string: [ "horizontal", "vertical", "none" ],
                        "boolean": d
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                title: {
                    string: c,
                    undefined: "undefined"
                },
                width: {
                    number: e
                },
                value: {
                    number: e,
                    undefined: "undefined"
                },
                __type__: {
                    object: g
                }
            },
            groups: {
                useDefaultGroups: {
                    "boolean": d
                },
                __any__: "get from nodes, will be overwritten below",
                __type__: {
                    object: g
                }
            },
            interaction: {
                dragNodes: {
                    "boolean": d
                },
                dragView: {
                    "boolean": d
                },
                hideEdgesOnDrag: {
                    "boolean": d
                },
                hideNodesOnDrag: {
                    "boolean": d
                },
                hover: {
                    "boolean": d
                },
                keyboard: {
                    enabled: {
                        "boolean": d
                    },
                    speed: {
                        x: {
                            number: e
                        },
                        y: {
                            number: e
                        },
                        zoom: {
                            number: e
                        },
                        __type__: {
                            object: g
                        }
                    },
                    bindToWindow: {
                        "boolean": d
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                multiselect: {
                    "boolean": d
                },
                navigationButtons: {
                    "boolean": d
                },
                selectable: {
                    "boolean": d
                },
                selectConnectedEdges: {
                    "boolean": d
                },
                hoverConnectedEdges: {
                    "boolean": d
                },
                tooltipDelay: {
                    number: e
                },
                zoomView: {
                    "boolean": d
                },
                __type__: {
                    object: g
                }
            },
            layout: {
                randomSeed: {
                    undefined: "undefined",
                    number: e
                },
                improvedLayout: {
                    "boolean": d
                },
                hierarchical: {
                    enabled: {
                        "boolean": d
                    },
                    levelSeparation: {
                        number: e
                    },
                    nodeSpacing: {
                        number: e
                    },
                    treeSpacing: {
                        number: e
                    },
                    blockShifting: {
                        "boolean": d
                    },
                    edgeMinimization: {
                        "boolean": d
                    },
                    parentCentralization: {
                        "boolean": d
                    },
                    direction: {
                        string: [ "UD", "DU", "LR", "RL" ]
                    },
                    sortMethod: {
                        string: [ "hubsize", "directed" ]
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                __type__: {
                    object: g
                }
            },
            manipulation: {
                enabled: {
                    "boolean": d
                },
                initiallyActive: {
                    "boolean": d
                },
                addNode: {
                    "boolean": d,
                    "function": "function"
                },
                addEdge: {
                    "boolean": d,
                    "function": "function"
                },
                editNode: {
                    "function": "function"
                },
                editEdge: {
                    "boolean": d,
                    "function": "function"
                },
                deleteNode: {
                    "boolean": d,
                    "function": "function"
                },
                deleteEdge: {
                    "boolean": d,
                    "function": "function"
                },
                controlNodeStyle: "get from nodes, will be overwritten below",
                __type__: {
                    object: g,
                    "boolean": d
                }
            },
            nodes: {
                borderWidth: {
                    number: e
                },
                borderWidthSelected: {
                    number: e,
                    undefined: "undefined"
                },
                brokenImage: {
                    string: c,
                    undefined: "undefined"
                },
                color: {
                    border: {
                        string: c
                    },
                    background: {
                        string: c
                    },
                    highlight: {
                        border: {
                            string: c
                        },
                        background: {
                            string: c
                        },
                        __type__: {
                            object: g,
                            string: c
                        }
                    },
                    hover: {
                        border: {
                            string: c
                        },
                        background: {
                            string: c
                        },
                        __type__: {
                            object: g,
                            string: c
                        }
                    },
                    __type__: {
                        object: g,
                        string: c
                    }
                },
                fixed: {
                    x: {
                        "boolean": d
                    },
                    y: {
                        "boolean": d
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                font: {
                    color: {
                        string: c
                    },
                    size: {
                        number: e
                    },
                    face: {
                        string: c
                    },
                    background: {
                        string: c
                    },
                    strokeWidth: {
                        number: e
                    },
                    strokeColor: {
                        string: c
                    },
                    __type__: {
                        object: g,
                        string: c
                    }
                },
                group: {
                    string: c,
                    number: e,
                    undefined: "undefined"
                },
                hidden: {
                    "boolean": d
                },
                icon: {
                    face: {
                        string: c
                    },
                    code: {
                        string: c
                    },
                    size: {
                        number: e
                    },
                    color: {
                        string: c
                    },
                    __type__: {
                        object: g
                    }
                },
                id: {
                    string: c,
                    number: e
                },
                image: {
                    string: c,
                    undefined: "undefined"
                },
                label: {
                    string: c,
                    undefined: "undefined"
                },
                labelHighlightBold: {
                    "boolean": d
                },
                level: {
                    number: e,
                    undefined: "undefined"
                },
                mass: {
                    number: e
                },
                physics: {
                    "boolean": d
                },
                scaling: {
                    min: {
                        number: e
                    },
                    max: {
                        number: e
                    },
                    label: {
                        enabled: {
                            "boolean": d
                        },
                        min: {
                            number: e
                        },
                        max: {
                            number: e
                        },
                        maxVisible: {
                            number: e
                        },
                        drawThreshold: {
                            number: e
                        },
                        __type__: {
                            object: g,
                            "boolean": d
                        }
                    },
                    customScalingFunction: {
                        "function": "function"
                    },
                    __type__: {
                        object: g
                    }
                },
                shadow: {
                    enabled: {
                        "boolean": d
                    },
                    color: {
                        string: c
                    },
                    size: {
                        number: e
                    },
                    x: {
                        number: e
                    },
                    y: {
                        number: e
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                shape: {
                    string: [ "ellipse", "circle", "database", "box", "text", "image", "circularImage", "diamond", "dot", "star", "triangle", "triangleDown", "square", "icon" ]
                },
                shapeProperties: {
                    borderDashes: {
                        "boolean": d,
                        array: f
                    },
                    borderRadius: {
                        number: e
                    },
                    interpolation: {
                        "boolean": d
                    },
                    useImageSize: {
                        "boolean": d
                    },
                    useBorderWithImage: {
                        "boolean": d
                    },
                    __type__: {
                        object: g
                    }
                },
                size: {
                    number: e
                },
                title: {
                    string: c,
                    undefined: "undefined"
                },
                value: {
                    number: e,
                    undefined: "undefined"
                },
                x: {
                    number: e
                },
                y: {
                    number: e
                },
                __type__: {
                    object: g
                }
            },
            physics: {
                enabled: {
                    "boolean": d
                },
                barnesHut: {
                    gravitationalConstant: {
                        number: e
                    },
                    centralGravity: {
                        number: e
                    },
                    springLength: {
                        number: e
                    },
                    springConstant: {
                        number: e
                    },
                    damping: {
                        number: e
                    },
                    avoidOverlap: {
                        number: e
                    },
                    __type__: {
                        object: g
                    }
                },
                forceAtlas2Based: {
                    gravitationalConstant: {
                        number: e
                    },
                    centralGravity: {
                        number: e
                    },
                    springLength: {
                        number: e
                    },
                    springConstant: {
                        number: e
                    },
                    damping: {
                        number: e
                    },
                    avoidOverlap: {
                        number: e
                    },
                    __type__: {
                        object: g
                    }
                },
                repulsion: {
                    centralGravity: {
                        number: e
                    },
                    springLength: {
                        number: e
                    },
                    springConstant: {
                        number: e
                    },
                    nodeDistance: {
                        number: e
                    },
                    damping: {
                        number: e
                    },
                    __type__: {
                        object: g
                    }
                },
                hierarchicalRepulsion: {
                    centralGravity: {
                        number: e
                    },
                    springLength: {
                        number: e
                    },
                    springConstant: {
                        number: e
                    },
                    nodeDistance: {
                        number: e
                    },
                    damping: {
                        number: e
                    },
                    __type__: {
                        object: g
                    }
                },
                maxVelocity: {
                    number: e
                },
                minVelocity: {
                    number: e
                },
                solver: {
                    string: [ "barnesHut", "repulsion", "hierarchicalRepulsion", "forceAtlas2Based" ]
                },
                stabilization: {
                    enabled: {
                        "boolean": d
                    },
                    iterations: {
                        number: e
                    },
                    updateInterval: {
                        number: e
                    },
                    onlyDynamicEdges: {
                        "boolean": d
                    },
                    fit: {
                        "boolean": d
                    },
                    __type__: {
                        object: g,
                        "boolean": d
                    }
                },
                timestep: {
                    number: e
                },
                adaptiveTimestep: {
                    "boolean": d
                },
                __type__: {
                    object: g,
                    "boolean": d
                }
            },
            autoResize: {
                "boolean": d
            },
            clickToUse: {
                "boolean": d
            },
            locale: {
                string: c
            },
            locales: {
                __any__: {
                    any: i
                },
                __type__: {
                    object: g
                }
            },
            height: {
                string: c
            },
            width: {
                string: c
            },
            __type__: {
                object: g
            }
        };
        j.groups.__any__ = j.nodes, j.manipulation.controlNodeStyle = j.nodes;
        var k = {
            nodes: {
                borderWidth: [ 1, 0, 10, 1 ],
                borderWidthSelected: [ 2, 0, 10, 1 ],
                color: {
                    border: [ "color", "#2B7CE9" ],
                    background: [ "color", "#97C2FC" ],
                    highlight: {
                        border: [ "color", "#2B7CE9" ],
                        background: [ "color", "#D2E5FF" ]
                    },
                    hover: {
                        border: [ "color", "#2B7CE9" ],
                        background: [ "color", "#D2E5FF" ]
                    }
                },
                fixed: {
                    x: !1,
                    y: !1
                },
                font: {
                    color: [ "color", "#343434" ],
                    size: [ 14, 0, 100, 1 ],
                    face: [ "arial", "verdana", "tahoma" ],
                    background: [ "color", "none" ],
                    strokeWidth: [ 0, 0, 50, 1 ],
                    strokeColor: [ "color", "#ffffff" ]
                },
                hidden: !1,
                labelHighlightBold: !0,
                physics: !0,
                scaling: {
                    min: [ 10, 0, 200, 1 ],
                    max: [ 30, 0, 200, 1 ],
                    label: {
                        enabled: !1,
                        min: [ 14, 0, 200, 1 ],
                        max: [ 30, 0, 200, 1 ],
                        maxVisible: [ 30, 0, 200, 1 ],
                        drawThreshold: [ 5, 0, 20, 1 ]
                    }
                },
                shadow: {
                    enabled: !1,
                    color: "rgba(0,0,0,0.5)",
                    size: [ 10, 0, 20, 1 ],
                    x: [ 5, -30, 30, 1 ],
                    y: [ 5, -30, 30, 1 ]
                },
                shape: [ "ellipse", "box", "circle", "database", "diamond", "dot", "square", "star", "text", "triangle", "triangleDown" ],
                shapeProperties: {
                    borderDashes: !1,
                    borderRadius: [ 6, 0, 20, 1 ],
                    interpolation: !0,
                    useImageSize: !1
                },
                size: [ 25, 0, 200, 1 ]
            },
            edges: {
                arrows: {
                    to: {
                        enabled: !1,
                        scaleFactor: [ 1, 0, 3, .05 ]
                    },
                    middle: {
                        enabled: !1,
                        scaleFactor: [ 1, 0, 3, .05 ]
                    },
                    from: {
                        enabled: !1,
                        scaleFactor: [ 1, 0, 3, .05 ]
                    }
                },
                arrowStrikethrough: !0,
                color: {
                    color: [ "color", "#848484" ],
                    highlight: [ "color", "#848484" ],
                    hover: [ "color", "#848484" ],
                    inherit: [ "from", "to", "both", !0, !1 ],
                    opacity: [ 1, 0, 1, .05 ]
                },
                dashes: !1,
                font: {
                    color: [ "color", "#343434" ],
                    size: [ 14, 0, 100, 1 ],
                    face: [ "arial", "verdana", "tahoma" ],
                    background: [ "color", "none" ],
                    strokeWidth: [ 2, 0, 50, 1 ],
                    strokeColor: [ "color", "#ffffff" ],
                    align: [ "horizontal", "top", "middle", "bottom" ]
                },
                hidden: !1,
                hoverWidth: [ 1.5, 0, 5, .1 ],
                labelHighlightBold: !0,
                physics: !0,
                scaling: {
                    min: [ 1, 0, 100, 1 ],
                    max: [ 15, 0, 100, 1 ],
                    label: {
                        enabled: !0,
                        min: [ 14, 0, 200, 1 ],
                        max: [ 30, 0, 200, 1 ],
                        maxVisible: [ 30, 0, 200, 1 ],
                        drawThreshold: [ 5, 0, 20, 1 ]
                    }
                },
                selectionWidth: [ 1.5, 0, 5, .1 ],
                selfReferenceSize: [ 20, 0, 200, 1 ],
                shadow: {
                    enabled: !1,
                    color: "rgba(0,0,0,0.5)",
                    size: [ 10, 0, 20, 1 ],
                    x: [ 5, -30, 30, 1 ],
                    y: [ 5, -30, 30, 1 ]
                },
                smooth: {
                    enabled: !0,
                    type: [ "dynamic", "continuous", "discrete", "diagonalCross", "straightCross", "horizontal", "vertical", "curvedCW", "curvedCCW", "cubicBezier" ],
                    forceDirection: [ "horizontal", "vertical", "none" ],
                    roundness: [ .5, 0, 1, .05 ]
                },
                width: [ 1, 0, 30, 1 ]
            },
            layout: {
                hierarchical: {
                    enabled: !1,
                    levelSeparation: [ 150, 20, 500, 5 ],
                    nodeSpacing: [ 100, 20, 500, 5 ],
                    treeSpacing: [ 200, 20, 500, 5 ],
                    blockShifting: !0,
                    edgeMinimization: !0,
                    parentCentralization: !0,
                    direction: [ "UD", "DU", "LR", "RL" ],
                    sortMethod: [ "hubsize", "directed" ]
                }
            },
            interaction: {
                dragNodes: !0,
                dragView: !0,
                hideEdgesOnDrag: !1,
                hideNodesOnDrag: !1,
                hover: !1,
                keyboard: {
                    enabled: !1,
                    speed: {
                        x: [ 10, 0, 40, 1 ],
                        y: [ 10, 0, 40, 1 ],
                        zoom: [ .02, 0, .1, .005 ]
                    },
                    bindToWindow: !0
                },
                multiselect: !1,
                navigationButtons: !1,
                selectable: !0,
                selectConnectedEdges: !0,
                hoverConnectedEdges: !0,
                tooltipDelay: [ 300, 0, 1e3, 25 ],
                zoomView: !0
            },
            manipulation: {
                enabled: !1,
                initiallyActive: !1
            },
            physics: {
                enabled: !0,
                barnesHut: {
                    gravitationalConstant: [ -2e3, -3e4, 0, 50 ],
                    centralGravity: [ .3, 0, 10, .05 ],
                    springLength: [ 95, 0, 500, 5 ],
                    springConstant: [ .04, 0, 1.2, .005 ],
                    damping: [ .09, 0, 1, .01 ],
                    avoidOverlap: [ 0, 0, 1, .01 ]
                },
                forceAtlas2Based: {
                    gravitationalConstant: [ -50, -500, 0, 1 ],
                    centralGravity: [ .01, 0, 1, .005 ],
                    springLength: [ 95, 0, 500, 5 ],
                    springConstant: [ .08, 0, 1.2, .005 ],
                    damping: [ .4, 0, 1, .01 ],
                    avoidOverlap: [ 0, 0, 1, .01 ]
                },
                repulsion: {
                    centralGravity: [ .2, 0, 10, .05 ],
                    springLength: [ 200, 0, 500, 5 ],
                    springConstant: [ .05, 0, 1.2, .005 ],
                    nodeDistance: [ 100, 0, 500, 5 ],
                    damping: [ .09, 0, 1, .01 ]
                },
                hierarchicalRepulsion: {
                    centralGravity: [ .2, 0, 10, .05 ],
                    springLength: [ 100, 0, 500, 5 ],
                    springConstant: [ .01, 0, 1.2, .005 ],
                    nodeDistance: [ 120, 0, 500, 5 ],
                    damping: [ .09, 0, 1, .01 ]
                },
                maxVelocity: [ 50, 0, 150, 1 ],
                minVelocity: [ .1, .01, .5, .01 ],
                solver: [ "barnesHut", "forceAtlas2Based", "repulsion", "hierarchicalRepulsion" ],
                timestep: [ .5, .01, 1, .01 ]
            },
            global: {
                locale: [ "en", "nl" ]
            }
        };
        b.allOptions = j, b.configureOptions = k;
    }, function(a, b, c) {
        "use strict";
        function d(a) {
            return a && a.__esModule ? a : {
                "default": a
            };
        }
        function e(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var f = function() {
            function a(a, b) {
                var c = [], d = !0, e = !1, f = void 0;
                try {
                    for (var g, h = a[Symbol.iterator](); !(d = (g = h.next()).done) && (c.push(g.value), 
                    !b || c.length !== b); d = !0) ;
                } catch (i) {
                    e = !0, f = i;
                } finally {
                    try {
                        !d && h["return"] && h["return"]();
                    } finally {
                        if (e) throw f;
                    }
                }
                return c;
            }
            return function(b, c) {
                if (Array.isArray(b)) return b;
                if (Symbol.iterator in Object(b)) return a(b, c);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            };
        }(), g = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), h = c(113), i = d(h), j = function() {
            function a(b, c, d) {
                e(this, a), this.body = b, this.springLength = c, this.springConstant = d, this.distanceSolver = new i["default"]();
            }
            return g(a, [ {
                key: "setOptions",
                value: function(a) {
                    a && (a.springLength && (this.springLength = a.springLength), a.springConstant && (this.springConstant = a.springConstant));
                }
            }, {
                key: "solve",
                value: function(a, b) {
                    var c = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2], d = this.distanceSolver.getDistances(this.body, a, b);
                    this._createL_matrix(d), this._createK_matrix(d);
                    for (var e = .01, g = 1, h = 0, i = Math.max(1e3, Math.min(10 * this.body.nodeIndices.length, 6e3)), j = 5, k = 1e9, l = 0, m = 0, n = 0, o = 0, p = 0; k > e && i > h; ) {
                        h += 1;
                        var q = this._getHighestEnergyNode(c), r = f(q, 4);
                        for (l = r[0], k = r[1], m = r[2], n = r[3], o = k, p = 0; o > g && j > p; ) {
                            p += 1, this._moveNode(l, m, n);
                            var s = this._getEnergy(l), t = f(s, 3);
                            o = t[0], m = t[1], n = t[2];
                        }
                    }
                }
            }, {
                key: "_getHighestEnergyNode",
                value: function(a) {
                    for (var b = this.body.nodeIndices, c = this.body.nodes, d = 0, e = b[0], g = 0, h = 0, i = 0; i < b.length; i++) {
                        var j = b[i];
                        if (c[j].predefinedPosition === !1 || c[j].isCluster === !0 && a === !0 || c[j].options.fixed.x === !0 || c[j].options.fixed.y === !0) {
                            var k = this._getEnergy(j), l = f(k, 3), m = l[0], n = l[1], o = l[2];
                            m > d && (d = m, e = j, g = n, h = o);
                        }
                    }
                    return [ e, d, g, h ];
                }
            }, {
                key: "_getEnergy",
                value: function(a) {
                    for (var b = this.body.nodeIndices, c = this.body.nodes, d = c[a].x, e = c[a].y, f = 0, g = 0, h = 0; h < b.length; h++) {
                        var i = b[h];
                        if (i !== a) {
                            var j = c[i].x, k = c[i].y, l = 1 / Math.sqrt(Math.pow(d - j, 2) + Math.pow(e - k, 2));
                            f += this.K_matrix[a][i] * (d - j - this.L_matrix[a][i] * (d - j) * l), g += this.K_matrix[a][i] * (e - k - this.L_matrix[a][i] * (e - k) * l);
                        }
                    }
                    var m = Math.sqrt(Math.pow(f, 2) + Math.pow(g, 2));
                    return [ m, f, g ];
                }
            }, {
                key: "_moveNode",
                value: function(a, b, c) {
                    for (var d = this.body.nodeIndices, e = this.body.nodes, f = 0, g = 0, h = 0, i = e[a].x, j = e[a].y, k = 0; k < d.length; k++) {
                        var l = d[k];
                        if (l !== a) {
                            var m = e[l].x, n = e[l].y, o = 1 / Math.pow(Math.pow(i - m, 2) + Math.pow(j - n, 2), 1.5);
                            f += this.K_matrix[a][l] * (1 - this.L_matrix[a][l] * Math.pow(j - n, 2) * o), g += this.K_matrix[a][l] * (this.L_matrix[a][l] * (i - m) * (j - n) * o), 
                            h += this.K_matrix[a][l] * (1 - this.L_matrix[a][l] * Math.pow(i - m, 2) * o);
                        }
                    }
                    var p = f, q = g, r = b, s = h, t = c, u = (r / p + t / q) / (q / p - s / q), v = -(q * u + r) / p;
                    e[a].x += v, e[a].y += u;
                }
            }, {
                key: "_createL_matrix",
                value: function(a) {
                    var b = this.body.nodeIndices, c = this.springLength;
                    this.L_matrix = [];
                    for (var d = 0; d < b.length; d++) {
                        this.L_matrix[b[d]] = {};
                        for (var e = 0; e < b.length; e++) this.L_matrix[b[d]][b[e]] = c * a[b[d]][b[e]];
                    }
                }
            }, {
                key: "_createK_matrix",
                value: function(a) {
                    var b = this.body.nodeIndices, c = this.springConstant;
                    this.K_matrix = [];
                    for (var d = 0; d < b.length; d++) {
                        this.K_matrix[b[d]] = {};
                        for (var e = 0; e < b.length; e++) this.K_matrix[b[d]][b[e]] = c * Math.pow(a[b[d]][b[e]], -2);
                    }
                }
            } ]), a;
        }();
        b["default"] = j;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(b, "__esModule", {
            value: !0
        });
        var d = function() {
            function a(a, b) {
                for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), 
                    Object.defineProperty(a, d.key, d);
                }
            }
            return function(b, c, d) {
                return c && a(b.prototype, c), d && a(b, d), b;
            };
        }(), e = function() {
            function a() {
                c(this, a);
            }
            return d(a, [ {
                key: "getDistances",
                value: function(a, b, c) {
                    for (var d = {}, e = a.edges, f = 0; f < b.length; f++) {
                        d[b[f]] = {}, d[b[f]] = {};
                        for (var g = 0; g < b.length; g++) d[b[f]][b[g]] = f == g ? 0 : 1e9, d[b[f]][b[g]] = f == g ? 0 : 1e9;
                    }
                    for (var h = 0; h < c.length; h++) {
                        var i = e[c[h]];
                        i.connected === !0 && void 0 !== d[i.fromId] && void 0 !== d[i.toId] && (d[i.fromId][i.toId] = 1, 
                        d[i.toId][i.fromId] = 1);
                    }
                    for (var j = b.length, k = 0; j > k; k++) for (var l = 0; j - 1 > l; l++) for (var m = l + 1; j > m; m++) d[b[l]][b[m]] = Math.min(d[b[l]][b[m]], d[b[l]][b[k]] + d[b[k]][b[m]]), 
                    d[b[m]][b[l]] = d[b[l]][b[m]];
                    return d;
                }
            } ]), a;
        }();
        b["default"] = e;
    }, function(a, b) {
        "use strict";
        "undefined" != typeof CanvasRenderingContext2D && (CanvasRenderingContext2D.prototype.circle = function(a, b, c) {
            this.beginPath(), this.arc(a, b, c, 0, 2 * Math.PI, !1), this.closePath();
        }, CanvasRenderingContext2D.prototype.square = function(a, b, c) {
            this.beginPath(), this.rect(a - c, b - c, 2 * c, 2 * c), this.closePath();
        }, CanvasRenderingContext2D.prototype.triangle = function(a, b, c) {
            this.beginPath(), c *= 1.15, b += .275 * c;
            var d = 2 * c, e = d / 2, f = Math.sqrt(3) / 6 * d, g = Math.sqrt(d * d - e * e);
            this.moveTo(a, b - (g - f)), this.lineTo(a + e, b + f), this.lineTo(a - e, b + f), 
            this.lineTo(a, b - (g - f)), this.closePath();
        }, CanvasRenderingContext2D.prototype.triangleDown = function(a, b, c) {
            this.beginPath(), c *= 1.15, b -= .275 * c;
            var d = 2 * c, e = d / 2, f = Math.sqrt(3) / 6 * d, g = Math.sqrt(d * d - e * e);
            this.moveTo(a, b + (g - f)), this.lineTo(a + e, b - f), this.lineTo(a - e, b - f), 
            this.lineTo(a, b + (g - f)), this.closePath();
        }, CanvasRenderingContext2D.prototype.star = function(a, b, c) {
            this.beginPath(), c *= .82, b += .1 * c;
            for (var d = 0; 10 > d; d++) {
                var e = d % 2 === 0 ? 1.3 * c : .5 * c;
                this.lineTo(a + e * Math.sin(2 * d * Math.PI / 10), b - e * Math.cos(2 * d * Math.PI / 10));
            }
            this.closePath();
        }, CanvasRenderingContext2D.prototype.diamond = function(a, b, c) {
            this.beginPath(), this.lineTo(a, b + c), this.lineTo(a + c, b), this.lineTo(a, b - c), 
            this.lineTo(a - c, b), this.closePath();
        }, CanvasRenderingContext2D.prototype.roundRect = function(a, b, c, d, e) {
            var f = Math.PI / 180;
            0 > c - 2 * e && (e = c / 2), 0 > d - 2 * e && (e = d / 2), this.beginPath(), this.moveTo(a + e, b), 
            this.lineTo(a + c - e, b), this.arc(a + c - e, b + e, e, 270 * f, 360 * f, !1), 
            this.lineTo(a + c, b + d - e), this.arc(a + c - e, b + d - e, e, 0, 90 * f, !1), 
            this.lineTo(a + e, b + d), this.arc(a + e, b + d - e, e, 90 * f, 180 * f, !1), this.lineTo(a, b + e), 
            this.arc(a + e, b + e, e, 180 * f, 270 * f, !1), this.closePath();
        }, CanvasRenderingContext2D.prototype.ellipse = function(a, b, c, d) {
            var e = .5522848, f = c / 2 * e, g = d / 2 * e, h = a + c, i = b + d, j = a + c / 2, k = b + d / 2;
            this.beginPath(), this.moveTo(a, k), this.bezierCurveTo(a, k - g, j - f, b, j, b), 
            this.bezierCurveTo(j + f, b, h, k - g, h, k), this.bezierCurveTo(h, k + g, j + f, i, j, i), 
            this.bezierCurveTo(j - f, i, a, k + g, a, k), this.closePath();
        }, CanvasRenderingContext2D.prototype.database = function(a, b, c, d) {
            var e = 1 / 3, f = c, g = d * e, h = .5522848, i = f / 2 * h, j = g / 2 * h, k = a + f, l = b + g, m = a + f / 2, n = b + g / 2, o = b + (d - g / 2), p = b + d;
            this.beginPath(), this.moveTo(k, n), this.bezierCurveTo(k, n + j, m + i, l, m, l), 
            this.bezierCurveTo(m - i, l, a, n + j, a, n), this.bezierCurveTo(a, n - j, m - i, b, m, b), 
            this.bezierCurveTo(m + i, b, k, n - j, k, n), this.lineTo(k, o), this.bezierCurveTo(k, o + j, m + i, p, m, p), 
            this.bezierCurveTo(m - i, p, a, o + j, a, o), this.lineTo(a, n);
        }, CanvasRenderingContext2D.prototype.arrow = function(a, b, c, d) {
            var e = a - d * Math.cos(c), f = b - d * Math.sin(c), g = a - .9 * d * Math.cos(c), h = b - .9 * d * Math.sin(c), i = e + d / 3 * Math.cos(c + .5 * Math.PI), j = f + d / 3 * Math.sin(c + .5 * Math.PI), k = e + d / 3 * Math.cos(c - .5 * Math.PI), l = f + d / 3 * Math.sin(c - .5 * Math.PI);
            this.beginPath(), this.moveTo(a, b), this.lineTo(i, j), this.lineTo(g, h), this.lineTo(k, l), 
            this.closePath();
        }, CanvasRenderingContext2D.prototype.dashedLine = function(a, b, c, d, e) {
            this.beginPath(), this.moveTo(a, b);
            for (var f = e.length, g = c - a, h = d - b, i = h / g, j = Math.sqrt(g * g + h * h), k = 0, l = !0, m = 0, n = e[0]; j >= .1; ) n = e[k++ % f], 
            n > j && (n = j), m = Math.sqrt(n * n / (1 + i * i)), m = 0 > g ? -m : m, a += m, 
            b += i * m, l === !0 ? this.lineTo(a, b) : this.moveTo(a, b), j -= n, l = !l;
        });
    }, function(a, b) {
        "use strict";
        function c(a) {
            return F = a, n();
        }
        function d() {
            G = 0, H = F.charAt(0);
        }
        function e() {
            G++, H = F.charAt(G);
        }
        function f() {
            return F.charAt(G + 1);
        }
        function g(a) {
            return K.test(a);
        }
        function h(a, b) {
            if (a || (a = {}), b) for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
            return a;
        }
        function i(a, b, c) {
            for (var d = b.split("."), e = a; d.length; ) {
                var f = d.shift();
                d.length ? (e[f] || (e[f] = {}), e = e[f]) : e[f] = c;
            }
        }
        function j(a, b) {
            for (var c, d, e = null, f = [ a ], g = a; g.parent; ) f.push(g.parent), g = g.parent;
            if (g.nodes) for (c = 0, d = g.nodes.length; d > c; c++) if (b.id === g.nodes[c].id) {
                e = g.nodes[c];
                break;
            }
            for (e || (e = {
                id: b.id
            }, a.node && (e.attr = h(e.attr, a.node))), c = f.length - 1; c >= 0; c--) {
                var i = f[c];
                i.nodes || (i.nodes = []), -1 === i.nodes.indexOf(e) && i.nodes.push(e);
            }
            b.attr && (e.attr = h(e.attr, b.attr));
        }
        function k(a, b) {
            if (a.edges || (a.edges = []), a.edges.push(b), a.edge) {
                var c = h({}, a.edge);
                b.attr = h(c, b.attr);
            }
        }
        function l(a, b, c, d, e) {
            var f = {
                from: b,
                to: c,
                type: d
            };
            return a.edge && (f.attr = h({}, a.edge)), f.attr = h(f.attr || {}, e), f;
        }
        function m() {
            for (J = D.NULL, I = ""; " " === H || "	" === H || "\n" === H || "\r" === H; ) e();
            do {
                var a = !1;
                if ("#" === H) {
                    for (var b = G - 1; " " === F.charAt(b) || "	" === F.charAt(b); ) b--;
                    if ("\n" === F.charAt(b) || "" === F.charAt(b)) {
                        for (;"" != H && "\n" != H; ) e();
                        a = !0;
                    }
                }
                if ("/" === H && "/" === f()) {
                    for (;"" != H && "\n" != H; ) e();
                    a = !0;
                }
                if ("/" === H && "*" === f()) {
                    for (;"" != H; ) {
                        if ("*" === H && "/" === f()) {
                            e(), e();
                            break;
                        }
                        e();
                    }
                    a = !0;
                }
                for (;" " === H || "	" === H || "\n" === H || "\r" === H; ) e();
            } while (a);
            if ("" === H) return void (J = D.DELIMITER);
            var c = H + f();
            if (E[c]) return J = D.DELIMITER, I = c, e(), void e();
            if (E[H]) return J = D.DELIMITER, I = H, void e();
            if (g(H) || "-" === H) {
                for (I += H, e(); g(H); ) I += H, e();
                return "false" === I ? I = !1 : "true" === I ? I = !0 : isNaN(Number(I)) || (I = Number(I)), 
                void (J = D.IDENTIFIER);
            }
            if ('"' === H) {
                for (e(); "" != H && ('"' != H || '"' === H && '"' === f()); ) I += H, '"' === H && e(), 
                e();
                if ('"' != H) throw v('End of string " expected');
                return e(), void (J = D.IDENTIFIER);
            }
            for (J = D.UNKNOWN; "" != H; ) I += H, e();
            throw new SyntaxError('Syntax error in part "' + w(I, 30) + '"');
        }
        function n() {
            var a = {};
            if (d(), m(), "strict" === I && (a.strict = !0, m()), "graph" !== I && "digraph" !== I || (a.type = I, 
            m()), J === D.IDENTIFIER && (a.id = I, m()), "{" != I) throw v("Angle bracket { expected");
            if (m(), o(a), "}" != I) throw v("Angle bracket } expected");
            if (m(), "" !== I) throw v("End of file expected");
            return m(), delete a.node, delete a.edge, delete a.graph, a;
        }
        function o(a) {
            for (;"" !== I && "}" != I; ) p(a), ";" === I && m();
        }
        function p(a) {
            var b = q(a);
            if (b) return void t(a, b);
            var c = r(a);
            if (!c) {
                if (J != D.IDENTIFIER) throw v("Identifier expected");
                var d = I;
                if (m(), "=" === I) {
                    if (m(), J != D.IDENTIFIER) throw v("Identifier expected");
                    a[d] = I, m();
                } else s(a, d);
            }
        }
        function q(a) {
            var b = null;
            if ("subgraph" === I && (b = {}, b.type = "subgraph", m(), J === D.IDENTIFIER && (b.id = I, 
            m())), "{" === I) {
                if (m(), b || (b = {}), b.parent = a, b.node = a.node, b.edge = a.edge, b.graph = a.graph, 
                o(b), "}" != I) throw v("Angle bracket } expected");
                m(), delete b.node, delete b.edge, delete b.graph, delete b.parent, a.subgraphs || (a.subgraphs = []), 
                a.subgraphs.push(b);
            }
            return b;
        }
        function r(a) {
            return "node" === I ? (m(), a.node = u(), "node") : "edge" === I ? (m(), a.edge = u(), 
            "edge") : "graph" === I ? (m(), a.graph = u(), "graph") : null;
        }
        function s(a, b) {
            var c = {
                id: b
            }, d = u();
            d && (c.attr = d), j(a, c), t(a, b);
        }
        function t(a, b) {
            for (;"->" === I || "--" === I; ) {
                var c, d = I;
                m();
                var e = q(a);
                if (e) c = e; else {
                    if (J != D.IDENTIFIER) throw v("Identifier or subgraph expected");
                    c = I, j(a, {
                        id: c
                    }), m();
                }
                var f = u(), g = l(a, b, c, d, f);
                k(a, g), b = c;
            }
        }
        function u() {
            for (var a = null; "[" === I; ) {
                for (m(), a = {}; "" !== I && "]" != I; ) {
                    if (J != D.IDENTIFIER) throw v("Attribute name expected");
                    var b = I;
                    if (m(), "=" != I) throw v("Equal sign = expected");
                    if (m(), J != D.IDENTIFIER) throw v("Attribute value expected");
                    var c = I;
                    i(a, b, c), m(), "," == I && m();
                }
                if ("]" != I) throw v("Bracket ] expected");
                m();
            }
            return a;
        }
        function v(a) {
            return new SyntaxError(a + ', got "' + w(I, 30) + '" (char ' + G + ")");
        }
        function w(a, b) {
            return a.length <= b ? a : a.substr(0, 27) + "...";
        }
        function x(a, b, c) {
            Array.isArray(a) ? a.forEach(function(a) {
                Array.isArray(b) ? b.forEach(function(b) {
                    c(a, b);
                }) : c(a, b);
            }) : Array.isArray(b) ? b.forEach(function(b) {
                c(a, b);
            }) : c(a, b);
        }
        function y(a, b, c) {
            for (var d = b.split("."), e = d.pop(), f = a, g = 0; g < d.length; g++) {
                var h = d[g];
                h in f || (f[h] = {}), f = f[h];
            }
            return f[e] = c, a;
        }
        function z(a, b) {
            var c = {};
            for (var d in a) if (a.hasOwnProperty(d)) {
                var e = b[d];
                Array.isArray(e) ? e.forEach(function(b) {
                    y(c, b, a[d]);
                }) : "string" == typeof e ? y(c, e, a[d]) : y(c, d, a[d]);
            }
            return c;
        }
        function A(a) {
            var b = c(a), d = {
                nodes: [],
                edges: [],
                options: {}
            };
            if (b.nodes && b.nodes.forEach(function(a) {
                var b = {
                    id: a.id,
                    label: String(a.label || a.id)
                };
                h(b, z(a.attr, B)), b.image && (b.shape = "image"), d.nodes.push(b);
            }), b.edges) {
                var e = function(a) {
                    var b = {
                        from: a.from,
                        to: a.to
                    };
                    return h(b, z(a.attr, C)), b.arrows = "->" === a.type ? "to" : void 0, b;
                };
                b.edges.forEach(function(a) {
                    var b, c;
                    b = a.from instanceof Object ? a.from.nodes : {
                        id: a.from
                    }, c = a.to instanceof Object ? a.to.nodes : {
                        id: a.to
                    }, a.from instanceof Object && a.from.edges && a.from.edges.forEach(function(a) {
                        var b = e(a);
                        d.edges.push(b);
                    }), x(b, c, function(b, c) {
                        var f = l(d, b.id, c.id, a.type, a.attr), g = e(f);
                        d.edges.push(g);
                    }), a.to instanceof Object && a.to.edges && a.to.edges.forEach(function(a) {
                        var b = e(a);
                        d.edges.push(b);
                    });
                });
            }
            return b.attr && (d.options = b.attr), d;
        }
        var B = {
            fontsize: "font.size",
            fontcolor: "font.color",
            labelfontcolor: "font.color",
            fontname: "font.face",
            color: [ "color.border", "color.background" ],
            fillcolor: "color.background",
            tooltip: "title",
            labeltooltip: "title"
        }, C = Object.create(B);
        C.color = "color.color";
        var D = {
            NULL: 0,
            DELIMITER: 1,
            IDENTIFIER: 2,
            UNKNOWN: 3
        }, E = {
            "{": !0,
            "}": !0,
            "[": !0,
            "]": !0,
            ";": !0,
            "=": !0,
            ",": !0,
            "->": !0,
            "--": !0
        }, F = "", G = 0, H = "", I = "", J = D.NULL, K = /[a-zA-Z_0-9.:#]/;
        b.parseDOT = c, b.DOTToGraph = A;
    }, function(a, b) {
        "use strict";
        function c(a, b) {
            var c = [], d = [], e = {
                edges: {
                    inheritColor: !1
                },
                nodes: {
                    fixed: !1,
                    parseColor: !1
                }
            };
            void 0 !== b && (void 0 !== b.fixed && (e.nodes.fixed = b.fixed), void 0 !== b.parseColor && (e.nodes.parseColor = b.parseColor), 
            void 0 !== b.inheritColor && (e.edges.inheritColor = b.inheritColor));
            for (var f = a.edges, g = a.nodes, h = 0; h < f.length; h++) {
                var i = {}, j = f[h];
                i.id = j.id, i.from = j.source, i.to = j.target, i.attributes = j.attributes, i.label = j.label, 
                i.title = void 0 !== j.attributes ? j.attributes.title : void 0, "Directed" === j.type && (i.arrows = "to"), 
                j.color && e.inheritColor === !1 && (i.color = j.color), c.push(i);
            }
            for (var h = 0; h < g.length; h++) {
                var k = {}, l = g[h];
                k.id = l.id, k.attributes = l.attributes, k.title = l.title, k.x = l.x, k.y = l.y, 
                k.label = l.label, k.title = void 0 !== l.attributes ? l.attributes.title : void 0, 
                e.nodes.parseColor === !0 ? k.color = l.color : k.color = void 0 !== l.color ? {
                    background: l.color,
                    border: l.color,
                    highlight: {
                        background: l.color,
                        border: l.color
                    },
                    hover: {
                        background: l.color,
                        border: l.color
                    }
                } : void 0, k.size = l.size, k.fixed = e.nodes.fixed && void 0 !== l.x && void 0 !== l.y, 
                d.push(k);
            }
            return {
                nodes: d,
                edges: c
            };
        }
        b.parseGephi = c;
    }, function(a, b) {
        "use strict";
        b.en = {
            edit: "Edit",
            del: "Delete selected",
            back: "Back",
            addNode: "Add Node",
            addEdge: "Add Edge",
            editNode: "Edit Node",
            editEdge: "Edit Edge",
            addDescription: "Click in an empty space to place a new node.",
            edgeDescription: "Click on a node and drag the edge to another node to connect them.",
            editEdgeDescription: "Click on the control points and drag them to a node to connect to it.",
            createEdgeError: "Cannot link edges to a cluster.",
            deleteClusterError: "Clusters cannot be deleted.",
            editClusterError: "Clusters cannot be edited."
        }, b.en_EN = b.en, b.en_US = b.en, b.de = {
            edit: "Editieren",
            del: "Lösche Auswahl",
            back: "Zurück",
            addNode: "Knoten hinzufügen",
            addEdge: "Kante hinzufügen",
            editNode: "Knoten editieren",
            editEdge: "Kante editieren",
            addDescription: "Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",
            edgeDescription: "Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",
            editEdgeDescription: "Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",
            createEdgeError: "Es ist nicht möglich, Kanten mit Clustern zu verbinden.",
            deleteClusterError: "Cluster können nicht gelöscht werden.",
            editClusterError: "Cluster können nicht editiert werden."
        }, b.de_DE = b.de, b.es = {
            edit: "Editar",
            del: "Eliminar selección",
            back: "Átras",
            addNode: "Añadir nodo",
            addEdge: "Añadir arista",
            editNode: "Editar nodo",
            editEdge: "Editar arista",
            addDescription: "Haga clic en un lugar vacío para colocar un nuevo nodo.",
            edgeDescription: "Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",
            editEdgeDescription: "Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",
            createEdgeError: "No se puede conectar una arista a un grupo.",
            deleteClusterError: "No es posible eliminar grupos.",
            editClusterError: "No es posible editar grupos."
        }, b.es_ES = b.es, b.nl = {
            edit: "Wijzigen",
            del: "Selectie verwijderen",
            back: "Terug",
            addNode: "Node toevoegen",
            addEdge: "Link toevoegen",
            editNode: "Node wijzigen",
            editEdge: "Link wijzigen",
            addDescription: "Klik op een leeg gebied om een nieuwe node te maken.",
            edgeDescription: "Klik op een node en sleep de link naar een andere node om ze te verbinden.",
            editEdgeDescription: "Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",
            createEdgeError: "Kan geen link maken naar een cluster.",
            deleteClusterError: "Clusters kunnen niet worden verwijderd.",
            editClusterError: "Clusters kunnen niet worden aangepast."
        }, b.nl_NL = b.nl, b.nl_BE = b.nl;
    } ]);
}), !function(a, b) {
    "function" == typeof define && define.amd && define.amd.dust === !0 ? define("dust.core", [], b) : "object" == typeof exports ? module.exports = b() : a.dust = b();
}(this, function() {
    function getTemplate(a, b) {
        return a ? "function" == typeof a && a.template ? a.template : dust.isTemplateFn(a) ? a : b !== !1 ? dust.cache[a] : void 0 : void 0;
    }
    function load(a, b, c) {
        if (!a) return b.setError(new Error("No template or template name provided to render"));
        var d = getTemplate(a, dust.config.cache);
        return d ? d(b, Context.wrap(c, d.templateName)) : dust.onLoad ? b.map(function(b) {
            function d(a, d) {
                var f;
                if (a) return b.setError(a);
                if (f = getTemplate(d, !1) || getTemplate(e, dust.config.cache), !f) {
                    if (!dust.compile) return b.setError(new Error("Dust compiler not available"));
                    f = dust.loadSource(dust.compile(d, e));
                }
                f(b, Context.wrap(c, f.templateName)).end();
            }
            var e = a;
            3 === dust.onLoad.length ? dust.onLoad(e, c.options, d) : dust.onLoad(e, d);
        }) : b.setError(new Error("Template Not Found: " + a));
    }
    function Context(a, b, c, d, e) {
        void 0 === a || a instanceof Stack || (a = new Stack(a)), this.stack = a, this.global = b, 
        this.options = c, this.blocks = d, this.templateName = e;
    }
    function getWithResolvedData(a, b, c) {
        return function(d) {
            return a.push(d)._get(b, c);
        };
    }
    function Stack(a, b, c, d) {
        this.tail = b, this.isObject = a && "object" == typeof a, this.head = a, this.index = c, 
        this.of = d;
    }
    function Stub(a) {
        this.head = new Chunk(this), this.callback = a, this.out = "";
    }
    function Stream() {
        this.head = new Chunk(this);
    }
    function Chunk(a, b, c) {
        this.root = a, this.next = b, this.data = [], this.flushable = !1, this.taps = c;
    }
    function Tap(a, b) {
        this.head = a, this.tail = b;
    }
    var dust = {
        version: "2.7.2"
    }, NONE = "NONE", ERROR = "ERROR", WARN = "WARN", INFO = "INFO", DEBUG = "DEBUG", EMPTY_FUNC = function() {};
    dust.config = {
        whitespace: !1,
        amd: !1,
        cjs: !1,
        cache: !0
    }, dust._aliases = {
        write: "w",
        end: "e",
        map: "m",
        render: "r",
        reference: "f",
        section: "s",
        exists: "x",
        notexists: "nx",
        block: "b",
        partial: "p",
        helper: "h"
    }, function() {
        var a, b, c = {
            DEBUG: 0,
            INFO: 1,
            WARN: 2,
            ERROR: 3,
            NONE: 4
        };
        "undefined" != typeof console && console.log ? (a = console.log, b = "function" == typeof a ? function() {
            a.apply(console, arguments);
        } : function() {
            a(Array.prototype.slice.apply(arguments).join(" "));
        }) : b = EMPTY_FUNC, dust.log = function(a, d) {
            d = d || INFO, c[d] >= c[dust.debugLevel] && b("[DUST:" + d + "]", a);
        }, dust.debugLevel = NONE, "undefined" != typeof process && process.env && /\bdust\b/.test(process.env.DEBUG) && (dust.debugLevel = DEBUG);
    }(), dust.helpers = {}, dust.cache = {}, dust.register = function(a, b) {
        a && (b.templateName = a, dust.config.cache !== !1 && (dust.cache[a] = b));
    }, dust.render = function(a, b, c) {
        var d = new Stub(c).head;
        try {
            load(a, d, b).end();
        } catch (e) {
            d.setError(e);
        }
    }, dust.stream = function(a, b) {
        var c = new Stream(), d = c.head;
        return dust.nextTick(function() {
            try {
                load(a, d, b).end();
            } catch (c) {
                d.setError(c);
            }
        }), c;
    }, dust.loadSource = function(source) {
        return eval(source);
    }, dust.isArray = Array.isArray ? Array.isArray : function(a) {
        return "[object Array]" === Object.prototype.toString.call(a);
    }, dust.nextTick = function() {
        return function(a) {
            setTimeout(a, 0);
        };
    }(), dust.isEmpty = function(a) {
        return 0 === a ? !1 : dust.isArray(a) && !a.length ? !0 : !a;
    }, dust.isEmptyObject = function(a) {
        var b;
        if (null === a) return !1;
        if (void 0 === a) return !1;
        if (a.length > 0) return !1;
        for (b in a) if (Object.prototype.hasOwnProperty.call(a, b)) return !1;
        return !0;
    }, dust.isTemplateFn = function(a) {
        return "function" == typeof a && a.__dustBody;
    }, dust.isThenable = function(a) {
        return a && "object" == typeof a && "function" == typeof a.then;
    }, dust.isStreamable = function(a) {
        return a && "function" == typeof a.on && "function" == typeof a.pipe;
    }, dust.filter = function(a, b, c, d) {
        var e, f, g, h;
        if (c) for (e = 0, f = c.length; f > e; e++) g = c[e], g.length && (h = dust.filters[g], 
        "s" === g ? b = null : "function" == typeof h ? a = h(a, d) : dust.log("Invalid filter `" + g + "`", WARN));
        return b && (a = dust.filters[b](a, d)), a;
    }, dust.filters = {
        h: function(a) {
            return dust.escapeHtml(a);
        },
        j: function(a) {
            return dust.escapeJs(a);
        },
        u: encodeURI,
        uc: encodeURIComponent,
        js: function(a) {
            return dust.escapeJSON(a);
        },
        jp: function(a) {
            return JSON ? JSON.parse(a) : (dust.log("JSON is undefined; could not parse `" + a + "`", WARN), 
            a);
        }
    }, dust.makeBase = dust.context = function(a, b) {
        return new Context(void 0, a, b);
    }, Context.wrap = function(a, b) {
        return a instanceof Context ? a : new Context(a, {}, {}, null, b);
    }, Context.prototype.get = function(a, b) {
        return "string" == typeof a && ("." === a[0] && (b = !0, a = a.substr(1)), a = a.split(".")), 
        this._get(b, a);
    }, Context.prototype._get = function(a, b) {
        var c, d, e, f, g, h = this.stack || {}, i = 1;
        if (d = b[0], e = b.length, a && 0 === e) f = h, h = h.head; else {
            if (a) h && (h = h.head ? h.head[d] : void 0); else {
                for (;h && (!h.isObject || (f = h.head, c = h.head[d], void 0 === c)); ) h = h.tail;
                h = void 0 !== c ? c : this.global && this.global[d];
            }
            for (;h && e > i; ) {
                if (dust.isThenable(h)) return h.then(getWithResolvedData(this, a, b.slice(i)));
                f = h, h = h[b[i]], i++;
            }
        }
        return "function" == typeof h ? (g = function() {
            try {
                return h.apply(f, arguments);
            } catch (a) {
                throw dust.log(a, ERROR), a;
            }
        }, g.__dustBody = !!h.__dustBody, g) : (void 0 === h && dust.log("Cannot find reference `{" + b.join(".") + "}` in template `" + this.getTemplateName() + "`", INFO), 
        h);
    }, Context.prototype.getPath = function(a, b) {
        return this._get(a, b);
    }, Context.prototype.push = function(a, b, c) {
        return void 0 === a ? (dust.log("Not pushing an undefined variable onto the context", INFO), 
        this) : this.rebase(new Stack(a, this.stack, b, c));
    }, Context.prototype.pop = function() {
        var a = this.current();
        return this.stack = this.stack && this.stack.tail, a;
    }, Context.prototype.rebase = function(a) {
        return new Context(a, this.global, this.options, this.blocks, this.getTemplateName());
    }, Context.prototype.clone = function() {
        var a = this.rebase();
        return a.stack = this.stack, a;
    }, Context.prototype.current = function() {
        return this.stack && this.stack.head;
    }, Context.prototype.getBlock = function(a) {
        var b, c, d;
        if ("function" == typeof a && (a = a(new Chunk(), this).data.join("")), b = this.blocks, 
        !b) return dust.log("No blocks for context `" + a + "` in template `" + this.getTemplateName() + "`", DEBUG), 
        !1;
        for (c = b.length; c--; ) if (d = b[c][a]) return d;
        return dust.log("Malformed template `" + this.getTemplateName() + "` was missing one or more blocks."), 
        !1;
    }, Context.prototype.shiftBlocks = function(a) {
        var b, c = this.blocks;
        return a ? (b = c ? c.concat([ a ]) : [ a ], new Context(this.stack, this.global, this.options, b, this.getTemplateName())) : this;
    }, Context.prototype.resolve = function(a) {
        var b;
        return "function" != typeof a ? a : (b = new Chunk().render(a, this), b instanceof Chunk ? b.data.join("") : b);
    }, Context.prototype.getTemplateName = function() {
        return this.templateName;
    }, Stub.prototype.flush = function() {
        for (var a = this.head; a; ) {
            if (!a.flushable) return a.error ? (this.callback(a.error), dust.log("Rendering failed with error `" + a.error + "`", ERROR), 
            void (this.flush = EMPTY_FUNC)) : void 0;
            this.out += a.data.join(""), a = a.next, this.head = a;
        }
        this.callback(null, this.out);
    }, Stream.prototype.flush = function() {
        for (var a = this.head; a; ) {
            if (!a.flushable) return a.error ? (this.emit("error", a.error), this.emit("end"), 
            dust.log("Streaming failed with error `" + a.error + "`", ERROR), void (this.flush = EMPTY_FUNC)) : void 0;
            this.emit("data", a.data.join("")), a = a.next, this.head = a;
        }
        this.emit("end");
    }, Stream.prototype.emit = function(a, b) {
        var c, d, e = this.events || {}, f = e[a] || [];
        if (!f.length) return dust.log("Stream broadcasting, but no listeners for `" + a + "`", DEBUG), 
        !1;
        for (f = f.slice(0), c = 0, d = f.length; d > c; c++) f[c](b);
        return !0;
    }, Stream.prototype.on = function(a, b) {
        var c = this.events = this.events || {}, d = c[a] = c[a] || [];
        return "function" != typeof b ? dust.log("No callback function provided for `" + a + "` event listener", WARN) : d.push(b), 
        this;
    }, Stream.prototype.pipe = function(a) {
        if ("function" != typeof a.write || "function" != typeof a.end) return dust.log("Incompatible stream passed to `pipe`", WARN), 
        this;
        var b = !1;
        return "function" == typeof a.emit && a.emit("pipe", this), "function" == typeof a.on && a.on("error", function() {
            b = !0;
        }), this.on("data", function(c) {
            if (!b) try {
                a.write(c, "utf8");
            } catch (d) {
                dust.log(d, ERROR);
            }
        }).on("end", function() {
            if (!b) try {
                a.end(), b = !0;
            } catch (c) {
                dust.log(c, ERROR);
            }
        });
    }, Chunk.prototype.write = function(a) {
        var b = this.taps;
        return b && (a = b.go(a)), this.data.push(a), this;
    }, Chunk.prototype.end = function(a) {
        return a && this.write(a), this.flushable = !0, this.root.flush(), this;
    }, Chunk.prototype.map = function(a) {
        var b = new Chunk(this.root, this.next, this.taps), c = new Chunk(this.root, b, this.taps);
        this.next = c, this.flushable = !0;
        try {
            a(c);
        } catch (d) {
            dust.log(d, ERROR), c.setError(d);
        }
        return b;
    }, Chunk.prototype.tap = function(a) {
        var b = this.taps;
        return this.taps = b ? b.push(a) : new Tap(a), this;
    }, Chunk.prototype.untap = function() {
        return this.taps = this.taps.tail, this;
    }, Chunk.prototype.render = function(a, b) {
        return a(this, b);
    }, Chunk.prototype.reference = function(a, b, c, d) {
        return "function" == typeof a ? (a = a.apply(b.current(), [ this, b, null, {
            auto: c,
            filters: d
        } ]), a instanceof Chunk ? a : this.reference(a, b, c, d)) : dust.isThenable(a) ? this.await(a, b, null, c, d) : dust.isStreamable(a) ? this.stream(a, b, null, c, d) : dust.isEmpty(a) ? this : this.write(dust.filter(a, c, d, b));
    }, Chunk.prototype.section = function(a, b, c, d) {
        var e, f, g, h = c.block, i = c["else"], j = this;
        if ("function" == typeof a && !dust.isTemplateFn(a)) {
            try {
                a = a.apply(b.current(), [ this, b, c, d ]);
            } catch (k) {
                return dust.log(k, ERROR), this.setError(k);
            }
            if (a instanceof Chunk) return a;
        }
        if (dust.isEmptyObject(c)) return j;
        if (dust.isEmptyObject(d) || (b = b.push(d)), dust.isArray(a)) {
            if (h) {
                if (f = a.length, f > 0) {
                    for (g = b.stack && b.stack.head || {}, g.$len = f, e = 0; f > e; e++) g.$idx = e, 
                    j = h(j, b.push(a[e], e, f));
                    return g.$idx = void 0, g.$len = void 0, j;
                }
                if (i) return i(this, b);
            }
        } else {
            if (dust.isThenable(a)) return this.await(a, b, c);
            if (dust.isStreamable(a)) return this.stream(a, b, c);
            if (a === !0) {
                if (h) return h(this, b);
            } else if (a || 0 === a) {
                if (h) return h(this, b.push(a));
            } else if (i) return i(this, b);
        }
        return dust.log("Section without corresponding key in template `" + b.getTemplateName() + "`", DEBUG), 
        this;
    }, Chunk.prototype.exists = function(a, b, c) {
        var d = c.block, e = c["else"];
        if (dust.isEmpty(a)) {
            if (e) return e(this, b);
        } else {
            if (d) return d(this, b);
            dust.log("No block for exists check in template `" + b.getTemplateName() + "`", DEBUG);
        }
        return this;
    }, Chunk.prototype.notexists = function(a, b, c) {
        var d = c.block, e = c["else"];
        if (dust.isEmpty(a)) {
            if (d) return d(this, b);
            dust.log("No block for not-exists check in template `" + b.getTemplateName() + "`", DEBUG);
        } else if (e) return e(this, b);
        return this;
    }, Chunk.prototype.block = function(a, b, c) {
        var d = a || c.block;
        return d ? d(this, b) : this;
    }, Chunk.prototype.partial = function(a, b, c, d) {
        var e;
        return void 0 === d && (d = c, c = b), dust.isEmptyObject(d) || (c = c.clone(), 
        e = c.pop(), c = c.push(d).push(e)), dust.isTemplateFn(a) ? this.capture(a, b, function(a, b) {
            c.templateName = a, load(a, b, c).end();
        }) : (c.templateName = a, load(a, this, c));
    }, Chunk.prototype.helper = function(a, b, c, d, e) {
        var f, g = this, h = d.filters;
        if (void 0 === e && (e = "h"), !dust.helpers[a]) return dust.log("Helper `" + a + "` does not exist", WARN), 
        g;
        try {
            return f = dust.helpers[a](g, b, c, d), f instanceof Chunk ? f : ("string" == typeof h && (h = h.split("|")), 
            dust.isEmptyObject(c) ? g.reference(f, b, e, h) : g.section(f, b, c, d));
        } catch (i) {
            return dust.log("Error in helper `" + a + "`: " + i.message, ERROR), g.setError(i);
        }
    }, Chunk.prototype.await = function(a, b, c, d, e) {
        return this.map(function(f) {
            a.then(function(a) {
                f = c ? f.section(a, b, c) : f.reference(a, b, d, e), f.end();
            }, function(a) {
                var d = c && c.error;
                d ? f.render(d, b.push(a)).end() : (dust.log("Unhandled promise rejection in `" + b.getTemplateName() + "`", INFO), 
                f.end());
            });
        });
    }, Chunk.prototype.stream = function(a, b, c, d, e) {
        var f = c && c.block, g = c && c.error;
        return this.map(function(h) {
            var i = !1;
            a.on("data", function(a) {
                i || (f ? h = h.map(function(c) {
                    c.render(f, b.push(a)).end();
                }) : c || (h = h.reference(a, b, d, e)));
            }).on("error", function(a) {
                i || (g ? h.render(g, b.push(a)) : dust.log("Unhandled stream error in `" + b.getTemplateName() + "`", INFO), 
                i || (i = !0, h.end()));
            }).on("end", function() {
                i || (i = !0, h.end());
            });
        });
    }, Chunk.prototype.capture = function(a, b, c) {
        return this.map(function(d) {
            var e = new Stub(function(a, b) {
                a ? d.setError(a) : c(b, d);
            });
            a(e.head, b).end();
        });
    }, Chunk.prototype.setError = function(a) {
        return this.error = a, this.root.flush(), this;
    };
    for (var f in Chunk.prototype) dust._aliases[f] && (Chunk.prototype[dust._aliases[f]] = Chunk.prototype[f]);
    Tap.prototype.push = function(a) {
        return new Tap(a, this);
    }, Tap.prototype.go = function(a) {
        for (var b = this; b; ) a = b.head(a), b = b.tail;
        return a;
    };
    var HCHARS = /[&<>"']/, AMP = /&/g, LT = /</g, GT = />/g, QUOT = /\"/g, SQUOT = /\'/g;
    dust.escapeHtml = function(a) {
        return "string" == typeof a || a && "function" == typeof a.toString ? ("string" != typeof a && (a = a.toString()), 
        HCHARS.test(a) ? a.replace(AMP, "&amp;").replace(LT, "&lt;").replace(GT, "&gt;").replace(QUOT, "&quot;").replace(SQUOT, "&#39;") : a) : a;
    };
    var BS = /\\/g, FS = /\//g, CR = /\r/g, LS = /\u2028/g, PS = /\u2029/g, NL = /\n/g, LF = /\f/g, SQ = /'/g, DQ = /"/g, TB = /\t/g;
    return dust.escapeJs = function(a) {
        return "string" == typeof a ? a.replace(BS, "\\\\").replace(FS, "\\/").replace(DQ, '\\"').replace(SQ, "\\'").replace(CR, "\\r").replace(LS, "\\u2028").replace(PS, "\\u2029").replace(NL, "\\n").replace(LF, "\\f").replace(TB, "\\t") : a;
    }, dust.escapeJSON = function(a) {
        return JSON ? JSON.stringify(a).replace(LS, "\\u2028").replace(PS, "\\u2029").replace(LT, "\\u003c") : (dust.log("JSON is undefined; could not escape `" + a + "`", WARN), 
        a);
    }, dust;
}), function(a, b) {
    "function" == typeof define && define.amd && define.amd.dust === !0 ? define("dust.parse", [ "dust.core" ], function(a) {
        return b(a).parse;
    }) : "object" == typeof exports ? module.exports = b(require("./dust")) : b(a.dust);
}(this, function(a) {
    var b = function() {
        function a(a, b) {
            function c() {
                this.constructor = a;
            }
            c.prototype = b.prototype, a.prototype = new c();
        }
        function b(a, b, c, d, e, f) {
            this.message = a, this.expected = b, this.found = c, this.offset = d, this.line = e, 
            this.column = f, this.name = "SyntaxError";
        }
        function c(a) {
            function c() {
                return f(wc).line;
            }
            function d() {
                return f(wc).column;
            }
            function e(a) {
                throw h(a, null, wc);
            }
            function f(b) {
                function c(b, c, d) {
                    var e, f;
                    for (e = c; d > e; e++) f = a.charAt(e), "\n" === f ? (b.seenCR || b.line++, b.column = 1, 
                    b.seenCR = !1) : "\r" === f || "\u2028" === f || "\u2029" === f ? (b.line++, b.column = 1, 
                    b.seenCR = !0) : (b.column++, b.seenCR = !1);
                }
                return xc !== b && (xc > b && (xc = 0, yc = {
                    line: 1,
                    column: 1,
                    seenCR: !1
                }), c(yc, xc, b), xc = b), yc;
            }
            function g(a) {
                zc > vc || (vc > zc && (zc = vc, Ac = []), Ac.push(a));
            }
            function h(c, d, e) {
                function g(a) {
                    var b = 1;
                    for (a.sort(function(a, b) {
                        return a.description < b.description ? -1 : a.description > b.description ? 1 : 0;
                    }); b < a.length; ) a[b - 1] === a[b] ? a.splice(b, 1) : b++;
                }
                function h(a, b) {
                    function c(a) {
                        function b(a) {
                            return a.charCodeAt(0).toString(16).toUpperCase();
                        }
                        return a.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\x08/g, "\\b").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\f/g, "\\f").replace(/\r/g, "\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g, function(a) {
                            return "\\x0" + b(a);
                        }).replace(/[\x10-\x1F\x80-\xFF]/g, function(a) {
                            return "\\x" + b(a);
                        }).replace(/[\u0180-\u0FFF]/g, function(a) {
                            return "\\u0" + b(a);
                        }).replace(/[\u1080-\uFFFF]/g, function(a) {
                            return "\\u" + b(a);
                        });
                    }
                    var d, e, f, g = new Array(a.length);
                    for (f = 0; f < a.length; f++) g[f] = a[f].description;
                    return d = a.length > 1 ? g.slice(0, -1).join(", ") + " or " + g[a.length - 1] : g[0], 
                    e = b ? '"' + c(b) + '"' : "end of input", "Expected " + d + " but " + e + " found.";
                }
                var i = f(e), j = e < a.length ? a.charAt(e) : null;
                return null !== d && g(d), new b(null !== c ? c : h(d, j), d, j, e, i.line, i.column);
            }
            function i() {
                var a;
                return a = j();
            }
            function j() {
                var a, b, c;
                for (a = vc, b = [], c = k(); c !== X; ) b.push(c), c = k();
                return b !== X && (wc = a, b = $(b)), a = b;
            }
            function k() {
                var a;
                return a = K(), a === X && (a = L(), a === X && (a = l(), a === X && (a = s(), a === X && (a = u(), 
                a === X && (a = r(), a === X && (a = H())))))), a;
            }
            function l() {
                var b, c, d, e, f, h, i, k;
                if (Bc++, b = vc, c = m(), c !== X) {
                    for (d = [], e = S(); e !== X; ) d.push(e), e = S();
                    d !== X ? (e = O(), e !== X ? (f = j(), f !== X ? (h = q(), h !== X ? (i = n(), 
                    i === X && (i = ba), i !== X ? (wc = vc, k = ca(c, f, h, i), k = k ? da : aa, k !== X ? (wc = b, 
                    c = ea(c, f, h, i), b = c) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, 
                    b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa;
                if (b === X) if (b = vc, c = m(), c !== X) {
                    for (d = [], e = S(); e !== X; ) d.push(e), e = S();
                    d !== X ? (47 === a.charCodeAt(vc) ? (e = fa, vc++) : (e = X, 0 === Bc && g(ga)), 
                    e !== X ? (f = O(), f !== X ? (wc = b, c = ha(c), b = c) : (vc = b, b = aa)) : (vc = b, 
                    b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(_)), b;
            }
            function m() {
                var b, c, d, e, f, h, i;
                if (b = vc, c = N(), c !== X) if (ia.test(a.charAt(vc)) ? (d = a.charAt(vc), vc++) : (d = X, 
                0 === Bc && g(ja)), d !== X) {
                    for (e = [], f = S(); f !== X; ) e.push(f), f = S();
                    e !== X ? (f = v(), f !== X ? (h = o(), h !== X ? (i = p(), i !== X ? (wc = b, c = ka(d, f, h, i), 
                    b = c) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa; else vc = b, b = aa;
                return b;
            }
            function n() {
                var b, c, d, e, f, h, i;
                if (Bc++, b = vc, c = N(), c !== X) if (47 === a.charCodeAt(vc) ? (d = fa, vc++) : (d = X, 
                0 === Bc && g(ga)), d !== X) {
                    for (e = [], f = S(); f !== X; ) e.push(f), f = S();
                    if (e !== X) if (f = v(), f !== X) {
                        for (h = [], i = S(); i !== X; ) h.push(i), i = S();
                        h !== X ? (i = O(), i !== X ? (wc = b, c = ma(f), b = c) : (vc = b, b = aa)) : (vc = b, 
                        b = aa);
                    } else vc = b, b = aa; else vc = b, b = aa;
                } else vc = b, b = aa; else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(la)), b;
            }
            function o() {
                var b, c, d, e;
                return b = vc, c = vc, 58 === a.charCodeAt(vc) ? (d = na, vc++) : (d = X, 0 === Bc && g(oa)), 
                d !== X ? (e = v(), e !== X ? (wc = c, d = pa(e), c = d) : (vc = c, c = aa)) : (vc = c, 
                c = aa), c === X && (c = ba), c !== X && (wc = b, c = qa(c)), b = c;
            }
            function p() {
                var b, c, d, e, f, h, i;
                if (Bc++, b = vc, c = [], d = vc, e = [], f = S(), f !== X) for (;f !== X; ) e.push(f), 
                f = S(); else e = aa;
                for (e !== X ? (f = C(), f !== X ? (61 === a.charCodeAt(vc) ? (h = sa, vc++) : (h = X, 
                0 === Bc && g(ta)), h !== X ? (i = w(), i === X && (i = v(), i === X && (i = F())), 
                i !== X ? (wc = d, e = ua(f, i), d = e) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                d = aa)) : (vc = d, d = aa); d !== X; ) {
                    if (c.push(d), d = vc, e = [], f = S(), f !== X) for (;f !== X; ) e.push(f), f = S(); else e = aa;
                    e !== X ? (f = C(), f !== X ? (61 === a.charCodeAt(vc) ? (h = sa, vc++) : (h = X, 
                    0 === Bc && g(ta)), h !== X ? (i = w(), i === X && (i = v(), i === X && (i = F())), 
                    i !== X ? (wc = d, e = ua(f, i), d = e) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                    d = aa)) : (vc = d, d = aa);
                }
                return c !== X && (wc = b, c = va(c)), b = c, Bc--, b === X && (c = X, 0 === Bc && g(ra)), 
                b;
            }
            function q() {
                var b, c, d, e, f, h, i, k;
                for (Bc++, b = vc, c = [], d = vc, e = N(), e !== X ? (58 === a.charCodeAt(vc) ? (f = na, 
                vc++) : (f = X, 0 === Bc && g(oa)), f !== X ? (h = C(), h !== X ? (i = O(), i !== X ? (k = j(), 
                k !== X ? (wc = d, e = ua(h, k), d = e) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa); d !== X; ) c.push(d), d = vc, e = N(), 
                e !== X ? (58 === a.charCodeAt(vc) ? (f = na, vc++) : (f = X, 0 === Bc && g(oa)), 
                f !== X ? (h = C(), h !== X ? (i = O(), i !== X ? (k = j(), k !== X ? (wc = d, e = ua(h, k), 
                d = e) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                d = aa);
                return c !== X && (wc = b, c = xa(c)), b = c, Bc--, b === X && (c = X, 0 === Bc && g(wa)), 
                b;
            }
            function r() {
                var a, b, c, d, e;
                return Bc++, a = vc, b = N(), b !== X ? (c = v(), c !== X ? (d = t(), d !== X ? (e = O(), 
                e !== X ? (wc = a, b = za(c, d), a = b) : (vc = a, a = aa)) : (vc = a, a = aa)) : (vc = a, 
                a = aa)) : (vc = a, a = aa), Bc--, a === X && (b = X, 0 === Bc && g(ya)), a;
            }
            function s() {
                var b, c, d, e, f, h, i, j, k, l;
                if (Bc++, b = vc, c = N(), c !== X) if (62 === a.charCodeAt(vc) ? (d = Ba, vc++) : (d = X, 
                0 === Bc && g(Ca)), d === X && (43 === a.charCodeAt(vc) ? (d = Da, vc++) : (d = X, 
                0 === Bc && g(Ea))), d !== X) {
                    for (e = [], f = S(); f !== X; ) e.push(f), f = S();
                    if (e !== X) if (f = vc, h = C(), h !== X && (wc = f, h = Fa(h)), f = h, f === X && (f = F()), 
                    f !== X) if (h = o(), h !== X) if (i = p(), i !== X) {
                        for (j = [], k = S(); k !== X; ) j.push(k), k = S();
                        j !== X ? (47 === a.charCodeAt(vc) ? (k = fa, vc++) : (k = X, 0 === Bc && g(ga)), 
                        k !== X ? (l = O(), l !== X ? (wc = b, c = Ga(d, f, h, i), b = c) : (vc = b, b = aa)) : (vc = b, 
                        b = aa)) : (vc = b, b = aa);
                    } else vc = b, b = aa; else vc = b, b = aa; else vc = b, b = aa; else vc = b, b = aa;
                } else vc = b, b = aa; else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(Aa)), b;
            }
            function t() {
                var b, c, d, e, f;
                for (Bc++, b = vc, c = [], d = vc, 124 === a.charCodeAt(vc) ? (e = Ia, vc++) : (e = X, 
                0 === Bc && g(Ja)), e !== X ? (f = C(), f !== X ? (wc = d, e = pa(f), d = e) : (vc = d, 
                d = aa)) : (vc = d, d = aa); d !== X; ) c.push(d), d = vc, 124 === a.charCodeAt(vc) ? (e = Ia, 
                vc++) : (e = X, 0 === Bc && g(Ja)), e !== X ? (f = C(), f !== X ? (wc = d, e = pa(f), 
                d = e) : (vc = d, d = aa)) : (vc = d, d = aa);
                return c !== X && (wc = b, c = Ka(c)), b = c, Bc--, b === X && (c = X, 0 === Bc && g(Ha)), 
                b;
            }
            function u() {
                var b, c, d, e, f;
                return Bc++, b = vc, c = N(), c !== X ? (126 === a.charCodeAt(vc) ? (d = Ma, vc++) : (d = X, 
                0 === Bc && g(Na)), d !== X ? (e = C(), e !== X ? (f = O(), f !== X ? (wc = b, c = Oa(e), 
                b = c) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa), 
                Bc--, b === X && (c = X, 0 === Bc && g(La)), b;
            }
            function v() {
                var a, b;
                return Bc++, a = vc, b = B(), b !== X && (wc = a, b = Qa(b)), a = b, a === X && (a = vc, 
                b = C(), b !== X && (wc = a, b = Ra(b)), a = b), Bc--, a === X && (b = X, 0 === Bc && g(Pa)), 
                a;
            }
            function w() {
                var a, b;
                return Bc++, a = vc, b = x(), b === X && (b = A()), b !== X && (wc = a, b = Ta(b)), 
                a = b, Bc--, a === X && (b = X, 0 === Bc && g(Sa)), a;
            }
            function x() {
                var b, c, d, e;
                return Bc++, b = vc, c = A(), c !== X ? (46 === a.charCodeAt(vc) ? (d = Va, vc++) : (d = X, 
                0 === Bc && g(Wa)), d !== X ? (e = y(), e !== X ? (wc = b, c = Xa(c, e), b = c) : (vc = b, 
                b = aa)) : (vc = b, b = aa)) : (vc = b, b = aa), Bc--, b === X && (c = X, 0 === Bc && g(Ua)), 
                b;
            }
            function y() {
                var b, c, d;
                if (Bc++, b = vc, c = [], Za.test(a.charAt(vc)) ? (d = a.charAt(vc), vc++) : (d = X, 
                0 === Bc && g($a)), d !== X) for (;d !== X; ) c.push(d), Za.test(a.charAt(vc)) ? (d = a.charAt(vc), 
                vc++) : (d = X, 0 === Bc && g($a)); else c = aa;
                return c !== X && (wc = b, c = _a(c)), b = c, Bc--, b === X && (c = X, 0 === Bc && g(Ya)), 
                b;
            }
            function z() {
                var b, c, d;
                return Bc++, b = vc, 45 === a.charCodeAt(vc) ? (c = bb, vc++) : (c = X, 0 === Bc && g(cb)), 
                c !== X ? (d = y(), d !== X ? (wc = b, c = db(c, d), b = c) : (vc = b, b = aa)) : (vc = b, 
                b = aa), Bc--, b === X && (c = X, 0 === Bc && g(ab)), b;
            }
            function A() {
                var a, b;
                return Bc++, a = z(), a === X && (a = y()), Bc--, a === X && (b = X, 0 === Bc && g(eb)), 
                a;
            }
            function B() {
                var b, c, d, e;
                if (Bc++, b = vc, c = C(), c === X && (c = ba), c !== X) {
                    if (d = [], e = E(), e === X && (e = D()), e !== X) for (;e !== X; ) d.push(e), 
                    e = E(), e === X && (e = D()); else d = aa;
                    d !== X ? (wc = b, c = gb(c, d), b = c) : (vc = b, b = aa);
                } else vc = b, b = aa;
                if (b === X) if (b = vc, 46 === a.charCodeAt(vc) ? (c = Va, vc++) : (c = X, 0 === Bc && g(Wa)), 
                c !== X) {
                    for (d = [], e = E(), e === X && (e = D()); e !== X; ) d.push(e), e = E(), e === X && (e = D());
                    d !== X ? (wc = b, c = hb(d), b = c) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(fb)), b;
            }
            function C() {
                var b, c, d, e;
                if (Bc++, b = vc, jb.test(a.charAt(vc)) ? (c = a.charAt(vc), vc++) : (c = X, 0 === Bc && g(kb)), 
                c !== X) {
                    for (d = [], lb.test(a.charAt(vc)) ? (e = a.charAt(vc), vc++) : (e = X, 0 === Bc && g(mb)); e !== X; ) d.push(e), 
                    lb.test(a.charAt(vc)) ? (e = a.charAt(vc), vc++) : (e = X, 0 === Bc && g(mb));
                    d !== X ? (wc = b, c = nb(c, d), b = c) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(ib)), b;
            }
            function D() {
                var b, c, d, e, f, h;
                if (Bc++, b = vc, c = vc, d = P(), d !== X) {
                    if (e = vc, f = [], Za.test(a.charAt(vc)) ? (h = a.charAt(vc), vc++) : (h = X, 0 === Bc && g($a)), 
                    h !== X) for (;h !== X; ) f.push(h), Za.test(a.charAt(vc)) ? (h = a.charAt(vc), 
                    vc++) : (h = X, 0 === Bc && g($a)); else f = aa;
                    f !== X && (wc = e, f = pb(f)), e = f, e === X && (e = v()), e !== X ? (f = Q(), 
                    f !== X ? (wc = c, d = qb(e), c = d) : (vc = c, c = aa)) : (vc = c, c = aa);
                } else vc = c, c = aa;
                return c !== X ? (d = E(), d === X && (d = ba), d !== X ? (wc = b, c = rb(c, d), 
                b = c) : (vc = b, b = aa)) : (vc = b, b = aa), Bc--, b === X && (c = X, 0 === Bc && g(ob)), 
                b;
            }
            function E() {
                var b, c, d, e, f;
                if (Bc++, b = vc, c = [], d = vc, 46 === a.charCodeAt(vc) ? (e = Va, vc++) : (e = X, 
                0 === Bc && g(Wa)), e !== X ? (f = C(), f !== X ? (wc = d, e = tb(f), d = e) : (vc = d, 
                d = aa)) : (vc = d, d = aa), d !== X) for (;d !== X; ) c.push(d), d = vc, 46 === a.charCodeAt(vc) ? (e = Va, 
                vc++) : (e = X, 0 === Bc && g(Wa)), e !== X ? (f = C(), f !== X ? (wc = d, e = tb(f), 
                d = e) : (vc = d, d = aa)) : (vc = d, d = aa); else c = aa;
                return c !== X ? (d = D(), d === X && (d = ba), d !== X ? (wc = b, c = ub(c, d), 
                b = c) : (vc = b, b = aa)) : (vc = b, b = aa), Bc--, b === X && (c = X, 0 === Bc && g(sb)), 
                b;
            }
            function F() {
                var b, c, d, e;
                if (Bc++, b = vc, 34 === a.charCodeAt(vc) ? (c = wb, vc++) : (c = X, 0 === Bc && g(xb)), 
                c !== X ? (34 === a.charCodeAt(vc) ? (d = wb, vc++) : (d = X, 0 === Bc && g(xb)), 
                d !== X ? (wc = b, c = yb(), b = c) : (vc = b, b = aa)) : (vc = b, b = aa), b === X && (b = vc, 
                34 === a.charCodeAt(vc) ? (c = wb, vc++) : (c = X, 0 === Bc && g(xb)), c !== X ? (d = I(), 
                d !== X ? (34 === a.charCodeAt(vc) ? (e = wb, vc++) : (e = X, 0 === Bc && g(xb)), 
                e !== X ? (wc = b, c = zb(d), b = c) : (vc = b, b = aa)) : (vc = b, b = aa)) : (vc = b, 
                b = aa), b === X)) if (b = vc, 34 === a.charCodeAt(vc) ? (c = wb, vc++) : (c = X, 
                0 === Bc && g(xb)), c !== X) {
                    if (d = [], e = G(), e !== X) for (;e !== X; ) d.push(e), e = G(); else d = aa;
                    d !== X ? (34 === a.charCodeAt(vc) ? (e = wb, vc++) : (e = X, 0 === Bc && g(xb)), 
                    e !== X ? (wc = b, c = Ab(d), b = c) : (vc = b, b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(vb)), b;
            }
            function G() {
                var a, b;
                return a = u(), a === X && (a = r(), a === X && (a = vc, b = I(), b !== X && (wc = a, 
                b = Bb(b)), a = b)), a;
            }
            function H() {
                var b, c, d, e, f, h, i, j;
                if (Bc++, b = vc, c = R(), c !== X) {
                    for (d = [], e = S(); e !== X; ) d.push(e), e = S();
                    d !== X ? (wc = b, c = Db(c, d), b = c) : (vc = b, b = aa);
                } else vc = b, b = aa;
                if (b === X) {
                    if (b = vc, c = [], d = vc, e = vc, Bc++, f = M(), Bc--, f === X ? e = da : (vc = e, 
                    e = aa), e !== X ? (f = vc, Bc++, h = K(), Bc--, h === X ? f = da : (vc = f, f = aa), 
                    f !== X ? (h = vc, Bc++, i = L(), Bc--, i === X ? h = da : (vc = h, h = aa), h !== X ? (i = vc, 
                    Bc++, j = R(), Bc--, j === X ? i = da : (vc = i, i = aa), i !== X ? (a.length > vc ? (j = a.charAt(vc), 
                    vc++) : (j = X, 0 === Bc && g(Eb)), j !== X ? (wc = d, e = Fb(j), d = e) : (vc = d, 
                    d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                    d = aa), d !== X) for (;d !== X; ) c.push(d), d = vc, e = vc, Bc++, f = M(), Bc--, 
                    f === X ? e = da : (vc = e, e = aa), e !== X ? (f = vc, Bc++, h = K(), Bc--, h === X ? f = da : (vc = f, 
                    f = aa), f !== X ? (h = vc, Bc++, i = L(), Bc--, i === X ? h = da : (vc = h, h = aa), 
                    h !== X ? (i = vc, Bc++, j = R(), Bc--, j === X ? i = da : (vc = i, i = aa), i !== X ? (a.length > vc ? (j = a.charAt(vc), 
                    vc++) : (j = X, 0 === Bc && g(Eb)), j !== X ? (wc = d, e = Fb(j), d = e) : (vc = d, 
                    d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, d = aa)) : (vc = d, 
                    d = aa); else c = aa;
                    c !== X && (wc = b, c = Gb(c)), b = c;
                }
                return Bc--, b === X && (c = X, 0 === Bc && g(Cb)), b;
            }
            function I() {
                var b, c, d, e, f;
                if (Bc++, b = vc, c = [], d = vc, e = vc, Bc++, f = M(), Bc--, f === X ? e = da : (vc = e, 
                e = aa), e !== X ? (f = J(), f === X && (Ib.test(a.charAt(vc)) ? (f = a.charAt(vc), 
                vc++) : (f = X, 0 === Bc && g(Jb))), f !== X ? (wc = d, e = Fb(f), d = e) : (vc = d, 
                d = aa)) : (vc = d, d = aa), d !== X) for (;d !== X; ) c.push(d), d = vc, e = vc, 
                Bc++, f = M(), Bc--, f === X ? e = da : (vc = e, e = aa), e !== X ? (f = J(), f === X && (Ib.test(a.charAt(vc)) ? (f = a.charAt(vc), 
                vc++) : (f = X, 0 === Bc && g(Jb))), f !== X ? (wc = d, e = Fb(f), d = e) : (vc = d, 
                d = aa)) : (vc = d, d = aa); else c = aa;
                return c !== X && (wc = b, c = Kb(c)), b = c, Bc--, b === X && (c = X, 0 === Bc && g(Hb)), 
                b;
            }
            function J() {
                var b, c;
                return b = vc, a.substr(vc, 2) === Lb ? (c = Lb, vc += 2) : (c = X, 0 === Bc && g(Mb)), 
                c !== X && (wc = b, c = Nb()), b = c;
            }
            function K() {
                var b, c, d, e, f, h;
                if (Bc++, b = vc, a.substr(vc, 2) === Pb ? (c = Pb, vc += 2) : (c = X, 0 === Bc && g(Qb)), 
                c !== X) {
                    for (d = [], e = vc, f = vc, Bc++, a.substr(vc, 2) === Rb ? (h = Rb, vc += 2) : (h = X, 
                    0 === Bc && g(Sb)), Bc--, h === X ? f = da : (vc = f, f = aa), f !== X ? (a.length > vc ? (h = a.charAt(vc), 
                    vc++) : (h = X, 0 === Bc && g(Eb)), h !== X ? (wc = e, f = Tb(h), e = f) : (vc = e, 
                    e = aa)) : (vc = e, e = aa); e !== X; ) d.push(e), e = vc, f = vc, Bc++, a.substr(vc, 2) === Rb ? (h = Rb, 
                    vc += 2) : (h = X, 0 === Bc && g(Sb)), Bc--, h === X ? f = da : (vc = f, f = aa), 
                    f !== X ? (a.length > vc ? (h = a.charAt(vc), vc++) : (h = X, 0 === Bc && g(Eb)), 
                    h !== X ? (wc = e, f = Tb(h), e = f) : (vc = e, e = aa)) : (vc = e, e = aa);
                    d !== X ? (a.substr(vc, 2) === Rb ? (e = Rb, vc += 2) : (e = X, 0 === Bc && g(Sb)), 
                    e !== X ? (wc = b, c = Ub(d), b = c) : (vc = b, b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(Ob)), b;
            }
            function L() {
                var b, c, d, e, f, h;
                if (Bc++, b = vc, a.substr(vc, 2) === Wb ? (c = Wb, vc += 2) : (c = X, 0 === Bc && g(Xb)), 
                c !== X) {
                    for (d = [], e = vc, f = vc, Bc++, a.substr(vc, 2) === Yb ? (h = Yb, vc += 2) : (h = X, 
                    0 === Bc && g(Zb)), Bc--, h === X ? f = da : (vc = f, f = aa), f !== X ? (a.length > vc ? (h = a.charAt(vc), 
                    vc++) : (h = X, 0 === Bc && g(Eb)), h !== X ? (wc = e, f = Fb(h), e = f) : (vc = e, 
                    e = aa)) : (vc = e, e = aa); e !== X; ) d.push(e), e = vc, f = vc, Bc++, a.substr(vc, 2) === Yb ? (h = Yb, 
                    vc += 2) : (h = X, 0 === Bc && g(Zb)), Bc--, h === X ? f = da : (vc = f, f = aa), 
                    f !== X ? (a.length > vc ? (h = a.charAt(vc), vc++) : (h = X, 0 === Bc && g(Eb)), 
                    h !== X ? (wc = e, f = Fb(h), e = f) : (vc = e, e = aa)) : (vc = e, e = aa);
                    d !== X ? (a.substr(vc, 2) === Yb ? (e = Yb, vc += 2) : (e = X, 0 === Bc && g(Zb)), 
                    e !== X ? (wc = b, c = $b(d), b = c) : (vc = b, b = aa)) : (vc = b, b = aa);
                } else vc = b, b = aa;
                return Bc--, b === X && (c = X, 0 === Bc && g(Vb)), b;
            }
            function M() {
                var b, c, d, e, f, h, i, j, k, l;
                if (b = vc, c = N(), c !== X) {
                    for (d = [], e = S(); e !== X; ) d.push(e), e = S();
                    if (d !== X) if (_b.test(a.charAt(vc)) ? (e = a.charAt(vc), vc++) : (e = X, 0 === Bc && g(ac)), 
                    e !== X) {
                        for (f = [], h = S(); h !== X; ) f.push(h), h = S();
                        if (f !== X) {
                            if (h = [], i = vc, j = vc, Bc++, k = O(), Bc--, k === X ? j = da : (vc = j, j = aa), 
                            j !== X ? (k = vc, Bc++, l = R(), Bc--, l === X ? k = da : (vc = k, k = aa), k !== X ? (a.length > vc ? (l = a.charAt(vc), 
                            vc++) : (l = X, 0 === Bc && g(Eb)), l !== X ? (j = [ j, k, l ], i = j) : (vc = i, 
                            i = aa)) : (vc = i, i = aa)) : (vc = i, i = aa), i !== X) for (;i !== X; ) h.push(i), 
                            i = vc, j = vc, Bc++, k = O(), Bc--, k === X ? j = da : (vc = j, j = aa), j !== X ? (k = vc, 
                            Bc++, l = R(), Bc--, l === X ? k = da : (vc = k, k = aa), k !== X ? (a.length > vc ? (l = a.charAt(vc), 
                            vc++) : (l = X, 0 === Bc && g(Eb)), l !== X ? (j = [ j, k, l ], i = j) : (vc = i, 
                            i = aa)) : (vc = i, i = aa)) : (vc = i, i = aa); else h = aa;
                            if (h !== X) {
                                for (i = [], j = S(); j !== X; ) i.push(j), j = S();
                                i !== X ? (j = O(), j !== X ? (c = [ c, d, e, f, h, i, j ], b = c) : (vc = b, b = aa)) : (vc = b, 
                                b = aa);
                            } else vc = b, b = aa;
                        } else vc = b, b = aa;
                    } else vc = b, b = aa; else vc = b, b = aa;
                } else vc = b, b = aa;
                return b === X && (b = r()), b;
            }
            function N() {
                var b;
                return 123 === a.charCodeAt(vc) ? (b = bc, vc++) : (b = X, 0 === Bc && g(cc)), b;
            }
            function O() {
                var b;
                return 125 === a.charCodeAt(vc) ? (b = dc, vc++) : (b = X, 0 === Bc && g(ec)), b;
            }
            function P() {
                var b;
                return 91 === a.charCodeAt(vc) ? (b = fc, vc++) : (b = X, 0 === Bc && g(gc)), b;
            }
            function Q() {
                var b;
                return 93 === a.charCodeAt(vc) ? (b = hc, vc++) : (b = X, 0 === Bc && g(ic)), b;
            }
            function R() {
                var b;
                return 10 === a.charCodeAt(vc) ? (b = jc, vc++) : (b = X, 0 === Bc && g(kc)), b === X && (a.substr(vc, 2) === lc ? (b = lc, 
                vc += 2) : (b = X, 0 === Bc && g(mc)), b === X && (13 === a.charCodeAt(vc) ? (b = nc, 
                vc++) : (b = X, 0 === Bc && g(oc)), b === X && (8232 === a.charCodeAt(vc) ? (b = pc, 
                vc++) : (b = X, 0 === Bc && g(qc)), b === X && (8233 === a.charCodeAt(vc) ? (b = rc, 
                vc++) : (b = X, 0 === Bc && g(sc)))))), b;
            }
            function S() {
                var b;
                return tc.test(a.charAt(vc)) ? (b = a.charAt(vc), vc++) : (b = X, 0 === Bc && g(uc)), 
                b === X && (b = R()), b;
            }
            function T(a) {
                return parseInt(a.join(""), 10);
            }
            function U(a) {
                return a.concat([ [ "line", c() ], [ "col", d() ] ]);
            }
            var V, W = arguments.length > 1 ? arguments[1] : {}, X = {}, Y = {
                start: i
            }, Z = i, $ = function(a) {
                var b = [ "body" ].concat(a);
                return U(b);
            }, _ = {
                type: "other",
                description: "section"
            }, aa = X, ba = null, ca = function(a, b, c, d) {
                return d && a[1].text === d.text || e("Expected end tag for " + a[1].text + " but it was not found."), 
                !0;
            }, da = void 0, ea = function(a, b, c) {
                return c.push([ "param", [ "literal", "block" ], b ]), a.push(c, [ "filters" ]), 
                U(a);
            }, fa = "/", ga = {
                type: "literal",
                value: "/",
                description: '"/"'
            }, ha = function(a) {
                return a.push([ "bodies" ], [ "filters" ]), U(a);
            }, ia = /^[#?\^<+@%]/, ja = {
                type: "class",
                value: "[#?\\^<+@%]",
                description: "[#?\\^<+@%]"
            }, ka = function(a, b, c, d) {
                return [ a, b, c, d ];
            }, la = {
                type: "other",
                description: "end tag"
            }, ma = function(a) {
                return a;
            }, na = ":", oa = {
                type: "literal",
                value: ":",
                description: '":"'
            }, pa = function(a) {
                return a;
            }, qa = function(a) {
                return a ? [ "context", a ] : [ "context" ];
            }, ra = {
                type: "other",
                description: "params"
            }, sa = "=", ta = {
                type: "literal",
                value: "=",
                description: '"="'
            }, ua = function(a, b) {
                return [ "param", [ "literal", a ], b ];
            }, va = function(a) {
                return [ "params" ].concat(a);
            }, wa = {
                type: "other",
                description: "bodies"
            }, xa = function(a) {
                return [ "bodies" ].concat(a);
            }, ya = {
                type: "other",
                description: "reference"
            }, za = function(a, b) {
                return U([ "reference", a, b ]);
            }, Aa = {
                type: "other",
                description: "partial"
            }, Ba = ">", Ca = {
                type: "literal",
                value: ">",
                description: '">"'
            }, Da = "+", Ea = {
                type: "literal",
                value: "+",
                description: '"+"'
            }, Fa = function(a) {
                return [ "literal", a ];
            }, Ga = function(a, b, c, d) {
                var e = ">" === a ? "partial" : a;
                return U([ e, b, c, d ]);
            }, Ha = {
                type: "other",
                description: "filters"
            }, Ia = "|", Ja = {
                type: "literal",
                value: "|",
                description: '"|"'
            }, Ka = function(a) {
                return [ "filters" ].concat(a);
            }, La = {
                type: "other",
                description: "special"
            }, Ma = "~", Na = {
                type: "literal",
                value: "~",
                description: '"~"'
            }, Oa = function(a) {
                return U([ "special", a ]);
            }, Pa = {
                type: "other",
                description: "identifier"
            }, Qa = function(a) {
                var b = [ "path" ].concat(a);
                return b.text = a[1].join(".").replace(/,line,\d+,col,\d+/g, ""), b;
            }, Ra = function(a) {
                var b = [ "key", a ];
                return b.text = a, b;
            }, Sa = {
                type: "other",
                description: "number"
            }, Ta = function(a) {
                return [ "literal", a ];
            }, Ua = {
                type: "other",
                description: "float"
            }, Va = ".", Wa = {
                type: "literal",
                value: ".",
                description: '"."'
            }, Xa = function(a, b) {
                return parseFloat(a + "." + b);
            }, Ya = {
                type: "other",
                description: "unsigned_integer"
            }, Za = /^[0-9]/, $a = {
                type: "class",
                value: "[0-9]",
                description: "[0-9]"
            }, _a = function(a) {
                return T(a);
            }, ab = {
                type: "other",
                description: "signed_integer"
            }, bb = "-", cb = {
                type: "literal",
                value: "-",
                description: '"-"'
            }, db = function(a, b) {
                return -1 * b;
            }, eb = {
                type: "other",
                description: "integer"
            }, fb = {
                type: "other",
                description: "path"
            }, gb = function(a, b) {
                return b = b[0], a && b ? (b.unshift(a), U([ !1, b ])) : U([ !0, b ]);
            }, hb = function(a) {
                return U(a.length > 0 ? [ !0, a[0] ] : [ !0, [] ]);
            }, ib = {
                type: "other",
                description: "key"
            }, jb = /^[a-zA-Z_$]/, kb = {
                type: "class",
                value: "[a-zA-Z_$]",
                description: "[a-zA-Z_$]"
            }, lb = /^[0-9a-zA-Z_$\-]/, mb = {
                type: "class",
                value: "[0-9a-zA-Z_$\\-]",
                description: "[0-9a-zA-Z_$\\-]"
            }, nb = function(a, b) {
                return a + b.join("");
            }, ob = {
                type: "other",
                description: "array"
            }, pb = function(a) {
                return a.join("");
            }, qb = function(a) {
                return a;
            }, rb = function(a, b) {
                return b ? b.unshift(a) : b = [ a ], b;
            }, sb = {
                type: "other",
                description: "array_part"
            }, tb = function(a) {
                return a;
            }, ub = function(a, b) {
                return b ? a.concat(b) : a;
            }, vb = {
                type: "other",
                description: "inline"
            }, wb = '"', xb = {
                type: "literal",
                value: '"',
                description: '"\\""'
            }, yb = function() {
                return U([ "literal", "" ]);
            }, zb = function(a) {
                return U([ "literal", a ]);
            }, Ab = function(a) {
                return U([ "body" ].concat(a));
            }, Bb = function(a) {
                return [ "buffer", a ];
            }, Cb = {
                type: "other",
                description: "buffer"
            }, Db = function(a, b) {
                return U([ "format", a, b.join("") ]);
            }, Eb = {
                type: "any",
                description: "any character"
            }, Fb = function(a) {
                return a;
            }, Gb = function(a) {
                return U([ "buffer", a.join("") ]);
            }, Hb = {
                type: "other",
                description: "literal"
            }, Ib = /^[^"]/, Jb = {
                type: "class",
                value: '[^"]',
                description: '[^"]'
            }, Kb = function(a) {
                return a.join("");
            }, Lb = '\\"', Mb = {
                type: "literal",
                value: '\\"',
                description: '"\\\\\\""'
            }, Nb = function() {
                return '"';
            }, Ob = {
                type: "other",
                description: "raw"
            }, Pb = "{`", Qb = {
                type: "literal",
                value: "{`",
                description: '"{`"'
            }, Rb = "`}", Sb = {
                type: "literal",
                value: "`}",
                description: '"`}"'
            }, Tb = function(a) {
                return a;
            }, Ub = function(a) {
                return U([ "raw", a.join("") ]);
            }, Vb = {
                type: "other",
                description: "comment"
            }, Wb = "{!", Xb = {
                type: "literal",
                value: "{!",
                description: '"{!"'
            }, Yb = "!}", Zb = {
                type: "literal",
                value: "!}",
                description: '"!}"'
            }, $b = function(a) {
                return U([ "comment", a.join("") ]);
            }, _b = /^[#?\^><+%:@\/~%]/, ac = {
                type: "class",
                value: "[#?\\^><+%:@\\/~%]",
                description: "[#?\\^><+%:@\\/~%]"
            }, bc = "{", cc = {
                type: "literal",
                value: "{",
                description: '"{"'
            }, dc = "}", ec = {
                type: "literal",
                value: "}",
                description: '"}"'
            }, fc = "[", gc = {
                type: "literal",
                value: "[",
                description: '"["'
            }, hc = "]", ic = {
                type: "literal",
                value: "]",
                description: '"]"'
            }, jc = "\n", kc = {
                type: "literal",
                value: "\n",
                description: '"\\n"'
            }, lc = "\r\n", mc = {
                type: "literal",
                value: "\r\n",
                description: '"\\r\\n"'
            }, nc = "\r", oc = {
                type: "literal",
                value: "\r",
                description: '"\\r"'
            }, pc = "\u2028", qc = {
                type: "literal",
                value: "\u2028",
                description: '"\\u2028"'
            }, rc = "\u2029", sc = {
                type: "literal",
                value: "\u2029",
                description: '"\\u2029"'
            }, tc = /^[\t\x0B\f \xA0\uFEFF]/, uc = {
                type: "class",
                value: "[\\t\\x0B\\f \\xA0\\uFEFF]",
                description: "[\\t\\x0B\\f \\xA0\\uFEFF]"
            }, vc = 0, wc = 0, xc = 0, yc = {
                line: 1,
                column: 1,
                seenCR: !1
            }, zc = 0, Ac = [], Bc = 0;
            if ("startRule" in W) {
                if (!(W.startRule in Y)) throw new Error("Can't start parsing from rule \"" + W.startRule + '".');
                Z = Y[W.startRule];
            }
            if (V = Z(), V !== X && vc === a.length) return V;
            throw V !== X && vc < a.length && g({
                type: "end",
                description: "end of input"
            }), h(null, Ac, zc);
        }
        return a(b, Error), {
            SyntaxError: b,
            parse: c
        };
    }();
    return a.parse = b.parse, b;
}), function(a, b) {
    "function" == typeof define && define.amd && define.amd.dust === !0 ? define("dust.compile", [ "dust.core", "dust.parse" ], function(a, c) {
        return b(c, a).compile;
    }) : "object" == typeof exports ? module.exports = b(require("./parser").parse, require("./dust")) : b(a.dust.parse, a.dust);
}(this, function(a, b) {
    function c(a) {
        var b = {};
        return s.filterNode(b, a);
    }
    function d(a, b) {
        var c, d, e, f = [ b[0] ];
        for (c = 1, d = b.length; d > c; c++) e = s.filterNode(a, b[c]), e && f.push(e);
        return f;
    }
    function e(a, b) {
        var c, d, e, f, g = [ b[0] ];
        for (d = 1, e = b.length; e > d; d++) f = s.filterNode(a, b[d]), f && ("buffer" === f[0] || "format" === f[0] ? c ? (c[0] = "buffer" === f[0] ? "buffer" : c[0], 
        c[1] += f.slice(1, -2).join("")) : (c = f, g.push(f)) : (c = null, g.push(f)));
        return g;
    }
    function f(a, b) {
        return [ "buffer", u[b[1]], b[2], b[3] ];
    }
    function g(a, b) {
        return b;
    }
    function h() {}
    function i(a, c) {
        return b.config.whitespace ? (c.splice(1, 2, c.slice(1, -2).join("")), c) : null;
    }
    function j(a, c) {
        var d, e = {
            name: c,
            bodies: [],
            blocks: {},
            index: 0,
            auto: "h"
        }, f = b.escapeJs(c), g = c ? '"' + f + '",' : "", h = "function(dust){", i = s.compileNode(e, a);
        return c && (h += 'dust.register("' + f + '",' + i + ");"), h += k(e) + l(e) + "return " + i + "}", 
        d = "(" + h + "(dust));", b.config.amd ? "define(" + g + '["dust.core"],' + h + ");" : b.config.cjs ? "module.exports=function(dust){var tmpl=" + d + "var f=" + r().toString() + ";f.template=tmpl;return f}" : d;
    }
    function k(a) {
        var b, c = [], d = a.blocks;
        for (b in d) c.push('"' + b + '":' + d[b]);
        return c.length ? (a.blocks = "ctx=ctx.shiftBlocks(blocks);", "var blocks={" + c.join(",") + "};") : (a.blocks = "", 
        a.blocks);
    }
    function l(a) {
        var b, c, d = [], e = a.bodies, f = a.blocks;
        for (b = 0, c = e.length; c > b; b++) d[b] = "function body_" + b + "(chk,ctx){" + f + "return chk" + e[b] + ";}body_" + b + ".__dustBody=!0;";
        return d.join("");
    }
    function m(a, b) {
        var c, d, e = "";
        for (c = 1, d = b.length; d > c; c++) e += s.compileNode(a, b[c]);
        return e;
    }
    function n(a, c, d) {
        return "." + (b._aliases[d] || d) + "(" + s.compileNode(a, c[1]) + "," + s.compileNode(a, c[2]) + "," + s.compileNode(a, c[4]) + "," + s.compileNode(a, c[3]) + ")";
    }
    function o(a) {
        return a.replace(v, "\\\\").replace(w, '\\"').replace(x, "\\f").replace(y, "\\n").replace(z, "\\r").replace(A, "\\t");
    }
    function p(a, c, d) {
        var e = b.loadSource(b.compile(a));
        return r(e)(c, d);
    }
    function q(a, c) {
        var d = b.loadSource(b.compile(a, c));
        return r(d);
    }
    function r(a) {
        return function(c, d) {
            var e = d ? "render" : "stream";
            return b[e](a, c, d);
        };
    }
    var s = {}, t = b.isArray;
    s.compile = function(b, d) {
        try {
            var e = c(a(b));
            return j(e, d);
        } catch (f) {
            if (!f.line || !f.column) throw f;
            throw new SyntaxError(f.message + " At line : " + f.line + ", column : " + f.column);
        }
    }, s.filterNode = function(a, b) {
        return s.optimizers[b[0]](a, b);
    }, s.optimizers = {
        body: e,
        buffer: g,
        special: f,
        format: i,
        reference: d,
        "#": d,
        "?": d,
        "^": d,
        "<": d,
        "+": d,
        "@": d,
        "%": d,
        partial: d,
        context: d,
        params: d,
        bodies: d,
        param: d,
        filters: g,
        key: g,
        path: g,
        literal: g,
        raw: g,
        comment: h,
        line: h,
        col: h
    }, s.pragmas = {
        esc: function(a, b, c) {
            var d, e = a.auto;
            return b || (b = "h"), a.auto = "s" === b ? "" : b, d = m(a, c.block), a.auto = e, 
            d;
        }
    };
    var u = {
        s: " ",
        n: "\n",
        r: "\r",
        lb: "{",
        rb: "}"
    };
    s.compileNode = function(a, b) {
        return s.nodes[b[0]](a, b);
    }, s.nodes = {
        body: function(a, b) {
            var c = a.index++, d = "body_" + c;
            return a.bodies[c] = m(a, b), d;
        },
        buffer: function(a, b) {
            return ".w(" + B(b[1]) + ")";
        },
        format: function(a, b) {
            return ".w(" + B(b[1]) + ")";
        },
        reference: function(a, b) {
            return ".f(" + s.compileNode(a, b[1]) + ",ctx," + s.compileNode(a, b[2]) + ")";
        },
        "#": function(a, b) {
            return n(a, b, "section");
        },
        "?": function(a, b) {
            return n(a, b, "exists");
        },
        "^": function(a, b) {
            return n(a, b, "notexists");
        },
        "<": function(a, b) {
            for (var c = b[4], d = 1, e = c.length; e > d; d++) {
                var f = c[d], g = f[1][1];
                if ("block" === g) return a.blocks[b[1].text] = s.compileNode(a, f[2]), "";
            }
            return "";
        },
        "+": function(a, b) {
            return "undefined" == typeof b[1].text && "undefined" == typeof b[4] ? ".b(ctx.getBlock(" + s.compileNode(a, b[1]) + ",chk, ctx)," + s.compileNode(a, b[2]) + ", {}," + s.compileNode(a, b[3]) + ")" : ".b(ctx.getBlock(" + B(b[1].text) + ")," + s.compileNode(a, b[2]) + "," + s.compileNode(a, b[4]) + "," + s.compileNode(a, b[3]) + ")";
        },
        "@": function(a, b) {
            return ".h(" + B(b[1].text) + "," + s.compileNode(a, b[2]) + "," + s.compileNode(a, b[4]) + "," + s.compileNode(a, b[3]) + "," + s.compileNode(a, b[5]) + ")";
        },
        "%": function(a, b) {
            var c, d, e, f, g, h, i, j, k, l = b[1][1];
            if (!s.pragmas[l]) return "";
            for (c = b[4], d = {}, j = 1, k = c.length; k > j; j++) h = c[j], d[h[1][1]] = h[2];
            for (e = b[3], f = {}, j = 1, k = e.length; k > j; j++) i = e[j], f[i[1][1]] = i[2][1];
            return g = b[2][1] ? b[2][1].text : null, s.pragmas[l](a, g, d, f);
        },
        partial: function(a, b) {
            return ".p(" + s.compileNode(a, b[1]) + ",ctx," + s.compileNode(a, b[2]) + "," + s.compileNode(a, b[3]) + ")";
        },
        context: function(a, b) {
            return b[1] ? "ctx.rebase(" + s.compileNode(a, b[1]) + ")" : "ctx";
        },
        params: function(a, b) {
            for (var c = [], d = 1, e = b.length; e > d; d++) c.push(s.compileNode(a, b[d]));
            return c.length ? "{" + c.join(",") + "}" : "{}";
        },
        bodies: function(a, b) {
            for (var c = [], d = 1, e = b.length; e > d; d++) c.push(s.compileNode(a, b[d]));
            return "{" + c.join(",") + "}";
        },
        param: function(a, b) {
            return s.compileNode(a, b[1]) + ":" + s.compileNode(a, b[2]);
        },
        filters: function(a, b) {
            for (var c = [], d = 1, e = b.length; e > d; d++) {
                var f = b[d];
                c.push('"' + f + '"');
            }
            return '"' + a.auto + '"' + (c.length ? ",[" + c.join(",") + "]" : "");
        },
        key: function(a, b) {
            return 'ctx.get(["' + b[1] + '"], false)';
        },
        path: function(a, b) {
            for (var c = b[1], d = b[2], e = [], f = 0, g = d.length; g > f; f++) e.push(t(d[f]) ? s.compileNode(a, d[f]) : '"' + d[f] + '"');
            return "ctx.getPath(" + c + ", [" + e.join(",") + "])";
        },
        literal: function(a, b) {
            return B(b[1]);
        },
        raw: function(a, b) {
            return ".w(" + B(b[1]) + ")";
        }
    };
    var v = /\\/g, w = /"/g, x = /\f/g, y = /\n/g, z = /\r/g, A = /\t/g, B = "undefined" == typeof JSON ? function(a) {
        return '"' + o(a) + '"';
    } : JSON.stringify;
    return b.compiler = s, b.compile = b.compiler.compile, b.renderSource = p, b.compileFn = q, 
    b.filterNode = s.filterNode, b.optimizers = s.optimizers, b.pragmas = s.pragmas, 
    b.compileNode = s.compileNode, b.nodes = s.nodes, s;
}), "function" == typeof define && define.amd && define.amd.dust === !0 && define([ "require", "dust.core", "dust.compile" ], function(a, b) {
    return b.onLoad = function(b, c) {
        a([ b ], function() {
            c();
        });
    }, b;
}), !function(a) {
    "use strict";
    for (var b, c, d = {}, e = function() {}, f = "memory".split(","), g = "assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(","); b = f.pop(); ) a[b] = a[b] || d;
    for (;c = g.pop(); ) a[c] = a[c] || e;
}(this.console = this.console || {}), function() {
    "use strict";
    CanvasRenderingContext2D.prototype.installPattern = function(a) {
        if ("undefined" != typeof this.isPatternInstalled) throw "Must un-install old line pattern before installing a new one.";
        this.isPatternInstalled = !0;
        var b = [ 0, 0 ], c = [], d = this.beginPath, e = this.lineTo, f = this.moveTo, g = this.stroke;
        this.uninstallPattern = function() {
            this.beginPath = d, this.lineTo = e, this.moveTo = f, this.stroke = g, this.uninstallPattern = void 0, 
            this.isPatternInstalled = void 0;
        }, this.beginPath = function() {
            c = [], d.call(this);
        }, this.moveTo = function(a, b) {
            c.push([ [ a, b ] ]), f.call(this, a, b);
        }, this.lineTo = function(a, b) {
            var d = c[c.length - 1];
            d.push([ a, b ]);
        }, this.stroke = function() {
            if (0 === c.length) return void g.call(this);
            for (var d = 0; d < c.length; d++) for (var h = c[d], i = h[0][0], j = h[0][1], k = 1; k < h.length; k++) {
                var l = h[k][0], m = h[k][1];
                this.save();
                var n = l - i, o = m - j, p = Math.sqrt(n * n + o * o), q = Math.atan2(o, n);
                this.translate(i, j), f.call(this, 0, 0), this.rotate(q);
                for (var r = b[0], s = 0; p > s; ) {
                    var t = a[r];
                    s += b[1] ? b[1] : t, s > p ? (b = [ r, s - p ], s = p) : b = [ (r + 1) % a.length, 0 ], 
                    r % 2 === 0 ? e.call(this, s, 0) : f.call(this, s, 0), r = (r + 1) % a.length;
                }
                this.restore(), i = l, j = m;
            }
            g.call(this), c = [];
        };
    }, CanvasRenderingContext2D.prototype.uninstallPattern = function() {
        throw "Must install a line pattern before uninstalling it.";
    };
}();

var DygraphOptions = function() {
    return function() {
        "use strict";
        var a = function(a) {
            this.dygraph_ = a, this.yAxes_ = [], this.xAxis_ = {}, this.series_ = {}, this.global_ = this.dygraph_.attrs_, 
            this.user_ = this.dygraph_.user_attrs_ || {}, this.labels_ = [], this.highlightSeries_ = this.get("highlightSeriesOpts") || {}, 
            this.reparseSeries();
        };
        return a.AXIS_STRING_MAPPINGS_ = {
            y: 0,
            Y: 0,
            y1: 0,
            Y1: 0,
            y2: 1,
            Y2: 1
        }, a.axisToIndex_ = function(b) {
            if ("string" == typeof b) {
                if (a.AXIS_STRING_MAPPINGS_.hasOwnProperty(b)) return a.AXIS_STRING_MAPPINGS_[b];
                throw "Unknown axis : " + b;
            }
            if ("number" == typeof b) {
                if (0 === b || 1 === b) return b;
                throw "Dygraphs only supports two y-axes, indexed from 0-1.";
            }
            if (b) throw "Unknown axis : " + b;
            return 0;
        }, a.prototype.reparseSeries = function() {
            var b = this.get("labels");
            if (b) {
                this.labels_ = b.slice(1), this.yAxes_ = [ {
                    series: [],
                    options: {}
                } ], this.xAxis_ = {
                    options: {}
                }, this.series_ = {};
                var c = !this.user_.series;
                if (c) {
                    for (var d = 0, e = 0; e < this.labels_.length; e++) {
                        var f = this.labels_[e], g = this.user_[f] || {}, h = 0, i = g.axis;
                        "object" == typeof i && (h = ++d, this.yAxes_[h] = {
                            series: [ f ],
                            options: i
                        }), i || this.yAxes_[0].series.push(f), this.series_[f] = {
                            idx: e,
                            yAxis: h,
                            options: g
                        };
                    }
                    for (var e = 0; e < this.labels_.length; e++) {
                        var f = this.labels_[e], g = this.series_[f].options, i = g.axis;
                        if ("string" == typeof i) {
                            if (!this.series_.hasOwnProperty(i)) return void console.error("Series " + f + " wants to share a y-axis with series " + i + ", which does not define its own axis.");
                            var h = this.series_[i].yAxis;
                            this.series_[f].yAxis = h, this.yAxes_[h].series.push(f);
                        }
                    }
                } else for (var e = 0; e < this.labels_.length; e++) {
                    var f = this.labels_[e], g = this.user_.series[f] || {}, h = a.axisToIndex_(g.axis);
                    this.series_[f] = {
                        idx: e,
                        yAxis: h,
                        options: g
                    }, this.yAxes_[h] ? this.yAxes_[h].series.push(f) : this.yAxes_[h] = {
                        series: [ f ],
                        options: {}
                    };
                }
                var j = this.user_.axes || {};
                Dygraph.update(this.yAxes_[0].options, j.y || {}), this.yAxes_.length > 1 && Dygraph.update(this.yAxes_[1].options, j.y2 || {}), 
                Dygraph.update(this.xAxis_.options, j.x || {});
            }
        }, a.prototype.get = function(a) {
            var b = this.getGlobalUser_(a);
            return null !== b ? b : this.getGlobalDefault_(a);
        }, a.prototype.getGlobalUser_ = function(a) {
            return this.user_.hasOwnProperty(a) ? this.user_[a] : null;
        }, a.prototype.getGlobalDefault_ = function(a) {
            return this.global_.hasOwnProperty(a) ? this.global_[a] : Dygraph.DEFAULT_ATTRS.hasOwnProperty(a) ? Dygraph.DEFAULT_ATTRS[a] : null;
        }, a.prototype.getForAxis = function(a, b) {
            var c, d;
            if ("number" == typeof b) c = b, d = 0 === c ? "y" : "y2"; else {
                if ("y1" == b && (b = "y"), "y" == b) c = 0; else if ("y2" == b) c = 1; else {
                    if ("x" != b) throw "Unknown axis " + b;
                    c = -1;
                }
                d = b;
            }
            var e = -1 == c ? this.xAxis_ : this.yAxes_[c];
            if (e) {
                var f = e.options;
                if (f.hasOwnProperty(a)) return f[a];
            }
            if ("x" !== b || "logscale" !== a) {
                var g = this.getGlobalUser_(a);
                if (null !== g) return g;
            }
            var h = Dygraph.DEFAULT_ATTRS.axes[d];
            return h.hasOwnProperty(a) ? h[a] : this.getGlobalDefault_(a);
        }, a.prototype.getForSeries = function(a, b) {
            if (b === this.dygraph_.getHighlightSeries() && this.highlightSeries_.hasOwnProperty(a)) return this.highlightSeries_[a];
            if (!this.series_.hasOwnProperty(b)) throw "Unknown series: " + b;
            var c = this.series_[b], d = c.options;
            return d.hasOwnProperty(a) ? d[a] : this.getForAxis(a, c.yAxis);
        }, a.prototype.numAxes = function() {
            return this.yAxes_.length;
        }, a.prototype.axisForSeries = function(a) {
            return this.series_[a].yAxis;
        }, a.prototype.axisOptions = function(a) {
            return this.yAxes_[a].options;
        }, a.prototype.seriesForAxis = function(a) {
            return this.yAxes_[a].series;
        }, a.prototype.seriesNames = function() {
            return this.labels_;
        }, a;
    }();
}(), DygraphLayout = function() {
    "use strict";
    var a = function(a) {
        this.dygraph_ = a, this.points = [], this.setNames = [], this.annotations = [], 
        this.yAxes_ = null, this.xTicks_ = null, this.yTicks_ = null;
    };
    return a.prototype.addDataset = function(a, b) {
        this.points.push(b), this.setNames.push(a);
    }, a.prototype.getPlotArea = function() {
        return this.area_;
    }, a.prototype.computePlotArea = function() {
        var a = {
            x: 0,
            y: 0
        };
        a.w = this.dygraph_.width_ - a.x - this.dygraph_.getOption("rightGap"), a.h = this.dygraph_.height_;
        var b = {
            chart_div: this.dygraph_.graphDiv,
            reserveSpaceLeft: function(b) {
                var c = {
                    x: a.x,
                    y: a.y,
                    w: b,
                    h: a.h
                };
                return a.x += b, a.w -= b, c;
            },
            reserveSpaceRight: function(b) {
                var c = {
                    x: a.x + a.w - b,
                    y: a.y,
                    w: b,
                    h: a.h
                };
                return a.w -= b, c;
            },
            reserveSpaceTop: function(b) {
                var c = {
                    x: a.x,
                    y: a.y,
                    w: a.w,
                    h: b
                };
                return a.y += b, a.h -= b, c;
            },
            reserveSpaceBottom: function(b) {
                var c = {
                    x: a.x,
                    y: a.y + a.h - b,
                    w: a.w,
                    h: b
                };
                return a.h -= b, c;
            },
            chartRect: function() {
                return {
                    x: a.x,
                    y: a.y,
                    w: a.w,
                    h: a.h
                };
            }
        };
        this.dygraph_.cascadeEvents_("layout", b), this.area_ = a;
    }, a.prototype.setAnnotations = function(a) {
        this.annotations = [];
        for (var b = this.dygraph_.getOption("xValueParser") || function(a) {
            return a;
        }, c = 0; c < a.length; c++) {
            var d = {};
            if (!a[c].xval && void 0 === a[c].x) return void console.error("Annotations must have an 'x' property");
            if (a[c].icon && (!a[c].hasOwnProperty("width") || !a[c].hasOwnProperty("height"))) return void console.error("Must set width and height when setting annotation.icon property");
            Dygraph.update(d, a[c]), d.xval || (d.xval = b(d.x)), this.annotations.push(d);
        }
    }, a.prototype.setXTicks = function(a) {
        this.xTicks_ = a;
    }, a.prototype.setYAxes = function(a) {
        this.yAxes_ = a;
    }, a.prototype.evaluate = function() {
        this._xAxis = {}, this._evaluateLimits(), this._evaluateLineCharts(), this._evaluateLineTicks(), 
        this._evaluateAnnotations();
    }, a.prototype._evaluateLimits = function() {
        var a = this.dygraph_.xAxisRange();
        this._xAxis.minval = a[0], this._xAxis.maxval = a[1];
        var b = a[1] - a[0];
        this._xAxis.scale = 0 !== b ? 1 / b : 1, this.dygraph_.getOptionForAxis("logscale", "x") && (this._xAxis.xlogrange = Dygraph.log10(this._xAxis.maxval) - Dygraph.log10(this._xAxis.minval), 
        this._xAxis.xlogscale = 0 !== this._xAxis.xlogrange ? 1 / this._xAxis.xlogrange : 1);
        for (var c = 0; c < this.yAxes_.length; c++) {
            var d = this.yAxes_[c];
            d.minyval = d.computedValueRange[0], d.maxyval = d.computedValueRange[1], d.yrange = d.maxyval - d.minyval, 
            d.yscale = 0 !== d.yrange ? 1 / d.yrange : 1, this.dygraph_.getOption("logscale") && (d.ylogrange = Dygraph.log10(d.maxyval) - Dygraph.log10(d.minyval), 
            d.ylogscale = 0 !== d.ylogrange ? 1 / d.ylogrange : 1, (!isFinite(d.ylogrange) || isNaN(d.ylogrange)) && console.error("axis " + c + " of graph at " + d.g + " can't be displayed in log scale for range [" + d.minyval + " - " + d.maxyval + "]"));
        }
    }, a.calcXNormal_ = function(a, b, c) {
        return c ? (Dygraph.log10(a) - Dygraph.log10(b.minval)) * b.xlogscale : (a - b.minval) * b.scale;
    }, a.calcYNormal_ = function(a, b, c) {
        if (c) {
            var d = 1 - (Dygraph.log10(b) - Dygraph.log10(a.minyval)) * a.ylogscale;
            return isFinite(d) ? d : NaN;
        }
        return 1 - (b - a.minyval) * a.yscale;
    }, a.prototype._evaluateLineCharts = function() {
        for (var b = this.dygraph_.getOption("stackedGraph"), c = this.dygraph_.getOptionForAxis("logscale", "x"), d = 0; d < this.points.length; d++) {
            for (var e = this.points[d], f = this.setNames[d], g = this.dygraph_.getOption("connectSeparatedPoints", f), h = this.dygraph_.axisPropertiesForSeries(f), i = this.dygraph_.attributes_.getForSeries("logscale", f), j = 0; j < e.length; j++) {
                var k = e[j];
                k.x = a.calcXNormal_(k.xval, this._xAxis, c);
                var l = k.yval;
                b && (k.y_stacked = a.calcYNormal_(h, k.yval_stacked, i), null === l || isNaN(l) || (l = k.yval_stacked)), 
                null === l && (l = NaN, g || (k.yval = NaN)), k.y = a.calcYNormal_(h, l, i);
            }
            this.dygraph_.dataHandler_.onLineEvaluated(e, h, i);
        }
    }, a.prototype._evaluateLineTicks = function() {
        var a, b, c, d;
        for (this.xticks = [], a = 0; a < this.xTicks_.length; a++) b = this.xTicks_[a], 
        c = b.label, d = this.dygraph_.toPercentXCoord(b.v), d >= 0 && 1 > d && this.xticks.push([ d, c ]);
        for (this.yticks = [], a = 0; a < this.yAxes_.length; a++) for (var e = this.yAxes_[a], f = 0; f < e.ticks.length; f++) b = e.ticks[f], 
        c = b.label, d = this.dygraph_.toPercentYCoord(b.v, a), d > 0 && 1 >= d && this.yticks.push([ a, d, c ]);
    }, a.prototype._evaluateAnnotations = function() {
        var a, b = {};
        for (a = 0; a < this.annotations.length; a++) {
            var c = this.annotations[a];
            b[c.xval + "," + c.series] = c;
        }
        if (this.annotated_points = [], this.annotations && this.annotations.length) for (var d = 0; d < this.points.length; d++) {
            var e = this.points[d];
            for (a = 0; a < e.length; a++) {
                var f = e[a], g = f.xval + "," + f.name;
                g in b && (f.annotation = b[g], this.annotated_points.push(f));
            }
        }
    }, a.prototype.removeAllDatasets = function() {
        delete this.points, delete this.setNames, delete this.setPointsLengths, delete this.setPointsOffsets, 
        this.points = [], this.setNames = [], this.setPointsLengths = [], this.setPointsOffsets = [];
    }, a;
}(), DygraphCanvasRenderer = function() {
    "use strict";
    var a = function(a, b, c, d) {
        if (this.dygraph_ = a, this.layout = d, this.element = b, this.elementContext = c, 
        this.height = a.height_, this.width = a.width_, !this.isIE && !Dygraph.isCanvasSupported(this.element)) throw "Canvas is not supported.";
        if (this.area = d.getPlotArea(), this.dygraph_.isUsingExcanvas_) this._createIEClipArea(); else if (!Dygraph.isAndroid()) {
            var e = this.dygraph_.canvas_ctx_;
            e.beginPath(), e.rect(this.area.x, this.area.y, this.area.w, this.area.h), e.clip(), 
            e = this.dygraph_.hidden_ctx_, e.beginPath(), e.rect(this.area.x, this.area.y, this.area.w, this.area.h), 
            e.clip();
        }
    };
    return a.prototype.clear = function() {
        var a;
        if (this.isIE) try {
            this.clearDelay && (this.clearDelay.cancel(), this.clearDelay = null), a = this.elementContext;
        } catch (b) {
            return;
        }
        a = this.elementContext, a.clearRect(0, 0, this.width, this.height);
    }, a.prototype.render = function() {
        this._updatePoints(), this._renderLineChart();
    }, a.prototype._createIEClipArea = function() {
        function a(a) {
            if (0 !== a.w && 0 !== a.h) {
                var d = document.createElement("div");
                d.className = b, d.style.backgroundColor = e, d.style.position = "absolute", d.style.left = a.x + "px", 
                d.style.top = a.y + "px", d.style.width = a.w + "px", d.style.height = a.h + "px", 
                c.appendChild(d);
            }
        }
        for (var b = "dygraph-clip-div", c = this.dygraph_.graphDiv, d = c.childNodes.length - 1; d >= 0; d--) c.childNodes[d].className == b && c.removeChild(c.childNodes[d]);
        for (var e = document.bgColor, f = this.dygraph_.graphDiv; f != document; ) {
            var g = f.currentStyle.backgroundColor;
            if (g && "transparent" != g) {
                e = g;
                break;
            }
            f = f.parentNode;
        }
        var h = this.area;
        a({
            x: 0,
            y: 0,
            w: h.x,
            h: this.height
        }), a({
            x: h.x,
            y: 0,
            w: this.width - h.x,
            h: h.y
        }), a({
            x: h.x + h.w,
            y: 0,
            w: this.width - h.x - h.w,
            h: this.height
        }), a({
            x: h.x,
            y: h.y + h.h,
            w: this.width - h.x,
            h: this.height - h.h - h.y
        });
    }, a._getIteratorPredicate = function(b) {
        return b ? a._predicateThatSkipsEmptyPoints : null;
    }, a._predicateThatSkipsEmptyPoints = function(a, b) {
        return null !== a[b].yval;
    }, a._drawStyledLine = function(b, c, d, e, f, g, h) {
        var i = b.dygraph, j = i.getBooleanOption("stepPlot", b.setName);
        Dygraph.isArrayLike(e) || (e = null);
        var k = i.getBooleanOption("drawGapEdgePoints", b.setName), l = b.points, m = b.setName, n = Dygraph.createIterator(l, 0, l.length, a._getIteratorPredicate(i.getBooleanOption("connectSeparatedPoints", m))), o = e && e.length >= 2, p = b.drawingContext;
        p.save(), o && p.installPattern(e);
        var q = a._drawSeries(b, n, d, h, f, k, j, c);
        a._drawPointsOnLine(b, q, g, c, h), o && p.uninstallPattern(), p.restore();
    }, a._drawSeries = function(a, b, c, d, e, f, g, h) {
        var i, j, k = null, l = null, m = null, n = [], o = !0, p = a.drawingContext;
        p.beginPath(), p.strokeStyle = h, p.lineWidth = c;
        for (var q = b.array_, r = b.end_, s = b.predicate_, t = b.start_; r > t; t++) {
            if (j = q[t], s) {
                for (;r > t && !s(q, t); ) t++;
                if (t == r) break;
                j = q[t];
            }
            if (null === j.canvasy || j.canvasy != j.canvasy) g && null !== k && (p.moveTo(k, l), 
            p.lineTo(j.canvasx, l)), k = l = null; else {
                if (i = !1, f || !k) {
                    b.nextIdx_ = t, b.next(), m = b.hasNext ? b.peek.canvasy : null;
                    var u = null === m || m != m;
                    i = !k && u, f && (!o && !k || b.hasNext && u) && (i = !0);
                }
                null !== k ? c && (g && (p.moveTo(k, l), p.lineTo(j.canvasx, l)), p.lineTo(j.canvasx, j.canvasy)) : p.moveTo(j.canvasx, j.canvasy), 
                (e || i) && n.push([ j.canvasx, j.canvasy, j.idx ]), k = j.canvasx, l = j.canvasy;
            }
            o = !1;
        }
        return p.stroke(), n;
    }, a._drawPointsOnLine = function(a, b, c, d, e) {
        for (var f = a.drawingContext, g = 0; g < b.length; g++) {
            var h = b[g];
            f.save(), c.call(a.dygraph, a.dygraph, a.setName, f, h[0], h[1], d, e, h[2]), f.restore();
        }
    }, a.prototype._updatePoints = function() {
        for (var a = this.layout.points, b = a.length; b--; ) for (var c = a[b], d = c.length; d--; ) {
            var e = c[d];
            e.canvasx = this.area.w * e.x + this.area.x, e.canvasy = this.area.h * e.y + this.area.y;
        }
    }, a.prototype._renderLineChart = function(a, b) {
        var c, d, e = b || this.elementContext, f = this.layout.points, g = this.layout.setNames;
        this.colors = this.dygraph_.colorsMap_;
        var h = this.dygraph_.getOption("plotter"), i = h;
        Dygraph.isArrayLike(i) || (i = [ i ]);
        var j = {};
        for (c = 0; c < g.length; c++) {
            d = g[c];
            var k = this.dygraph_.getOption("plotter", d);
            k != h && (j[d] = k);
        }
        for (c = 0; c < i.length; c++) for (var l = i[c], m = c == i.length - 1, n = 0; n < f.length; n++) if (d = g[n], 
        !a || d == a) {
            var o = f[n], p = l;
            if (d in j) {
                if (!m) continue;
                p = j[d];
            }
            var q = this.colors[d], r = this.dygraph_.getOption("strokeWidth", d);
            e.save(), e.strokeStyle = q, e.lineWidth = r, p({
                points: o,
                setName: d,
                drawingContext: e,
                color: q,
                strokeWidth: r,
                dygraph: this.dygraph_,
                axis: this.dygraph_.axisPropertiesForSeries(d),
                plotArea: this.area,
                seriesIndex: n,
                seriesCount: f.length,
                singleSeriesName: a,
                allSeriesPoints: f
            }), e.restore();
        }
    }, a._Plotters = {
        linePlotter: function(b) {
            a._linePlotter(b);
        },
        fillPlotter: function(b) {
            a._fillPlotter(b);
        },
        errorPlotter: function(b) {
            a._errorPlotter(b);
        }
    }, a._linePlotter = function(b) {
        var c = b.dygraph, d = b.setName, e = b.strokeWidth, f = c.getNumericOption("strokeBorderWidth", d), g = c.getOption("drawPointCallback", d) || Dygraph.Circles.DEFAULT, h = c.getOption("strokePattern", d), i = c.getBooleanOption("drawPoints", d), j = c.getNumericOption("pointSize", d);
        f && e && a._drawStyledLine(b, c.getOption("strokeBorderColor", d), e + 2 * f, h, i, g, j), 
        a._drawStyledLine(b, b.color, e, h, i, g, j);
    }, a._errorPlotter = function(b) {
        var c = b.dygraph, d = b.setName, e = c.getBooleanOption("errorBars") || c.getBooleanOption("customBars");
        if (e) {
            var f = c.getBooleanOption("fillGraph", d);
            f && console.warn("Can't use fillGraph option with error bars");
            var g, h = b.drawingContext, i = b.color, j = c.getNumericOption("fillAlpha", d), k = c.getBooleanOption("stepPlot", d), l = b.points, m = Dygraph.createIterator(l, 0, l.length, a._getIteratorPredicate(c.getBooleanOption("connectSeparatedPoints", d))), n = NaN, o = NaN, p = [ -1, -1 ], q = Dygraph.toRGB_(i), r = "rgba(" + q.r + "," + q.g + "," + q.b + "," + j + ")";
            h.fillStyle = r, h.beginPath();
            for (var s = function(a) {
                return null === a || void 0 === a || isNaN(a);
            }; m.hasNext; ) {
                var t = m.next();
                !k && s(t.y) || k && !isNaN(o) && s(o) ? n = NaN : (g = [ t.y_bottom, t.y_top ], 
                k && (o = t.y), isNaN(g[0]) && (g[0] = t.y), isNaN(g[1]) && (g[1] = t.y), g[0] = b.plotArea.h * g[0] + b.plotArea.y, 
                g[1] = b.plotArea.h * g[1] + b.plotArea.y, isNaN(n) || (k ? (h.moveTo(n, p[0]), 
                h.lineTo(t.canvasx, p[0]), h.lineTo(t.canvasx, p[1])) : (h.moveTo(n, p[0]), h.lineTo(t.canvasx, g[0]), 
                h.lineTo(t.canvasx, g[1])), h.lineTo(n, p[1]), h.closePath()), p = g, n = t.canvasx);
            }
            h.fill();
        }
    }, a._fastCanvasProxy = function(a) {
        var b = [], c = null, d = null, e = 1, f = 2, g = 0, h = function(a) {
            if (!(b.length <= 1)) {
                for (var c = b.length - 1; c > 0; c--) {
                    var d = b[c];
                    if (d[0] == f) {
                        var g = b[c - 1];
                        g[1] == d[1] && g[2] == d[2] && b.splice(c, 1);
                    }
                }
                for (var c = 0; c < b.length - 1; ) {
                    var d = b[c];
                    d[0] == f && b[c + 1][0] == f ? b.splice(c, 1) : c++;
                }
                if (b.length > 2 && !a) {
                    var h = 0;
                    b[0][0] == f && h++;
                    for (var i = null, j = null, c = h; c < b.length; c++) {
                        var d = b[c];
                        if (d[0] == e) if (null === i && null === j) i = c, j = c; else {
                            var k = d[2];
                            k < b[i][2] ? i = c : k > b[j][2] && (j = c);
                        }
                    }
                    var l = b[i], m = b[j];
                    b.splice(h, b.length - h), j > i ? (b.push(l), b.push(m)) : i > j ? (b.push(m), 
                    b.push(l)) : b.push(l);
                }
            }
        }, i = function(c) {
            h(c);
            for (var i = 0, j = b.length; j > i; i++) {
                var k = b[i];
                k[0] == e ? a.lineTo(k[1], k[2]) : k[0] == f && a.moveTo(k[1], k[2]);
            }
            b.length && (d = b[b.length - 1][1]), g += b.length, b = [];
        }, j = function(a, e, f) {
            var g = Math.round(e);
            if (null === c || g != c) {
                var h = c - d > 1, j = g - c > 1, k = h || j;
                i(k), c = g;
            }
            b.push([ a, e, f ]);
        };
        return {
            moveTo: function(a, b) {
                j(f, a, b);
            },
            lineTo: function(a, b) {
                j(e, a, b);
            },
            stroke: function() {
                i(!0), a.stroke();
            },
            fill: function() {
                i(!0), a.fill();
            },
            beginPath: function() {
                i(!0), a.beginPath();
            },
            closePath: function() {
                i(!0), a.closePath();
            },
            _count: function() {
                return g;
            }
        };
    }, a._fillPlotter = function(b) {
        if (!b.singleSeriesName && 0 === b.seriesIndex) {
            for (var c = b.dygraph, d = c.getLabels().slice(1), e = d.length; e >= 0; e--) c.visibility()[e] || d.splice(e, 1);
            var f = function() {
                for (var a = 0; a < d.length; a++) if (c.getBooleanOption("fillGraph", d[a])) return !0;
                return !1;
            }();
            if (f) for (var g, h, i = b.plotArea, j = b.allSeriesPoints, k = j.length, l = c.getNumericOption("fillAlpha"), m = c.getBooleanOption("stackedGraph"), n = c.getColors(), o = {}, p = function(a, b, c, d) {
                if (a.lineTo(b, c), m) for (var e = d.length - 1; e >= 0; e--) {
                    var f = d[e];
                    a.lineTo(f[0], f[1]);
                }
            }, q = k - 1; q >= 0; q--) {
                var r = b.drawingContext, s = d[q];
                if (c.getBooleanOption("fillGraph", s)) {
                    var t = c.getBooleanOption("stepPlot", s), u = n[q], v = c.axisPropertiesForSeries(s), w = 1 + v.minyval * v.yscale;
                    0 > w ? w = 0 : w > 1 && (w = 1), w = i.h * w + i.y;
                    var x, y = j[q], z = Dygraph.createIterator(y, 0, y.length, a._getIteratorPredicate(c.getBooleanOption("connectSeparatedPoints", s))), A = NaN, B = [ -1, -1 ], C = Dygraph.toRGB_(u), D = "rgba(" + C.r + "," + C.g + "," + C.b + "," + l + ")";
                    r.fillStyle = D, r.beginPath();
                    var E, F = !0;
                    (y.length > 2 * c.width_ || Dygraph.FORCE_FAST_PROXY) && (r = a._fastCanvasProxy(r));
                    for (var G, H = []; z.hasNext; ) if (G = z.next(), Dygraph.isOK(G.y) || t) {
                        if (m) {
                            if (!F && E == G.xval) continue;
                            F = !1, E = G.xval, g = o[G.canvasx];
                            var I;
                            I = void 0 === g ? w : h ? g[0] : g, x = [ G.canvasy, I ], t ? -1 === B[0] ? o[G.canvasx] = [ G.canvasy, w ] : o[G.canvasx] = [ G.canvasy, B[0] ] : o[G.canvasx] = G.canvasy;
                        } else x = isNaN(G.canvasy) && t ? [ i.y + i.h, w ] : [ G.canvasy, w ];
                        isNaN(A) ? (r.moveTo(G.canvasx, x[1]), r.lineTo(G.canvasx, x[0])) : (t ? (r.lineTo(G.canvasx, B[0]), 
                        r.lineTo(G.canvasx, x[0])) : r.lineTo(G.canvasx, x[0]), m && (H.push([ A, B[1] ]), 
                        H.push(h && g ? [ G.canvasx, g[1] ] : [ G.canvasx, x[1] ]))), B = x, A = G.canvasx;
                    } else p(r, A, B[1], H), H = [], A = NaN, null === G.y_stacked || isNaN(G.y_stacked) || (o[G.canvasx] = i.h * G.y_stacked + i.y);
                    h = t, x && G && (p(r, G.canvasx, x[1], H), H = []), r.fill();
                }
            }
        }
    }, a;
}(), Dygraph = function() {
    "use strict";
    var a = function(a, b, c, d) {
        this.is_initial_draw_ = !0, this.readyFns_ = [], void 0 !== d ? (console.warn("Using deprecated four-argument dygraph constructor"), 
        this.__old_init__(a, b, c, d)) : this.__init__(a, b, c);
    };
    return a.NAME = "Dygraph", a.VERSION = "1.1.1", a.__repr__ = function() {
        return "[" + a.NAME + " " + a.VERSION + "]";
    }, a.toString = function() {
        return a.__repr__();
    }, a.DEFAULT_ROLL_PERIOD = 1, a.DEFAULT_WIDTH = 480, a.DEFAULT_HEIGHT = 320, a.ANIMATION_STEPS = 12, 
    a.ANIMATION_DURATION = 200, a.KMB_LABELS = [ "K", "M", "B", "T", "Q" ], a.KMG2_BIG_LABELS = [ "k", "M", "G", "T", "P", "E", "Z", "Y" ], 
    a.KMG2_SMALL_LABELS = [ "m", "u", "n", "p", "f", "a", "z", "y" ], a.numberValueFormatter = function(b, c) {
        var d = c("sigFigs");
        if (null !== d) return a.floatFormat(b, d);
        var e, f = c("digitsAfterDecimal"), g = c("maxNumberWidth"), h = c("labelsKMB"), i = c("labelsKMG2");
        if (e = 0 !== b && (Math.abs(b) >= Math.pow(10, g) || Math.abs(b) < Math.pow(10, -f)) ? b.toExponential(f) : "" + a.round_(b, f), 
        h || i) {
            var j, k = [], l = [];
            h && (j = 1e3, k = a.KMB_LABELS), i && (h && console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"), 
            j = 1024, k = a.KMG2_BIG_LABELS, l = a.KMG2_SMALL_LABELS);
            for (var m = Math.abs(b), n = a.pow(j, k.length), o = k.length - 1; o >= 0; o--, 
            n /= j) if (m >= n) {
                e = a.round_(b / n, f) + k[o];
                break;
            }
            if (i) {
                var p = String(b.toExponential()).split("e-");
                2 === p.length && p[1] >= 3 && p[1] <= 24 && (e = p[1] % 3 > 0 ? a.round_(p[0] / a.pow(10, p[1] % 3), f) : Number(p[0]).toFixed(2), 
                e += l[Math.floor(p[1] / 3) - 1]);
            }
        }
        return e;
    }, a.numberAxisLabelFormatter = function(b, c, d) {
        return a.numberValueFormatter.call(this, b, d);
    }, a.SHORT_MONTH_NAMES_ = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ], 
    a.dateAxisLabelFormatter = function(b, c, d) {
        var e = d("labelsUTC"), f = e ? a.DateAccessorsUTC : a.DateAccessorsLocal, g = f.getFullYear(b), h = f.getMonth(b), i = f.getDate(b), j = f.getHours(b), k = f.getMinutes(b), l = f.getSeconds(b), m = f.getSeconds(b);
        if (c >= a.DECADAL) return "" + g;
        if (c >= a.MONTHLY) return a.SHORT_MONTH_NAMES_[h] + "&#160;" + g;
        var n = 3600 * j + 60 * k + l + .001 * m;
        return 0 === n || c >= a.DAILY ? a.zeropad(i) + "&#160;" + a.SHORT_MONTH_NAMES_[h] : a.hmsString_(j, k, l);
    }, a.dateAxisFormatter = a.dateAxisLabelFormatter, a.dateValueFormatter = function(b, c) {
        return a.dateString_(b, c("labelsUTC"));
    }, a.Plotters = DygraphCanvasRenderer._Plotters, a.DEFAULT_ATTRS = {
        highlightCircleSize: 3,
        highlightSeriesOpts: null,
        highlightSeriesBackgroundAlpha: .5,
        labelsDivWidth: 250,
        labelsDivStyles: {},
        labelsSeparateLines: !1,
        labelsShowZeroValues: !0,
        labelsKMB: !1,
        labelsKMG2: !1,
        showLabelsOnHighlight: !0,
        digitsAfterDecimal: 2,
        maxNumberWidth: 6,
        sigFigs: null,
        strokeWidth: 1,
        strokeBorderWidth: 0,
        strokeBorderColor: "white",
        axisTickSize: 3,
        axisLabelFontSize: 14,
        rightGap: 5,
        showRoller: !1,
        xValueParser: a.dateParser,
        delimiter: ",",
        sigma: 2,
        errorBars: !1,
        fractions: !1,
        wilsonInterval: !0,
        customBars: !1,
        fillGraph: !1,
        fillAlpha: .15,
        connectSeparatedPoints: !1,
        stackedGraph: !1,
        stackedGraphNaNFill: "all",
        hideOverlayOnMouseOut: !0,
        legend: "onmouseover",
        stepPlot: !1,
        avoidMinZero: !1,
        xRangePad: 0,
        yRangePad: null,
        drawAxesAtZero: !1,
        titleHeight: 28,
        xLabelHeight: 18,
        yLabelWidth: 18,
        drawXAxis: !0,
        drawYAxis: !0,
        axisLineColor: "black",
        axisLineWidth: .3,
        gridLineWidth: .3,
        axisLabelColor: "black",
        axisLabelWidth: 50,
        drawYGrid: !0,
        drawXGrid: !0,
        gridLineColor: "rgb(128,128,128)",
        interactionModel: null,
        animatedZooms: !1,
        showRangeSelector: !1,
        rangeSelectorHeight: 40,
        rangeSelectorPlotStrokeColor: "#808FAB",
        rangeSelectorPlotFillColor: "#A7B1C4",
        showInRangeSelector: null,
        plotter: [ a.Plotters.fillPlotter, a.Plotters.errorPlotter, a.Plotters.linePlotter ],
        plugins: [],
        axes: {
            x: {
                pixelsPerLabel: 70,
                axisLabelWidth: 60,
                axisLabelFormatter: a.dateAxisLabelFormatter,
                valueFormatter: a.dateValueFormatter,
                drawGrid: !0,
                drawAxis: !0,
                independentTicks: !0,
                ticker: null
            },
            y: {
                axisLabelWidth: 50,
                pixelsPerLabel: 30,
                valueFormatter: a.numberValueFormatter,
                axisLabelFormatter: a.numberAxisLabelFormatter,
                drawGrid: !0,
                drawAxis: !0,
                independentTicks: !0,
                ticker: null
            },
            y2: {
                axisLabelWidth: 50,
                pixelsPerLabel: 30,
                valueFormatter: a.numberValueFormatter,
                axisLabelFormatter: a.numberAxisLabelFormatter,
                drawAxis: !0,
                drawGrid: !1,
                independentTicks: !1,
                ticker: null
            }
        }
    }, a.HORIZONTAL = 1, a.VERTICAL = 2, a.PLUGINS = [], a.addedAnnotationCSS = !1, 
    a.prototype.__old_init__ = function(b, c, d, e) {
        if (null !== d) {
            for (var f = [ "Date" ], g = 0; g < d.length; g++) f.push(d[g]);
            a.update(e, {
                labels: f
            });
        }
        this.__init__(b, c, e);
    }, a.prototype.__init__ = function(b, c, d) {
        if (/MSIE/.test(navigator.userAgent) && !window.opera && "undefined" != typeof G_vmlCanvasManager && "complete" != document.readyState) {
            var e = this;
            return void setTimeout(function() {
                e.__init__(b, c, d);
            }, 100);
        }
        if ((null === d || void 0 === d) && (d = {}), d = a.mapLegacyOptions_(d), "string" == typeof b && (b = document.getElementById(b)), 
        !b) return void console.error("Constructing dygraph with a non-existent div!");
        this.isUsingExcanvas_ = "undefined" != typeof G_vmlCanvasManager, this.maindiv_ = b, 
        this.file_ = c, this.rollPeriod_ = d.rollPeriod || a.DEFAULT_ROLL_PERIOD, this.previousVerticalX_ = -1, 
        this.fractions_ = d.fractions || !1, this.dateWindow_ = d.dateWindow || null, this.annotations_ = [], 
        this.zoomed_x_ = !1, this.zoomed_y_ = !1, b.innerHTML = "", "" === b.style.width && d.width && (b.style.width = d.width + "px"), 
        "" === b.style.height && d.height && (b.style.height = d.height + "px"), "" === b.style.height && 0 === b.clientHeight && (b.style.height = a.DEFAULT_HEIGHT + "px", 
        "" === b.style.width && (b.style.width = a.DEFAULT_WIDTH + "px")), this.width_ = b.clientWidth || d.width || 0, 
        this.height_ = b.clientHeight || d.height || 0, d.stackedGraph && (d.fillGraph = !0), 
        this.user_attrs_ = {}, a.update(this.user_attrs_, d), this.attrs_ = {}, a.updateDeep(this.attrs_, a.DEFAULT_ATTRS), 
        this.boundaryIds_ = [], this.setIndexByName_ = {}, this.datasetIndex_ = [], this.registeredEvents_ = [], 
        this.eventListeners_ = {}, this.attributes_ = new DygraphOptions(this), this.createInterface_(), 
        this.plugins_ = [];
        for (var f = a.PLUGINS.concat(this.getOption("plugins")), g = 0; g < f.length; g++) {
            var h, i = f[g];
            h = "undefined" != typeof i.activate ? i : new i();
            var j = {
                plugin: h,
                events: {},
                options: {},
                pluginOptions: {}
            }, k = h.activate(this);
            for (var l in k) k.hasOwnProperty(l) && (j.events[l] = k[l]);
            this.plugins_.push(j);
        }
        for (var g = 0; g < this.plugins_.length; g++) {
            var m = this.plugins_[g];
            for (var l in m.events) if (m.events.hasOwnProperty(l)) {
                var n = m.events[l], o = [ m.plugin, n ];
                l in this.eventListeners_ ? this.eventListeners_[l].push(o) : this.eventListeners_[l] = [ o ];
            }
        }
        this.createDragInterface_(), this.start_();
    }, a.prototype.cascadeEvents_ = function(b, c) {
        if (!(b in this.eventListeners_)) return !1;
        var d = {
            dygraph: this,
            cancelable: !1,
            defaultPrevented: !1,
            preventDefault: function() {
                if (!d.cancelable) throw "Cannot call preventDefault on non-cancelable event.";
                d.defaultPrevented = !0;
            },
            propagationStopped: !1,
            stopPropagation: function() {
                d.propagationStopped = !0;
            }
        };
        a.update(d, c);
        var e = this.eventListeners_[b];
        if (e) for (var f = e.length - 1; f >= 0; f--) {
            var g = e[f][0], h = e[f][1];
            if (h.call(g, d), d.propagationStopped) break;
        }
        return d.defaultPrevented;
    }, a.prototype.getPluginInstance_ = function(a) {
        for (var b = 0; b < this.plugins_.length; b++) {
            var c = this.plugins_[b];
            if (c.plugin instanceof a) return c.plugin;
        }
        return null;
    }, a.prototype.isZoomed = function(a) {
        if (null === a || void 0 === a) return this.zoomed_x_ || this.zoomed_y_;
        if ("x" === a) return this.zoomed_x_;
        if ("y" === a) return this.zoomed_y_;
        throw "axis parameter is [" + a + "] must be null, 'x' or 'y'.";
    }, a.prototype.toString = function() {
        var a = this.maindiv_, b = a && a.id ? a.id : a;
        return "[Dygraph " + b + "]";
    }, a.prototype.attr_ = function(a, b) {
        return b ? this.attributes_.getForSeries(a, b) : this.attributes_.get(a);
    }, a.prototype.getOption = function(a, b) {
        return this.attr_(a, b);
    }, a.prototype.getNumericOption = function(a, b) {
        return this.getOption(a, b);
    }, a.prototype.getStringOption = function(a, b) {
        return this.getOption(a, b);
    }, a.prototype.getBooleanOption = function(a, b) {
        return this.getOption(a, b);
    }, a.prototype.getFunctionOption = function(a, b) {
        return this.getOption(a, b);
    }, a.prototype.getOptionForAxis = function(a, b) {
        return this.attributes_.getForAxis(a, b);
    }, a.prototype.optionsViewForAxis_ = function(a) {
        var b = this;
        return function(c) {
            var d = b.user_attrs_.axes;
            return d && d[a] && d[a].hasOwnProperty(c) ? d[a][c] : "x" === a && "logscale" === c ? !1 : "undefined" != typeof b.user_attrs_[c] ? b.user_attrs_[c] : (d = b.attrs_.axes, 
            d && d[a] && d[a].hasOwnProperty(c) ? d[a][c] : "y" == a && b.axes_[0].hasOwnProperty(c) ? b.axes_[0][c] : "y2" == a && b.axes_[1].hasOwnProperty(c) ? b.axes_[1][c] : b.attr_(c));
        };
    }, a.prototype.rollPeriod = function() {
        return this.rollPeriod_;
    }, a.prototype.xAxisRange = function() {
        return this.dateWindow_ ? this.dateWindow_ : this.xAxisExtremes();
    }, a.prototype.xAxisExtremes = function() {
        var a = this.getNumericOption("xRangePad") / this.plotter_.area.w;
        if (0 === this.numRows()) return [ 0 - a, 1 + a ];
        var b = this.rawData_[0][0], c = this.rawData_[this.rawData_.length - 1][0];
        if (a) {
            var d = c - b;
            b -= d * a, c += d * a;
        }
        return [ b, c ];
    }, a.prototype.yAxisRange = function(a) {
        if ("undefined" == typeof a && (a = 0), 0 > a || a >= this.axes_.length) return null;
        var b = this.axes_[a];
        return [ b.computedValueRange[0], b.computedValueRange[1] ];
    }, a.prototype.yAxisRanges = function() {
        for (var a = [], b = 0; b < this.axes_.length; b++) a.push(this.yAxisRange(b));
        return a;
    }, a.prototype.toDomCoords = function(a, b, c) {
        return [ this.toDomXCoord(a), this.toDomYCoord(b, c) ];
    }, a.prototype.toDomXCoord = function(a) {
        if (null === a) return null;
        var b = this.plotter_.area, c = this.xAxisRange();
        return b.x + (a - c[0]) / (c[1] - c[0]) * b.w;
    }, a.prototype.toDomYCoord = function(a, b) {
        var c = this.toPercentYCoord(a, b);
        if (null === c) return null;
        var d = this.plotter_.area;
        return d.y + c * d.h;
    }, a.prototype.toDataCoords = function(a, b, c) {
        return [ this.toDataXCoord(a), this.toDataYCoord(b, c) ];
    }, a.prototype.toDataXCoord = function(b) {
        if (null === b) return null;
        var c = this.plotter_.area, d = this.xAxisRange();
        if (this.attributes_.getForAxis("logscale", "x")) {
            var e = (b - c.x) / c.w, f = a.log10(d[0]), g = a.log10(d[1]), h = f + e * (g - f), i = Math.pow(a.LOG_SCALE, h);
            return i;
        }
        return d[0] + (b - c.x) / c.w * (d[1] - d[0]);
    }, a.prototype.toDataYCoord = function(b, c) {
        if (null === b) return null;
        var d = this.plotter_.area, e = this.yAxisRange(c);
        if ("undefined" == typeof c && (c = 0), this.attributes_.getForAxis("logscale", c)) {
            var f = (b - d.y) / d.h, g = a.log10(e[0]), h = a.log10(e[1]), i = h - f * (h - g), j = Math.pow(a.LOG_SCALE, i);
            return j;
        }
        return e[0] + (d.y + d.h - b) / d.h * (e[1] - e[0]);
    }, a.prototype.toPercentYCoord = function(b, c) {
        if (null === b) return null;
        "undefined" == typeof c && (c = 0);
        var d, e = this.yAxisRange(c), f = this.attributes_.getForAxis("logscale", c);
        if (f) {
            var g = a.log10(e[0]), h = a.log10(e[1]);
            d = (h - a.log10(b)) / (h - g);
        } else d = (e[1] - b) / (e[1] - e[0]);
        return d;
    }, a.prototype.toPercentXCoord = function(b) {
        if (null === b) return null;
        var c, d = this.xAxisRange(), e = this.attributes_.getForAxis("logscale", "x");
        if (e === !0) {
            var f = a.log10(d[0]), g = a.log10(d[1]);
            c = (a.log10(b) - f) / (g - f);
        } else c = (b - d[0]) / (d[1] - d[0]);
        return c;
    }, a.prototype.numColumns = function() {
        return this.rawData_ ? this.rawData_[0] ? this.rawData_[0].length : this.attr_("labels").length : 0;
    }, a.prototype.numRows = function() {
        return this.rawData_ ? this.rawData_.length : 0;
    }, a.prototype.getValue = function(a, b) {
        return 0 > a || a > this.rawData_.length ? null : 0 > b || b > this.rawData_[a].length ? null : this.rawData_[a][b];
    }, a.prototype.createInterface_ = function() {
        var b = this.maindiv_;
        this.graphDiv = document.createElement("div"), this.graphDiv.style.textAlign = "left", 
        this.graphDiv.style.position = "relative", b.appendChild(this.graphDiv), this.canvas_ = a.createCanvas(), 
        this.canvas_.style.position = "absolute", this.hidden_ = this.createPlotKitCanvas_(this.canvas_), 
        this.canvas_ctx_ = a.getContext(this.canvas_), this.hidden_ctx_ = a.getContext(this.hidden_), 
        this.resizeElements_(), this.graphDiv.appendChild(this.hidden_), this.graphDiv.appendChild(this.canvas_), 
        this.mouseEventElement_ = this.createMouseEventElement_(), this.layout_ = new DygraphLayout(this);
        var c = this;
        this.mouseMoveHandler_ = function(a) {
            c.mouseMove_(a);
        }, this.mouseOutHandler_ = function(b) {
            var d = b.target || b.fromElement, e = b.relatedTarget || b.toElement;
            a.isNodeContainedBy(d, c.graphDiv) && !a.isNodeContainedBy(e, c.graphDiv) && c.mouseOut_(b);
        }, this.addAndTrackEvent(window, "mouseout", this.mouseOutHandler_), this.addAndTrackEvent(this.mouseEventElement_, "mousemove", this.mouseMoveHandler_), 
        this.resizeHandler_ || (this.resizeHandler_ = function(a) {
            c.resize();
        }, this.addAndTrackEvent(window, "resize", this.resizeHandler_));
    }, a.prototype.resizeElements_ = function() {
        this.graphDiv.style.width = this.width_ + "px", this.graphDiv.style.height = this.height_ + "px";
        var b = a.getContextPixelRatio(this.canvas_ctx_);
        this.canvas_.width = this.width_ * b, this.canvas_.height = this.height_ * b, this.canvas_.style.width = this.width_ + "px", 
        this.canvas_.style.height = this.height_ + "px", 1 !== b && this.canvas_ctx_.scale(b, b);
        var c = a.getContextPixelRatio(this.hidden_ctx_);
        this.hidden_.width = this.width_ * c, this.hidden_.height = this.height_ * c, this.hidden_.style.width = this.width_ + "px", 
        this.hidden_.style.height = this.height_ + "px", 1 !== c && this.hidden_ctx_.scale(c, c);
    }, a.prototype.destroy = function() {
        this.canvas_ctx_.restore(), this.hidden_ctx_.restore();
        for (var b = this.plugins_.length - 1; b >= 0; b--) {
            var c = this.plugins_.pop();
            c.plugin.destroy && c.plugin.destroy();
        }
        var d = function(a) {
            for (;a.hasChildNodes(); ) d(a.firstChild), a.removeChild(a.firstChild);
        };
        this.removeTrackedEvents_(), a.removeEvent(window, "mouseout", this.mouseOutHandler_), 
        a.removeEvent(this.mouseEventElement_, "mousemove", this.mouseMoveHandler_), a.removeEvent(window, "resize", this.resizeHandler_), 
        this.resizeHandler_ = null, d(this.maindiv_);
        var e = function(a) {
            for (var b in a) "object" == typeof a[b] && (a[b] = null);
        };
        e(this.layout_), e(this.plotter_), e(this);
    }, a.prototype.createPlotKitCanvas_ = function(b) {
        var c = a.createCanvas();
        return c.style.position = "absolute", c.style.top = b.style.top, c.style.left = b.style.left, 
        c.width = this.width_, c.height = this.height_, c.style.width = this.width_ + "px", 
        c.style.height = this.height_ + "px", c;
    }, a.prototype.createMouseEventElement_ = function() {
        if (this.isUsingExcanvas_) {
            var a = document.createElement("div");
            return a.style.position = "absolute", a.style.backgroundColor = "white", a.style.filter = "alpha(opacity=0)", 
            a.style.width = this.width_ + "px", a.style.height = this.height_ + "px", this.graphDiv.appendChild(a), 
            a;
        }
        return this.canvas_;
    }, a.prototype.setColors_ = function() {
        var b = this.getLabels(), c = b.length - 1;
        this.colors_ = [], this.colorsMap_ = {};
        for (var d = this.getNumericOption("colorSaturation") || 1, e = this.getNumericOption("colorValue") || .5, f = Math.ceil(c / 2), g = this.getOption("colors"), h = this.visibility(), i = 0; c > i; i++) if (h[i]) {
            var j = b[i + 1], k = this.attributes_.getForSeries("color", j);
            if (!k) if (g) k = g[i % g.length]; else {
                var l = i % 2 ? f + (i + 1) / 2 : Math.ceil((i + 1) / 2), m = 1 * l / (1 + c);
                k = a.hsvToRGB(m, d, e);
            }
            this.colors_.push(k), this.colorsMap_[j] = k;
        }
    }, a.prototype.getColors = function() {
        return this.colors_;
    }, a.prototype.getPropertiesForSeries = function(a) {
        for (var b = -1, c = this.getLabels(), d = 1; d < c.length; d++) if (c[d] == a) {
            b = d;
            break;
        }
        return -1 == b ? null : {
            name: a,
            column: b,
            visible: this.visibility()[b - 1],
            color: this.colorsMap_[a],
            axis: 1 + this.attributes_.axisForSeries(a)
        };
    }, a.prototype.createRollInterface_ = function() {
        this.roller_ || (this.roller_ = document.createElement("input"), this.roller_.type = "text", 
        this.roller_.style.display = "none", this.graphDiv.appendChild(this.roller_));
        var a = this.getBooleanOption("showRoller") ? "block" : "none", b = this.plotter_.area, c = {
            position: "absolute",
            zIndex: 10,
            top: b.y + b.h - 25 + "px",
            left: b.x + 1 + "px",
            display: a
        };
        this.roller_.size = "2", this.roller_.value = this.rollPeriod_;
        for (var d in c) c.hasOwnProperty(d) && (this.roller_.style[d] = c[d]);
        var e = this;
        this.roller_.onchange = function() {
            e.adjustRoll(e.roller_.value);
        };
    }, a.prototype.createDragInterface_ = function() {
        var b = {
            isZooming: !1,
            isPanning: !1,
            is2DPan: !1,
            dragStartX: null,
            dragStartY: null,
            dragEndX: null,
            dragEndY: null,
            dragDirection: null,
            prevEndX: null,
            prevEndY: null,
            prevDragDirection: null,
            cancelNextDblclick: !1,
            initialLeftmostDate: null,
            xUnitsPerPixel: null,
            dateRange: null,
            px: 0,
            py: 0,
            boundedDates: null,
            boundedValues: null,
            tarp: new a.IFrameTarp(),
            initializeMouseDown: function(b, c, d) {
                b.preventDefault ? b.preventDefault() : (b.returnValue = !1, b.cancelBubble = !0);
                var e = a.findPos(c.canvas_);
                d.px = e.x, d.py = e.y, d.dragStartX = a.dragGetX_(b, d), d.dragStartY = a.dragGetY_(b, d), 
                d.cancelNextDblclick = !1, d.tarp.cover();
            },
            destroy: function() {
                var a = this;
                if ((a.isZooming || a.isPanning) && (a.isZooming = !1, a.dragStartX = null, a.dragStartY = null), 
                a.isPanning) {
                    a.isPanning = !1, a.draggingDate = null, a.dateRange = null;
                    for (var b = 0; b < d.axes_.length; b++) delete d.axes_[b].draggingValue, delete d.axes_[b].dragValueRange;
                }
                a.tarp.uncover();
            }
        }, c = this.getOption("interactionModel"), d = this, e = function(a) {
            return function(c) {
                a(c, d, b);
            };
        };
        for (var f in c) c.hasOwnProperty(f) && this.addAndTrackEvent(this.mouseEventElement_, f, e(c[f]));
        if (!c.willDestroyContextMyself) {
            var g = function(a) {
                b.destroy();
            };
            this.addAndTrackEvent(document, "mouseup", g);
        }
    }, a.prototype.drawZoomRect_ = function(b, c, d, e, f, g, h, i) {
        var j = this.canvas_ctx_;
        g == a.HORIZONTAL ? j.clearRect(Math.min(c, h), this.layout_.getPlotArea().y, Math.abs(c - h), this.layout_.getPlotArea().h) : g == a.VERTICAL && j.clearRect(this.layout_.getPlotArea().x, Math.min(e, i), this.layout_.getPlotArea().w, Math.abs(e - i)), 
        b == a.HORIZONTAL ? d && c && (j.fillStyle = "rgba(128,128,128,0.33)", j.fillRect(Math.min(c, d), this.layout_.getPlotArea().y, Math.abs(d - c), this.layout_.getPlotArea().h)) : b == a.VERTICAL && f && e && (j.fillStyle = "rgba(128,128,128,0.33)", 
        j.fillRect(this.layout_.getPlotArea().x, Math.min(e, f), this.layout_.getPlotArea().w, Math.abs(f - e))), 
        this.isUsingExcanvas_ && (this.currentZoomRectArgs_ = [ b, c, d, e, f, 0, 0, 0 ]);
    }, a.prototype.clearZoomRect_ = function() {
        this.currentZoomRectArgs_ = null, this.canvas_ctx_.clearRect(0, 0, this.width_, this.height_);
    }, a.prototype.doZoomX_ = function(a, b) {
        this.currentZoomRectArgs_ = null;
        var c = this.toDataXCoord(a), d = this.toDataXCoord(b);
        this.doZoomXDates_(c, d);
    }, a.prototype.doZoomXDates_ = function(a, b) {
        var c = this.xAxisRange(), d = [ a, b ];
        this.zoomed_x_ = !0;
        var e = this;
        this.doAnimatedZoom(c, d, null, null, function() {
            e.getFunctionOption("zoomCallback") && e.getFunctionOption("zoomCallback").call(e, a, b, e.yAxisRanges());
        });
    }, a.prototype.doZoomY_ = function(a, b) {
        this.currentZoomRectArgs_ = null;
        for (var c = this.yAxisRanges(), d = [], e = 0; e < this.axes_.length; e++) {
            var f = this.toDataYCoord(a, e), g = this.toDataYCoord(b, e);
            d.push([ g, f ]);
        }
        this.zoomed_y_ = !0;
        var h = this;
        this.doAnimatedZoom(null, null, c, d, function() {
            if (h.getFunctionOption("zoomCallback")) {
                var a = h.xAxisRange();
                h.getFunctionOption("zoomCallback").call(h, a[0], a[1], h.yAxisRanges());
            }
        });
    }, a.zoomAnimationFunction = function(a, b) {
        var c = 1.5;
        return (1 - Math.pow(c, -a)) / (1 - Math.pow(c, -b));
    }, a.prototype.resetZoom = function() {
        var a = !1, b = !1, c = !1;
        null !== this.dateWindow_ && (a = !0, b = !0);
        for (var d = 0; d < this.axes_.length; d++) "undefined" != typeof this.axes_[d].valueWindow && null !== this.axes_[d].valueWindow && (a = !0, 
        c = !0);
        if (this.clearSelection(), a) {
            this.zoomed_x_ = !1, this.zoomed_y_ = !1;
            var e = this.rawData_[0][0], f = this.rawData_[this.rawData_.length - 1][0];
            if (!this.getBooleanOption("animatedZooms")) {
                for (this.dateWindow_ = null, d = 0; d < this.axes_.length; d++) null !== this.axes_[d].valueWindow && delete this.axes_[d].valueWindow;
                return this.drawGraph_(), void (this.getFunctionOption("zoomCallback") && this.getFunctionOption("zoomCallback").call(this, e, f, this.yAxisRanges()));
            }
            var g = null, h = null, i = null, j = null;
            if (b && (g = this.xAxisRange(), h = [ e, f ]), c) {
                i = this.yAxisRanges();
                var k = this.gatherDatasets_(this.rolledSeries_, null), l = k.extremes;
                for (this.computeYAxisRanges_(l), j = [], d = 0; d < this.axes_.length; d++) {
                    var m = this.axes_[d];
                    j.push(null !== m.valueRange && void 0 !== m.valueRange ? m.valueRange : m.extremeRange);
                }
            }
            var n = this;
            this.doAnimatedZoom(g, h, i, j, function() {
                n.dateWindow_ = null;
                for (var a = 0; a < n.axes_.length; a++) null !== n.axes_[a].valueWindow && delete n.axes_[a].valueWindow;
                n.getFunctionOption("zoomCallback") && n.getFunctionOption("zoomCallback").call(n, e, f, n.yAxisRanges());
            });
        }
    }, a.prototype.doAnimatedZoom = function(b, c, d, e, f) {
        var g, h, i = this.getBooleanOption("animatedZooms") ? a.ANIMATION_STEPS : 1, j = [], k = [];
        if (null !== b && null !== c) for (g = 1; i >= g; g++) h = a.zoomAnimationFunction(g, i), 
        j[g - 1] = [ b[0] * (1 - h) + h * c[0], b[1] * (1 - h) + h * c[1] ];
        if (null !== d && null !== e) for (g = 1; i >= g; g++) {
            h = a.zoomAnimationFunction(g, i);
            for (var l = [], m = 0; m < this.axes_.length; m++) l.push([ d[m][0] * (1 - h) + h * e[m][0], d[m][1] * (1 - h) + h * e[m][1] ]);
            k[g - 1] = l;
        }
        var n = this;
        a.repeatAndCleanup(function(a) {
            if (k.length) for (var b = 0; b < n.axes_.length; b++) {
                var c = k[a][b];
                n.axes_[b].valueWindow = [ c[0], c[1] ];
            }
            j.length && (n.dateWindow_ = j[a]), n.drawGraph_();
        }, i, a.ANIMATION_DURATION / i, f);
    }, a.prototype.getArea = function() {
        return this.plotter_.area;
    }, a.prototype.eventToDomCoords = function(b) {
        if (b.offsetX && b.offsetY) return [ b.offsetX, b.offsetY ];
        var c = a.findPos(this.mouseEventElement_), d = a.pageX(b) - c.x, e = a.pageY(b) - c.y;
        return [ d, e ];
    }, a.prototype.findClosestRow = function(b) {
        for (var c = 1 / 0, d = -1, e = this.layout_.points, f = 0; f < e.length; f++) for (var g = e[f], h = g.length, i = 0; h > i; i++) {
            var j = g[i];
            if (a.isValidPoint(j, !0)) {
                var k = Math.abs(j.canvasx - b);
                c > k && (c = k, d = j.idx);
            }
        }
        return d;
    }, a.prototype.findClosestPoint = function(b, c) {
        for (var d, e, f, g, h, i, j, k = 1 / 0, l = this.layout_.points.length - 1; l >= 0; --l) for (var m = this.layout_.points[l], n = 0; n < m.length; ++n) g = m[n], 
        a.isValidPoint(g) && (e = g.canvasx - b, f = g.canvasy - c, d = e * e + f * f, k > d && (k = d, 
        h = g, i = l, j = g.idx));
        var o = this.layout_.setNames[i];
        return {
            row: j,
            seriesName: o,
            point: h
        };
    }, a.prototype.findStackedPoint = function(b, c) {
        for (var d, e, f = this.findClosestRow(b), g = 0; g < this.layout_.points.length; ++g) {
            var h = this.getLeftBoundary_(g), i = f - h, j = this.layout_.points[g];
            if (!(i >= j.length)) {
                var k = j[i];
                if (a.isValidPoint(k)) {
                    var l = k.canvasy;
                    if (b > k.canvasx && i + 1 < j.length) {
                        var m = j[i + 1];
                        if (a.isValidPoint(m)) {
                            var n = m.canvasx - k.canvasx;
                            if (n > 0) {
                                var o = (b - k.canvasx) / n;
                                l += o * (m.canvasy - k.canvasy);
                            }
                        }
                    } else if (b < k.canvasx && i > 0) {
                        var p = j[i - 1];
                        if (a.isValidPoint(p)) {
                            var n = k.canvasx - p.canvasx;
                            if (n > 0) {
                                var o = (k.canvasx - b) / n;
                                l += o * (p.canvasy - k.canvasy);
                            }
                        }
                    }
                    (0 === g || c > l) && (d = k, e = g);
                }
            }
        }
        var q = this.layout_.setNames[e];
        return {
            row: f,
            seriesName: q,
            point: d
        };
    }, a.prototype.mouseMove_ = function(a) {
        var b = this.layout_.points;
        if (void 0 !== b && null !== b) {
            var c = this.eventToDomCoords(a), d = c[0], e = c[1], f = this.getOption("highlightSeriesOpts"), g = !1;
            if (f && !this.isSeriesLocked()) {
                var h;
                h = this.getBooleanOption("stackedGraph") ? this.findStackedPoint(d, e) : this.findClosestPoint(d, e), 
                g = this.setSelection(h.row, h.seriesName);
            } else {
                var i = this.findClosestRow(d);
                g = this.setSelection(i);
            }
            var j = this.getFunctionOption("highlightCallback");
            j && g && j.call(this, a, this.lastx_, this.selPoints_, this.lastRow_, this.highlightSet_);
        }
    }, a.prototype.getLeftBoundary_ = function(a) {
        if (this.boundaryIds_[a]) return this.boundaryIds_[a][0];
        for (var b = 0; b < this.boundaryIds_.length; b++) if (void 0 !== this.boundaryIds_[b]) return this.boundaryIds_[b][0];
        return 0;
    }, a.prototype.animateSelection_ = function(b) {
        var c = 10, d = 30;
        void 0 === this.fadeLevel && (this.fadeLevel = 0), void 0 === this.animateId && (this.animateId = 0);
        var e = this.fadeLevel, f = 0 > b ? e : c - e;
        if (0 >= f) return void (this.fadeLevel && this.updateSelection_(1));
        var g = ++this.animateId, h = this;
        a.repeatAndCleanup(function(a) {
            h.animateId == g && (h.fadeLevel += b, 0 === h.fadeLevel ? h.clearSelection() : h.updateSelection_(h.fadeLevel / c));
        }, f, d, function() {});
    }, a.prototype.updateSelection_ = function(b) {
        this.cascadeEvents_("select", {
            selectedRow: this.lastRow_,
            selectedX: this.lastx_,
            selectedPoints: this.selPoints_
        });
        var c, d = this.canvas_ctx_;
        if (this.getOption("highlightSeriesOpts")) {
            d.clearRect(0, 0, this.width_, this.height_);
            var e = 1 - this.getNumericOption("highlightSeriesBackgroundAlpha");
            if (e) {
                var f = !0;
                if (f) {
                    if (void 0 === b) return void this.animateSelection_(1);
                    e *= b;
                }
                d.fillStyle = "rgba(255,255,255," + e + ")", d.fillRect(0, 0, this.width_, this.height_);
            }
            this.plotter_._renderLineChart(this.highlightSet_, d);
        } else if (this.previousVerticalX_ >= 0) {
            var g = 0, h = this.attr_("labels");
            for (c = 1; c < h.length; c++) {
                var i = this.getNumericOption("highlightCircleSize", h[c]);
                i > g && (g = i);
            }
            var j = this.previousVerticalX_;
            d.clearRect(j - g - 1, 0, 2 * g + 2, this.height_);
        }
        if (this.isUsingExcanvas_ && this.currentZoomRectArgs_ && a.prototype.drawZoomRect_.apply(this, this.currentZoomRectArgs_), 
        this.selPoints_.length > 0) {
            var k = this.selPoints_[0].canvasx;
            for (d.save(), c = 0; c < this.selPoints_.length; c++) {
                var l = this.selPoints_[c];
                if (a.isOK(l.canvasy)) {
                    var m = this.getNumericOption("highlightCircleSize", l.name), n = this.getFunctionOption("drawHighlightPointCallback", l.name), o = this.plotter_.colors[l.name];
                    n || (n = a.Circles.DEFAULT), d.lineWidth = this.getNumericOption("strokeWidth", l.name), 
                    d.strokeStyle = o, d.fillStyle = o, n.call(this, this, l.name, d, k, l.canvasy, o, m, l.idx);
                }
            }
            d.restore(), this.previousVerticalX_ = k;
        }
    }, a.prototype.setSelection = function(a, b, c) {
        this.selPoints_ = [];
        var d = !1;
        if (a !== !1 && a >= 0) {
            a != this.lastRow_ && (d = !0), this.lastRow_ = a;
            for (var e = 0; e < this.layout_.points.length; ++e) {
                var f = this.layout_.points[e], g = a - this.getLeftBoundary_(e);
                if (g < f.length && f[g].idx == a) {
                    var h = f[g];
                    null !== h.yval && this.selPoints_.push(h);
                } else for (var i = 0; i < f.length; ++i) {
                    var h = f[i];
                    if (h.idx == a) {
                        null !== h.yval && this.selPoints_.push(h);
                        break;
                    }
                }
            }
        } else this.lastRow_ >= 0 && (d = !0), this.lastRow_ = -1;
        return this.selPoints_.length ? this.lastx_ = this.selPoints_[0].xval : this.lastx_ = -1, 
        void 0 !== b && (this.highlightSet_ !== b && (d = !0), this.highlightSet_ = b), 
        void 0 !== c && (this.lockedSet_ = c), d && this.updateSelection_(void 0), d;
    }, a.prototype.mouseOut_ = function(a) {
        this.getFunctionOption("unhighlightCallback") && this.getFunctionOption("unhighlightCallback").call(this, a), 
        this.getBooleanOption("hideOverlayOnMouseOut") && !this.lockedSet_ && this.clearSelection();
    }, a.prototype.clearSelection = function() {
        return this.cascadeEvents_("deselect", {}), this.lockedSet_ = !1, this.fadeLevel ? void this.animateSelection_(-1) : (this.canvas_ctx_.clearRect(0, 0, this.width_, this.height_), 
        this.fadeLevel = 0, this.selPoints_ = [], this.lastx_ = -1, this.lastRow_ = -1, 
        void (this.highlightSet_ = null));
    }, a.prototype.getSelection = function() {
        if (!this.selPoints_ || this.selPoints_.length < 1) return -1;
        for (var a = 0; a < this.layout_.points.length; a++) for (var b = this.layout_.points[a], c = 0; c < b.length; c++) if (b[c].x == this.selPoints_[0].x) return b[c].idx;
        return -1;
    }, a.prototype.getHighlightSeries = function() {
        return this.highlightSet_;
    }, a.prototype.isSeriesLocked = function() {
        return this.lockedSet_;
    }, a.prototype.loadedEvent_ = function(a) {
        this.rawData_ = this.parseCSV_(a), this.cascadeDataDidUpdateEvent_(), this.predraw_();
    }, a.prototype.addXTicks_ = function() {
        var a;
        a = this.dateWindow_ ? [ this.dateWindow_[0], this.dateWindow_[1] ] : this.xAxisExtremes();
        var b = this.optionsViewForAxis_("x"), c = b("ticker")(a[0], a[1], this.plotter_.area.w, b, this);
        this.layout_.setXTicks(c);
    }, a.prototype.getHandlerClass_ = function() {
        var b;
        return b = this.attr_("dataHandler") ? this.attr_("dataHandler") : this.fractions_ ? this.getBooleanOption("errorBars") ? a.DataHandlers.FractionsBarsHandler : a.DataHandlers.DefaultFractionHandler : this.getBooleanOption("customBars") ? a.DataHandlers.CustomBarsHandler : this.getBooleanOption("errorBars") ? a.DataHandlers.ErrorBarsHandler : a.DataHandlers.DefaultHandler;
    }, a.prototype.predraw_ = function() {
        var a = new Date();
        this.dataHandler_ = new (this.getHandlerClass_())(), this.layout_.computePlotArea(), 
        this.computeYAxes_(), this.is_initial_draw_ || (this.canvas_ctx_.restore(), this.hidden_ctx_.restore()), 
        this.canvas_ctx_.save(), this.hidden_ctx_.save(), this.plotter_ = new DygraphCanvasRenderer(this, this.hidden_, this.hidden_ctx_, this.layout_), 
        this.createRollInterface_(), this.cascadeEvents_("predraw"), this.rolledSeries_ = [ null ];
        for (var b = 1; b < this.numColumns(); b++) {
            var c = this.dataHandler_.extractSeries(this.rawData_, b, this.attributes_);
            this.rollPeriod_ > 1 && (c = this.dataHandler_.rollingAverage(c, this.rollPeriod_, this.attributes_)), 
            this.rolledSeries_.push(c);
        }
        this.drawGraph_();
        var d = new Date();
        this.drawingTimeMs_ = d - a;
    }, a.PointType = void 0, a.stackPoints_ = function(a, b, c, d) {
        for (var e = null, f = null, g = null, h = -1, i = function(b) {
            if (!(h >= b)) for (var c = b; c < a.length; ++c) if (g = null, !isNaN(a[c].yval) && null !== a[c].yval) {
                h = c, g = a[c];
                break;
            }
        }, j = 0; j < a.length; ++j) {
            var k = a[j], l = k.xval;
            void 0 === b[l] && (b[l] = 0);
            var m = k.yval;
            isNaN(m) || null === m ? "none" == d ? m = 0 : (i(j), m = f && g && "none" != d ? f.yval + (g.yval - f.yval) * ((l - f.xval) / (g.xval - f.xval)) : f && "all" == d ? f.yval : g && "all" == d ? g.yval : 0) : f = k;
            var n = b[l];
            e != l && (n += m, b[l] = n), e = l, k.yval_stacked = n, n > c[1] && (c[1] = n), 
            n < c[0] && (c[0] = n);
        }
    }, a.prototype.gatherDatasets_ = function(b, c) {
        var d, e, f, g, h, i, j = [], k = [], l = [], m = {}, n = b.length - 1;
        for (d = n; d >= 1; d--) if (this.visibility()[d - 1]) {
            if (c) {
                i = b[d];
                var o = c[0], p = c[1];
                for (f = null, g = null, e = 0; e < i.length; e++) i[e][0] >= o && null === f && (f = e), 
                i[e][0] <= p && (g = e);
                null === f && (f = 0);
                for (var q = f, r = !0; r && q > 0; ) q--, r = null === i[q][1];
                null === g && (g = i.length - 1);
                var s = g;
                for (r = !0; r && s < i.length - 1; ) s++, r = null === i[s][1];
                q !== f && (f = q), s !== g && (g = s), j[d - 1] = [ f, g ], i = i.slice(f, g + 1);
            } else i = b[d], j[d - 1] = [ 0, i.length - 1 ];
            var t = this.attr_("labels")[d], u = this.dataHandler_.getExtremeYValues(i, c, this.getBooleanOption("stepPlot", t)), v = this.dataHandler_.seriesToPoints(i, t, j[d - 1][0]);
            this.getBooleanOption("stackedGraph") && (h = this.attributes_.axisForSeries(t), 
            void 0 === l[h] && (l[h] = []), a.stackPoints_(v, l[h], u, this.getBooleanOption("stackedGraphNaNFill"))), 
            m[t] = u, k[d] = v;
        }
        return {
            points: k,
            extremes: m,
            boundaryIds: j
        };
    }, a.prototype.drawGraph_ = function() {
        var a = new Date(), b = this.is_initial_draw_;
        this.is_initial_draw_ = !1, this.layout_.removeAllDatasets(), this.setColors_(), 
        this.attrs_.pointSize = .5 * this.getNumericOption("highlightCircleSize");
        var c = this.gatherDatasets_(this.rolledSeries_, this.dateWindow_), d = c.points, e = c.extremes;
        this.boundaryIds_ = c.boundaryIds, this.setIndexByName_ = {};
        var f = this.attr_("labels");
        f.length > 0 && (this.setIndexByName_[f[0]] = 0);
        for (var g = 0, h = 1; h < d.length; h++) this.setIndexByName_[f[h]] = h, this.visibility()[h - 1] && (this.layout_.addDataset(f[h], d[h]), 
        this.datasetIndex_[h] = g++);
        this.computeYAxisRanges_(e), this.layout_.setYAxes(this.axes_), this.addXTicks_();
        var i = this.zoomed_x_;
        if (this.zoomed_x_ = i, this.layout_.evaluate(), this.renderGraph_(b), this.getStringOption("timingName")) {
            var j = new Date();
            console.log(this.getStringOption("timingName") + " - drawGraph: " + (j - a) + "ms");
        }
    }, a.prototype.renderGraph_ = function(a) {
        this.cascadeEvents_("clearChart"), this.plotter_.clear(), this.getFunctionOption("underlayCallback") && this.getFunctionOption("underlayCallback").call(this, this.hidden_ctx_, this.layout_.getPlotArea(), this, this);
        var b = {
            canvas: this.hidden_,
            drawingContext: this.hidden_ctx_
        };
        if (this.cascadeEvents_("willDrawChart", b), this.plotter_.render(), this.cascadeEvents_("didDrawChart", b), 
        this.lastRow_ = -1, this.canvas_.getContext("2d").clearRect(0, 0, this.width_, this.height_), 
        null !== this.getFunctionOption("drawCallback") && this.getFunctionOption("drawCallback").call(this, this, a), 
        a) for (this.readyFired_ = !0; this.readyFns_.length > 0; ) {
            var c = this.readyFns_.pop();
            c(this);
        }
    }, a.prototype.computeYAxes_ = function() {
        var b, c, d, e, f;
        if (void 0 !== this.axes_ && this.user_attrs_.hasOwnProperty("valueRange") === !1) for (b = [], 
        d = 0; d < this.axes_.length; d++) b.push(this.axes_[d].valueWindow);
        for (this.axes_ = [], c = 0; c < this.attributes_.numAxes(); c++) e = {
            g: this
        }, a.update(e, this.attributes_.axisOptions(c)), this.axes_[c] = e;
        if (f = this.attr_("valueRange"), f && (this.axes_[0].valueRange = f), void 0 !== b) {
            var g = Math.min(b.length, this.axes_.length);
            for (d = 0; g > d; d++) this.axes_[d].valueWindow = b[d];
        }
        for (c = 0; c < this.axes_.length; c++) if (0 === c) e = this.optionsViewForAxis_("y" + (c ? "2" : "")), 
        f = e("valueRange"), f && (this.axes_[c].valueRange = f); else {
            var h = this.user_attrs_.axes;
            h && h.y2 && (f = h.y2.valueRange, f && (this.axes_[c].valueRange = f));
        }
    }, a.prototype.numAxes = function() {
        return this.attributes_.numAxes();
    }, a.prototype.axisPropertiesForSeries = function(a) {
        return this.axes_[this.attributes_.axisForSeries(a)];
    }, a.prototype.computeYAxisRanges_ = function(a) {
        for (var b, c, d, e, f, g = function(a) {
            return isNaN(parseFloat(a));
        }, h = this.attributes_.numAxes(), i = 0; h > i; i++) {
            var j = this.axes_[i], k = this.attributes_.getForAxis("logscale", i), l = this.attributes_.getForAxis("includeZero", i), m = this.attributes_.getForAxis("independentTicks", i);
            if (d = this.attributes_.seriesForAxis(i), b = !0, e = .1, null !== this.getNumericOption("yRangePad") && (b = !1, 
            e = this.getNumericOption("yRangePad") / this.plotter_.area.h), 0 === d.length) j.extremeRange = [ 0, 1 ]; else {
                for (var n, o, p = 1 / 0, q = -(1 / 0), r = 0; r < d.length; r++) a.hasOwnProperty(d[r]) && (n = a[d[r]][0], 
                null !== n && (p = Math.min(n, p)), o = a[d[r]][1], null !== o && (q = Math.max(o, q)));
                l && !k && (p > 0 && (p = 0), 0 > q && (q = 0)), p == 1 / 0 && (p = 0), q == -(1 / 0) && (q = 1), 
                c = q - p, 0 === c && (0 !== q ? c = Math.abs(q) : (q = 1, c = 1));
                var s, t;
                if (k) if (b) s = q + e * c, t = p; else {
                    var u = Math.exp(Math.log(c) * e);
                    s = q * u, t = p / u;
                } else s = q + e * c, t = p - e * c, b && !this.getBooleanOption("avoidMinZero") && (0 > t && p >= 0 && (t = 0), 
                s > 0 && 0 >= q && (s = 0));
                j.extremeRange = [ t, s ];
            }
            if (j.valueWindow) j.computedValueRange = [ j.valueWindow[0], j.valueWindow[1] ]; else if (j.valueRange) {
                var v = g(j.valueRange[0]) ? j.extremeRange[0] : j.valueRange[0], w = g(j.valueRange[1]) ? j.extremeRange[1] : j.valueRange[1];
                if (!b) if (j.logscale) {
                    var u = Math.exp(Math.log(c) * e);
                    v *= u, w /= u;
                } else c = w - v, v -= c * e, w += c * e;
                j.computedValueRange = [ v, w ];
            } else j.computedValueRange = j.extremeRange;
            if (m) {
                j.independentTicks = m;
                var x = this.optionsViewForAxis_("y" + (i ? "2" : "")), y = x("ticker");
                j.ticks = y(j.computedValueRange[0], j.computedValueRange[1], this.plotter_.area.h, x, this), 
                f || (f = j);
            }
        }
        if (void 0 === f) throw 'Configuration Error: At least one axis has to have the "independentTicks" option activated.';
        for (var i = 0; h > i; i++) {
            var j = this.axes_[i];
            if (!j.independentTicks) {
                for (var x = this.optionsViewForAxis_("y" + (i ? "2" : "")), y = x("ticker"), z = f.ticks, A = f.computedValueRange[1] - f.computedValueRange[0], B = j.computedValueRange[1] - j.computedValueRange[0], C = [], D = 0; D < z.length; D++) {
                    var E = (z[D].v - f.computedValueRange[0]) / A, F = j.computedValueRange[0] + E * B;
                    C.push(F);
                }
                j.ticks = y(j.computedValueRange[0], j.computedValueRange[1], this.plotter_.area.h, x, this, C);
            }
        }
    }, a.prototype.detectTypeFromString_ = function(a) {
        var b = !1, c = a.indexOf("-");
        c > 0 && "e" != a[c - 1] && "E" != a[c - 1] || a.indexOf("/") >= 0 || isNaN(parseFloat(a)) ? b = !0 : 8 == a.length && a > "19700101" && "20371231" > a && (b = !0), 
        this.setXAxisOptions_(b);
    }, a.prototype.setXAxisOptions_ = function(b) {
        b ? (this.attrs_.xValueParser = a.dateParser, this.attrs_.axes.x.valueFormatter = a.dateValueFormatter, 
        this.attrs_.axes.x.ticker = a.dateTicker, this.attrs_.axes.x.axisLabelFormatter = a.dateAxisLabelFormatter) : (this.attrs_.xValueParser = function(a) {
            return parseFloat(a);
        }, this.attrs_.axes.x.valueFormatter = function(a) {
            return a;
        }, this.attrs_.axes.x.ticker = a.numericTicks, this.attrs_.axes.x.axisLabelFormatter = this.attrs_.axes.x.valueFormatter);
    }, a.prototype.parseCSV_ = function(b) {
        var c, d, e = [], f = a.detectLineDelimiter(b), g = b.split(f || "\n"), h = this.getStringOption("delimiter");
        -1 == g[0].indexOf(h) && g[0].indexOf("	") >= 0 && (h = "	");
        var i = 0;
        "labels" in this.user_attrs_ || (i = 1, this.attrs_.labels = g[0].split(h), this.attributes_.reparseSeries());
        for (var j, k = 0, l = !1, m = this.attr_("labels").length, n = !1, o = i; o < g.length; o++) {
            var p = g[o];
            if (k = o, 0 !== p.length && "#" != p[0]) {
                var q = p.split(h);
                if (!(q.length < 2)) {
                    var r = [];
                    if (l || (this.detectTypeFromString_(q[0]), j = this.getFunctionOption("xValueParser"), 
                    l = !0), r[0] = j(q[0], this), this.fractions_) for (d = 1; d < q.length; d++) c = q[d].split("/"), 
                    2 != c.length ? (console.error('Expected fractional "num/den" values in CSV data but found a value \'' + q[d] + "' on line " + (1 + o) + " ('" + p + "') which is not of this form."), 
                    r[d] = [ 0, 0 ]) : r[d] = [ a.parseFloat_(c[0], o, p), a.parseFloat_(c[1], o, p) ]; else if (this.getBooleanOption("errorBars")) for (q.length % 2 != 1 && console.error("Expected alternating (value, stdev.) pairs in CSV data but line " + (1 + o) + " has an odd number of values (" + (q.length - 1) + "): '" + p + "'"), 
                    d = 1; d < q.length; d += 2) r[(d + 1) / 2] = [ a.parseFloat_(q[d], o, p), a.parseFloat_(q[d + 1], o, p) ]; else if (this.getBooleanOption("customBars")) for (d = 1; d < q.length; d++) {
                        var s = q[d];
                        /^ *$/.test(s) ? r[d] = [ null, null, null ] : (c = s.split(";"), 3 == c.length ? r[d] = [ a.parseFloat_(c[0], o, p), a.parseFloat_(c[1], o, p), a.parseFloat_(c[2], o, p) ] : console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "' + s + '" on line ' + (1 + o)));
                    } else for (d = 1; d < q.length; d++) r[d] = a.parseFloat_(q[d], o, p);
                    if (e.length > 0 && r[0] < e[e.length - 1][0] && (n = !0), r.length != m && console.error("Number of columns in line " + o + " (" + r.length + ") does not agree with number of labels (" + m + ") " + p), 
                    0 === o && this.attr_("labels")) {
                        var t = !0;
                        for (d = 0; t && d < r.length; d++) r[d] && (t = !1);
                        if (t) {
                            console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('" + p + "') appears to also contain labels. Will drop the CSV labels and use the option labels.");
                            continue;
                        }
                    }
                    e.push(r);
                }
            }
        }
        return n && (console.warn("CSV is out of order; order it correctly to speed loading."), 
        e.sort(function(a, b) {
            return a[0] - b[0];
        })), e;
    }, a.prototype.parseArray_ = function(b) {
        if (0 === b.length) return console.error("Can't plot empty data set"), null;
        if (0 === b[0].length) return console.error("Data set cannot contain an empty row"), 
        null;
        var c;
        if (null === this.attr_("labels")) {
            for (console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"), 
            this.attrs_.labels = [ "X" ], c = 1; c < b[0].length; c++) this.attrs_.labels.push("Y" + c);
            this.attributes_.reparseSeries();
        } else {
            var d = this.attr_("labels");
            if (d.length != b[0].length) return console.error("Mismatch between number of labels (" + d + ") and number of columns in array (" + b[0].length + ")"), 
            null;
        }
        if (a.isDateLike(b[0][0])) {
            this.attrs_.axes.x.valueFormatter = a.dateValueFormatter, this.attrs_.axes.x.ticker = a.dateTicker, 
            this.attrs_.axes.x.axisLabelFormatter = a.dateAxisLabelFormatter;
            var e = a.clone(b);
            for (c = 0; c < b.length; c++) {
                if (0 === e[c].length) return console.error("Row " + (1 + c) + " of data is empty"), 
                null;
                if (null === e[c][0] || "function" != typeof e[c][0].getTime || isNaN(e[c][0].getTime())) return console.error("x value in row " + (1 + c) + " is not a Date"), 
                null;
                e[c][0] = e[c][0].getTime();
            }
            return e;
        }
        return this.attrs_.axes.x.valueFormatter = function(a) {
            return a;
        }, this.attrs_.axes.x.ticker = a.numericTicks, this.attrs_.axes.x.axisLabelFormatter = a.numberAxisLabelFormatter, 
        b;
    }, a.prototype.parseDataTable_ = function(b) {
        var c = function(a) {
            var b = String.fromCharCode(65 + a % 26);
            for (a = Math.floor(a / 26); a > 0; ) b = String.fromCharCode(65 + (a - 1) % 26) + b.toLowerCase(), 
            a = Math.floor((a - 1) / 26);
            return b;
        }, d = b.getNumberOfColumns(), e = b.getNumberOfRows(), f = b.getColumnType(0);
        if ("date" == f || "datetime" == f) this.attrs_.xValueParser = a.dateParser, this.attrs_.axes.x.valueFormatter = a.dateValueFormatter, 
        this.attrs_.axes.x.ticker = a.dateTicker, this.attrs_.axes.x.axisLabelFormatter = a.dateAxisLabelFormatter; else {
            if ("number" != f) return console.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '" + f + "')"), 
            null;
            this.attrs_.xValueParser = function(a) {
                return parseFloat(a);
            }, this.attrs_.axes.x.valueFormatter = function(a) {
                return a;
            }, this.attrs_.axes.x.ticker = a.numericTicks, this.attrs_.axes.x.axisLabelFormatter = this.attrs_.axes.x.valueFormatter;
        }
        var g, h, i = [], j = {}, k = !1;
        for (g = 1; d > g; g++) {
            var l = b.getColumnType(g);
            if ("number" == l) i.push(g); else if ("string" == l && this.getBooleanOption("displayAnnotations")) {
                var m = i[i.length - 1];
                j.hasOwnProperty(m) ? j[m].push(g) : j[m] = [ g ], k = !0;
            } else console.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");
        }
        var n = [ b.getColumnLabel(0) ];
        for (g = 0; g < i.length; g++) n.push(b.getColumnLabel(i[g])), this.getBooleanOption("errorBars") && (g += 1);
        this.attrs_.labels = n, d = n.length;
        var o = [], p = !1, q = [];
        for (g = 0; e > g; g++) {
            var r = [];
            if ("undefined" != typeof b.getValue(g, 0) && null !== b.getValue(g, 0)) {
                if (r.push("date" == f || "datetime" == f ? b.getValue(g, 0).getTime() : b.getValue(g, 0)), 
                this.getBooleanOption("errorBars")) for (h = 0; d - 1 > h; h++) r.push([ b.getValue(g, 1 + 2 * h), b.getValue(g, 2 + 2 * h) ]); else {
                    for (h = 0; h < i.length; h++) {
                        var s = i[h];
                        if (r.push(b.getValue(g, s)), k && j.hasOwnProperty(s) && null !== b.getValue(g, j[s][0])) {
                            var t = {};
                            t.series = b.getColumnLabel(s), t.xval = r[0], t.shortText = c(q.length), t.text = "";
                            for (var u = 0; u < j[s].length; u++) u && (t.text += "\n"), t.text += b.getValue(g, j[s][u]);
                            q.push(t);
                        }
                    }
                    for (h = 0; h < r.length; h++) isFinite(r[h]) || (r[h] = null);
                }
                o.length > 0 && r[0] < o[o.length - 1][0] && (p = !0), o.push(r);
            } else console.warn("Ignoring row " + g + " of DataTable because of undefined or null first column.");
        }
        p && (console.warn("DataTable is out of order; order it correctly to speed loading."), 
        o.sort(function(a, b) {
            return a[0] - b[0];
        })), this.rawData_ = o, q.length > 0 && this.setAnnotations(q, !0), this.attributes_.reparseSeries();
    }, a.prototype.cascadeDataDidUpdateEvent_ = function() {
        this.cascadeEvents_("dataDidUpdate", {});
    }, a.prototype.start_ = function() {
        var b = this.file_;
        if ("function" == typeof b && (b = b()), a.isArrayLike(b)) this.rawData_ = this.parseArray_(b), 
        this.cascadeDataDidUpdateEvent_(), this.predraw_(); else if ("object" == typeof b && "function" == typeof b.getColumnRange) this.parseDataTable_(b), 
        this.cascadeDataDidUpdateEvent_(), this.predraw_(); else if ("string" == typeof b) {
            var c = a.detectLineDelimiter(b);
            if (c) this.loadedEvent_(b); else {
                var d;
                d = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
                var e = this;
                d.onreadystatechange = function() {
                    4 == d.readyState && (200 === d.status || 0 === d.status) && e.loadedEvent_(d.responseText);
                }, d.open("GET", b, !0), d.send(null);
            }
        } else console.error("Unknown data format: " + typeof b);
    }, a.prototype.updateOptions = function(b, c) {
        "undefined" == typeof c && (c = !1);
        var d = b.file, e = a.mapLegacyOptions_(b);
        "rollPeriod" in e && (this.rollPeriod_ = e.rollPeriod), "dateWindow" in e && (this.dateWindow_ = e.dateWindow, 
        "isZoomedIgnoreProgrammaticZoom" in e || (this.zoomed_x_ = null !== e.dateWindow)), 
        "valueRange" in e && !("isZoomedIgnoreProgrammaticZoom" in e) && (this.zoomed_y_ = null !== e.valueRange);
        var f = a.isPixelChangingOptionList(this.attr_("labels"), e);
        a.updateDeep(this.user_attrs_, e), this.attributes_.reparseSeries(), d ? (this.cascadeEvents_("dataWillUpdate", {}), 
        this.file_ = d, c || this.start_()) : c || (f ? this.predraw_() : this.renderGraph_(!1));
    }, a.mapLegacyOptions_ = function(a) {
        var b = {};
        for (var c in a) a.hasOwnProperty(c) && "file" != c && a.hasOwnProperty(c) && (b[c] = a[c]);
        var d = function(a, c, d) {
            b.axes || (b.axes = {}), b.axes[a] || (b.axes[a] = {}), b.axes[a][c] = d;
        }, e = function(c, e, f) {
            "undefined" != typeof a[c] && (console.warn("Option " + c + " is deprecated. Use the " + f + " option for the " + e + " axis instead. (e.g. { axes : { " + e + " : { " + f + " : ... } } } (see http://dygraphs.com/per-axis.html for more information."), 
            d(e, f, a[c]), delete b[c]);
        };
        return e("xValueFormatter", "x", "valueFormatter"), e("pixelsPerXLabel", "x", "pixelsPerLabel"), 
        e("xAxisLabelFormatter", "x", "axisLabelFormatter"), e("xTicker", "x", "ticker"), 
        e("yValueFormatter", "y", "valueFormatter"), e("pixelsPerYLabel", "y", "pixelsPerLabel"), 
        e("yAxisLabelFormatter", "y", "axisLabelFormatter"), e("yTicker", "y", "ticker"), 
        e("drawXGrid", "x", "drawGrid"), e("drawXAxis", "x", "drawAxis"), e("drawYGrid", "y", "drawGrid"), 
        e("drawYAxis", "y", "drawAxis"), e("xAxisLabelWidth", "x", "axisLabelWidth"), e("yAxisLabelWidth", "y", "axisLabelWidth"), 
        b;
    }, a.prototype.resize = function(a, b) {
        if (!this.resize_lock) {
            this.resize_lock = !0, null === a != (null === b) && (console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."), 
            a = b = null);
            var c = this.width_, d = this.height_;
            a ? (this.maindiv_.style.width = a + "px", this.maindiv_.style.height = b + "px", 
            this.width_ = a, this.height_ = b) : (this.width_ = this.maindiv_.clientWidth, this.height_ = this.maindiv_.clientHeight), 
            (c != this.width_ || d != this.height_) && (this.resizeElements_(), this.predraw_()), 
            this.resize_lock = !1;
        }
    }, a.prototype.adjustRoll = function(a) {
        this.rollPeriod_ = a, this.predraw_();
    }, a.prototype.visibility = function() {
        for (this.getOption("visibility") || (this.attrs_.visibility = []); this.getOption("visibility").length < this.numColumns() - 1; ) this.attrs_.visibility.push(!0);
        return this.getOption("visibility");
    }, a.prototype.setVisibility = function(a, b) {
        var c = this.visibility();
        0 > a || a >= c.length ? console.warn("invalid series number in setVisibility: " + a) : (c[a] = b, 
        this.predraw_());
    }, a.prototype.size = function() {
        return {
            width: this.width_,
            height: this.height_
        };
    }, a.prototype.setAnnotations = function(b, c) {
        return a.addAnnotationRule(), this.annotations_ = b, this.layout_ ? (this.layout_.setAnnotations(this.annotations_), 
        void (c || this.predraw_())) : void console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html");
    }, a.prototype.annotations = function() {
        return this.annotations_;
    }, a.prototype.getLabels = function() {
        var a = this.attr_("labels");
        return a ? a.slice() : null;
    }, a.prototype.indexFromSetName = function(a) {
        return this.setIndexByName_[a];
    }, a.prototype.ready = function(a) {
        this.is_initial_draw_ ? this.readyFns_.push(a) : a.call(this, this);
    }, a.addAnnotationRule = function() {
        if (!a.addedAnnotationCSS) {
            var b = "border: 1px solid black; background-color: white; text-align: center;", c = document.createElement("style");
            c.type = "text/css", document.getElementsByTagName("head")[0].appendChild(c);
            for (var d = 0; d < document.styleSheets.length; d++) if (!document.styleSheets[d].disabled) {
                var e = document.styleSheets[d];
                try {
                    if (e.insertRule) {
                        var f = e.cssRules ? e.cssRules.length : 0;
                        e.insertRule(".dygraphDefaultAnnotation { " + b + " }", f);
                    } else e.addRule && e.addRule(".dygraphDefaultAnnotation", b);
                    return void (a.addedAnnotationCSS = !0);
                } catch (g) {}
            }
            console.warn("Unable to add default annotation CSS rule; display may be off.");
        }
    }, "object" == typeof exports && "undefined" != typeof module && (module.exports = a), 
    a;
}();

!function() {
    "use strict";
    function a(a) {
        var b = c.exec(a);
        if (!b) return null;
        var d = parseInt(b[1], 10), e = parseInt(b[2], 10), f = parseInt(b[3], 10);
        return b[4] ? {
            r: d,
            g: e,
            b: f,
            a: parseFloat(b[4])
        } : {
            r: d,
            g: e,
            b: f
        };
    }
    Dygraph.LOG_SCALE = 10, Dygraph.LN_TEN = Math.log(Dygraph.LOG_SCALE), Dygraph.log10 = function(a) {
        return Math.log(a) / Dygraph.LN_TEN;
    }, Dygraph.DOTTED_LINE = [ 2, 2 ], Dygraph.DASHED_LINE = [ 7, 3 ], Dygraph.DOT_DASH_LINE = [ 7, 2, 2, 2 ], 
    Dygraph.getContext = function(a) {
        return a.getContext("2d");
    }, Dygraph.addEvent = function(a, b, c) {
        a.addEventListener ? a.addEventListener(b, c, !1) : (a[b + c] = function() {
            c(window.event);
        }, a.attachEvent("on" + b, a[b + c]));
    }, Dygraph.prototype.addAndTrackEvent = function(a, b, c) {
        Dygraph.addEvent(a, b, c), this.registeredEvents_.push({
            elem: a,
            type: b,
            fn: c
        });
    }, Dygraph.removeEvent = function(a, b, c) {
        if (a.removeEventListener) a.removeEventListener(b, c, !1); else {
            try {
                a.detachEvent("on" + b, a[b + c]);
            } catch (d) {}
            a[b + c] = null;
        }
    }, Dygraph.prototype.removeTrackedEvents_ = function() {
        if (this.registeredEvents_) for (var a = 0; a < this.registeredEvents_.length; a++) {
            var b = this.registeredEvents_[a];
            Dygraph.removeEvent(b.elem, b.type, b.fn);
        }
        this.registeredEvents_ = [];
    }, Dygraph.cancelEvent = function(a) {
        return a = a ? a : window.event, a.stopPropagation && a.stopPropagation(), a.preventDefault && a.preventDefault(), 
        a.cancelBubble = !0, a.cancel = !0, a.returnValue = !1, !1;
    }, Dygraph.hsvToRGB = function(a, b, c) {
        var d, e, f;
        if (0 === b) d = c, e = c, f = c; else {
            var g = Math.floor(6 * a), h = 6 * a - g, i = c * (1 - b), j = c * (1 - b * h), k = c * (1 - b * (1 - h));
            switch (g) {
              case 1:
                d = j, e = c, f = i;
                break;

              case 2:
                d = i, e = c, f = k;
                break;

              case 3:
                d = i, e = j, f = c;
                break;

              case 4:
                d = k, e = i, f = c;
                break;

              case 5:
                d = c, e = i, f = j;
                break;

              case 6:
              case 0:
                d = c, e = k, f = i;
            }
        }
        return d = Math.floor(255 * d + .5), e = Math.floor(255 * e + .5), f = Math.floor(255 * f + .5), 
        "rgb(" + d + "," + e + "," + f + ")";
    }, Dygraph.findPos = function(a) {
        var b = 0, c = 0;
        if (a.offsetParent) for (var d = a; ;) {
            var e = "0", f = "0";
            if (window.getComputedStyle) {
                var g = window.getComputedStyle(d, null);
                e = g.borderLeft || "0", f = g.borderTop || "0";
            }
            if (b += parseInt(e, 10), c += parseInt(f, 10), b += d.offsetLeft, c += d.offsetTop, 
            !d.offsetParent) break;
            d = d.offsetParent;
        } else a.x && (b += a.x), a.y && (c += a.y);
        for (;a && a != document.body; ) b -= a.scrollLeft, c -= a.scrollTop, a = a.parentNode;
        return {
            x: b,
            y: c
        };
    }, Dygraph.pageX = function(a) {
        if (a.pageX) return !a.pageX || a.pageX < 0 ? 0 : a.pageX;
        var b = document.documentElement, c = document.body;
        return a.clientX + (b.scrollLeft || c.scrollLeft) - (b.clientLeft || 0);
    }, Dygraph.pageY = function(a) {
        if (a.pageY) return !a.pageY || a.pageY < 0 ? 0 : a.pageY;
        var b = document.documentElement, c = document.body;
        return a.clientY + (b.scrollTop || c.scrollTop) - (b.clientTop || 0);
    }, Dygraph.dragGetX_ = function(a, b) {
        return Dygraph.pageX(a) - b.px;
    }, Dygraph.dragGetY_ = function(a, b) {
        return Dygraph.pageY(a) - b.py;
    }, Dygraph.isOK = function(a) {
        return !!a && !isNaN(a);
    }, Dygraph.isValidPoint = function(a, b) {
        return a ? null === a.yval ? !1 : null === a.x || void 0 === a.x ? !1 : null === a.y || void 0 === a.y ? !1 : !(isNaN(a.x) || !b && isNaN(a.y)) : !1;
    }, Dygraph.floatFormat = function(a, b) {
        var c = Math.min(Math.max(1, b || 2), 21);
        return Math.abs(a) < .001 && 0 !== a ? a.toExponential(c - 1) : a.toPrecision(c);
    }, Dygraph.zeropad = function(a) {
        return 10 > a ? "0" + a : "" + a;
    }, Dygraph.DateAccessorsLocal = {
        getFullYear: function(a) {
            return a.getFullYear();
        },
        getMonth: function(a) {
            return a.getMonth();
        },
        getDate: function(a) {
            return a.getDate();
        },
        getHours: function(a) {
            return a.getHours();
        },
        getMinutes: function(a) {
            return a.getMinutes();
        },
        getSeconds: function(a) {
            return a.getSeconds();
        },
        getMilliseconds: function(a) {
            return a.getMilliseconds();
        },
        getDay: function(a) {
            return a.getDay();
        },
        makeDate: function(a, b, c, d, e, f, g) {
            return new Date(a, b, c, d, e, f, g);
        }
    }, Dygraph.DateAccessorsUTC = {
        getFullYear: function(a) {
            return a.getUTCFullYear();
        },
        getMonth: function(a) {
            return a.getUTCMonth();
        },
        getDate: function(a) {
            return a.getUTCDate();
        },
        getHours: function(a) {
            return a.getUTCHours();
        },
        getMinutes: function(a) {
            return a.getUTCMinutes();
        },
        getSeconds: function(a) {
            return a.getUTCSeconds();
        },
        getMilliseconds: function(a) {
            return a.getUTCMilliseconds();
        },
        getDay: function(a) {
            return a.getUTCDay();
        },
        makeDate: function(a, b, c, d, e, f, g) {
            return new Date(Date.UTC(a, b, c, d, e, f, g));
        }
    }, Dygraph.hmsString_ = function(a, b, c) {
        var d = Dygraph.zeropad, e = d(a) + ":" + d(b);
        return c && (e += ":" + d(c)), e;
    }, Dygraph.dateString_ = function(a, b) {
        var c = Dygraph.zeropad, d = b ? Dygraph.DateAccessorsUTC : Dygraph.DateAccessorsLocal, e = new Date(a), f = d.getFullYear(e), g = d.getMonth(e), h = d.getDate(e), i = d.getHours(e), j = d.getMinutes(e), k = d.getSeconds(e), l = "" + f, m = c(g + 1), n = c(h), o = 3600 * i + 60 * j + k, p = l + "/" + m + "/" + n;
        return o && (p += " " + Dygraph.hmsString_(i, j, k)), p;
    }, Dygraph.round_ = function(a, b) {
        var c = Math.pow(10, b);
        return Math.round(a * c) / c;
    }, Dygraph.binarySearch = function(a, b, c, d, e) {
        if ((null === d || void 0 === d || null === e || void 0 === e) && (d = 0, e = b.length - 1), 
        d > e) return -1;
        (null === c || void 0 === c) && (c = 0);
        var f, g = function(a) {
            return a >= 0 && a < b.length;
        }, h = parseInt((d + e) / 2, 10), i = b[h];
        return i == a ? h : i > a ? c > 0 && (f = h - 1, g(f) && b[f] < a) ? h : Dygraph.binarySearch(a, b, c, d, h - 1) : a > i ? 0 > c && (f = h + 1, 
        g(f) && b[f] > a) ? h : Dygraph.binarySearch(a, b, c, h + 1, e) : -1;
    }, Dygraph.dateParser = function(a) {
        var b, c;
        if ((-1 == a.search("-") || -1 != a.search("T") || -1 != a.search("Z")) && (c = Dygraph.dateStrToMillis(a), 
        c && !isNaN(c))) return c;
        if (-1 != a.search("-")) {
            for (b = a.replace("-", "/", "g"); -1 != b.search("-"); ) b = b.replace("-", "/");
            c = Dygraph.dateStrToMillis(b);
        } else 8 == a.length ? (b = a.substr(0, 4) + "/" + a.substr(4, 2) + "/" + a.substr(6, 2), 
        c = Dygraph.dateStrToMillis(b)) : c = Dygraph.dateStrToMillis(a);
        return (!c || isNaN(c)) && console.error("Couldn't parse " + a + " as a date"), 
        c;
    }, Dygraph.dateStrToMillis = function(a) {
        return new Date(a).getTime();
    }, Dygraph.update = function(a, b) {
        if ("undefined" != typeof b && null !== b) for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
        return a;
    }, Dygraph.updateDeep = function(a, b) {
        function c(a) {
            return "object" == typeof Node ? a instanceof Node : "object" == typeof a && "number" == typeof a.nodeType && "string" == typeof a.nodeName;
        }
        if ("undefined" != typeof b && null !== b) for (var d in b) b.hasOwnProperty(d) && (null === b[d] ? a[d] = null : Dygraph.isArrayLike(b[d]) ? a[d] = b[d].slice() : c(b[d]) ? a[d] = b[d] : "object" == typeof b[d] ? (("object" != typeof a[d] || null === a[d]) && (a[d] = {}), 
        Dygraph.updateDeep(a[d], b[d])) : a[d] = b[d]);
        return a;
    }, Dygraph.isArrayLike = function(a) {
        var b = typeof a;
        return ("object" == b || "function" == b && "function" == typeof a.item) && null !== a && "number" == typeof a.length && 3 !== a.nodeType;
    }, Dygraph.isDateLike = function(a) {
        return "object" == typeof a && null !== a && "function" == typeof a.getTime;
    }, Dygraph.clone = function(a) {
        for (var b = [], c = 0; c < a.length; c++) b.push(Dygraph.isArrayLike(a[c]) ? Dygraph.clone(a[c]) : a[c]);
        return b;
    }, Dygraph.createCanvas = function() {
        var a = document.createElement("canvas"), b = /MSIE/.test(navigator.userAgent) && !window.opera;
        return b && "undefined" != typeof G_vmlCanvasManager && (a = G_vmlCanvasManager.initElement(a)), 
        a;
    }, Dygraph.getContextPixelRatio = function(a) {
        try {
            var b = window.devicePixelRatio, c = a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1;
            return void 0 !== b ? b / c : 1;
        } catch (d) {
            return 1;
        }
    }, Dygraph.isAndroid = function() {
        return /Android/.test(navigator.userAgent);
    }, Dygraph.Iterator = function(a, b, c, d) {
        b = b || 0, c = c || a.length, this.hasNext = !0, this.peek = null, this.start_ = b, 
        this.array_ = a, this.predicate_ = d, this.end_ = Math.min(a.length, b + c), this.nextIdx_ = b - 1, 
        this.next();
    }, Dygraph.Iterator.prototype.next = function() {
        if (!this.hasNext) return null;
        for (var a = this.peek, b = this.nextIdx_ + 1, c = !1; b < this.end_; ) {
            if (!this.predicate_ || this.predicate_(this.array_, b)) {
                this.peek = this.array_[b], c = !0;
                break;
            }
            b++;
        }
        return this.nextIdx_ = b, c || (this.hasNext = !1, this.peek = null), a;
    }, Dygraph.createIterator = function(a, b, c, d) {
        return new Dygraph.Iterator(a, b, c, d);
    }, Dygraph.requestAnimFrame = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
            window.setTimeout(a, 1e3 / 60);
        };
    }(), Dygraph.repeatAndCleanup = function(a, b, c, d) {
        var e, f = 0, g = new Date().getTime();
        if (a(f), 1 == b) return void d();
        var h = b - 1;
        !function i() {
            f >= b || Dygraph.requestAnimFrame.call(window, function() {
                var b = new Date().getTime(), j = b - g;
                e = f, f = Math.floor(j / c);
                var k = f - e, l = f + k > h;
                l || f >= h ? (a(h), d()) : (0 !== k && a(f), i());
            });
        }();
    };
    var b = {
        annotationClickHandler: !0,
        annotationDblClickHandler: !0,
        annotationMouseOutHandler: !0,
        annotationMouseOverHandler: !0,
        axisLabelColor: !0,
        axisLineColor: !0,
        axisLineWidth: !0,
        clickCallback: !0,
        drawCallback: !0,
        drawHighlightPointCallback: !0,
        drawPoints: !0,
        drawPointCallback: !0,
        drawXGrid: !0,
        drawYGrid: !0,
        fillAlpha: !0,
        gridLineColor: !0,
        gridLineWidth: !0,
        hideOverlayOnMouseOut: !0,
        highlightCallback: !0,
        highlightCircleSize: !0,
        interactionModel: !0,
        isZoomedIgnoreProgrammaticZoom: !0,
        labelsDiv: !0,
        labelsDivStyles: !0,
        labelsDivWidth: !0,
        labelsKMB: !0,
        labelsKMG2: !0,
        labelsSeparateLines: !0,
        labelsShowZeroValues: !0,
        legend: !0,
        panEdgeFraction: !0,
        pixelsPerYLabel: !0,
        pointClickCallback: !0,
        pointSize: !0,
        rangeSelectorPlotFillColor: !0,
        rangeSelectorPlotStrokeColor: !0,
        showLabelsOnHighlight: !0,
        showRoller: !0,
        strokeWidth: !0,
        underlayCallback: !0,
        unhighlightCallback: !0,
        zoomCallback: !0
    };
    Dygraph.isPixelChangingOptionList = function(a, c) {
        var d = {};
        if (a) for (var e = 1; e < a.length; e++) d[a[e]] = !0;
        var f = function(a) {
            for (var c in a) if (a.hasOwnProperty(c) && !b[c]) return !0;
            return !1;
        };
        for (var g in c) if (c.hasOwnProperty(g)) if ("highlightSeriesOpts" == g || d[g] && !c.series) {
            if (f(c[g])) return !0;
        } else if ("series" == g || "axes" == g) {
            var h = c[g];
            for (var i in h) if (h.hasOwnProperty(i) && f(h[i])) return !0;
        } else if (!b[g]) return !0;
        return !1;
    }, Dygraph.Circles = {
        DEFAULT: function(a, b, c, d, e, f, g) {
            c.beginPath(), c.fillStyle = f, c.arc(d, e, g, 0, 2 * Math.PI, !1), c.fill();
        }
    }, Dygraph.IFrameTarp = function() {
        this.tarps = [];
    }, Dygraph.IFrameTarp.prototype.cover = function() {
        for (var a = document.getElementsByTagName("iframe"), b = 0; b < a.length; b++) {
            var c = a[b], d = Dygraph.findPos(c), e = d.x, f = d.y, g = c.offsetWidth, h = c.offsetHeight, i = document.createElement("div");
            i.style.position = "absolute", i.style.left = e + "px", i.style.top = f + "px", 
            i.style.width = g + "px", i.style.height = h + "px", i.style.zIndex = 999, document.body.appendChild(i), 
            this.tarps.push(i);
        }
    }, Dygraph.IFrameTarp.prototype.uncover = function() {
        for (var a = 0; a < this.tarps.length; a++) this.tarps[a].parentNode.removeChild(this.tarps[a]);
        this.tarps = [];
    }, Dygraph.detectLineDelimiter = function(a) {
        for (var b = 0; b < a.length; b++) {
            var c = a.charAt(b);
            if ("\r" === c) return b + 1 < a.length && "\n" === a.charAt(b + 1) ? "\r\n" : c;
            if ("\n" === c) return b + 1 < a.length && "\r" === a.charAt(b + 1) ? "\n\r" : c;
        }
        return null;
    }, Dygraph.isNodeContainedBy = function(a, b) {
        if (null === b || null === a) return !1;
        for (var c = a; c && c !== b; ) c = c.parentNode;
        return c === b;
    }, Dygraph.pow = function(a, b) {
        return 0 > b ? 1 / Math.pow(a, -b) : Math.pow(a, b);
    };
    var c = /^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;
    Dygraph.toRGB_ = function(b) {
        var c = a(b);
        if (c) return c;
        var d = document.createElement("div");
        d.style.backgroundColor = b, d.style.visibility = "hidden", document.body.appendChild(d);
        var e;
        return e = window.getComputedStyle ? window.getComputedStyle(d, null).backgroundColor : d.currentStyle.backgroundColor, 
        document.body.removeChild(d), a(e);
    }, Dygraph.isCanvasSupported = function(a) {
        var b;
        try {
            b = a || document.createElement("canvas"), b.getContext("2d");
        } catch (c) {
            var d = navigator.appVersion.match(/MSIE (\d\.\d)/), e = -1 != navigator.userAgent.toLowerCase().indexOf("opera");
            return !(!d || d[1] < 6 || e);
        }
        return !0;
    }, Dygraph.parseFloat_ = function(a, b, c) {
        var d = parseFloat(a);
        if (!isNaN(d)) return d;
        if (/^ *$/.test(a)) return null;
        if (/^ *nan *$/i.test(a)) return NaN;
        var e = "Unable to parse '" + a + "' as a number";
        return void 0 !== c && void 0 !== b && (e += " on line " + (1 + (b || 0)) + " ('" + c + "') of CSV."), 
        console.error(e), null;
    };
}(), function() {
    "use strict";
    Dygraph.GVizChart = function(a) {
        this.container = a;
    }, Dygraph.GVizChart.prototype.draw = function(a, b) {
        this.container.innerHTML = "", "undefined" != typeof this.date_graph && this.date_graph.destroy(), 
        this.date_graph = new Dygraph(this.container, a, b);
    }, Dygraph.GVizChart.prototype.setSelection = function(a) {
        var b = !1;
        a.length && (b = a[0].row), this.date_graph.setSelection(b);
    }, Dygraph.GVizChart.prototype.getSelection = function() {
        var a = [], b = this.date_graph.getSelection();
        if (0 > b) return a;
        for (var c = this.date_graph.layout_.points, d = 0; d < c.length; ++d) a.push({
            row: b,
            column: d + 1
        });
        return a;
    };
}(), function() {
    "use strict";
    var a = 100;
    Dygraph.Interaction = {}, Dygraph.Interaction.maybeTreatMouseOpAsClick = function(a, b, c) {
        c.dragEndX = Dygraph.dragGetX_(a, c), c.dragEndY = Dygraph.dragGetY_(a, c);
        var d = Math.abs(c.dragEndX - c.dragStartX), e = Math.abs(c.dragEndY - c.dragStartY);
        2 > d && 2 > e && void 0 !== b.lastx_ && -1 != b.lastx_ && Dygraph.Interaction.treatMouseOpAsClick(b, a, c), 
        c.regionWidth = d, c.regionHeight = e;
    }, Dygraph.Interaction.startPan = function(a, b, c) {
        var d, e;
        c.isPanning = !0;
        var f = b.xAxisRange();
        if (b.getOptionForAxis("logscale", "x") ? (c.initialLeftmostDate = Dygraph.log10(f[0]), 
        c.dateRange = Dygraph.log10(f[1]) - Dygraph.log10(f[0])) : (c.initialLeftmostDate = f[0], 
        c.dateRange = f[1] - f[0]), c.xUnitsPerPixel = c.dateRange / (b.plotter_.area.w - 1), 
        b.getNumericOption("panEdgeFraction")) {
            var g = b.width_ * b.getNumericOption("panEdgeFraction"), h = b.xAxisExtremes(), i = b.toDomXCoord(h[0]) - g, j = b.toDomXCoord(h[1]) + g, k = b.toDataXCoord(i), l = b.toDataXCoord(j);
            c.boundedDates = [ k, l ];
            var m = [], n = b.height_ * b.getNumericOption("panEdgeFraction");
            for (d = 0; d < b.axes_.length; d++) {
                e = b.axes_[d];
                var o = e.extremeRange, p = b.toDomYCoord(o[0], d) + n, q = b.toDomYCoord(o[1], d) - n, r = b.toDataYCoord(p, d), s = b.toDataYCoord(q, d);
                m[d] = [ r, s ];
            }
            c.boundedValues = m;
        }
        for (c.is2DPan = !1, c.axes = [], d = 0; d < b.axes_.length; d++) {
            e = b.axes_[d];
            var t = {}, u = b.yAxisRange(d), v = b.attributes_.getForAxis("logscale", d);
            v ? (t.initialTopValue = Dygraph.log10(u[1]), t.dragValueRange = Dygraph.log10(u[1]) - Dygraph.log10(u[0])) : (t.initialTopValue = u[1], 
            t.dragValueRange = u[1] - u[0]), t.unitsPerPixel = t.dragValueRange / (b.plotter_.area.h - 1), 
            c.axes.push(t), (e.valueWindow || e.valueRange) && (c.is2DPan = !0);
        }
    }, Dygraph.Interaction.movePan = function(a, b, c) {
        c.dragEndX = Dygraph.dragGetX_(a, c), c.dragEndY = Dygraph.dragGetY_(a, c);
        var d = c.initialLeftmostDate - (c.dragEndX - c.dragStartX) * c.xUnitsPerPixel;
        c.boundedDates && (d = Math.max(d, c.boundedDates[0]));
        var e = d + c.dateRange;
        if (c.boundedDates && e > c.boundedDates[1] && (d -= e - c.boundedDates[1], e = d + c.dateRange), 
        b.getOptionForAxis("logscale", "x") ? b.dateWindow_ = [ Math.pow(Dygraph.LOG_SCALE, d), Math.pow(Dygraph.LOG_SCALE, e) ] : b.dateWindow_ = [ d, e ], 
        c.is2DPan) for (var f = c.dragEndY - c.dragStartY, g = 0; g < b.axes_.length; g++) {
            var h = b.axes_[g], i = c.axes[g], j = f * i.unitsPerPixel, k = c.boundedValues ? c.boundedValues[g] : null, l = i.initialTopValue + j;
            k && (l = Math.min(l, k[1]));
            var m = l - i.dragValueRange;
            k && m < k[0] && (l -= m - k[0], m = l - i.dragValueRange), b.attributes_.getForAxis("logscale", g) ? h.valueWindow = [ Math.pow(Dygraph.LOG_SCALE, m), Math.pow(Dygraph.LOG_SCALE, l) ] : h.valueWindow = [ m, l ];
        }
        b.drawGraph_(!1);
    }, Dygraph.Interaction.endPan = Dygraph.Interaction.maybeTreatMouseOpAsClick, Dygraph.Interaction.startZoom = function(a, b, c) {
        c.isZooming = !0, c.zoomMoved = !1;
    }, Dygraph.Interaction.moveZoom = function(a, b, c) {
        c.zoomMoved = !0, c.dragEndX = Dygraph.dragGetX_(a, c), c.dragEndY = Dygraph.dragGetY_(a, c);
        var d = Math.abs(c.dragStartX - c.dragEndX), e = Math.abs(c.dragStartY - c.dragEndY);
        c.dragDirection = e / 2 > d ? Dygraph.VERTICAL : Dygraph.HORIZONTAL, b.drawZoomRect_(c.dragDirection, c.dragStartX, c.dragEndX, c.dragStartY, c.dragEndY, c.prevDragDirection, c.prevEndX, c.prevEndY), 
        c.prevEndX = c.dragEndX, c.prevEndY = c.dragEndY, c.prevDragDirection = c.dragDirection;
    }, Dygraph.Interaction.treatMouseOpAsClick = function(a, b, c) {
        for (var d = a.getFunctionOption("clickCallback"), e = a.getFunctionOption("pointClickCallback"), f = null, g = -1, h = Number.MAX_VALUE, i = 0; i < a.selPoints_.length; i++) {
            var j = a.selPoints_[i], k = Math.pow(j.canvasx - c.dragEndX, 2) + Math.pow(j.canvasy - c.dragEndY, 2);
            !isNaN(k) && (-1 == g || h > k) && (h = k, g = i);
        }
        var l = a.getNumericOption("highlightCircleSize") + 2;
        if (l * l >= h && (f = a.selPoints_[g]), f) {
            var m = {
                cancelable: !0,
                point: f,
                canvasx: c.dragEndX,
                canvasy: c.dragEndY
            }, n = a.cascadeEvents_("pointClick", m);
            if (n) return;
            e && e.call(a, b, f);
        }
        var m = {
            cancelable: !0,
            xval: a.lastx_,
            pts: a.selPoints_,
            canvasx: c.dragEndX,
            canvasy: c.dragEndY
        };
        a.cascadeEvents_("click", m) || d && d.call(a, b, a.lastx_, a.selPoints_);
    }, Dygraph.Interaction.endZoom = function(a, b, c) {
        b.clearZoomRect_(), c.isZooming = !1, Dygraph.Interaction.maybeTreatMouseOpAsClick(a, b, c);
        var d = b.getArea();
        if (c.regionWidth >= 10 && c.dragDirection == Dygraph.HORIZONTAL) {
            var e = Math.min(c.dragStartX, c.dragEndX), f = Math.max(c.dragStartX, c.dragEndX);
            e = Math.max(e, d.x), f = Math.min(f, d.x + d.w), f > e && b.doZoomX_(e, f), c.cancelNextDblclick = !0;
        } else if (c.regionHeight >= 10 && c.dragDirection == Dygraph.VERTICAL) {
            var g = Math.min(c.dragStartY, c.dragEndY), h = Math.max(c.dragStartY, c.dragEndY);
            g = Math.max(g, d.y), h = Math.min(h, d.y + d.h), h > g && b.doZoomY_(g, h), c.cancelNextDblclick = !0;
        }
        c.dragStartX = null, c.dragStartY = null;
    }, Dygraph.Interaction.startTouch = function(a, b, c) {
        a.preventDefault(), a.touches.length > 1 && (c.startTimeForDoubleTapMs = null);
        for (var d = [], e = 0; e < a.touches.length; e++) {
            var f = a.touches[e];
            d.push({
                pageX: f.pageX,
                pageY: f.pageY,
                dataX: b.toDataXCoord(f.pageX),
                dataY: b.toDataYCoord(f.pageY)
            });
        }
        if (c.initialTouches = d, 1 == d.length) c.initialPinchCenter = d[0], c.touchDirections = {
            x: !0,
            y: !0
        }; else if (d.length >= 2) {
            c.initialPinchCenter = {
                pageX: .5 * (d[0].pageX + d[1].pageX),
                pageY: .5 * (d[0].pageY + d[1].pageY),
                dataX: .5 * (d[0].dataX + d[1].dataX),
                dataY: .5 * (d[0].dataY + d[1].dataY)
            };
            var g = 180 / Math.PI * Math.atan2(c.initialPinchCenter.pageY - d[0].pageY, d[0].pageX - c.initialPinchCenter.pageX);
            g = Math.abs(g), g > 90 && (g = 90 - g), c.touchDirections = {
                x: 67.5 > g,
                y: g > 22.5
            };
        }
        c.initialRange = {
            x: b.xAxisRange(),
            y: b.yAxisRange()
        };
    }, Dygraph.Interaction.moveTouch = function(a, b, c) {
        c.startTimeForDoubleTapMs = null;
        var d, e = [];
        for (d = 0; d < a.touches.length; d++) {
            var f = a.touches[d];
            e.push({
                pageX: f.pageX,
                pageY: f.pageY
            });
        }
        var g, h = c.initialTouches, i = c.initialPinchCenter;
        g = 1 == e.length ? e[0] : {
            pageX: .5 * (e[0].pageX + e[1].pageX),
            pageY: .5 * (e[0].pageY + e[1].pageY)
        };
        var j = {
            pageX: g.pageX - i.pageX,
            pageY: g.pageY - i.pageY
        }, k = c.initialRange.x[1] - c.initialRange.x[0], l = c.initialRange.y[0] - c.initialRange.y[1];
        j.dataX = j.pageX / b.plotter_.area.w * k, j.dataY = j.pageY / b.plotter_.area.h * l;
        var m, n;
        if (1 == e.length) m = 1, n = 1; else if (e.length >= 2) {
            var o = h[1].pageX - i.pageX;
            m = (e[1].pageX - g.pageX) / o;
            var p = h[1].pageY - i.pageY;
            n = (e[1].pageY - g.pageY) / p;
        }
        m = Math.min(8, Math.max(.125, m)), n = Math.min(8, Math.max(.125, n));
        var q = !1;
        if (c.touchDirections.x && (b.dateWindow_ = [ i.dataX - j.dataX + (c.initialRange.x[0] - i.dataX) / m, i.dataX - j.dataX + (c.initialRange.x[1] - i.dataX) / m ], 
        q = !0), c.touchDirections.y) for (d = 0; 1 > d; d++) {
            var r = b.axes_[d], s = b.attributes_.getForAxis("logscale", d);
            s || (r.valueWindow = [ i.dataY - j.dataY + (c.initialRange.y[0] - i.dataY) / n, i.dataY - j.dataY + (c.initialRange.y[1] - i.dataY) / n ], 
            q = !0);
        }
        if (b.drawGraph_(!1), q && e.length > 1 && b.getFunctionOption("zoomCallback")) {
            var t = b.xAxisRange();
            b.getFunctionOption("zoomCallback").call(b, t[0], t[1], b.yAxisRanges());
        }
    }, Dygraph.Interaction.endTouch = function(a, b, c) {
        if (0 !== a.touches.length) Dygraph.Interaction.startTouch(a, b, c); else if (1 == a.changedTouches.length) {
            var d = new Date().getTime(), e = a.changedTouches[0];
            c.startTimeForDoubleTapMs && d - c.startTimeForDoubleTapMs < 500 && c.doubleTapX && Math.abs(c.doubleTapX - e.screenX) < 50 && c.doubleTapY && Math.abs(c.doubleTapY - e.screenY) < 50 ? b.resetZoom() : (c.startTimeForDoubleTapMs = d, 
            c.doubleTapX = e.screenX, c.doubleTapY = e.screenY);
        }
    };
    var b = function(a, b, c) {
        return b > a ? b - a : a > c ? a - c : 0;
    }, c = function(a, c) {
        var d = Dygraph.findPos(c.canvas_), e = {
            left: d.x,
            right: d.x + c.canvas_.offsetWidth,
            top: d.y,
            bottom: d.y + c.canvas_.offsetHeight
        }, f = {
            x: Dygraph.pageX(a),
            y: Dygraph.pageY(a)
        }, g = b(f.x, e.left, e.right), h = b(f.y, e.top, e.bottom);
        return Math.max(g, h);
    };
    Dygraph.Interaction.defaultModel = {
        mousedown: function(b, d, e) {
            if (!b.button || 2 != b.button) {
                e.initializeMouseDown(b, d, e), b.altKey || b.shiftKey ? Dygraph.startPan(b, d, e) : Dygraph.startZoom(b, d, e);
                var f = function(b) {
                    if (e.isZooming) {
                        var f = c(b, d);
                        a > f ? Dygraph.moveZoom(b, d, e) : null !== e.dragEndX && (e.dragEndX = null, e.dragEndY = null, 
                        d.clearZoomRect_());
                    } else e.isPanning && Dygraph.movePan(b, d, e);
                }, g = function(a) {
                    e.isZooming ? null !== e.dragEndX ? Dygraph.endZoom(a, d, e) : Dygraph.Interaction.maybeTreatMouseOpAsClick(a, d, e) : e.isPanning && Dygraph.endPan(a, d, e), 
                    Dygraph.removeEvent(document, "mousemove", f), Dygraph.removeEvent(document, "mouseup", g), 
                    e.destroy();
                };
                d.addAndTrackEvent(document, "mousemove", f), d.addAndTrackEvent(document, "mouseup", g);
            }
        },
        willDestroyContextMyself: !0,
        touchstart: function(a, b, c) {
            Dygraph.Interaction.startTouch(a, b, c);
        },
        touchmove: function(a, b, c) {
            Dygraph.Interaction.moveTouch(a, b, c);
        },
        touchend: function(a, b, c) {
            Dygraph.Interaction.endTouch(a, b, c);
        },
        dblclick: function(a, b, c) {
            if (c.cancelNextDblclick) return void (c.cancelNextDblclick = !1);
            var d = {
                canvasx: c.dragEndX,
                canvasy: c.dragEndY
            };
            b.cascadeEvents_("dblclick", d) || a.altKey || a.shiftKey || b.resetZoom();
        }
    }, Dygraph.DEFAULT_ATTRS.interactionModel = Dygraph.Interaction.defaultModel, Dygraph.defaultInteractionModel = Dygraph.Interaction.defaultModel, 
    Dygraph.endZoom = Dygraph.Interaction.endZoom, Dygraph.moveZoom = Dygraph.Interaction.moveZoom, 
    Dygraph.startZoom = Dygraph.Interaction.startZoom, Dygraph.endPan = Dygraph.Interaction.endPan, 
    Dygraph.movePan = Dygraph.Interaction.movePan, Dygraph.startPan = Dygraph.Interaction.startPan, 
    Dygraph.Interaction.nonInteractiveModel_ = {
        mousedown: function(a, b, c) {
            c.initializeMouseDown(a, b, c);
        },
        mouseup: Dygraph.Interaction.maybeTreatMouseOpAsClick
    }, Dygraph.Interaction.dragIsPanInteractionModel = {
        mousedown: function(a, b, c) {
            c.initializeMouseDown(a, b, c), Dygraph.startPan(a, b, c);
        },
        mousemove: function(a, b, c) {
            c.isPanning && Dygraph.movePan(a, b, c);
        },
        mouseup: function(a, b, c) {
            c.isPanning && Dygraph.endPan(a, b, c);
        }
    };
}(), function() {
    "use strict";
    Dygraph.TickList = void 0, Dygraph.Ticker = void 0, Dygraph.numericLinearTicks = function(a, b, c, d, e, f) {
        var g = function(a) {
            return "logscale" === a ? !1 : d(a);
        };
        return Dygraph.numericTicks(a, b, c, g, e, f);
    }, Dygraph.numericTicks = function(a, b, c, d, e, f) {
        var g, h, i, j, k = d("pixelsPerLabel"), l = [];
        if (f) for (g = 0; g < f.length; g++) l.push({
            v: f[g]
        }); else {
            if (d("logscale")) {
                j = Math.floor(c / k);
                var m = Dygraph.binarySearch(a, Dygraph.PREFERRED_LOG_TICK_VALUES, 1), n = Dygraph.binarySearch(b, Dygraph.PREFERRED_LOG_TICK_VALUES, -1);
                -1 == m && (m = 0), -1 == n && (n = Dygraph.PREFERRED_LOG_TICK_VALUES.length - 1);
                var o = null;
                if (n - m >= j / 4) {
                    for (var p = n; p >= m; p--) {
                        var q = Dygraph.PREFERRED_LOG_TICK_VALUES[p], r = Math.log(q / a) / Math.log(b / a) * c, s = {
                            v: q
                        };
                        null === o ? o = {
                            tickValue: q,
                            pixel_coord: r
                        } : Math.abs(r - o.pixel_coord) >= k ? o = {
                            tickValue: q,
                            pixel_coord: r
                        } : s.label = "", l.push(s);
                    }
                    l.reverse();
                }
            }
            if (0 === l.length) {
                var t, u, v = d("labelsKMG2");
                v ? (t = [ 1, 2, 4, 8, 16, 32, 64, 128, 256 ], u = 16) : (t = [ 1, 2, 5, 10, 20, 50, 100 ], 
                u = 10);
                var w, x, y, z, A = Math.ceil(c / k), B = Math.abs(b - a) / A, C = Math.floor(Math.log(B) / Math.log(u)), D = Math.pow(u, C);
                for (h = 0; h < t.length && (w = D * t[h], x = Math.floor(a / w) * w, y = Math.ceil(b / w) * w, 
                j = Math.abs(y - x) / w, z = c / j, !(z > k)); h++) ;
                for (x > y && (w *= -1), g = 0; j >= g; g++) i = x + g * w, l.push({
                    v: i
                });
            }
        }
        var E = d("axisLabelFormatter");
        for (g = 0; g < l.length; g++) void 0 === l[g].label && (l[g].label = E.call(e, l[g].v, 0, d, e));
        return l;
    }, Dygraph.dateTicker = function(a, b, c, d, e, f) {
        var g = Dygraph.pickDateTickGranularity(a, b, c, d);
        return g >= 0 ? Dygraph.getDateAxis(a, b, g, d, e) : [];
    }, Dygraph.SECONDLY = 0, Dygraph.TWO_SECONDLY = 1, Dygraph.FIVE_SECONDLY = 2, Dygraph.TEN_SECONDLY = 3, 
    Dygraph.THIRTY_SECONDLY = 4, Dygraph.MINUTELY = 5, Dygraph.TWO_MINUTELY = 6, Dygraph.FIVE_MINUTELY = 7, 
    Dygraph.TEN_MINUTELY = 8, Dygraph.THIRTY_MINUTELY = 9, Dygraph.HOURLY = 10, Dygraph.TWO_HOURLY = 11, 
    Dygraph.SIX_HOURLY = 12, Dygraph.DAILY = 13, Dygraph.TWO_DAILY = 14, Dygraph.WEEKLY = 15, 
    Dygraph.MONTHLY = 16, Dygraph.QUARTERLY = 17, Dygraph.BIANNUAL = 18, Dygraph.ANNUAL = 19, 
    Dygraph.DECADAL = 20, Dygraph.CENTENNIAL = 21, Dygraph.NUM_GRANULARITIES = 22, Dygraph.DATEFIELD_Y = 0, 
    Dygraph.DATEFIELD_M = 1, Dygraph.DATEFIELD_D = 2, Dygraph.DATEFIELD_HH = 3, Dygraph.DATEFIELD_MM = 4, 
    Dygraph.DATEFIELD_SS = 5, Dygraph.DATEFIELD_MS = 6, Dygraph.NUM_DATEFIELDS = 7, 
    Dygraph.TICK_PLACEMENT = [], Dygraph.TICK_PLACEMENT[Dygraph.SECONDLY] = {
        datefield: Dygraph.DATEFIELD_SS,
        step: 1,
        spacing: 1e3
    }, Dygraph.TICK_PLACEMENT[Dygraph.TWO_SECONDLY] = {
        datefield: Dygraph.DATEFIELD_SS,
        step: 2,
        spacing: 2e3
    }, Dygraph.TICK_PLACEMENT[Dygraph.FIVE_SECONDLY] = {
        datefield: Dygraph.DATEFIELD_SS,
        step: 5,
        spacing: 5e3
    }, Dygraph.TICK_PLACEMENT[Dygraph.TEN_SECONDLY] = {
        datefield: Dygraph.DATEFIELD_SS,
        step: 10,
        spacing: 1e4
    }, Dygraph.TICK_PLACEMENT[Dygraph.THIRTY_SECONDLY] = {
        datefield: Dygraph.DATEFIELD_SS,
        step: 30,
        spacing: 3e4
    }, Dygraph.TICK_PLACEMENT[Dygraph.MINUTELY] = {
        datefield: Dygraph.DATEFIELD_MM,
        step: 1,
        spacing: 6e4
    }, Dygraph.TICK_PLACEMENT[Dygraph.TWO_MINUTELY] = {
        datefield: Dygraph.DATEFIELD_MM,
        step: 2,
        spacing: 12e4
    }, Dygraph.TICK_PLACEMENT[Dygraph.FIVE_MINUTELY] = {
        datefield: Dygraph.DATEFIELD_MM,
        step: 5,
        spacing: 3e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.TEN_MINUTELY] = {
        datefield: Dygraph.DATEFIELD_MM,
        step: 10,
        spacing: 6e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.THIRTY_MINUTELY] = {
        datefield: Dygraph.DATEFIELD_MM,
        step: 30,
        spacing: 18e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.HOURLY] = {
        datefield: Dygraph.DATEFIELD_HH,
        step: 1,
        spacing: 36e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.TWO_HOURLY] = {
        datefield: Dygraph.DATEFIELD_HH,
        step: 2,
        spacing: 72e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.SIX_HOURLY] = {
        datefield: Dygraph.DATEFIELD_HH,
        step: 6,
        spacing: 216e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.DAILY] = {
        datefield: Dygraph.DATEFIELD_D,
        step: 1,
        spacing: 864e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.TWO_DAILY] = {
        datefield: Dygraph.DATEFIELD_D,
        step: 2,
        spacing: 1728e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.WEEKLY] = {
        datefield: Dygraph.DATEFIELD_D,
        step: 7,
        spacing: 6048e5
    }, Dygraph.TICK_PLACEMENT[Dygraph.MONTHLY] = {
        datefield: Dygraph.DATEFIELD_M,
        step: 1,
        spacing: 2629817280
    }, Dygraph.TICK_PLACEMENT[Dygraph.QUARTERLY] = {
        datefield: Dygraph.DATEFIELD_M,
        step: 3,
        spacing: 216e5 * 365.2524
    }, Dygraph.TICK_PLACEMENT[Dygraph.BIANNUAL] = {
        datefield: Dygraph.DATEFIELD_M,
        step: 6,
        spacing: 432e5 * 365.2524
    }, Dygraph.TICK_PLACEMENT[Dygraph.ANNUAL] = {
        datefield: Dygraph.DATEFIELD_Y,
        step: 1,
        spacing: 864e5 * 365.2524
    }, Dygraph.TICK_PLACEMENT[Dygraph.DECADAL] = {
        datefield: Dygraph.DATEFIELD_Y,
        step: 10,
        spacing: 315578073600
    }, Dygraph.TICK_PLACEMENT[Dygraph.CENTENNIAL] = {
        datefield: Dygraph.DATEFIELD_Y,
        step: 100,
        spacing: 3155780736e3
    }, Dygraph.PREFERRED_LOG_TICK_VALUES = function() {
        for (var a = [], b = -39; 39 >= b; b++) for (var c = Math.pow(10, b), d = 1; 9 >= d; d++) {
            var e = c * d;
            a.push(e);
        }
        return a;
    }(), Dygraph.pickDateTickGranularity = function(a, b, c, d) {
        for (var e = d("pixelsPerLabel"), f = 0; f < Dygraph.NUM_GRANULARITIES; f++) {
            var g = Dygraph.numDateTicks(a, b, f);
            if (c / g >= e) return f;
        }
        return -1;
    }, Dygraph.numDateTicks = function(a, b, c) {
        var d = Dygraph.TICK_PLACEMENT[c].spacing;
        return Math.round(1 * (b - a) / d);
    }, Dygraph.getDateAxis = function(a, b, c, d, e) {
        var f = d("axisLabelFormatter"), g = d("labelsUTC"), h = g ? Dygraph.DateAccessorsUTC : Dygraph.DateAccessorsLocal, i = Dygraph.TICK_PLACEMENT[c].datefield, j = Dygraph.TICK_PLACEMENT[c].step, k = Dygraph.TICK_PLACEMENT[c].spacing, l = new Date(a), m = [];
        m[Dygraph.DATEFIELD_Y] = h.getFullYear(l), m[Dygraph.DATEFIELD_M] = h.getMonth(l), 
        m[Dygraph.DATEFIELD_D] = h.getDate(l), m[Dygraph.DATEFIELD_HH] = h.getHours(l), 
        m[Dygraph.DATEFIELD_MM] = h.getMinutes(l), m[Dygraph.DATEFIELD_SS] = h.getSeconds(l), 
        m[Dygraph.DATEFIELD_MS] = h.getMilliseconds(l);
        var n = m[i] % j;
        c == Dygraph.WEEKLY && (n = h.getDay(l)), m[i] -= n;
        for (var o = i + 1; o < Dygraph.NUM_DATEFIELDS; o++) m[o] = o === Dygraph.DATEFIELD_D ? 1 : 0;
        var p = [], q = h.makeDate.apply(null, m), r = q.getTime();
        if (c <= Dygraph.HOURLY) for (a > r && (r += k, q = new Date(r)); b >= r; ) p.push({
            v: r,
            label: f.call(e, q, c, d, e)
        }), r += k, q = new Date(r); else for (a > r && (m[i] += j, q = h.makeDate.apply(null, m), 
        r = q.getTime()); b >= r; ) (c >= Dygraph.DAILY || h.getHours(q) % j === 0) && p.push({
            v: r,
            label: f.call(e, q, c, d, e)
        }), m[i] += j, q = h.makeDate.apply(null, m), r = q.getTime();
        return p;
    }, Dygraph && Dygraph.DEFAULT_ATTRS && Dygraph.DEFAULT_ATTRS.axes && Dygraph.DEFAULT_ATTRS.axes.x && Dygraph.DEFAULT_ATTRS.axes.y && Dygraph.DEFAULT_ATTRS.axes.y2 && (Dygraph.DEFAULT_ATTRS.axes.x.ticker = Dygraph.dateTicker, 
    Dygraph.DEFAULT_ATTRS.axes.y.ticker = Dygraph.numericTicks, Dygraph.DEFAULT_ATTRS.axes.y2.ticker = Dygraph.numericTicks);
}(), Dygraph.Plugins = {}, Dygraph.Plugins.Annotations = function() {
    "use strict";
    var a = function() {
        this.annotations_ = [];
    };
    return a.prototype.toString = function() {
        return "Annotations Plugin";
    }, a.prototype.activate = function(a) {
        return {
            clearChart: this.clearChart,
            didDrawChart: this.didDrawChart
        };
    }, a.prototype.detachLabels = function() {
        for (var a = 0; a < this.annotations_.length; a++) {
            var b = this.annotations_[a];
            b.parentNode && b.parentNode.removeChild(b), this.annotations_[a] = null;
        }
        this.annotations_ = [];
    }, a.prototype.clearChart = function(a) {
        this.detachLabels();
    }, a.prototype.didDrawChart = function(a) {
        var b = a.dygraph, c = b.layout_.annotated_points;
        if (c && 0 !== c.length) for (var d = a.canvas.parentNode, e = {
            position: "absolute",
            fontSize: b.getOption("axisLabelFontSize") + "px",
            zIndex: 10,
            overflow: "hidden"
        }, f = function(a, c, d) {
            return function(e) {
                var f = d.annotation;
                f.hasOwnProperty(a) ? f[a](f, d, b, e) : b.getOption(c) && b.getOption(c)(f, d, b, e);
            };
        }, g = a.dygraph.plotter_.area, h = {}, i = 0; i < c.length; i++) {
            var j = c[i];
            if (!(j.canvasx < g.x || j.canvasx > g.x + g.w || j.canvasy < g.y || j.canvasy > g.y + g.h)) {
                var k = j.annotation, l = 6;
                k.hasOwnProperty("tickHeight") && (l = k.tickHeight);
                var m = document.createElement("div");
                for (var n in e) e.hasOwnProperty(n) && (m.style[n] = e[n]);
                k.hasOwnProperty("icon") || (m.className = "dygraphDefaultAnnotation"), k.hasOwnProperty("cssClass") && (m.className += " " + k.cssClass);
                var o = k.hasOwnProperty("width") ? k.width : 16, p = k.hasOwnProperty("height") ? k.height : 16;
                if (k.hasOwnProperty("icon")) {
                    var q = document.createElement("img");
                    q.src = k.icon, q.width = o, q.height = p, m.appendChild(q);
                } else j.annotation.hasOwnProperty("shortText") && m.appendChild(document.createTextNode(j.annotation.shortText));
                var r = j.canvasx - o / 2;
                m.style.left = r + "px";
                var s = 0;
                if (k.attachAtBottom) {
                    var t = g.y + g.h - p - l;
                    h[r] ? t -= h[r] : h[r] = 0, h[r] += l + p, s = t;
                } else s = j.canvasy - p - l;
                m.style.top = s + "px", m.style.width = o + "px", m.style.height = p + "px", m.title = j.annotation.text, 
                m.style.color = b.colorsMap_[j.name], m.style.borderColor = b.colorsMap_[j.name], 
                k.div = m, b.addAndTrackEvent(m, "click", f("clickHandler", "annotationClickHandler", j, this)), 
                b.addAndTrackEvent(m, "mouseover", f("mouseOverHandler", "annotationMouseOverHandler", j, this)), 
                b.addAndTrackEvent(m, "mouseout", f("mouseOutHandler", "annotationMouseOutHandler", j, this)), 
                b.addAndTrackEvent(m, "dblclick", f("dblClickHandler", "annotationDblClickHandler", j, this)), 
                d.appendChild(m), this.annotations_.push(m);
                var u = a.drawingContext;
                if (u.save(), u.strokeStyle = b.colorsMap_[j.name], u.beginPath(), k.attachAtBottom) {
                    var t = s + p;
                    u.moveTo(j.canvasx, t), u.lineTo(j.canvasx, t + l);
                } else u.moveTo(j.canvasx, j.canvasy), u.lineTo(j.canvasx, j.canvasy - 2 - l);
                u.closePath(), u.stroke(), u.restore();
            }
        }
    }, a.prototype.destroy = function() {
        this.detachLabels();
    }, a;
}(), Dygraph.Plugins.Axes = function() {
    "use strict";
    var a = function() {
        this.xlabels_ = [], this.ylabels_ = [];
    };
    return a.prototype.toString = function() {
        return "Axes Plugin";
    }, a.prototype.activate = function(a) {
        return {
            layout: this.layout,
            clearChart: this.clearChart,
            willDrawChart: this.willDrawChart
        };
    }, a.prototype.layout = function(a) {
        var b = a.dygraph;
        if (b.getOptionForAxis("drawAxis", "y")) {
            var c = b.getOptionForAxis("axisLabelWidth", "y") + 2 * b.getOptionForAxis("axisTickSize", "y");
            a.reserveSpaceLeft(c);
        }
        if (b.getOptionForAxis("drawAxis", "x")) {
            var d;
            d = b.getOption("xAxisHeight") ? b.getOption("xAxisHeight") : b.getOptionForAxis("axisLabelFontSize", "x") + 2 * b.getOptionForAxis("axisTickSize", "x"), 
            a.reserveSpaceBottom(d);
        }
        if (2 == b.numAxes()) {
            if (b.getOptionForAxis("drawAxis", "y2")) {
                var c = b.getOptionForAxis("axisLabelWidth", "y2") + 2 * b.getOptionForAxis("axisTickSize", "y2");
                a.reserveSpaceRight(c);
            }
        } else b.numAxes() > 2 && b.error("Only two y-axes are supported at this time. (Trying to use " + b.numAxes() + ")");
    }, a.prototype.detachLabels = function() {
        function a(a) {
            for (var b = 0; b < a.length; b++) {
                var c = a[b];
                c.parentNode && c.parentNode.removeChild(c);
            }
        }
        a(this.xlabels_), a(this.ylabels_), this.xlabels_ = [], this.ylabels_ = [];
    }, a.prototype.clearChart = function(a) {
        this.detachLabels();
    }, a.prototype.willDrawChart = function(a) {
        function b(a) {
            return Math.round(a) + .5;
        }
        function c(a) {
            return Math.round(a) - .5;
        }
        var d = a.dygraph;
        if (d.getOptionForAxis("drawAxis", "x") || d.getOptionForAxis("drawAxis", "y") || d.getOptionForAxis("drawAxis", "y2")) {
            var e, f, g, h, i, j = a.drawingContext, k = a.canvas.parentNode, l = d.width_, m = d.height_, n = function(a) {
                return {
                    position: "absolute",
                    fontSize: d.getOptionForAxis("axisLabelFontSize", a) + "px",
                    zIndex: 10,
                    color: d.getOptionForAxis("axisLabelColor", a),
                    width: d.getOptionForAxis("axisLabelWidth", a) + "px",
                    lineHeight: "normal",
                    overflow: "hidden"
                };
            }, o = {
                x: n("x"),
                y: n("y"),
                y2: n("y2")
            }, p = function(a, b, c) {
                var d = document.createElement("div"), e = o["y2" == c ? "y2" : b];
                for (var f in e) e.hasOwnProperty(f) && (d.style[f] = e[f]);
                var g = document.createElement("div");
                return g.className = "dygraph-axis-label dygraph-axis-label-" + b + (c ? " dygraph-axis-label-" + c : ""), 
                g.innerHTML = a, d.appendChild(g), d;
            };
            j.save();
            var q = d.layout_, r = a.dygraph.plotter_.area, s = function(a) {
                return function(b) {
                    return d.getOptionForAxis(b, a);
                };
            };
            if (d.getOptionForAxis("drawAxis", "y")) {
                if (q.yticks && q.yticks.length > 0) {
                    var t = d.numAxes(), u = [ s("y"), s("y2") ];
                    for (i = 0; i < q.yticks.length; i++) {
                        if (h = q.yticks[i], "function" == typeof h) return;
                        f = r.x;
                        var v = 1, w = "y1", x = u[0];
                        1 == h[0] && (f = r.x + r.w, v = -1, w = "y2", x = u[1]);
                        var y = x("axisLabelFontSize");
                        g = r.y + h[1] * r.h, e = p(h[2], "y", 2 == t ? w : null);
                        var z = g - y / 2;
                        0 > z && (z = 0), z + y + 3 > m ? e.style.bottom = "0" : e.style.top = z + "px", 
                        0 === h[0] ? (e.style.left = r.x - x("axisLabelWidth") - x("axisTickSize") + "px", 
                        e.style.textAlign = "right") : 1 == h[0] && (e.style.left = r.x + r.w + x("axisTickSize") + "px", 
                        e.style.textAlign = "left"), e.style.width = x("axisLabelWidth") + "px", k.appendChild(e), 
                        this.ylabels_.push(e);
                    }
                    var A = this.ylabels_[0], y = d.getOptionForAxis("axisLabelFontSize", "y"), B = parseInt(A.style.top, 10) + y;
                    B > m - y && (A.style.top = parseInt(A.style.top, 10) - y / 2 + "px");
                }
                var C;
                if (d.getOption("drawAxesAtZero")) {
                    var D = d.toPercentXCoord(0);
                    (D > 1 || 0 > D || isNaN(D)) && (D = 0), C = b(r.x + D * r.w);
                } else C = b(r.x);
                j.strokeStyle = d.getOptionForAxis("axisLineColor", "y"), j.lineWidth = d.getOptionForAxis("axisLineWidth", "y"), 
                j.beginPath(), j.moveTo(C, c(r.y)), j.lineTo(C, c(r.y + r.h)), j.closePath(), j.stroke(), 
                2 == d.numAxes() && (j.strokeStyle = d.getOptionForAxis("axisLineColor", "y2"), 
                j.lineWidth = d.getOptionForAxis("axisLineWidth", "y2"), j.beginPath(), j.moveTo(c(r.x + r.w), c(r.y)), 
                j.lineTo(c(r.x + r.w), c(r.y + r.h)), j.closePath(), j.stroke());
            }
            if (d.getOptionForAxis("drawAxis", "x")) {
                if (q.xticks) {
                    var x = s("x");
                    for (i = 0; i < q.xticks.length; i++) {
                        h = q.xticks[i], f = r.x + h[0] * r.w, g = r.y + r.h, e = p(h[1], "x"), e.style.textAlign = "center", 
                        e.style.top = g + x("axisTickSize") + "px";
                        var E = f - x("axisLabelWidth") / 2;
                        E + x("axisLabelWidth") > l && (E = l - x("axisLabelWidth"), e.style.textAlign = "right"), 
                        0 > E && (E = 0, e.style.textAlign = "left"), e.style.left = E + "px", e.style.width = x("axisLabelWidth") + "px", 
                        k.appendChild(e), this.xlabels_.push(e);
                    }
                }
                j.strokeStyle = d.getOptionForAxis("axisLineColor", "x"), j.lineWidth = d.getOptionForAxis("axisLineWidth", "x"), 
                j.beginPath();
                var F;
                if (d.getOption("drawAxesAtZero")) {
                    var D = d.toPercentYCoord(0, 0);
                    (D > 1 || 0 > D) && (D = 1), F = c(r.y + D * r.h);
                } else F = c(r.y + r.h);
                j.moveTo(b(r.x), F), j.lineTo(b(r.x + r.w), F), j.closePath(), j.stroke();
            }
            j.restore();
        }
    }, a;
}(), Dygraph.Plugins.ChartLabels = function() {
    "use strict";
    var a = function() {
        this.title_div_ = null, this.xlabel_div_ = null, this.ylabel_div_ = null, this.y2label_div_ = null;
    };
    a.prototype.toString = function() {
        return "ChartLabels Plugin";
    }, a.prototype.activate = function(a) {
        return {
            layout: this.layout,
            didDrawChart: this.didDrawChart
        };
    };
    var b = function(a) {
        var b = document.createElement("div");
        return b.style.position = "absolute", b.style.left = a.x + "px", b.style.top = a.y + "px", 
        b.style.width = a.w + "px", b.style.height = a.h + "px", b;
    };
    a.prototype.detachLabels_ = function() {
        for (var a = [ this.title_div_, this.xlabel_div_, this.ylabel_div_, this.y2label_div_ ], b = 0; b < a.length; b++) {
            var c = a[b];
            c && c.parentNode && c.parentNode.removeChild(c);
        }
        this.title_div_ = null, this.xlabel_div_ = null, this.ylabel_div_ = null, this.y2label_div_ = null;
    };
    var c = function(a, b, c, d, e) {
        var f = document.createElement("div");
        f.style.position = "absolute", 1 == c ? f.style.left = "0px" : f.style.left = b.x + "px", 
        f.style.top = b.y + "px", f.style.width = b.w + "px", f.style.height = b.h + "px", 
        f.style.fontSize = a.getOption("yLabelWidth") - 2 + "px";
        var g = document.createElement("div");
        g.style.position = "absolute", g.style.width = b.h + "px", g.style.height = b.w + "px", 
        g.style.top = b.h / 2 - b.w / 2 + "px", g.style.left = b.w / 2 - b.h / 2 + "px", 
        g.style.textAlign = "center";
        var h = "rotate(" + (1 == c ? "-" : "") + "90deg)";
        g.style.transform = h, g.style.WebkitTransform = h, g.style.MozTransform = h, g.style.OTransform = h, 
        g.style.msTransform = h, "undefined" != typeof document.documentMode && document.documentMode < 9 && (g.style.filter = "progid:DXImageTransform.Microsoft.BasicImage(rotation=" + (1 == c ? "3" : "1") + ")", 
        g.style.left = "0px", g.style.top = "0px");
        var i = document.createElement("div");
        return i.className = d, i.innerHTML = e, g.appendChild(i), f.appendChild(g), f;
    };
    return a.prototype.layout = function(a) {
        this.detachLabels_();
        var d = a.dygraph, e = a.chart_div;
        if (d.getOption("title")) {
            var f = a.reserveSpaceTop(d.getOption("titleHeight"));
            this.title_div_ = b(f), this.title_div_.style.textAlign = "center", this.title_div_.style.fontSize = d.getOption("titleHeight") - 8 + "px", 
            this.title_div_.style.fontWeight = "bold", this.title_div_.style.zIndex = 10;
            var g = document.createElement("div");
            g.className = "dygraph-label dygraph-title", g.innerHTML = d.getOption("title"), 
            this.title_div_.appendChild(g), e.appendChild(this.title_div_);
        }
        if (d.getOption("xlabel")) {
            var h = a.reserveSpaceBottom(d.getOption("xLabelHeight"));
            this.xlabel_div_ = b(h), this.xlabel_div_.style.textAlign = "center", this.xlabel_div_.style.fontSize = d.getOption("xLabelHeight") - 2 + "px";
            var g = document.createElement("div");
            g.className = "dygraph-label dygraph-xlabel", g.innerHTML = d.getOption("xlabel"), 
            this.xlabel_div_.appendChild(g), e.appendChild(this.xlabel_div_);
        }
        if (d.getOption("ylabel")) {
            var i = a.reserveSpaceLeft(0);
            this.ylabel_div_ = c(d, i, 1, "dygraph-label dygraph-ylabel", d.getOption("ylabel")), 
            e.appendChild(this.ylabel_div_);
        }
        if (d.getOption("y2label") && 2 == d.numAxes()) {
            var j = a.reserveSpaceRight(0);
            this.y2label_div_ = c(d, j, 2, "dygraph-label dygraph-y2label", d.getOption("y2label")), 
            e.appendChild(this.y2label_div_);
        }
    }, a.prototype.didDrawChart = function(a) {
        var b = a.dygraph;
        this.title_div_ && (this.title_div_.children[0].innerHTML = b.getOption("title")), 
        this.xlabel_div_ && (this.xlabel_div_.children[0].innerHTML = b.getOption("xlabel")), 
        this.ylabel_div_ && (this.ylabel_div_.children[0].children[0].innerHTML = b.getOption("ylabel")), 
        this.y2label_div_ && (this.y2label_div_.children[0].children[0].innerHTML = b.getOption("y2label"));
    }, a.prototype.clearChart = function() {}, a.prototype.destroy = function() {
        this.detachLabels_();
    }, a;
}(), Dygraph.Plugins.Grid = function() {
    "use strict";
    var a = function() {};
    return a.prototype.toString = function() {
        return "Gridline Plugin";
    }, a.prototype.activate = function(a) {
        return {
            willDrawChart: this.willDrawChart
        };
    }, a.prototype.willDrawChart = function(a) {
        function b(a) {
            return Math.round(a) + .5;
        }
        function c(a) {
            return Math.round(a) - .5;
        }
        var d, e, f, g, h = a.dygraph, i = a.drawingContext, j = h.layout_, k = a.dygraph.plotter_.area;
        if (h.getOptionForAxis("drawGrid", "y")) {
            for (var l = [ "y", "y2" ], m = [], n = [], o = [], p = [], q = [], f = 0; f < l.length; f++) o[f] = h.getOptionForAxis("drawGrid", l[f]), 
            o[f] && (m[f] = h.getOptionForAxis("gridLineColor", l[f]), n[f] = h.getOptionForAxis("gridLineWidth", l[f]), 
            q[f] = h.getOptionForAxis("gridLinePattern", l[f]), p[f] = q[f] && q[f].length >= 2);
            for (g = j.yticks, i.save(), f = 0; f < g.length; f++) {
                var r = g[f][0];
                o[r] && (p[r] && i.installPattern(q[r]), i.strokeStyle = m[r], i.lineWidth = n[r], 
                d = b(k.x), e = c(k.y + g[f][1] * k.h), i.beginPath(), i.moveTo(d, e), i.lineTo(d + k.w, e), 
                i.closePath(), i.stroke(), p[r] && i.uninstallPattern());
            }
            i.restore();
        }
        if (h.getOptionForAxis("drawGrid", "x")) {
            g = j.xticks, i.save();
            var q = h.getOptionForAxis("gridLinePattern", "x"), p = q && q.length >= 2;
            for (p && i.installPattern(q), i.strokeStyle = h.getOptionForAxis("gridLineColor", "x"), 
            i.lineWidth = h.getOptionForAxis("gridLineWidth", "x"), f = 0; f < g.length; f++) d = b(k.x + g[f][0] * k.w), 
            e = c(k.y + k.h), i.beginPath(), i.moveTo(d, e), i.lineTo(d, k.y), i.closePath(), 
            i.stroke();
            p && i.uninstallPattern(), i.restore();
        }
    }, a.prototype.destroy = function() {}, a;
}(), Dygraph.Plugins.Legend = function() {
    "use strict";
    var a = function() {
        this.legend_div_ = null, this.is_generated_div_ = !1;
    };
    a.prototype.toString = function() {
        return "Legend Plugin";
    };
    var b;
    a.prototype.activate = function(a) {
        var b, c = a.getOption("labelsDivWidth"), d = a.getOption("labelsDiv");
        if (d && null !== d) b = "string" == typeof d || d instanceof String ? document.getElementById(d) : d; else {
            var e = {
                position: "absolute",
                fontSize: "14px",
                zIndex: 10,
                width: c + "px",
                top: "0px",
                left: a.size().width - c - 2 + "px",
                background: "white",
                lineHeight: "normal",
                textAlign: "left",
                overflow: "hidden"
            };
            Dygraph.update(e, a.getOption("labelsDivStyles")), b = document.createElement("div"), 
            b.className = "dygraph-legend";
            for (var f in e) if (e.hasOwnProperty(f)) try {
                b.style[f] = e[f];
            } catch (g) {
                console.warn("You are using unsupported css properties for your browser in labelsDivStyles");
            }
            a.graphDiv.appendChild(b), this.is_generated_div_ = !0;
        }
        return this.legend_div_ = b, this.one_em_width_ = 10, {
            select: this.select,
            deselect: this.deselect,
            predraw: this.predraw,
            didDrawChart: this.didDrawChart
        };
    };
    var c = function(a) {
        var b = document.createElement("span");
        b.setAttribute("style", "margin: 0; padding: 0 0 0 1em; border: 0;"), a.appendChild(b);
        var c = b.offsetWidth;
        return a.removeChild(b), c;
    }, d = function(a) {
        return a.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    };
    return a.prototype.select = function(b) {
        var c = b.selectedX, d = b.selectedPoints, e = b.selectedRow, f = b.dygraph.getOption("legend");
        if ("never" === f) return void (this.legend_div_.style.display = "none");
        if ("follow" === f) {
            var g = b.dygraph.plotter_.area, h = b.dygraph.getOption("labelsDivWidth"), i = b.dygraph.getOptionForAxis("axisLabelWidth", "y"), j = d[0].x * g.w + 20, k = d[0].y * g.h - 20;
            j + h + 1 > window.scrollX + window.innerWidth && (j = j - 40 - h - (i - g.x)), 
            b.dygraph.graphDiv.appendChild(this.legend_div_), this.legend_div_.style.left = i + j + "px", 
            this.legend_div_.style.top = k + "px";
        }
        var l = a.generateLegendHTML(b.dygraph, c, d, this.one_em_width_, e);
        this.legend_div_.innerHTML = l, this.legend_div_.style.display = "";
    }, a.prototype.deselect = function(b) {
        var d = b.dygraph.getOption("legend");
        "always" !== d && (this.legend_div_.style.display = "none");
        var e = c(this.legend_div_);
        this.one_em_width_ = e;
        var f = a.generateLegendHTML(b.dygraph, void 0, void 0, e, null);
        this.legend_div_.innerHTML = f;
    }, a.prototype.didDrawChart = function(a) {
        this.deselect(a);
    }, a.prototype.predraw = function(a) {
        if (this.is_generated_div_) {
            a.dygraph.graphDiv.appendChild(this.legend_div_);
            var b = a.dygraph.plotter_.area, c = a.dygraph.getOption("labelsDivWidth");
            this.legend_div_.style.left = b.x + b.w - c - 1 + "px", this.legend_div_.style.top = b.y + "px", 
            this.legend_div_.style.width = c + "px";
        }
    }, a.prototype.destroy = function() {
        this.legend_div_ = null;
    }, a.generateLegendHTML = function(a, c, e, f, g) {
        if (a.getOption("showLabelsOnHighlight") !== !0) return "";
        var h, i, j, k, l, m = a.getLabels();
        if ("undefined" == typeof c) {
            if ("always" != a.getOption("legend")) return "";
            for (i = a.getOption("labelsSeparateLines"), h = "", j = 1; j < m.length; j++) {
                var n = a.getPropertiesForSeries(m[j]);
                n.visible && ("" !== h && (h += i ? "<br/>" : " "), l = a.getOption("strokePattern", m[j]), 
                k = b(l, n.color, f), h += "<span style='font-weight: bold; color: " + n.color + ";'>" + k + " " + d(m[j]) + "</span>");
            }
            return h;
        }
        var o = a.optionsViewForAxis_("x"), p = o("valueFormatter");
        h = p.call(a, c, o, m[0], a, g, 0), "" !== h && (h += ":");
        var q = [], r = a.numAxes();
        for (j = 0; r > j; j++) q[j] = a.optionsViewForAxis_("y" + (j ? 1 + j : ""));
        var s = a.getOption("labelsShowZeroValues");
        i = a.getOption("labelsSeparateLines");
        var t = a.getHighlightSeries();
        for (j = 0; j < e.length; j++) {
            var u = e[j];
            if ((0 !== u.yval || s) && Dygraph.isOK(u.canvasy)) {
                i && (h += "<br/>");
                var n = a.getPropertiesForSeries(u.name), v = q[n.axis - 1], w = v("valueFormatter"), x = w.call(a, u.yval, v, u.name, a, g, m.indexOf(u.name)), y = u.name == t ? " class='highlight'" : "";
                h += "<span" + y + "> <b><span style='color: " + n.color + ";'>" + d(u.name) + "</span></b>:&#160;" + x + "</span>";
            }
        }
        return h;
    }, b = function(a, b, c) {
        var d = /MSIE/.test(navigator.userAgent) && !window.opera;
        if (d) return "&mdash;";
        if (!a || a.length <= 1) return '<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid ' + b + ';"></div>';
        var e, f, g, h, i, j = 0, k = 0, l = [];
        for (e = 0; e <= a.length; e++) j += a[e % a.length];
        if (i = Math.floor(c / (j - a[0])), i > 1) {
            for (e = 0; e < a.length; e++) l[e] = a[e] / c;
            k = l.length;
        } else {
            for (i = 1, e = 0; e < a.length; e++) l[e] = a[e] / j;
            k = l.length + 1;
        }
        var m = "";
        for (f = 0; i > f; f++) for (e = 0; k > e; e += 2) g = l[e % l.length], h = e < a.length ? l[(e + 1) % l.length] : 0, 
        m += '<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: ' + h + "em; padding-left: " + g + "em; height: 1px; border-bottom: 2px solid " + b + ';"></div>';
        return m;
    }, a;
}(), Dygraph.Plugins.RangeSelector = function() {
    "use strict";
    var a = function() {
        this.isIE_ = /MSIE/.test(navigator.userAgent) && !window.opera, this.hasTouchInterface_ = "undefined" != typeof TouchEvent, 
        this.isMobileDevice_ = /mobile|android/gi.test(navigator.appVersion), this.interfaceCreated_ = !1;
    };
    return a.prototype.toString = function() {
        return "RangeSelector Plugin";
    }, a.prototype.activate = function(a) {
        return this.dygraph_ = a, this.isUsingExcanvas_ = a.isUsingExcanvas_, this.getOption_("showRangeSelector") && this.createInterface_(), 
        {
            layout: this.reserveSpace_,
            predraw: this.renderStaticLayer_,
            didDrawChart: this.renderInteractiveLayer_
        };
    }, a.prototype.destroy = function() {
        this.bgcanvas_ = null, this.fgcanvas_ = null, this.leftZoomHandle_ = null, this.rightZoomHandle_ = null, 
        this.iePanOverlay_ = null;
    }, a.prototype.getOption_ = function(a, b) {
        return this.dygraph_.getOption(a, b);
    }, a.prototype.setDefaultOption_ = function(a, b) {
        this.dygraph_.attrs_[a] = b;
    }, a.prototype.createInterface_ = function() {
        this.createCanvases_(), this.isUsingExcanvas_ && this.createIEPanOverlay_(), this.createZoomHandles_(), 
        this.initInteraction_(), this.getOption_("animatedZooms") && (console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."), 
        this.dygraph_.updateOptions({
            animatedZooms: !1
        }, !0)), this.interfaceCreated_ = !0, this.addToGraph_();
    }, a.prototype.addToGraph_ = function() {
        var a = this.graphDiv_ = this.dygraph_.graphDiv;
        a.appendChild(this.bgcanvas_), a.appendChild(this.fgcanvas_), a.appendChild(this.leftZoomHandle_), 
        a.appendChild(this.rightZoomHandle_);
    }, a.prototype.removeFromGraph_ = function() {
        var a = this.graphDiv_;
        a.removeChild(this.bgcanvas_), a.removeChild(this.fgcanvas_), a.removeChild(this.leftZoomHandle_), 
        a.removeChild(this.rightZoomHandle_), this.graphDiv_ = null;
    }, a.prototype.reserveSpace_ = function(a) {
        this.getOption_("showRangeSelector") && a.reserveSpaceBottom(this.getOption_("rangeSelectorHeight") + 4);
    }, a.prototype.renderStaticLayer_ = function() {
        this.updateVisibility_() && (this.resize_(), this.drawStaticLayer_());
    }, a.prototype.renderInteractiveLayer_ = function() {
        this.updateVisibility_() && !this.isChangingRange_ && (this.placeZoomHandles_(), 
        this.drawInteractiveLayer_());
    }, a.prototype.updateVisibility_ = function() {
        var a = this.getOption_("showRangeSelector");
        if (a) this.interfaceCreated_ ? this.graphDiv_ && this.graphDiv_.parentNode || this.addToGraph_() : this.createInterface_(); else if (this.graphDiv_) {
            this.removeFromGraph_();
            var b = this.dygraph_;
            setTimeout(function() {
                b.width_ = 0, b.resize();
            }, 1);
        }
        return a;
    }, a.prototype.resize_ = function() {
        function a(a, b, c) {
            var d = Dygraph.getContextPixelRatio(b);
            a.style.top = c.y + "px", a.style.left = c.x + "px", a.width = c.w * d, a.height = c.h * d, 
            a.style.width = c.w + "px", a.style.height = c.h + "px", 1 != d && b.scale(d, d);
        }
        var b = this.dygraph_.layout_.getPlotArea(), c = 0;
        this.dygraph_.getOptionForAxis("drawAxis", "x") && (c = this.getOption_("xAxisHeight") || this.getOption_("axisLabelFontSize") + 2 * this.getOption_("axisTickSize")), 
        this.canvasRect_ = {
            x: b.x,
            y: b.y + b.h + c + 4,
            w: b.w,
            h: this.getOption_("rangeSelectorHeight")
        }, a(this.bgcanvas_, this.bgcanvas_ctx_, this.canvasRect_), a(this.fgcanvas_, this.fgcanvas_ctx_, this.canvasRect_);
    }, a.prototype.createCanvases_ = function() {
        this.bgcanvas_ = Dygraph.createCanvas(), this.bgcanvas_.className = "dygraph-rangesel-bgcanvas", 
        this.bgcanvas_.style.position = "absolute", this.bgcanvas_.style.zIndex = 9, this.bgcanvas_ctx_ = Dygraph.getContext(this.bgcanvas_), 
        this.fgcanvas_ = Dygraph.createCanvas(), this.fgcanvas_.className = "dygraph-rangesel-fgcanvas", 
        this.fgcanvas_.style.position = "absolute", this.fgcanvas_.style.zIndex = 9, this.fgcanvas_.style.cursor = "default", 
        this.fgcanvas_ctx_ = Dygraph.getContext(this.fgcanvas_);
    }, a.prototype.createIEPanOverlay_ = function() {
        this.iePanOverlay_ = document.createElement("div"), this.iePanOverlay_.style.position = "absolute", 
        this.iePanOverlay_.style.backgroundColor = "white", this.iePanOverlay_.style.filter = "alpha(opacity=0)", 
        this.iePanOverlay_.style.display = "none", this.iePanOverlay_.style.cursor = "move", 
        this.fgcanvas_.appendChild(this.iePanOverlay_);
    }, a.prototype.createZoomHandles_ = function() {
        var a = new Image();
        a.className = "dygraph-rangesel-zoomhandle", a.style.position = "absolute", a.style.zIndex = 10, 
        a.style.visibility = "hidden", a.style.cursor = "col-resize", /MSIE 7/.test(navigator.userAgent) ? (a.width = 7, 
        a.height = 14, a.style.backgroundColor = "white", a.style.border = "1px solid #333333") : (a.width = 9, 
        a.height = 16, a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="), 
        this.isMobileDevice_ && (a.width *= 2, a.height *= 2), this.leftZoomHandle_ = a, 
        this.rightZoomHandle_ = a.cloneNode(!1);
    }, a.prototype.initInteraction_ = function() {
        var a, b, c, d, e, f, g, h, i, j, k, l, m, n, o = this, p = document, q = 0, r = null, s = !1, t = !1, u = !this.isMobileDevice_ && !this.isUsingExcanvas_, v = new Dygraph.IFrameTarp();
        a = function(a) {
            var b = o.dygraph_.xAxisExtremes(), c = (b[1] - b[0]) / o.canvasRect_.w, d = b[0] + (a.leftHandlePos - o.canvasRect_.x) * c, e = b[0] + (a.rightHandlePos - o.canvasRect_.x) * c;
            return [ d, e ];
        }, b = function(a) {
            return Dygraph.cancelEvent(a), s = !0, q = a.clientX, r = a.target ? a.target : a.srcElement, 
            ("mousedown" === a.type || "dragstart" === a.type) && (Dygraph.addEvent(p, "mousemove", c), 
            Dygraph.addEvent(p, "mouseup", d)), o.fgcanvas_.style.cursor = "col-resize", v.cover(), 
            !0;
        }, c = function(a) {
            if (!s) return !1;
            Dygraph.cancelEvent(a);
            var b = a.clientX - q;
            if (Math.abs(b) < 4) return !0;
            q = a.clientX;
            var c, d = o.getZoomHandleStatus_();
            r == o.leftZoomHandle_ ? (c = d.leftHandlePos + b, c = Math.min(c, d.rightHandlePos - r.width - 3), 
            c = Math.max(c, o.canvasRect_.x)) : (c = d.rightHandlePos + b, c = Math.min(c, o.canvasRect_.x + o.canvasRect_.w), 
            c = Math.max(c, d.leftHandlePos + r.width + 3));
            var f = r.width / 2;
            return r.style.left = c - f + "px", o.drawInteractiveLayer_(), u && e(), !0;
        }, d = function(a) {
            return s ? (s = !1, v.uncover(), Dygraph.removeEvent(p, "mousemove", c), Dygraph.removeEvent(p, "mouseup", d), 
            o.fgcanvas_.style.cursor = "default", u || e(), !0) : !1;
        }, e = function() {
            try {
                var b = o.getZoomHandleStatus_();
                if (o.isChangingRange_ = !0, b.isZoomed) {
                    var c = a(b);
                    o.dygraph_.doZoomXDates_(c[0], c[1]);
                } else o.dygraph_.resetZoom();
            } finally {
                o.isChangingRange_ = !1;
            }
        }, f = function(a) {
            if (o.isUsingExcanvas_) return a.srcElement == o.iePanOverlay_;
            var b = o.leftZoomHandle_.getBoundingClientRect(), c = b.left + b.width / 2;
            b = o.rightZoomHandle_.getBoundingClientRect();
            var d = b.left + b.width / 2;
            return a.clientX > c && a.clientX < d;
        }, g = function(a) {
            return !t && f(a) && o.getZoomHandleStatus_().isZoomed ? (Dygraph.cancelEvent(a), 
            t = !0, q = a.clientX, "mousedown" === a.type && (Dygraph.addEvent(p, "mousemove", h), 
            Dygraph.addEvent(p, "mouseup", i)), !0) : !1;
        }, h = function(a) {
            if (!t) return !1;
            Dygraph.cancelEvent(a);
            var b = a.clientX - q;
            if (Math.abs(b) < 4) return !0;
            q = a.clientX;
            var c = o.getZoomHandleStatus_(), d = c.leftHandlePos, e = c.rightHandlePos, f = e - d;
            d + b <= o.canvasRect_.x ? (d = o.canvasRect_.x, e = d + f) : e + b >= o.canvasRect_.x + o.canvasRect_.w ? (e = o.canvasRect_.x + o.canvasRect_.w, 
            d = e - f) : (d += b, e += b);
            var g = o.leftZoomHandle_.width / 2;
            return o.leftZoomHandle_.style.left = d - g + "px", o.rightZoomHandle_.style.left = e - g + "px", 
            o.drawInteractiveLayer_(), u && j(), !0;
        }, i = function(a) {
            return t ? (t = !1, Dygraph.removeEvent(p, "mousemove", h), Dygraph.removeEvent(p, "mouseup", i), 
            u || j(), !0) : !1;
        }, j = function() {
            try {
                o.isChangingRange_ = !0, o.dygraph_.dateWindow_ = a(o.getZoomHandleStatus_()), o.dygraph_.drawGraph_(!1);
            } finally {
                o.isChangingRange_ = !1;
            }
        }, k = function(a) {
            if (!s && !t) {
                var b = f(a) ? "move" : "default";
                b != o.fgcanvas_.style.cursor && (o.fgcanvas_.style.cursor = b);
            }
        }, l = function(a) {
            "touchstart" == a.type && 1 == a.targetTouches.length ? b(a.targetTouches[0]) && Dygraph.cancelEvent(a) : "touchmove" == a.type && 1 == a.targetTouches.length ? c(a.targetTouches[0]) && Dygraph.cancelEvent(a) : d(a);
        }, m = function(a) {
            "touchstart" == a.type && 1 == a.targetTouches.length ? g(a.targetTouches[0]) && Dygraph.cancelEvent(a) : "touchmove" == a.type && 1 == a.targetTouches.length ? h(a.targetTouches[0]) && Dygraph.cancelEvent(a) : i(a);
        }, n = function(a, b) {
            for (var c = [ "touchstart", "touchend", "touchmove", "touchcancel" ], d = 0; d < c.length; d++) o.dygraph_.addAndTrackEvent(a, c[d], b);
        }, this.setDefaultOption_("interactionModel", Dygraph.Interaction.dragIsPanInteractionModel), 
        this.setDefaultOption_("panEdgeFraction", 1e-4);
        var w = window.opera ? "mousedown" : "dragstart";
        this.dygraph_.addAndTrackEvent(this.leftZoomHandle_, w, b), this.dygraph_.addAndTrackEvent(this.rightZoomHandle_, w, b), 
        this.isUsingExcanvas_ ? this.dygraph_.addAndTrackEvent(this.iePanOverlay_, "mousedown", g) : (this.dygraph_.addAndTrackEvent(this.fgcanvas_, "mousedown", g), 
        this.dygraph_.addAndTrackEvent(this.fgcanvas_, "mousemove", k)), this.hasTouchInterface_ && (n(this.leftZoomHandle_, l), 
        n(this.rightZoomHandle_, l), n(this.fgcanvas_, m));
    }, a.prototype.drawStaticLayer_ = function() {
        var a = this.bgcanvas_ctx_;
        a.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);
        try {
            this.drawMiniPlot_();
        } catch (b) {
            console.warn(b);
        }
        var c = .5;
        this.bgcanvas_ctx_.lineWidth = 1, a.strokeStyle = "gray", a.beginPath(), a.moveTo(c, c), 
        a.lineTo(c, this.canvasRect_.h - c), a.lineTo(this.canvasRect_.w - c, this.canvasRect_.h - c), 
        a.lineTo(this.canvasRect_.w - c, c), a.stroke();
    }, a.prototype.drawMiniPlot_ = function() {
        var a = this.getOption_("rangeSelectorPlotFillColor"), b = this.getOption_("rangeSelectorPlotStrokeColor");
        if (a || b) {
            var c = this.getOption_("stepPlot"), d = this.computeCombinedSeriesAndLimits_(), e = d.yMax - d.yMin, f = this.bgcanvas_ctx_, g = .5, h = this.dygraph_.xAxisExtremes(), i = Math.max(h[1] - h[0], 1e-30), j = (this.canvasRect_.w - g) / i, k = (this.canvasRect_.h - g) / e, l = this.canvasRect_.w - g, m = this.canvasRect_.h - g, n = null, o = null;
            f.beginPath(), f.moveTo(g, m);
            for (var p = 0; p < d.data.length; p++) {
                var q = d.data[p], r = null !== q[0] ? (q[0] - h[0]) * j : NaN, s = null !== q[1] ? m - (q[1] - d.yMin) * k : NaN;
                (c || null === n || Math.round(r) != Math.round(n)) && (isFinite(r) && isFinite(s) ? (null === n ? f.lineTo(r, m) : c && f.lineTo(r, o), 
                f.lineTo(r, s), n = r, o = s) : (null !== n && (c ? (f.lineTo(r, o), f.lineTo(r, m)) : f.lineTo(n, m)), 
                n = o = null));
            }
            if (f.lineTo(l, m), f.closePath(), a) {
                var t = this.bgcanvas_ctx_.createLinearGradient(0, 0, 0, m);
                t.addColorStop(0, "white"), t.addColorStop(1, a), this.bgcanvas_ctx_.fillStyle = t, 
                f.fill();
            }
            b && (this.bgcanvas_ctx_.strokeStyle = b, this.bgcanvas_ctx_.lineWidth = 1.5, f.stroke());
        }
    }, a.prototype.computeCombinedSeriesAndLimits_ = function() {
        var a, b = this.dygraph_, c = this.getOption_("logscale"), d = b.numColumns(), e = b.getLabels(), f = new Array(d), g = !1;
        for (a = 1; d > a; a++) {
            var h = this.getOption_("showInRangeSelector", e[a]);
            f[a] = h, null !== h && (g = !0);
        }
        if (!g) for (a = 0; a < f.length; a++) f[a] = !0;
        var i = [], j = b.dataHandler_, k = b.attributes_;
        for (a = 1; a < b.numColumns(); a++) if (f[a]) {
            var l = j.extractSeries(b.rawData_, a, k);
            b.rollPeriod() > 1 && (l = j.rollingAverage(l, b.rollPeriod(), k)), i.push(l);
        }
        var m = [];
        for (a = 0; a < i[0].length; a++) {
            for (var n = 0, o = 0, p = 0; p < i.length; p++) {
                var q = i[p][a][1];
                null === q || isNaN(q) || (o++, n += q);
            }
            m.push([ i[0][a][0], n / o ]);
        }
        var r = Number.MAX_VALUE, s = -Number.MAX_VALUE;
        for (a = 0; a < m.length; a++) {
            var t = m[a][1];
            null !== t && isFinite(t) && (!c || t > 0) && (r = Math.min(r, t), s = Math.max(s, t));
        }
        var u = .25;
        if (c) for (s = Dygraph.log10(s), s += s * u, r = Dygraph.log10(r), a = 0; a < m.length; a++) m[a][1] = Dygraph.log10(m[a][1]); else {
            var v, w = s - r;
            v = w <= Number.MIN_VALUE ? s * u : w * u, s += v, r -= v;
        }
        return {
            data: m,
            yMin: r,
            yMax: s
        };
    }, a.prototype.placeZoomHandles_ = function() {
        var a = this.dygraph_.xAxisExtremes(), b = this.dygraph_.xAxisRange(), c = a[1] - a[0], d = Math.max(0, (b[0] - a[0]) / c), e = Math.max(0, (a[1] - b[1]) / c), f = this.canvasRect_.x + this.canvasRect_.w * d, g = this.canvasRect_.x + this.canvasRect_.w * (1 - e), h = Math.max(this.canvasRect_.y, this.canvasRect_.y + (this.canvasRect_.h - this.leftZoomHandle_.height) / 2), i = this.leftZoomHandle_.width / 2;
        this.leftZoomHandle_.style.left = f - i + "px", this.leftZoomHandle_.style.top = h + "px", 
        this.rightZoomHandle_.style.left = g - i + "px", this.rightZoomHandle_.style.top = this.leftZoomHandle_.style.top, 
        this.leftZoomHandle_.style.visibility = "visible", this.rightZoomHandle_.style.visibility = "visible";
    }, a.prototype.drawInteractiveLayer_ = function() {
        var a = this.fgcanvas_ctx_;
        a.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);
        var b = 1, c = this.canvasRect_.w - b, d = this.canvasRect_.h - b, e = this.getZoomHandleStatus_();
        if (a.strokeStyle = "black", e.isZoomed) {
            var f = Math.max(b, e.leftHandlePos - this.canvasRect_.x), g = Math.min(c, e.rightHandlePos - this.canvasRect_.x);
            a.fillStyle = "rgba(240, 240, 240, 0.6)", a.fillRect(0, 0, f, this.canvasRect_.h), 
            a.fillRect(g, 0, this.canvasRect_.w - g, this.canvasRect_.h), a.beginPath(), a.moveTo(b, b), 
            a.lineTo(f, b), a.lineTo(f, d), a.lineTo(g, d), a.lineTo(g, b), a.lineTo(c, b), 
            a.stroke(), this.isUsingExcanvas_ && (this.iePanOverlay_.style.width = g - f + "px", 
            this.iePanOverlay_.style.left = f + "px", this.iePanOverlay_.style.height = d + "px", 
            this.iePanOverlay_.style.display = "inline");
        } else a.beginPath(), a.moveTo(b, b), a.lineTo(b, d), a.lineTo(c, d), a.lineTo(c, b), 
        a.stroke(), this.iePanOverlay_ && (this.iePanOverlay_.style.display = "none");
    }, a.prototype.getZoomHandleStatus_ = function() {
        var a = this.leftZoomHandle_.width / 2, b = parseFloat(this.leftZoomHandle_.style.left) + a, c = parseFloat(this.rightZoomHandle_.style.left) + a;
        return {
            leftHandlePos: b,
            rightHandlePos: c,
            isZoomed: b - 1 > this.canvasRect_.x || c + 1 < this.canvasRect_.x + this.canvasRect_.w
        };
    }, a;
}(), Dygraph.PLUGINS.push(Dygraph.Plugins.Legend, Dygraph.Plugins.Axes, Dygraph.Plugins.RangeSelector, Dygraph.Plugins.ChartLabels, Dygraph.Plugins.Annotations, Dygraph.Plugins.Grid), 
Dygraph.DataHandler = function() {}, Dygraph.DataHandlers = {}, function() {
    "use strict";
    var a = Dygraph.DataHandler;
    a.X = 0, a.Y = 1, a.EXTRAS = 2, a.prototype.extractSeries = function(a, b, c) {}, 
    a.prototype.seriesToPoints = function(b, c, d) {
        for (var e = [], f = 0; f < b.length; ++f) {
            var g = b[f], h = g[1], i = null === h ? null : a.parseFloat(h), j = {
                x: NaN,
                y: NaN,
                xval: a.parseFloat(g[0]),
                yval: i,
                name: c,
                idx: f + d
            };
            e.push(j);
        }
        return this.onPointsCreated_(b, e), e;
    }, a.prototype.onPointsCreated_ = function(a, b) {}, a.prototype.rollingAverage = function(a, b, c) {}, 
    a.prototype.getExtremeYValues = function(a, b, c) {}, a.prototype.onLineEvaluated = function(a, b, c) {}, 
    a.prototype.computeYInterpolation_ = function(a, b, c) {
        var d = b[1] - a[1], e = b[0] - a[0], f = d / e, g = (c - a[0]) * f;
        return a[1] + g;
    }, a.prototype.getIndexesInWindow_ = function(a, b) {
        var c = 0, d = a.length - 1;
        if (b) {
            for (var e = 0, f = b[0], g = b[1]; e < a.length - 1 && a[e][0] < f; ) c++, e++;
            for (e = a.length - 1; e > 0 && a[e][0] > g; ) d--, e--;
        }
        return d >= c ? [ c, d ] : [ 0, a.length - 1 ];
    }, a.parseFloat = function(a) {
        return null === a ? NaN : a;
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.DefaultHandler = function() {};
    var a = Dygraph.DataHandlers.DefaultHandler;
    a.prototype = new Dygraph.DataHandler(), a.prototype.extractSeries = function(a, b, c) {
        for (var d = [], e = c.get("logscale"), f = 0; f < a.length; f++) {
            var g = a[f][0], h = a[f][b];
            e && 0 >= h && (h = null), d.push([ g, h ]);
        }
        return d;
    }, a.prototype.rollingAverage = function(a, b, c) {
        b = Math.min(b, a.length);
        var d, e, f, g, h, i = [];
        if (1 == b) return a;
        for (d = 0; d < a.length; d++) {
            for (g = 0, h = 0, e = Math.max(0, d - b + 1); d + 1 > e; e++) f = a[e][1], null === f || isNaN(f) || (h++, 
            g += a[e][1]);
            h ? i[d] = [ a[d][0], g / h ] : i[d] = [ a[d][0], null ];
        }
        return i;
    }, a.prototype.getExtremeYValues = function(a, b, c) {
        for (var d, e = null, f = null, g = 0, h = a.length - 1, i = g; h >= i; i++) d = a[i][1], 
        null === d || isNaN(d) || ((null === f || d > f) && (f = d), (null === e || e > d) && (e = d));
        return [ e, f ];
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.DefaultFractionHandler = function() {};
    var a = Dygraph.DataHandlers.DefaultFractionHandler;
    a.prototype = new Dygraph.DataHandlers.DefaultHandler(), a.prototype.extractSeries = function(a, b, c) {
        for (var d, e, f, g, h, i, j = [], k = 100, l = c.get("logscale"), m = 0; m < a.length; m++) d = a[m][0], 
        f = a[m][b], l && null !== f && (f[0] <= 0 || f[1] <= 0) && (f = null), null !== f ? (g = f[0], 
        h = f[1], null === g || isNaN(g) ? j.push([ d, g, [ g, h ] ]) : (i = h ? g / h : 0, 
        e = k * i, j.push([ d, e, [ g, h ] ]))) : j.push([ d, null, [ null, null ] ]);
        return j;
    }, a.prototype.rollingAverage = function(a, b, c) {
        b = Math.min(b, a.length);
        var d, e = [], f = 0, g = 0, h = 100;
        for (d = 0; d < a.length; d++) {
            f += a[d][2][0], g += a[d][2][1], d - b >= 0 && (f -= a[d - b][2][0], g -= a[d - b][2][1]);
            var i = a[d][0], j = g ? f / g : 0;
            e[d] = [ i, h * j ];
        }
        return e;
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.BarsHandler = function() {
        Dygraph.DataHandler.call(this);
    }, Dygraph.DataHandlers.BarsHandler.prototype = new Dygraph.DataHandler();
    var a = Dygraph.DataHandlers.BarsHandler;
    a.prototype.extractSeries = function(a, b, c) {}, a.prototype.rollingAverage = function(a, b, c) {}, 
    a.prototype.onPointsCreated_ = function(a, b) {
        for (var c = 0; c < a.length; ++c) {
            var d = a[c], e = b[c];
            e.y_top = NaN, e.y_bottom = NaN, e.yval_minus = Dygraph.DataHandler.parseFloat(d[2][0]), 
            e.yval_plus = Dygraph.DataHandler.parseFloat(d[2][1]);
        }
    }, a.prototype.getExtremeYValues = function(a, b, c) {
        for (var d, e = null, f = null, g = 0, h = a.length - 1, i = g; h >= i; i++) if (d = a[i][1], 
        null !== d && !isNaN(d)) {
            var j = a[i][2][0], k = a[i][2][1];
            j > d && (j = d), d > k && (k = d), (null === f || k > f) && (f = k), (null === e || e > j) && (e = j);
        }
        return [ e, f ];
    }, a.prototype.onLineEvaluated = function(a, b, c) {
        for (var d, e = 0; e < a.length; e++) d = a[e], d.y_top = DygraphLayout.calcYNormal_(b, d.yval_minus, c), 
        d.y_bottom = DygraphLayout.calcYNormal_(b, d.yval_plus, c);
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.CustomBarsHandler = function() {};
    var a = Dygraph.DataHandlers.CustomBarsHandler;
    a.prototype = new Dygraph.DataHandlers.BarsHandler(), a.prototype.extractSeries = function(a, b, c) {
        for (var d, e, f, g = [], h = c.get("logscale"), i = 0; i < a.length; i++) d = a[i][0], 
        f = a[i][b], h && null !== f && (f[0] <= 0 || f[1] <= 0 || f[2] <= 0) && (f = null), 
        null !== f ? (e = f[1], g.push(null === e || isNaN(e) ? [ d, e, [ e, e ] ] : [ d, e, [ f[0], f[2] ] ])) : g.push([ d, null, [ null, null ] ]);
        return g;
    }, a.prototype.rollingAverage = function(a, b, c) {
        b = Math.min(b, a.length);
        var d, e, f, g, h, i, j, k = [];
        for (e = 0, g = 0, f = 0, h = 0, i = 0; i < a.length; i++) {
            if (d = a[i][1], j = a[i][2], k[i] = a[i], null === d || isNaN(d) || (e += j[0], 
            g += d, f += j[1], h += 1), i - b >= 0) {
                var l = a[i - b];
                null === l[1] || isNaN(l[1]) || (e -= l[2][0], g -= l[1], f -= l[2][1], h -= 1);
            }
            h ? k[i] = [ a[i][0], 1 * g / h, [ 1 * e / h, 1 * f / h ] ] : k[i] = [ a[i][0], null, [ null, null ] ];
        }
        return k;
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.ErrorBarsHandler = function() {};
    var a = Dygraph.DataHandlers.ErrorBarsHandler;
    a.prototype = new Dygraph.DataHandlers.BarsHandler(), a.prototype.extractSeries = function(a, b, c) {
        for (var d, e, f, g, h = [], i = c.get("sigma"), j = c.get("logscale"), k = 0; k < a.length; k++) d = a[k][0], 
        g = a[k][b], j && null !== g && (g[0] <= 0 || g[0] - i * g[1] <= 0) && (g = null), 
        null !== g ? (e = g[0], null === e || isNaN(e) ? h.push([ d, e, [ e, e, e ] ]) : (f = i * g[1], 
        h.push([ d, e, [ e - f, e + f, g[1] ] ]))) : h.push([ d, null, [ null, null, null ] ]);
        return h;
    }, a.prototype.rollingAverage = function(a, b, c) {
        b = Math.min(b, a.length);
        var d, e, f, g, h, i, j, k, l, m = [], n = c.get("sigma");
        for (d = 0; d < a.length; d++) {
            for (h = 0, k = 0, i = 0, e = Math.max(0, d - b + 1); d + 1 > e; e++) f = a[e][1], 
            null === f || isNaN(f) || (i++, h += f, k += Math.pow(a[e][2][2], 2));
            i ? (j = Math.sqrt(k) / i, l = h / i, m[d] = [ a[d][0], l, [ l - n * j, l + n * j ] ]) : (g = 1 == b ? a[d][1] : null, 
            m[d] = [ a[d][0], g, [ g, g ] ]);
        }
        return m;
    };
}(), function() {
    "use strict";
    Dygraph.DataHandlers.FractionsBarsHandler = function() {};
    var a = Dygraph.DataHandlers.FractionsBarsHandler;
    a.prototype = new Dygraph.DataHandlers.BarsHandler(), a.prototype.extractSeries = function(a, b, c) {
        for (var d, e, f, g, h, i, j, k, l = [], m = 100, n = c.get("sigma"), o = c.get("logscale"), p = 0; p < a.length; p++) d = a[p][0], 
        f = a[p][b], o && null !== f && (f[0] <= 0 || f[1] <= 0) && (f = null), null !== f ? (g = f[0], 
        h = f[1], null === g || isNaN(g) ? l.push([ d, g, [ g, g, g, h ] ]) : (i = h ? g / h : 0, 
        j = h ? n * Math.sqrt(i * (1 - i) / h) : 1, k = m * j, e = m * i, l.push([ d, e, [ e - k, e + k, g, h ] ]))) : l.push([ d, null, [ null, null, null, null ] ]);
        return l;
    }, a.prototype.rollingAverage = function(a, b, c) {
        b = Math.min(b, a.length);
        var d, e, f, g, h = [], i = c.get("sigma"), j = c.get("wilsonInterval"), k = 0, l = 0, m = 100;
        for (f = 0; f < a.length; f++) {
            k += a[f][2][2], l += a[f][2][3], f - b >= 0 && (k -= a[f - b][2][2], l -= a[f - b][2][3]);
            var n = a[f][0], o = l ? k / l : 0;
            if (j) if (l) {
                var p = 0 > o ? 0 : o, q = l, r = i * Math.sqrt(p * (1 - p) / q + i * i / (4 * q * q)), s = 1 + i * i / l;
                d = (p + i * i / (2 * l) - r) / s, e = (p + i * i / (2 * l) + r) / s, h[f] = [ n, p * m, [ d * m, e * m ] ];
            } else h[f] = [ n, 0, [ 0, 0 ] ]; else g = l ? i * Math.sqrt(o * (1 - o) / l) : 1, 
            h[f] = [ n, m * o, [ m * (o - g), m * (o + g) ] ];
        }
        return h;
    };
}(), window.Handsontable = {
    version: "0.19.0",
    buildDate: "Fri Oct 02 2015 12:37:12 GMT+0200 (CEST)"
}, function(a) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = a(); else if ("function" == typeof define && define.amd) define([], a); else {
        var b;
        b = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, 
        b.Handsontable = a();
    }
}(function() {
    var a;
    return function(a, b, c) {
        return function d(a, b, c) {
            function e(h, i) {
                if (!b[h]) {
                    if (!a[h]) {
                        var j = "function" == typeof require && require;
                        if (!i && j) return j(h, !0);
                        if (f) return f(h, !0);
                        if (g[h] && "undefined" != typeof window[g[h]]) return window[g[h]];
                        var k = new Error("Cannot find module '" + h + "'");
                        throw k.code = "MODULE_NOT_FOUND", k;
                    }
                    var l = b[h] = {
                        exports: {}
                    };
                    a[h][0].call(l.exports, function(b) {
                        var c = a[h][1][b];
                        return e(c ? c : b);
                    }, l, l.exports, d, a, b, c);
                }
                return b[h].exports;
            }
            for (var f = "function" == typeof require && require, g = JSON.parse('{"zeroclipboard":"ZeroClipboard","moment":"moment","pikaday":"Pikaday"}') || {}, h = 0; h < c.length; h++) e(c[h]);
            return e;
        }(a, b, c), function() {
            return Handsontable;
        };
    }({
        1: [ function(a, b, c) {
            "use strict";
            window.jQuery && !function(a, b, c) {
                b.fn.handsontable = function(a) {
                    var b, d, e, f, g, h = this.first(), i = h.data("handsontable");
                    if ("string" != typeof a) return g = a || {}, i ? i.updateSettings(g) : (i = new c.Core(h[0], g), 
                    h.data("handsontable", i), i.init()), h;
                    if (e = [], arguments.length > 1) for (b = 1, d = arguments.length; d > b; b++) e.push(arguments[b]);
                    if (i) {
                        if ("undefined" == typeof i[a]) throw new Error("Handsontable do not provide action: " + a);
                        f = i[a].apply(i, e), "destroy" === a && h.removeData();
                    }
                    return f;
                };
            }(window, jQuery, Handsontable);
        }, {} ],
        2: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableBorder: {
                    get: function() {
                        return u;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), j = i.getComputedStyle, k = i.getTrimmingContainer, l = i.innerWidth, m = i.innerHeight, n = i.offset, o = i.outerHeight, p = i.outerWidth, q = (e = a("helpers/dom/event"), 
            e && e.__esModule && e || {
                "default": e
            }).stopImmediatePropagation, r = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).EventManager, s = (g = a("cell/coords"), g && g.__esModule && g || {
                "default": g
            }).WalkontableCellCoords, t = (h = a("overlay/_base.js"), h && h.__esModule && h || {
                "default": h
            }).WalkontableOverlay, u = function(a, b) {
                b && (this.eventManager = new r(a), this.instance = a, this.wot = a, this.settings = b, 
                this.mouseDown = !1, this.main = null, this.top = null, this.left = null, this.bottom = null, 
                this.right = null, this.topStyle = null, this.leftStyle = null, this.bottomStyle = null, 
                this.rightStyle = null, this.cornerDefaultStyle = {
                    width: "5px",
                    height: "5px",
                    borderWidth: "2px",
                    borderStyle: "solid",
                    borderColor: "#FFF"
                }, this.corner = null, this.cornerStyle = null, this.createBorders(b), this.registerListeners());
            };
            $traceurRuntime.createClass(u, {
                registerListeners: function() {
                    var a = this;
                    this.eventManager.addEventListener(document.body, "mousedown", function() {
                        return a.onMouseDown();
                    }), this.eventManager.addEventListener(document.body, "mouseup", function() {
                        return a.onMouseUp();
                    });
                    for (var b = 0, c = this.main.childNodes.length; c > b; b++) this.eventManager.addEventListener(this.main.childNodes[b], "mouseenter", function(b) {
                        return a.onMouseEnter(b);
                    });
                },
                onMouseDown: function() {
                    this.mouseDown = !0;
                },
                onMouseUp: function() {
                    this.mouseDown = !1;
                },
                onMouseEnter: function(a) {
                    function b(a) {
                        return a.clientY < Math.floor(e.top) ? !0 : a.clientY > Math.ceil(e.top + e.height) ? !0 : a.clientX < Math.floor(e.left) ? !0 : a.clientX > Math.ceil(e.left + e.width) ? !0 : void 0;
                    }
                    function c(a) {
                        b(a) && (d.eventManager.removeEventListener(document.body, "mousemove", c), d.style.display = "block");
                    }
                    if (this.mouseDown && this.wot.getSetting("hideBorderOnMouseDownOver")) {
                        a.preventDefault(), q(a);
                        var d = this, e = this.getBoundingClientRect();
                        this.style.display = "none", this.eventManager.addEventListener(document.body, "mousemove", c);
                    }
                },
                createBorders: function(a) {
                    this.main = document.createElement("div");
                    var b = [ "top", "left", "bottom", "right", "corner" ], c = this.main.style;
                    c.position = "absolute", c.top = 0, c.left = 0;
                    for (var d = 0; 5 > d; d++) {
                        var e = b[d], f = document.createElement("div");
                        f.className = "wtBorder " + (this.settings.className || ""), this.settings[e] && this.settings[e].hide && (f.className += " hidden"), 
                        c = f.style, c.backgroundColor = this.settings[e] && this.settings[e].color ? this.settings[e].color : a.border.color, 
                        c.height = this.settings[e] && this.settings[e].width ? this.settings[e].width + "px" : a.border.width + "px", 
                        c.width = this.settings[e] && this.settings[e].width ? this.settings[e].width + "px" : a.border.width + "px", 
                        this.main.appendChild(f);
                    }
                    this.top = this.main.childNodes[0], this.left = this.main.childNodes[1], this.bottom = this.main.childNodes[2], 
                    this.right = this.main.childNodes[3], this.topStyle = this.top.style, this.leftStyle = this.left.style, 
                    this.bottomStyle = this.bottom.style, this.rightStyle = this.right.style, this.corner = this.main.childNodes[4], 
                    this.corner.className += " corner", this.cornerStyle = this.corner.style, this.cornerStyle.width = this.cornerDefaultStyle.width, 
                    this.cornerStyle.height = this.cornerDefaultStyle.height, this.cornerStyle.border = [ this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor ].join(" "), 
                    Handsontable.mobileBrowser && this.createMultipleSelectorHandles(), this.disappear(), 
                    this.wot.wtTable.bordersHolder || (this.wot.wtTable.bordersHolder = document.createElement("div"), 
                    this.wot.wtTable.bordersHolder.className = "htBorders", this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)), 
                    this.wot.wtTable.bordersHolder.insertBefore(this.main, this.wot.wtTable.bordersHolder.firstChild);
                },
                createMultipleSelectorHandles: function() {
                    this.selectionHandles = {
                        topLeft: document.createElement("DIV"),
                        topLeftHitArea: document.createElement("DIV"),
                        bottomRight: document.createElement("DIV"),
                        bottomRightHitArea: document.createElement("DIV")
                    };
                    var a = 10, b = 40;
                    this.selectionHandles.topLeft.className = "topLeftSelectionHandle", this.selectionHandles.topLeftHitArea.className = "topLeftSelectionHandle-HitArea", 
                    this.selectionHandles.bottomRight.className = "bottomRightSelectionHandle", this.selectionHandles.bottomRightHitArea.className = "bottomRightSelectionHandle-HitArea", 
                    this.selectionHandles.styles = {
                        topLeft: this.selectionHandles.topLeft.style,
                        topLeftHitArea: this.selectionHandles.topLeftHitArea.style,
                        bottomRight: this.selectionHandles.bottomRight.style,
                        bottomRightHitArea: this.selectionHandles.bottomRightHitArea.style
                    };
                    var c = {
                        position: "absolute",
                        height: b + "px",
                        width: b + "px",
                        "border-radius": parseInt(b / 1.5, 10) + "px"
                    };
                    for (var d in c) c.hasOwnProperty(d) && (this.selectionHandles.styles.bottomRightHitArea[d] = c[d], 
                    this.selectionHandles.styles.topLeftHitArea[d] = c[d]);
                    var e = {
                        position: "absolute",
                        height: a + "px",
                        width: a + "px",
                        "border-radius": parseInt(a / 1.5, 10) + "px",
                        background: "#F5F5FF",
                        border: "1px solid #4285c8"
                    };
                    for (var f in e) e.hasOwnProperty(f) && (this.selectionHandles.styles.bottomRight[f] = e[f], 
                    this.selectionHandles.styles.topLeft[f] = e[f]);
                    this.main.appendChild(this.selectionHandles.topLeft), this.main.appendChild(this.selectionHandles.bottomRight), 
                    this.main.appendChild(this.selectionHandles.topLeftHitArea), this.main.appendChild(this.selectionHandles.bottomRightHitArea);
                },
                isPartRange: function(a, b) {
                    return this.wot.selections.area.cellRange && (a != this.wot.selections.area.cellRange.to.row || b != this.wot.selections.area.cellRange.to.col);
                },
                updateMultipleSelectionHandlesPosition: function(a, b, c, d, e, f) {
                    var g = parseInt(this.selectionHandles.styles.topLeft.width, 10), h = parseInt(this.selectionHandles.styles.topLeftHitArea.width, 10);
                    this.selectionHandles.styles.topLeft.top = parseInt(c - g, 10) + "px", this.selectionHandles.styles.topLeft.left = parseInt(d - g, 10) + "px", 
                    this.selectionHandles.styles.topLeftHitArea.top = parseInt(c - h / 4 * 3, 10) + "px", 
                    this.selectionHandles.styles.topLeftHitArea.left = parseInt(d - h / 4 * 3, 10) + "px", 
                    this.selectionHandles.styles.bottomRight.top = parseInt(c + f, 10) + "px", this.selectionHandles.styles.bottomRight.left = parseInt(d + e, 10) + "px", 
                    this.selectionHandles.styles.bottomRightHitArea.top = parseInt(c + f - h / 4, 10) + "px", 
                    this.selectionHandles.styles.bottomRightHitArea.left = parseInt(d + e - h / 4, 10) + "px", 
                    this.settings.border.multipleSelectionHandlesVisible && this.settings.border.multipleSelectionHandlesVisible() ? (this.selectionHandles.styles.topLeft.display = "block", 
                    this.selectionHandles.styles.topLeftHitArea.display = "block", this.isPartRange(a, b) ? (this.selectionHandles.styles.bottomRight.display = "none", 
                    this.selectionHandles.styles.bottomRightHitArea.display = "none") : (this.selectionHandles.styles.bottomRight.display = "block", 
                    this.selectionHandles.styles.bottomRightHitArea.display = "block")) : (this.selectionHandles.styles.topLeft.display = "none", 
                    this.selectionHandles.styles.bottomRight.display = "none", this.selectionHandles.styles.topLeftHitArea.display = "none", 
                    this.selectionHandles.styles.bottomRightHitArea.display = "none"), a == this.wot.wtSettings.getSetting("fixedRowsTop") || b == this.wot.wtSettings.getSetting("fixedColumnsLeft") ? (this.selectionHandles.styles.topLeft.zIndex = "9999", 
                    this.selectionHandles.styles.topLeftHitArea.zIndex = "9999") : (this.selectionHandles.styles.topLeft.zIndex = "", 
                    this.selectionHandles.styles.topLeftHitArea.zIndex = "");
                },
                appear: function(a) {
                    if (!this.disabled) {
                        var b, c, d, e, f, g, h, i, q, r, u, v, w, x, y, z, A, B, C;
                        C = t.isOverlayTypeOf(this.wot.cloneOverlay, t.CLONE_TOP) || t.isOverlayTypeOf(this.wot.cloneOverlay, t.CLONE_TOP_LEFT_CORNER) ? this.wot.getSetting("fixedRowsTop") : t.isOverlayTypeOf(this.wot.cloneOverlay, t.CLONE_BOTTOM) || t.isOverlayTypeOf(this.wot.cloneOverlay, t.CLONE_BOTTOM_LEFT_CORNER) ? this.wot.getSetting("fixedRowsBottom") : this.wot.wtTable.getRenderedRowsCount();
                        for (var D = 0; C > D; D++) {
                            var E = this.wot.wtTable.rowFilter.renderedToSource(D);
                            if (E >= a[0] && E <= a[2]) {
                                w = E;
                                break;
                            }
                        }
                        for (var F = C - 1; F >= 0; F--) {
                            var G = this.wot.wtTable.rowFilter.renderedToSource(F);
                            if (G >= a[0] && G <= a[2]) {
                                y = G;
                                break;
                            }
                        }
                        C = this.wot.wtTable.getRenderedColumnsCount();
                        for (var H = 0; C > H; H++) {
                            var I = this.wot.wtTable.columnFilter.renderedToSource(H);
                            if (I >= a[1] && I <= a[3]) {
                                x = I;
                                break;
                            }
                        }
                        for (var J = C - 1; J >= 0; J--) {
                            var K = this.wot.wtTable.columnFilter.renderedToSource(J);
                            if (K >= a[1] && K <= a[3]) {
                                z = K;
                                break;
                            }
                        }
                        if (void 0 === w || void 0 === x) return void this.disappear();
                        b = w !== y || x !== z, c = this.wot.wtTable.getCell(new s(w, x)), d = b ? this.wot.wtTable.getCell(new s(y, z)) : c, 
                        e = n(c), f = b ? n(d) : e, g = n(this.wot.wtTable.TABLE), i = e.top, u = f.top + o(d) - i, 
                        r = e.left, v = f.left + p(d) - r, h = i - g.top - 1, q = r - g.left - 1;
                        var L = j(c);
                        parseInt(L.borderTopWidth, 10) > 0 && (h += 1, u = u > 0 ? u - 1 : 0), parseInt(L.borderLeftWidth, 10) > 0 && (q += 1, 
                        v = v > 0 ? v - 1 : 0), this.topStyle.top = h + "px", this.topStyle.left = q + "px", 
                        this.topStyle.width = v + "px", this.topStyle.display = "block", this.leftStyle.top = h + "px", 
                        this.leftStyle.left = q + "px", this.leftStyle.height = u + "px", this.leftStyle.display = "block";
                        var M = Math.floor(this.settings.border.width / 2);
                        this.bottomStyle.top = h + u - M + "px", this.bottomStyle.left = q + "px", this.bottomStyle.width = v + "px", 
                        this.bottomStyle.display = "block", this.rightStyle.top = h + "px", this.rightStyle.left = q + v - M + "px", 
                        this.rightStyle.height = u + 1 + "px", this.rightStyle.display = "block", Handsontable.mobileBrowser || !this.hasSetting(this.settings.border.cornerVisible) || this.isPartRange(y, z) ? this.cornerStyle.display = "none" : (this.cornerStyle.top = h + u - 4 + "px", 
                        this.cornerStyle.left = q + v - 4 + "px", this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth, 
                        this.cornerStyle.width = this.cornerDefaultStyle.width, this.cornerStyle.display = "block", 
                        A = k(this.wot.wtTable.TABLE), z === this.wot.getSetting("totalColumns") - 1 && (B = d.offsetLeft + p(d) >= l(A), 
                        B && (this.cornerStyle.left = Math.floor(q + v - 3 - parseInt(this.cornerDefaultStyle.width) / 2) + "px", 
                        this.cornerStyle.borderRightWidth = 0)), y === this.wot.getSetting("totalRows") - 1 && (B = d.offsetTop + o(d) >= m(A), 
                        B && (this.cornerStyle.top = Math.floor(h + u - 3 - parseInt(this.cornerDefaultStyle.height) / 2) + "px", 
                        this.cornerStyle.borderBottomWidth = 0))), Handsontable.mobileBrowser && this.updateMultipleSelectionHandlesPosition(w, x, h, q, v, u);
                    }
                },
                disappear: function() {
                    this.topStyle.display = "none", this.leftStyle.display = "none", this.bottomStyle.display = "none", 
                    this.rightStyle.display = "none", this.cornerStyle.display = "none", Handsontable.mobileBrowser && (this.selectionHandles.styles.topLeft.display = "none", 
                    this.selectionHandles.styles.bottomRight.display = "none");
                },
                hasSetting: function(a) {
                    return "function" == typeof a ? a() : !!a;
                }
            }, {}), window.WalkontableBorder = u;
        }, {
            "cell/coords": 5,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "overlay/_base.js": 11
        } ],
        3: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableViewportColumnsCalculator: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = new WeakMap(), e = function(a, b, c, e, f, g, h) {
                d.set(this, {
                    viewportWidth: a,
                    scrollOffset: b,
                    totalColumns: c,
                    columnWidthFn: e,
                    overrideFn: f,
                    onlyFullyVisible: g
                }), this.count = 0, this.startColumn = null, this.endColumn = null, this.startPosition = null, 
                this.stretchAllRatio = 0, this.stretchLastWidth = 0, this.stretch = h, this.totalTargetWidth = 0, 
                this.needVerifyLastColumnWidth = !0, this.stretchAllColumnsWidth = [], this.calculate();
            }, f = e;
            $traceurRuntime.createClass(e, {
                calculate: function() {
                    for (var a, b = 0, c = !0, e = [], f = d.get(this), g = f.onlyFullyVisible, h = f.overrideFn, i = f.scrollOffset, j = f.totalColumns, k = f.viewportWidth, l = 0; j > l; l++) if (a = this._getColumnWidth(l), 
                    i >= b && !g && (this.startColumn = l), b >= i && i + k >= b + a && (null == this.startColumn && (this.startColumn = l), 
                    this.endColumn = l), e.push(b), b += a, g || (this.endColumn = l), b >= i + k) {
                        c = !1;
                        break;
                    }
                    if (this.endColumn === j - 1 && c) for (this.startColumn = this.endColumn; this.startColumn > 0; ) {
                        var m = e[this.endColumn] + a - e[this.startColumn - 1];
                        if ((k >= m || !g) && this.startColumn--, m > k) break;
                    }
                    null !== this.startColumn && h && h(this), this.startPosition = e[this.startColumn], 
                    void 0 == this.startPosition && (this.startPosition = null), null !== this.startColumn && (this.count = this.endColumn - this.startColumn + 1);
                },
                refreshStretching: function(a) {
                    if ("none" !== this.stretch) {
                        for (var b, c, e = 0, f = d.get(this), g = f.totalColumns, h = 0; g > h; h++) b = this._getColumnWidth(h), 
                        e += b;
                        this.totalTargetWidth = a, c = e - a, "all" === this.stretch && 0 > c ? (this.stretchAllRatio = a / e, 
                        this.stretchAllColumnsWidth = [], this.needVerifyLastColumnWidth = !0) : "last" === this.stretch && a !== 1 / 0 && (this.stretchLastWidth = -c + this._getColumnWidth(g - 1));
                    }
                },
                getStretchedColumnWidth: function(a, b) {
                    var c = null;
                    return "all" === this.stretch && 0 !== this.stretchAllRatio ? c = this._getStretchedAllColumnWidth(a, b) : "last" === this.stretch && 0 !== this.stretchLastWidth && (c = this._getStretchedLastColumnWidth(a)), 
                    c;
                },
                _getStretchedAllColumnWidth: function(a, b) {
                    var c = 0, e = d.get(this), f = e.totalColumns;
                    if (this.stretchAllColumnsWidth[a] || (this.stretchAllColumnsWidth[a] = Math.round(b * this.stretchAllRatio)), 
                    this.stretchAllColumnsWidth.length === f && this.needVerifyLastColumnWidth) {
                        this.needVerifyLastColumnWidth = !1;
                        for (var g = 0; g < this.stretchAllColumnsWidth.length; g++) c += this.stretchAllColumnsWidth[g];
                        c !== this.totalTargetWidth && (this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length - 1] += this.totalTargetWidth - c);
                    }
                    return this.stretchAllColumnsWidth[a];
                },
                _getStretchedLastColumnWidth: function(a) {
                    var b = d.get(this), c = b.totalColumns;
                    return a === c - 1 ? this.stretchLastWidth : null;
                },
                _getColumnWidth: function(a) {
                    var b = d.get(this).columnWidthFn(a);
                    return void 0 === b && (b = f.DEFAULT_WIDTH), b;
                }
            }, {
                get DEFAULT_WIDTH() {
                    return 50;
                }
            }), window.WalkontableViewportColumnsCalculator = e;
        }, {} ],
        4: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableViewportRowsCalculator: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = new WeakMap(), e = function(a, b, c, e, f, g, h) {
                d.set(this, {
                    viewportHeight: a,
                    scrollOffset: b,
                    totalRows: c,
                    rowHeightFn: e,
                    overrideFn: f,
                    onlyFullyVisible: g,
                    horizontalScrollbarHeight: h
                }), this.count = 0, this.startRow = null, this.endRow = null, this.startPosition = null, 
                this.calculate();
            }, f = e;
            $traceurRuntime.createClass(e, {
                calculate: function() {
                    for (var a = 0, b = !0, c = [], e = d.get(this), g = e.onlyFullyVisible, h = e.overrideFn, i = e.rowHeightFn, j = e.scrollOffset, k = e.totalRows, l = e.viewportHeight, m = e.horizontalScrollbarHeight || 0, n = 0; k > n; n++) {
                        var o = i(n);
                        if (void 0 === o && (o = f.DEFAULT_HEIGHT), j >= a && !g && (this.startRow = n), 
                        a >= j && j + l - m >= a + o && (null === this.startRow && (this.startRow = n), 
                        this.endRow = n), c.push(a), a += o, g || (this.endRow = n), a >= j + l - m) {
                            b = !1;
                            break;
                        }
                    }
                    if (this.endRow === k - 1 && b) for (this.startRow = this.endRow; this.startRow > 0; ) {
                        var p = c[this.endRow] + o - c[this.startRow - 1];
                        if ((l - m >= p || !g) && this.startRow--, p >= l - m) break;
                    }
                    null !== this.startRow && h && h(this), this.startPosition = c[this.startRow], void 0 == this.startPosition && (this.startPosition = null), 
                    null !== this.startRow && (this.count = this.endRow - this.startRow + 1);
                }
            }, {
                get DEFAULT_HEIGHT() {
                    return 23;
                }
            }), window.WalkontableViewportRowsCalculator = e;
        }, {} ],
        5: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableCellCoords: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = function(a, b) {
                "undefined" != typeof a && "undefined" != typeof b ? (this.row = a, this.col = b) : (this.row = null, 
                this.col = null);
            };
            $traceurRuntime.createClass(d, {
                isValid: function(a) {
                    return this.row < 0 || this.col < 0 ? !1 : !(this.row >= a.getSetting("totalRows") || this.col >= a.getSetting("totalColumns"));
                },
                isEqual: function(a) {
                    return a === this ? !0 : this.row === a.row && this.col === a.col;
                },
                isSouthEastOf: function(a) {
                    return this.row >= a.row && this.col >= a.col;
                },
                isNorthWestOf: function(a) {
                    return this.row <= a.row && this.col <= a.col;
                },
                isSouthWestOf: function(a) {
                    return this.row >= a.row && this.col <= a.col;
                },
                isNorthEastOf: function(a) {
                    return this.row <= a.row && this.col >= a.col;
                }
            }, {}), window.WalkontableCellCoords = d;
        }, {} ],
        6: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableCellRange: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e = (d = a("cell/coords"), d && d.__esModule && d || {
                "default": d
            }).WalkontableCellCoords, f = function(a, b, c) {
                this.highlight = a, this.from = b, this.to = c;
            }, g = f;
            $traceurRuntime.createClass(f, {
                isValid: function(a) {
                    return this.from.isValid(a) && this.to.isValid(a);
                },
                isSingle: function() {
                    return this.from.row === this.to.row && this.from.col === this.to.col;
                },
                getHeight: function() {
                    return Math.max(this.from.row, this.to.row) - Math.min(this.from.row, this.to.row) + 1;
                },
                getWidth: function() {
                    return Math.max(this.from.col, this.to.col) - Math.min(this.from.col, this.to.col) + 1;
                },
                includes: function(a) {
                    var b = this.getTopLeftCorner(), c = this.getBottomRightCorner();
                    return a.row < 0 && (a.row = 0), a.col < 0 && (a.col = 0), b.row <= a.row && c.row >= a.row && b.col <= a.col && c.col >= a.col;
                },
                includesRange: function(a) {
                    return this.includes(a.getTopLeftCorner()) && this.includes(a.getBottomRightCorner());
                },
                isEqual: function(a) {
                    return Math.min(this.from.row, this.to.row) == Math.min(a.from.row, a.to.row) && Math.max(this.from.row, this.to.row) == Math.max(a.from.row, a.to.row) && Math.min(this.from.col, this.to.col) == Math.min(a.from.col, a.to.col) && Math.max(this.from.col, this.to.col) == Math.max(a.from.col, a.to.col);
                },
                overlaps: function(a) {
                    return a.isSouthEastOf(this.getTopLeftCorner()) && a.isNorthWestOf(this.getBottomRightCorner());
                },
                isSouthEastOf: function(a) {
                    return this.getTopLeftCorner().isSouthEastOf(a) || this.getBottomRightCorner().isSouthEastOf(a);
                },
                isNorthWestOf: function(a) {
                    return this.getTopLeftCorner().isNorthWestOf(a) || this.getBottomRightCorner().isNorthWestOf(a);
                },
                expand: function(a) {
                    var b = this.getTopLeftCorner(), c = this.getBottomRightCorner();
                    return a.row < b.row || a.col < b.col || a.row > c.row || a.col > c.col ? (this.from = new e(Math.min(b.row, a.row), Math.min(b.col, a.col)), 
                    this.to = new e(Math.max(c.row, a.row), Math.max(c.col, a.col)), !0) : !1;
                },
                expandByRange: function(a) {
                    if (this.includesRange(a) || !this.overlaps(a)) return !1;
                    var b = this.getTopLeftCorner(), c = this.getBottomRightCorner(), d = (this.getTopRightCorner(), 
                    this.getBottomLeftCorner(), a.getTopLeftCorner()), f = a.getBottomRightCorner(), h = Math.min(b.row, d.row), i = Math.min(b.col, d.col), j = Math.max(c.row, f.row), k = Math.max(c.col, f.col), l = new e(h, i), m = new e(j, k), n = new g(l, l, m).isCorner(this.from, a), o = a.isEqual(new g(l, l, m));
                    return n && !o && (this.from.col > l.col && (l.col = k, m.col = i), this.from.row > l.row && (l.row = j, 
                    m.row = h)), this.from = l, this.to = m, !0;
                },
                getDirection: function() {
                    return this.from.isNorthWestOf(this.to) ? "NW-SE" : this.from.isNorthEastOf(this.to) ? "NE-SW" : this.from.isSouthEastOf(this.to) ? "SE-NW" : this.from.isSouthWestOf(this.to) ? "SW-NE" : void 0;
                },
                setDirection: function(a) {
                    switch (a) {
                      case "NW-SE":
                        this.from = this.getTopLeftCorner(), this.to = this.getBottomRightCorner();
                        break;

                      case "NE-SW":
                        this.from = this.getTopRightCorner(), this.to = this.getBottomLeftCorner();
                        break;

                      case "SE-NW":
                        this.from = this.getBottomRightCorner(), this.to = this.getTopLeftCorner();
                        break;

                      case "SW-NE":
                        this.from = this.getBottomLeftCorner(), this.to = this.getTopRightCorner();
                    }
                },
                getTopLeftCorner: function() {
                    return new e(Math.min(this.from.row, this.to.row), Math.min(this.from.col, this.to.col));
                },
                getBottomRightCorner: function() {
                    return new e(Math.max(this.from.row, this.to.row), Math.max(this.from.col, this.to.col));
                },
                getTopRightCorner: function() {
                    return new e(Math.min(this.from.row, this.to.row), Math.max(this.from.col, this.to.col));
                },
                getBottomLeftCorner: function() {
                    return new e(Math.max(this.from.row, this.to.row), Math.min(this.from.col, this.to.col));
                },
                isCorner: function(a, b) {
                    return b && b.includes(a) && (this.getTopLeftCorner().isEqual(new e(b.from.row, b.from.col)) || this.getTopRightCorner().isEqual(new e(b.from.row, b.to.col)) || this.getBottomLeftCorner().isEqual(new e(b.to.row, b.from.col)) || this.getBottomRightCorner().isEqual(new e(b.to.row, b.to.col))) ? !0 : a.isEqual(this.getTopLeftCorner()) || a.isEqual(this.getTopRightCorner()) || a.isEqual(this.getBottomLeftCorner()) || a.isEqual(this.getBottomRightCorner());
                },
                getOppositeCorner: function(a, b) {
                    if (!(a instanceof e)) return !1;
                    if (b && b.includes(a)) {
                        if (this.getTopLeftCorner().isEqual(new e(b.from.row, b.from.col))) return this.getBottomRightCorner();
                        if (this.getTopRightCorner().isEqual(new e(b.from.row, b.to.col))) return this.getBottomLeftCorner();
                        if (this.getBottomLeftCorner().isEqual(new e(b.to.row, b.from.col))) return this.getTopRightCorner();
                        if (this.getBottomRightCorner().isEqual(new e(b.to.row, b.to.col))) return this.getTopLeftCorner();
                    }
                    return a.isEqual(this.getBottomRightCorner()) ? this.getTopLeftCorner() : a.isEqual(this.getTopLeftCorner()) ? this.getBottomRightCorner() : a.isEqual(this.getTopRightCorner()) ? this.getBottomLeftCorner() : a.isEqual(this.getBottomLeftCorner()) ? this.getTopRightCorner() : void 0;
                },
                getBordersSharedWith: function(a) {
                    if (!this.includesRange(a)) return [];
                    var b = {
                        top: Math.min(this.from.row, this.to.row),
                        bottom: Math.max(this.from.row, this.to.row),
                        left: Math.min(this.from.col, this.to.col),
                        right: Math.max(this.from.col, this.to.col)
                    }, c = {
                        top: Math.min(a.from.row, a.to.row),
                        bottom: Math.max(a.from.row, a.to.row),
                        left: Math.min(a.from.col, a.to.col),
                        right: Math.max(a.from.col, a.to.col)
                    }, d = [];
                    return b.top == c.top && d.push("top"), b.right == c.right && d.push("right"), b.bottom == c.bottom && d.push("bottom"), 
                    b.left == c.left && d.push("left"), d;
                },
                getInner: function() {
                    for (var a = this.getTopLeftCorner(), b = this.getBottomRightCorner(), c = [], d = a.row; d <= b.row; d++) for (var f = a.col; f <= b.col; f++) this.from.row === d && this.from.col === f || this.to.row === d && this.to.col === f || c.push(new e(d, f));
                    return c;
                },
                getAll: function() {
                    for (var a = this.getTopLeftCorner(), b = this.getBottomRightCorner(), c = [], d = a.row; d <= b.row; d++) for (var f = a.col; f <= b.col; f++) a.row === d && a.col === f ? c.push(a) : b.row === d && b.col === f ? c.push(b) : c.push(new e(d, f));
                    return c;
                },
                forAll: function(a) {
                    for (var b = this.getTopLeftCorner(), c = this.getBottomRightCorner(), d = b.row; d <= c.row; d++) for (var e = b.col; e <= c.col; e++) {
                        var f = a(d, e);
                        if (f === !1) return;
                    }
                }
            }, {}), window.WalkontableCellRange = f;
        }, {
            "cell/coords": 5
        } ],
        7: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                Walkontable: {
                    get: function() {
                        return G;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = (d = a("helpers/dom/element"), 
            d && d.__esModule && d || {
                "default": d
            }), s = r.addClass, t = r.fastInnerText, u = r.isVisible, v = r.removeClass, w = (e = a("helpers/object"), 
            e && e.__esModule && e || {
                "default": e
            }).objectEach, x = (f = a("helpers/string"), f && f.__esModule && f || {
                "default": f
            }), y = x.toUpperCaseFirst, z = x.randomString, A = (g = a("event"), g && g.__esModule && g || {
                "default": g
            }).WalkontableEvent, B = (h = a("overlays"), h && h.__esModule && h || {
                "default": h
            }).WalkontableOverlays, C = (i = a("scroll"), i && i.__esModule && i || {
                "default": i
            }).WalkontableScroll, D = (j = a("settings"), j && j.__esModule && j || {
                "default": j
            }).WalkontableSettings, E = (k = a("table"), k && k.__esModule && k || {
                "default": k
            }).WalkontableTable, F = (l = a("viewport"), l && l.__esModule && l || {
                "default": l
            }).WalkontableViewport, G = ((m = a("overlay/_base.js"), m && m.__esModule && m || {
                "default": m
            }).WalkontableOverlay, (n = a("overlay/top.js"), n && n.__esModule && n || {
                "default": n
            }).WalkontableTopOverlay, (o = a("overlay/left.js"), o && o.__esModule && o || {
                "default": o
            }).WalkontableLeftOverlay, (p = a("overlay/debug.js"), p && p.__esModule && p || {
                "default": p
            }).WalkontableDebugOverlay, (q = a("overlay/topLeftCorner.js"), q && q.__esModule && q || {
                "default": q
            }).WalkontableTopLeftCornerOverlay, function(a) {
                var b = [];
                if (this.guid = "wt_" + z(), a.cloneSource ? (this.cloneSource = a.cloneSource, 
                this.cloneOverlay = a.cloneOverlay, this.wtSettings = a.cloneSource.wtSettings, 
                this.wtTable = new E(this, a.table, a.wtRootElement), this.wtScroll = new C(this), 
                this.wtViewport = a.cloneSource.wtViewport, this.wtEvent = new A(this), this.selections = this.cloneSource.selections) : (this.wtSettings = new D(this, a), 
                this.wtTable = new E(this, a.table), this.wtScroll = new C(this), this.wtViewport = new F(this), 
                this.wtEvent = new A(this), this.selections = this.getSetting("selections"), this.wtOverlays = new B(this), 
                this.exportSettingsAsClassNames()), this.wtTable.THEAD.childNodes.length && this.wtTable.THEAD.childNodes[0].childNodes.length) {
                    for (var c = 0, d = this.wtTable.THEAD.childNodes[0].childNodes.length; d > c; c++) b.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);
                    this.getSetting("columnHeaders").length || this.update("columnHeaders", [ function(a, c) {
                        t(c, b[a]);
                    } ]);
                }
                this.drawn = !1, this.drawInterrupted = !1;
            });
            $traceurRuntime.createClass(G, {
                draw: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    return this.drawInterrupted = !1, a || u(this.wtTable.TABLE) ? this.wtTable.draw(a) : this.drawInterrupted = !0, 
                    this;
                },
                getCell: function(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : !1;
                    if (!b) return this.wtTable.getCell(a);
                    var c = this.wtSettings.getSetting("totalRows"), d = this.wtSettings.getSetting("fixedRowsTop"), e = this.wtSettings.getSetting("fixedRowsBottom"), f = this.wtSettings.getSetting("fixedColumnsLeft");
                    if (a.row < d && a.col < f) return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(a);
                    if (a.row < d) return this.wtOverlays.topOverlay.clone.wtTable.getCell(a);
                    if (a.col < f && a.row >= c - e) {
                        if (this.wtOverlays.bottomLeftCornerOverlay.clone) return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(a);
                    } else {
                        if (a.col < f) return this.wtOverlays.leftOverlay.clone.wtTable.getCell(a);
                        if (a.row >= c - e && this.wtOverlays.bottomOverlay.clone) return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(a);
                    }
                    return this.wtTable.getCell(a);
                },
                update: function(a, b) {
                    return this.wtSettings.update(a, b);
                },
                scrollVertical: function(a) {
                    return this.wtOverlays.topOverlay.scrollTo(a), this.getSetting("onScrollVertically"), 
                    this;
                },
                scrollHorizontal: function(a) {
                    return this.wtOverlays.leftOverlay.scrollTo(a), this.getSetting("onScrollHorizontally"), 
                    this;
                },
                scrollViewport: function(a) {
                    return this.wtScroll.scrollViewport(a), this;
                },
                getViewport: function() {
                    return [ this.wtTable.getFirstVisibleRow(), this.wtTable.getFirstVisibleColumn(), this.wtTable.getLastVisibleRow(), this.wtTable.getLastVisibleColumn() ];
                },
                getOverlayName: function() {
                    return this.cloneOverlay ? this.cloneOverlay.type : "master";
                },
                exportSettingsAsClassNames: function() {
                    var a = this, b = {
                        rowHeaders: [ "array" ],
                        columnHeaders: [ "array" ]
                    }, c = [], d = [];
                    w(b, function(b, e) {
                        b.indexOf("array") > -1 && a.getSetting(e).length && d.push("ht" + y(e)), c.push("ht" + y(e));
                    }), v(this.wtTable.wtRootElement.parentNode, c), s(this.wtTable.wtRootElement.parentNode, d);
                },
                getSetting: function(a, b, c, d, e) {
                    return this.wtSettings.getSetting(a, b, c, d, e);
                },
                hasSetting: function(a) {
                    return this.wtSettings.has(a);
                },
                destroy: function() {
                    this.wtOverlays.destroy(), this.wtEvent.destroy();
                }
            }, {}), window.Walkontable = G;
        }, {
            event: 8,
            "helpers/dom/element": 44,
            "helpers/object": 49,
            "helpers/string": 51,
            "overlay/_base.js": 11,
            "overlay/debug.js": 12,
            "overlay/left.js": 13,
            "overlay/top.js": 14,
            "overlay/topLeftCorner.js": 15,
            overlays: 16,
            scroll: 17,
            settings: 19,
            table: 20,
            viewport: 22
        } ],
        8: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b = this, c = k(a);
                this.instance = a;
                var d = [ null, null ];
                this.dblClickTimeout = [ null, null ];
                var e, f, g = function(a) {
                    var c = b.parentCell(a.realTarget);
                    i(a.realTarget, "corner") ? b.instance.getSetting("onCellCornerMouseDown", a, a.realTarget) : c.TD && b.instance.hasSetting("onCellMouseDown") && b.instance.getSetting("onCellMouseDown", a, c.coords, c.TD, b.instance), 
                    2 !== a.button && c.TD && (d[0] = c.TD, clearTimeout(b.dblClickTimeout[0]), b.dblClickTimeout[0] = setTimeout(function() {
                        d[0] = null;
                    }, 1e3));
                }, l = function(a) {
                    b.instance.touchMoving = !0;
                }, m = function(a) {
                    c.addEventListener(this, "touchmove", l), b.checkIfTouchMove = setTimeout(function() {
                        return b.instance.touchMoving === !0 ? (b.instance.touchMoving = void 0, void c.removeEventListener("touchmove", l, !1)) : void g(a);
                    }, 30);
                }, n = function(a) {
                    var c, d;
                    b.instance.hasSetting("onCellMouseOver") && (c = b.instance.wtTable.TABLE, d = h(a.realTarget, [ "TD", "TH" ], c), 
                    d && d !== f && j(d, c) && (f = d, b.instance.getSetting("onCellMouseOver", a, b.instance.wtTable.getCoords(d), d, b.instance)));
                }, o = function(a) {
                    if (2 !== a.button) {
                        var c = b.parentCell(a.realTarget);
                        c.TD === d[0] && c.TD === d[1] ? (i(a.realTarget, "corner") ? b.instance.getSetting("onCellCornerDblClick", a, c.coords, c.TD, b.instance) : b.instance.getSetting("onCellDblClick", a, c.coords, c.TD, b.instance), 
                        d[0] = null, d[1] = null) : c.TD === d[0] && (d[1] = c.TD, clearTimeout(b.dblClickTimeout[1]), 
                        b.dblClickTimeout[1] = setTimeout(function() {
                            d[1] = null;
                        }, 500));
                    }
                }, p = function(a) {
                    clearTimeout(e), a.preventDefault(), o(a);
                };
                if (c.addEventListener(this.instance.wtTable.holder, "mousedown", g), c.addEventListener(this.instance.wtTable.TABLE, "mouseover", n), 
                c.addEventListener(this.instance.wtTable.holder, "mouseup", o), this.instance.wtTable.holder.parentNode.parentNode && Handsontable.mobileBrowser && !b.instance.wtTable.isWorkingOnClone()) {
                    var q = "." + this.instance.wtTable.holder.parentNode.className.split(" ").join(".");
                    c.addEventListener(this.instance.wtTable.holder, "touchstart", function(a) {
                        b.instance.touchApplied = !0, j(a.target, q) && m.call(a.target, a);
                    }), c.addEventListener(this.instance.wtTable.holder, "touchend", function(a) {
                        b.instance.touchApplied = !1, j(a.target, q) && p.call(a.target, a);
                    }), b.instance.momentumScrolling || (b.instance.momentumScrolling = {}), c.addEventListener(this.instance.wtTable.holder, "scroll", function(a) {
                        clearTimeout(b.instance.momentumScrolling._timeout), b.instance.momentumScrolling.ongoing || b.instance.getSetting("onBeforeTouchScroll"), 
                        b.instance.momentumScrolling.ongoing = !0, b.instance.momentumScrolling._timeout = setTimeout(function() {
                            b.instance.touchApplied || (b.instance.momentumScrolling.ongoing = !1, b.instance.getSetting("onAfterMomentumScroll"));
                        }, 200);
                    });
                }
                c.addEventListener(window, "resize", function() {
                    "none" !== b.instance.getSetting("stretchH") && b.instance.draw();
                }), this.destroy = function() {
                    clearTimeout(this.dblClickTimeout[0]), clearTimeout(this.dblClickTimeout[1]), c.destroy();
                };
            }
            Object.defineProperties(c, {
                WalkontableEvent: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), h = g.closest, i = g.hasClass, j = g.isChildOf, k = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager;
            d.prototype.parentCell = function(a) {
                var b = {}, c = this.instance.wtTable.TABLE, d = h(a, [ "TD", "TH" ], c);
                return d && j(d, c) ? (b.coords = this.instance.wtTable.getCoords(d), b.TD = d) : i(a, "wtBorder") && i(a, "current") ? (b.coords = this.instance.selections.current.cellRange.highlight, 
                b.TD = this.instance.wtTable.getCell(b.coords)) : i(a, "wtBorder") && i(a, "area") && this.instance.selections.area.cellRange && (b.coords = this.instance.selections.area.cellRange.to, 
                b.TD = this.instance.wtTable.getCell(b.coords)), b;
            }, window.WalkontableEvent = d;
        }, {
            eventManager: 40,
            "helpers/dom/element": 44
        } ],
        9: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableColumnFilter: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = function(a, b, c) {
                this.offset = a, this.total = b, this.countTH = c;
            };
            $traceurRuntime.createClass(d, {
                offsetted: function(a) {
                    return a + this.offset;
                },
                unOffsetted: function(a) {
                    return a - this.offset;
                },
                renderedToSource: function(a) {
                    return this.offsetted(a);
                },
                sourceToRendered: function(a) {
                    return this.unOffsetted(a);
                },
                offsettedTH: function(a) {
                    return a - this.countTH;
                },
                unOffsettedTH: function(a) {
                    return a + this.countTH;
                },
                visibleRowHeadedColumnToSourceColumn: function(a) {
                    return this.renderedToSource(this.offsettedTH(a));
                },
                sourceColumnToVisibleRowHeadedColumn: function(a) {
                    return this.unOffsettedTH(this.sourceToRendered(a));
                }
            }, {}), window.WalkontableColumnFilter = d;
        }, {} ],
        10: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableRowFilter: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = function(a, b, c) {
                this.offset = a, this.total = b, this.countTH = c;
            };
            $traceurRuntime.createClass(d, {
                offsetted: function(a) {
                    return a + this.offset;
                },
                unOffsetted: function(a) {
                    return a - this.offset;
                },
                renderedToSource: function(a) {
                    return this.offsetted(a);
                },
                sourceToRendered: function(a) {
                    return this.unOffsetted(a);
                },
                offsettedTH: function(a) {
                    return a - this.countTH;
                },
                unOffsettedTH: function(a) {
                    return a + this.countTH;
                },
                visibleColHeadedRowToSourceRow: function(a) {
                    return this.renderedToSource(this.offsettedTH(a));
                },
                sourceRowToVisibleColHeadedRow: function(a) {
                    return this.unOffsettedTH(this.sourceToRendered(a));
                }
            }, {}), window.WalkontableRowFilter = d;
        }, {} ],
        11: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableOverlay: {
                    get: function() {
                        return m;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), h = g.getScrollableElement, i = g.getTrimmingContainer, j = (e = a("helpers/object"), 
            e && e.__esModule && e || {
                "default": e
            }).defineGetter, k = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).eventManager, l = {}, m = function(a) {
                j(this, "wot", a, {
                    writable: !1
                }), this.instance = this.wot, this.type = "", this.TABLE = this.wot.wtTable.TABLE, 
                this.hider = this.wot.wtTable.hider, this.spreader = this.wot.wtTable.spreader, 
                this.holder = this.wot.wtTable.holder, this.wtRootElement = this.wot.wtTable.wtRootElement, 
                this.trimmingContainer = i(this.hider.parentNode.parentNode), this.mainTableScrollableElement = h(this.wot.wtTable.TABLE), 
                this.needFullRender = this.shouldBeRendered(), this.areElementSizesAdjusted = !1;
            }, n = m;
            $traceurRuntime.createClass(m, {
                shouldBeRendered: function() {
                    return !0;
                },
                makeClone: function(a) {
                    if (-1 === n.CLONE_TYPES.indexOf(a)) throw new Error('Clone type "' + a + '" is not supported.');
                    var b = document.createElement("DIV"), c = document.createElement("TABLE");
                    return b.className = "ht_clone_" + a + " handsontable", b.style.position = "absolute", 
                    b.style.top = 0, b.style.left = 0, b.style.overflow = "hidden", c.className = this.wot.wtTable.TABLE.className, 
                    b.appendChild(c), this.type = a, this.wot.wtTable.wtRootElement.parentNode.appendChild(b), 
                    new Walkontable({
                        cloneSource: this.wot,
                        cloneOverlay: this,
                        table: c
                    });
                },
                refresh: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1, b = this.shouldBeRendered();
                    this.clone && (this.needFullRender || b) && this.clone.draw(a), this.needFullRender = b;
                },
                destroy: function() {
                    k(this.clone).destroy();
                }
            }, {
                get CLONE_TOP() {
                    return "top";
                },
                get CLONE_BOTTOM() {
                    return "bottom";
                },
                get CLONE_LEFT() {
                    return "left";
                },
                get CLONE_TOP_LEFT_CORNER() {
                    return "top_left_corner";
                },
                get CLONE_BOTTOM_LEFT_CORNER() {
                    return "bottom_left_corner";
                },
                get CLONE_DEBUG() {
                    return "debug";
                },
                get CLONE_TYPES() {
                    return [ n.CLONE_TOP, n.CLONE_BOTTOM, n.CLONE_LEFT, n.CLONE_TOP_LEFT_CORNER, n.CLONE_BOTTOM_LEFT_CORNER, n.CLONE_DEBUG ];
                },
                registerOverlay: function(a, b) {
                    if (-1 === n.CLONE_TYPES.indexOf(a)) throw new Error("Unsupported overlay (" + a + ").");
                    l[a] = b;
                },
                createOverlay: function(a, b) {
                    return new l[a](b);
                },
                isOverlayTypeOf: function(a, b) {
                    return a && l[b] ? a instanceof l[b] : !1;
                }
            }), window.WalkontableOverlay = m;
        }, {
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/object": 49
        } ],
        12: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableDebugOverlay: {
                    get: function() {
                        return h;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).addClass, g = (e = a("_base"), e && e.__esModule && e || {
                "default": e
            }).WalkontableOverlay, h = function(a) {
                $traceurRuntime.superConstructor(i).call(this, a), this.clone = this.makeClone(g.CLONE_DEBUG), 
                this.clone.wtTable.holder.style.opacity = .4, this.clone.wtTable.holder.style.textShadow = "0 0 2px #ff0000", 
                f(this.clone.wtTable.holder.parentNode, "wtDebugVisible");
            }, i = h;
            $traceurRuntime.createClass(h, {}, {}, g), window.WalkontableDebugOverlay = h, g.registerOverlay(g.CLONE_DEBUG, h);
        }, {
            _base: 11,
            "helpers/dom/element": 44
        } ],
        13: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableLeftOverlay: {
                    get: function() {
                        return p;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), g = f.addClass, h = f.getScrollbarWidth, i = f.getScrollLeft, j = f.getWindowScrollTop, k = f.hasClass, l = f.outerWidth, m = f.removeClass, n = f.setOverlayPosition, o = (e = a("_base"), 
            e && e.__esModule && e || {
                "default": e
            }).WalkontableOverlay, p = function(a) {
                $traceurRuntime.superConstructor(q).call(this, a), this.clone = this.makeClone(o.CLONE_LEFT);
            }, q = p;
            $traceurRuntime.createClass(p, {
                shouldBeRendered: function() {
                    return !(!this.wot.getSetting("fixedColumnsLeft") && !this.wot.getSetting("rowHeaders").length);
                },
                resetFixedPosition: function() {
                    if (this.needFullRender && this.wot.wtTable.holder.parentNode) {
                        var a = this.clone.wtTable.holder.parentNode, b = 0;
                        if (this.trimmingContainer === window) {
                            var c, d, e = this.wot.wtTable.hider.getBoundingClientRect(), f = Math.ceil(e.left), g = Math.ceil(e.right);
                            d = this.wot.wtTable.hider.style.top, d = "" === d ? 0 : d, c = 0 > f && g - a.offsetWidth > 0 ? -f : 0, 
                            b = c, c += "px", n(a, c, d);
                        } else b = this.getScrollPosition();
                        this.adjustHeaderBordersPosition(b), this.adjustElementsSize();
                    }
                },
                setScrollPosition: function(a) {
                    this.mainTableScrollableElement === window ? window.scrollTo(a, j()) : this.mainTableScrollableElement.scrollLeft = a;
                },
                onScroll: function() {
                    this.wot.getSetting("onScrollHorizontally");
                },
                sumCellSizes: function(a, b) {
                    for (var c = 0, d = this.wot.wtSettings.defaultColumnWidth; b > a; ) c += this.wot.wtTable.getStretchedColumnWidth(a) || d, 
                    a++;
                    return c;
                },
                adjustElementsSize: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    (this.needFullRender || a) && (this.adjustRootElementSize(), this.adjustRootChildrenSize(), 
                    a || (this.areElementSizesAdjusted = !0));
                },
                adjustRootElementSize: function() {
                    var a, b = this.wot.wtTable.holder, c = b.clientHeight === b.offsetHeight ? 0 : h(), d = this.clone.wtTable.holder.parentNode, e = d.style;
                    this.trimmingContainer !== window && (e.height = this.wot.wtViewport.getWorkspaceHeight() - c + "px"), 
                    this.clone.wtTable.holder.style.height = e.height, a = l(this.clone.wtTable.TABLE), 
                    e.width = (0 === a ? a : a + 4) + "px";
                },
                adjustRootChildrenSize: function() {
                    var a = h();
                    this.clone.wtTable.hider.style.height = this.hider.style.height, this.clone.wtTable.holder.style.height = this.clone.wtTable.holder.parentNode.style.height, 
                    0 === a && (a = 30), this.clone.wtTable.holder.style.width = parseInt(this.clone.wtTable.holder.parentNode.style.width, 10) + a + "px";
                },
                applyToDOM: function() {
                    var a = this.wot.getSetting("totalColumns");
                    if (this.areElementSizesAdjusted || this.adjustElementsSize(), "number" == typeof this.wot.wtViewport.columnsRenderCalculator.startPosition) this.spreader.style.left = this.wot.wtViewport.columnsRenderCalculator.startPosition + "px"; else {
                        if (0 !== a) throw new Error("Incorrect value of the columnsRenderCalculator");
                        this.spreader.style.left = "0";
                    }
                    this.spreader.style.right = "", this.needFullRender && this.syncOverlayOffset();
                },
                syncOverlayOffset: function() {
                    "number" == typeof this.wot.wtViewport.rowsRenderCalculator.startPosition ? this.clone.wtTable.spreader.style.top = this.wot.wtViewport.rowsRenderCalculator.startPosition + "px" : this.clone.wtTable.spreader.style.top = "";
                },
                scrollTo: function(a, b) {
                    var c = this.getTableParentOffset(), d = this.wot.cloneSource ? this.wot.cloneSource : this.wot, e = d.wtTable.holder, f = 0;
                    b && e.offsetWidth !== e.clientWidth && (f = h()), b ? (c += this.sumCellSizes(0, a + 1), 
                    c -= this.wot.wtViewport.getViewportWidth()) : c += this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"), a), 
                    c += f, this.setScrollPosition(c);
                },
                getTableParentOffset: function() {
                    return this.trimmingContainer === window ? this.wot.wtTable.holderOffset.left : 0;
                },
                getScrollPosition: function() {
                    return i(this.mainTableScrollableElement);
                },
                adjustHeaderBordersPosition: function(a) {
                    var b = this.wot.wtTable.holder.parentNode, c = this.wot.getSetting("rowHeaders"), d = this.wot.getSetting("fixedColumnsLeft");
                    if (d && !c.length) g(b, "innerBorderLeft"); else if (!d && c.length) {
                        var e = k(b, "innerBorderLeft");
                        a ? g(b, "innerBorderLeft") : m(b, "innerBorderLeft"), (!e && a || e && !a) && this.wot.wtOverlays.adjustElementsSize();
                    }
                }
            }, {}, o), window.WalkontableLeftOverlay = p, o.registerOverlay(o.CLONE_LEFT, p);
        }, {
            _base: 11,
            "helpers/dom/element": 44
        } ],
        14: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableTopOverlay: {
                    get: function() {
                        return p;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), g = f.addClass, h = f.getScrollbarWidth, i = f.getScrollTop, j = f.getWindowScrollLeft, k = f.hasClass, l = f.outerHeight, m = f.removeClass, n = f.setOverlayPosition, o = (e = a("_base"), 
            e && e.__esModule && e || {
                "default": e
            }).WalkontableOverlay, p = function(a) {
                $traceurRuntime.superConstructor(q).call(this, a), this.clone = this.makeClone(o.CLONE_TOP);
            }, q = p;
            $traceurRuntime.createClass(p, {
                shouldBeRendered: function() {
                    return !(!this.wot.getSetting("fixedRowsTop") && !this.wot.getSetting("columnHeaders").length);
                },
                resetFixedPosition: function() {
                    if (this.needFullRender && this.wot.wtTable.holder.parentNode) {
                        var a = this.clone.wtTable.holder.parentNode, b = 0;
                        if (this.wot.wtOverlays.leftOverlay.trimmingContainer === window) {
                            var c, d, e = this.wot.wtTable.hider.getBoundingClientRect(), f = Math.ceil(e.top), g = Math.ceil(e.bottom);
                            c = this.wot.wtTable.hider.style.left, c = "" === c ? 0 : c, d = 0 > f && g - a.offsetHeight > 0 ? -f : 0, 
                            b = d, d += "px", n(a, c, d);
                        } else b = this.getScrollPosition();
                        this.adjustHeaderBordersPosition(b), this.adjustElementsSize();
                    }
                },
                setScrollPosition: function(a) {
                    this.mainTableScrollableElement === window ? window.scrollTo(j(), a) : this.mainTableScrollableElement.scrollTop = a;
                },
                onScroll: function() {
                    this.wot.getSetting("onScrollVertically");
                },
                sumCellSizes: function(a, b) {
                    for (var c = 0, d = this.wot.wtSettings.settings.defaultRowHeight; b > a; ) c += this.wot.wtTable.getRowHeight(a) || d, 
                    a++;
                    return c;
                },
                adjustElementsSize: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    (this.needFullRender || a) && (this.adjustRootElementSize(), this.adjustRootChildrenSize(), 
                    a || (this.areElementSizesAdjusted = !0));
                },
                adjustRootElementSize: function() {
                    var a, b = this.wot.wtTable.holder, c = b.clientWidth === b.offsetWidth ? 0 : h(), d = this.clone.wtTable.holder.parentNode, e = d.style;
                    this.trimmingContainer !== window && (e.width = this.wot.wtViewport.getWorkspaceWidth() - c + "px"), 
                    this.clone.wtTable.holder.style.width = e.width, a = l(this.clone.wtTable.TABLE), 
                    e.height = (0 === a ? a : a + 4) + "px";
                },
                adjustRootChildrenSize: function() {
                    var a = h();
                    this.clone.wtTable.hider.style.width = this.hider.style.width, this.clone.wtTable.holder.style.width = this.clone.wtTable.holder.parentNode.style.width, 
                    0 === a && (a = 30), this.clone.wtTable.holder.style.height = parseInt(this.clone.wtTable.holder.parentNode.style.height, 10) + a + "px";
                },
                applyToDOM: function() {
                    var a = this.wot.getSetting("totalRows");
                    if (this.areElementSizesAdjusted || this.adjustElementsSize(), "number" == typeof this.wot.wtViewport.rowsRenderCalculator.startPosition) this.spreader.style.top = this.wot.wtViewport.rowsRenderCalculator.startPosition + "px"; else {
                        if (0 !== a) throw new Error("Incorrect value of the rowsRenderCalculator");
                        this.spreader.style.top = "0";
                    }
                    this.spreader.style.bottom = "", this.needFullRender && this.syncOverlayOffset();
                },
                syncOverlayOffset: function() {
                    "number" == typeof this.wot.wtViewport.columnsRenderCalculator.startPosition ? this.clone.wtTable.spreader.style.left = this.wot.wtViewport.columnsRenderCalculator.startPosition + "px" : this.clone.wtTable.spreader.style.left = "";
                },
                scrollTo: function(a, b) {
                    var c = this.getTableParentOffset(), d = this.wot.cloneSource ? this.wot.cloneSource : this.wot, e = d.wtTable.holder, f = 0;
                    if (b && e.offsetHeight !== e.clientHeight && (f = h()), b) {
                        var g = this.wot.getSetting("fixedRowsBottom"), i = (this.wot.getSetting("fixedRowsTop"), 
                        this.wot.getSetting("totalRows"));
                        c += this.sumCellSizes(0, a + 1), c -= this.wot.wtViewport.getViewportHeight() - this.sumCellSizes(i - g, i), 
                        c += 1;
                    } else c += this.sumCellSizes(this.wot.getSetting("fixedRowsTop"), a);
                    c += f, this.setScrollPosition(c);
                },
                getTableParentOffset: function() {
                    return this.mainTableScrollableElement === window ? this.wot.wtTable.holderOffset.top : 0;
                },
                getScrollPosition: function() {
                    return i(this.mainTableScrollableElement);
                },
                adjustHeaderBordersPosition: function(a) {
                    if (0 === this.wot.getSetting("fixedRowsTop") && this.wot.getSetting("columnHeaders").length > 0) {
                        var b = this.wot.wtTable.holder.parentNode, c = k(b, "innerBorderTop");
                        a ? g(b, "innerBorderTop") : m(b, "innerBorderTop"), (!c && a || c && !a) && this.wot.wtOverlays.adjustElementsSize();
                    }
                    if (0 === this.wot.getSetting("rowHeaders").length) {
                        var d = this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");
                        if (d) for (var e = 0; e < d.length; e++) d[e].style["border-left-width"] = 0;
                    }
                }
            }, {}, o), window.WalkontableTopOverlay = p, o.registerOverlay(o.CLONE_TOP, p);
        }, {
            _base: 11,
            "helpers/dom/element": 44
        } ],
        15: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableTopLeftCornerOverlay: {
                    get: function() {
                        return k;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), g = f.outerHeight, h = f.outerWidth, i = f.setOverlayPosition, j = (e = a("_base"), 
            e && e.__esModule && e || {
                "default": e
            }).WalkontableOverlay, k = function(a) {
                $traceurRuntime.superConstructor(l).call(this, a), this.clone = this.makeClone(j.CLONE_TOP_LEFT_CORNER);
            }, l = k;
            $traceurRuntime.createClass(k, {
                shouldBeRendered: function() {
                    return !(!this.wot.getSetting("fixedRowsTop") && !this.wot.getSetting("columnHeaders").length || !this.wot.getSetting("fixedColumnsLeft") && !this.wot.getSetting("rowHeaders").length);
                },
                resetFixedPosition: function() {
                    if (this.wot.wtTable.holder.parentNode) {
                        var a = this.clone.wtTable.holder.parentNode, b = g(this.clone.wtTable.TABLE), c = h(this.clone.wtTable.TABLE);
                        if (this.trimmingContainer === window) {
                            var d, e, f = this.wot.wtTable.hider.getBoundingClientRect(), j = Math.ceil(f.top), k = Math.ceil(f.left), l = Math.ceil(f.bottom), m = Math.ceil(f.right);
                            d = 0 > k && m - a.offsetWidth > 0 ? -k + "px" : "0", e = 0 > j && l - a.offsetHeight > 0 ? -j + "px" : "0", 
                            i(a, d, e);
                        }
                        a.style.height = (0 === b ? b : b + 4) + "px", a.style.width = (0 === c ? c : c + 4) + "px";
                    }
                }
            }, {}, j), window.WalkontableTopLeftCornerOverlay = k, j.registerOverlay(j.CLONE_TOP_LEFT_CORNER, k);
        }, {
            _base: 11,
            "helpers/dom/element": 44
        } ],
        16: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableOverlays: {
                    get: function() {
                        return n;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), h = g.getScrollableElement, i = g.getScrollbarWidth, j = g.getScrollLeft, k = g.getScrollTop, l = (e = a("helpers/unicode"), 
            e && e.__esModule && e || {
                "default": e
            }).isKey, m = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).EventManager, n = function(a) {
                this.wot = a, this.instance = this.wot, this.eventManager = new m(this.wot), this.wot.update("scrollbarWidth", i()), 
                this.wot.update("scrollbarHeight", i()), this.mainTableScrollableElement = h(this.wot.wtTable.TABLE), 
                this.topOverlay = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP, this.wot), 
                "undefined" == typeof WalkontableBottomOverlay ? this.bottomOverlay = {
                    needFullRender: !1
                } : this.bottomOverlay = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM, this.wot), 
                this.leftOverlay = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_LEFT, this.wot), 
                this.topOverlay.needFullRender && this.leftOverlay.needFullRender && (this.topLeftCornerOverlay = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER, this.wot)), 
                this.bottomOverlay.needFullRender && this.leftOverlay.needFullRender && "undefined" != typeof WalkontableBottomLeftCornerOverlay ? this.bottomLeftCornerOverlay = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER, this.wot) : this.bottomLeftCornerOverlay = {
                    needFullRender: !1
                }, this.wot.getSetting("debug") && (this.debug = WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_DEBUG, this.wot)), 
                this.destroyed = !1, this.keyPressed = !1, this.spreaderLastSize = {
                    width: null,
                    height: null
                }, this.overlayScrollPositions = {
                    master: {
                        top: 0,
                        left: 0
                    },
                    top: {
                        top: null,
                        left: 0
                    },
                    bottom: {
                        top: null,
                        left: 0
                    },
                    left: {
                        top: 0,
                        left: null
                    }
                }, this.registerListeners();
            };
            $traceurRuntime.createClass(n, {
                refreshAll: function() {
                    if (this.wot.drawn) {
                        if (!this.wot.wtTable.holder.parentNode) return void this.destroy();
                        this.wot.draw(!0), this.topOverlay.onScroll(), this.leftOverlay.onScroll();
                    }
                },
                registerListeners: function() {
                    var a = this;
                    this.eventManager.addEventListener(document.documentElement, "keydown", function(b) {
                        return a.onKeyDown(b);
                    }), this.eventManager.addEventListener(document.documentElement, "keyup", function() {
                        return a.onKeyUp();
                    }), this.eventManager.addEventListener(document, "visibilitychange", function() {
                        return a.onKeyUp();
                    }), this.eventManager.addEventListener(this.mainTableScrollableElement, "scroll", function(b) {
                        return a.onTableScroll(b);
                    }), this.topOverlay.needFullRender && (this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder, "scroll", function(b) {
                        return a.onTableScroll(b);
                    }), this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder, "wheel", function(b) {
                        return a.onTableScroll(b);
                    })), this.bottomOverlay.needFullRender && (this.eventManager.addEventListener(this.bottomOverlay.clone.wtTable.holder, "scroll", function(b) {
                        return a.onTableScroll(b);
                    }), this.eventManager.addEventListener(this.bottomOverlay.clone.wtTable.holder, "wheel", function(b) {
                        return a.onTableScroll(b);
                    })), this.leftOverlay.needFullRender && (this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder, "scroll", function(b) {
                        return a.onTableScroll(b);
                    }), this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder, "wheel", function(b) {
                        return a.onTableScroll(b);
                    })), this.topOverlay.trimmingContainer !== window && this.leftOverlay.trimmingContainer !== window && this.eventManager.addEventListener(window, "wheel", function(b) {
                        var c, d = b.wheelDeltaY || b.deltaY, e = b.wheelDeltaX || b.deltaX;
                        a.topOverlay.clone.wtTable.holder.contains(b.realTarget) ? c = "top" : a.bottomOverlay.clone && a.bottomOverlay.clone.wtTable.holder.contains(b.realTarget) ? c = "bottom" : a.leftOverlay.clone.wtTable.holder.contains(b.realTarget) && (c = "left"), 
                        "top" == c && 0 !== d ? b.preventDefault() : "left" == c && 0 !== e ? b.preventDefault() : "bottom" == c && 0 !== d && b.preventDefault();
                    });
                },
                onTableScroll: function(a) {
                    Handsontable.mobileBrowser || this.keyPressed && this.mainTableScrollableElement !== window && !a.target.contains(this.mainTableScrollableElement) || ("scroll" === a.type ? this.syncScrollPositions(a) : this.translateMouseWheelToScroll(a));
                },
                onKeyDown: function(a) {
                    this.keyPressed = l(a.keyCode, "ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT");
                },
                onKeyUp: function() {
                    this.keyPressed = !1;
                },
                translateMouseWheelToScroll: function(a) {
                    for (var b, c = this.topOverlay.clone.wtTable.holder, d = this.bottomOverlay.clone ? this.bottomOverlay.clone.wtTable.holder : null, e = this.leftOverlay.clone.wtTable.holder, f = {
                        type: "wheel"
                    }, g = a.target, h = a.wheelDeltaY || -1 * a.deltaY, i = a.wheelDeltaX || -1 * a.deltaX; g != document && null != g; ) {
                        if (g.className.indexOf("wtHolder") > -1) {
                            b = g;
                            break;
                        }
                        g = g.parentNode;
                    }
                    return f.target = b, b == c ? this.syncScrollPositions(f, -.2 * h) : b == d ? this.syncScrollPositions(f, -.2 * h) : b == e && this.syncScrollPositions(f, -.2 * i), 
                    !1;
                },
                syncScrollPositions: function(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : null;
                    if (!this.destroyed) {
                        if (0 === arguments.length) return void this.syncScrollWithMaster();
                        var c, d, e, f = this.mainTableScrollableElement, g = a.target, h = 0, i = !1;
                        this.topOverlay.needFullRender && (c = this.topOverlay.clone.wtTable.holder), this.bottomOverlay.needFullRender && (e = this.bottomOverlay.clone.wtTable.holder), 
                        this.leftOverlay.needFullRender && (d = this.leftOverlay.clone.wtTable.holder), 
                        g === document && (g = window), g === f ? (h = j(g), this.overlayScrollPositions.master.left !== h && (this.overlayScrollPositions.master.left = h, 
                        i = !0, c && (c.scrollLeft = h), e && (e.scrollLeft = h)), h = k(g), this.overlayScrollPositions.master.top !== h && (this.overlayScrollPositions.master.top = h, 
                        i = !0, d && (d.scrollTop = h))) : g === e ? (h = j(g), this.overlayScrollPositions.bottom.left !== h && (this.overlayScrollPositions.bottom.left = h, 
                        i = !0, f.scrollLeft = h), null !== b && (i = !0, f.scrollTop += b)) : g === c ? (h = j(g), 
                        this.overlayScrollPositions.top.left !== h && (this.overlayScrollPositions.top.left = h, 
                        i = !0, f.scrollLeft = h), null !== b && (i = !0, f.scrollTop += b)) : g === d && (h = k(g), 
                        this.overlayScrollPositions.left.top !== h && (this.overlayScrollPositions.left.top = h, 
                        i = !0, f.scrollTop = h), null !== b && (i = !0, f.scrollLeft += b)), !this.keyPressed && i && "scroll" === a.type && this.refreshAll();
                    }
                },
                syncScrollWithMaster: function() {
                    var a = this.topOverlay.mainTableScrollableElement;
                    this.topOverlay.needFullRender && (this.topOverlay.clone.wtTable.holder.scrollLeft = a.scrollLeft), 
                    this.leftOverlay.needFullRender && (this.leftOverlay.clone.wtTable.holder.scrollTop = a.scrollTop);
                },
                destroy: function() {
                    this.eventManager.destroy(), this.topOverlay.destroy(), this.bottomOverlay.clone && this.bottomOverlay.destroy(), 
                    this.leftOverlay.destroy(), this.topLeftCornerOverlay && this.topLeftCornerOverlay.destroy(), 
                    this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone && this.bottomLeftCornerOverlay.destroy(), 
                    this.debug && this.debug.destroy(), this.destroyed = !0;
                },
                refresh: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    if (this.topOverlay.areElementSizesAdjusted && this.leftOverlay.areElementSizesAdjusted) {
                        var b = this.wot.wtTable.wtRootElement.parentNode || this.wot.wtTable.wtRootElement, c = b.clientWidth, d = b.clientHeight;
                        c === this.spreaderLastSize.width && d === this.spreaderLastSize.height || (this.spreaderLastSize.width = c, 
                        this.spreaderLastSize.height = d, this.adjustElementsSize());
                    }
                    this.bottomOverlay.clone && this.bottomOverlay.refresh(a), this.leftOverlay.refresh(a), 
                    this.topOverlay.refresh(a), this.topLeftCornerOverlay && this.topLeftCornerOverlay.refresh(a), 
                    this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone && this.bottomLeftCornerOverlay.refresh(a), 
                    this.debug && this.debug.refresh(a);
                },
                adjustElementsSize: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1, b = this.wot.getSetting("totalColumns"), c = this.wot.getSetting("totalRows"), d = this.wot.wtViewport.getRowHeaderWidth(), e = this.wot.wtViewport.getColumnHeaderHeight(), f = this.wot.wtTable.hider.style;
                    f.width = d + this.leftOverlay.sumCellSizes(0, b) + "px", f.height = e + this.topOverlay.sumCellSizes(0, c) + 1 + "px", 
                    this.topOverlay.adjustElementsSize(a), this.leftOverlay.adjustElementsSize(a), this.bottomOverlay.clone && this.bottomOverlay.adjustElementsSize(a);
                },
                applyToDOM: function() {
                    this.topOverlay.areElementSizesAdjusted && this.leftOverlay.areElementSizesAdjusted || this.adjustElementsSize(), 
                    this.topOverlay.applyToDOM(), this.bottomOverlay.clone && this.bottomOverlay.applyToDOM(), 
                    this.leftOverlay.applyToDOM();
                }
            }, {}), window.WalkontableOverlays = n;
        }, {
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/unicode": 52
        } ],
        17: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableScroll: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d = function(a) {
                this.wot = a, this.instance = a;
            };
            $traceurRuntime.createClass(d, {
                scrollViewport: function(a) {
                    if (this.wot.drawn) {
                        var b = this.wot.getSetting("totalRows"), c = this.wot.getSetting("totalColumns"), d = this.instance.getSetting("fixedRowsTop"), e = this.instance.getSetting("fixedRowsBottom"), f = this.instance.getSetting("fixedColumnsLeft");
                        if (a.row < 0 || a.row > b - 1) throw new Error("row " + a.row + " does not exist");
                        if (a.col < 0 || a.col > c - 1) throw new Error("column " + a.col + " does not exist");
                        a.row > this.instance.wtTable.getLastVisibleRow() && a.row < b - e ? this.wot.wtOverlays.topOverlay.scrollTo(a.row, !0) : a.row >= d && a.row < this.instance.wtTable.getFirstVisibleRow() && this.wot.wtOverlays.topOverlay.scrollTo(a.row), 
                        a.col > this.instance.wtTable.getLastVisibleColumn() ? this.wot.wtOverlays.leftOverlay.scrollTo(a.col, !0) : a.col >= f && a.col < this.instance.wtTable.getFirstVisibleColumn() && this.wot.wtOverlays.leftOverlay.scrollTo(a.col);
                    }
                }
            }, {}), window.WalkontableScroll = d;
        }, {} ],
        18: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableSelection: {
                    get: function() {
                        return l;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).addClass, i = (e = a("border"), e && e.__esModule && e || {
                "default": e
            }).WalkontableBorder, j = (f = a("cell/coords"), f && f.__esModule && f || {
                "default": f
            }).WalkontableCellCoords, k = (g = a("cell/range"), g && g.__esModule && g || {
                "default": g
            }).WalkontableCellRange, l = function(a, b) {
                this.settings = a, this.cellRange = b || null, this.instanceBorders = {};
            };
            $traceurRuntime.createClass(l, {
                getBorder: function(a) {
                    return this.instanceBorders[a.guid] ? this.instanceBorders[a.guid] : void (this.instanceBorders[a.guid] = new i(a, this.settings));
                },
                isEmpty: function() {
                    return null === this.cellRange;
                },
                add: function(a) {
                    this.isEmpty() ? this.cellRange = new k(a, a, a) : this.cellRange.expand(a);
                },
                replace: function(a, b) {
                    if (!this.isEmpty()) {
                        if (this.cellRange.from.isEqual(a)) return this.cellRange.from = b, !0;
                        if (this.cellRange.to.isEqual(a)) return this.cellRange.to = b, !0;
                    }
                    return !1;
                },
                clear: function() {
                    this.cellRange = null;
                },
                getCorners: function() {
                    var a = this.cellRange.getTopLeftCorner(), b = this.cellRange.getBottomRightCorner();
                    return [ a.row, a.col, b.row, b.col ];
                },
                addClassAtCoords: function(a, b, c, d) {
                    var e = a.wtTable.getCell(new j(b, c));
                    "object" == typeof e && h(e, d);
                },
                draw: function(a) {
                    if (this.isEmpty()) {
                        if (this.settings.border) {
                            var b = this.getBorder(a);
                            b && b.disappear();
                        }
                    } else {
                        for (var c, d, e, f = a.wtTable.getRenderedRowsCount(), g = a.wtTable.getRenderedColumnsCount(), i = this.getCorners(), j = 0; g > j; j++) d = a.wtTable.columnFilter.renderedToSource(j), 
                        d >= i[1] && d <= i[3] && (e = a.wtTable.getColumnHeader(d), e && this.settings.highlightColumnClassName && h(e, this.settings.highlightColumnClassName));
                        for (var k = 0; f > k; k++) {
                            c = a.wtTable.rowFilter.renderedToSource(k), c >= i[0] && c <= i[2] && (e = a.wtTable.getRowHeader(c), 
                            e && this.settings.highlightRowClassName && h(e, this.settings.highlightRowClassName));
                            for (var l = 0; g > l; l++) d = a.wtTable.columnFilter.renderedToSource(l), c >= i[0] && c <= i[2] && d >= i[1] && d <= i[3] ? this.settings.className && this.addClassAtCoords(a, c, d, this.settings.className) : c >= i[0] && c <= i[2] ? this.settings.highlightRowClassName && this.addClassAtCoords(a, c, d, this.settings.highlightRowClassName) : d >= i[1] && d <= i[3] && this.settings.highlightColumnClassName && this.addClassAtCoords(a, c, d, this.settings.highlightColumnClassName);
                        }
                        if (a.getSetting("onBeforeDrawBorders", i, this.settings.className), this.settings.border) {
                            var m = this.getBorder(a);
                            m && m.appear(i);
                        }
                    }
                }
            }, {}), window.WalkontableSelection = l;
        }, {
            border: 2,
            "cell/coords": 5,
            "cell/range": 6,
            "helpers/dom/element": 44
        } ],
        19: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableSettings: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).fastInnerText, f = function(a, b) {
                var c = this;
                this.wot = a, this.instance = a, this.defaults = {
                    table: void 0,
                    debug: !1,
                    externalRowCalculator: !1,
                    stretchH: "none",
                    currentRowClassName: null,
                    currentColumnClassName: null,
                    data: void 0,
                    fixedColumnsLeft: 0,
                    fixedRowsTop: 0,
                    fixedRowsBottom: 0,
                    minSpareRows: 0,
                    rowHeaders: function() {
                        return [];
                    },
                    columnHeaders: function() {
                        return [];
                    },
                    totalRows: void 0,
                    totalColumns: void 0,
                    cellRenderer: function(a, b, d) {
                        var f = c.getSetting("data", a, b);
                        e(d, void 0 === f || null === f ? "" : f);
                    },
                    columnWidth: function(a) {},
                    rowHeight: function(a) {},
                    defaultRowHeight: 23,
                    defaultColumnWidth: 50,
                    selections: null,
                    hideBorderOnMouseDownOver: !1,
                    viewportRowCalculatorOverride: null,
                    viewportColumnCalculatorOverride: null,
                    onCellMouseDown: null,
                    onCellMouseOver: null,
                    onCellDblClick: null,
                    onCellCornerMouseDown: null,
                    onCellCornerDblClick: null,
                    beforeDraw: null,
                    onDraw: null,
                    onBeforeDrawBorders: null,
                    onScrollVertically: null,
                    onScrollHorizontally: null,
                    onBeforeTouchScroll: null,
                    onAfterMomentumScroll: null,
                    scrollbarWidth: 10,
                    scrollbarHeight: 10,
                    renderAllRows: !1,
                    groups: !1
                }, this.settings = {};
                for (var d in this.defaults) if (this.defaults.hasOwnProperty(d)) if (void 0 !== b[d]) this.settings[d] = b[d]; else {
                    if (void 0 === this.defaults[d]) throw new Error('A required setting "' + d + '" was not provided');
                    this.settings[d] = this.defaults[d];
                }
            };
            $traceurRuntime.createClass(f, {
                update: function(a, b) {
                    if (void 0 === b) for (var c in a) a.hasOwnProperty(c) && (this.settings[c] = a[c]); else this.settings[a] = b;
                    return this.wot;
                },
                getSetting: function(a, b, c, d, e) {
                    return "function" == typeof this.settings[a] ? this.settings[a](b, c, d, e) : void 0 !== b && Array.isArray(this.settings[a]) ? this.settings[a][b] : this.settings[a];
                },
                has: function(a) {
                    return !!this.settings[a];
                }
            }, {}), window.WalkontableSettings = f;
        }, {
            "helpers/dom/element": 44
        } ],
        20: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableTable: {
                    get: function() {
                        return v;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), k = j.getStyle, l = j.getTrimmingContainer, m = j.hasClass, n = j.index, o = j.offset, p = j.removeClass, q = j.removeTextNodes, r = (j.overlayContainsElement, 
            (e = a("cell/coords"), e && e.__esModule && e || {
                "default": e
            }).WalkontableCellCoords), s = ((f = a("cell/range"), f && f.__esModule && f || {
                "default": f
            }).WalkontableCellRange, (g = a("filter/column"), g && g.__esModule && g || {
                "default": g
            }).WalkontableColumnFilter), t = (h = a("filter/row"), h && h.__esModule && h || {
                "default": h
            }).WalkontableRowFilter, u = (i = a("tableRenderer"), i && i.__esModule && i || {
                "default": i
            }).WalkontableTableRenderer, v = function(a, b) {
                this.wot = a, this.instance = this.wot, this.TABLE = b, this.TBODY = null, this.THEAD = null, 
                this.COLGROUP = null, this.tableOffset = 0, this.holderOffset = 0, q(this.TABLE), 
                this.spreader = this.createSpreader(this.TABLE), this.hider = this.createHider(this.spreader), 
                this.holder = this.createHolder(this.hider), this.wtRootElement = this.holder.parentNode, 
                this.alignOverlaysWithTrimmingContainer(), this.fixTableDomTree(), this.colgroupChildrenLength = this.COLGROUP.childNodes.length, 
                this.theadChildrenLength = this.THEAD.firstChild ? this.THEAD.firstChild.childNodes.length : 0, 
                this.tbodyChildrenLength = this.TBODY.childNodes.length, this.rowFilter = null, 
                this.columnFilter = null;
            };
            $traceurRuntime.createClass(v, {
                fixTableDomTree: function() {
                    this.TBODY = this.TABLE.querySelector("tbody"), this.TBODY || (this.TBODY = document.createElement("tbody"), 
                    this.TABLE.appendChild(this.TBODY)), this.THEAD = this.TABLE.querySelector("thead"), 
                    this.THEAD || (this.THEAD = document.createElement("thead"), this.TABLE.insertBefore(this.THEAD, this.TBODY)), 
                    this.COLGROUP = this.TABLE.querySelector("colgroup"), this.COLGROUP || (this.COLGROUP = document.createElement("colgroup"), 
                    this.TABLE.insertBefore(this.COLGROUP, this.THEAD)), this.wot.getSetting("columnHeaders").length && !this.THEAD.childNodes.length && this.THEAD.appendChild(document.createElement("TR"));
                },
                createSpreader: function(a) {
                    var b, c = a.parentNode;
                    return c && 1 === c.nodeType && m(c, "wtHolder") || (b = document.createElement("div"), 
                    b.className = "wtSpreader", c && c.insertBefore(b, a), b.appendChild(a)), b.style.position = "relative", 
                    b;
                },
                createHider: function(a) {
                    var b, c = a.parentNode;
                    return c && 1 === c.nodeType && m(c, "wtHolder") || (b = document.createElement("div"), 
                    b.className = "wtHider", c && c.insertBefore(b, a), b.appendChild(a)), b;
                },
                createHolder: function(a) {
                    var b, c = a.parentNode;
                    return c && 1 === c.nodeType && m(c, "wtHolder") || (b = document.createElement("div"), 
                    b.style.position = "relative", b.className = "wtHolder", c && c.insertBefore(b, a), 
                    this.isWorkingOnClone() || (b.parentNode.className += "ht_master handsontable"), 
                    b.appendChild(a)), b;
                },
                alignOverlaysWithTrimmingContainer: function() {
                    var a = l(this.wtRootElement);
                    this.isWorkingOnClone() || (this.holder.parentNode.style.position = "relative", 
                    a === window ? (this.holder.style.overflow = "visible", this.wtRootElement.style.overflow = "visible") : (this.holder.style.width = k(a, "width"), 
                    this.holder.style.height = k(a, "height"), this.holder.style.overflow = ""));
                },
                isWorkingOnClone: function() {
                    return !!this.wot.cloneSource;
                },
                draw: function(a) {
                    var b = this.instance.getSetting("totalRows");
                    if (this.isWorkingOnClone() || (this.holderOffset = o(this.holder), a = this.wot.wtViewport.createRenderCalculators(a)), 
                    a) this.isWorkingOnClone() || this.wot.wtViewport.createVisibleCalculators(), this.wot.wtOverlays && this.wot.wtOverlays.refresh(!0); else {
                        this.isWorkingOnClone() ? this.tableOffset = this.wot.cloneSource.wtTable.tableOffset : this.tableOffset = o(this.TABLE);
                        var c;
                        c = WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_DEBUG) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP_LEFT_CORNER) ? 0 : WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM) || WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER) ? b - this.wot.getSetting("fixedRowsBottom") : this.wot.wtViewport.rowsRenderCalculator.startRow;
                        var d;
                        d = WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_DEBUG) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_LEFT) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP_LEFT_CORNER) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER) ? 0 : this.wot.wtViewport.columnsRenderCalculator.startColumn, 
                        this.rowFilter = new t(c, b, this.wot.getSetting("columnHeaders").length), this.columnFilter = new s(d, this.wot.getSetting("totalColumns"), this.wot.getSetting("rowHeaders").length), 
                        this._doDraw(), this.alignOverlaysWithTrimmingContainer();
                    }
                    return this.refreshSelections(a), this.isWorkingOnClone() || (this.wot.wtOverlays.topOverlay.resetFixedPosition(), 
                    this.wot.wtOverlays.bottomOverlay.clone && this.wot.wtOverlays.bottomOverlay.resetFixedPosition(), 
                    this.wot.wtOverlays.leftOverlay.resetFixedPosition(), this.wot.wtOverlays.topLeftCornerOverlay && this.wot.wtOverlays.topLeftCornerOverlay.resetFixedPosition(), 
                    this.instance.wtOverlays.bottomLeftCornerOverlay && this.instance.wtOverlays.bottomLeftCornerOverlay.clone && this.wot.wtOverlays.bottomLeftCornerOverlay.resetFixedPosition()), 
                    this.wot.drawn = !0, this;
                },
                _doDraw: function() {
                    var a = new u(this);
                    a.render();
                },
                removeClassFromCells: function(a) {
                    for (var b = this.TABLE.querySelectorAll("." + a), c = 0, d = b.length; d > c; c++) p(b[c], a);
                },
                refreshSelections: function(a) {
                    if (this.wot.selections) {
                        var b = this.wot.selections.length;
                        if (a) for (var c = 0; b > c; c++) this.wot.selections[c].settings.className && this.removeClassFromCells(this.wot.selections[c].settings.className), 
                        this.wot.selections[c].settings.highlightRowClassName && this.removeClassFromCells(this.wot.selections[c].settings.highlightRowClassName), 
                        this.wot.selections[c].settings.highlightColumnClassName && this.removeClassFromCells(this.wot.selections[c].settings.highlightColumnClassName);
                        for (var d = 0; b > d; d++) this.wot.selections[d].draw(this.wot, a);
                    }
                },
                getCell: function(a) {
                    if (this.isRowBeforeRenderedRows(a.row)) return -1;
                    if (this.isRowAfterRenderedRows(a.row)) return -2;
                    var b = this.TBODY.childNodes[this.rowFilter.sourceToRendered(a.row)];
                    return b ? b.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a.col)] : void 0;
                },
                getColumnHeader: function(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : 0, c = this.THEAD.childNodes[b];
                    return c ? c.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a)] : void 0;
                },
                getRowHeader: function(a) {
                    if (0 === this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0)) return null;
                    var b = this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)];
                    return b ? b.childNodes[0] : void 0;
                },
                getCoords: function(a) {
                    var b = a.parentNode, c = n(b);
                    c = b.parentNode === this.THEAD ? this.rowFilter.visibleColHeadedRowToSourceRow(c) : this.rowFilter.renderedToSource(c);
                    var d = this.columnFilter.visibleRowHeadedColumnToSourceColumn(a.cellIndex);
                    return new r(c, d);
                },
                getTrForRow: function(a) {
                    return this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)];
                },
                getFirstRenderedRow: function() {
                    return this.wot.wtViewport.rowsRenderCalculator.startRow;
                },
                getFirstVisibleRow: function() {
                    return this.wot.wtViewport.rowsVisibleCalculator.startRow;
                },
                getFirstRenderedColumn: function() {
                    return this.wot.wtViewport.columnsRenderCalculator.startColumn;
                },
                getFirstVisibleColumn: function() {
                    return this.wot.wtViewport.columnsVisibleCalculator.startColumn;
                },
                getLastRenderedRow: function() {
                    return this.wot.wtViewport.rowsRenderCalculator.endRow;
                },
                getLastVisibleRow: function() {
                    return this.wot.wtViewport.rowsVisibleCalculator.endRow;
                },
                getLastRenderedColumn: function() {
                    return this.wot.wtViewport.columnsRenderCalculator.endColumn;
                },
                getLastVisibleColumn: function() {
                    return this.wot.wtViewport.columnsVisibleCalculator.endColumn;
                },
                isRowBeforeRenderedRows: function(a) {
                    return this.rowFilter.sourceToRendered(a) < 0 && a >= 0;
                },
                isRowAfterViewport: function(a) {
                    return this.rowFilter.sourceToRendered(a) > this.getLastVisibleRow();
                },
                isRowAfterRenderedRows: function(a) {
                    return this.rowFilter.sourceToRendered(a) > this.getLastRenderedRow();
                },
                isColumnBeforeViewport: function(a) {
                    return this.columnFilter.sourceToRendered(a) < 0 && a >= 0;
                },
                isColumnAfterViewport: function(a) {
                    return this.columnFilter.sourceToRendered(a) > this.getLastVisibleColumn();
                },
                isLastRowFullyVisible: function() {
                    return this.getLastVisibleRow() === this.getLastRenderedRow();
                },
                isLastColumnFullyVisible: function() {
                    return this.getLastVisibleColumn() === this.getLastRenderedColumn();
                },
                getRenderedColumnsCount: function() {
                    return WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_DEBUG) ? this.wot.getSetting("totalColumns") : WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_LEFT) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP_LEFT_CORNER) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER) ? this.wot.getSetting("fixedColumnsLeft") : this.wot.wtViewport.columnsRenderCalculator.count;
                },
                getRenderedRowsCount: function() {
                    return WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_DEBUG) ? this.wot.getSetting("totalRows") : WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_TOP_LEFT_CORNER) ? this.wot.getSetting("fixedRowsTop") : WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER) ? this.instance.getSetting("fixedRowsBottom") : this.wot.wtViewport.rowsRenderCalculator.count;
                },
                getVisibleRowsCount: function() {
                    return this.wot.wtViewport.rowsVisibleCalculator.count;
                },
                allRowsInViewport: function() {
                    return this.wot.getSetting("totalRows") == this.getVisibleRowsCount();
                },
                getRowHeight: function(a) {
                    var b = this.wot.wtSettings.settings.rowHeight(a), c = this.wot.wtViewport.oversizedRows[a];
                    return void 0 !== c && (b = b ? Math.max(b, c) : c), b;
                },
                getColumnHeaderHeight: function(a) {
                    var b = this.wot.wtSettings.settings.defaultRowHeight, c = this.wot.wtViewport.oversizedColumnHeaders[a];
                    return void 0 !== c && (b = b ? Math.max(b, c) : c), b;
                },
                getVisibleColumnsCount: function() {
                    return this.wot.wtViewport.columnsVisibleCalculator.count;
                },
                allColumnsInViewport: function() {
                    return this.wot.getSetting("totalColumns") == this.getVisibleColumnsCount();
                },
                getColumnWidth: function(a) {
                    var b = this.wot.wtSettings.settings.columnWidth;
                    return "function" == typeof b ? b = b(a) : "object" == typeof b && (b = b[a]), b || this.wot.wtSettings.settings.defaultColumnWidth;
                },
                getStretchedColumnWidth: function(a) {
                    var b = this.getColumnWidth(a), c = -1 === [ void 0, null ].indexOf(b) ? b : this.instance.wtSettings.settings.defaultColumnWidth, d = this.wot.wtViewport.columnsRenderCalculator;
                    if (d) {
                        var e = d.getStretchedColumnWidth(a, c);
                        e && (c = e);
                    }
                    return c;
                }
            }, {}), window.WalkontableTable = v;
        }, {
            "cell/coords": 5,
            "cell/range": 6,
            "filter/column": 9,
            "filter/row": 10,
            "helpers/dom/element": 44,
            tableRenderer: 21
        } ],
        21: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                var c = document.createElement("TH");
                return b.insertBefore(c, a), b.removeChild(a), c;
            }
            function e(a, b) {
                var c = document.createElement("TD");
                return b.insertBefore(c, a), b.removeChild(a), c;
            }
            Object.defineProperties(c, {
                WalkontableTableRenderer: {
                    get: function() {
                        return m;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var f, g = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }), h = g.addClass, i = g.empty, j = g.getScrollbarWidth, k = g.hasClass, l = g.innerHeight, m = function(a) {
                this.wtTable = a, this.wot = a.instance, this.instance = a.instance, this.rowFilter = a.rowFilter, 
                this.columnFilter = a.columnFilter, this.TABLE = a.TABLE, this.THEAD = a.THEAD, 
                this.TBODY = a.TBODY, this.COLGROUP = a.COLGROUP, this.rowHeaders = [], this.rowHeaderCount = 0, 
                this.columnHeaders = [], this.columnHeaderCount = 0, this.fixedRowsTop = 0, this.fixedRowsBottom = 0;
            };
            $traceurRuntime.createClass(m, {
                render: function() {
                    this.wtTable.isWorkingOnClone() || this.wot.getSetting("beforeDraw", !0), this.rowHeaders = this.wot.getSetting("rowHeaders"), 
                    this.rowHeaderCount = this.rowHeaders.length, this.fixedRowsTop = this.wot.getSetting("fixedRowsTop"), 
                    this.fixedRowsBottom = this.wot.getSetting("fixedRowsBottom"), this.columnHeaders = this.wot.getSetting("columnHeaders"), 
                    this.columnHeaderCount = this.columnHeaders.length;
                    var a, b = this.wtTable.getRenderedColumnsCount(), c = this.wtTable.getRenderedRowsCount(), d = this.wot.getSetting("totalColumns"), e = this.wot.getSetting("totalRows"), f = !1;
                    if ((WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM) || WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)) && (this.columnHeaders = [], 
                    this.columnHeaderCount = 0), d > 0 && (this.adjustAvailableNodes(), f = !0, this.renderColumnHeaders(), 
                    this.renderRows(e, c, b), this.wtTable.isWorkingOnClone() || (a = this.wot.wtViewport.getWorkspaceWidth(), 
                    this.wot.wtViewport.containerWidth = null), this.adjustColumnHeaderHeights(), this.adjustColumnWidths(b), 
                    this.markOversizedColumns()), f || this.adjustAvailableNodes(), this.removeRedundantRows(c), 
                    this.wtTable.isWorkingOnClone()) {
                        if (WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM)) {
                            var g = this.wot.cloneOverlay.instance;
                            this.wot.cloneOverlay.markOversizedFixedBottomRows(), g.wtOverlays.adjustElementsSize();
                        }
                    } else {
                        if (this.markOversizedRows(), this.wot.wtViewport.createVisibleCalculators(), this.wot.wtOverlays.refresh(!1), 
                        this.wot.wtOverlays.applyToDOM(), a !== this.wot.wtViewport.getWorkspaceWidth()) {
                            this.wot.wtViewport.containerWidth = null;
                            for (var h = this.wtTable.getFirstRenderedColumn(), i = this.wtTable.getLastRenderedColumn(), j = h; i > j; j++) {
                                var k = this.wtTable.getStretchedColumnWidth(j), l = this.columnFilter.sourceToRendered(j);
                                this.COLGROUP.childNodes[l + this.rowHeaderCount].style.width = k + "px";
                            }
                        }
                        this.wot.getSetting("onDraw", !0);
                    }
                },
                removeRedundantRows: function(a) {
                    for (;this.wtTable.tbodyChildrenLength > a; ) this.TBODY.removeChild(this.TBODY.lastChild), 
                    this.wtTable.tbodyChildrenLength--;
                },
                renderRows: function(a, b, c) {
                    for (var d, e, f = 0, g = this.rowFilter.renderedToSource(f), h = this.wtTable.isWorkingOnClone(); a > g && g >= 0; ) {
                        if (f > 1e3) throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");
                        if (void 0 !== b && f === b) break;
                        if (e = this.getOrCreateTrForRow(f, e), this.renderRowHeaders(g, e), this.adjustColumns(e, c + this.rowHeaderCount), 
                        d = this.renderCells(g, e, c), h && !WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay, WalkontableOverlay.CLONE_BOTTOM) || this.resetOversizedRow(g), 
                        e.firstChild) {
                            var i = this.wot.wtTable.getRowHeight(g);
                            i ? (i--, e.firstChild.style.height = i + "px") : e.firstChild.style.height = "";
                        }
                        f++, g = this.rowFilter.renderedToSource(f);
                    }
                },
                resetOversizedRow: function(a) {
                    this.wot.getSetting("externalRowCalculator") || this.wot.wtViewport.oversizedRows && this.wot.wtViewport.oversizedRows[a] && (this.wot.wtViewport.oversizedRows[a] = void 0);
                },
                markOversizedRows: function() {
                    if (!this.wot.getSetting("externalRowCalculator")) {
                        var a, b, c, d, e, f = this.instance.wtTable.TBODY.childNodes.length, g = f * this.instance.wtSettings.settings.defaultRowHeight, h = l(this.instance.wtTable.TBODY) - 1;
                        this.instance.getSetting("totalRows");
                        if (g !== h || this.instance.getSetting("fixedRowsBottom")) for (;f; ) f--, c = this.instance.wtTable.rowFilter.renderedToSource(f), 
                        a = this.instance.wtTable.getRowHeight(c), d = this.instance.wtTable.getTrForRow(c), 
                        e = d.querySelector("th"), b = e ? l(e) : l(d) - 1, (!a && this.instance.wtSettings.settings.defaultRowHeight < b || b > a) && (this.instance.wtViewport.oversizedRows[c] = ++b);
                    }
                },
                markOversizedColumns: function() {
                    var a = this.wot.getOverlayName();
                    if (this.columnHeaderCount && !this.wot.wtViewport.isMarkedOversizedColumn[a] && !this.wtTable.isWorkingOnClone()) {
                        for (var b = this.wtTable.getRenderedColumnsCount(), c = 0; c < this.columnHeaderCount; c++) for (var d = -1 * this.rowHeaderCount; b > d; d++) this.markIfOversizedColumnHeader(d);
                        this.wot.wtViewport.isMarkedOversizedColumn[a] = !0;
                    }
                },
                adjustColumnHeaderHeights: function() {
                    for (var a = this.wot.getSetting("columnHeaders"), b = this.wot.wtTable.THEAD.childNodes, c = this.wot.wtViewport.oversizedColumnHeaders, d = 0, e = a.length; e > d; d++) if (c[d]) {
                        if (0 === b[d].childNodes.length) return;
                        b[d].childNodes[0].style.height = c[d] + "px";
                    }
                },
                markIfOversizedColumnHeader: function(a) {
                    for (var b, c, d, e = this.wot.wtTable.columnFilter.renderedToSource(a), f = this.columnHeaderCount, g = this.wot.wtSettings.settings.defaultRowHeight; f; ) f--, 
                    b = this.wot.wtTable.getColumnHeaderHeight(f), c = this.wot.wtTable.getColumnHeader(e, f), 
                    c && (d = l(c), (!b && d > g || d > b) && (this.wot.wtViewport.oversizedColumnHeaders[f] = d));
                },
                renderCells: function(a, b, c) {
                    for (var d, f, g = 0; c > g; g++) f = this.columnFilter.renderedToSource(g), d = 0 === g ? b.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(f)] : d.nextSibling, 
                    "TH" == d.nodeName && (d = e(d, b)), k(d, "hide") || (d.className = ""), d.removeAttribute("style"), 
                    this.wot.wtSettings.settings.cellRenderer(a, f, d);
                    return d;
                },
                adjustColumnWidths: function(a) {
                    var b = 0, c = this.wot.cloneSource ? this.wot.cloneSource : this.wot, d = c.wtTable.holder;
                    d.offsetHeight < d.scrollHeight && (b = j()), this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth() - b);
                    for (var e = 0; a > e; e++) {
                        var f = this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(e));
                        this.COLGROUP.childNodes[e + this.rowHeaderCount].style.width = f + "px";
                    }
                },
                appendToTbody: function(a) {
                    this.TBODY.appendChild(a), this.wtTable.tbodyChildrenLength++;
                },
                getOrCreateTrForRow: function(a, b) {
                    var c;
                    return a >= this.wtTable.tbodyChildrenLength ? (c = this.createRow(), this.appendToTbody(c)) : c = 0 === a ? this.TBODY.firstChild : b.nextSibling, 
                    c.className && c.removeAttribute("class"), c;
                },
                createRow: function() {
                    for (var a = document.createElement("TR"), b = 0; b < this.rowHeaderCount; b++) a.appendChild(document.createElement("TH"));
                    return a;
                },
                renderRowHeader: function(a, b, c) {
                    c.className = "", c.removeAttribute("style"), this.rowHeaders[b](a, c, b);
                },
                renderRowHeaders: function(a, b) {
                    for (var c = b.firstChild, e = 0; e < this.rowHeaderCount; e++) c ? "TD" == c.nodeName && (c = d(c, b)) : (c = document.createElement("TH"), 
                    b.appendChild(c)), this.renderRowHeader(a, e, c), c = c.nextSibling;
                },
                adjustAvailableNodes: function() {
                    this.adjustColGroups(), this.adjustThead();
                },
                renderColumnHeaders: function() {
                    this.wot.getOverlayName();
                    if (this.columnHeaderCount) for (var a = this.wtTable.getRenderedColumnsCount(), b = 0; b < this.columnHeaderCount; b++) for (var c = this.getTrForColumnHeaders(b), d = -1 * this.rowHeaderCount; a > d; d++) {
                        var e = this.columnFilter.renderedToSource(d);
                        this.renderColumnHeader(b, e, c.childNodes[d + this.rowHeaderCount]);
                    }
                },
                adjustColGroups: function() {
                    for (var a = this.wtTable.getRenderedColumnsCount(); this.wtTable.colgroupChildrenLength < a + this.rowHeaderCount; ) this.COLGROUP.appendChild(document.createElement("COL")), 
                    this.wtTable.colgroupChildrenLength++;
                    for (;this.wtTable.colgroupChildrenLength > a + this.rowHeaderCount; ) this.COLGROUP.removeChild(this.COLGROUP.lastChild), 
                    this.wtTable.colgroupChildrenLength--;
                    this.rowHeaderCount && h(this.COLGROUP.childNodes[0], "rowHeader");
                },
                adjustThead: function() {
                    var a = this.wtTable.getRenderedColumnsCount(), b = this.THEAD.firstChild;
                    if (this.columnHeaders.length) {
                        for (var c = 0, d = this.columnHeaders.length; d > c; c++) {
                            for (b = this.THEAD.childNodes[c], b || (b = document.createElement("TR"), this.THEAD.appendChild(b)), 
                            this.theadChildrenLength = b.childNodes.length; this.theadChildrenLength < a + this.rowHeaderCount; ) b.appendChild(document.createElement("TH")), 
                            this.theadChildrenLength++;
                            for (;this.theadChildrenLength > a + this.rowHeaderCount; ) b.removeChild(b.lastChild), 
                            this.theadChildrenLength--;
                        }
                        var e = this.THEAD.childNodes.length;
                        if (e > this.columnHeaders.length) for (var f = this.columnHeaders.length; e > f; f++) this.THEAD.removeChild(this.THEAD.lastChild);
                    } else b && i(b);
                },
                getTrForColumnHeaders: function(a) {
                    return this.THEAD.childNodes[a];
                },
                renderColumnHeader: function(a, b, c) {
                    return c.className = "", c.removeAttribute("style"), this.columnHeaders[a](b, c, a);
                },
                adjustColumns: function(a, b) {
                    for (var c = a.childNodes.length; b > c; ) {
                        var d = document.createElement("TD");
                        a.appendChild(d), c++;
                    }
                    for (;c > b; ) a.removeChild(a.lastChild), c--;
                },
                removeRedundantColumns: function(a) {
                    for (;this.wtTable.tbodyChildrenLength > a; ) this.TBODY.removeChild(this.TBODY.lastChild), 
                    this.wtTable.tbodyChildrenLength--;
                }
            }, {}), window.WalkontableTableRenderer = m;
        }, {
            "helpers/dom/element": 44
        } ],
        22: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                WalkontableViewport: {
                    get: function() {
                        return r;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), i = h.getScrollbarWidth, j = h.getScrollTop, k = h.getStyle, l = h.offset, m = h.outerHeight, n = h.outerWidth, o = (e = a("eventManager"), 
            e && e.__esModule && e || {
                "default": e
            }).EventManager, p = (f = a("calculator/viewportColumns"), f && f.__esModule && f || {
                "default": f
            }).WalkontableViewportColumnsCalculator, q = (g = a("calculator/viewportRows"), 
            g && g.__esModule && g || {
                "default": g
            }).WalkontableViewportRowsCalculator, r = function(a) {
                var b = this;
                this.wot = a, this.instance = this.wot, this.oversizedRows = [], this.oversizedColumnHeaders = [], 
                this.isMarkedOversizedColumn = {}, this.clientHeight = 0, this.containerWidth = NaN, 
                this.rowHeaderWidth = NaN, this.rowsVisibleCalculator = null, this.columnsVisibleCalculator = null, 
                this.eventManager = new o(this.wot), this.eventManager.addEventListener(window, "resize", function() {
                    b.clientHeight = b.getWorkspaceHeight();
                });
            };
            $traceurRuntime.createClass(r, {
                getWorkspaceHeight: function() {
                    var a, b = this.instance.wtOverlays.topOverlay.trimmingContainer, c = 0;
                    return b === window ? c = document.documentElement.clientHeight : (a = m(b), c = a > 0 && b.clientHeight > 0 ? b.clientHeight : 1 / 0), 
                    c;
                },
                getWorkspaceWidth: function() {
                    var a, b, c = this.instance.getSetting("totalColumns"), d = this.instance.wtOverlays.leftOverlay.trimmingContainer, e = this.instance.getSetting("stretchH"), f = document.documentElement.offsetWidth;
                    return a = Handsontable.freezeOverlays ? Math.min(f - this.getWorkspaceOffset().left, f) : Math.min(this.getContainerFillWidth(), f - this.getWorkspaceOffset().left, f), 
                    d === window && c > 0 && this.sumColumnWidths(0, c - 1) > a ? document.documentElement.clientWidth : d !== window && (b = k(this.instance.wtOverlays.leftOverlay.trimmingContainer, "overflow"), 
                    "scroll" == b || "hidden" == b || "auto" == b) ? Math.max(a, d.clientWidth) : "none" !== e && e ? a : Math.max(a, n(this.instance.wtTable.TABLE));
                },
                hasVerticalScroll: function() {
                    return this.getWorkspaceActualHeight() > this.getWorkspaceHeight();
                },
                hasHorizontalScroll: function() {
                    return this.getWorkspaceActualWidth() > this.getWorkspaceWidth();
                },
                sumColumnWidths: function(a, b) {
                    for (var c = 0; b > a; ) c += this.wot.wtTable.getColumnWidth(a), a++;
                    return c;
                },
                getContainerFillWidth: function() {
                    if (this.containerWidth) return this.containerWidth;
                    var a, b, c = this.instance.wtTable.holder;
                    return b = document.createElement("div"), b.style.width = "100%", b.style.height = "1px", 
                    c.appendChild(b), a = b.offsetWidth, this.containerWidth = a, c.removeChild(b), 
                    a;
                },
                getWorkspaceOffset: function() {
                    return l(this.wot.wtTable.TABLE);
                },
                getWorkspaceActualHeight: function() {
                    return m(this.wot.wtTable.TABLE);
                },
                getWorkspaceActualWidth: function() {
                    return n(this.wot.wtTable.TABLE) || n(this.wot.wtTable.TBODY) || n(this.wot.wtTable.THEAD);
                },
                getColumnHeaderHeight: function() {
                    return isNaN(this.columnHeaderHeight) && (this.columnHeaderHeight = m(this.wot.wtTable.THEAD)), 
                    this.columnHeaderHeight;
                },
                getViewportHeight: function() {
                    var a, b = this.getWorkspaceHeight();
                    return b === 1 / 0 ? b : (a = this.getColumnHeaderHeight(), a > 0 && (b -= a), b);
                },
                getRowHeaderWidth: function() {
                    if (this.wot.cloneSource) return this.wot.cloneSource.wtViewport.getRowHeaderWidth();
                    if (isNaN(this.rowHeaderWidth)) {
                        var a = this.instance.getSetting("rowHeaders");
                        if (a.length) {
                            var b = this.instance.wtTable.TABLE.querySelector("TH");
                            this.rowHeaderWidth = 0;
                            for (var c = 0, d = a.length; d > c; c++) b ? (this.rowHeaderWidth += n(b), b = b.nextSibling) : this.rowHeaderWidth += 50;
                        } else this.rowHeaderWidth = 0;
                    }
                    return this.rowHeaderWidth;
                },
                getViewportWidth: function() {
                    var a, b = this.getWorkspaceWidth();
                    return b === 1 / 0 ? b : (a = this.getRowHeaderWidth(), a > 0 ? b - a : b);
                },
                createRowsCalculator: function() {
                    var a, b, c, d, e, f, g, h = void 0 !== arguments[0] ? arguments[0] : !1, k = this;
                    return this.rowHeaderWidth = NaN, a = this.wot.wtSettings.settings.renderAllRows ? 1 / 0 : this.getViewportHeight(), 
                    b = j(this.wot.wtOverlays.mainTableScrollableElement) - this.wot.wtOverlays.topOverlay.getTableParentOffset(), 
                    0 > b && (b = 0), c = this.wot.getSetting("fixedRowsTop"), e = this.wot.getSetting("fixedRowsBottom"), 
                    g = this.wot.getSetting("totalRows"), c && (f = this.wot.wtOverlays.topOverlay.sumCellSizes(0, c), 
                    b += f, a -= f), e && this.wot.wtOverlays.bottomOverlay.clone && (f = this.wot.wtOverlays.bottomOverlay.sumCellSizes(g - e, g), 
                    a -= f), d = this.wot.wtTable.holder.clientHeight === this.wot.wtTable.holder.offsetHeight ? 0 : i(), 
                    new q(a, b, this.wot.getSetting("totalRows"), function(a) {
                        return k.wot.wtTable.getRowHeight(a);
                    }, h ? null : this.wot.wtSettings.settings.viewportRowCalculatorOverride, h, d);
                },
                createColumnsCalculator: function() {
                    var a, b, c = void 0 !== arguments[0] ? arguments[0] : !1, d = this, e = this.getViewportWidth();
                    if (this.columnHeaderHeight = NaN, a = this.wot.wtOverlays.leftOverlay.getScrollPosition() - this.wot.wtOverlays.leftOverlay.getTableParentOffset(), 
                    0 > a && (a = 0), b = this.wot.getSetting("fixedColumnsLeft")) {
                        var f = this.wot.wtOverlays.leftOverlay.sumCellSizes(0, b);
                        a += f, e -= f;
                    }
                    return this.wot.wtTable.holder.clientWidth !== this.wot.wtTable.holder.offsetWidth && (e -= i()), 
                    new p(e, a, this.wot.getSetting("totalColumns"), function(a) {
                        return d.wot.wtTable.getColumnWidth(a);
                    }, c ? null : this.wot.wtSettings.settings.viewportColumnCalculatorOverride, c, this.wot.getSetting("stretchH"));
                },
                createRenderCalculators: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    if (a) {
                        var b = this.createRowsCalculator(!0), c = this.createColumnsCalculator(!0);
                        this.areAllProposedVisibleRowsAlreadyRendered(b) && this.areAllProposedVisibleColumnsAlreadyRendered(c) || (a = !1);
                    }
                    return a || (this.rowsRenderCalculator = this.createRowsCalculator(), this.columnsRenderCalculator = this.createColumnsCalculator()), 
                    this.rowsVisibleCalculator = null, this.columnsVisibleCalculator = null, a;
                },
                createVisibleCalculators: function() {
                    this.rowsVisibleCalculator = this.createRowsCalculator(!0), this.columnsVisibleCalculator = this.createColumnsCalculator(!0);
                },
                areAllProposedVisibleRowsAlreadyRendered: function(a) {
                    return this.rowsVisibleCalculator ? a.startRow < this.rowsRenderCalculator.startRow || a.startRow === this.rowsRenderCalculator.startRow && a.startRow > 0 ? !1 : !(a.endRow > this.rowsRenderCalculator.endRow || a.endRow === this.rowsRenderCalculator.endRow && a.endRow < this.wot.getSetting("totalRows") - 1) : !1;
                },
                areAllProposedVisibleColumnsAlreadyRendered: function(a) {
                    return this.columnsVisibleCalculator ? a.startColumn < this.columnsRenderCalculator.startColumn || a.startColumn === this.columnsRenderCalculator.startColumn && a.startColumn > 0 ? !1 : !(a.endColumn > this.columnsRenderCalculator.endColumn || a.endColumn === this.columnsRenderCalculator.endColumn && a.endColumn < this.wot.getSetting("totalColumns") - 1) : !1;
                }
            }, {}), window.WalkontableViewport = r;
        }, {
            "calculator/viewportColumns": 3,
            "calculator/viewportRows": 4,
            eventManager: 40,
            "helpers/dom/element": 44
        } ],
        23: [ function(a, b, c) {
            "use strict";
            var d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w = Handsontable.version, x = Handsontable.buildDate;
            window.Handsontable = function M(a, b) {
                var c = new M.Core(a, b || {});
                return c.init(), c;
            }, Handsontable.version = w, Handsontable.buildDate = x, d = a("shims/classes"), 
            d && d.__esModule && d || {
                "default": d
            }, e = a("es6collections"), e && e.__esModule && e || {
                "default": e
            }, Handsontable.plugins = {};
            var y = (f = a("pluginHooks"), f && f.__esModule && f || {
                "default": f
            }).Hooks;
            Handsontable.hooks || (Handsontable.hooks = new y()), g = a("core"), g && g.__esModule && g || {
                "default": g
            }, h = a("renderers/_cellDecorator"), h && h.__esModule && h || {
                "default": h
            }, i = a("cellTypes"), i && i.__esModule && i || {
                "default": i
            }, j = a("plugins/jqueryHandsontable"), j && j.__esModule && j || {
                "default": j
            };
            var z = (k = a("helpers/array"), k && k.__esModule && k || {
                "default": k
            }), A = (l = a("helpers/browser"), l && l.__esModule && l || {
                "default": l
            }), B = (m = a("helpers/data"), m && m.__esModule && m || {
                "default": m
            }), C = (n = a("helpers/function"), n && n.__esModule && n || {
                "default": n
            }), D = (o = a("helpers/mixed"), o && o.__esModule && o || {
                "default": o
            }), E = (p = a("helpers/number"), p && p.__esModule && p || {
                "default": p
            }), F = (q = a("helpers/object"), q && q.__esModule && q || {
                "default": q
            }), G = (r = a("helpers/setting"), r && r.__esModule && r || {
                "default": r
            }), H = (s = a("helpers/string"), s && s.__esModule && s || {
                "default": s
            }), I = (t = a("helpers/unicode"), t && t.__esModule && t || {
                "default": t
            }), J = [ z, A, B, C, D, E, F, G, H, I ];
            Handsontable.helper = {}, z.arrayEach(J, function(a) {
                z.arrayEach(Object.getOwnPropertyNames(a), function(b) {
                    "_" !== b.charAt(0) && (Handsontable.helper[b] = a[b]);
                });
            });
            var K = (u = a("helpers/dom/element"), u && u.__esModule && u || {
                "default": u
            }), L = (v = a("helpers/dom/event"), v && v.__esModule && v || {
                "default": v
            });
            Handsontable.dom = {}, Handsontable.Dom = Handsontable.dom, z.arrayEach([ K, L ], function(a) {
                z.arrayEach(Object.getOwnPropertyNames(a), function(b) {
                    "_" !== b.charAt(0) && (Handsontable.dom[b] = a[b]);
                });
            });
        }, {
            cellTypes: 24,
            core: 25,
            es6collections: "es6collections",
            "helpers/array": 41,
            "helpers/browser": 42,
            "helpers/data": 43,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/function": 46,
            "helpers/mixed": 47,
            "helpers/number": 48,
            "helpers/object": 49,
            "helpers/setting": 50,
            "helpers/string": 51,
            "helpers/unicode": 52,
            pluginHooks: 54,
            "plugins/jqueryHandsontable": 1,
            "renderers/_cellDecorator": 87,
            "shims/classes": 94
        } ],
        24: [ function(a, b, c) {
            "use strict";
            var d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z = (d = a("helpers/browser"), 
            d && d.__esModule && d || {
                "default": d
            }).isMobileBrowser, A = (e = a("editors"), e && e.__esModule && e || {
                "default": e
            }).getEditorConstructor, B = (f = a("renderers"), f && f.__esModule && f || {
                "default": f
            }).getRenderer;
            (g = a("editors/autocompleteEditor"), g && g.__esModule && g || {
                "default": g
            }).AutocompleteEditor, (h = a("editors/checkboxEditor"), h && h.__esModule && h || {
                "default": h
            }).CheckboxEditor, (i = a("editors/dateEditor"), i && i.__esModule && i || {
                "default": i
            }).DateEditor, (j = a("editors/dropdownEditor"), j && j.__esModule && j || {
                "default": j
            }).DropdownEditor, (k = a("editors/handsontableEditor"), k && k.__esModule && k || {
                "default": k
            }).HandsontableEditor, (l = a("editors/mobileTextEditor"), l && l.__esModule && l || {
                "default": l
            }).MobileTextEditor, (m = a("editors/numericEditor"), m && m.__esModule && m || {
                "default": m
            }).NumericEditor, (n = a("editors/passwordEditor"), n && n.__esModule && n || {
                "default": n
            }).PasswordEditor, (o = a("editors/selectEditor"), o && o.__esModule && o || {
                "default": o
            }).SelectEditor, (p = a("editors/textEditor"), p && p.__esModule && p || {
                "default": p
            }).TextEditor, (q = a("renderers/autocompleteRenderer"), q && q.__esModule && q || {
                "default": q
            }).AutocompleteRenderer, (r = a("renderers/checkboxRenderer"), r && r.__esModule && r || {
                "default": r
            }).CheckboxRenderer, (s = a("renderers/htmlRenderer"), s && s.__esModule && s || {
                "default": s
            }).HtmlRenderer, (t = a("renderers/numericRenderer"), t && t.__esModule && t || {
                "default": t
            }).NumericRenderer, (u = a("renderers/passwordRenderer"), u && u.__esModule && u || {
                "default": u
            }).PasswordRenderer, (v = a("renderers/textRenderer"), v && v.__esModule && v || {
                "default": v
            }).TextRenderer, (w = a("validators/autocompleteValidator"), w && w.__esModule && w || {
                "default": w
            }).AutocompleteValidator, (x = a("validators/dateValidator"), x && x.__esModule && x || {
                "default": x
            }).DateValidator, (y = a("validators/numericValidator"), y && y.__esModule && y || {
                "default": y
            }).NumericValidator;
            Handsontable.mobileBrowser = z(), Handsontable.AutocompleteCell = {
                editor: A("autocomplete"),
                renderer: B("autocomplete"),
                validator: Handsontable.AutocompleteValidator
            }, Handsontable.CheckboxCell = {
                editor: A("checkbox"),
                renderer: B("checkbox")
            }, Handsontable.TextCell = {
                editor: A(Handsontable.mobileBrowser ? "mobile" : "text"),
                renderer: B("text")
            }, Handsontable.NumericCell = {
                editor: A("numeric"),
                renderer: B("numeric"),
                validator: Handsontable.NumericValidator,
                dataType: "number"
            }, Handsontable.DateCell = {
                editor: A("date"),
                validator: Handsontable.DateValidator,
                renderer: B("autocomplete")
            }, Handsontable.HandsontableCell = {
                editor: A("handsontable"),
                renderer: B("autocomplete")
            }, Handsontable.PasswordCell = {
                editor: A("password"),
                renderer: B("password"),
                copyable: !1
            }, Handsontable.DropdownCell = {
                editor: A("dropdown"),
                renderer: B("autocomplete"),
                validator: Handsontable.AutocompleteValidator
            }, Handsontable.cellTypes = {
                text: Handsontable.TextCell,
                date: Handsontable.DateCell,
                numeric: Handsontable.NumericCell,
                checkbox: Handsontable.CheckboxCell,
                autocomplete: Handsontable.AutocompleteCell,
                handsontable: Handsontable.HandsontableCell,
                password: Handsontable.PasswordCell,
                dropdown: Handsontable.DropdownCell
            }, Handsontable.cellLookup = {
                validator: {
                    numeric: Handsontable.NumericValidator,
                    autocomplete: Handsontable.AutocompleteValidator
                }
            };
        }, {
            editors: 28,
            "editors/autocompleteEditor": 30,
            "editors/checkboxEditor": 31,
            "editors/dateEditor": 32,
            "editors/dropdownEditor": 33,
            "editors/handsontableEditor": 34,
            "editors/mobileTextEditor": 35,
            "editors/numericEditor": 36,
            "editors/passwordEditor": 37,
            "editors/selectEditor": 38,
            "editors/textEditor": 39,
            "helpers/browser": 42,
            renderers: 86,
            "renderers/autocompleteRenderer": 88,
            "renderers/checkboxRenderer": 89,
            "renderers/htmlRenderer": 90,
            "renderers/numericRenderer": 91,
            "renderers/passwordRenderer": 92,
            "renderers/textRenderer": 93,
            "validators/autocompleteValidator": 98,
            "validators/dateValidator": 99,
            "validators/numericValidator": 100
        } ],
        25: [ function(a, b, c) {
            "use strict";
            var d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v = (d = a("numeral"), 
            d && d.__esModule && d || {
                "default": d
            })["default"], w = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), x = w.addClass, y = w.empty, z = w.isChildOfWebComponentTable, A = w.removeClass, B = (f = a("helpers/setting"), 
            f && f.__esModule && f || {
                "default": f
            }).columnFactory, C = (g = a("dataMap"), g && g.__esModule && g || {
                "default": g
            }).DataMap, D = (h = a("editorManager"), h && h.__esModule && h || {
                "default": h
            }).EditorManager, E = (i = a("eventManager"), i && i.__esModule && i || {
                "default": i
            }).eventManager, F = (j = a("helpers/object"), j && j.__esModule && j || {
                "default": j
            }), G = F.extend, H = F.duckSchema, I = F.isObjectEquals, J = F.deepClone, K = (k = a("helpers/array"), 
            k && k.__esModule && k || {
                "default": k
            }).arrayFlatten, L = (l = a("plugins"), l && l.__esModule && l || {
                "default": l
            }).getPlugin, M = (m = a("renderers"), m && m.__esModule && m || {
                "default": m
            }).getRenderer, N = (n = a("helpers/string"), n && n.__esModule && n || {
                "default": n
            }).randomString, O = (o = a("helpers/number"), o && o.__esModule && o || {
                "default": o
            }).rangeEach, P = (p = a("tableView"), p && p.__esModule && p || {
                "default": p
            }).TableView, Q = (q = a("helpers/data"), q && q.__esModule && q || {
                "default": q
            }), R = Q.translateRowsToColumns, S = Q.cellMethodLookupFactory, T = Q.spreadsheetColumnLabel, U = (r = a("3rdparty/walkontable/src/cell/coords"), 
            r && r.__esModule && r || {
                "default": r
            }).WalkontableCellCoords, V = (s = a("3rdparty/walkontable/src/cell/range"), s && s.__esModule && s || {
                "default": s
            }).WalkontableCellRange, W = ((t = a("3rdparty/walkontable/src/selection"), t && t.__esModule && t || {
                "default": t
            }).WalkontableSelection, (u = a("3rdparty/walkontable/src/calculator/viewportColumns"), 
            u && u.__esModule && u || {
                "default": u
            }).WalkontableViewportColumnsCalculator);
            Handsontable.activeGuid = null, Handsontable.Core = function(a, b) {
                function c() {
                    var a = !1;
                    return {
                        validatorsInQueue: 0,
                        valid: !0,
                        addValidatorToQueue: function() {
                            this.validatorsInQueue++, a = !1;
                        },
                        removeValidatorFormQueue: function() {
                            this.validatorsInQueue = this.validatorsInQueue - 1 < 0 ? 0 : this.validatorsInQueue - 1, 
                            this.checkIfQueueIsEmpty();
                        },
                        onQueueEmpty: function(a) {},
                        checkIfQueueIsEmpty: function() {
                            0 == this.validatorsInQueue && 0 == a && (a = !0, this.onQueueEmpty(this.valid));
                        }
                    };
                }
                function d(a, b, d) {
                    function e() {
                        var c;
                        a.length && (c = Handsontable.hooks.run(p, "beforeChange", a, b), "function" == typeof c ? console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed).") : c === !1 && a.splice(0, a.length)), 
                        d();
                    }
                    var f = new c();
                    f.onQueueEmpty = e;
                    for (var g = a.length - 1; g >= 0; g--) if (null === a[g]) a.splice(g, 1); else {
                        var h = a[g][0], i = l.propToCol(a[g][1]), j = p.runHooks("modifyCol", i), k = p.getCellMeta(h, j);
                        if ("numeric" === k.type && "string" == typeof a[g][3] && a[g][3].length > 0 && (/^-?[\d\s]*(\.|\,)?\d*$/.test(a[g][3]) || k.format)) {
                            var m = a[g][3].length;
                            "undefined" == typeof k.language ? v.language("en") : a[g][3].indexOf(".") === m - 3 && -1 === a[g][3].indexOf(",") ? v.language("en") : v.language(k.language), 
                            v.validate(a[g][3]) && (a[g][3] = v().unformat(a[g][3]));
                        }
                        p.getCellValidator(k) && (f.addValidatorToQueue(), p.validateCell(a[g][3], k, function(b, c) {
                            return function(d) {
                                if ("boolean" != typeof d) throw new Error("Validation error: result is not boolean");
                                d === !1 && c.allowInvalid === !1 && (a.splice(b, 1), c.valid = !0, --b), f.removeValidatorFormQueue();
                            };
                        }(g, k), b));
                    }
                    f.checkIfQueueIsEmpty();
                }
                function e(a, b) {
                    var c = a.length - 1;
                    if (!(0 > c)) {
                        for (;c >= 0; c--) if (null !== a[c]) {
                            if (null != a[c][2] || null != a[c][3]) {
                                if (k.settings.allowInsertRow) for (;a[c][0] > p.countRows() - 1; ) l.createRow();
                                if ("array" === p.dataType && k.settings.allowInsertColumn) for (;l.propToCol(a[c][1]) > p.countCols() - 1; ) l.createCol();
                                l.set(a[c][0], a[c][1], a[c][3]);
                            }
                        } else a.splice(c, 1);
                        p.forceFullRender = !0, m.adjustRowsAndCols(), Handsontable.hooks.run(p, "beforeChangeRender", a, b), 
                        n.refreshBorders(null, !0), p.view.wt.wtOverlays.adjustElementsSize(), Handsontable.hooks.run(p, "afterChange", a, b || "edit");
                    }
                }
                function f(a, b, c) {
                    return "object" == typeof a ? a : [ [ a, b, c ] ];
                }
                function g(a) {
                    if (a.hasOwnProperty("type")) {
                        var b, c = {};
                        if ("object" == typeof a.type) b = a.type; else if ("string" == typeof a.type && (b = Handsontable.cellTypes[a.type], 
                        void 0 === b)) throw new Error('You declared cell type "' + a.type + '" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');
                        for (var d in b) b.hasOwnProperty(d) && !a.hasOwnProperty(d) && (c[d] = b[d]);
                        return c;
                    }
                }
                function h(a) {
                    return Handsontable.hooks.run(p, "modifyRow", a);
                }
                function i(a) {
                    return Handsontable.hooks.run(p, "modifyCol", a);
                }
                function j() {
                    throw new Error("This method cannot be called because this Handsontable instance has been destroyed");
                }
                var k, l, m, n, o, p = this, q = function() {}, r = E(p);
                G(q.prototype, X.prototype), G(q.prototype, b), G(q.prototype, g(b)), this.rootElement = a, 
                this.isHotTableEnv = z(this.rootElement), Handsontable.eventManager.isHotTableEnv = this.isHotTableEnv, 
                this.container = document.createElement("DIV"), this.renderCall = !1, a.insertBefore(this.container, a.firstChild), 
                this.guid = "ht_" + N(), this.rootElement.id && "ht_" !== this.rootElement.id.substring(0, 3) || (this.rootElement.id = this.guid), 
                k = {
                    cellSettings: [],
                    columnSettings: [],
                    columnsSettingConflicts: [ "data", "width" ],
                    settings: new q(),
                    selRange: null,
                    isPopulated: null,
                    scrollable: null,
                    firstRun: !0
                }, m = {
                    alter: function(a, b, c, d, e) {
                        var f;
                        switch (c = c || 1, a) {
                          case "insert_row":
                            if (p.getSettings().maxRows === p.countRows()) return;
                            f = l.createRow(b, c), f && (n.isSelected() && k.selRange.from.row >= b ? (k.selRange.from.row = k.selRange.from.row + f, 
                            n.transformEnd(f, 0)) : n.refreshBorders());
                            break;

                          case "insert_col":
                            if (f = l.createCol(b, c)) {
                                if (Array.isArray(p.getSettings().colHeaders)) {
                                    var g = [ b, 0 ];
                                    g.length += f, Array.prototype.splice.apply(p.getSettings().colHeaders, g);
                                }
                                n.isSelected() && k.selRange.from.col >= b ? (k.selRange.from.col = k.selRange.from.col + f, 
                                n.transformEnd(0, f)) : n.refreshBorders();
                            }
                            break;

                          case "remove_row":
                            b = p.runHooks("modifyCol", b), l.removeRow(b, c), k.cellSettings.splice(b, c);
                            var h = p.countRows(), i = p.getSettings().fixedRowsTop;
                            i >= b + 1 && (p.getSettings().fixedRowsTop -= Math.min(c, i - b));
                            var j = p.getSettings().fixedRowsBottom;
                            j && b + 1 >= h - j && (p.getSettings().fixedRowsBottom -= Math.min(c, j - b)), 
                            m.adjustRowsAndCols(), n.refreshBorders();
                            break;

                          case "remove_col":
                            l.removeCol(b, c);
                            for (var o = 0, q = l.getAll().length; q > o; o++) o in k.cellSettings && k.cellSettings[o].splice(b, c);
                            var r = p.getSettings().fixedColumnsLeft;
                            r >= b + 1 && (p.getSettings().fixedColumnsLeft -= Math.min(c, r - b)), Array.isArray(p.getSettings().colHeaders) && ("undefined" == typeof b && (b = -1), 
                            p.getSettings().colHeaders.splice(b, c)), m.adjustRowsAndCols(), n.refreshBorders();
                            break;

                          default:
                            throw new Error('There is no such action "' + a + '"');
                        }
                        e || m.adjustRowsAndCols();
                    },
                    adjustRowsAndCols: function() {
                        if (k.settings.minRows) {
                            var a = p.countRows();
                            if (a < k.settings.minRows) for (var b = 0, c = k.settings.minRows; c - a > b; b++) l.createRow(p.countRows(), 1, !0);
                        }
                        if (k.settings.minSpareRows) {
                            var d = p.countEmptyRows(!0);
                            if (d < k.settings.minSpareRows) for (;d < k.settings.minSpareRows && p.countRows() < k.settings.maxRows; d++) l.createRow(p.countRows(), 1, !0);
                        }
                        var e;
                        if ((k.settings.minCols || k.settings.minSpareCols) && (e = p.countEmptyCols(!0)), 
                        k.settings.minCols && !k.settings.columns && p.countCols() < k.settings.minCols) for (;p.countCols() < k.settings.minCols; e++) l.createCol(p.countCols(), 1, !0);
                        if (k.settings.minSpareCols && !k.settings.columns && "array" === p.dataType && e < k.settings.minSpareCols) for (;e < k.settings.minSpareCols && p.countCols() < k.settings.maxCols; e++) l.createCol(p.countCols(), 1, !0);
                        var f = p.countRows(), g = p.countCols();
                        if (0 !== f && 0 !== g || n.deselect(), n.isSelected()) {
                            var h = !1, i = k.selRange.from.row, j = k.selRange.from.col, m = k.selRange.to.row, o = k.selRange.to.col;
                            i > f - 1 ? (i = f - 1, h = !0, m > i && (m = i)) : m > f - 1 && (m = f - 1, h = !0, 
                            i > m && (i = m)), j > g - 1 ? (j = g - 1, h = !0, o > j && (o = j)) : o > g - 1 && (o = g - 1, 
                            h = !0, j > o && (j = o)), h && p.selectCell(i, j, m, o);
                        }
                        p.view && p.view.wt.wtOverlays.adjustElementsSize();
                    },
                    populateFromArray: function(a, b, c, d, e, f, g) {
                        var h, i, j, l, m = [], n = {};
                        if (i = b.length, 0 === i) return !1;
                        var o, q, r, s;
                        ({
                            row: null === c ? null : c.row,
                            col: null === c ? null : c.col
                        });
                        switch (e) {
                          case "shift_down":
                            for (o = c ? c.col - a.col + 1 : 0, q = c ? c.row - a.row + 1 : 0, b = R(b), j = 0, 
                            l = b.length, r = Math.max(l, o); r > j; j++) if (l > j) {
                                for (h = 0, i = b[j].length; q - i > h; h++) b[j].push(b[j][h % i]);
                                b[j].unshift(a.col + j, a.row, 0), p.spliceCol.apply(p, b[j]);
                            } else b[j % l][0] = a.col + j, p.spliceCol.apply(p, b[j % l]);
                            break;

                          case "shift_right":
                            for (o = c ? c.col - a.col + 1 : 0, q = c ? c.row - a.row + 1 : 0, h = 0, i = b.length, 
                            s = Math.max(i, q); s > h; h++) if (i > h) {
                                for (j = 0, l = b[h].length; o - l > j; j++) b[h].push(b[h][j % l]);
                                b[h].unshift(a.row + h, a.col, 0), p.spliceRow.apply(p, b[h]);
                            } else b[h % i][0] = a.row + h, p.spliceRow.apply(p, b[h % i]);
                            break;

                          case "overwrite":
                          default:
                            n.row = a.row, n.col = a.col;
                            var t, u = {
                                row: c && a ? c.row - a.row + 1 : 1,
                                col: c && a ? c.col - a.col + 1 : 1
                            }, v = 0, w = 0, x = !0, y = function(a) {
                                var c = void 0 !== arguments[1] ? arguments[1] : null, d = b[a % b.length];
                                return null !== c ? d[c % d.length] : d;
                            }, z = b.length, A = c ? c.row - a.row + 1 : 0;
                            for (i = c ? A : Math.max(z, A), h = 0; i > h && !(c && n.row > c.row && A > z || !k.settings.allowInsertRow && n.row > p.countRows() - 1 || n.row >= k.settings.maxRows); h++) {
                                var B = h - v, C = y(B).length, D = c ? c.col - a.col + 1 : 0;
                                if (l = c ? D : Math.max(C, D), n.col = a.col, t = p.getCellMeta(n.row, n.col), 
                                "paste" !== d && "autofill" !== d || !t.skipRowOnPaste) {
                                    for (w = 0, j = 0; l > j && !(c && n.col > c.col && D > C || !k.settings.allowInsertColumn && n.col > p.countCols() - 1 || n.col >= k.settings.maxCols); j++) if (t = p.getCellMeta(n.row, n.col), 
                                    "paste" !== d && "autofill" !== d || !t.skipColumnOnPaste) if (t.readOnly) n.col++; else {
                                        var E = j - w, F = y(B, E), G = p.getDataAtCell(n.row, n.col), K = {
                                            row: B,
                                            col: E
                                        };
                                        if ("autofill" === d) {
                                            var L = p.runHooks("beforeAutofillInsidePopulate", K, f, b, g, {}, u);
                                            L && (F = "undefined" == typeof L.value ? F : L.value);
                                        }
                                        if (null !== F && "object" == typeof F) if (null === G || "object" != typeof G) x = !1; else {
                                            var M = H(G[0] || G), N = H(F[0] || F);
                                            I(M, N) ? F = J(F) : x = !1;
                                        } else null !== G && "object" == typeof G && (x = !1);
                                        x && m.push([ n.row, n.col, F ]), x = !0, n.col++;
                                    } else w++, n.col++, l++;
                                    n.row++;
                                } else v++, n.row++, i++;
                            }
                            p.setDataAtCell(m, null, null, d || "populateFromArray");
                        }
                    }
                }, this.selection = n = {
                    inProgress: !1,
                    selectedHeader: {
                        cols: !1,
                        rows: !1
                    },
                    setSelectedHeaders: function(a, b) {
                        p.selection.selectedHeader.rows = a, p.selection.selectedHeader.cols = b;
                    },
                    begin: function() {
                        p.selection.inProgress = !0;
                    },
                    finish: function() {
                        var a = p.getSelected();
                        Handsontable.hooks.run(p, "afterSelectionEnd", a[0], a[1], a[2], a[3]), Handsontable.hooks.run(p, "afterSelectionEndByProp", a[0], p.colToProp(a[1]), a[2], p.colToProp(a[3])), 
                        p.selection.inProgress = !1;
                    },
                    isInProgress: function() {
                        return p.selection.inProgress;
                    },
                    setRangeStart: function(a, b) {
                        Handsontable.hooks.run(p, "beforeSetRangeStart", a), k.selRange = new V(a, a, a), 
                        n.setRangeEnd(a, null, b);
                    },
                    setRangeEnd: function(a, b, c) {
                        if (null !== k.selRange) {
                            var d, e = !1, f = !0, g = p.view.wt.wtTable.getFirstVisibleRow(), h = p.view.wt.wtTable.getFirstVisibleColumn(), i = {
                                row: null,
                                col: null
                            };
                            Handsontable.hooks.run(p, "beforeSetRangeEnd", a), p.selection.begin(), i.row = a.row < 0 ? g : a.row, 
                            i.col = a.col < 0 ? h : a.col, k.selRange.to = new U(i.row, i.col), k.settings.multiSelect || (k.selRange.from = a), 
                            p.view.wt.selections.current.clear(), d = p.getCellMeta(k.selRange.highlight.row, k.selRange.highlight.col).disableVisualSelection, 
                            "string" == typeof d && (d = [ d ]), (d === !1 || Array.isArray(d) && -1 === d.indexOf("current")) && p.view.wt.selections.current.add(k.selRange.highlight), 
                            p.view.wt.selections.area.clear(), (d === !1 || Array.isArray(d) && -1 === d.indexOf("area")) && n.isMultiple() && (p.view.wt.selections.area.add(k.selRange.from), 
                            p.view.wt.selections.area.add(k.selRange.to)), (k.settings.currentRowClassName || k.settings.currentColClassName) && (p.view.wt.selections.highlight.clear(), 
                            p.view.wt.selections.highlight.add(k.selRange.from), p.view.wt.selections.highlight.add(k.selRange.to)), 
                            Handsontable.hooks.run(p, "afterSelection", k.selRange.from.row, k.selRange.from.col, k.selRange.to.row, k.selRange.to.col), 
                            Handsontable.hooks.run(p, "afterSelectionByProp", k.selRange.from.row, l.colToProp(k.selRange.from.col), k.selRange.to.row, l.colToProp(k.selRange.to.col)), 
                            (0 === k.selRange.from.row && k.selRange.to.row === p.countRows() - 1 && p.countRows() > 1 || 0 === k.selRange.from.col && k.selRange.to.col === p.countCols() - 1 && p.countCols() > 1) && (e = !0), 
                            (a.row < 0 || a.col < 0) && (f = !1), b !== !1 && !e && f && (k.selRange.from && !n.isMultiple() ? p.view.scrollViewport(k.selRange.from) : p.view.scrollViewport(a)), 
                            n.refreshBorders(null, c);
                        }
                    },
                    refreshBorders: function(a, b) {
                        b || o.destroyEditor(a), p.view.render(), n.isSelected() && !b && o.prepareEditor();
                    },
                    isMultiple: function() {
                        var a = !(k.selRange.to.col === k.selRange.from.col && k.selRange.to.row === k.selRange.from.row), b = Handsontable.hooks.run(p, "afterIsMultipleSelection", a);
                        return a ? b : void 0;
                    },
                    transformStart: function(a, b, c, d) {
                        var e, f, g, h, i = new U(a, b), j = 0, l = 0;
                        p.runHooks("modifyTransformStart", i), e = p.countRows(), f = p.countCols(), h = p.getSettings().fixedRowsBottom, 
                        k.selRange.highlight.row + a > e - 1 ? c && k.settings.minSpareRows > 0 && !(h && k.selRange.highlight.row >= e - h - 1) ? (p.alter("insert_row", e), 
                        e = p.countRows()) : k.settings.autoWrapCol && (i.row = 1 - e, i.col = k.selRange.highlight.col + i.col == f - 1 ? 1 - f : 1) : k.settings.autoWrapCol && k.selRange.highlight.row + i.row < 0 && k.selRange.highlight.col + i.col >= 0 && (i.row = e - 1, 
                        i.col = k.selRange.highlight.col + i.col == 0 ? f - 1 : -1), k.selRange.highlight.col + i.col > f - 1 ? c && k.settings.minSpareCols > 0 ? (p.alter("insert_col", f), 
                        f = p.countCols()) : k.settings.autoWrapRow && (i.row = k.selRange.highlight.row + i.row == e - 1 ? 1 - e : 1, 
                        i.col = 1 - f) : k.settings.autoWrapRow && k.selRange.highlight.col + i.col < 0 && k.selRange.highlight.row + i.row >= 0 && (i.row = k.selRange.highlight.row + i.row == 0 ? e - 1 : -1, 
                        i.col = f - 1), g = new U(k.selRange.highlight.row + i.row, k.selRange.highlight.col + i.col), 
                        g.row < 0 ? (j = -1, g.row = 0) : g.row > 0 && g.row >= e && (j = 1, g.row = e - 1), 
                        g.col < 0 ? (l = -1, g.col = 0) : g.col > 0 && g.col >= f && (l = 1, g.col = f - 1), 
                        p.runHooks("afterModifyTransformStart", g, j, l), n.setRangeStart(g, d);
                    },
                    transformEnd: function(a, b) {
                        var c, d, e, f = new U(a, b), g = 0, h = 0;
                        p.runHooks("modifyTransformEnd", f), c = p.countRows(), d = p.countCols(), e = new U(k.selRange.to.row + f.row, k.selRange.to.col + f.col), 
                        e.row < 0 ? (g = -1, e.row = 0) : e.row > 0 && e.row >= c && (g = 1, e.row = c - 1), 
                        e.col < 0 ? (h = -1, e.col = 0) : e.col > 0 && e.col >= d && (h = 1, e.col = d - 1), 
                        p.runHooks("afterModifyTransformEnd", e, g, h), n.setRangeEnd(e, !0);
                    },
                    isSelected: function() {
                        return null !== k.selRange;
                    },
                    inInSelection: function(a) {
                        return n.isSelected() ? k.selRange.includes(a) : !1;
                    },
                    deselect: function() {
                        n.isSelected() && (p.selection.inProgress = !1, k.selRange = null, p.view.wt.selections.current.clear(), 
                        p.view.wt.selections.area.clear(), (k.settings.currentRowClassName || k.settings.currentColClassName) && p.view.wt.selections.highlight.clear(), 
                        o.destroyEditor(), n.refreshBorders(), Handsontable.hooks.run(p, "afterDeselect"));
                    },
                    selectAll: function() {
                        k.settings.multiSelect && (n.setRangeStart(new U(0, 0)), n.setRangeEnd(new U(p.countRows() - 1, p.countCols() - 1), !1));
                    },
                    empty: function() {
                        if (n.isSelected()) {
                            var a, b, c = k.selRange.getTopLeftCorner(), d = k.selRange.getBottomRightCorner(), e = [];
                            for (a = c.row; a <= d.row; a++) for (b = c.col; b <= d.col; b++) p.getCellMeta(a, b).readOnly || e.push([ a, b, "" ]);
                            p.setDataAtCell(e);
                        }
                    }
                }, this.init = function() {
                    Handsontable.hooks.run(p, "beforeInit"), Handsontable.mobileBrowser && x(p.rootElement, "mobile"), 
                    this.updateSettings(k.settings, !0), this.view = new P(this), o = new D(p, k, n, l), 
                    this.forceFullRender = !0, Handsontable.hooks.run(p, "init"), this.view.render(), 
                    "object" == typeof k.firstRun && (Handsontable.hooks.run(p, "afterChange", k.firstRun[0], k.firstRun[1]), 
                    k.firstRun = !1), Handsontable.hooks.run(p, "afterInit");
                }, this.validateCell = function(a, b, c, d) {
                    function e(a) {
                        var d = b.col, e = b.row, f = p.getCell(e, d, !0);
                        f && p.view.wt.wtSettings.settings.cellRenderer(e, d, f), c(a);
                    }
                    var f = p.getCellValidator(b);
                    "[object RegExp]" === Object.prototype.toString.call(f) && (f = function(a) {
                        return function(b, c) {
                            c(a.test(b));
                        };
                    }(f)), "function" == typeof f ? (a = Handsontable.hooks.run(p, "beforeValidate", a, b.row, b.prop, d), 
                    p._registerTimeout(setTimeout(function() {
                        f.call(b, a, function(c) {
                            c = Handsontable.hooks.run(p, "afterValidate", c, a, b.row, b.prop, d), b.valid = c, 
                            e(c), Handsontable.hooks.run(p, "postAfterValidate", c, a, b.row, b.prop, d);
                        });
                    }, 0))) : (b.valid = !0, e(b.valid));
                }, this.setDataAtCell = function(a, b, c, g) {
                    var h, i, j, k = f(a, b, c), m = [];
                    for (h = 0, i = k.length; i > h; h++) {
                        if ("object" != typeof k[h]) throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");
                        if ("number" != typeof k[h][1]) throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");
                        j = l.colToProp(k[h][1]), m.push([ k[h][0], j, l.get(k[h][0], j), k[h][2] ]);
                    }
                    g || "object" != typeof a || (g = b), d(m, g, function() {
                        e(m, g);
                    });
                }, this.setDataAtRowProp = function(a, b, c, g) {
                    var h, i, j = f(a, b, c), k = [];
                    for (h = 0, i = j.length; i > h; h++) k.push([ j[h][0], j[h][1], l.get(j[h][0], j[h][1]), j[h][2] ]);
                    g || "object" != typeof a || (g = b), d(k, g, function() {
                        e(k, g);
                    });
                }, this.listen = function() {
                    Handsontable.activeGuid = p.guid, document.activeElement && document.activeElement !== document.body ? document.activeElement.blur() : document.activeElement || document.body.focus();
                }, this.unlisten = function() {
                    Handsontable.activeGuid = null;
                }, this.isListening = function() {
                    return Handsontable.activeGuid === p.guid;
                }, this.destroyEditor = function(a) {
                    n.refreshBorders(a);
                }, this.populateFromArray = function(a, b, c, d, e, f, g, h, i) {
                    var j;
                    if ("object" != typeof c || "object" != typeof c[0]) throw new Error("populateFromArray parameter `input` must be an array of arrays");
                    return j = "number" == typeof d ? new U(d, e) : null, m.populateFromArray(new U(a, b), c, j, f, g, h, i);
                }, this.spliceCol = function(a, b, c) {
                    return l.spliceCol.apply(l, arguments);
                }, this.spliceRow = function(a, b, c) {
                    return l.spliceRow.apply(l, arguments);
                }, this.getSelected = function() {
                    return n.isSelected() ? [ k.selRange.from.row, k.selRange.from.col, k.selRange.to.row, k.selRange.to.col ] : void 0;
                }, this.getSelectedRange = function() {
                    return n.isSelected() ? k.selRange : void 0;
                }, this.render = function() {
                    p.view && (p.renderCall = !0, p.forceFullRender = !0, n.refreshBorders(null, !0));
                }, this.loadData = function(a) {
                    function b() {
                        k.cellSettings.length = 0;
                    }
                    if ("object" == typeof a && null !== a) a.push && a.splice || (a = [ a ]); else {
                        if (null !== a) throw new Error("loadData only accepts array of objects or array of arrays (" + typeof a + " given)");
                        a = [];
                        for (var c, d = 0, e = k.settings.startRows; e > d; d++) {
                            c = [];
                            for (var f = 0, g = k.settings.startCols; g > f; f++) c.push(null);
                            a.push(c);
                        }
                    }
                    k.isPopulated = !1, q.prototype.data = a, Array.isArray(k.settings.dataSchema) || Array.isArray(a[0]) ? p.dataType = "array" : "function" == typeof k.settings.dataSchema ? p.dataType = "function" : p.dataType = "object", 
                    l = new C(p, k, q), b(), m.adjustRowsAndCols(), Handsontable.hooks.run(p, "afterLoadData"), 
                    k.firstRun ? k.firstRun = [ null, "loadData" ] : (Handsontable.hooks.run(p, "afterChange", null, "loadData"), 
                    p.render()), k.isPopulated = !0;
                }, this.getData = function(a, b, c, d) {
                    return "undefined" == typeof a ? l.getAll() : l.getRange(new U(a, b), new U(c, d), l.DESTINATION_RENDERER);
                }, this.getCopyableText = function(a, b, c, d) {
                    return l.getCopyableText(new U(a, b), new U(c, d));
                }, this.getCopyableData = function(a, b) {
                    return l.getCopyable(a, l.colToProp(b));
                }, this.getSchema = function() {
                    return l.getSchema();
                }, this.updateSettings = function(a, b) {
                    var c, d;
                    if ("undefined" != typeof a.rows) throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');
                    if ("undefined" != typeof a.cols) throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');
                    for (c in a) "data" !== c && (Handsontable.hooks.getRegistered().indexOf(c) > -1 ? ("function" == typeof a[c] || Array.isArray(a[c])) && p.addHook(c, a[c]) : !b && a.hasOwnProperty(c) && (q.prototype[c] = a[c]));
                    if (void 0 === a.data && void 0 === k.settings.data ? p.loadData(null) : void 0 !== a.data ? p.loadData(a.data) : void 0 !== a.columns && l.createMap(), 
                    d = p.countCols(), k.cellSettings.length = 0, d > 0) {
                        var e, f;
                        for (c = 0; d > c; c++) k.columnSettings[c] = B(q, k.columnsSettingConflicts), e = k.columnSettings[c].prototype, 
                        q.prototype.columns && (f = q.prototype.columns[c], G(e, f), G(e, g(f)));
                    }
                    if ("undefined" != typeof a.cell) for (c in a.cell) if (a.cell.hasOwnProperty(c)) {
                        var h = a.cell[c];
                        p.setCellMetaObject(h.row, h.col, h);
                    }
                    if (Handsontable.hooks.run(p, "afterCellMetaReset"), "undefined" != typeof a.className && (q.prototype.className && A(p.rootElement, q.prototype.className), 
                    a.className && x(p.rootElement, a.className)), "undefined" != typeof a.height) {
                        var i = a.height;
                        "function" == typeof i && (i = i()), p.rootElement.style.height = i + "px";
                    }
                    if ("undefined" != typeof a.width) {
                        var j = a.width;
                        "function" == typeof j && (j = j()), p.rootElement.style.width = j + "px";
                    }
                    i && (p.rootElement.style.overflow = "hidden"), b || Handsontable.hooks.run(p, "afterUpdateSettings"), 
                    m.adjustRowsAndCols(), p.view && !k.firstRun && (p.forceFullRender = !0, n.refreshBorders(null, !0));
                }, this.getValue = function() {
                    var a = p.getSelected();
                    if (q.prototype.getValue) {
                        if ("function" == typeof q.prototype.getValue) return q.prototype.getValue.call(p);
                        if (a) return p.getData()[a[0]][q.prototype.getValue];
                    } else if (a) return p.getDataAtCell(a[0], a[1]);
                }, this.getSettings = function() {
                    return k.settings;
                }, this.clear = function() {
                    n.selectAll(), n.empty();
                }, this.alter = function(a, b, c, d, e) {
                    m.alter(a, b, c, d, e);
                }, this.getCell = function(a, b, c) {
                    return p.view.getCellAtCoords(new U(a, b), c);
                }, this.getCoords = function(a) {
                    return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable, a);
                }, this.colToProp = function(a) {
                    return l.colToProp(a);
                }, this.propToCol = function(a) {
                    return l.propToCol(a);
                }, this.getDataAtCell = function(a, b) {
                    return l.get(a, l.colToProp(b));
                }, this.getDataAtRowProp = function(a, b) {
                    return l.get(a, b);
                }, this.getDataAtCol = function(a) {
                    var b = [];
                    return b.concat.apply(b, l.getRange(new U(0, a), new U(k.settings.data.length - 1, a), l.DESTINATION_RENDERER));
                }, this.getDataAtProp = function(a) {
                    var b, c = [];
                    return b = l.getRange(new U(0, l.propToCol(a)), new U(k.settings.data.length - 1, l.propToCol(a)), l.DESTINATION_RENDERER), 
                    c.concat.apply(c, b);
                }, this.getSourceDataAtCol = function(a) {
                    for (var b = [], c = k.settings.data, d = 0; d < c.length; d++) b.push(c[d][a]);
                    return b;
                }, this.getSourceDataAtRow = function(a) {
                    return k.settings.data[a];
                }, this.getDataAtRow = function(a) {
                    var b = l.getRange(new U(a, 0), new U(a, this.countCols() - 1), l.DESTINATION_RENDERER);
                    return b[0];
                }, this.getDataType = function(a, b, c, d) {
                    var e = this, f = null, g = null;
                    void 0 === a && (a = 0, c = this.countRows(), b = 0, d = this.countCols()), void 0 === c && (c = a), 
                    void 0 === d && (d = b);
                    var h = "mixed";
                    return O(Math.min(a, c), Math.max(a, c), function(a) {
                        var c = !0;
                        return O(Math.min(b, d), Math.max(b, d), function(b) {
                            var d = e.getCellMeta(a, b);
                            return g = d.type, f ? c = f === g : f = g, c;
                        }), h = c ? g : "mixed", c;
                    }), h;
                }, this.removeCellMeta = function(a, b, c) {
                    var d = p.getCellMeta(a, b);
                    void 0 != d[c] && delete k.cellSettings[a][b][c];
                }, this.setCellMetaObject = function(a, b, c) {
                    if ("object" == typeof c) for (var d in c) if (c.hasOwnProperty(d)) {
                        var e = c[d];
                        this.setCellMeta(a, b, d, e);
                    }
                }, this.setCellMeta = function(a, b, c, d) {
                    k.cellSettings[a] || (k.cellSettings[a] = []), k.cellSettings[a][b] || (k.cellSettings[a][b] = new k.columnSettings[b]()), 
                    k.cellSettings[a][b][c] = d, Handsontable.hooks.run(p, "afterSetCellMeta", a, b, c, d);
                }, this.getCellsMeta = function() {
                    return K(k.cellSettings);
                }, this.getCellMeta = function(a, b) {
                    var c, d = l.colToProp(b);
                    if (a = h(a), b = i(b), k.columnSettings[b] || (k.columnSettings[b] = B(q, k.columnsSettingConflicts)), 
                    k.cellSettings[a] || (k.cellSettings[a] = []), k.cellSettings[a][b] || (k.cellSettings[a][b] = new k.columnSettings[b]()), 
                    c = k.cellSettings[a][b], c.row = a, c.col = b, c.prop = d, c.instance = p, Handsontable.hooks.run(p, "beforeGetCellMeta", a, b, c), 
                    G(c, g(c)), c.cells) {
                        var e = c.cells.call(c, a, b, d);
                        e && (G(c, e), G(c, g(e)));
                    }
                    return Handsontable.hooks.run(p, "afterGetCellMeta", a, b, c), c;
                }, this.isColumnModificationAllowed = function() {
                    return !("object" === p.dataType || p.getSettings().columns);
                };
                var s = S("renderer");
                this.getCellRenderer = function(a, b) {
                    var c = s.call(this, a, b);
                    return M(c);
                }, this.getCellEditor = S("editor"), this.getCellValidator = S("validator"), this.validateCells = function(a) {
                    var b = new c();
                    b.onQueueEmpty = a;
                    for (var d = p.countRows() - 1; d >= 0; ) {
                        for (var e = p.countCols() - 1; e >= 0; ) b.addValidatorToQueue(), p.validateCell(p.getDataAtCell(d, e), p.getCellMeta(d, e), function(a) {
                            if ("boolean" != typeof a) throw new Error("Validation error: result is not boolean");
                            a === !1 && (b.valid = !1), b.removeValidatorFormQueue();
                        }, "validateCells"), e--;
                        d--;
                    }
                    b.checkIfQueueIsEmpty();
                }, this.getRowHeader = function(a) {
                    if (void 0 === a) {
                        for (var b = [], c = 0, d = p.countRows(); d > c; c++) b.push(p.getRowHeader(c));
                        return b;
                    }
                    return Array.isArray(k.settings.rowHeaders) && void 0 !== k.settings.rowHeaders[a] ? k.settings.rowHeaders[a] : "function" == typeof k.settings.rowHeaders ? k.settings.rowHeaders(a) : k.settings.rowHeaders && "string" != typeof k.settings.rowHeaders && "number" != typeof k.settings.rowHeaders ? a + 1 : k.settings.rowHeaders;
                }, this.hasRowHeaders = function() {
                    return !!k.settings.rowHeaders;
                }, this.hasColHeaders = function() {
                    if (void 0 !== k.settings.colHeaders && null !== k.settings.colHeaders) return !!k.settings.colHeaders;
                    for (var a = 0, b = p.countCols(); b > a; a++) if (p.getColHeader(a)) return !0;
                    return !1;
                }, this.getColHeader = function(a) {
                    if (void 0 === a) {
                        for (var b = [], c = 0, d = p.countCols(); d > c; c++) b.push(p.getColHeader(c));
                        return b;
                    }
                    var e = a;
                    return a = Handsontable.hooks.run(p, "modifyCol", a), k.settings.columns && k.settings.columns[a] && k.settings.columns[a].title ? k.settings.columns[a].title : Array.isArray(k.settings.colHeaders) && void 0 !== k.settings.colHeaders[a] ? k.settings.colHeaders[a] : "function" == typeof k.settings.colHeaders ? k.settings.colHeaders(a) : k.settings.colHeaders && "string" != typeof k.settings.colHeaders && "number" != typeof k.settings.colHeaders ? T(e) : k.settings.colHeaders;
                }, this._getColWidthFromSettings = function(a) {
                    var b = p.getCellMeta(0, a), c = b.width;
                    if (void 0 !== c && c !== k.settings.width || (c = b.colWidths), void 0 !== c && null !== c) {
                        switch (typeof c) {
                          case "object":
                            c = c[a];
                            break;

                          case "function":
                            c = c(a);
                        }
                        "string" == typeof c && (c = parseInt(c, 10));
                    }
                    return c;
                }, this.getColWidth = function(a) {
                    var b = p._getColWidthFromSettings(a);
                    return b = Handsontable.hooks.run(p, "modifyColWidth", b, a), void 0 === b && (b = W.DEFAULT_WIDTH), 
                    b;
                }, this._getRowHeightFromSettings = function(a) {
                    var b = k.settings.rowHeights;
                    if (void 0 !== b && null !== b) {
                        switch (typeof b) {
                          case "object":
                            b = b[a];
                            break;

                          case "function":
                            b = b(a);
                        }
                        "string" == typeof b && (b = parseInt(b, 10));
                    }
                    return b;
                }, this.getRowHeight = function(a) {
                    var b = p._getRowHeightFromSettings(a);
                    return b = Handsontable.hooks.run(p, "modifyRowHeight", b, a);
                }, this.countRows = function() {
                    return k.settings.data.length;
                }, this.countCols = function() {
                    return "object" === p.dataType || "function" === p.dataType ? k.settings.columns && k.settings.columns.length ? k.settings.columns.length : l.colToPropCache.length : "array" === p.dataType ? k.settings.columns && k.settings.columns.length ? k.settings.columns.length : k.settings.data && k.settings.data[0] && k.settings.data[0].length ? k.settings.data[0].length : 0 : void 0;
                }, this.getColspanOffset = function(a, b) {
                    var c = 0;
                    if (p.colspanArray) {
                        for (var d = 0; a > d; d++) c += p.colspanArray[b][d] - 1 || 0;
                        return c;
                    }
                    for (var c = 0, e = p.view.wt.wtTable.THEAD.childNodes.length - b - 1, f = p.view.wt.wtTable.THEAD.querySelector("tr:nth-child(" + parseInt(e + 1, 10) + ")"), g = p.view.wt.wtSettings.settings.rowHeaders().length, d = g; g + a > d; d++) f.childNodes[d].hasAttribute("colspan") && (c += parseInt(f.childNodes[d].getAttribute("colspan"), 10) - 1);
                    return c;
                }, this.getHeaderColspan = function(a, b) {
                    var c = p.view.wt.wtTable.THEAD.childNodes.length - b - 1, d = p.view.wt.wtSettings.settings.rowHeaders().length, e = p.view.wt.wtTable.THEAD.querySelector("tr:nth-child(" + parseInt(c + 1, 10) + ")"), f = d + a - p.view.wt.wtViewport.columnsRenderCalculator.startColumn;
                    return e.childNodes[f].hasAttribute("colspan") ? parseInt(e.childNodes[f].getAttribute("colspan"), 10) : 0;
                }, this.rowOffset = function() {
                    return p.view.wt.wtTable.getFirstRenderedRow();
                }, this.colOffset = function() {
                    return p.view.wt.wtTable.getFirstRenderedColumn();
                }, this.countRenderedRows = function() {
                    return p.view.wt.drawn ? p.view.wt.wtTable.getRenderedRowsCount() : -1;
                }, this.countVisibleRows = function() {
                    return p.view.wt.drawn ? p.view.wt.wtTable.getVisibleRowsCount() : -1;
                }, this.countRenderedCols = function() {
                    return p.view.wt.drawn ? p.view.wt.wtTable.getRenderedColumnsCount() : -1;
                }, this.countVisibleCols = function() {
                    return p.view.wt.drawn ? p.view.wt.wtTable.getVisibleColumnsCount() : -1;
                }, this.countEmptyRows = function(a) {
                    for (var b, c = p.countRows() - 1, d = 0; c >= 0; ) {
                        if (b = Handsontable.hooks.run(this, "modifyRow", c), p.isEmptyRow(b)) d++; else if (a) break;
                        c--;
                    }
                    return d;
                }, this.countEmptyCols = function(a) {
                    if (p.countRows() < 1) return 0;
                    for (var b = p.countCols() - 1, c = 0; b >= 0; ) {
                        if (p.isEmptyCol(b)) c++; else if (a) break;
                        b--;
                    }
                    return c;
                }, this.isEmptyRow = function(a) {
                    return k.settings.isEmptyRow.call(p, a);
                }, this.isEmptyCol = function(a) {
                    return k.settings.isEmptyCol.call(p, a);
                }, this.selectCell = function(a, b, c, d, e, f) {
                    var g;
                    if (f = "undefined" == typeof f || f === !0, "number" != typeof a || 0 > a || a >= p.countRows()) return !1;
                    if ("number" != typeof b || 0 > b || b >= p.countCols()) return !1;
                    if ("undefined" != typeof c) {
                        if ("number" != typeof c || 0 > c || c >= p.countRows()) return !1;
                        if ("number" != typeof d || 0 > d || d >= p.countCols()) return !1;
                    }
                    return g = new U(a, b), k.selRange = new V(g, g, g), document.activeElement && document.activeElement !== document.documentElement && document.activeElement !== document.body && document.activeElement.blur(), 
                    f && p.listen(), "undefined" == typeof c ? n.setRangeEnd(k.selRange.from, e) : n.setRangeEnd(new U(c, d), e), 
                    p.selection.finish(), !0;
                }, this.selectCellByProp = function(a, b, c, d, e) {
                    return arguments[1] = l.propToCol(arguments[1]), "undefined" != typeof arguments[3] && (arguments[3] = l.propToCol(arguments[3])), 
                    p.selectCell.apply(p, arguments);
                }, this.deselectCell = function() {
                    n.deselect();
                }, this.destroy = function() {
                    p._clearTimeouts(), p.view && p.view.destroy(), y(p.rootElement), r.destroy(), Handsontable.hooks.run(p, "afterDestroy"), 
                    Handsontable.hooks.destroy(p);
                    for (var a in p) p.hasOwnProperty(a) && ("function" == typeof p[a] ? p[a] = j : "guid" !== a && (p[a] = null));
                    k = null, l = null, m = null, n = null, o = null, p = null, q = null;
                }, this.getActiveEditor = function() {
                    return o.getActiveEditor();
                }, this.getPlugin = function(a) {
                    return L(this, a);
                }, this.getInstance = function() {
                    return p;
                }, this.addHook = function(a, b) {
                    Handsontable.hooks.add(a, b, p);
                }, this.addHookOnce = function(a, b) {
                    Handsontable.hooks.once(a, b, p);
                }, this.removeHook = function(a, b) {
                    Handsontable.hooks.remove(a, b, p);
                }, this.runHooks = function(a, b, c, d, e, f, g) {
                    return Handsontable.hooks.run(p, a, b, c, d, e, f, g);
                }, this.timeouts = [], this._registerTimeout = function(a) {
                    this.timeouts.push(a);
                }, this._clearTimeouts = function() {
                    for (var a = 0, b = this.timeouts.length; b > a; a++) clearTimeout(this.timeouts[a]);
                }, this.version = Handsontable.version, Handsontable.hooks.run(p, "construct");
            };
            var X = function() {};
            X.prototype = {
                data: void 0,
                dataSchema: void 0,
                width: void 0,
                height: void 0,
                startRows: 5,
                startCols: 5,
                rowHeaders: null,
                colHeaders: null,
                colWidths: void 0,
                columns: void 0,
                cells: void 0,
                cell: [],
                comments: !1,
                customBorders: !1,
                minRows: 0,
                minCols: 0,
                maxRows: 1 / 0,
                maxCols: 1 / 0,
                minSpareRows: 0,
                minSpareCols: 0,
                allowInsertRow: !0,
                allowInsertColumn: !0,
                allowRemoveRow: !0,
                allowRemoveColumn: !0,
                multiSelect: !0,
                fillHandle: !0,
                fixedRowsTop: 0,
                fixedRowsBottom: 0,
                fixedColumnsLeft: 0,
                outsideClickDeselects: !0,
                enterBeginsEditing: !0,
                enterMoves: {
                    row: 1,
                    col: 0
                },
                tabMoves: {
                    row: 0,
                    col: 1
                },
                autoWrapRow: !1,
                autoWrapCol: !1,
                copyRowsLimit: 1e3,
                copyColsLimit: 1e3,
                pasteMode: "overwrite",
                persistentState: !1,
                currentRowClassName: void 0,
                currentColClassName: void 0,
                className: void 0,
                tableClassName: void 0,
                stretchH: "none",
                isEmptyRow: function(a) {
                    var b, c, d, e;
                    for (b = 0, c = this.countCols(); c > b; b++) if (d = this.getDataAtCell(a, b), 
                    "" !== d && null !== d && "undefined" != typeof d) return "object" == typeof d ? (e = this.getCellMeta(a, b), 
                    I(this.getSchema()[e.prop], d)) : !1;
                    return !0;
                },
                isEmptyCol: function(a) {
                    var b, c, d;
                    for (b = 0, c = this.countRows(); c > b; b++) if (d = this.getDataAtCell(b, a), 
                    "" !== d && null !== d && "undefined" != typeof d) return !1;
                    return !0;
                },
                observeDOMVisibility: !0,
                allowInvalid: !0,
                invalidCellClassName: "htInvalid",
                placeholder: !1,
                placeholderCellClassName: "htPlaceholder",
                readOnlyCellClassName: "htDimmed",
                renderer: void 0,
                commentedCellClassName: "htCommentCell",
                fragmentSelection: !1,
                readOnly: !1,
                skipColumnOnPaste: !1,
                search: !1,
                type: "text",
                copyable: !0,
                editor: void 0,
                autoComplete: void 0,
                visibleRows: 10,
                trimDropdown: !0,
                debug: !1,
                wordWrap: !0,
                noWordWrapClassName: "htNoWrap",
                contextMenu: void 0,
                contextMenuCopyPaste: void 0,
                copyPaste: void 0,
                undo: void 0,
                columnSorting: void 0,
                manualColumnMove: void 0,
                manualColumnResize: void 0,
                manualRowMove: void 0,
                manualRowResize: void 0,
                mergeCells: !1,
                viewportRowRenderingOffset: "auto",
                viewportColumnRenderingOffset: "auto",
                validator: void 0,
                disableVisualSelection: !1,
                sortIndicator: !1,
                manualColumnFreeze: void 0,
                trimWhitespace: !0,
                settings: void 0,
                source: void 0,
                title: void 0,
                checkedTemplate: void 0,
                uncheckedTemplate: void 0,
                label: void 0,
                format: void 0,
                language: void 0,
                selectOptions: void 0,
                autoColumnSize: void 0,
                autoRowSize: void 0,
                dateFormat: void 0,
                correctFormat: !1,
                defaultDate: void 0,
                strict: void 0,
                renderAllRows: void 0
            }, Handsontable.DefaultSettings = X;
        }, {
            "3rdparty/walkontable/src/calculator/viewportColumns": 3,
            "3rdparty/walkontable/src/cell/coords": 5,
            "3rdparty/walkontable/src/cell/range": 6,
            "3rdparty/walkontable/src/selection": 18,
            dataMap: 26,
            editorManager: 27,
            eventManager: 40,
            "helpers/array": 41,
            "helpers/data": 43,
            "helpers/dom/element": 44,
            "helpers/number": 48,
            "helpers/object": 49,
            "helpers/setting": 50,
            "helpers/string": 51,
            numeral: "numeral",
            plugins: 55,
            renderers: 86,
            tableView: 95
        } ],
        26: [ function(a, b, c) {
            "use strict";
            function d(a, b, c) {
                this.instance = a, this.priv = b, this.GridSettings = c, this.dataSource = this.instance.getSettings().data, 
                this.dataSource[0] ? this.duckSchema = this.recursiveDuckSchema(this.dataSource[0]) : this.duckSchema = {}, 
                this.createMap();
            }
            Object.defineProperties(c, {
                DataMap: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i, j, k = (e = a("SheetClip"), e && e.__esModule && e || {
                "default": e
            })["default"], l = (f = a("helpers/data"), f && f.__esModule && f || {
                "default": f
            }).cellMethodLookupFactory, m = (g = a("helpers/setting"), g && g.__esModule && g || {
                "default": g
            }).columnFactory, n = (h = a("helpers/object"), h && h.__esModule && h || {
                "default": h
            }), o = n.duckSchema, p = n.deepExtend, q = (i = a("helpers/array"), i && i.__esModule && i || {
                "default": i
            }), r = q.extendArray, s = q.to2dArray, t = (j = a("multiMap"), j && j.__esModule && j || {
                "default": j
            }).MultiMap;
            d.prototype.DESTINATION_RENDERER = 1, d.prototype.DESTINATION_CLIPBOARD_GENERATOR = 2, 
            d.prototype.recursiveDuckSchema = function(a) {
                return o(a);
            }, d.prototype.recursiveDuckColumns = function(a, b, c) {
                var d, e;
                if ("undefined" == typeof b && (b = 0, c = ""), "object" == typeof a && !Array.isArray(a)) for (e in a) a.hasOwnProperty(e) && (null === a[e] ? (d = c + e, 
                this.colToPropCache.push(d), this.propToColCache.set(d, b), b++) : b = this.recursiveDuckColumns(a[e], b, e + "."));
                return b;
            }, d.prototype.createMap = function() {
                var a, b, c = this.getSchema();
                if ("undefined" == typeof c) throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");
                this.colToPropCache = [], this.propToColCache = new t();
                var d = this.instance.getSettings().columns;
                if (d) for (a = 0, b = d.length; b > a; a++) "undefined" != typeof d[a].data && (this.colToPropCache[a] = d[a].data, 
                this.propToColCache.set(d[a].data, a)); else this.recursiveDuckColumns(c);
            }, d.prototype.colToProp = function(a) {
                return a = Handsontable.hooks.run(this.instance, "modifyCol", a), this.colToPropCache && "undefined" != typeof this.colToPropCache[a] ? this.colToPropCache[a] : a;
            }, d.prototype.propToCol = function(a) {
                var b;
                return b = "undefined" == typeof this.propToColCache.get(a) ? a : this.propToColCache.get(a), 
                b = Handsontable.hooks.run(this.instance, "modifyCol", b);
            }, d.prototype.getSchema = function() {
                var a = this.instance.getSettings().dataSchema;
                return a ? "function" == typeof a ? a() : a : this.duckSchema;
            }, d.prototype.createRow = function(a, b, c) {
                var d, e, f = this.instance.countCols(), g = 0;
                b || (b = 1), ("number" != typeof a || a >= this.instance.countRows()) && (a = this.instance.countRows()), 
                e = a;
                for (var h = this.instance.getSettings().maxRows; b > g && this.instance.countRows() < h; ) {
                    if ("array" === this.instance.dataType) {
                        d = [];
                        for (var i = 0; f > i; i++) d.push(null);
                    } else "function" === this.instance.dataType ? d = this.instance.getSettings().dataSchema(a) : (d = {}, 
                    p(d, this.getSchema()));
                    a === this.instance.countRows() ? this.dataSource.push(d) : this.dataSource.splice(a, 0, d), 
                    g++, e++;
                }
                return Handsontable.hooks.run(this.instance, "afterCreateRow", a, g, c), this.instance.forceFullRender = !0, 
                g;
            }, d.prototype.createCol = function(a, b, c) {
                if (!this.instance.isColumnModificationAllowed()) throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");
                var d, e, f = this.instance.countRows(), g = this.dataSource, h = 0;
                b || (b = 1), e = a;
                for (var i = this.instance.getSettings().maxCols; b > h && this.instance.countCols() < i; ) {
                    if (d = m(this.GridSettings, this.priv.columnsSettingConflicts), "number" != typeof a || a >= this.instance.countCols()) {
                        for (var j = 0; f > j; j++) "undefined" == typeof g[j] && (g[j] = []), g[j].push(null);
                        this.priv.columnSettings.push(d);
                    } else {
                        for (var j = 0; f > j; j++) g[j].splice(e, 0, null);
                        this.priv.columnSettings.splice(e, 0, d);
                    }
                    h++, e++;
                }
                return Handsontable.hooks.run(this.instance, "afterCreateCol", a, h, c), this.instance.forceFullRender = !0, 
                h;
            }, d.prototype.removeRow = function(a, b) {
                b || (b = 1), "number" != typeof a && (a = -b), a = (this.instance.countRows() + a) % this.instance.countRows();
                var c = this.physicalRowsToLogical(a, b), d = Handsontable.hooks.run(this.instance, "beforeRemoveRow", a, b);
                if (d !== !1) {
                    var e = this.dataSource, f = e.filter(function(a, b) {
                        return -1 == c.indexOf(b);
                    });
                    e.length = 0, Array.prototype.push.apply(e, f), Handsontable.hooks.run(this.instance, "afterRemoveRow", a, b), 
                    this.instance.forceFullRender = !0;
                }
            }, d.prototype.removeCol = function(a, b) {
                if ("object" === this.instance.dataType || this.instance.getSettings().columns) throw new Error("cannot remove column with object data source or columns option specified");
                b || (b = 1), "number" != typeof a && (a = -b), a = (this.instance.countCols() + a) % this.instance.countCols();
                var c = Handsontable.hooks.run(this.instance, "beforeRemoveCol", a, b);
                if (c !== !1) {
                    for (var d = this.dataSource, e = 0, f = this.instance.countRows(); f > e; e++) d[e].splice(a, b);
                    this.priv.columnSettings.splice(a, b), Handsontable.hooks.run(this.instance, "afterRemoveCol", a, b), 
                    this.instance.forceFullRender = !0;
                }
            }, d.prototype.spliceCol = function(a, b, c) {
                var d = 4 <= arguments.length ? [].slice.call(arguments, 3) : [], e = this.instance.getDataAtCol(a), f = e.slice(b, b + c), g = e.slice(b + c);
                r(d, g);
                for (var h = 0; c > h; ) d.push(null), h++;
                return s(d), this.instance.populateFromArray(b, a, d, null, null, "spliceCol"), 
                f;
            }, d.prototype.spliceRow = function(a, b, c) {
                var d = 4 <= arguments.length ? [].slice.call(arguments, 3) : [], e = this.instance.getSourceDataAtRow(a), f = e.slice(b, b + c), g = e.slice(b + c);
                r(d, g);
                for (var h = 0; c > h; ) d.push(null), h++;
                return this.instance.populateFromArray(a, b, [ d ], null, null, "spliceRow"), f;
            }, d.prototype.get = function(a, b) {
                if (a = Handsontable.hooks.run(this.instance, "modifyRow", a), "string" == typeof b && b.indexOf(".") > -1) {
                    var c = b.split("."), d = this.dataSource[a];
                    if (!d) return null;
                    for (var e = 0, f = c.length; f > e; e++) if (d = d[c[e]], "undefined" == typeof d) return null;
                    return d;
                }
                return "function" == typeof b ? b(this.dataSource.slice(a, a + 1)[0]) : this.dataSource[a] ? this.dataSource[a][b] : null;
            };
            var u = l("copyable", !1);
            d.prototype.getCopyable = function(a, b) {
                return u.call(this.instance, a, this.propToCol(b)) ? this.get(a, b) : "";
            }, d.prototype.set = function(a, b, c, d) {
                if (a = Handsontable.hooks.run(this.instance, "modifyRow", a, d || "datamapGet"), 
                "string" == typeof b && b.indexOf(".") > -1) {
                    for (var e = b.split("."), f = this.dataSource[a], g = 0, h = e.length - 1; h > g; g++) "undefined" == typeof f[e[g]] && (f[e[g]] = {}), 
                    f = f[e[g]];
                    f[e[g]] = c;
                } else "function" == typeof b ? b(this.dataSource.slice(a, a + 1)[0], c) : this.dataSource[a][b] = c;
            }, d.prototype.physicalRowsToLogical = function(a, b) {
                for (var c, d = this.instance.countRows(), e = (d + a) % d, f = [], g = b; d > e && g; ) c = Handsontable.hooks.run(this.instance, "modifyRow", e), 
                f.push(c), g--, e++;
                return f;
            }, d.prototype.clear = function() {
                for (var a = 0; a < this.instance.countRows(); a++) for (var b = 0; b < this.instance.countCols(); b++) this.set(a, this.colToProp(b), "");
            }, d.prototype.getAll = function() {
                return this.dataSource;
            }, d.prototype.getRange = function(a, b, c) {
                var d, e, f, g, h, i = [], j = c === this.DESTINATION_CLIPBOARD_GENERATOR ? this.getCopyable : this.get;
                for (e = Math.max(a.row, b.row), g = Math.max(a.col, b.col), d = Math.min(a.row, b.row); e >= d; d++) {
                    for (h = [], f = Math.min(a.col, b.col); g >= f; f++) h.push(j.call(this, d, this.colToProp(f)));
                    i.push(h);
                }
                return i;
            }, d.prototype.getText = function(a, b) {
                return k.stringify(this.getRange(a, b, this.DESTINATION_RENDERER));
            }, d.prototype.getCopyableText = function(a, b) {
                return k.stringify(this.getRange(a, b, this.DESTINATION_CLIPBOARD_GENERATOR));
            }, Handsontable.DataMap = d;
        }, {
            SheetClip: "SheetClip",
            "helpers/array": 41,
            "helpers/data": 43,
            "helpers/object": 49,
            "helpers/setting": 50,
            multiMap: 53
        } ],
        27: [ function(a, b, c) {
            "use strict";
            function d(a, b, c) {
                function d(a) {
                    var d = "function" == typeof b.settings.enterMoves ? b.settings.enterMoves(event) : b.settings.enterMoves;
                    a ? c.transformStart(-d.row, -d.col) : c.transformStart(d.row, d.col, !0);
                }
                function e(a) {
                    a ? c.transformEnd(-1, 0) : c.transformStart(-1, 0);
                }
                function f(a) {
                    a ? c.transformEnd(1, 0) : c.transformStart(1, 0);
                }
                function g(a) {
                    a ? c.transformEnd(0, 1) : c.transformStart(0, 1);
                }
                function h(a) {
                    a ? c.transformEnd(0, -1) : c.transformStart(0, -1);
                }
                function i(i) {
                    var k, o;
                    if (a.isListening() && (Handsontable.hooks.run(a, "beforeKeyDown", i), !v && !r(i) && (b.lastKeyCode = i.keyCode, 
                    c.isSelected()))) {
                        if (k = (i.ctrlKey || i.metaKey) && !i.altKey, t && !t.isWaiting() && !(m(i.keyCode) || n(i.keyCode) || k || u.isEditorOpened())) return void u.openEditor("", i);
                        switch (o = i.shiftKey ? c.setRangeEnd : c.setRangeStart, i.keyCode) {
                          case l.A:
                            !u.isEditorOpened() && k && (c.selectAll(), i.preventDefault(), p(i));
                            break;

                          case l.ARROW_UP:
                            u.isEditorOpened() && !t.isWaiting() && u.closeEditorAndSaveChanges(k), e(i.shiftKey), 
                            i.preventDefault(), p(i);
                            break;

                          case l.ARROW_DOWN:
                            u.isEditorOpened() && !t.isWaiting() && u.closeEditorAndSaveChanges(k), f(i.shiftKey), 
                            i.preventDefault(), p(i);
                            break;

                          case l.ARROW_RIGHT:
                            u.isEditorOpened() && !t.isWaiting() && u.closeEditorAndSaveChanges(k), g(i.shiftKey), 
                            i.preventDefault(), p(i);
                            break;

                          case l.ARROW_LEFT:
                            u.isEditorOpened() && !t.isWaiting() && u.closeEditorAndSaveChanges(k), h(i.shiftKey), 
                            i.preventDefault(), p(i);
                            break;

                          case l.TAB:
                            var s = "function" == typeof b.settings.tabMoves ? b.settings.tabMoves(i) : b.settings.tabMoves;
                            i.shiftKey ? c.transformStart(-s.row, -s.col) : c.transformStart(s.row, s.col, !0), 
                            i.preventDefault(), p(i);
                            break;

                          case l.BACKSPACE:
                          case l.DELETE:
                            c.empty(i), u.prepareEditor(), i.preventDefault();
                            break;

                          case l.F2:
                            u.openEditor(null, i), t && t.enableFullEditMode(), i.preventDefault();
                            break;

                          case l.ENTER:
                            u.isEditorOpened() ? (t && t.state !== Handsontable.EditorState.WAITING && u.closeEditorAndSaveChanges(k), 
                            d(i.shiftKey)) : a.getSettings().enterBeginsEditing ? (u.openEditor(null, i), t && t.enableFullEditMode()) : d(i.shiftKey), 
                            i.preventDefault(), q(i);
                            break;

                          case l.ESCAPE:
                            u.isEditorOpened() && u.closeEditorAndRestoreOriginalValue(k), i.preventDefault();
                            break;

                          case l.HOME:
                            o(i.ctrlKey || i.metaKey ? new j(0, b.selRange.from.col) : new j(b.selRange.from.row, 0)), 
                            i.preventDefault(), p(i);
                            break;

                          case l.END:
                            o(i.ctrlKey || i.metaKey ? new j(a.countRows() - 1, b.selRange.from.col) : new j(b.selRange.from.row, a.countCols() - 1)), 
                            i.preventDefault(), p(i);
                            break;

                          case l.PAGE_UP:
                            c.transformStart(-a.countVisibleRows(), 0), i.preventDefault(), p(i);
                            break;

                          case l.PAGE_DOWN:
                            c.transformStart(a.countVisibleRows(), 0), i.preventDefault(), p(i);
                        }
                    }
                }
                function k() {
                    function b(a, b, c) {
                        "TD" == c.nodeName && (u.openEditor(), t && t.enableFullEditMode());
                    }
                    a.addHook("afterDocumentKeyDown", i), o.addEventListener(document.documentElement, "keydown", function(b) {
                        a.runHooks("afterDocumentKeyDown", b);
                    }), a.view.wt.update("onCellDblClick", b), a.addHook("afterDestroy", function() {
                        v = !0;
                    });
                }
                var o, t, u = this, v = !1;
                o = s(a), this.destroyEditor = function(a) {
                    this.closeEditor(a);
                }, this.getActiveEditor = function() {
                    return t;
                }, this.prepareEditor = function() {
                    var c, d, e, f, g, h, i;
                    return t && t.isWaiting() ? void this.closeEditor(!1, !1, function(a) {
                        a && u.prepareEditor();
                    }) : (c = b.selRange.highlight.row, d = b.selRange.highlight.col, e = a.colToProp(d), 
                    f = a.getCell(c, d), g = a.getDataAtCell(c, d), h = a.getCellMeta(c, d), i = a.getCellEditor(h), 
                    void (i ? (t = Handsontable.editors.getEditor(i, a), t.prepare(c, d, e, f, g, h)) : t = void 0));
                }, this.isEditorOpened = function() {
                    return t && t.isOpened();
                }, this.openEditor = function(a, b) {
                    t && !t.cellProperties.readOnly ? t.beginEditing(a, b) : t && t.cellProperties.readOnly && b && b.keyCode === l.ENTER && d();
                }, this.closeEditor = function(a, b, c) {
                    t ? t.finishEditing(a, b, c) : c && c(!1);
                }, this.closeEditorAndSaveChanges = function(a) {
                    return this.closeEditor(!1, a);
                }, this.closeEditorAndRestoreOriginalValue = function(a) {
                    return this.closeEditor(!0, a);
                }, k();
            }
            Object.defineProperties(c, {
                EditorManager: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i, j = (e = a("3rdparty/walkontable/src/cell/coords"), e && e.__esModule && e || {
                "default": e
            }).WalkontableCellCoords, k = (f = a("helpers/unicode"), f && f.__esModule && f || {
                "default": f
            }), l = k.KEY_CODES, m = k.isMetaKey, n = k.isCtrlKey, o = (g = a("helpers/dom/event"), 
            g && g.__esModule && g || {
                "default": g
            }), p = o.stopPropagation, q = o.stopImmediatePropagation, r = o.isImmediatePropagationStopped, s = ((h = a("editors"), 
            h && h.__esModule && h || {
                "default": h
            }).getEditor, (i = a("eventManager"), i && i.__esModule && i || {
                "default": i
            }).eventManager);
            Handsontable.EditorManager = d;
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            editors: 28,
            eventManager: 40,
            "helpers/dom/event": 45,
            "helpers/unicode": 52
        } ],
        28: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b, c;
                c = {}, b = a, this.getConstructor = function() {
                    return a;
                }, this.getInstance = function(a) {
                    return a.guid in c || (c[a.guid] = new b(a)), c[a.guid];
                };
            }
            function e(a, b) {
                var c = new d(b);
                "string" == typeof a && (k[a] = c, Handsontable.editors[j(a) + "Editor"] = b), l.set(b, c);
            }
            function f(a, b) {
                var c;
                if ("function" == typeof a) l.get(a) || e(null, a), c = l.get(a); else {
                    if ("string" != typeof a) throw Error('Only strings and functions can be passed as "editor" parameter ');
                    c = k[a];
                }
                if (!c) throw Error('No editor registered under name "' + a + '"');
                return c.getInstance(b);
            }
            function g(a) {
                var b;
                if ("string" != typeof a) throw Error('Only strings and functions can be passed as "editor" parameter ');
                if (b = k[a], !b) throw Error('No editor registered under name "' + a + '"');
                return b.getConstructor();
            }
            function h(a) {
                return !!k[a];
            }
            Object.defineProperties(c, {
                registerEditor: {
                    get: function() {
                        return e;
                    }
                },
                getEditor: {
                    get: function() {
                        return f;
                    }
                },
                hasEditor: {
                    get: function() {
                        return h;
                    }
                },
                getEditorConstructor: {
                    get: function() {
                        return g;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var i, j = (i = a("helpers/string"), i && i.__esModule && i || {
                "default": i
            }).toUpperCaseFirst, k = {}, l = new WeakMap();
            Handsontable.editors = Handsontable.editors || {}, Handsontable.editors.registerEditor = e, 
            Handsontable.editors.getEditor = f;
        }, {
            "helpers/string": 51
        } ],
        29: [ function(a, b, c) {
            "use strict";
            function d(a) {
                this.instance = a, this.state = Handsontable.EditorState.VIRGIN, this._opened = !1, 
                this._fullEditMode = !1, this._closeCallback = null, this.init();
            }
            Object.defineProperties(c, {
                BaseEditor: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("helpers/mixed"), e && e.__esModule && e || {
                "default": e
            }).stringify, h = (f = a("3rdparty/walkontable/src/cell/coords"), f && f.__esModule && f || {
                "default": f
            }).WalkontableCellCoords;
            Handsontable.editors = Handsontable.editors || {}, Handsontable.editors.BaseEditor = d, 
            Handsontable.EditorState = {
                VIRGIN: "STATE_VIRGIN",
                EDITING: "STATE_EDITING",
                WAITING: "STATE_WAITING",
                FINISHED: "STATE_FINISHED"
            }, d.prototype._fireCallbacks = function(a) {
                this._closeCallback && (this._closeCallback(a), this._closeCallback = null);
            }, d.prototype.init = function() {}, d.prototype.getValue = function() {
                throw Error("Editor getValue() method unimplemented");
            }, d.prototype.setValue = function(a) {
                throw Error("Editor setValue() method unimplemented");
            }, d.prototype.open = function() {
                throw Error("Editor open() method unimplemented");
            }, d.prototype.close = function() {
                throw Error("Editor close() method unimplemented");
            }, d.prototype.prepare = function(a, b, c, d, e, f) {
                this.TD = d, this.row = a, this.col = b, this.prop = c, this.originalValue = e, 
                this.cellProperties = f, this.state = Handsontable.EditorState.VIRGIN;
            }, d.prototype.extend = function() {
                function a() {
                    c.apply(this, arguments);
                }
                function b(a, b) {
                    function c() {}
                    return c.prototype = b.prototype, a.prototype = new c(), a.prototype.constructor = a, 
                    a;
                }
                var c = this.constructor;
                return b(a, c);
            }, d.prototype.saveValue = function(a, b) {
                var c, d;
                b ? (c = this.instance.getSelected(), c[0] > c[2] && (d = c[0], c[0] = c[2], c[2] = d), 
                c[1] > c[3] && (d = c[1], c[1] = c[3], c[3] = d), this.instance.populateFromArray(c[0], c[1], a, c[2], c[3], "edit")) : this.instance.populateFromArray(this.row, this.col, a, null, null, "edit");
            }, d.prototype.beginEditing = function(a, b) {
                this.state == Handsontable.EditorState.VIRGIN && (this.instance.view.scrollViewport(new h(this.row, this.col)), 
                this.instance.view.render(), this.state = Handsontable.EditorState.EDITING, a = "string" == typeof a ? a : this.originalValue, 
                this.setValue(g(a)), this.open(b), this._opened = !0, this.focus(), this.instance.view.render());
            }, d.prototype.finishEditing = function(a, b, c) {
                var d, e = this;
                if (c) {
                    var f = this._closeCallback;
                    this._closeCallback = function(a) {
                        f && f(a), c(a);
                    };
                }
                if (!this.isWaiting()) {
                    if (this.state == Handsontable.EditorState.VIRGIN) return void this.instance._registerTimeout(setTimeout(function() {
                        e._fireCallbacks(!0);
                    }, 0));
                    if (this.state == Handsontable.EditorState.EDITING) {
                        if (a) return this.cancelChanges(), void this.instance.view.render();
                        d = this.instance.getSettings().trimWhitespace ? [ [ "string" == typeof this.getValue() ? String.prototype.trim.call(this.getValue() || "") : this.getValue() ] ] : [ [ this.getValue() ] ], 
                        this.state = Handsontable.EditorState.WAITING, this.saveValue(d, b), this.instance.getCellValidator(this.cellProperties) ? this.instance.addHookOnce("postAfterValidate", function(a) {
                            e.state = Handsontable.EditorState.FINISHED, e.discardEditor(a);
                        }) : (this.state = Handsontable.EditorState.FINISHED, this.discardEditor(!0));
                    }
                }
            }, d.prototype.cancelChanges = function() {
                this.state = Handsontable.EditorState.FINISHED, this.discardEditor();
            }, d.prototype.discardEditor = function(a) {
                this.state === Handsontable.EditorState.FINISHED && (a === !1 && this.cellProperties.allowInvalid !== !0 ? (this.instance.selectCell(this.row, this.col), 
                this.focus(), this.state = Handsontable.EditorState.EDITING, this._fireCallbacks(!1)) : (this.close(), 
                this._opened = !1, this._fullEditMode = !1, this.state = Handsontable.EditorState.VIRGIN, 
                this._fireCallbacks(!0)));
            }, d.prototype.enableFullEditMode = function() {
                this._fullEditMode = !0;
            }, d.prototype.isInFullEditMode = function() {
                return this._fullEditMode;
            }, d.prototype.isOpened = function() {
                return this._opened;
            }, d.prototype.isWaiting = function() {
                return this.state === Handsontable.EditorState.WAITING;
            }, d.prototype.checkEditorSection = function() {
                var a = this.instance.countRows(), b = "";
                return this.row < this.instance.getSettings().fixedRowsTop ? b = this.col < this.instance.getSettings().fixedColumnsLeft ? "top-left-corner" : "top" : this.instance.getSettings().fixedRowsBottom && this.row >= a - this.instance.getSettings().fixedRowsBottom ? b = this.col < this.instance.getSettings().fixedColumnsLeft ? "bottom-left-corner" : "bottom" : this.col < this.instance.getSettings().fixedColumnsLeft && (b = "left"), 
                b;
            };
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            "helpers/mixed": 47
        } ],
        30: [ function(a, b, c) {
            "use strict";
            function d(a) {
                A = !1;
                var b = this.getActiveEditor();
                if (m(a.keyCode) || a.keyCode === l.BACKSPACE || a.keyCode === l.DELETE || a.keyCode === l.INSERT) {
                    var c = 0;
                    if (a.keyCode === l.C && (a.ctrlKey || a.metaKey)) return;
                    b.isOpened() || (c += 10), b.htEditor && b.instance._registerTimeout(setTimeout(function() {
                        b.queryChoices(b.TEXTAREA.value), A = !0;
                    }, c));
                }
            }
            Object.defineProperties(c, {
                AutocompleteEditor: {
                    get: function() {
                        return z;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i, j, k = (e = a("helpers/unicode"), e && e.__esModule && e || {
                "default": e
            }), l = k.KEY_CODES, m = k.isPrintableChar, n = (f = a("helpers/mixed"), f && f.__esModule && f || {
                "default": f
            }).stringify, o = (g = a("helpers/array"), g && g.__esModule && g || {
                "default": g
            }).pivot, p = (h = a("helpers/dom/element"), h && h.__esModule && h || {
                "default": h
            }), q = p.addClass, r = p.getCaretPosition, s = p.getScrollbarWidth, t = p.getSelectionEndPosition, u = p.outerWidth, v = p.setCaretPosition, w = (i = a("editors"), 
            i && i.__esModule && i || {
                "default": i
            }), x = (w.getEditorConstructor, w.registerEditor), y = (j = a("handsontableEditor"), 
            j && j.__esModule && j || {
                "default": j
            }).HandsontableEditor, z = y.prototype.extend();
            z.prototype.init = function() {
                y.prototype.init.apply(this, arguments), this.query = null, this.choices = [];
            }, z.prototype.createElements = function() {
                y.prototype.createElements.apply(this, arguments), q(this.htContainer, "autocompleteEditor"), 
                q(this.htContainer, -1 === window.navigator.platform.indexOf("Mac") ? "" : "htMacScroll");
            };
            var A = !1;
            z.prototype.prepare = function() {
                this.instance.addHook("beforeKeyDown", d), y.prototype.prepare.apply(this, arguments);
            }, z.prototype.open = function() {
                this.TEXTAREA_PARENT.style.overflow = "auto", y.prototype.open.apply(this, arguments), 
                this.TEXTAREA_PARENT.style.overflow = "";
                var a = this.htEditor.getInstance(), b = this, c = void 0 === this.cellProperties.trimDropdown ? !0 : this.cellProperties.trimDropdown;
                this.TEXTAREA.style.visibility = "visible", this.focus(), a.updateSettings({
                    colWidths: c ? [ u(this.TEXTAREA) - 2 ] : void 0,
                    width: c ? u(this.TEXTAREA) + s() + 2 : void 0,
                    afterRenderer: function(a, c, d, e, f) {
                        var g, h, i = this.getCellMeta(c, d).filteringCaseSensitive === !0, f = n(f);
                        f && (g = i ? f.indexOf(this.query) : f.toLowerCase().indexOf(b.query.toLowerCase()), 
                        -1 != g && (h = f.substr(g, b.query.length), a.innerHTML = f.replace(h, "<strong>" + h + "</strong>")));
                    },
                    autoColumnSize: !0,
                    modifyColWidth: function(a, b) {
                        var d = this.getPlugin("autoColumnSize").widths;
                        return d[b] && (a = d[b]), c ? a : a + 15;
                    }
                }), this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"] = s() + 2 + "px", 
                A && (A = !1), b.instance._registerTimeout(setTimeout(function() {
                    b.queryChoices(b.TEXTAREA.value);
                }, 0));
            }, z.prototype.close = function() {
                y.prototype.close.apply(this, arguments);
            }, z.prototype.queryChoices = function(a) {
                if (this.query = a, "function" == typeof this.cellProperties.source) {
                    var b = this;
                    this.cellProperties.source(a, function(a) {
                        b.updateChoicesList(a);
                    });
                } else if (Array.isArray(this.cellProperties.source)) {
                    var c;
                    if (a && this.cellProperties.filter !== !1) {
                        var d = this.cellProperties.filteringCaseSensitive === !0, e = a.toLowerCase();
                        c = this.cellProperties.source.filter(function(b) {
                            return d ? -1 != b.indexOf(a) : -1 != b.toLowerCase().indexOf(e);
                        });
                    } else c = this.cellProperties.source;
                    this.updateChoicesList(c);
                } else this.updateChoicesList([]);
            }, z.prototype.updateChoicesList = function(a) {
                var b, c = r(this.TEXTAREA), d = t(this.TEXTAREA), e = z.sortByRelevance(this.getValue(), a, this.cellProperties.filteringCaseSensitive);
                if (0 == this.cellProperties.filter) b = e[0]; else {
                    for (var f = [], g = 0, h = e.length; h > g; g++) f.push(a[e[g]]);
                    b = 0, a = f;
                }
                this.choices = a, this.htEditor.loadData(o([ a ])), this.updateDropdownHeight(), 
                this.cellProperties.strict === !0 && this.highlightBestMatchingChoice(b), this.instance.listen(), 
                this.TEXTAREA.focus(), v(this.TEXTAREA, c, c == d ? void 0 : d);
            }, z.prototype.updateDropdownHeight = function() {
                var a = this.htEditor.getColWidth(0) + s() + 2, b = void 0 === this.cellProperties.trimDropdown ? !0 : this.cellProperties.trimDropdown;
                this.htEditor.updateSettings({
                    height: this.getDropdownHeight(),
                    width: b ? void 0 : a
                }), this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer();
            }, z.prototype.finishEditing = function(a) {
                a || this.instance.removeHook("beforeKeyDown", d), y.prototype.finishEditing.apply(this, arguments);
            }, z.prototype.highlightBestMatchingChoice = function(a) {
                "number" == typeof a ? this.htEditor.selectCell(a, 0) : this.htEditor.deselectCell();
            }, z.sortByRelevance = function(a, b, c) {
                var d, e, f, g, h, i = [], j = a.length, k = [];
                if (0 === j) {
                    for (g = 0, h = b.length; h > g; g++) k.push(g);
                    return k;
                }
                for (g = 0, h = b.length; h > g; g++) d = n(b[g]), e = c ? d.indexOf(a) : d.toLowerCase().indexOf(a.toLowerCase()), 
                -1 != e && (f = d.length - e - j, i.push({
                    baseIndex: g,
                    index: e,
                    charsLeft: f,
                    value: d
                }));
                for (i.sort(function(a, b) {
                    return -1 === b.index ? -1 : -1 === a.index ? 1 : a.index < b.index ? -1 : b.index < a.index ? 1 : a.index === b.index ? a.charsLeft < b.charsLeft ? -1 : a.charsLeft > b.charsLeft ? 1 : 0 : void 0;
                }), g = 0, h = i.length; h > g; g++) k.push(i[g].baseIndex);
                return k;
            }, z.prototype.getDropdownHeight = function() {
                var a = this.htEditor.getInstance().getRowHeight(0) || 23, b = this.cellProperties.visibleRows;
                return this.choices.length >= b ? b * a : this.choices.length * a + 8;
            }, z.prototype.allowKeyEventPropagation = function(a) {
                var b = {
                    row: this.htEditor.getSelectedRange() ? this.htEditor.getSelectedRange().from.row : -1
                }, c = !1;
                return a === l.ARROW_DOWN && b.row < this.htEditor.countRows() - 1 && (c = !0), 
                a === l.ARROW_UP && b.row > -1 && (c = !0), c;
            }, x("autocomplete", z);
        }, {
            editors: 28,
            handsontableEditor: 34,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/mixed": 47,
            "helpers/unicode": 52
        } ],
        31: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                CheckboxEditor: {
                    get: function() {
                        return j;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("editors"), d && d.__esModule && d || {
                "default": d
            }).registerEditor, h = (e = a("_baseEditor"), e && e.__esModule && e || {
                "default": e
            }).BaseEditor, i = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }).hasClass, j = function() {
                $traceurRuntime.superConstructor(k).apply(this, arguments);
            }, k = j;
            $traceurRuntime.createClass(j, {
                beginEditing: function() {
                    var a = this.TD.querySelector('input[type="checkbox"]');
                    i(a, "htBadValue") || a.click();
                },
                finishEditing: function() {},
                init: function() {},
                open: function() {},
                close: function() {},
                getValue: function() {},
                setValue: function() {},
                focus: function() {}
            }, {}, h), g("checkbox", j);
        }, {
            _baseEditor: 29,
            editors: 28,
            "helpers/dom/element": 44
        } ],
        32: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                DateEditor: {
                    get: function() {
                        return y;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), n = m.addClass, o = m.outerHeight, p = (e = a("helpers/object"), e && e.__esModule && e || {
                "default": e
            }).deepExtend, q = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).EventManager, r = (g = a("editors"), g && g.__esModule && g || {
                "default": g
            }), s = (r.getEditor, r.registerEditor), t = (h = a("helpers/unicode"), h && h.__esModule && h || {
                "default": h
            }).isMetaKey, u = (i = a("helpers/dom/event"), i && i.__esModule && i || {
                "default": i
            }).stopPropagation, v = (j = a("textEditor"), j && j.__esModule && j || {
                "default": j
            }).TextEditor, w = (k = a("moment"), k && k.__esModule && k || {
                "default": k
            })["default"], x = (l = a("pikaday"), l && l.__esModule && l || {
                "default": l
            })["default"];
            Handsontable.editors = Handsontable.editors || {}, Handsontable.editors.DateEditor = y;
            var y = function(a) {
                this.$datePicker = null, this.datePicker = null, this.datePickerStyle = null, this.defaultDateFormat = "DD/MM/YYYY", 
                this.isCellEdited = !1, this.parentDestroyed = !1, $traceurRuntime.superConstructor(z).call(this, a);
            }, z = y;
            $traceurRuntime.createClass(y, {
                init: function() {
                    var a = this;
                    if ("function" != typeof w) throw new Error("You need to include moment.js to your project.");
                    if ("function" != typeof x) throw new Error("You need to include Pikaday to your project.");
                    $traceurRuntime.superGet(this, z.prototype, "init").call(this), this.instance.addHook("afterDestroy", function() {
                        a.parentDestroyed = !0, a.destroyElements();
                    });
                },
                createElements: function() {
                    $traceurRuntime.superGet(this, z.prototype, "createElements").call(this), this.datePicker = document.createElement("DIV"), 
                    this.datePickerStyle = this.datePicker.style, this.datePickerStyle.position = "absolute", 
                    this.datePickerStyle.top = 0, this.datePickerStyle.left = 0, this.datePickerStyle.zIndex = 9999, 
                    n(this.datePicker, "htDatepickerHolder"), document.body.appendChild(this.datePicker), 
                    this.$datePicker = new x(this.getDatePickerConfig());
                    var a = new q(this);
                    a.addEventListener(this.datePicker, "mousedown", function(a) {
                        return u(a);
                    }), this.hideDatepicker();
                },
                destroyElements: function() {
                    this.$datePicker.destroy();
                },
                prepare: function(a, b, c, d, e, f) {
                    this._opened = !1, $traceurRuntime.superGet(this, z.prototype, "prepare").call(this, a, b, c, d, e, f);
                },
                open: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    $traceurRuntime.superGet(this, z.prototype, "open").call(this), this.showDatepicker(a);
                },
                close: function() {
                    var a = this;
                    this._opened = !1, this.instance._registerTimeout(setTimeout(function() {
                        a.instance.selection.refreshBorders();
                    }, 0)), $traceurRuntime.superGet(this, z.prototype, "close").call(this);
                },
                finishEditing: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1, b = void 0 !== arguments[1] ? arguments[1] : !1;
                    if (a) {
                        var c = this.originalValue;
                        void 0 !== c && this.setValue(c);
                    }
                    this.hideDatepicker(), $traceurRuntime.superGet(this, z.prototype, "finishEditing").call(this, a, b);
                },
                showDatepicker: function(a) {
                    this.$datePicker.config(this.getDatePickerConfig());
                    var b, c = this.TD.getBoundingClientRect(), d = this.cellProperties.dateFormat || this.defaultDateFormat, e = this.$datePicker.config(), f = this.instance.view.isMouseDown(), g = a ? t(a.keyCode) : !1;
                    this.datePickerStyle.top = window.pageYOffset + c.top + o(this.TD) + "px", this.datePickerStyle.left = window.pageXOffset + c.left + "px", 
                    this.$datePicker._onInputFocus = function() {}, e.format = d, this.originalValue ? (b = this.originalValue, 
                    w(b, d, !0).isValid() && this.$datePicker.setMoment(w(b, d), !0), g || f || this.setValue("")) : this.cellProperties.defaultDate ? (b = this.cellProperties.defaultDate, 
                    e.defaultDate = b, w(b, d, !0).isValid() && this.$datePicker.setMoment(w(b, d), !0), 
                    g || f || this.setValue("")) : this.$datePicker.gotoToday(), this.datePickerStyle.display = "block", 
                    this.$datePicker.show();
                },
                hideDatepicker: function() {
                    this.datePickerStyle.display = "none", this.$datePicker.hide();
                },
                getDatePickerConfig: function() {
                    var a = this, b = this.TEXTAREA, c = {};
                    this.cellProperties && this.cellProperties.datePickerConfig && p(c, this.cellProperties.datePickerConfig);
                    var d = c.onSelect, e = c.onClose;
                    return c.field = b, c.trigger = b, c.container = this.datePicker, c.bound = !1, 
                    c.format = c.format || this.defaultDateFormat, c.reposition = c.reposition || !1, 
                    c.onSelect = function(b) {
                        isNaN(b.getTime()) || (b = w(b).format(a.cellProperties.dateFormat || a.defaultDateFormat)), 
                        a.setValue(b), a.hideDatepicker(), d && d();
                    }, c.onClose = function() {
                        a.parentDestroyed || a.finishEditing(!1), e && e();
                    }, c;
                }
            }, {}, v), s("date", y);
        }, {
            editors: 28,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/object": 49,
            "helpers/unicode": 52,
            moment: "moment",
            pikaday: "pikaday",
            textEditor: 39
        } ],
        33: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                DropdownEditor: {
                    get: function() {
                        return i;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("editors"), d && d.__esModule && d || {
                "default": d
            }), g = (f.getEditor, f.registerEditor), h = (e = a("autocompleteEditor"), e && e.__esModule && e || {
                "default": e
            }).AutocompleteEditor, i = function() {
                $traceurRuntime.superConstructor(j).apply(this, arguments);
            }, j = i;
            $traceurRuntime.createClass(i, {
                prepare: function(a, b, c, d, e, f) {
                    $traceurRuntime.superGet(this, j.prototype, "prepare").call(this, a, b, c, d, e, f), 
                    this.cellProperties.filter = !1, this.cellProperties.strict = !0;
                }
            }, {}, h), Handsontable.hooks.add("beforeValidate", function(a, b, c, d) {
                var e = this.getCellMeta(b, c);
                e.editor === Handsontable.editors.DropdownEditor && void 0 === e.strict && (e.filter = !1, 
                e.strict = !0);
            }), g("dropdown", i);
        }, {
            autocompleteEditor: 30,
            editors: 28
        } ],
        34: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                HandsontableEditor: {
                    get: function() {
                        return s;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j = (d = a("helpers/unicode"), d && d.__esModule && d || {
                "default": d
            }).KEY_CODES, k = (e = a("helpers/object"), e && e.__esModule && e || {
                "default": e
            }).extend, l = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }).setCaretPosition, m = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), n = m.stopImmediatePropagation, o = m.isImmediatePropagationStopped, p = (h = a("editors"), 
            h && h.__esModule && h || {
                "default": h
            }), q = (p.getEditor, p.registerEditor), r = (i = a("textEditor"), i && i.__esModule && i || {
                "default": i
            }).TextEditor, s = r.prototype.extend();
            s.prototype.createElements = function() {
                r.prototype.createElements.apply(this, arguments);
                var a = document.createElement("DIV");
                a.className = "handsontableEditor", this.TEXTAREA_PARENT.appendChild(a), this.htContainer = a, 
                this.assignHooks();
            }, s.prototype.prepare = function(a, b, c, d, e, f) {
                r.prototype.prepare.apply(this, arguments);
                var g = this, h = {
                    startRows: 0,
                    startCols: 0,
                    minRows: 0,
                    minCols: 0,
                    className: "listbox",
                    copyPaste: !1,
                    autoColumnSize: !1,
                    autoRowSize: !1,
                    readOnly: !0,
                    fillHandle: !1,
                    afterOnCellMouseDown: function() {
                        var a = this.getValue();
                        void 0 !== a && g.setValue(a), g.instance.destroyEditor();
                    }
                };
                this.cellProperties.handsontable && k(h, f.handsontable), this.htOptions = h;
            };
            var t = function(a) {
                if (!o(a)) {
                    var b, c = this.getActiveEditor(), d = c.htEditor.getInstance();
                    if (a.keyCode == j.ARROW_DOWN) if (d.getSelected()) {
                        var e = d.getSelected()[0], f = d.countRows() - 1;
                        b = Math.min(f, e + 1);
                    } else b = 0; else if (a.keyCode == j.ARROW_UP && d.getSelected()) {
                        var e = d.getSelected()[0];
                        b = e - 1;
                    }
                    void 0 !== b && (0 > b ? d.deselectCell() : d.selectCell(b, 0), d.getData().length && (a.preventDefault(), 
                    n(a), c.instance.listen(), c.TEXTAREA.focus()));
                }
            };
            s.prototype.open = function() {
                this.instance.addHook("beforeKeyDown", t), r.prototype.open.apply(this, arguments), 
                this.htEditor && this.htEditor.destroy(), this.htEditor = new Handsontable(this.htContainer, this.htOptions), 
                this.cellProperties.strict ? (this.htEditor.selectCell(0, 0), this.TEXTAREA.style.visibility = "hidden") : (this.htEditor.deselectCell(), 
                this.TEXTAREA.style.visibility = "visible"), l(this.TEXTAREA, 0, this.TEXTAREA.value.length);
            }, s.prototype.close = function() {
                this.instance.removeHook("beforeKeyDown", t), this.instance.listen(), r.prototype.close.apply(this, arguments);
            }, s.prototype.focus = function() {
                this.instance.listen(), r.prototype.focus.apply(this, arguments);
            }, s.prototype.beginEditing = function(a) {
                var b = this.instance.getSettings().onBeginEditing;
                b && b() === !1 || r.prototype.beginEditing.apply(this, arguments);
            }, s.prototype.finishEditing = function(a, b) {
                if (this.htEditor && this.htEditor.isListening() && this.instance.listen(), this.htEditor && this.htEditor.getSelected()) {
                    var c = this.htEditor.getInstance().getValue();
                    void 0 !== c && this.setValue(c);
                }
                return r.prototype.finishEditing.apply(this, arguments);
            }, s.prototype.assignHooks = function() {
                var a = this;
                this.instance.addHook("afterDestroy", function() {
                    a.htEditor && a.htEditor.destroy();
                });
            }, q("handsontable", s);
        }, {
            editors: 28,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/object": 49,
            "helpers/unicode": 52,
            textEditor: 39
        } ],
        35: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                MobileTextEditor: {
                    get: function() {
                        return C;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j = (d = a("helpers/unicode"), d && d.__esModule && d || {
                "default": d
            }).KEY_CODES, k = (e = a("helpers/dom/event"), e && e.__esModule && e || {
                "default": e
            }), l = k.stopImmediatePropagation, m = k.isImmediatePropagationStopped, n = (f = a("helpers/dom/element"), 
            f && f.__esModule && f || {
                "default": f
            }), o = n.addClass, p = n.getScrollLeft, q = n.getScrollTop, r = n.hasClass, s = n.isChildOf, t = n.offset, u = n.outerHeight, v = n.outerWidth, w = n.removeClass, x = n.setCaretPosition, y = (g = a("editors"), 
            g && g.__esModule && g || {
                "default": g
            }), z = (y.getEditor, y.registerEditor), A = (h = a("_baseEditor"), h && h.__esModule && h || {
                "default": h
            }).BaseEditor, B = (i = a("eventManager"), i && i.__esModule && i || {
                "default": i
            }).eventManager, C = A.prototype.extend(), D = {}, E = function() {
                this.controls = {}, this.controls.leftButton = document.createElement("DIV"), this.controls.leftButton.className = "leftButton", 
                this.controls.rightButton = document.createElement("DIV"), this.controls.rightButton.className = "rightButton", 
                this.controls.upButton = document.createElement("DIV"), this.controls.upButton.className = "upButton", 
                this.controls.downButton = document.createElement("DIV"), this.controls.downButton.className = "downButton";
                for (var a in this.controls) this.controls.hasOwnProperty(a) && this.positionControls.appendChild(this.controls[a]);
            };
            C.prototype.valueChanged = function() {
                return this.initValue != this.getValue();
            }, C.prototype.init = function() {
                var a = this;
                this.eventManager = B(this.instance), this.createElements(), this.bindEvents(), 
                this.instance.addHook("afterDestroy", function() {
                    a.destroy();
                });
            }, C.prototype.getValue = function() {
                return this.TEXTAREA.value;
            }, C.prototype.setValue = function(a) {
                this.initValue = a, this.TEXTAREA.value = a;
            }, C.prototype.createElements = function() {
                this.editorContainer = document.createElement("DIV"), this.editorContainer.className = "htMobileEditorContainer", 
                this.cellPointer = document.createElement("DIV"), this.cellPointer.className = "cellPointer", 
                this.moveHandle = document.createElement("DIV"), this.moveHandle.className = "moveHandle", 
                this.inputPane = document.createElement("DIV"), this.inputPane.className = "inputs", 
                this.positionControls = document.createElement("DIV"), this.positionControls.className = "positionControls", 
                this.TEXTAREA = document.createElement("TEXTAREA"), o(this.TEXTAREA, "handsontableInput"), 
                this.inputPane.appendChild(this.TEXTAREA), this.editorContainer.appendChild(this.cellPointer), 
                this.editorContainer.appendChild(this.moveHandle), this.editorContainer.appendChild(this.inputPane), 
                this.editorContainer.appendChild(this.positionControls), E.call(this), document.body.appendChild(this.editorContainer);
            }, C.prototype.onBeforeKeyDown = function(a) {
                var b = this, c = b.getActiveEditor();
                if (a.target === c.TEXTAREA && !m(a)) switch (a.keyCode) {
                  case j.ENTER:
                    c.close(), a.preventDefault();
                    break;

                  case j.BACKSPACE:
                    l(a);
                }
            }, C.prototype.open = function() {
                this.instance.addHook("beforeKeyDown", this.onBeforeKeyDown), o(this.editorContainer, "active"), 
                w(this.cellPointer, "hidden"), this.updateEditorPosition();
            }, C.prototype.focus = function() {
                this.TEXTAREA.focus(), x(this.TEXTAREA, this.TEXTAREA.value.length);
            }, C.prototype.close = function() {
                this.TEXTAREA.blur(), this.instance.removeHook("beforeKeyDown", this.onBeforeKeyDown), 
                w(this.editorContainer, "active");
            }, C.prototype.scrollToView = function() {
                var a = this.instance.getSelectedRange().highlight;
                this.instance.view.scrollViewport(a);
            }, C.prototype.hideCellPointer = function() {
                r(this.cellPointer, "hidden") || o(this.cellPointer, "hidden");
            }, C.prototype.updateEditorPosition = function(a, b) {
                if (a && b) a = parseInt(a, 10), b = parseInt(b, 10), this.editorContainer.style.top = b + "px", 
                this.editorContainer.style.left = a + "px"; else {
                    var c = this.instance.getSelected(), d = this.instance.getCell(c[0], c[1]);
                    if (D.cellPointer || (D.cellPointer = {
                        height: u(this.cellPointer),
                        width: v(this.cellPointer)
                    }), D.editorContainer || (D.editorContainer = {
                        width: v(this.editorContainer)
                    }), void 0 !== d) {
                        var e = this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer == window ? 0 : p(this.instance.view.wt.wtOverlays.leftOverlay.holder), f = this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer == window ? 0 : q(this.instance.view.wt.wtOverlays.topOverlay.holder), g = t(d), h = v(d), i = {
                            x: e,
                            y: f
                        };
                        this.editorContainer.style.top = parseInt(g.top + u(d) - i.y + D.cellPointer.height, 10) + "px", 
                        this.editorContainer.style.left = parseInt(window.innerWidth / 2 - D.editorContainer.width / 2, 10) + "px", 
                        g.left + h / 2 > parseInt(this.editorContainer.style.left, 10) + D.editorContainer.width ? this.editorContainer.style.left = window.innerWidth - D.editorContainer.width + "px" : g.left + h / 2 < parseInt(this.editorContainer.style.left, 10) + 20 && (this.editorContainer.style.left = "0px"), 
                        this.cellPointer.style.left = parseInt(g.left - D.cellPointer.width / 2 - t(this.editorContainer).left + h / 2 - i.x, 10) + "px";
                    }
                }
            }, C.prototype.updateEditorData = function() {
                var a = this.instance.getSelected(), b = this.instance.getDataAtCell(a[0], a[1]);
                this.row = a[0], this.col = a[1], this.setValue(b), this.updateEditorPosition();
            }, C.prototype.prepareAndSave = function() {
                var a;
                return this.valueChanged() ? (a = this.instance.getSettings().trimWhitespace ? [ [ String.prototype.trim.call(this.getValue()) ] ] : [ [ this.getValue() ] ], 
                void this.saveValue(a)) : !0;
            }, C.prototype.bindEvents = function() {
                var a = this;
                this.eventManager.addEventListener(this.controls.leftButton, "touchend", function(b) {
                    a.prepareAndSave(), a.instance.selection.transformStart(0, -1, null, !0), a.updateEditorData(), 
                    b.preventDefault();
                }), this.eventManager.addEventListener(this.controls.rightButton, "touchend", function(b) {
                    a.prepareAndSave(), a.instance.selection.transformStart(0, 1, null, !0), a.updateEditorData(), 
                    b.preventDefault();
                }), this.eventManager.addEventListener(this.controls.upButton, "touchend", function(b) {
                    a.prepareAndSave(), a.instance.selection.transformStart(-1, 0, null, !0), a.updateEditorData(), 
                    b.preventDefault();
                }), this.eventManager.addEventListener(this.controls.downButton, "touchend", function(b) {
                    a.prepareAndSave(), a.instance.selection.transformStart(1, 0, null, !0), a.updateEditorData(), 
                    b.preventDefault();
                }), this.eventManager.addEventListener(this.moveHandle, "touchstart", function(b) {
                    if (1 == b.touches.length) {
                        var c = b.touches[0], d = {
                            x: a.editorContainer.offsetLeft,
                            y: a.editorContainer.offsetTop
                        }, e = {
                            x: c.pageX - d.x,
                            y: c.pageY - d.y
                        };
                        a.eventManager.addEventListener(this, "touchmove", function(b) {
                            var c = b.touches[0];
                            a.updateEditorPosition(c.pageX - e.x, c.pageY - e.y), a.hideCellPointer(), b.preventDefault();
                        });
                    }
                }), this.eventManager.addEventListener(document.body, "touchend", function(b) {
                    s(b.target, a.editorContainer) || s(b.target, a.instance.rootElement) || a.close();
                }), this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder, "scroll", function(b) {
                    a.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer != window && a.hideCellPointer();
                }), this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder, "scroll", function(b) {
                    a.instance.view.wt.wtOverlays.topOverlay.trimmingContainer != window && a.hideCellPointer();
                });
            }, C.prototype.destroy = function() {
                this.eventManager.clear(), this.editorContainer.parentNode.removeChild(this.editorContainer);
            }, z("mobile", C);
        }, {
            _baseEditor: 29,
            editors: 28,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/unicode": 52
        } ],
        36: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                NumericEditor: {
                    get: function() {
                        return k;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("numeral"), d && d.__esModule && d || {
                "default": d
            })["default"], h = (e = a("editors"), e && e.__esModule && e || {
                "default": e
            }), i = (h.getEditor, h.registerEditor), j = (f = a("textEditor"), f && f.__esModule && f || {
                "default": f
            }).TextEditor, k = function() {
                $traceurRuntime.superConstructor(l).apply(this, arguments);
            }, l = k;
            $traceurRuntime.createClass(k, {
                beginEditing: function(a) {
                    if ("undefined" == typeof a && this.originalValue) {
                        "undefined" != typeof this.cellProperties.language && g.language(this.cellProperties.language);
                        var b = g.languageData().delimiters.decimal;
                        a = ("" + this.originalValue).replace(".", b);
                    }
                    $traceurRuntime.superGet(this, l.prototype, "beginEditing").call(this, a);
                }
            }, {}, j), i("numeric", k);
        }, {
            editors: 28,
            numeral: "numeral",
            textEditor: 39
        } ],
        37: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                PasswordEditor: {
                    get: function() {
                        return k;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).empty, h = (e = a("editors"), e && e.__esModule && e || {
                "default": e
            }), i = (h.getEditor, h.registerEditor), j = (f = a("textEditor"), f && f.__esModule && f || {
                "default": f
            }).TextEditor, k = function() {
                $traceurRuntime.superConstructor(l).apply(this, arguments);
            }, l = k;
            $traceurRuntime.createClass(k, {
                createElements: function() {
                    $traceurRuntime.superGet(this, l.prototype, "createElements").call(this), this.TEXTAREA = document.createElement("input"), 
                    this.TEXTAREA.setAttribute("type", "password"), this.TEXTAREA.className = "handsontableInput", 
                    this.textareaStyle = this.TEXTAREA.style, this.textareaStyle.width = 0, this.textareaStyle.height = 0, 
                    g(this.TEXTAREA_PARENT), this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);
                }
            }, {}, j), i("password", k);
        }, {
            editors: 28,
            "helpers/dom/element": 44,
            textEditor: 39
        } ],
        38: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                SelectEditor: {
                    get: function() {
                        return y;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), j = i.addClass, k = i.empty, l = i.fastInnerHTML, m = i.getComputedStyle, n = i.getCssTransform, o = i.getScrollableElement, p = i.offset, q = i.outerHeight, r = i.outerWidth, s = i.resetCssTransform, t = (e = a("helpers/dom/event"), 
            e && e.__esModule && e || {
                "default": e
            }).stopImmediatePropagation, u = (f = a("helpers/unicode"), f && f.__esModule && f || {
                "default": f
            }).KEY_CODES, v = (g = a("editors"), g && g.__esModule && g || {
                "default": g
            }), w = (v.getEditor, v.registerEditor), x = (h = a("_baseEditor"), h && h.__esModule && h || {
                "default": h
            }).BaseEditor, y = x.prototype.extend();
            y.prototype.init = function() {
                this.select = document.createElement("SELECT"), j(this.select, "htSelectEditor"), 
                this.select.style.display = "none", this.instance.rootElement.appendChild(this.select), 
                this.registerHooks();
            }, y.prototype.registerHooks = function() {
                var a = this;
                this.instance.addHook("afterScrollVertically", function() {
                    return a.refreshDimensions();
                }), this.instance.addHook("afterColumnResize", function() {
                    return a.refreshDimensions();
                }), this.instance.addHook("afterRowResize", function() {
                    return a.refreshDimensions();
                });
            }, y.prototype.prepare = function() {
                x.prototype.prepare.apply(this, arguments);
                var a, b = this.cellProperties.selectOptions;
                a = "function" == typeof b ? this.prepareOptions(b(this.row, this.col, this.prop)) : this.prepareOptions(b), 
                k(this.select);
                for (var c in a) if (a.hasOwnProperty(c)) {
                    var d = document.createElement("OPTION");
                    d.value = c, l(d, a[c]), this.select.appendChild(d);
                }
            }, y.prototype.prepareOptions = function(a) {
                var b = {};
                if (Array.isArray(a)) for (var c = 0, d = a.length; d > c; c++) b[a[c]] = a[c]; else "object" == typeof a && (b = a);
                return b;
            }, y.prototype.getValue = function() {
                return this.select.value;
            }, y.prototype.setValue = function(a) {
                this.select.value = a;
            };
            var z = function(a) {
                var b = this, c = b.getActiveEditor();
                switch (a.keyCode) {
                  case u.ARROW_UP:
                    var d = c.select.selectedIndex - 1;
                    d >= 0 && (c.select[d].selected = !0), t(a), a.preventDefault();
                    break;

                  case u.ARROW_DOWN:
                    var e = c.select.selectedIndex + 1;
                    e <= c.select.length - 1 && (c.select[e].selected = !0), t(a), a.preventDefault();
                }
            };
            y.prototype.open = function() {
                this._opened = !0, this.refreshDimensions(), this.select.style.display = "", this.instance.addHook("beforeKeyDown", z);
            }, y.prototype.close = function() {
                this._opened = !1, this.select.style.display = "none", this.instance.removeHook("beforeKeyDown", z);
            }, y.prototype.focus = function() {
                this.select.focus();
            }, y.prototype.refreshDimensions = function() {
                if (this.state === Handsontable.EditorState.EDITING) {
                    if (this.TD = this.getEditedCell(), !this.TD) return void this.close();
                    var a, b = r(this.TD) + 1, c = q(this.TD) + 1, d = p(this.TD), e = p(this.instance.rootElement), f = o(this.TD), g = d.top - e.top - 1 - (f.scrollTop || 0), h = d.left - e.left - 1 - (f.scrollLeft || 0), i = this.checkEditorSection(), j = this.instance.getSettings();
                    j.rowHeaders ? 1 : 0, j.colHeaders ? 1 : 0;
                    switch (i) {
                      case "top":
                        a = n(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "left":
                        a = n(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "top-left-corner":
                        a = n(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "bottom-left-corner":
                        a = n(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "bottom":
                        a = n(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);
                    }
                    0 === this.instance.getSelected()[0] && (g += 1), 0 === this.instance.getSelected()[1] && (h += 1);
                    var k = this.select.style;
                    a && -1 != a ? k[a[0]] = a[1] : s(this.select);
                    var l = m(this.TD);
                    parseInt(l.borderTopWidth, 10) > 0 && (c -= 1), parseInt(l.borderLeftWidth, 10) > 0 && (b -= 1), 
                    k.height = c + "px", k.minWidth = b + "px", k.top = g + "px", k.left = h + "px", 
                    k.margin = "0px";
                }
            }, y.prototype.getEditedCell = function() {
                var a, b = this.checkEditorSection();
                switch (b) {
                  case "top":
                    a = this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.select.style.zIndex = 101;
                    break;

                  case "corner":
                    a = this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.select.style.zIndex = 103;
                    break;

                  case "left":
                    a = this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.select.style.zIndex = 102;
                    break;

                  default:
                    a = this.instance.getCell(this.row, this.col), this.select.style.zIndex = "";
                }
                return -1 != a && -2 != a ? a : void 0;
            }, w("select", y);
        }, {
            _baseEditor: 29,
            editors: 28,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/unicode": 52
        } ],
        39: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                TextEditor: {
                    get: function() {
                        return E;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), l = k.addClass, m = k.getCaretPosition, n = k.getComputedStyle, o = k.getCssTransform, p = k.getScrollableElement, q = k.innerWidth, r = k.offset, s = k.resetCssTransform, t = k.setCaretPosition, u = (e = a("autoResize"), 
            e && e.__esModule && e || {
                "default": e
            })["default"], v = (f = a("_baseEditor"), f && f.__esModule && f || {
                "default": f
            }).BaseEditor, w = (g = a("eventManager"), g && g.__esModule && g || {
                "default": g
            }).eventManager, x = (h = a("editors"), h && h.__esModule && h || {
                "default": h
            }), y = (x.getEditor, x.registerEditor), z = (i = a("helpers/unicode"), i && i.__esModule && i || {
                "default": i
            }).KEY_CODES, A = (j = a("helpers/dom/event"), j && j.__esModule && j || {
                "default": j
            }), B = A.stopPropagation, C = A.stopImmediatePropagation, D = A.isImmediatePropagationStopped, E = v.prototype.extend();
            E.prototype.init = function() {
                var a = this;
                this.createElements(), this.eventManager = w(this), this.bindEvents(), this.autoResize = u(), 
                this.instance.addHook("afterDestroy", function() {
                    a.destroy();
                });
            }, E.prototype.getValue = function() {
                return this.TEXTAREA.value;
            }, E.prototype.setValue = function(a) {
                this.TEXTAREA.value = a;
            };
            var F = function(a) {
                var b, c = this, d = c.getActiveEditor();
                if (b = (a.ctrlKey || a.metaKey) && !a.altKey, a.target === d.TEXTAREA && !D(a)) {
                    if (17 === a.keyCode || 224 === a.keyCode || 91 === a.keyCode || 93 === a.keyCode) return void C(a);
                    switch (a.keyCode) {
                      case z.ARROW_RIGHT:
                        d.isInFullEditMode() && (!d.isWaiting() && !d.allowKeyEventPropagation || !d.isWaiting() && d.allowKeyEventPropagation && !d.allowKeyEventPropagation(a.keyCode)) && C(a);
                        break;

                      case z.ARROW_LEFT:
                        d.isInFullEditMode() && (!d.isWaiting() && !d.allowKeyEventPropagation || !d.isWaiting() && d.allowKeyEventPropagation && !d.allowKeyEventPropagation(a.keyCode)) && C(a);
                        break;

                      case z.ARROW_UP:
                      case z.ARROW_DOWN:
                        d.isInFullEditMode() && (!d.isWaiting() && !d.allowKeyEventPropagation || !d.isWaiting() && d.allowKeyEventPropagation && !d.allowKeyEventPropagation(a.keyCode)) && C(a);
                        break;

                      case z.ENTER:
                        var e = d.instance.getSelected(), f = !(e[0] === e[2] && e[1] === e[3]);
                        if (b && !f || a.altKey) {
                            if (d.isOpened()) {
                                var g = m(d.TEXTAREA), h = d.getValue(), i = h.slice(0, g) + "\n" + h.slice(g);
                                d.setValue(i), t(d.TEXTAREA, g + 1);
                            } else d.beginEditing(d.originalValue + "\n");
                            C(a);
                        }
                        a.preventDefault();
                        break;

                      case z.A:
                      case z.X:
                      case z.C:
                      case z.V:
                        b && C(a);
                        break;

                      case z.BACKSPACE:
                      case z.DELETE:
                      case z.HOME:
                      case z.END:
                        C(a);
                    }
                    -1 === [ z.ARROW_UP, z.ARROW_RIGHT, z.ARROW_DOWN, z.ARROW_LEFT ].indexOf(a.keyCode) && d.autoResize.resize(String.fromCharCode(a.keyCode));
                }
            };
            E.prototype.open = function() {
                this.refreshDimensions(), this.instance.addHook("beforeKeyDown", F);
            }, E.prototype.close = function(a) {
                this.textareaParentStyle.display = "none", this.autoResize.unObserve(), document.activeElement === this.TEXTAREA && this.instance.listen(), 
                this.instance.removeHook("beforeKeyDown", F);
            }, E.prototype.focus = function() {
                this.TEXTAREA.focus(), t(this.TEXTAREA, this.TEXTAREA.value.length);
            }, E.prototype.createElements = function() {
                this.TEXTAREA = document.createElement("TEXTAREA"), l(this.TEXTAREA, "handsontableInput"), 
                this.textareaStyle = this.TEXTAREA.style, this.textareaStyle.width = 0, this.textareaStyle.height = 0, 
                this.TEXTAREA_PARENT = document.createElement("DIV"), l(this.TEXTAREA_PARENT, "handsontableInputHolder"), 
                this.textareaParentStyle = this.TEXTAREA_PARENT.style, this.textareaParentStyle.top = 0, 
                this.textareaParentStyle.left = 0, this.textareaParentStyle.display = "none", this.TEXTAREA_PARENT.appendChild(this.TEXTAREA), 
                this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);
                var a = this;
                this.instance._registerTimeout(setTimeout(function() {
                    a.refreshDimensions();
                }, 0));
            }, E.prototype.getEditedCell = function() {
                var a, b = this.checkEditorSection();
                switch (b) {
                  case "top":
                    a = this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.textareaParentStyle.zIndex = 101;
                    break;

                  case "top-left-corner":
                    a = this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.textareaParentStyle.zIndex = 103;
                    break;

                  case "bottom-left-corner":
                    a = this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.textareaParentStyle.zIndex = 103;
                    break;

                  case "left":
                    a = this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.textareaParentStyle.zIndex = 102;
                    break;

                  case "bottom":
                    a = this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({
                        row: this.row,
                        col: this.col
                    }), this.textareaParentStyle.zIndex = 102;
                    break;

                  default:
                    a = this.instance.getCell(this.row, this.col), this.textareaParentStyle.zIndex = "";
                }
                return -1 != a && -2 != a ? a : void 0;
            }, E.prototype.refreshDimensions = function() {
                if (this.state === Handsontable.EditorState.EDITING) {
                    if (this.TD = this.getEditedCell(), !this.TD) return void this.close(!0);
                    var a, b = r(this.TD), c = r(this.instance.rootElement), d = p(this.TD), e = this.instance.countRows(), f = b.top - c.top - 1 - (d.scrollTop || 0), g = b.left - c.left - 1 - (d.scrollLeft || 0), h = this.instance.getSettings(), i = (h.rowHeaders ? 1 : 0, 
                    h.colHeaders ? 1 : 0), j = this.checkEditorSection(), k = this.TD.style.backgroundColor;
                    switch (j) {
                      case "top":
                        a = o(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "left":
                        a = o(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "top-left-corner":
                        a = o(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "bottom-left-corner":
                        a = o(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);
                        break;

                      case "bottom":
                        a = o(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);
                    }
                    (i && 0 === this.instance.getSelected()[0] || h.fixedRowsBottom && this.instance.getSelected()[0] === e - h.fixedRowsBottom) && (f += 1), 
                    0 === this.instance.getSelected()[1] && (g += 1), a && -1 != a ? this.textareaParentStyle[a[0]] = a[1] : s(this.textareaParentStyle), 
                    this.textareaParentStyle.top = f + "px", this.textareaParentStyle.left = g + "px";
                    var l = this.TD.offsetTop - this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(), m = this.TD.offsetLeft - this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(), t = q(this.TD) - 8, u = this.instance.view.maximumVisibleElementWidth(m) - 9, v = this.TD.scrollHeight + 1, w = Math.max(this.instance.view.maximumVisibleElementHeight(l) - 2, 23), x = n(this.TD);
                    this.TEXTAREA.style.fontSize = x.fontSize, this.TEXTAREA.style.fontFamily = x.fontFamily, 
                    this.TEXTAREA.style.backgroundColor = "", this.TEXTAREA.style.backgroundColor = k ? k : n(this.TEXTAREA).backgroundColor, 
                    this.autoResize.init(this.TEXTAREA, {
                        minHeight: Math.min(v, w),
                        maxHeight: w,
                        minWidth: Math.min(t, u),
                        maxWidth: u
                    }, !0), this.textareaParentStyle.display = "block";
                }
            }, E.prototype.bindEvents = function() {
                var a = this;
                this.eventManager.addEventListener(this.TEXTAREA, "cut", function(a) {
                    B(a);
                }), this.eventManager.addEventListener(this.TEXTAREA, "paste", function(a) {
                    B(a);
                }), this.instance.addHook("afterScrollVertically", function() {
                    a.refreshDimensions();
                }), this.instance.addHook("afterColumnResize", function() {
                    a.refreshDimensions(), a.focus();
                }), this.instance.addHook("afterRowResize", function() {
                    a.refreshDimensions(), a.focus();
                }), this.instance.addHook("afterDestroy", function() {
                    a.eventManager.destroy();
                });
            }, E.prototype.destroy = function() {
                this.eventManager.destroy();
            }, y("text", E);
        }, {
            _baseEditor: 29,
            autoResize: "autoResize",
            editors: 28,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/unicode": 52
        } ],
        40: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                var c, d, e, f, g, h = "HOT-TABLE";
                if (b.isTargetWebComponent = !1, b.realTarget = b.target, !Handsontable.eventManager.isHotTableEnv) return b;
                for (b = i(b), g = b.path ? b.path.length : 0; g--; ) {
                    if (b.path[g].nodeName === h) c = !0; else if (c && b.path[g].shadowRoot) {
                        f = b.path[g];
                        break;
                    }
                    0 !== g || f || (f = b.path[g]);
                }
                return f || (f = b.target), b.isTargetWebComponent = !0, k() ? b.realTarget = b.srcElement || b.toElement : (a instanceof Handsontable.Core || a instanceof Walkontable) && (a instanceof Handsontable.Core ? d = a.view ? a.view.wt.wtTable.TABLE : null : a instanceof Walkontable && (d = a.wtTable.TABLE.parentNode.parentNode), 
                e = j(b.target, [ h ], d), e ? b.realTarget = d.querySelector(h) || b.target : b.realTarget = b.target), 
                Object.defineProperty(b, "target", {
                    get: function() {
                        return i(f);
                    },
                    enumerable: !0,
                    configurable: !0
                }), b;
            }
            function e(a) {
                return new l(a);
            }
            Object.defineProperties(c, {
                EventManager: {
                    get: function() {
                        return l;
                    }
                },
                eventManager: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var f, g, h = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }), i = h.polymerWrap, j = h.closest, k = (g = a("helpers/browser"), g && g.__esModule && g || {
                "default": g
            }).isWebComponentSupportedNatively, l = function() {
                var a = void 0 !== arguments[0] ? arguments[0] : null;
                this.context = a || this, this.context.eventListeners || (this.context.eventListeners = []);
            };
            $traceurRuntime.createClass(l, {
                addEventListener: function(a, b, c) {
                    function e(a) {
                        void 0 == a.target && void 0 != a.srcElement && (a.definePoperty ? a.definePoperty("target", {
                            value: a.srcElement
                        }) : a.target = a.srcElement), void 0 == a.preventDefault && (a.definePoperty ? a.definePoperty("preventDefault", {
                            value: function() {
                                this.returnValue = !1;
                            }
                        }) : a.preventDefault = function() {
                            this.returnValue = !1;
                        }), a = d(g, a), c.call(this, a);
                    }
                    var f = this, g = this.context;
                    return this.context.eventListeners.push({
                        element: a,
                        event: b,
                        callback: c,
                        callbackProxy: e
                    }), window.addEventListener ? a.addEventListener(b, e, !1) : a.attachEvent("on" + b, e), 
                    Handsontable.countEventManagerListeners++, function() {
                        f.removeEventListener(a, b, c);
                    };
                },
                removeEventListener: function(a, b, c) {
                    for (var d, e = this.context.eventListeners.length; e--; ) if (d = this.context.eventListeners[e], 
                    d.event == b && d.element == a) {
                        if (c && c != d.callback) continue;
                        this.context.eventListeners.splice(e, 1), d.element.removeEventListener ? d.element.removeEventListener(d.event, d.callbackProxy, !1) : d.element.detachEvent("on" + d.event, d.callbackProxy), 
                        Handsontable.countEventManagerListeners--;
                    }
                },
                clearEvents: function() {
                    if (this.context) for (var a = this.context.eventListeners.length; a--; ) {
                        var b = this.context.eventListeners[a];
                        b && this.removeEventListener(b.element, b.event, b.callback);
                    }
                },
                clear: function() {
                    this.clearEvents();
                },
                destroy: function() {
                    this.clearEvents(), this.context = null;
                },
                fireEvent: function(a, b) {
                    var c, d = {
                        bubbles: !0,
                        cancelable: "mousemove" !== b,
                        view: window,
                        detail: 0,
                        screenX: 0,
                        screenY: 0,
                        clientX: 1,
                        clientY: 1,
                        ctrlKey: !1,
                        altKey: !1,
                        shiftKey: !1,
                        metaKey: !1,
                        button: 0,
                        relatedTarget: void 0
                    };
                    document.createEvent ? (c = document.createEvent("MouseEvents"), c.initMouseEvent(b, d.bubbles, d.cancelable, d.view, d.detail, d.screenX, d.screenY, d.clientX, d.clientY, d.ctrlKey, d.altKey, d.shiftKey, d.metaKey, d.button, d.relatedTarget || document.body.parentNode)) : c = document.createEventObject(), 
                    a.dispatchEvent ? a.dispatchEvent(c) : a.fireEvent("on" + b, c);
                }
            }, {}), window.Handsontable = window.Handsontable || {}, Handsontable.countEventManagerListeners = 0, 
            Handsontable.eventManager = e;
        }, {
            "helpers/browser": 42,
            "helpers/dom/element": 44
        } ],
        41: [ function(a, b, c) {
            "use strict";
            function d(a) {
                for (var b = 0, c = a.length; c > b; ) a[b] = [ a[b] ], b++;
            }
            function e(a, b) {
                for (var c = 0, d = b.length; d > c; ) a.push(b[c]), c++;
            }
            function f(a) {
                var b = [];
                if (!a || 0 === a.length || !a[0] || 0 === a[0].length) return b;
                for (var c = a.length, d = a[0].length, e = 0; c > e; e++) for (var f = 0; d > f; f++) b[f] || (b[f] = []), 
                b[f][e] = a[e][f];
                return b;
            }
            function g(a, b, c, d) {
                var e = -1, f = a.length;
                for (d && f && (c = a[++e]); ++e < f; ) c = b(c, a[e], e, a);
                return c;
            }
            function h(a, b) {
                for (var c = -1, d = a.length, e = -1, f = []; ++c < d; ) {
                    var g = a[c];
                    b(g, c, a) && (f[++e] = g);
                }
                return f;
            }
            function i(a, b) {
                for (var c = -1, d = a.length, e = -1, f = []; ++c < d; ) {
                    var g = a[c];
                    f[++e] = b(g, c, a);
                }
                return f;
            }
            function j(a, b) {
                for (var c = -1, d = a.length; ++c < d && b(a[c], c, a) !== !1; ) ;
                return a;
            }
            function k(a) {
                return g(a, function(a, b) {
                    return a + b;
                }, 0);
            }
            function l(a) {
                return a.length ? k(a) / a.length : 0;
            }
            function m(a) {
                return g(a, function(a, b) {
                    return a.concat(Array.isArray(b) ? m(b) : b);
                }, []);
            }
            function n(a) {
                var b = [];
                return j(a, function(a) {
                    -1 === b.indexOf(a) && b.push(a);
                }), b;
            }
            Object.defineProperties(c, {
                to2dArray: {
                    get: function() {
                        return d;
                    }
                },
                extendArray: {
                    get: function() {
                        return e;
                    }
                },
                pivot: {
                    get: function() {
                        return f;
                    }
                },
                arrayReduce: {
                    get: function() {
                        return g;
                    }
                },
                arrayFilter: {
                    get: function() {
                        return h;
                    }
                },
                arrayMap: {
                    get: function() {
                        return i;
                    }
                },
                arrayEach: {
                    get: function() {
                        return j;
                    }
                },
                arraySum: {
                    get: function() {
                        return k;
                    }
                },
                arrayAvg: {
                    get: function() {
                        return l;
                    }
                },
                arrayFlatten: {
                    get: function() {
                        return m;
                    }
                },
                arrayUnique: {
                    get: function() {
                        return n;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
        }, {} ],
        42: [ function(a, b, c) {
            "use strict";
            function d() {
                return n;
            }
            function e() {
                return o;
            }
            function f() {
                return p;
            }
            function g() {
                return q;
            }
            function h(a) {
                return a || (a = navigator.userAgent), /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a);
            }
            function i() {
                return "ontouchstart" in window;
            }
            function j() {
                var a = document.createElement("div");
                return !(!a.createShadowRoot || !a.createShadowRoot.toString().match(/\[native code\]/));
            }
            function k() {
                var a = document.createElement("TABLE");
                a.style.borderSpacing = 0, a.style.borderWidth = 0, a.style.padding = 0;
                var b = document.createElement("TBODY");
                a.appendChild(b), b.appendChild(document.createElement("TR")), b.firstChild.appendChild(document.createElement("TD")), 
                b.firstChild.firstChild.innerHTML = "<tr><td>t<br>t</td></tr>";
                var c = document.createElement("CAPTION");
                c.innerHTML = "c<br>c<br>c<br>c", c.style.padding = 0, c.style.margin = 0, a.insertBefore(c, b), 
                document.body.appendChild(a), m = a.offsetHeight < 2 * a.lastChild.offsetHeight, 
                document.body.removeChild(a);
            }
            function l() {
                return void 0 === m && k(), m;
            }
            Object.defineProperties(c, {
                isIE8: {
                    get: function() {
                        return d;
                    }
                },
                isIE9: {
                    get: function() {
                        return e;
                    }
                },
                isSafari: {
                    get: function() {
                        return f;
                    }
                },
                isChrome: {
                    get: function() {
                        return g;
                    }
                },
                isMobileBrowser: {
                    get: function() {
                        return h;
                    }
                },
                isTouchSupported: {
                    get: function() {
                        return i;
                    }
                },
                isWebComponentSupportedNatively: {
                    get: function() {
                        return j;
                    }
                },
                hasCaptionProblem: {
                    get: function() {
                        return l;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var m, n = !document.createTextNode("test").textContent, o = !!document.documentMode, p = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor), q = /Chrome/.test(navigator.userAgent) && /Google/.test(navigator.vendor);
        }, {} ],
        43: [ function(a, b, c) {
            "use strict";
            function d(a) {
                for (var b, c = a + 1, d = ""; c > 0; ) b = (c - 1) % 26, d = String.fromCharCode(65 + b) + d, 
                c = parseInt((c - b) / 26, 10);
                return d;
            }
            function e(a, b) {
                a = "number" == typeof a ? a : 100, b = "number" == typeof b ? b : 4;
                var c, e, f = [];
                for (c = 0; a > c; c++) {
                    var g = [];
                    for (e = 0; b > e; e++) g.push(d(e) + (c + 1));
                    f.push(g);
                }
                return f;
            }
            function f(a, b) {
                a = "number" == typeof a ? a : 100, b = "number" == typeof b ? b : 4;
                var c, e, f = [];
                for (c = 0; a > c; c++) {
                    var g = {};
                    for (e = 0; b > e; e++) g["prop" + e] = d(e) + (c + 1);
                    f.push(g);
                }
                return f;
            }
            function g(a) {
                var b, c, d, e, f = [], g = 0;
                for (b = 0, c = a.length; c > b; b++) for (d = 0, e = a[b].length; e > d; d++) d == g && (f.push([]), 
                g++), f[d].push(a[b][d]);
                return f;
            }
            function h(a, b) {
                function c(a) {
                    var b = Handsontable.cellTypes[a];
                    if ("undefined" == typeof b) throw new Error('You declared cell type "' + a + '" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');
                    return b;
                }
                return b = "undefined" == typeof b ? !0 : b, function(d, e) {
                    return function f(d) {
                        if (d) {
                            if (d.hasOwnProperty(a) && void 0 !== d[a]) return d[a];
                            if (d.hasOwnProperty("type") && d.type) {
                                var e;
                                if ("string" != typeof d.type) throw new Error("Cell type must be a string ");
                                if (e = c(d.type), e.hasOwnProperty(a)) return e[a];
                                if (b) return;
                            }
                            return f(j(d));
                        }
                    }("number" == typeof d ? this.getCellMeta(d, e) : d);
                };
            }
            Object.defineProperties(c, {
                spreadsheetColumnLabel: {
                    get: function() {
                        return d;
                    }
                },
                createSpreadsheetData: {
                    get: function() {
                        return e;
                    }
                },
                createSpreadsheetObjectData: {
                    get: function() {
                        return f;
                    }
                },
                translateRowsToColumns: {
                    get: function() {
                        return g;
                    }
                },
                cellMethodLookupFactory: {
                    get: function() {
                        return h;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var i, j = (i = a("object"), i && i.__esModule && i || {
                "default": i
            }).getPrototypeOf;
        }, {
            object: 49
        } ],
        44: [ function(a, b, c) {
            "use strict";
            function d(a, b, c) {
                for (;null != a && a !== c; ) {
                    if (a.nodeType === Node.ELEMENT_NODE && (b.indexOf(a.nodeName) > -1 || b.indexOf(a) > -1)) return a;
                    a = a.host && a.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? a.host : a.parentNode;
                }
                return null;
            }
            function e(a, b) {
                var c = a.parentNode, d = [];
                for ("string" == typeof b ? d = Array.prototype.slice.call(document.querySelectorAll(b), 0) : d.push(b); null != c; ) {
                    if (d.indexOf(c) > -1) return !0;
                    c = c.parentNode;
                }
                return !1;
            }
            function f(a) {
                function b(a) {
                    return a.nodeType === Node.ELEMENT_NODE && a.nodeName === d.toUpperCase();
                }
                var c, d = "hot-table", e = !1;
                for (c = g(a); null != c; ) {
                    if (b(c)) {
                        e = !0;
                        break;
                    }
                    if (c.host && c.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                        if (e = b(c.host)) break;
                        c = c.host;
                    }
                    c = c.parentNode;
                }
                return e;
            }
            function g(a) {
                return "undefined" != typeof Polymer && "function" == typeof wrap ? wrap(a) : a;
            }
            function h(a) {
                return "undefined" != typeof Polymer && "function" == typeof unwrap ? unwrap(a) : a;
            }
            function i(a) {
                var b = 0;
                if (a.previousSibling) for (;a = a.previousSibling; ) ++b;
                return b;
            }
            function j(a, b) {
                var c = document.querySelector(".ht_clone_" + a);
                return c ? c.contains(b) : null;
            }
            function k(a) {
                var b = 0, c = [];
                if (!a || !a.length) return c;
                for (;a[b]; ) c.push(a[b]), b++;
                return c;
            }
            function l(a, b) {
                return V(a, b);
            }
            function m(a, b) {
                return W(a, b);
            }
            function n(a, b) {
                return X(a, b);
            }
            function o(a, b) {
                if (3 === a.nodeType) b.removeChild(a); else if ([ "TABLE", "THEAD", "TBODY", "TFOOT", "TR" ].indexOf(a.nodeName) > -1) for (var c = a.childNodes, d = c.length - 1; d >= 0; d--) o(c[d], a);
            }
            function p(a) {
                for (var b; b = a.lastChild; ) a.removeChild(b);
            }
            function q(a, b) {
                fa.test(b) ? a.innerHTML = b : r(a, b);
            }
            function r(a, b) {
                var c = a.firstChild;
                c && 3 === c.nodeType && null === c.nextSibling ? ga ? c.textContent = b : c.data = b : (p(a), 
                a.appendChild(document.createTextNode(b)));
            }
            function s(a) {
                for (var b = a; h(b) !== document.documentElement; ) {
                    if (null === b) return !1;
                    if (b.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                        if (b.host) {
                            if (b.host.impl) return s(b.host.impl);
                            if (b.host) return s(b.host);
                            throw new Error("Lost in Web Components world");
                        }
                        return !1;
                    }
                    if ("none" === b.style.display) return !1;
                    b = b.parentNode;
                }
                return !0;
            }
            function t(a) {
                var b, c, d, e, f;
                if (e = document.documentElement, aa() && a.firstChild && "CAPTION" === a.firstChild.nodeName) return f = a.getBoundingClientRect(), 
                {
                    top: f.top + (window.pageYOffset || e.scrollTop) - (e.clientTop || 0),
                    left: f.left + (window.pageXOffset || e.scrollLeft) - (e.clientLeft || 0)
                };
                for (b = a.offsetLeft, c = a.offsetTop, d = a; (a = a.offsetParent) && a !== document.body; ) b += a.offsetLeft, 
                c += a.offsetTop, d = a;
                return d && "fixed" === d.style.position && (b += window.pageXOffset || e.scrollLeft, 
                c += window.pageYOffset || e.scrollTop), {
                    left: b,
                    top: c
                };
            }
            function u() {
                var a = window.scrollY;
                return void 0 === a && (a = document.documentElement.scrollTop), a;
            }
            function v() {
                var a = window.scrollX;
                return void 0 === a && (a = document.documentElement.scrollLeft), a;
            }
            function w(a) {
                return a === window ? u() : a.scrollTop;
            }
            function x(a) {
                return a === window ? v() : a.scrollLeft;
            }
            function y(a) {
                for (var b, c, d, e = a.parentNode, f = [ "auto", "scroll" ], g = "", h = "", i = "", j = ""; e && e.style && document.body !== e; ) {
                    if (b = e.style.overflow, c = e.style.overflowX, d = e.style.overflowY, "scroll" == b || "scroll" == c || "scroll" == d) return e;
                    if (window.getComputedStyle && (g = window.getComputedStyle(e), h = g.getPropertyValue("overflow"), 
                    i = g.getPropertyValue("overflow-y"), j = g.getPropertyValue("overflow-x"), "scroll" === h || "scroll" === j || "scroll" === i)) return e;
                    if (e.clientHeight <= e.scrollHeight && (-1 !== f.indexOf(d) || -1 !== f.indexOf(b) || -1 !== f.indexOf(h) || -1 !== f.indexOf(i))) return e;
                    if (e.clientWidth <= e.scrollWidth && (-1 !== f.indexOf(c) || -1 !== f.indexOf(b) || -1 !== f.indexOf(h) || -1 !== f.indexOf(j))) return e;
                    e = e.parentNode;
                }
                return window;
            }
            function z(a) {
                for (var b = a.parentNode; b && b.style && document.body !== b; ) {
                    if ("visible" !== b.style.overflow && "" !== b.style.overflow) return b;
                    if (window.getComputedStyle) {
                        var c = window.getComputedStyle(b);
                        if ("visible" !== c.getPropertyValue("overflow") && "" !== c.getPropertyValue("overflow")) return b;
                    }
                    b = b.parentNode;
                }
                return window;
            }
            function A(a, b) {
                if (a) {
                    if (a !== window) {
                        var c, d = a.style[b];
                        return "" !== d && void 0 !== d ? d : (c = B(a), "" !== c[b] && void 0 !== c[b] ? c[b] : void 0);
                    }
                    if ("width" === b) return window.innerWidth + "px";
                    if ("height" === b) return window.innerHeight + "px";
                }
            }
            function B(a) {
                return a.currentStyle || document.defaultView.getComputedStyle(a);
            }
            function C(a) {
                return a.offsetWidth;
            }
            function D(a) {
                return aa() && a.firstChild && "CAPTION" === a.firstChild.nodeName ? a.offsetHeight + a.firstChild.offsetHeight : a.offsetHeight;
            }
            function E(a) {
                return a.clientHeight || a.innerHeight;
            }
            function F(a) {
                return a.clientWidth || a.innerWidth;
            }
            function G(a, b, c) {
                window.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent("on" + b, c);
            }
            function H(a, b, c) {
                window.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent("on" + b, c);
            }
            function I(a) {
                if (a.selectionStart) return a.selectionStart;
                if (document.selection) {
                    a.focus();
                    var b = document.selection.createRange();
                    if (null == b) return 0;
                    var c = a.createTextRange(), d = c.duplicate();
                    return c.moveToBookmark(b.getBookmark()), d.setEndPoint("EndToStart", c), d.text.length;
                }
                return 0;
            }
            function J(a) {
                if (a.selectionEnd) return a.selectionEnd;
                if (document.selection) {
                    var b = document.selection.createRange();
                    if (null == b) return 0;
                    var c = a.createTextRange();
                    return c.text.indexOf(b.text) + b.text.length;
                }
            }
            function K(a, b, c) {
                if (void 0 === c && (c = b), a.setSelectionRange) {
                    a.focus();
                    try {
                        a.setSelectionRange(b, c);
                    } catch (d) {
                        var e = a.parentNode, f = e.style.display;
                        e.style.display = "block", a.setSelectionRange(b, c), e.style.display = f;
                    }
                } else if (a.createTextRange) {
                    var g = a.createTextRange();
                    g.collapse(!0), g.moveEnd("character", c), g.moveStart("character", b), g.select();
                }
            }
            function L() {
                var a = document.createElement("p");
                a.style.width = "100%", a.style.height = "200px";
                var b = document.createElement("div");
                b.style.position = "absolute", b.style.top = "0px", b.style.left = "0px", b.style.visibility = "hidden", 
                b.style.width = "200px", b.style.height = "150px", b.style.overflow = "hidden", 
                b.appendChild(a), (document.body || document.documentElement).appendChild(b);
                var c = a.offsetWidth;
                b.style.overflow = "scroll";
                var d = a.offsetWidth;
                return c == d && (d = b.clientWidth), (document.body || document.documentElement).removeChild(b), 
                c - d;
            }
            function M() {
                return void 0 === ea && (ea = L()), ea;
            }
            function N(a, b, c) {
                Z() || $() ? (a.style.top = c, a.style.left = b) : _() ? a.style["-webkit-transform"] = "translate3d(" + b + "," + c + ",0)" : a.style.transform = "translate3d(" + b + "," + c + ",0)";
            }
            function O(a) {
                var b;
                return a.style.transform && "" !== (b = a.style.transform) ? [ "transform", b ] : a.style["-webkit-transform"] && "" !== (b = a.style["-webkit-transform"]) ? [ "-webkit-transform", b ] : -1;
            }
            function P(a) {
                a.transform && "" !== a.transform ? a.transform = "" : a["-webkit-transform"] && "" !== a["-webkit-transform"] && (a["-webkit-transform"] = "");
            }
            function Q(a) {
                var b = [ "INPUT", "SELECT", "TEXTAREA" ];
                return b.indexOf(a.nodeName) > -1 || "true" === a.contentEditable;
            }
            function R(a) {
                return Q(a) && -1 == a.className.indexOf("handsontableInput") && -1 == a.className.indexOf("copyPaste");
            }
            function S(a) {
                return ja.call(window, a);
            }
            function T(a) {
                ka.call(window, a);
            }
            Object.defineProperties(c, {
                closest: {
                    get: function() {
                        return d;
                    }
                },
                isChildOf: {
                    get: function() {
                        return e;
                    }
                },
                isChildOfWebComponentTable: {
                    get: function() {
                        return f;
                    }
                },
                polymerWrap: {
                    get: function() {
                        return g;
                    }
                },
                polymerUnwrap: {
                    get: function() {
                        return h;
                    }
                },
                index: {
                    get: function() {
                        return i;
                    }
                },
                overlayContainsElement: {
                    get: function() {
                        return j;
                    }
                },
                hasClass: {
                    get: function() {
                        return l;
                    }
                },
                addClass: {
                    get: function() {
                        return m;
                    }
                },
                removeClass: {
                    get: function() {
                        return n;
                    }
                },
                removeTextNodes: {
                    get: function() {
                        return o;
                    }
                },
                empty: {
                    get: function() {
                        return p;
                    }
                },
                HTML_CHARACTERS: {
                    get: function() {
                        return fa;
                    }
                },
                fastInnerHTML: {
                    get: function() {
                        return q;
                    }
                },
                fastInnerText: {
                    get: function() {
                        return r;
                    }
                },
                isVisible: {
                    get: function() {
                        return s;
                    }
                },
                offset: {
                    get: function() {
                        return t;
                    }
                },
                getWindowScrollTop: {
                    get: function() {
                        return u;
                    }
                },
                getWindowScrollLeft: {
                    get: function() {
                        return v;
                    }
                },
                getScrollTop: {
                    get: function() {
                        return w;
                    }
                },
                getScrollLeft: {
                    get: function() {
                        return x;
                    }
                },
                getScrollableElement: {
                    get: function() {
                        return y;
                    }
                },
                getTrimmingContainer: {
                    get: function() {
                        return z;
                    }
                },
                getStyle: {
                    get: function() {
                        return A;
                    }
                },
                getComputedStyle: {
                    get: function() {
                        return B;
                    }
                },
                outerWidth: {
                    get: function() {
                        return C;
                    }
                },
                outerHeight: {
                    get: function() {
                        return D;
                    }
                },
                innerHeight: {
                    get: function() {
                        return E;
                    }
                },
                innerWidth: {
                    get: function() {
                        return F;
                    }
                },
                addEvent: {
                    get: function() {
                        return G;
                    }
                },
                removeEvent: {
                    get: function() {
                        return H;
                    }
                },
                getCaretPosition: {
                    get: function() {
                        return I;
                    }
                },
                getSelectionEndPosition: {
                    get: function() {
                        return J;
                    }
                },
                setCaretPosition: {
                    get: function() {
                        return K;
                    }
                },
                getScrollbarWidth: {
                    get: function() {
                        return M;
                    }
                },
                setOverlayPosition: {
                    get: function() {
                        return N;
                    }
                },
                getCssTransform: {
                    get: function() {
                        return O;
                    }
                },
                resetCssTransform: {
                    get: function() {
                        return P;
                    }
                },
                isInput: {
                    get: function() {
                        return Q;
                    }
                },
                isOutsideInput: {
                    get: function() {
                        return R;
                    }
                },
                requestAnimationFrame: {
                    get: function() {
                        return S;
                    }
                },
                cancelAnimationFrame: {
                    get: function() {
                        return T;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var U, V, W, X, Y = (U = a("../browser"), U && U.__esModule && U || {
                "default": U
            }), Z = Y.isIE8, $ = Y.isIE9, _ = Y.isSafari, aa = Y.hasCaptionProblem, ba = !!document.documentElement.classList;
            if (ba) {
                var ca = function() {
                    var a = document.createElement("div");
                    return a.classList.add("test", "test2"), a.classList.contains("test2");
                }();
                V = function(a, b) {
                    return "" === b ? !1 : a.classList.contains(b);
                }, W = function(a, b) {
                    var c = 0;
                    if ("string" == typeof b && (b = b.split(" ")), b = k(b), ca) a.classList.add.apply(a.classList, b); else for (;b && b[c]; ) a.classList.add(b[c]), 
                    c++;
                }, X = function(a, b) {
                    var c = 0;
                    if ("string" == typeof b && (b = b.split(" ")), b = k(b), ca) a.classList.remove.apply(a.classList, b); else for (;b && b[c]; ) a.classList.remove(b[c]), 
                    c++;
                };
            } else {
                var da = function(a) {
                    return new RegExp("(\\s|^)" + a + "(\\s|$)");
                };
                V = function(a, b) {
                    return !!a.className.match(da(b));
                }, W = function(a, b) {
                    var c = 0, d = a.className;
                    if ("string" == typeof b && (b = b.split(" ")), "" === d) d = b.join(" "); else for (;b && b[c]; ) da(b[c]).test(d) || (d += " " + b[c]), 
                    c++;
                    a.className = d;
                }, X = function(a, b) {
                    var c = 0, d = a.className;
                    for ("string" == typeof b && (b = b.split(" ")); b && b[c]; ) d = d.replace(da(b[c]), " ").trim(), 
                    c++;
                    a.className !== d && (a.className = d);
                };
            }
            for (var ea, fa = /(<(.*)>|&(.*);)/, ga = !!document.createTextNode("test").textContent, ha = 0, ia = [ "ms", "moz", "webkit", "o" ], ja = window.requestAnimationFrame, ka = window.cancelAnimationFrame, la = 0; la < ia.length && !ja; ++la) ja = window[ia[la] + "RequestAnimationFrame"], 
            ka = window[ia[la] + "CancelAnimationFrame"] || window[ia[la] + "CancelRequestAnimationFrame"];
            ja || (ja = function(a) {
                var b = new Date().getTime(), c = Math.max(0, 16 - (b - ha)), d = window.setTimeout(function() {
                    a(b + c);
                }, c);
                return ha = b + c, d;
            }), ka || (ka = function(a) {
                clearTimeout(a);
            });
        }, {
            "../browser": 42
        } ],
        45: [ function(a, b, c) {
            "use strict";
            function d(a) {
                a.isImmediatePropagationEnabled = !1, a.cancelBubble = !0;
            }
            function e(a) {
                return a.isImmediatePropagationEnabled === !1;
            }
            function f(a) {
                "function" == typeof a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0;
            }
            function g(a) {
                if (a.pageX) return a.pageX;
                var b = getWindowScrollLeft(), c = a.clientX + b;
                return c;
            }
            function h(a) {
                if (a.pageY) return a.pageY;
                var b = getWindowScrollTop(), c = a.clientY + b;
                return c;
            }
            Object.defineProperties(c, {
                stopImmediatePropagation: {
                    get: function() {
                        return d;
                    }
                },
                isImmediatePropagationStopped: {
                    get: function() {
                        return e;
                    }
                },
                stopPropagation: {
                    get: function() {
                        return f;
                    }
                },
                pageX: {
                    get: function() {
                        return g;
                    }
                },
                pageY: {
                    get: function() {
                        return h;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
        }, {} ],
        46: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                return function() {
                    return a.apply(b, arguments);
                };
            }
            function e(a) {
                function b() {
                    var b = this, g = arguments, h = Date.now(), i = !1;
                    e.lastCallThrottled = !0, d || (d = h, i = !0);
                    var j = c - (h - d);
                    return i ? (e.lastCallThrottled = !1, a.apply(this, g)) : (f && clearTimeout(f), 
                    f = setTimeout(function() {
                        e.lastCallThrottled = !1, a.apply(b, g), d = 0, f = void 0;
                    }, j)), e;
                }
                var c = void 0 !== arguments[1] ? arguments[1] : 200, d = 0, e = {
                    lastCallThrottled: !0
                }, f = null;
                return b;
            }
            function f(a) {
                function b() {
                    h = f;
                }
                function c() {
                    return h ? (h--, a.apply(this, arguments)) : g.apply(this, arguments);
                }
                var d = void 0 !== arguments[1] ? arguments[1] : 200, f = void 0 !== arguments[2] ? arguments[2] : 10, g = e(a, d), h = f;
                return c.clearHits = b, c;
            }
            Object.defineProperties(c, {
                proxy: {
                    get: function() {
                        return d;
                    }
                },
                throttle: {
                    get: function() {
                        return e;
                    }
                },
                throttleAfterHits: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
        }, {} ],
        47: [ function(a, b, c) {
            "use strict";
            function d(a) {
                switch (typeof a) {
                  case "string":
                  case "number":
                    return a + "";

                  case "object":
                    return null === a ? "" : a.toString();

                  case "undefined":
                    return "";

                  default:
                    return a.toString();
                }
            }
            Object.defineProperties(c, {
                stringify: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
        }, {} ],
        48: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b = typeof a;
                return "number" == b ? !isNaN(a) && isFinite(a) : "string" == b ? a.length ? 1 == a.length ? /\d/.test(a) : /^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(a) : !1 : "object" == b ? !(!a || "number" != typeof a.valueOf() || a instanceof Date) : !1;
            }
            function e(a, b, c, d) {
                var e = -1, f = b;
                if ("function" == typeof b ? (c = b, f = a) : e = a - 1, d || f >= a) for (;++e <= f && c(e) !== !1; ) ; else for (e = a + 1; --e >= b && c(e) !== !1; ) ;
            }
            function f(a, b) {
                return b = parseInt(b.toString().replace("%", ""), 10), b = parseInt(a * b / 100);
            }
            Object.defineProperties(c, {
                isNumeric: {
                    get: function() {
                        return d;
                    }
                },
                rangeEach: {
                    get: function() {
                        return e;
                    }
                },
                valueAccordingPercent: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
        }, {} ],
        49: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b;
                return Array.isArray(a) ? b = [] : (b = {}, o(a, function(a, c) {
                    a && "object" == typeof a && !Array.isArray(a) ? b[c] = d(a) : Array.isArray(a) ? a.length && "object" == typeof a[0] && !Array.isArray(a[0]) ? b[c] = [ d(a[0]) ] : b[c] = [] : b[c] = null;
                })), b;
            }
            function e(a, b) {
                return b.prototype.constructor = b, a.prototype = new b(), a.prototype.constructor = a, 
                a;
            }
            function f(a, b) {
                return o(b, function(b, c) {
                    a[c] = b;
                }), a;
            }
            function g(a, b) {
                o(b, function(c, d) {
                    b[d] && "object" == typeof b[d] ? (a[d] || (Array.isArray(b[d]) ? a[d] = [] : a[d] = {}), 
                    g(a[d], b[d])) : a[d] = b[d];
                });
            }
            function h(a) {
                return "object" == typeof a ? JSON.parse(JSON.stringify(a)) : a;
            }
            function i(a) {
                var b = {};
                return o(a, function(a, c) {
                    return b[c] = a;
                }), b;
            }
            function j(a) {
                for (var b = [], c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];
                return q(b, function(b) {
                    o(b, function(b, c) {
                        if ("function" == typeof b) a.prototype[c] = b; else {
                            var d = function(a, b) {
                                a = "_" + a;
                                var c = function(a) {
                                    return (Array.isArray(a) || l(a)) && (a = h(a)), a;
                                };
                                return function() {
                                    return void 0 === this[a] && (this[a] = c(b)), this[a];
                                };
                            }, e = function(a) {
                                return a = "_" + a, function(b) {
                                    this[a] = b;
                                };
                            };
                            Object.defineProperty(a.prototype, c, {
                                get: d(c, b),
                                set: e(c),
                                configurable: !0
                            });
                        }
                    });
                }), a;
            }
            function k(a, b) {
                return JSON.stringify(a) === JSON.stringify(b);
            }
            function l(a) {
                return "[object Object]" == Object.prototype.toString.call(a);
            }
            function m(a) {
                var b;
                if ("object" == typeof a.__proto__) b = a.__proto__; else {
                    var c, d = a.constructor;
                    "function" == typeof a.constructor && (c = d, delete a.constructor && (d = a.constructor, 
                    a.constructor = c)), b = d ? d.prototype : null;
                }
                return b;
            }
            function n(a, b, c, d) {
                d.value = c, d.writable = d.writable !== !1, d.enumerable = d.enumerable !== !1, 
                d.configurable = d.configurable !== !1, Object.defineProperty(a, b, d);
            }
            function o(a, b) {
                for (var c in a) if ((!a.hasOwnProperty || a.hasOwnProperty && a.hasOwnProperty(c)) && b(a[c], c, a) === !1) break;
                return a;
            }
            Object.defineProperties(c, {
                duckSchema: {
                    get: function() {
                        return d;
                    }
                },
                inherit: {
                    get: function() {
                        return e;
                    }
                },
                extend: {
                    get: function() {
                        return f;
                    }
                },
                deepExtend: {
                    get: function() {
                        return g;
                    }
                },
                deepClone: {
                    get: function() {
                        return h;
                    }
                },
                clone: {
                    get: function() {
                        return i;
                    }
                },
                mixin: {
                    get: function() {
                        return j;
                    }
                },
                isObjectEquals: {
                    get: function() {
                        return k;
                    }
                },
                isObject: {
                    get: function() {
                        return l;
                    }
                },
                getPrototypeOf: {
                    get: function() {
                        return m;
                    }
                },
                defineGetter: {
                    get: function() {
                        return n;
                    }
                },
                objectEach: {
                    get: function() {
                        return o;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var p, q = (p = a("array"), p && p.__esModule && p || {
                "default": p
            }).arrayEach;
        }, {
            array: 41
        } ],
        50: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                function c() {}
                f(c, a);
                for (var d = 0, e = b.length; e > d; d++) c.prototype[b[d]] = void 0;
                return c;
            }
            Object.defineProperties(c, {
                columnFactory: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f = (e = a("object"), e && e.__esModule && e || {
                "default": e
            }).inherit;
        }, {
            object: 49
        } ],
        51: [ function(a, b, c) {
            "use strict";
            function d(a) {
                return a[0].toUpperCase() + a.substr(1);
            }
            function e(a, b) {
                var c = !0;
                return m(b.length - 1, function(d) {
                    return a.charAt(d) !== b.charAt(d) ? (c = !1, !1) : void 0;
                }), c;
            }
            function f(a, b) {
                var c = !0, d = b.length - 1, e = a.length - 1;
                return m(d, function(f) {
                    var g = e - f, h = d - f;
                    return a.charAt(g) !== b.charAt(h) ? (c = !1, !1) : void 0;
                }), c;
            }
            function g() {
                for (var a = [], b = 0; b < arguments.length; b++) a[b] = arguments[b];
                for (var c = [], d = a.length; d--; ) {
                    var e = l(a[d]).toLowerCase();
                    -1 === c.indexOf(e) && c.push(e);
                }
                return 1 === c.length;
            }
            function h() {
                function a() {
                    return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
                }
                return a() + a() + a() + a();
            }
            function i(a) {
                return /^([0-9][0-9]?\%$)|(^100\%$)/.test(a);
            }
            Object.defineProperties(c, {
                toUpperCaseFirst: {
                    get: function() {
                        return d;
                    }
                },
                startsWith: {
                    get: function() {
                        return e;
                    }
                },
                endsWith: {
                    get: function() {
                        return f;
                    }
                },
                equalsIgnoreCase: {
                    get: function() {
                        return g;
                    }
                },
                randomString: {
                    get: function() {
                        return h;
                    }
                },
                isPercentValue: {
                    get: function() {
                        return i;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var j, k, l = (j = a("mixed"), j && j.__esModule && j || {
                "default": j
            }).stringify, m = (k = a("number"), k && k.__esModule && k || {
                "default": k
            }).rangeEach;
        }, {
            mixed: 47,
            number: 48
        } ],
        52: [ function(a, b, c) {
            "use strict";
            function d(a) {
                return 32 == a || a >= 48 && 57 >= a || a >= 96 && 111 >= a || a >= 186 && 192 >= a || a >= 219 && 222 >= a || a >= 226 || a >= 65 && 90 >= a;
            }
            function e(a) {
                var b = [ j.ARROW_DOWN, j.ARROW_UP, j.ARROW_LEFT, j.ARROW_RIGHT, j.HOME, j.END, j.DELETE, j.BACKSPACE, j.F1, j.F2, j.F3, j.F4, j.F5, j.F6, j.F7, j.F8, j.F9, j.F10, j.F11, j.F12, j.TAB, j.PAGE_DOWN, j.PAGE_UP, j.ENTER, j.ESCAPE, j.SHIFT, j.CAPS_LOCK, j.ALT ];
                return -1 !== b.indexOf(a);
            }
            function f(a) {
                return -1 !== [ j.CONTROL_LEFT, 224, j.COMMAND_LEFT, j.COMMAND_RIGHT ].indexOf(a);
            }
            function g(a, b) {
                var c = b.split("|"), d = !1;
                return i(c, function(b) {
                    return a === j[b] ? (d = !0, !1) : void 0;
                }), d;
            }
            Object.defineProperties(c, {
                KEY_CODES: {
                    get: function() {
                        return j;
                    }
                },
                isPrintableChar: {
                    get: function() {
                        return d;
                    }
                },
                isMetaKey: {
                    get: function() {
                        return e;
                    }
                },
                isCtrlKey: {
                    get: function() {
                        return f;
                    }
                },
                isKey: {
                    get: function() {
                        return g;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var h, i = (h = a("array"), h && h.__esModule && h || {
                "default": h
            }).arrayEach, j = {
                MOUSE_LEFT: 1,
                MOUSE_RIGHT: 3,
                MOUSE_MIDDLE: 2,
                BACKSPACE: 8,
                COMMA: 188,
                INSERT: 45,
                DELETE: 46,
                END: 35,
                ENTER: 13,
                ESCAPE: 27,
                CONTROL_LEFT: 91,
                COMMAND_LEFT: 17,
                COMMAND_RIGHT: 93,
                ALT: 18,
                HOME: 36,
                PAGE_DOWN: 34,
                PAGE_UP: 33,
                PERIOD: 190,
                SPACE: 32,
                SHIFT: 16,
                CAPS_LOCK: 20,
                TAB: 9,
                ARROW_RIGHT: 39,
                ARROW_LEFT: 37,
                ARROW_UP: 38,
                ARROW_DOWN: 40,
                F1: 112,
                F2: 113,
                F3: 114,
                F4: 115,
                F5: 116,
                F6: 117,
                F7: 118,
                F8: 119,
                F9: 120,
                F10: 121,
                F11: 122,
                F12: 123,
                A: 65,
                X: 88,
                C: 67,
                V: 86
            };
        }, {
            array: 41
        } ],
        53: [ function(a, b, c) {
            "use strict";
            function d() {
                function a(a) {
                    return null !== a && !c(a) && ("string" == typeof a || "number" == typeof a);
                }
                function b(a) {
                    return null !== a && ("object" == typeof a || "function" == typeof a);
                }
                function c(a) {
                    return a !== a;
                }
                var d = {
                    arrayMap: [],
                    weakMap: new WeakMap()
                };
                return {
                    get: function(c) {
                        return a(c) ? d.arrayMap[c] : b(c) ? d.weakMap.get(c) : void 0;
                    },
                    set: function(c, e) {
                        if (a(c)) d.arrayMap[c] = e; else {
                            if (!b(c)) throw new Error("Invalid key type");
                            d.weakMap.set(c, e);
                        }
                    },
                    "delete": function(c) {
                        a(c) ? delete d.arrayMap[c] : b(c) && d.weakMap["delete"](c);
                    }
                };
            }
            Object.defineProperties(c, {
                MultiMap: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            }), window.MultiMap = d;
        }, {} ],
        54: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                Hooks: {
                    get: function() {
                        return i;
                    }
                },
                localHooks: {
                    get: function() {
                        return j;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = [ "afterCellMetaReset", "afterChange", "afterChangesObserved", "afterColumnMove", "afterColumnResize", "afterContextMenuDefaultOptions", "afterContextMenuHide", "afterContextMenuShow", "afterCopyLimit", "afterCreateCol", "afterCreateRow", "afterDeselect", "afterDestroy", "afterDocumentKeyDown", "afterGetCellMeta", "afterGetColHeader", "afterGetRowHeader", "afterInit", "afterIsMultipleSelectionCheck", "afterLoadData", "afterMomentumScroll", "afterOnCellCornerMouseDown", "afterOnCellMouseDown", "afterOnCellMouseOver", "afterRemoveCol", "afterRemoveRow", "afterRender", "afterRenderer", "afterScrollHorizontally", "afterScrollVertically", "afterSelection", "afterSelectionByProp", "afterSelectionEnd", "afterSelectionEndByProp", "afterSetCellMeta", "afterUpdateSettings", "afterValidate", "beforeAutofill", "beforeCellAlignment", "beforeChange", "beforeChangeRender", "beforeDrawBorders", "beforeGetCellMeta", "beforeInit", "beforeInitWalkontable", "beforeKeyDown", "beforeOnCellMouseDown", "beforeRemoveCol", "beforeRemoveRow", "beforeRender", "beforeSetRangeEnd", "beforeTouchScroll", "beforeValidate", "construct", "init", "modifyCol", "modifyColWidth", "modifyRow", "modifyRowHeight", "persistentStateLoad", "persistentStateReset", "persistentStateSave", "beforeColumnSort", "afterColumnSort", "afterAutofillApplyValues", "modifyCopyableRange", "beforeColumnMove", "afterColumnMove", "beforeRowMove", "afterRowMove", "beforeColumnResize", "afterColumnResize", "beforeRowResize", "afterRowResize" ], g = (d = a("helpers/array"), 
            d && d.__esModule && d || {
                "default": d
            }).arrayEach, h = (e = a("helpers/object"), e && e.__esModule && e || {
                "default": e
            }).objectEach, i = function() {
                this.globalBucket = this.createEmptyBucket();
            };
            $traceurRuntime.createClass(i, {
                createEmptyBucket: function() {
                    var a = Object.create(null);
                    return g(f, function(b) {
                        return a[b] = [];
                    }), a;
                },
                getBucket: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    return a ? (a.pluginHookBucket || (a.pluginHookBucket = this.createEmptyBucket()), 
                    a.pluginHookBucket) : this.globalBucket;
                },
                add: function(a, b) {
                    var c = void 0 !== arguments[2] ? arguments[2] : null, d = this;
                    if (Array.isArray(b)) g(b, function(b) {
                        return d.add(a, b, c);
                    }); else {
                        var e = this.getBucket(c);
                        "undefined" == typeof e[a] && (this.register(a), e[a] = []), b.skip = !1, -1 === e[a].indexOf(b) && e[a].push(b);
                    }
                    return this;
                },
                once: function(a, b) {
                    var c = void 0 !== arguments[2] ? arguments[2] : null, d = this;
                    Array.isArray(b) ? g(b, function(b) {
                        return d.once(a, b, c);
                    }) : (b.runOnce = !0, this.add(a, b, c));
                },
                remove: function(a, b) {
                    var c = void 0 !== arguments[2] ? arguments[2] : null, d = this.getBucket(c);
                    return "undefined" != typeof d[a] && d[a].indexOf(b) >= 0 ? (b.skip = !0, !0) : !1;
                },
                run: function(a, b, c, d, e, f, g, h) {
                    var i = this.globalBucket[b], j = -1, k = i ? i.length : 0;
                    if (k) for (;++j < k; ) if (i[j] && !i[j].skip) {
                        var l = i[j].call(a, c, d, e, f, g, h);
                        void 0 !== l && (c = l), i[j] && i[j].runOnce && this.remove(b, i[j]);
                    }
                    var m = this.getBucket(a)[b], n = -1, o = m ? m.length : 0;
                    if (o) for (;++n < o; ) if (m[n] && !m[n].skip) {
                        var p = m[n].call(a, c, d, e, f, g, h);
                        void 0 !== p && (c = p), m[n] && m[n].runOnce && this.remove(b, m[n], a);
                    }
                    return c;
                },
                destroy: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    h(this.getBucket(a), function(a, b, c) {
                        return c[b].length = 0;
                    });
                },
                register: function(a) {
                    this.isRegistered(a) || f.push(a);
                },
                deregister: function(a) {
                    this.isRegistered(a) && f.splice(f.indexOf(a), 1);
                },
                isRegistered: function(a) {
                    return f.indexOf(a) >= 0;
                },
                getRegistered: function() {
                    return f;
                }
            }, {});
            var j = {
                _localHooks: Object.create(null),
                addLocalHook: function(a, b) {
                    this._localHooks[a] || (this._localHooks[a] = []), this._localHooks[a].push(b);
                },
                runLocalHooks: function(a) {
                    for (var b = [], c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];
                    var d = this;
                    this._localHooks[a] && g(this._localHooks[a], function(a) {
                        return a.apply(d, b);
                    });
                },
                clearLocalHooks: function() {
                    this._localHooks = {};
                }
            };
            Handsontable.utils = Handsontable.utils || {}, Handsontable.utils.Hooks = i, Handsontable.utils.localHooks = j;
        }, {
            "helpers/array": 41,
            "helpers/object": 49
        } ],
        55: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                a = k(a), Handsontable.plugins[a] = b, Handsontable.hooks.add("construct", function() {
                    var c;
                    l.has(this) || l.set(this, {}), c = l.get(this), c[a] || (c[a] = new b(this));
                }), Handsontable.hooks.add("afterDestroy", function() {
                    if (l.has(this)) {
                        var a = l.get(this);
                        j(a, function(a) {
                            return a.destroy();
                        }), l["delete"](this);
                    }
                });
            }
            function e(a, b) {
                if ("string" != typeof b) throw Error('Only strings can be passed as "plugin" parameter');
                var c = k(b);
                if (l.has(a) && l.get(a)[c]) return l.get(a)[c];
            }
            function f(a) {
                return l.has(a) ? Object.keys(l.get(a)) : [];
            }
            function g(a, b) {
                var c = null;
                return l.has(a) && j(l.get(a), function(a, d) {
                    a === b && (c = d);
                }), c;
            }
            Object.defineProperties(c, {
                registerPlugin: {
                    get: function() {
                        return d;
                    }
                },
                getPlugin: {
                    get: function() {
                        return e;
                    }
                },
                getRegistredPluginNames: {
                    get: function() {
                        return f;
                    }
                },
                getPluginName: {
                    get: function() {
                        return g;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var h, i, j = (h = a("helpers/object"), h && h.__esModule && h || {
                "default": h
            }).objectEach, k = (i = a("helpers/string"), i && i.__esModule && i || {
                "default": i
            }).toUpperCaseFirst, l = new WeakMap();
            Handsontable.plugins = Handsontable.plugins || {};
        }, {
            "helpers/object": 49,
            "helpers/string": 51
        } ],
        56: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                "default": {
                    get: function() {
                        return q;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("helpers/object"), d && d.__esModule && d || {
                "default": d
            }), h = g.defineGetter, i = g.objectEach, j = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }).arrayEach, k = (f = a("plugins"), f && f.__esModule && f || {
                "default": f
            }), l = k.getRegistredPluginNames, m = k.getPluginName, n = new WeakMap(), o = null, p = function(a) {
                var b = this;
                h(this, "hot", a, {
                    writable: !1
                }), n.set(this, {
                    hooks: {}
                }), o = null, this.pluginsInitializedCallbacks = [], this.isPluginsReady = !1, this.pluginName = null, 
                this.enabled = !1, this.initialized = !1, this.hot.addHook("afterPluginsInitialized", function() {
                    return b.onAfterPluginsInitialized();
                }), this.hot.addHook("afterUpdateSettings", function() {
                    return b.onUpdateSettings();
                }), this.hot.addHook("beforeInit", function() {
                    return b.init();
                });
            };
            $traceurRuntime.createClass(p, {
                init: function() {
                    this.pluginName = m(this.hot, this), this.isEnabled && this.isEnabled() && this.enablePlugin(), 
                    o || (o = l(this.hot)), o.indexOf(this.pluginName) >= 0 && o.splice(o.indexOf(this.pluginName), 1), 
                    o.length || this.hot.runHooks("afterPluginsInitialized"), this.initialized = !0;
                },
                enablePlugin: function() {
                    this.enabled = !0;
                },
                disablePlugin: function() {
                    this.eventManager && this.eventManager.clear(), this.clearHooks(), this.enabled = !1;
                },
                addHook: function(a, b) {
                    var c = n.get(this).hooks[a] = n.get(this).hooks[a] || [];
                    this.hot.addHook(a, b), c.push(b), n.get(this).hooks[a] = c;
                },
                removeHooks: function(a) {
                    var b = this;
                    j(n.get(this).hooks[a] || [], function(c) {
                        b.hot.removeHook(a, c);
                    });
                },
                clearHooks: function() {
                    var a = this, b = n.get(this).hooks;
                    i(b, function(b, c) {
                        return a.removeHooks(c);
                    }), b.length = 0;
                },
                callOnPluginsReady: function(a) {
                    this.isPluginsReady ? a() : this.pluginsInitializedCallbacks.push(a);
                },
                onAfterPluginsInitialized: function() {
                    j(this.pluginsInitializedCallbacks, function(a) {
                        return a();
                    }), this.pluginsInitializedCallbacks.length = 0, this.isPluginsReady = !0;
                },
                onUpdateSettings: function() {
                    this.isEnabled && (this.enabled && !this.isEnabled() && this.disablePlugin(), !this.enabled && this.isEnabled() && this.enablePlugin(), 
                    this.enabled && this.isEnabled() && this.updatePlugin && this.updatePlugin());
                },
                updatePlugin: function() {},
                destroy: function() {
                    this.eventManager && this.eventManager.destroy(), this.clearHooks(), delete this.hot;
                }
            }, {});
            var q = p;
        }, {
            "helpers/array": 41,
            "helpers/object": 49,
            plugins: 55
        } ],
        57: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                AutoColumnSize: {
                    get: function() {
                        return F;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m, n = (d = a("_base"), d && d.__esModule && d || {
                "default": d
            })["default"], o = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }), p = o.arrayEach, q = o.arrayFilter, r = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }), s = r.cancelAnimationFrame, t = r.requestAnimationFrame, u = r.isVisible, v = (g = a("utils/ghostTable"), 
            g && g.__esModule && g || {
                "default": g
            }).GhostTable, w = (h = a("helpers/object"), h && h.__esModule && h || {
                "default": h
            }), x = w.isObject, y = (w.objectEach, i = a("helpers/number"), i && i.__esModule && i || {
                "default": i
            }), z = y.valueAccordingPercent, A = y.rangeEach, B = (j = a("plugins"), j && j.__esModule && j || {
                "default": j
            }).registerPlugin, C = (k = a("utils/samplesGenerator"), k && k.__esModule && k || {
                "default": k
            }).SamplesGenerator, D = (l = a("helpers/string"), l && l.__esModule && l || {
                "default": l
            }).isPercentValue, E = (m = a("3rdparty/walkontable/src/calculator/viewportColumns"), 
            m && m.__esModule && m || {
                "default": m
            }).WalkontableViewportColumnsCalculator, F = function(a) {
                var b = this;
                $traceurRuntime.superConstructor(G).call(this, a), this.widths = [], this.ghostTable = new v(this.hot), 
                this.samplesGenerator = new C(function(a, c) {
                    return b.hot.getDataAtCell(a, c);
                }), this.firstCalculation = !0, this.inProgress = !1, this.addHook("beforeColumnResize", function(a, c, d) {
                    return b.onBeforeColumnResize(a, c, d);
                });
            }, G = F;
            $traceurRuntime.createClass(F, {
                isEnabled: function() {
                    return this.hot.getSettings().autoColumnSize !== !1 && !this.hot.getSettings().colWidths;
                },
                enablePlugin: function() {
                    var a = this;
                    this.enabled || (this.addHook("afterLoadData", function() {
                        return a.onAfterLoadData();
                    }), this.addHook("beforeChange", function(b) {
                        return a.onBeforeChange(b);
                    }), this.addHook("beforeRender", function(b) {
                        return a.onBeforeRender(b);
                    }), this.addHook("modifyColWidth", function(b, c) {
                        return a.getColumnWidth(c, b);
                    }), $traceurRuntime.superGet(this, G.prototype, "enablePlugin").call(this));
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, G.prototype, "disablePlugin").call(this);
                },
                calculateColumnsWidth: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : {
                        from: 0,
                        to: this.hot.countCols() - 1
                    }, b = void 0 !== arguments[1] ? arguments[1] : {
                        from: 0,
                        to: this.hot.countRows() - 1
                    }, c = void 0 !== arguments[2] ? arguments[2] : !1, d = this;
                    "number" == typeof a && (a = {
                        from: a,
                        to: a
                    }), "number" == typeof b && (b = {
                        from: b,
                        to: b
                    }), A(a.from, a.to, function(a) {
                        if (c || void 0 === d.widths[a] && !d.hot._getColWidthFromSettings(a)) {
                            var e = d.samplesGenerator.generateColumnSamples(a, b);
                            e.forEach(function(a, b) {
                                return d.ghostTable.addColumn(b, a);
                            });
                        }
                    }), this.ghostTable.columns.length && (this.ghostTable.getWidths(function(a, b) {
                        return d.widths[a] = b;
                    }), this.ghostTable.clean());
                },
                calculateAllColumnsWidth: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : {
                        from: 0,
                        to: this.hot.countRows() - 1
                    }, b = this, c = 0, d = this.hot.countCols() - 1, e = null;
                    this.inProgress = !0;
                    var f = function() {
                        return b.hot ? (b.calculateColumnsWidth({
                            from: c,
                            to: Math.min(c + G.CALCULATION_STEP, d)
                        }, a), c = c + G.CALCULATION_STEP + 1, void (d > c ? e = t(f) : (s(e), b.inProgress = !1, 
                        b.hot.view.wt.wtOverlays.adjustElementsSize(!0), b.hot.view.wt.wtOverlays.leftOverlay.needFullRender && b.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))) : (s(e), 
                        void (b.inProgress = !1));
                    };
                    this.firstCalculation && this.getSyncCalculationLimit() && (this.calculateColumnsWidth({
                        from: 0,
                        to: this.getSyncCalculationLimit()
                    }, a), this.firstCalculation = !1, c = this.getSyncCalculationLimit() + 1), d > c ? f() : this.inProgress = !1;
                },
                recalculateAllColumnsWidth: function() {
                    this.hot.view && u(this.hot.view.wt.wtTable.TABLE) && (this.clearCache(), this.calculateAllColumnsWidth());
                },
                getSyncCalculationLimit: function() {
                    var a = G.SYNC_CALCULATION_LIMIT, b = this.hot.countCols() - 1;
                    return x(this.hot.getSettings().autoColumnSize) && (a = this.hot.getSettings().autoColumnSize.syncLimit, 
                    D(a) ? a = z(b, a) : a >>= 0), Math.min(a, b);
                },
                getColumnWidth: function(a) {
                    var b = arguments[1], c = void 0 !== arguments[2] ? arguments[2] : !0, d = b;
                    return void 0 === d && (d = this.widths[a], c && "number" == typeof d && (d = Math.max(d, E.DEFAULT_WIDTH))), 
                    d;
                },
                getFirstVisibleColumn: function() {
                    var a = this.hot.view.wt;
                    return a.wtViewport.columnsVisibleCalculator ? a.wtTable.getFirstVisibleColumn() : a.wtViewport.columnsRenderCalculator ? a.wtTable.getFirstRenderedColumn() : -1;
                },
                getLastVisibleColumn: function() {
                    var a = this.hot.view.wt;
                    return a.wtViewport.columnsVisibleCalculator ? a.wtTable.getLastVisibleColumn() : a.wtViewport.columnsRenderCalculator ? a.wtTable.getLastRenderedColumn() : -1;
                },
                clearCache: function() {
                    this.widths.length = 0;
                },
                isNeedRecalculate: function() {
                    return !!q(this.widths, function(a) {
                        return void 0 === a;
                    }).length;
                },
                onBeforeRender: function() {
                    var a = this.hot.renderCall;
                    this.calculateColumnsWidth({
                        from: this.getFirstVisibleColumn(),
                        to: this.getLastVisibleColumn()
                    }, void 0, a), this.isNeedRecalculate() && !this.inProgress && this.calculateAllColumnsWidth();
                },
                onAfterLoadData: function() {
                    var a = this;
                    this.hot.view ? this.recalculateAllColumnsWidth() : setTimeout(function() {
                        a.hot && a.recalculateAllColumnsWidth();
                    }, 0);
                },
                onBeforeChange: function(a) {
                    var b = this;
                    p(a, function(a) {
                        return b.widths[a[1]] = void 0;
                    });
                },
                onBeforeColumnResize: function(a, b, c) {
                    return c && (this.calculateColumnsWidth(a, void 0, !0), b = this.getColumnWidth(a, void 0, !1)), 
                    b;
                },
                destroy: function() {
                    this.ghostTable.clean(), $traceurRuntime.superGet(this, G.prototype, "destroy").call(this);
                }
            }, {
                get CALCULATION_STEP() {
                    return 50;
                },
                get SYNC_CALCULATION_LIMIT() {
                    return 50;
                }
            }, n), B("autoColumnSize", F);
        }, {
            "3rdparty/walkontable/src/calculator/viewportColumns": 3,
            _base: 56,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/number": 48,
            "helpers/object": 49,
            "helpers/string": 51,
            plugins: 55,
            "utils/ghostTable": 96,
            "utils/samplesGenerator": 97
        } ],
        58: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                AutoRowSize: {
                    get: function() {
                        return C;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m = (d = a("_base"), d && d.__esModule && d || {
                "default": d
            })["default"], n = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }), o = (n.arrayEach, n.arrayFilter), p = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }), q = p.cancelAnimationFrame, r = p.requestAnimationFrame, s = p.isVisible, t = (g = a("utils/ghostTable"), 
            g && g.__esModule && g || {
                "default": g
            }).GhostTable, u = (h = a("helpers/object"), h && h.__esModule && h || {
                "default": h
            }), v = u.isObject, w = (u.objectEach, i = a("helpers/number"), i && i.__esModule && i || {
                "default": i
            }), x = w.valueAccordingPercent, y = w.rangeEach, z = (j = a("plugins"), j && j.__esModule && j || {
                "default": j
            }).registerPlugin, A = (k = a("utils/samplesGenerator"), k && k.__esModule && k || {
                "default": k
            }).SamplesGenerator, B = (l = a("helpers/string"), l && l.__esModule && l || {
                "default": l
            }).isPercentValue, C = function(a) {
                var b = this;
                $traceurRuntime.superConstructor(D).call(this, a), this.heights = [], this.ghostTable = new t(this.hot), 
                this.samplesGenerator = new A(function(a, c) {
                    return b.hot.getDataAtCell(a, c);
                }), this.firstCalculation = !0, this.inProgress = !1, this.addHook("beforeRowResize", function(a, c, d) {
                    return b.onBeforeRowResize(a, c, d);
                });
            }, D = C;
            $traceurRuntime.createClass(C, {
                isEnabled: function() {
                    return this.hot.getSettings().autoRowSize === !0 || v(this.hot.getSettings().autoRowSize);
                },
                enablePlugin: function() {
                    var a = this;
                    this.enabled || (this.addHook("afterLoadData", function() {
                        return a.onAfterLoadData();
                    }), this.addHook("beforeChange", function(b) {
                        return a.onBeforeChange(b);
                    }), this.addHook("beforeColumnMove", function() {
                        return a.recalculateAllRowsHeight();
                    }), this.addHook("beforeColumnResize", function() {
                        return a.recalculateAllRowsHeight();
                    }), this.addHook("beforeColumnSort", function() {
                        return a.clearCache();
                    }), this.addHook("beforeRender", function(b) {
                        return a.onBeforeRender(b);
                    }), this.addHook("beforeRowMove", function(b, c) {
                        return a.onBeforeRowMove(b, c);
                    }), this.addHook("modifyRowHeight", function(b, c) {
                        return a.getRowHeight(c, b);
                    }), $traceurRuntime.superGet(this, D.prototype, "enablePlugin").call(this));
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, D.prototype, "disablePlugin").call(this);
                },
                calculateRowsHeight: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : {
                        from: 0,
                        to: this.hot.countRows() - 1
                    }, b = void 0 !== arguments[1] ? arguments[1] : {
                        from: 0,
                        to: this.hot.countCols() - 1
                    }, c = void 0 !== arguments[2] ? arguments[2] : !1, d = this;
                    "number" == typeof a && (a = {
                        from: a,
                        to: a
                    }), "number" == typeof b && (b = {
                        from: b,
                        to: b
                    }), y(a.from, a.to, function(a) {
                        if (c || void 0 === d.heights[a]) {
                            var e = d.samplesGenerator.generateRowSamples(a, b);
                            e.forEach(function(a, b) {
                                return d.ghostTable.addRow(b, a);
                            });
                        }
                    }), this.ghostTable.rows.length && (this.ghostTable.getHeights(function(a, b) {
                        return d.heights[a] = b;
                    }), this.ghostTable.clean());
                },
                calculateAllRowsHeight: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : {
                        from: 0,
                        to: this.hot.countCols() - 1
                    }, b = this, c = 0, d = this.hot.countRows() - 1, e = null;
                    this.inProgress = !0;
                    var f = function() {
                        return b.hot ? (b.calculateRowsHeight({
                            from: c,
                            to: Math.min(c + D.CALCULATION_STEP, d)
                        }, a), c = c + D.CALCULATION_STEP + 1, void (d > c ? e = r(f) : (q(e), b.inProgress = !1, 
                        b.hot.view.wt.wtOverlays.adjustElementsSize(!0), b.hot.view.wt.wtOverlays.leftOverlay.needFullRender && b.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))) : (q(e), 
                        void (b.inProgress = !1));
                    };
                    this.firstCalculation && this.getSyncCalculationLimit() && (this.calculateRowsHeight({
                        from: 0,
                        to: this.getSyncCalculationLimit()
                    }, a), this.firstCalculation = !1, c = this.getSyncCalculationLimit() + 1), d > c ? f() : this.inProgress = !1;
                },
                recalculateAllRowsHeight: function() {
                    s(this.hot.view.wt.wtTable.TABLE) && (this.clearCache(), this.calculateAllRowsHeight());
                },
                getSyncCalculationLimit: function() {
                    var a = D.SYNC_CALCULATION_LIMIT, b = this.hot.countRows() - 1;
                    return v(this.hot.getSettings().autoRowSize) && (a = this.hot.getSettings().autoRowSize.syncLimit, 
                    B(a) ? a = x(b, a) : a >>= 0), Math.min(a, b);
                },
                getRowHeight: function(a) {
                    var b = arguments[1], c = b;
                    return void 0 !== this.heights[a] && this.heights[a] > (b || 0) && (c = this.heights[a]), 
                    c;
                },
                getFirstVisibleRow: function() {
                    var a = this.hot.view.wt;
                    return a.wtViewport.rowsVisibleCalculator ? a.wtTable.getFirstVisibleRow() : a.wtViewport.rowsRenderCalculator ? a.wtTable.getFirstRenderedRow() : -1;
                },
                getLastVisibleRow: function() {
                    var a = this.hot.view.wt;
                    return a.wtViewport.rowsVisibleCalculator ? a.wtTable.getLastVisibleRow() : a.wtViewport.rowsRenderCalculator ? a.wtTable.getLastRenderedRow() : -1;
                },
                clearCache: function() {
                    this.heights.length = 0;
                },
                clearCacheByRange: function(a) {
                    var b = this;
                    "number" == typeof a && (a = {
                        from: a,
                        to: a
                    }), y(Math.min(a.from, a.to), Math.max(a.from, a.to), function(a) {
                        return b.heights[a] = void 0;
                    });
                },
                isNeedRecalculate: function() {
                    return !!o(this.heights, function(a) {
                        return void 0 === a;
                    }).length;
                },
                onBeforeRender: function() {
                    var a = this.hot.renderCall;
                    this.calculateRowsHeight({
                        from: this.getFirstVisibleRow(),
                        to: this.getLastVisibleRow()
                    }, void 0, a), this.isNeedRecalculate() && !this.inProgress && this.calculateAllRowsHeight();
                },
                onBeforeRowMove: function(a, b) {
                    this.clearCacheByRange({
                        from: a,
                        to: b
                    }), this.calculateAllRowsHeight();
                },
                onBeforeRowResize: function(a, b, c) {
                    return c && (this.calculateRowsHeight(a, void 0, !0), b = this.getRowHeight(a)), 
                    b;
                },
                onAfterLoadData: function() {
                    var a = this;
                    this.hot.view ? this.recalculateAllRowsHeight() : setTimeout(function() {
                        a.hot && a.recalculateAllRowsHeight();
                    }, 0);
                },
                onBeforeChange: function(a) {
                    var b = null;
                    1 === a.length ? b = a[0][0] : a.length > 1 && (b = {
                        from: a[0][0],
                        to: a[a.length - 1][0]
                    }), null !== b && this.clearCacheByRange(b);
                },
                destroy: function() {
                    this.ghostTable.clean(), $traceurRuntime.superGet(this, D.prototype, "destroy").call(this);
                }
            }, {
                get CALCULATION_STEP() {
                    return 50;
                },
                get SYNC_CALCULATION_LIMIT() {
                    return 500;
                }
            }, m), z("autoRowSize", C);
        }, {
            _base: 56,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/number": 48,
            "helpers/object": 49,
            "helpers/string": 51,
            plugins: 55,
            "utils/ghostTable": 96,
            "utils/samplesGenerator": 97
        } ],
        59: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d) {
                var e, f, g, h, i, j = c.length, k = c ? c[0].length : 0, l = [], m = [];
                if (e = b.row - a.row, f = b.col - a.col, -1 !== [ "down", "up" ].indexOf(d)) {
                    for (var n = 0; f >= n; n++) g = parseInt(c[0][n], 10), h = parseInt(c[j - 1][n], 10), 
                    i = ("down" === d ? h - g : g - h) / (j - 1) || 0, m.push(i);
                    l.push(m);
                }
                if (-1 !== [ "right", "left" ].indexOf(d)) for (var o = 0; e >= o; o++) g = parseInt(c[o][0], 10), 
                h = parseInt(c[o][k - 1], 10), i = ("right" === d ? h - g : g - h) / (k - 1) || 0, 
                m = [], m.push(i), l.push(m);
                return l;
            }
            function e(a) {
                function b(b) {
                    return a.autofill ? void (a.autofill.handle && a.autofill.handle.isDragged && (a.autofill.handle.isDragged > 1 && a.autofill.apply(), 
                    a.autofill.handle.isDragged = 0, h = !1)) : !0;
                }
                function c(a) {
                    var b, c;
                    return g.instance.autofill ? (b = k(g.instance.table).top - (window.pageYOffset || document.documentElement.scrollTop) + l(g.instance.table), 
                    c = k(g.instance.table).left - (window.pageXOffset || document.documentElement.scrollLeft) + m(g.instance.table), 
                    g.addingStarted === !1 && g.instance.autofill.handle.isDragged > 0 && a.clientY > b && a.clientX <= c ? (g.instance.mouseDragOutside = !0, 
                    g.addingStarted = !0) : g.instance.mouseDragOutside = !1, void (g.instance.mouseDragOutside && setTimeout(function() {
                        g.addingStarted = !1, g.instance.alter("insert_row");
                    }, 200))) : !1;
                }
                var d, e, f, g = this, h = !1;
                this.instance = a, this.addingStarted = !1, f = n(a), f.addEventListener(document, "mouseup", b), 
                f.addEventListener(document, "mousemove", c), d = this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown, 
                this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown = function(b) {
                    a.autofill.handle.isDragged = 1, h = !0, d(b);
                }, e = this.instance.view.wt.wtSettings.settings.onCellMouseOver, this.instance.view.wt.wtSettings.settings.onCellMouseOver = function(b, c, d, f) {
                    a.autofill && h && !a.view.isMouseDown() && a.autofill.handle && a.autofill.handle.isDragged && (a.autofill.handle.isDragged++, 
                    a.autofill.showBorder(c), a.autofill.checkIfNewRowNeeded()), e(b, c, d, f);
                }, this.instance.view.wt.wtSettings.settings.onCellCornerDblClick = function() {
                    a.autofill.selectAdjacent();
                };
            }
            Object.defineProperties(c, {
                Autofill: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var f, g, h, i, j = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }), k = j.offset, l = j.outerHeight, m = j.outerWidth, n = (g = a("eventManager"), 
            g && g.__esModule && g || {
                "default": g
            }).eventManager, o = ((h = a("plugins"), h && h.__esModule && h || {
                "default": h
            }).registerPlugin, (i = a("3rdparty/walkontable/src/cell/coords"), i && i.__esModule && i || {
                "default": i
            }).WalkontableCellCoords);
            e.prototype.init = function() {
                this.handle = {};
            }, e.prototype.disable = function() {
                this.handle.disabled = !0;
            }, e.prototype.selectAdjacent = function() {
                var a, b, c, d, e;
                a = this.instance.selection.isMultiple() ? this.instance.view.wt.selections.area.getCorners() : this.instance.view.wt.selections.current.getCorners(), 
                b = this.instance.getData();
                a: for (c = a[2] + 1; c < this.instance.countRows(); c++) {
                    for (e = a[1]; e <= a[3]; e++) if (b[c][e]) break a;
                    (b[c][a[1] - 1] || b[c][a[3] + 1]) && (d = c);
                }
                d && (this.instance.view.wt.selections.fill.clear(), this.instance.view.wt.selections.fill.add(new o(a[0], a[1])), 
                this.instance.view.wt.selections.fill.add(new o(d, a[3])), this.apply());
            }, e.prototype.apply = function() {
                var a, b, c, e, f, g, h, i;
                this.handle.isDragged = 0, this.instance.view.wt.selections.fill.isEmpty() || (a = this.instance.view.wt.selections.fill.getCorners(), 
                this.instance.view.wt.selections.fill.clear(), b = this.instance.selection.isMultiple() ? this.instance.view.wt.selections.area.getCorners() : this.instance.view.wt.selections.current.getCorners(), 
                Handsontable.hooks.run(this.instance, "afterAutofillApplyValues", b, a), a[0] === b[0] && a[1] < b[1] ? (g = "left", 
                c = new o(a[0], a[1]), e = new o(a[2], b[1] - 1)) : a[0] === b[0] && a[3] > b[3] ? (g = "right", 
                c = new o(a[0], b[3] + 1), e = new o(a[2], a[3])) : a[0] < b[0] && a[1] === b[1] ? (g = "up", 
                c = new o(a[0], a[1]), e = new o(b[0] - 1, a[3])) : a[2] > b[2] && a[1] === b[1] && (g = "down", 
                c = new o(b[2] + 1, a[1]), e = new o(a[2], a[3])), c && c.row > -1 && c.col > -1 ? (i = {
                    from: this.instance.getSelectedRange().from,
                    to: this.instance.getSelectedRange().to
                }, f = this.instance.getData(i.from.row, i.from.col, i.to.row, i.to.col), h = d(c, e, f, g), 
                Handsontable.hooks.run(this.instance, "beforeAutofill", c, e, f), this.instance.populateFromArray(c.row, c.col, f, e.row, e.col, "autofill", null, g, h), 
                this.instance.selection.setRangeStart(new o(a[0], a[1])), this.instance.selection.setRangeEnd(new o(a[2], a[3]))) : this.instance.selection.refreshBorders());
            }, e.prototype.showBorder = function(a) {
                var b = this.instance.getSelectedRange().getTopLeftCorner(), c = this.instance.getSelectedRange().getBottomRightCorner();
                if ("horizontal" !== this.instance.getSettings().fillHandle && (c.row < a.row || b.row > a.row)) a = new o(a.row, c.col); else {
                    if ("vertical" === this.instance.getSettings().fillHandle) return;
                    a = new o(c.row, a.col);
                }
                this.instance.view.wt.selections.fill.clear(), this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from), 
                this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to), 
                this.instance.view.wt.selections.fill.add(a), this.instance.view.render();
            }, e.prototype.checkIfNewRowNeeded = function() {
                var a, b, c = this.instance.countRows(), d = this;
                this.instance.view.wt.selections.fill.cellRange && this.addingStarted === !1 && (b = this.instance.getSelected(), 
                a = this.instance.view.wt.selections.fill.getCorners(), b[2] < c - 1 && a[2] === c - 1 && (this.addingStarted = !0, 
                this.instance._registerTimeout(setTimeout(function() {
                    d.instance.alter("insert_row"), d.addingStarted = !1;
                }, 200))));
            }, Handsontable.hooks.add("afterInit", function() {
                var a = new e(this);
                "undefined" != typeof this.getSettings().fillHandle && (a.handle && this.getSettings().fillHandle === !1 ? a.disable() : a.handle || this.getSettings().fillHandle === !1 || (this.autofill = a, 
                this.autofill.init()));
            }), Handsontable.Autofill = e;
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            eventManager: 40,
            "helpers/dom/element": 44,
            plugins: 55
        } ],
        60: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                "default": {
                    get: function() {
                        return s;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), i = h.addClass, j = h.closest, k = h.hasClass, l = h.index, m = h.removeClass, n = (e = a("eventManager"), 
            e && e.__esModule && e || {
                "default": e
            }).eventManager, o = (f = a("_base"), f && f.__esModule && f || {
                "default": f
            })["default"], p = (g = a("plugins"), g && g.__esModule && g || {
                "default": g
            }).registerPlugin;
            Handsontable.hooks.register("beforeColumnSort"), Handsontable.hooks.register("afterColumnSort");
            var q = function(a) {
                $traceurRuntime.superConstructor(r).call(this, a), this.sortIndicators = [];
            }, r = q;
            $traceurRuntime.createClass(q, {
                isEnabled: function() {
                    return !!this.hot.getSettings().columnSorting;
                },
                enablePlugin: function() {
                    var a = this;
                    if (!this.enabled) {
                        var b = this;
                        this.hot.sortIndex = [], this.hot.sort = function() {
                            var a = Array.prototype.slice.call(arguments);
                            return b.sortByColumn.apply(b, a);
                        }, "undefined" == typeof this.hot.getSettings().observeChanges && this.enableObserveChangesPlugin(), 
                        this.bindColumnSortingAfterClick(), this.addHook("modifyRow", function(b) {
                            return a.translateRow(b);
                        }), this.addHook("afterUpdateSettings", function() {
                            return a.onAfterUpdateSettings();
                        }), this.addHook("afterGetColHeader", function(b, c) {
                            return a.getColHeader(b, c);
                        }), this.addHook("afterCreateRow", function() {
                            b.afterCreateRow.apply(b, arguments);
                        }), this.addHook("afterRemoveRow", function() {
                            b.afterRemoveRow.apply(b, arguments);
                        }), this.addHook("afterInit", function() {
                            return a.sortBySettings();
                        }), this.addHook("afterLoadData", function() {
                            a.hot.sortIndex = [], a.hot.view && a.sortBySettings();
                        }), this.hot.view && this.sortBySettings(), $traceurRuntime.superGet(this, r.prototype, "enablePlugin").call(this);
                    }
                },
                disablePlugin: function() {
                    this.hot.sort = void 0, $traceurRuntime.superGet(this, r.prototype, "disablePlugin").call(this);
                },
                onAfterUpdateSettings: function() {
                    this.sortBySettings();
                },
                sortBySettings: function() {
                    var a, b, c = this.hot.getSettings().columnSorting, d = this.loadSortingState();
                    "undefined" == typeof d ? (a = c.column, b = c.sortOrder) : (a = d.sortColumn, b = d.sortOrder), 
                    this.sortByColumn(a, b);
                },
                setSortingColumn: function(a, b) {
                    return "undefined" == typeof a ? (this.hot.sortColumn = void 0, void (this.hot.sortOrder = void 0)) : (this.hot.sortColumn === a && "undefined" == typeof b ? this.hot.sortOrder === !1 ? this.hot.sortOrder = void 0 : this.hot.sortOrder = !this.hot.sortOrder : this.hot.sortOrder = "undefined" == typeof b ? !0 : b, 
                    void (this.hot.sortColumn = a));
                },
                sortByColumn: function(a, b) {
                    this.setSortingColumn(a, b), "undefined" != typeof this.hot.sortColumn && (Handsontable.hooks.run(this.hot, "beforeColumnSort", this.hot.sortColumn, this.hot.sortOrder), 
                    this.sort(), this.hot.render(), this.saveSortingState(), Handsontable.hooks.run(this.hot, "afterColumnSort", this.hot.sortColumn, this.hot.sortOrder));
                },
                saveSortingState: function() {
                    var a = {};
                    "undefined" != typeof this.hot.sortColumn && (a.sortColumn = this.hot.sortColumn), 
                    "undefined" != typeof this.hot.sortOrder && (a.sortOrder = this.hot.sortOrder), 
                    (a.hasOwnProperty("sortColumn") || a.hasOwnProperty("sortOrder")) && Handsontable.hooks.run(this.hot, "persistentStateSave", "columnSorting", a);
                },
                loadSortingState: function() {
                    var a = {};
                    return Handsontable.hooks.run(this.hot, "persistentStateLoad", "columnSorting", a), 
                    a.value;
                },
                bindColumnSortingAfterClick: function() {
                    function a() {
                        var a = d.hot.view.TBODY.querySelector("tr").querySelectorAll("th");
                        return a.length;
                    }
                    function b(b) {
                        var c = j(b, "TH");
                        return d.hot.view.wt.wtTable.getFirstRenderedColumn() + l(c) - a();
                    }
                    if (!this.bindedSortEvent) {
                        var c = n(this.hot), d = this;
                        this.bindedSortEvent = !0, c.addEventListener(this.hot.rootElement, "click", function(a) {
                            if (k(a.target, "columnSorting")) {
                                var c = b(a.target);
                                if (c === this.lastSortedColumn) switch (d.hot.sortOrder) {
                                  case void 0:
                                    d.sortOrderClass = "ascending";
                                    break;

                                  case !0:
                                    d.sortOrderClass = "descending";
                                    break;

                                  case !1:
                                    d.sortOrderClass = void 0;
                                } else d.sortOrderClass = "ascending";
                                this.lastSortedColumn = c, d.sortByColumn(c);
                            }
                        });
                    }
                },
                enableObserveChangesPlugin: function() {
                    var a = this;
                    this.hot._registerTimeout(setTimeout(function() {
                        a.hot.updateSettings({
                            observeChanges: !0
                        });
                    }, 0));
                },
                defaultSort: function(a) {
                    return function(b, c) {
                        return "string" == typeof b[1] && (b[1] = b[1].toLowerCase()), "string" == typeof c[1] && (c[1] = c[1].toLowerCase()), 
                        b[1] === c[1] ? 0 : null === b[1] || "" === b[1] ? 1 : null === c[1] || "" === c[1] ? -1 : isNaN(b[1]) && !isNaN(c[1]) ? a ? 1 : -1 : !isNaN(b[1]) && isNaN(c[1]) ? a ? -1 : 1 : b[1] < c[1] ? a ? -1 : 1 : b[1] > c[1] ? a ? 1 : -1 : 0;
                    };
                },
                dateSort: function(a) {
                    return function(b, c) {
                        if (b[1] === c[1]) return 0;
                        if (null === b[1] || "" === b[1]) return 1;
                        if (null === c[1] || "" === c[1]) return -1;
                        var d = new Date(b[1]), e = new Date(c[1]);
                        return e > d ? a ? -1 : 1 : d > e ? a ? 1 : -1 : 0;
                    };
                },
                sort: function() {
                    if ("undefined" != typeof this.hot.sortOrder) {
                        var a, b;
                        this.hot.sortingEnabled = !1, this.hot.sortIndex.length = 0;
                        for (var c = this.hot.colOffset(), d = 0, e = this.hot.countRows() - this.hot.getSettings().minSpareRows; e > d; d++) this.hot.sortIndex.push([ d, this.hot.getDataAtCell(d, this.hot.sortColumn + c) ]);
                        switch (a = this.hot.getCellMeta(0, this.hot.sortColumn), this.sortIndicators[this.hot.sortColumn] = a.sortIndicator, 
                        a.type) {
                          case "date":
                            b = this.dateSort;
                            break;

                          default:
                            b = this.defaultSort;
                        }
                        this.hot.sortIndex.sort(b(this.hot.sortOrder));
                        for (var d = this.hot.sortIndex.length; d < this.hot.countRows(); d++) this.hot.sortIndex.push([ d, this.hot.getDataAtCell(d, this.hot.sortColumn + c) ]);
                        this.hot.sortingEnabled = !0;
                    }
                },
                translateRow: function(a) {
                    return this.hot.sortingEnabled && "undefined" != typeof this.hot.sortOrder && this.hot.sortIndex && this.hot.sortIndex.length && this.hot.sortIndex[a] ? this.hot.sortIndex[a][0] : a;
                },
                untranslateRow: function(a) {
                    if (this.hot.sortingEnabled && this.hot.sortIndex && this.hot.sortIndex.length) for (var b = 0; b < this.hot.sortIndex.length; b++) if (this.hot.sortIndex[b][0] == a) return b;
                },
                getColHeader: function(a, b) {
                    var c = b.querySelector(".colHeader"), d = (b.getAttribute("colspan"), b.parentNode.parentNode.childNodes), e = Array.prototype.indexOf.call(d, b.parentNode);
                    e -= d.length, c && (this.hot.getSettings().columnSorting && a >= 0 && -1 === e && i(c, "columnSorting"), 
                    m(c, "descending"), m(c, "ascending"), this.sortIndicators[a] && a === this.hot.sortColumn && ("ascending" === this.sortOrderClass ? i(c, "ascending") : "descending" === this.sortOrderClass && i(c, "descending")));
                },
                isSorted: function() {
                    return "undefined" != typeof this.hot.sortColumn;
                },
                afterCreateRow: function(a, b) {
                    if (this.isSorted()) {
                        for (var c = 0; c < this.hot.sortIndex.length; c++) this.hot.sortIndex[c][0] >= a && (this.hot.sortIndex[c][0] += b);
                        for (var c = 0; b > c; c++) this.hot.sortIndex.splice(a + c, 0, [ a + c, this.hot.getData()[a + c][this.hot.sortColumn + this.hot.colOffset()] ]);
                        this.saveSortingState();
                    }
                },
                afterRemoveRow: function(a, b) {
                    if (this.isSorted()) {
                        var c = this.translateRow(a);
                        this.hot.sortIndex.splice(a, b);
                        for (var d = 0; d < this.hot.sortIndex.length; d++) this.hot.sortIndex[d][0] > c && (this.hot.sortIndex[d][0] -= b);
                        this.saveSortingState();
                    }
                }
            }, {}, o);
            var s = q;
            p("columnSorting", q);
        }, {
            _base: 56,
            eventManager: 40,
            "helpers/dom/element": 44,
            plugins: 55
        } ],
        61: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                CommentEditor: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).addClass, f = function() {
                this.editor = this.createEditor(), this.editorStyle = this.editor.style, this.editorStyle.position = "absolute", 
                this.editorStyle.zIndex = 100, this.hide();
            }, g = f;
            $traceurRuntime.createClass(f, {
                setPosition: function(a, b) {
                    this.editorStyle.left = a + "px", this.editorStyle.top = b + "px";
                },
                show: function() {
                    this.editorStyle.display = "block";
                },
                hide: function() {
                    this.editorStyle.display = "none";
                },
                isVisible: function() {
                    return "block" === this.editorStyle.display;
                },
                setValue: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : "";
                    a = a || "", this.getInputElement().value = a;
                },
                getValue: function() {
                    return this.getInputElement().value;
                },
                isFocused: function() {
                    return document.activeElement === this.getInputElement();
                },
                focus: function() {
                    this.getInputElement().focus();
                },
                createEditor: function() {
                    var a, b, c = document.querySelector("." + g.CLASS_EDITOR_CONTAINER);
                    return c || (c = document.createElement("div"), e(c, g.CLASS_EDITOR_CONTAINER), 
                    document.body.appendChild(c)), a = document.createElement("div"), e(a, g.CLASS_EDITOR), 
                    b = document.createElement("textarea"), e(b, g.CLASS_INPUT), a.appendChild(b), c.appendChild(a), 
                    a;
                },
                getInputElement: function() {
                    return this.editor.querySelector("." + g.CLASS_INPUT);
                },
                destroy: function() {
                    this.editor.parentNode.removeChild(this.editor), this.editor = null, this.editorStyle = null;
                }
            }, {
                get CLASS_EDITOR_CONTAINER() {
                    return "htCommentsContainer";
                },
                get CLASS_EDITOR() {
                    return "htComments";
                },
                get CLASS_INPUT() {
                    return "htCommentTextArea";
                },
                get CLASS_CELL() {
                    return "htCommentCell";
                }
            });
        }, {
            "helpers/dom/element": 44
        } ],
        62: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                Comments: {
                    get: function() {
                        return w;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), k = j.addClass, l = j.closest, m = j.getWindowScrollLeft, n = j.getWindowScrollTop, o = j.hasClass, p = j.offset, q = (e = a("eventManager"), 
            e && e.__esModule && e || {
                "default": e
            }).EventManager, r = (f = a("3rdparty/walkontable/src/cell/coords"), f && f.__esModule && f || {
                "default": f
            }).WalkontableCellCoords, s = (g = a("plugins"), g && g.__esModule && g || {
                "default": g
            }), t = s.registerPlugin, u = (s.getPlugin, (h = a("_base"), h && h.__esModule && h || {
                "default": h
            })["default"]), v = (i = a("commentEditor"), i && i.__esModule && i || {
                "default": i
            }).CommentEditor, w = function(a) {
                $traceurRuntime.superConstructor(x).call(this, a), this.editor = null, this.eventManager = null, 
                this.range = {}, this.mouseDown = !1, this.contextMenuEvent = !1, this.timer = null;
            }, x = w;
            $traceurRuntime.createClass(w, {
                isEnabled: function() {
                    return this.hot.getSettings().comments;
                },
                enablePlugin: function() {
                    var a = this;
                    this.enabled || (this.editor || (this.editor = new v()), this.eventManager || (this.eventManager = new q(this)), 
                    this.addHook("afterContextMenuDefaultOptions", function(b) {
                        return a.addToContextMenu(b);
                    }), this.addHook("afterRenderer", function(b, c, d, e, f, g) {
                        return a.onAfterRenderer(b, g);
                    }), this.addHook("afterScrollVertically", function() {
                        return a.refreshEditorPosition();
                    }), this.addHook("afterColumnResize", function() {
                        return a.refreshEditorPosition();
                    }), this.addHook("afterRowResize", function() {
                        return a.refreshEditorPosition();
                    }), this.registerListeners(), $traceurRuntime.superGet(this, x.prototype, "enablePlugin").call(this));
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, x.prototype, "disablePlugin").call(this);
                },
                registerListeners: function() {
                    var a = this;
                    this.eventManager.addEventListener(document, "mouseover", function(b) {
                        return a.onMouseOver(b);
                    }), this.eventManager.addEventListener(document, "mousedown", function(b) {
                        return a.onMouseDown(b);
                    }), this.eventManager.addEventListener(document, "mousemove", function(b) {
                        return a.onMouseMove(b);
                    }), this.eventManager.addEventListener(document, "mouseup", function(b) {
                        return a.onMouseUp(b);
                    }), this.eventManager.addEventListener(this.editor.getInputElement(), "blur", function(b) {
                        return a.onEditorBlur(b);
                    });
                },
                setRange: function(a) {
                    this.range = a;
                },
                clearRange: function() {
                    this.range = {};
                },
                targetIsCellWithComment: function(a) {
                    return !(!o(a.target, "htCommentCell") || !l(a.target, [ this.hot.rootElement ]));
                },
                targetIsCommentTextArea: function(a) {
                    return this.editor.getInputElement() === a.target;
                },
                saveComment: function() {
                    if (!this.range.from) throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');
                    var a = this.editor.getValue(), b = this.range.from.row, c = this.range.from.col;
                    this.hot.setCellMeta(b, c, "comment", a), this.hot.render();
                },
                saveCommentAtCell: function(a, b) {
                    this.setRange({
                        from: new r(a, b)
                    }), this.saveComment();
                },
                removeComment: function() {
                    if (!this.range.from) throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');
                    this.hot.removeCellMeta(this.range.from.row, this.range.from.col, "comment"), this.hot.render(), 
                    this.hide();
                },
                removeCommentAtCell: function(a, b) {
                    this.setRange({
                        from: new r(a, b)
                    }), this.removeComment();
                },
                show: function() {
                    if (!this.range.from) throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');
                    var a = this.hot.getCellMeta(this.range.from.row, this.range.from.col);
                    return this.refreshEditorPosition(!0), this.editor.setValue(a.comment || ""), this.editor.show(), 
                    !0;
                },
                showAtCell: function(a, b) {
                    return this.setRange({
                        from: new r(a, b)
                    }), this.show();
                },
                hide: function() {
                    this.editor.hide();
                },
                refreshEditorPosition: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    if (a || this.range.from && this.editor.isVisible()) {
                        var b = this.hot.view.wt.wtTable.getCell(this.range.from), c = p(b), d = this.hot.getColWidth(this.range.from.col), e = c.top, f = c.left, g = 0, h = 0;
                        this.hot.view.wt.wtViewport.hasVerticalScroll() && (e -= this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition(), 
                        g = 20), this.hot.view.wt.wtViewport.hasHorizontalScroll() && (f -= this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition(), 
                        h = 20);
                        var i = f + d, j = e, k = this.hot.view.wt.wtTable.holder.getBoundingClientRect(), l = {
                            left: k.left + m() + h,
                            right: k.right + m() - 15,
                            top: k.top + n() + g,
                            bottom: k.bottom + n()
                        };
                        i <= l.left || i > l.right || j <= l.top || j > l.bottom ? this.hide() : this.editor.setPosition(i, j);
                    }
                },
                onMouseDown: function(a) {
                    this.mouseDown = !0, this.hot.view && this.hot.view.wt && (this.contextMenuEvent || this.targetIsCommentTextArea(a) || this.targetIsCellWithComment(a) || this.hide(), 
                    this.contextMenuEvent = !1);
                },
                onMouseOver: function(a) {
                    if (!this.mouseDown && !this.editor.isFocused()) if (this.targetIsCellWithComment(a)) {
                        var b = this.hot.view.wt.wtTable.getCoords(a.target), c = {
                            from: new r(b.row, b.col)
                        };
                        this.setRange(c), this.show();
                    } else this.targetIsCommentTextArea(a) || this.editor.isFocused() || this.hide();
                },
                onMouseMove: function(a) {
                    var b = this;
                    this.targetIsCommentTextArea(a) && (this.mouseDown = !0, clearTimeout(this.timer), 
                    this.timer = setTimeout(function() {
                        b.mouseDown = !1;
                    }, 200));
                },
                onMouseUp: function(a) {
                    this.mouseDown = !1;
                },
                onAfterRenderer: function(a, b) {
                    b.comment && k(a, b.commentedCellClassName);
                },
                onEditorBlur: function(a) {
                    this.saveComment();
                },
                checkSelectionCommentsConsistency: function() {
                    var a = this.hot.getSelectedRange();
                    if (!a) return !1;
                    var b = !1, c = a.from;
                    return this.hot.getCellMeta(c.row, c.col).comment && (b = !0), b;
                },
                onContextMenuAddComment: function() {
                    var a = this, b = this.hot.getSelectedRange();
                    this.contextMenuEvent = !0, this.setRange({
                        from: b.from
                    }), this.show(), setTimeout(function() {
                        a.hot && (a.hot.deselectCell(), a.editor.focus());
                    }, 10);
                },
                onContextMenuRemoveComment: function(a, b) {
                    this.contextMenuEvent = !0, this.removeCommentAtCell(b.start.row, b.start.col);
                },
                addToContextMenu: function(a) {
                    var b = this;
                    a.items.push(Handsontable.plugins.ContextMenu.SEPARATOR, {
                        key: "commentsAddEdit",
                        name: function() {
                            return b.checkSelectionCommentsConsistency() ? "Edit Comment" : "Add Comment";
                        },
                        callback: function() {
                            return b.onContextMenuAddComment();
                        },
                        disabled: function() {
                            return !this.getSelected();
                        }
                    }, {
                        key: "commentsRemove",
                        name: function() {
                            return "Delete Comment";
                        },
                        callback: function(a, c) {
                            return b.onContextMenuRemoveComment(a, c);
                        },
                        disabled: function() {
                            return !b.checkSelectionCommentsConsistency();
                        }
                    });
                },
                destroy: function() {
                    this.editor && this.editor.destroy(), $traceurRuntime.superGet(this, x.prototype, "destroy").call(this);
                }
            }, {}, u), t("comments", w);
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            _base: 56,
            commentEditor: 61,
            eventManager: 40,
            "helpers/dom/element": 44,
            plugins: 55
        } ],
        63: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                var c;
                return f(b, function(b) {
                    var d = b.key ? b.key.split(":") : null;
                    return Array.isArray(d) && d[1] === a ? (c = b, !1) : void 0;
                }), c;
            }
            Object.defineProperties(c, {
                CommandExecutor: {
                    get: function() {
                        return g;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }).arrayEach, g = function(a) {
                this.hot = a, this.commands = {}, this.commonCallback = null;
            };
            $traceurRuntime.createClass(g, {
                registerCommand: function(a, b) {
                    this.commands[a] = b;
                },
                setCommonCallback: function(a) {
                    this.commonCallback = a;
                },
                execute: function(a) {
                    for (var b = [], c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];
                    var e = this, g = a.split(":");
                    a = g[0];
                    var h = 2 === g.length ? g[1] : null, i = this.commands[a];
                    if (!i) throw new Error("Menu command '" + a + "' not exists.");
                    if (h && i.submenu && (i = d(h, i.submenu.items)), i.disabled !== !0 && ("function" != typeof i.disabled || i.disabled.call(this.hot) !== !0) && !i.hasOwnProperty("submenu")) {
                        var j = [];
                        "function" == typeof i.callback && j.push(i.callback), "function" == typeof this.commonCallback && j.push(this.commonCallback), 
                        b.unshift(g.join(":")), f(j, function(a) {
                            return a.apply(e.hot, b);
                        });
                    }
                }
            }, {});
        }, {
            "helpers/array": 41
        } ],
        64: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                ContextMenu: {
                    get: function() {
                        return K;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m, n, o = (d = a("_base"), d && d.__esModule && d || {
                "default": d
            })["default"], p = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }).arrayEach, q = (f = a("commandExecutor"), f && f.__esModule && f || {
                "default": f
            }).CommandExecutor, r = (g = a("eventManager"), g && g.__esModule && g || {
                "default": g
            }).EventManager, s = (h = a("helpers/dom/element"), h && h.__esModule && h || {
                "default": h
            }).hasClass, t = (i = a("itemsFactory"), i && i.__esModule && i || {
                "default": i
            }).ItemsFactory, u = (j = a("menu"), j && j.__esModule && j || {
                "default": j
            }).Menu, v = (k = a("helpers/object"), k && k.__esModule && k || {
                "default": k
            }), w = (v.objectEach, v.mixin, (l = a("plugins"), l && l.__esModule && l || {
                "default": l
            }).registerPlugin), x = (m = a("helpers/dom/event"), m && m.__esModule && m || {
                "default": m
            }).stopPropagation, y = (n = a("predefinedItems"), n && n.__esModule && n || {
                "default": n
            }), z = y.ROW_ABOVE, A = y.ROW_BELOW, B = y.COLUMN_LEFT, C = y.COLUMN_RIGHT, D = y.REMOVE_ROW, E = y.REMOVE_COLUMN, F = y.UNDO, G = y.REDO, H = y.READ_ONLY, I = y.ALIGNMENT, J = y.SEPARATOR, K = (y.predefinedItems, 
            function(a) {
                $traceurRuntime.superConstructor(L).call(this, a), this.eventManager = new r(this), 
                this.commandExecutor = new q(this.hot), this.itemsFactory = null, this.menu = null;
            }), L = K;
            $traceurRuntime.createClass(K, {
                isEnabled: function() {
                    return this.hot.getSettings().contextMenu;
                },
                enablePlugin: function() {
                    var a = this;
                    if (!this.enabled) {
                        this.itemsFactory = new t(this.hot, L.DEFAULT_ITEMS);
                        var b = this.hot.getSettings().contextMenu, c = {
                            items: this.itemsFactory.getVisibleItems(b)
                        };
                        this.registerEvents(), "function" == typeof b.callback && this.commandExecutor.setCommonCallback(b.callback), 
                        $traceurRuntime.superGet(this, L.prototype, "enablePlugin").call(this), this.callOnPluginsReady(function() {
                            a.hot.runHooks("afterContextMenuDefaultOptions", c), a.itemsFactory.setPredefinedItems(c.items);
                            var d = a.itemsFactory.getVisibleItems(b);
                            a.menu = new u(a.hot, {
                                className: "htContextMenu"
                            }), a.menu.setMenuItems(d), a.menu.addLocalHook("afterOpen", function() {
                                return a.hot.runHooks("afterContextMenuShow", a);
                            }), a.menu.addLocalHook("afterClose", function() {
                                return a.hot.runHooks("afterContextMenuHide", a);
                            }), a.menu.addLocalHook("executeCommand", function() {
                                for (var b = [], c = 0; c < arguments.length; c++) b[c] = arguments[c];
                                return a.executeCommand.apply(a, b);
                            }), p(d, function(b) {
                                return a.commandExecutor.registerCommand(b.key, b);
                            });
                        });
                    }
                },
                disablePlugin: function() {
                    this.close(), this.menu && (this.menu.destroy(), this.menu = null), $traceurRuntime.superGet(this, L.prototype, "disablePlugin").call(this);
                },
                registerEvents: function() {
                    var a = this;
                    this.eventManager.addEventListener(this.hot.rootElement, "contextmenu", function(b) {
                        return a.onContextMenu(b);
                    });
                },
                open: function(a) {
                    this.menu && (this.menu.open(), this.menu.setPosition(a), this.menu.hotMenu.isHotTableEnv = this.hot.isHotTableEnv, 
                    Handsontable.eventManager.isHotTableEnv = this.hot.isHotTableEnv);
                },
                close: function() {
                    this.menu && this.menu.close();
                },
                executeCommand: function() {
                    for (var a = [], b = 0; b < arguments.length; b++) a[b] = arguments[b];
                    this.commandExecutor.execute.apply(this.commandExecutor, a);
                },
                destroy: function() {
                    this.close(), this.menu && this.menu.destroy(), $traceurRuntime.superGet(this, L.prototype, "destroy").call(this);
                },
                onContextMenu: function(a) {
                    function b(a) {
                        return "TD" === a.nodeName || "TD" === a.parentNode.nodeName;
                    }
                    var c = this.hot.getSettings(), d = c.rowHeaders, e = c.colHeaders, f = a.realTarget;
                    if (this.close(), a.preventDefault(), x(a), d || e) {
                        if (d && e) {
                            var g = f.parentNode.querySelectorAll(".cornerHeader").length > 0;
                            if (g) return;
                        }
                    } else if (!(b(f) || s(f, "current") && s(f, "wtBorder"))) return;
                    this.open(a);
                }
            }, {
                get DEFAULT_ITEMS() {
                    return [ z, A, J, B, C, J, D, E, J, F, G, J, H, J, I ];
                }
            }, o), K.SEPARATOR = {
                name: J
            }, Handsontable.hooks.register("afterContextMenuDefaultOptions"), Handsontable.hooks.register("afterContextMenuShow"), 
            Handsontable.hooks.register("afterContextMenuHide"), Handsontable.hooks.register("afterContextMenuExecute"), 
            w("contextMenu", K);
        }, {
            _base: 56,
            commandExecutor: 63,
            eventManager: 40,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/object": 49,
            itemsFactory: 66,
            menu: 67,
            plugins: 55,
            predefinedItems: 68
        } ],
        65: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                Cursor: {
                    get: function() {
                        return l;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), g = f.getWindowScrollLeft, h = f.getWindowScrollTop, i = (e = a("helpers/dom/event"), 
            e && e.__esModule && e || {
                "default": e
            }), j = i.pageX, k = i.pageY, l = function(a) {
                var b, c, d, e, f, i, l, m, n = h(), o = g();
                this.type = this.getSourceType(a), "literal" === this.type ? (b = parseInt(a.top, 10), 
                d = parseInt(a.left, 10), l = a.height, m = a.width) : "event" === this.type && (b = parseInt(k(a), 10), 
                d = parseInt(j(a), 10), l = a.target.clientHeight, m = a.target.clientWidth), c = b - n, 
                e = d - o, f = n, i = o, this.top = b, this.topRelative = c, this.left = d, this.leftRelative = e, 
                this.scrollTop = f, this.scrollLeft = i, this.cellHeight = l, this.cellWidth = m;
            };
            $traceurRuntime.createClass(l, {
                getSourceType: function(a) {
                    var b = "literal";
                    return a instanceof Event && (b = "event"), b;
                },
                fitsAbove: function(a) {
                    return this.topRelative >= a.offsetHeight;
                },
                fitsBelow: function(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : window.innerHeight;
                    return this.topRelative + a.offsetHeight <= b;
                },
                fitsOnRight: function(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : window.innerWidth;
                    return this.leftRelative + this.cellWidth + a.offsetWidth <= b;
                },
                fitsOnLeft: function(a) {
                    return this.leftRelative >= a.offsetWidth;
                }
            }, {}), Handsontable.plugins.utils = Handsontable.plugins.utils || {}, Handsontable.plugins.utils.Cursor = l;
        }, {
            "helpers/dom/element": 44,
            "helpers/dom/event": 45
        } ],
        66: [ function(a, b, c) {
            "use strict";
            function d() {
                var a = void 0 !== arguments[0] ? arguments[0] : null, b = void 0 !== arguments[1] ? arguments[1] : [], c = void 0 !== arguments[2] ? arguments[2] : {}, d = [];
                return a && a.items ? a = a.items : Array.isArray(a) || (a = b), j(a) ? i(a, function(a, b) {
                    var e = c["string" == typeof a ? a : b];
                    e || (e = a), j(a) ? k(e, a) : "string" == typeof e && (e = {
                        name: e
                    }), void 0 === e.key && (e.key = b), d.push(e);
                }) : l(a, function(a, b) {
                    var e = c[a];
                    !e && o.indexOf(a) >= 0 || (e || (e = {
                        name: a,
                        key: b + ""
                    }), j(a) && k(e, a), void 0 === e.key && (e.key = b), d.push(e));
                }), d[0].name === n && d.shift(), d;
            }
            Object.defineProperties(c, {
                ItemsFactory: {
                    get: function() {
                        return q;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h = (e = a("helpers/object"), e && e.__esModule && e || {
                "default": e
            }), i = h.objectEach, j = h.isObject, k = h.extend, l = (f = a("helpers/array"), 
            f && f.__esModule && f || {
                "default": f
            }).arrayEach, m = (g = a("predefinedItems"), g && g.__esModule && g || {
                "default": g
            }), n = m.SEPARATOR, o = m.ITEMS, p = m.predefinedItems, q = function(a) {
                var b = void 0 !== arguments[1] ? arguments[1] : null;
                this.hot = a, this.predefinedItems = p(), this.defaultOrderPattern = b;
            };
            $traceurRuntime.createClass(q, {
                setPredefinedItems: function(a) {
                    var b = this, c = {};
                    this.defaultOrderPattern.length = 0, i(a, function(a, d) {
                        var e = "";
                        a.name === n ? (c[n] = a, e = n) : isNaN(parseInt(d, 10)) ? (a.key = void 0 === a.key ? d : a.key, 
                        c[d] = a, e = a.key) : (c[a.key] = a, e = a.key), b.defaultOrderPattern.push(e);
                    }), this.predefinedItems = c;
                },
                getVisibleItems: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null, b = this, c = {};
                    return i(this.predefinedItems, function(a, d) {
                        (!a.hidden || a.hidden && !a.hidden.apply(b.hot)) && (c[d] = a);
                    }), d(a, this.defaultOrderPattern, c);
                },
                getItems: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    return d(a, this.defaultOrderPattern, this.predefinedItems);
                }
            }, {});
        }, {
            "helpers/array": 41,
            "helpers/object": 49,
            predefinedItems: 68
        } ],
        67: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                Menu: {
                    get: function() {
                        return L;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j, k, l, m, n = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), o = n.addClass, p = n.empty, q = n.fastInnerHTML, r = (n.getComputedStyle, n.getScrollbarWidth), s = (n.getWindowScrollLeft, 
            n.getWindowScrollTop, n.hasClass, n.isChildOf), t = n.removeClass, u = (e = a("helpers/array"), 
            e && e.__esModule && e || {
                "default": e
            }).arrayEach, v = (f = a("cursor"), f && f.__esModule && f || {
                "default": f
            }).Cursor, w = (g = a("eventManager"), g && g.__esModule && g || {
                "default": g
            }).EventManager, x = (h = a("helpers/object"), h && h.__esModule && h || {
                "default": h
            }), y = (x.extend, x.isObject, x.objectEach, x.mixin), z = (i = a("utils"), i && i.__esModule && i || {
                "default": i
            }), A = z.isSeparator, B = z.isDisabled, C = z.isSelectionDisabled, D = z.hasSubMenu, E = z.normalizeSelection, F = (j = a("helpers/unicode"), 
            j && j.__esModule && j || {
                "default": j
            }).KEY_CODES, G = (k = a("pluginHooks"), k && k.__esModule && k || {
                "default": k
            }).localHooks, H = (l = a("predefinedItems"), l && l.__esModule && l || {
                "default": l
            }), I = H.SEPARATOR, J = (H.predefinedItems, m = a("helpers/dom/event"), m && m.__esModule && m || {
                "default": m
            }), K = (J.stopPropagation, J.stopImmediatePropagation), L = (J.pageX, J.pageY, 
            function(a) {
                var b = void 0 !== arguments[1] ? arguments[1] : {
                    parent: null,
                    name: null,
                    className: "",
                    keepInViewport: !0
                };
                this.hot = a, this.options = b, this.eventManager = new w(this), this.container = this.createContainer(this.options.name), 
                this.hotMenu = null, this.hotSubMenus = {}, this.parentMenu = this.options.parent || null, 
                this.menuItems = null, this.origOutsideClickDeselects = null, this._afterScrollCallback = null, 
                this.registerEvents();
            }), M = L;
            $traceurRuntime.createClass(L, {
                registerEvents: function() {
                    var a = this;
                    this.eventManager.addEventListener(document.documentElement, "mousedown", function(b) {
                        return a.onDocumentMouseDown(b);
                    });
                },
                setMenuItems: function(a) {
                    this.menuItems = a;
                },
                isSubMenu: function() {
                    return null !== this.parentMenu;
                },
                open: function() {
                    var a = this;
                    this.container.removeAttribute("style"), this.container.style.display = "block";
                    var b = {
                        data: this.menuItems,
                        colHeaders: !1,
                        colWidths: [ 200 ],
                        autoRowSize: !1,
                        readOnly: !0,
                        copyPaste: !1,
                        columns: [ {
                            data: "name",
                            renderer: function(b, c, d, e, f, g) {
                                return a.menuItemRenderer(b, c, d, e, f, g);
                            }
                        } ],
                        renderAllRows: !0,
                        beforeKeyDown: function(b) {
                            return a.onBeforeKeyDown(b);
                        },
                        afterOnCellMouseOver: function(b, c, d) {
                            return a.openSubMenu(c.row);
                        }
                    };
                    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects, this.hot.getSettings().outsideClickDeselects = !1, 
                    this.hotMenu = new Handsontable.Core(this.container, b), this.hotMenu.addHook("afterInit", function() {
                        return a.onAfterInit();
                    }), this.hotMenu.init(), this.hotMenu.listen(), this.blockMainTableCallbacks(), 
                    this.runLocalHooks("afterOpen");
                },
                close: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : !1;
                    this.isOpened() && (a && this.parentMenu ? this.parentMenu.close() : (this.closeAllSubMenus(), 
                    this.container.style.display = "none", this.releaseMainTableCallbacks(), this.hotMenu.destroy(), 
                    this.hotMenu = null, this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects, 
                    this.hot.listen(), this.runLocalHooks("afterClose")));
                },
                openSubMenu: function(a) {
                    var b = this.hotMenu.getCell(a, 0);
                    if (this.closeAllSubMenus(), !b || !D(b)) return !1;
                    var c = this.hotMenu.getData()[a], d = new M(this.hot, {
                        parent: this,
                        name: c.name,
                        className: this.options.className
                    });
                    return d.setMenuItems(c.submenu.items), d.open(), d.setPosition(b.getBoundingClientRect()), 
                    this.hotSubMenus[c.key] = d, d;
                },
                closeSubMenu: function(a) {
                    var b = this.hotMenu.getData()[a], c = this.hotSubMenus[b.key];
                    c && (c.destroy(), delete this.hotSubMenus[b.key]);
                },
                closeAllSubMenus: function() {
                    var a = this;
                    u(this.hotMenu.getData(), function(b, c) {
                        return a.closeSubMenu(c);
                    });
                },
                isAllSubMenusClosed: function() {
                    return 0 === Object.keys(this.hotSubMenus).length;
                },
                destroy: function() {
                    this.clearLocalHooks(), this.close(), this.parentMenu = null, this.eventManager.destroy();
                },
                isOpened: function() {
                    return null !== this.hotMenu;
                },
                executeCommand: function() {
                    var a = arguments[0];
                    if (this.isOpened() && this.hotMenu.getSelected()) {
                        var b = this.hotMenu.getData()[this.hotMenu.getSelected()[0]];
                        if (this.runLocalHooks("select", b, a), b.isCommand !== !1) {
                            var c = this.hot.getSelectedRange(), d = c ? E(c) : {};
                            this.runLocalHooks("executeCommand", b.key, d, a), this.isSubMenu() && this.parentMenu.runLocalHooks("executeCommand", b.key, d, a), 
                            this.close(!0);
                        }
                    }
                },
                setPosition: function(a) {
                    var b = new v(a);
                    this.options.keepInViewport ? (b.fitsBelow(this.container) ? this.setPositionBelowCursor(b) : b.fitsAbove(this.container) ? this.setPositionAboveCursor(b) : this.setPositionBelowCursor(b), 
                    b.fitsOnRight(this.container) ? this.setPositionOnRightOfCursor(b) : this.setPositionOnLeftOfCursor(b)) : (this.setPositionBelowCursor(b), 
                    this.setPositionOnRightOfCursor(b));
                },
                setPositionAboveCursor: function(a) {
                    var b = a.top - this.container.offsetHeight;
                    this.isSubMenu() && (b = window.scrollY + a.top + a.cellHeight - this.container.offsetHeight + 3), 
                    this.container.style.top = b + "px";
                },
                setPositionBelowCursor: function(a) {
                    var b = a.top - 1;
                    this.isSubMenu() && (b = a.top + window.scrollY - 1), this.container.style.top = b + "px";
                },
                setPositionOnRightOfCursor: function(a) {
                    var b;
                    b = this.isSubMenu() ? window.scrollX + 1 + a.left + a.cellWidth : 1 + a.left, this.container.style.left = b + "px";
                },
                setPositionOnLeftOfCursor: function(a) {
                    this.container.style.left = a.left - this.container.offsetWidth + r() + 4 + "px";
                },
                selectFirstCell: function() {
                    var a = this.hotMenu.getCell(0, 0);
                    A(a) || B(a) || C(a) ? this.selectNextCell(0, 0) : this.hotMenu.selectCell(0, 0);
                },
                selectLastCell: function() {
                    var a = this.hotMenu.countRows() - 1, b = this.hotMenu.getCell(a, 0);
                    A(b) || B(b) || C(b) ? this.selectPrevCell(a, 0) : this.hotMenu.selectCell(a, 0);
                },
                selectNextCell: function(a, b) {
                    var c = a + 1, d = c < this.hotMenu.countRows() ? this.hotMenu.getCell(c, b) : null;
                    d && (A(d) || B(d) || C(d) ? this.selectNextCell(c, b) : this.hotMenu.selectCell(c, b));
                },
                selectPrevCell: function(a, b) {
                    var c = a - 1, d = c >= 0 ? this.hotMenu.getCell(c, b) : null;
                    d && (A(d) || B(d) || C(d) ? this.selectPrevCell(c, b) : this.hotMenu.selectCell(c, b));
                },
                menuItemRenderer: function(a, b, c, d, e, f) {
                    var g = this, h = a.getData()[c], i = document.createElement("div"), j = function(a) {
                        return a.hasOwnProperty("submenu");
                    }, k = function(a) {
                        return new RegExp(I, "i").test(a.name);
                    }, l = function(a) {
                        return a.disabled === !0 || "function" == typeof a.disabled && a.disabled.call(g.hot) === !0;
                    }, m = function(a) {
                        return a.disableSelection;
                    };
                    "function" == typeof f && (f = f.call(this.hot)), p(b), o(i, "htItemWrapper"), b.appendChild(i), 
                    k(h) ? o(b, "htSeparator") : "function" == typeof h.renderer ? (o(b, "htCustomMenuRenderer"), 
                    b.appendChild(h.renderer(a, i, c, d, e, f))) : q(i, f), l(h) ? (o(b, "htDisabled"), 
                    this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.deselectCell();
                    })) : m(h) ? (o(b, "htSelectionDisabled"), this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.deselectCell();
                    })) : j(h) ? (o(b, "htSubmenu"), m(h) ? this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.deselectCell();
                    }) : this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.selectCell(c, d);
                    })) : (t(b, "htSubmenu"), t(b, "htDisabled"), m(h) ? this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.deselectCell();
                    }) : this.eventManager.addEventListener(i, "mouseenter", function() {
                        return a.selectCell(c, d);
                    }));
                },
                createContainer: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    a && (a = a.replace(/ /g, "_"), a = this.options.className + "Sub_" + a);
                    var b;
                    return b = a ? document.querySelector("." + this.options.className + "." + a) : document.querySelector("." + this.options.className), 
                    b || (b = document.createElement("div"), o(b, "htMenu " + this.options.className), 
                    a && o(b, a), document.getElementsByTagName("body")[0].appendChild(b)), b;
                },
                blockMainTableCallbacks: function() {
                    this._afterScrollCallback = function() {}, this.hot.addHook("afterScrollVertically", this._afterScrollCallback), 
                    this.hot.addHook("afterScrollHorizontally", this._afterScrollCallback);
                },
                releaseMainTableCallbacks: function() {
                    this._afterScrollCallback && (this.hot.removeHook("afterScrollVertically", this._afterScrollCallback), 
                    this.hot.removeHook("afterScrollHorizontally", this._afterScrollCallback), this._afterScrollCallback = null);
                },
                onBeforeKeyDown: function(a) {
                    var b = this.hotMenu.getSelected(), c = !1;
                    switch (a.keyCode) {
                      case F.ESCAPE:
                        this.close(), c = !0;
                        break;

                      case F.ENTER:
                        b && (this.hotMenu.getData()[b[0]].submenu ? c = !0 : (this.executeCommand(a), this.close(!0)));
                        break;

                      case F.ARROW_DOWN:
                        b ? this.selectNextCell(b[0], b[1]) : this.selectFirstCell(), c = !0;
                        break;

                      case F.ARROW_UP:
                        b ? this.selectPrevCell(b[0], b[1]) : this.selectLastCell(), c = !0;
                        break;

                      case F.ARROW_RIGHT:
                        if (b) {
                            var d = this.openSubMenu(b[0]);
                            d && d.selectFirstCell();
                        }
                        c = !0;
                        break;

                      case F.ARROW_LEFT:
                        b && this.isSubMenu() && (this.close(), this.parentMenu && this.parentMenu.hotMenu.listen(), 
                        c = !0);
                    }
                    c && (a.preventDefault(), K(a));
                },
                onAfterInit: function() {
                    var a = this.hotMenu.getSettings().data, b = this.hotMenu.view.wt.wtTable.hider.style, c = this.hotMenu.view.wt.wtTable.holder.style, d = parseInt(b.width, 10), e = 0;
                    u(a, function(a) {
                        return e += a.name === I ? 1 : 26;
                    }), c.width = d + 22 + "px", c.height = e + 4 + "px";
                },
                onDocumentMouseDown: function(a) {
                    this.isOpened() && (this.container && s(a.target, this.container) && this.executeCommand(a), 
                    (this.isAllSubMenusClosed() || this.isSubMenu()) && !s(a.target, ".htMenu") && s(a.target, document) && this.close(!0));
                }
            }, {}), y(L, G);
        }, {
            cursor: 65,
            eventManager: 40,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/object": 49,
            "helpers/unicode": 52,
            pluginHooks: 54,
            predefinedItems: 68,
            utils: 69
        } ],
        68: [ function(a, b, c) {
            "use strict";
            function d() {
                var a = {};
                return k(F, function(b, c) {
                    return a[c] = l(b);
                }), a;
            }
            function e(a, b) {
                -1 === E.indexOf(a) && (F[a] = b);
            }
            var f;
            Object.defineProperties(c, {
                ROW_ABOVE: {
                    get: function() {
                        return s;
                    }
                },
                ROW_BELOW: {
                    get: function() {
                        return t;
                    }
                },
                COLUMN_LEFT: {
                    get: function() {
                        return u;
                    }
                },
                COLUMN_RIGHT: {
                    get: function() {
                        return v;
                    }
                },
                CLEAR_COLUMN: {
                    get: function() {
                        return w;
                    }
                },
                REMOVE_ROW: {
                    get: function() {
                        return x;
                    }
                },
                REMOVE_COLUMN: {
                    get: function() {
                        return y;
                    }
                },
                UNDO: {
                    get: function() {
                        return z;
                    }
                },
                REDO: {
                    get: function() {
                        return A;
                    }
                },
                READ_ONLY: {
                    get: function() {
                        return B;
                    }
                },
                ALIGNMENT: {
                    get: function() {
                        return C;
                    }
                },
                SEPARATOR: {
                    get: function() {
                        return D;
                    }
                },
                ITEMS: {
                    get: function() {
                        return E;
                    }
                },
                predefinedItems: {
                    get: function() {
                        return d;
                    }
                },
                addItem: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var g, h, i, j = (g = a("helpers/object"), g && g.__esModule && g || {
                "default": g
            }), k = j.objectEach, l = j.clone, m = ((h = a("helpers/number"), h && h.__esModule && h || {
                "default": h
            }).rangeEach, i = a("utils"), i && i.__esModule && i || {
                "default": i
            }), n = m.align, o = m.getAlignmentClasses, p = m.getValidSelection, q = m.checkSelectionConsistency, r = m.markLabelAsSelected, s = "row_above", t = "row_below", u = "col_left", v = "col_right", w = "clear_column", x = "remove_row", y = "remove_col", z = "undo", A = "redo", B = "make_read_only", C = "alignment", D = "---------", E = [ s, t, u, v, w, x, y, z, A, B, C, D ], F = (f = {}, 
            Object.defineProperty(f, D, {
                value: {
                    name: D
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, s, {
                value: {
                    key: s,
                    name: "Insert row above",
                    callback: function(a, b) {
                        this.alter("insert_row", b.start.row);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        var b = this.countRows(), c = [ 0, a[1], b - 1, a[1] ];
                        return c.join(",") === a.join(",") && b > 1;
                    },
                    hidden: function() {
                        return !this.getSettings().allowInsertRow;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, t, {
                value: {
                    key: t,
                    name: "Insert row below",
                    callback: function(a, b) {
                        this.alter("insert_row", b.end.row + 1);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        var b = this.countRows(), c = [ 0, a[1], b - 1, a[1] ];
                        return c.join(",") === a.join(",") && b > 1;
                    },
                    hidden: function() {
                        return !this.getSettings().allowInsertRow;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, u, {
                value: {
                    key: u,
                    name: "Insert column on the left",
                    callback: function(a, b) {
                        this.alter("insert_col", b.start.col);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        if (!this.isColumnModificationAllowed()) return !0;
                        var b = [ a[0], 0, a[0], this.countCols() - 1 ], c = b.join(",") == a.join(",");
                        return a[1] < 0 || this.countCols() >= this.getSettings().maxCols || c;
                    },
                    hidden: function() {
                        return !this.getSettings().allowInsertColumn;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, v, {
                value: {
                    key: v,
                    name: "Insert column on the right",
                    callback: function(a, b) {
                        this.alter("insert_col", b.end.col + 1);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        if (!this.isColumnModificationAllowed()) return !0;
                        var b = [ a[0], 0, a[0], this.countCols() - 1 ], c = b.join(",") == a.join(",");
                        return a[1] < 0 || this.countCols() >= this.getSettings().maxCols || c;
                    },
                    hidden: function() {
                        return !this.getSettings().allowInsertColumn;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, w, {
                value: {
                    key: w,
                    name: "Clear column",
                    callback: function(a, b) {
                        var c = b.start.col;
                        this.populateFromArray(0, c, [ [ null ] ], Math.max(b.start.row, b.end.row), c);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        var b = [ a[0], 0, a[0], this.countCols() - 1 ], c = b.join(",") == a.join(",");
                        return a[1] < 0 || this.countCols() >= this.getSettings().maxCols || c;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, x, {
                value: {
                    key: x,
                    name: "Remove row",
                    callback: function(a, b) {
                        var c = b.end.row - b.start.row + 1;
                        this.alter("remove_row", b.start.row, c);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        var b = [ 0, a[1], this.countRows() - 1, a[1] ];
                        return b.join(",") === a.join(",");
                    },
                    hidden: function() {
                        return !this.getSettings().allowRemoveRow;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, y, {
                value: {
                    key: y,
                    name: "Remove column",
                    callback: function(a, b) {
                        var c = b.end.col - b.start.col + 1;
                        this.alter("remove_col", b.start.col, c);
                    },
                    disabled: function() {
                        var a = p(this);
                        if (!a) return !0;
                        if (!this.isColumnModificationAllowed()) return !0;
                        var b = [ a[0], 0, a[0], this.countCols() - 1 ], c = b.join(",") == a.join(",");
                        return a[1] < 0 || c;
                    },
                    hidden: function() {
                        return !this.getSettings().allowRemoveColumn;
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, z, {
                value: {
                    key: z,
                    name: "Undo",
                    callback: function() {
                        this.undo();
                    },
                    disabled: function() {
                        return this.undoRedo && !this.undoRedo.isUndoAvailable();
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, A, {
                value: {
                    key: A,
                    name: "Redo",
                    callback: function() {
                        this.redo();
                    },
                    disabled: function() {
                        return this.undoRedo && !this.undoRedo.isRedoAvailable();
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, B, {
                value: {
                    key: B,
                    name: function() {
                        var a = this, b = "Read only", c = q(this.getSelectedRange(), function(b, c) {
                            return a.getCellMeta(b, c).readOnly;
                        });
                        return c && (b = r(b)), b;
                    },
                    callback: function() {
                        var a = this, b = this.getSelectedRange(), c = q(b, function(b, c) {
                            return a.getCellMeta(b, c).readOnly;
                        });
                        b.forAll(function(b, d) {
                            a.getCellMeta(b, d).readOnly = !c;
                        }), this.render();
                    },
                    disabled: function() {
                        return !this.getSelectedRange();
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(f, C, {
                value: {
                    key: C,
                    name: "Alignment",
                    disabled: function() {
                        return !this.getSelectedRange();
                    },
                    submenu: {
                        items: [ {
                            key: C + ":left",
                            name: function() {
                                var a = this, b = "Left", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htLeft") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "horizontal", e = "htLeft";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            key: C + ":center",
                            name: function() {
                                var a = this, b = "Center", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htCenter") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "horizontal", e = "htCenter";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            key: C + ":right",
                            name: function() {
                                var a = this, b = "Right", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htRight") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "horizontal", e = "htRight";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            key: C + ":justify",
                            name: function() {
                                var a = this, b = "Justify", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htJustify") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "horizontal", e = "htJustify";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            name: D
                        }, {
                            key: C + ":top",
                            name: function() {
                                var a = this, b = "Top", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htTop") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "vertical", e = "htTop";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            key: C + ":middle",
                            name: function() {
                                var a = this, b = "Middle", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htMiddle") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "vertical", e = "htMiddle";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        }, {
                            key: C + ":bottom",
                            name: function() {
                                var a = this, b = "Bottom", c = q(this.getSelectedRange(), function(b, c) {
                                    var d = a.getCellMeta(b, c).className;
                                    return d && -1 !== d.indexOf("htBottom") ? !0 : void 0;
                                });
                                return c && (b = r(b)), b;
                            },
                            callback: function() {
                                var a = this, b = this.getSelectedRange(), c = o(b, function(b, c) {
                                    return a.getCellMeta(b, c).className;
                                }), d = "vertical", e = "htBottom";
                                this.runHooks("beforeCellAlignment", c, b, d, e), n(b, d, e, function(b, c) {
                                    return a.getCellMeta(b, c);
                                }), this.render();
                            },
                            disabled: !1
                        } ]
                    }
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), f);
        }, {
            "helpers/number": 48,
            "helpers/object": 49,
            utils: 69
        } ],
        69: [ function(a, b, c) {
            "use strict";
            function d(a) {
                return {
                    start: a.getTopLeftCorner(),
                    end: a.getBottomRightCorner()
                };
            }
            function e(a) {
                return r(a, "htSeparator");
            }
            function f(a) {
                return r(a, "htSubmenu");
            }
            function g(a) {
                return r(a, "htDisabled");
            }
            function h(a) {
                return r(a, "htSelectionDisabled");
            }
            function i(a) {
                var b = a.getSelected();
                return b ? b[0] < 0 ? null : a.countRows() >= a.getSettings().maxRows ? null : b : null;
            }
            function j(a, b) {
                return -1 != a.indexOf(b) ? a : (a = a.replace("htTop", "").replace("htMiddle", "").replace("htBottom", "").replace("  ", ""), 
                a += " " + b);
            }
            function k(a, b) {
                return -1 != a.indexOf(b) ? a : (a = a.replace("htLeft", "").replace("htCenter", "").replace("htRight", "").replace("htJustify", "").replace("  ", ""), 
                a += " " + b);
            }
            function l(a, b) {
                for (var c = {}, d = a.from.row; d <= a.to.row; d++) for (var e = a.from.col; e <= a.to.col; e++) c[d] || (c[d] = []), 
                c[d][e] = b(d, e);
                return c;
            }
            function m(a, b, c, d) {
                if (a.from.row == a.to.row && a.from.col == a.to.col) n(a.from.row, a.from.col, b, c, d); else for (var e = a.from.row; e <= a.to.row; e++) for (var f = a.from.col; f <= a.to.col; f++) n(e, f, b, c, d);
            }
            function n(a, b, c, d, e) {
                var f = e(a, b), g = d;
                f.className && (g = "vertical" === c ? j(f.className, d) : k(f.className, d)), f.className = g;
            }
            function o(a, b) {
                var c = !1;
                return a && a.forAll(function(a, d) {
                    return b(a, d) ? (c = !0, !1) : void 0;
                }), c;
            }
            function p(a) {
                return '<span class="selected">' + String.fromCharCode(10003) + "</span>" + a;
            }
            Object.defineProperties(c, {
                normalizeSelection: {
                    get: function() {
                        return d;
                    }
                },
                isSeparator: {
                    get: function() {
                        return e;
                    }
                },
                hasSubMenu: {
                    get: function() {
                        return f;
                    }
                },
                isDisabled: {
                    get: function() {
                        return g;
                    }
                },
                isSelectionDisabled: {
                    get: function() {
                        return h;
                    }
                },
                getValidSelection: {
                    get: function() {
                        return i;
                    }
                },
                prepareVerticalAlignClass: {
                    get: function() {
                        return j;
                    }
                },
                prepareHorizontalAlignClass: {
                    get: function() {
                        return k;
                    }
                },
                getAlignmentClasses: {
                    get: function() {
                        return l;
                    }
                },
                align: {
                    get: function() {
                        return m;
                    }
                },
                checkSelectionConsistency: {
                    get: function() {
                        return o;
                    }
                },
                markLabelAsSelected: {
                    get: function() {
                        return p;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var q, r = (q = a("helpers/dom/element"), q && q.__esModule && q || {
                "default": q
            }).hasClass;
        }, {
            "helpers/dom/element": 44
        } ],
        70: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                ContextMenuCopyPaste: {
                    get: function() {
                        return p;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i, j = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }).removeClass, k = (e = a("helpers/array"), e && e.__esModule && e || {
                "default": e
            }).arrayEach, l = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).EventManager, m = (g = a("plugins"), g && g.__esModule && g || {
                "default": g
            }).registerPlugin, n = (h = a("_base"), h && h.__esModule && h || {
                "default": h
            })["default"], o = (i = a("zeroclipboard"), i && i.__esModule && i || {
                "default": i
            })["default"], p = function(a) {
                $traceurRuntime.superConstructor(q).call(this, a), this.eventManager = new l(this), 
                this.swfPath = null, this.outsideClickDeselectsCache = null;
            }, q = p;
            $traceurRuntime.createClass(p, {
                isEnabled: function() {
                    return this.hot.getSettings().contextMenuCopyPaste;
                },
                enablePlugin: function() {
                    var a = this;
                    if (!this.enabled) {
                        "object" == typeof this.hot.getSettings().contextMenuCopyPaste && (this.swfPath = this.hot.getSettings().contextMenuCopyPaste.swfPath), 
                        "undefined" == typeof o && console.error("To be able to use the Copy/Paste feature from the context menu, you need to manually include ZeroClipboard.js file to your website.");
                        try {
                            new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                        } catch (b) {
                            "undefined" == typeof navigator.mimeTypes["application/x-shockwave-flash"] && console.error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.");
                        }
                        this.swfPath && o.config({
                            swfPath: this.swfPath
                        }), this.hot.addHook("afterContextMenuShow", function() {
                            return a.onAfterContextMenuShow();
                        }), this.hot.addHook("afterContextMenuDefaultOptions", function(b) {
                            return a.onAfterContextMenuDefaultOptions(b);
                        }), this.registerEvents(), $traceurRuntime.superGet(this, q.prototype, "enablePlugin").call(this);
                    }
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, q.prototype, "disablePlugin").call(this);
                },
                registerEvents: function() {
                    var a = this;
                    this.eventManager.addEventListener(document, "mouseenter", function() {
                        return a.removeCurrentClass();
                    }), this.eventManager.addEventListener(document, "mouseleave", function() {
                        return a.removeZeroClipboardClass();
                    });
                },
                getCopyValue: function() {
                    return this.hot.copyPaste.setCopyableText(), this.hot.copyPaste.copyPasteInstance.elTextarea.value;
                },
                onAfterContextMenuDefaultOptions: function(a) {
                    a.items.unshift({
                        key: "copy",
                        name: "Copy"
                    }, {
                        key: "paste",
                        name: "Paste",
                        callback: function() {
                            this.copyPaste.triggerPaste();
                        }
                    }, Handsontable.plugins.ContextMenu.SEPARATOR);
                },
                onAfterContextMenuShow: function() {
                    var a = this, b = this.hot.getPlugin("contextMenu"), c = b.menu.hotMenu.getData();
                    k(c, function(c, d) {
                        if ("copy" === c.key) {
                            var e = new o(b.menu.hotMenu.getCell(d, 0));
                            return e.off(), e.on("copy", function(b) {
                                var c = b.clipboardData;
                                c.setData("text/plain", a.getCopyValue()), a.hot.getSettings().outsideClickDeselects = a.outsideClickDeselectsCache;
                            }), !1;
                        }
                    });
                },
                removeCurrentClass: function() {
                    var a = this.hot.getPlugin("contextMenu");
                    if (a.menu.isOpened()) {
                        var b = a.menu.hotMenu.rootElement.querySelector("td.current");
                        b && j(b, "current");
                    }
                    this.outsideClickDeselectsCache = this.hot.getSettings().outsideClickDeselects, 
                    this.hot.getSettings().outsideClickDeselects = !1;
                },
                removeZeroClipboardClass: function() {
                    var a = this.hot.getPlugin("contextMenu");
                    if (a.menu.isOpened()) {
                        var b = a.menu.hotMenu.rootElement.querySelector("td.zeroclipboard-is-hover");
                        b && j(b, "zeroclipboard-is-hover");
                    }
                    this.hot.getSettings().outsideClickDeselects = this.outsideClickDeselectsCache;
                }
            }, {}, n), m("contextMenuCopyPaste", p);
        }, {
            _base: 56,
            eventManager: 40,
            "helpers/array": 41,
            "helpers/dom/element": 44,
            plugins: 55,
            zeroclipboard: "zeroclipboard"
        } ],
        71: [ function(a, b, c) {
            "use strict";
            function d(a) {
                function b() {
                    a.isListening() && a.selection.empty();
                }
                function c(b) {
                    var c, d, e, f, g, h, i, j, k, l;
                    if (a.isListening() && a.selection.isSelected()) {
                        c = b, d = q.parse(c), e = a.getSelected(), f = new y(e[0], e[1]), g = new y(e[2], e[3]), 
                        h = new z(f, f, g), i = h.getTopLeftCorner(), j = h.getBottomRightCorner(), k = i, 
                        l = new y(Math.max(j.row, d.length - 1 + i.row), Math.max(j.col, d[0].length - 1 + i.col));
                        var m = g.row - f.row >= d.length - 1, n = g.col - f.col >= d[0].length - 1;
                        a.addHookOnce("afterChange", function(b, c) {
                            var d = b ? b.length : 0;
                            if (d) {
                                var e = {
                                    row: 0,
                                    col: 0
                                }, f = -1;
                                u(b, function(a, c) {
                                    var g = d > c + 1 ? b[c + 1] : null;
                                    g && (m || (e.row = e.row + Math.max(g[0] - a[0] - 1, 0)), !n && a[1] > f && (f = a[1], 
                                    e.col = e.col + Math.max(g[1] - a[1] - 1, 0)));
                                }), a.selectCell(k.row, k.col, l.row + e.row, l.col + e.col);
                            }
                        }), a.populateFromArray(k.row, k.col, d, l.row, l.col, "paste", a.getSettings().pasteMode);
                    }
                }
                function d(b) {
                    if (a.getSelected() && (!a.getActiveEditor() || !a.getActiveEditor().isOpened())) {
                        if (t(b.keyCode)) return e.setCopyableText(), void w(b);
                        var c = (b.ctrlKey || b.metaKey) && !b.altKey;
                        b.keyCode == s.A && c && a._registerTimeout(setTimeout(x(e.setCopyableText, e), 0));
                    }
                }
                var e = this;
                this.copyPasteInstance = p(), this.copyPasteInstance.onCut(b), this.copyPasteInstance.onPaste(c), 
                this.onPaste = c, a.addHook("beforeKeyDown", d), this.destroy = function() {
                    this.copyPasteInstance && (this.copyPasteInstance.removeCallback(b), this.copyPasteInstance.removeCallback(c), 
                    this.copyPasteInstance.destroy(), this.copyPasteInstance = null), a.removeHook("beforeKeyDown", d);
                }, a.addHook("afterDestroy", x(this.destroy, this)), this.triggerPaste = x(this.copyPasteInstance.triggerPaste, this.copyPasteInstance), 
                this.triggerCut = x(this.copyPasteInstance.triggerCut, this.copyPasteInstance), 
                this.setCopyableText = function() {
                    var b = a.getSettings(), c = b.copyRowsLimit, d = b.copyColsLimit, e = a.getSelectedRange(), f = e.getTopLeftCorner(), g = e.getBottomRightCorner(), h = f.row, i = f.col, j = g.row, k = g.col, l = Math.min(j, h + c - 1), m = Math.min(k, i + d - 1), n = [];
                    n.push({
                        startRow: h,
                        startCol: i,
                        endRow: l,
                        endCol: m
                    }), n = Handsontable.hooks.run(a, "modifyCopyableRange", n);
                    var o = this.getRangedCopyableData(n);
                    a.copyPaste.copyPasteInstance.copyable(o), j === l && k === m || Handsontable.hooks.run(a, "afterCopyLimit", j - h + 1, k - i + 1, c, d);
                }, this.getRangedCopyableData = function(b) {
                    var c = [], d = [], e = [];
                    return u(b, function(a) {
                        v(a.startRow, a.endRow, function(a) {
                            -1 === d.indexOf(a) && d.push(a);
                        }), v(a.startCol, a.endCol, function(a) {
                            -1 === e.indexOf(a) && e.push(a);
                        });
                    }), u(d, function(b) {
                        var d = [];
                        u(e, function(c) {
                            d.push(a.getCopyableData(b, c));
                        }), c.push(d);
                    }), q.stringify(c);
                };
            }
            function e() {
                var a = this, b = a.getSettings().copyPaste !== !1;
                b && !a.copyPaste ? a.copyPaste = new d(a) : !b && a.copyPaste && (a.copyPaste.destroy(), 
                a.copyPaste = null);
            }
            Object.defineProperties(c, {
                CopyPastePlugin: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var f, g, h, i, j, k, l, m, n, o, p = (f = a("copyPaste"), f && f.__esModule && f || {
                "default": f
            })["default"], q = (g = a("SheetClip"), g && g.__esModule && g || {
                "default": g
            })["default"], r = (h = a("helpers/unicode"), h && h.__esModule && h || {
                "default": h
            }), s = r.KEY_CODES, t = r.isCtrlKey, u = (i = a("helpers/array"), i && i.__esModule && i || {
                "default": i
            }).arrayEach, v = (j = a("helpers/number"), j && j.__esModule && j || {
                "default": j
            }).rangeEach, w = (k = a("helpers/dom/event"), k && k.__esModule && k || {
                "default": k
            }).stopImmediatePropagation, x = (l = a("helpers/function"), l && l.__esModule && l || {
                "default": l
            }).proxy, y = ((m = a("plugins"), m && m.__esModule && m || {
                "default": m
            }).registerPlugin, (n = a("3rdparty/walkontable/src/cell/coords"), n && n.__esModule && n || {
                "default": n
            }).WalkontableCellCoords), z = (o = a("3rdparty/walkontable/src/cell/range"), o && o.__esModule && o || {
                "default": o
            }).WalkontableCellRange;
            Handsontable.hooks.add("afterInit", e), Handsontable.hooks.add("afterUpdateSettings", e), 
            Handsontable.hooks.register("afterCopyLimit"), Handsontable.hooks.register("modifyCopyableRange");
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            "3rdparty/walkontable/src/cell/range": 6,
            SheetClip: "SheetClip",
            copyPaste: "copyPaste",
            "helpers/array": 41,
            "helpers/dom/event": 45,
            "helpers/function": 46,
            "helpers/number": 48,
            "helpers/unicode": 52,
            plugins: 55
        } ],
        72: [ function(a, b, c) {
            "use strict";
            function d() {}
            var e, f, g, h, i = ((e = a("plugins"), e && e.__esModule && e || {
                "default": e
            }).registerPlugin, (f = a("3rdparty/walkontable/src/cell/range"), f && f.__esModule && f || {
                "default": f
            }).WalkontableCellRange), j = (g = a("3rdparty/walkontable/src/selection"), g && g.__esModule && g || {
                "default": g
            }).WalkontableSelection, k = function(a) {
                return "boolean" == typeof a && a === !0 ? !0 : "object" == typeof a && a.length > 0;
            }, l = function() {
                k(this.getSettings().customBorders) && (this.customBorders || (h = this, this.customBorders = new d()));
            }, m = function(a) {
                for (var b = 0; b < h.view.wt.selections.length; b++) if (h.view.wt.selections[b].settings.className == a) return b;
                return -1;
            }, n = function(a) {
                var b = {
                    row: a.row,
                    col: a.col
                }, c = new j(a, new i(b, b, b)), d = m(a.className);
                d >= 0 ? h.view.wt.selections[d] = c : h.view.wt.selections.push(c);
            }, o = function(a, b, c) {
                var d = u(a, b);
                d = v(d, c), this.setCellMeta(a, b, "borders", d), n(d);
            }, p = function(a) {
                for (var b = a.range, c = b.from.row; c <= b.to.row; c++) for (var d = b.from.col; d <= b.to.col; d++) {
                    var e = u(c, d), f = 0;
                    c == b.from.row && (f++, a.hasOwnProperty("top") && (e.top = a.top)), c == b.to.row && (f++, 
                    a.hasOwnProperty("bottom") && (e.bottom = a.bottom)), d == b.from.col && (f++, a.hasOwnProperty("left") && (e.left = a.left)), 
                    d == b.to.col && (f++, a.hasOwnProperty("right") && (e.right = a.right)), f > 0 && (this.setCellMeta(c, d, "borders", e), 
                    n(e));
                }
            }, q = function(a, b) {
                return "border_row" + a + "col" + b;
            }, r = function() {
                return {
                    width: 1,
                    color: "#000"
                };
            }, s = function() {
                return {
                    hide: !0
                };
            }, t = function() {
                return {
                    width: 1,
                    color: "#000",
                    cornerVisible: !1
                };
            }, u = function(a, b) {
                return {
                    className: q(a, b),
                    border: t(),
                    row: a,
                    col: b,
                    top: s(),
                    right: s(),
                    bottom: s(),
                    left: s()
                };
            }, v = function(a, b) {
                return b.hasOwnProperty("border") && (a.border = b.border), b.hasOwnProperty("top") && (a.top = b.top), 
                b.hasOwnProperty("right") && (a.right = b.right), b.hasOwnProperty("bottom") && (a.bottom = b.bottom), 
                b.hasOwnProperty("left") && (a.left = b.left), a;
            }, w = function(a) {
                for (var b = document.querySelectorAll("." + a), c = 0; c < b.length; c++) if (b[c] && "TD" != b[c].nodeName) {
                    var d = b[c].parentNode;
                    d.parentNode && d.parentNode.removeChild(d);
                }
            }, x = function(a, b) {
                var c = q(a, b);
                w(c), this.removeCellMeta(a, b, "borders");
            }, y = function(a, b, c, d) {
                var e = this.getCellMeta(a, b).borders;
                e && void 0 != e.border || (e = u(a, b)), d ? e[c] = s() : e[c] = r(), this.setCellMeta(a, b, "borders", e);
                var f = q(a, b);
                w(f), n(e), this.render();
            }, z = function(a, b, c) {
                if (a.from.row == a.to.row && a.from.col == a.to.col) "noBorders" == b ? x.call(this, a.from.row, a.from.col) : y.call(this, a.from.row, a.from.col, b, c); else switch (b) {
                  case "noBorders":
                    for (var d = a.from.col; d <= a.to.col; d++) for (var e = a.from.row; e <= a.to.row; e++) x.call(this, e, d);
                    break;

                  case "top":
                    for (var f = a.from.col; f <= a.to.col; f++) y.call(this, a.from.row, f, b, c);
                    break;

                  case "right":
                    for (var g = a.from.row; g <= a.to.row; g++) y.call(this, g, a.to.col, b);
                    break;

                  case "bottom":
                    for (var h = a.from.col; h <= a.to.col; h++) y.call(this, a.to.row, h, b);
                    break;

                  case "left":
                    for (var i = a.from.row; i <= a.to.row; i++) y.call(this, i, a.from.col, b);
                }
            }, A = function(a, b) {
                var c = !1;
                return a.getSelectedRange().forAll(function(d, e) {
                    var f = a.getCellMeta(d, e).borders;
                    if (f) {
                        if (!b) return c = !0, !1;
                        if (!f[b].hasOwnProperty("hide")) return c = !0, !1;
                    }
                }), c;
            }, B = function(a) {
                return '<span class="selected">' + String.fromCharCode(10003) + "</span>" + a;
            }, C = function(a) {
                this.getSettings().customBorders && (a.items.push(Handsontable.plugins.ContextMenu.SEPARATOR), 
                a.items.push({
                    key: "borders",
                    name: "Borders",
                    submenu: {
                        items: [ {
                            key: "borders:top",
                            name: function() {
                                var a = "Top", b = A(this, "top");
                                return b && (a = B(a)), a;
                            },
                            callback: function() {
                                var a = A(this, "top");
                                z.call(this, this.getSelectedRange(), "top", a);
                            },
                            disabled: !1
                        }, {
                            key: "borders:right",
                            name: function() {
                                var a = "Right", b = A(this, "right");
                                return b && (a = B(a)), a;
                            },
                            callback: function() {
                                var a = A(this, "right");
                                z.call(this, this.getSelectedRange(), "right", a);
                            },
                            disabled: !1
                        }, {
                            key: "borders:bottom",
                            name: function() {
                                var a = "Bottom", b = A(this, "bottom");
                                return b && (a = B(a)), a;
                            },
                            callback: function() {
                                var a = A(this, "bottom");
                                z.call(this, this.getSelectedRange(), "bottom", a);
                            },
                            disabled: !1
                        }, {
                            key: "borders:left",
                            name: function() {
                                var a = "Left", b = A(this, "left");
                                return b && (a = B(a)), a;
                            },
                            callback: function() {
                                var a = A(this, "left");
                                z.call(this, this.getSelectedRange(), "left", a);
                            },
                            disabled: !1
                        }, {
                            key: "borders:no_borders",
                            name: "Remove border(s)",
                            callback: function() {
                                z.call(this, this.getSelectedRange(), "noBorders");
                            },
                            disabled: function() {
                                return !A(this);
                            }
                        } ]
                    }
                }));
            };
            Handsontable.hooks.add("beforeInit", l), Handsontable.hooks.add("afterContextMenuDefaultOptions", C), 
            Handsontable.hooks.add("afterInit", function() {
                var a = this.getSettings().customBorders;
                if (a) {
                    for (var b = 0; b < a.length; b++) a[b].range ? p.call(this, a[b]) : o.call(this, a[b].row, a[b].col, a[b]);
                    this.render(), this.view.wt.draw(!0);
                }
            }), Handsontable.CustomBorders = d;
        }, {
            "3rdparty/walkontable/src/cell/range": 6,
            "3rdparty/walkontable/src/selection": 18,
            plugins: 55
        } ],
        73: [ function(a, b, c) {
            "use strict";
            function d() {
                this.boundaries = null, this.callback = null;
            }
            Object.defineProperties(c, {
                DragToScroll: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("eventManager"), e && e.__esModule && e || {
                "default": e
            }).eventManager;
            (f = a("plugins"), f && f.__esModule && f || {
                "default": f
            }).registerPlugin;
            Handsontable.plugins.DragToScroll = d, d.prototype.setBoundaries = function(a) {
                this.boundaries = a;
            }, d.prototype.setCallback = function(a) {
                this.callback = a;
            }, d.prototype.check = function(a, b) {
                var c = 0, d = 0;
                b < this.boundaries.top ? d = b - this.boundaries.top : b > this.boundaries.bottom && (d = b - this.boundaries.bottom), 
                a < this.boundaries.left ? c = a - this.boundaries.left : a > this.boundaries.right && (c = a - this.boundaries.right), 
                this.callback(c, d);
            };
            var h, i = function(a) {
                a.dragToScrollListening = !1;
                var b = a.view.wt.wtTable.holder;
                h = new d(), b !== window && (h.setBoundaries(b.getBoundingClientRect()), h.setCallback(function(a, c) {
                    0 > a ? b.scrollLeft -= 50 : a > 0 && (b.scrollLeft += 50), 0 > c ? b.scrollTop -= 20 : c > 0 && (b.scrollTop += 20);
                }), a.dragToScrollListening = !0);
            };
            Handsontable.hooks.add("afterInit", function() {
                var a = this, b = g(this);
                b.addEventListener(document, "mouseup", function() {
                    a.dragToScrollListening = !1;
                }), b.addEventListener(document, "mousemove", function(b) {
                    a.dragToScrollListening && h.check(b.clientX, b.clientY);
                });
            }), Handsontable.hooks.add("afterDestroy", function() {
                g(this).clear();
            }), Handsontable.hooks.add("afterOnCellMouseDown", function() {
                i(this);
            }), Handsontable.hooks.add("afterOnCellCornerMouseDown", function() {
                i(this);
            }), Handsontable.plugins.DragToScroll = d;
        }, {
            eventManager: 40,
            plugins: 55
        } ],
        74: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                ManualColumnFreeze: {
                    get: function() {
                        return h;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f = (d = a("_base"), d && d.__esModule && d || {
                "default": d
            })["default"], g = (e = a("plugins"), e && e.__esModule && e || {
                "default": e
            }).registerPlugin, h = function(a) {
                $traceurRuntime.superConstructor(i).call(this, a);
            }, i = h;
            $traceurRuntime.createClass(h, {
                isEnabled: function() {
                    return !!this.hot.getSettings().manualColumnFreeze;
                },
                enablePlugin: function() {
                    var a = this;
                    this.enabled || (this.addHook("modifyCol", function(b) {
                        return a.onModifyCol(b);
                    }), this.addHook("afterContextMenuDefaultOptions", function(b) {
                        return a.addContextMenuEntry(b);
                    }), $traceurRuntime.superGet(this, i.prototype, "enablePlugin").call(this));
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, i.prototype, "disablePlugin").call(this);
                },
                init: function() {
                    $traceurRuntime.superGet(this, i.prototype, "init").call(this), "undefined" == typeof this.hot.manualColumnPositionsPluginUsages ? this.hot.manualColumnPositionsPluginUsages = [ "manualColumnFreeze" ] : this.hot.manualColumnPositionsPluginUsages.push("manualColumnFreeze"), 
                    this.fixedColumnsCount = this.hot.getSettings().fixedColumnsLeft;
                },
                onModifyCol: function(a) {
                    return this.hot.manualColumnPositionsPluginUsages.length > 1 ? a : this.getModifiedColumnIndex(a);
                },
                getModifiedColumnIndex: function(a) {
                    return this.hot.manualColumnPositions[a];
                },
                addContextMenuEntry: function(a) {
                    var b = this;
                    a.items.push(Handsontable.plugins.ContextMenu.SEPARATOR, {
                        key: "freeze_column",
                        name: function() {
                            var a = b.hot.getSelected()[1];
                            return a > b.fixedColumnsCount - 1 ? "Freeze this column" : "Unfreeze this column";
                        },
                        disabled: function() {
                            var a = b.hot.getSelected();
                            return a[1] !== a[3];
                        },
                        callback: function() {
                            var a = b.hot.getSelected()[1];
                            a > b.fixedColumnsCount - 1 ? b.freezeColumn(a) : b.unfreezeColumn(a);
                        }
                    });
                },
                freezeColumn: function(a) {
                    if (!(a <= this.fixedColumnsCount - 1)) {
                        var b = this.getModifiedColumnIndex(a) || a;
                        this.checkPositionData(b), this.modifyColumnOrder(b, a, null, "freeze"), this.addFixedColumn(), 
                        this.hot.view.wt.wtOverlays.leftOverlay.refresh(), this.hot.view.wt.wtOverlays.adjustElementsSize();
                    }
                },
                unfreezeColumn: function(a) {
                    if (!(a > this.fixedColumnsCount - 1)) {
                        var b = this.getBestColumnReturnPosition(a), c = this.getModifiedColumnIndex(a) || a;
                        this.checkPositionData(c), this.modifyColumnOrder(c, a, b, "unfreeze"), this.removeFixedColumn(), 
                        this.hot.view.wt.wtOverlays.leftOverlay.refresh(), this.hot.view.wt.wtOverlays.adjustElementsSize();
                    }
                },
                addFixedColumn: function() {
                    this.hot.updateSettings({
                        fixedColumnsLeft: this.fixedColumnsCount + 1
                    }), this.fixedColumnsCount++;
                },
                removeFixedColumn: function() {
                    this.hot.updateSettings({
                        fixedColumnsLeft: this.fixedColumnsCount - 1
                    }), this.fixedColumnsCount--;
                },
                checkPositionData: function(a) {
                    this.hot.manualColumnPositions && 0 !== this.hot.manualColumnPositions.length || this.hot.manualColumnPositions || (this.hot.manualColumnPositions = []), 
                    a ? this.hot.manualColumnPositions[a] || this.createPositionData(a + 1) : this.createPositionData(this.hot.countCols());
                },
                createPositionData: function(a) {
                    if (this.hot.manualColumnPositions.length < a) for (var b = this.hot.manualColumnPositions.length; a > b; b++) this.hot.manualColumnPositions[b] = b;
                },
                modifyColumnOrder: function(a, b, c, d) {
                    null == c && (c = a), "freeze" === d ? this.hot.manualColumnPositions.splice(this.fixedColumnsCount, 0, this.hot.manualColumnPositions.splice(b, 1)[0]) : "unfreeze" === d && this.hot.manualColumnPositions.splice(c, 0, this.hot.manualColumnPositions.splice(b, 1)[0]);
                },
                getBestColumnReturnPosition: function(a) {
                    for (var b = this.fixedColumnsCount, c = this.getModifiedColumnIndex(b), d = this.getModifiedColumnIndex(a); d > c; ) b++, 
                    c = this.getModifiedColumnIndex(b);
                    return b - 1;
                }
            }, {}, f), g("manualColumnFreeze", h);
        }, {
            _base: 56,
            plugins: 55
        } ],
        75: [ function(a, b, c) {
            "use strict";
            function d() {
                function a(a) {
                    p = this, q = a;
                    var b = this.view.wt.wtTable.getCoords(a).col;
                    if (b >= 0) {
                        n = b;
                        var c = q.getBoundingClientRect();
                        i = c.left, r.style.top = c.top + "px", r.style.left = i + "px", p.rootElement.appendChild(r);
                    }
                }
                function b(a, b) {
                    var c = a.getBoundingClientRect(), d = 6;
                    b > 0 ? r.style.left = c.left + c.width - d + "px" : r.style.left = c.left + "px";
                }
                function c() {
                    var a = this;
                    j(r, "active"), j(s, "active");
                    var b = q.getBoundingClientRect();
                    s.style.width = b.width + "px", s.style.height = a.view.maximumVisibleElementHeight(0) + "px", 
                    s.style.top = r.style.top, s.style.left = i + "px", a.rootElement.appendChild(s);
                }
                function d(a) {
                    s.style.left = i + a + "px";
                }
                function e() {
                    l(r, "active"), l(s, "active");
                }
                var f, g, h, i, n, p, q, r = document.createElement("DIV"), s = document.createElement("DIV"), t = m(this);
                r.className = "manualColumnMover", s.className = "manualColumnMoverGuide";
                var u = function() {
                    var a = this;
                    Handsontable.hooks.run(a, "persistentStateSave", "manualColumnPositions", a.manualColumnPositions);
                }, v = function() {
                    var a = this, b = {};
                    return Handsontable.hooks.run(a, "persistentStateLoad", "manualColumnPositions", b), 
                    b.value;
                }, w = function(a) {
                    return "BODY" != a.tagName ? "THEAD" == a.parentNode.tagName ? !0 : (a = a.parentNode, 
                    w(a)) : !1;
                }, x = function(a) {
                    return "TABLE" != a.tagName ? "TH" == a.tagName ? a : x(a.parentNode) : null;
                }, y = function() {
                    var i, j = this;
                    t.addEventListener(j.rootElement, "mouseover", function(c) {
                        if (w(c.target)) {
                            var d = x(c.target);
                            if (d) if (i) {
                                var e = j.view.wt.wtTable.getCoords(d).col;
                                e >= 0 && (g = e, b(c.target, g - f));
                            } else a.call(j, d);
                        }
                    }), t.addEventListener(j.rootElement, "mousedown", function(a) {
                        k(a.target, "manualColumnMover") && (h = o(a), c.call(j), i = j, f = n, g = n);
                    }), t.addEventListener(window, "mousemove", function(a) {
                        i && d(o(a) - h);
                    }), t.addEventListener(window, "mouseup", function(b) {
                        i && (e(), i = !1, A(j.manualColumnPositions, j.countCols()), j.manualColumnPositions.splice(g, 0, j.manualColumnPositions.splice(f, 1)[0]), 
                        Handsontable.hooks.run(j, "beforeColumnMove", f, g), j.forceFullRender = !0, j.view.render(), 
                        u.call(j), Handsontable.hooks.run(j, "afterColumnMove", f, g), a.call(j, q));
                    }), j.addHook("afterDestroy", z);
                }, z = function() {
                    t.clear();
                }, A = function(a, b) {
                    if (a.length < b) for (var c = a.length; b > c; c++) a[c] = c;
                };
                this.beforeInit = function() {
                    this.manualColumnPositions = [];
                }, this.init = function(a) {
                    var b = this, c = !!this.getSettings().manualColumnMove;
                    if (c) {
                        var d = this.getSettings().manualColumnMove, e = v.call(b);
                        "undefined" != typeof e ? this.manualColumnPositions = e : Array.isArray(d) ? this.manualColumnPositions = d : this.manualColumnPositions = [], 
                        ("afterInit" === a || "afterUpdateSettings" === a && 0 === t.context.eventListeners.length) && ("undefined" == typeof b.manualColumnPositionsPluginUsages ? b.manualColumnPositionsPluginUsages = [ "manualColumnMove" ] : b.manualColumnPositionsPluginUsages.push("manualColumnMove"), 
                        y.call(this), this.manualColumnPositions.length > 0 && (this.forceFullRender = !0, 
                        this.render()));
                    } else {
                        var f = b.manualColumnPositionsPluginUsages ? b.manualColumnPositionsPluginUsages.indexOf("manualColumnMove") : -1;
                        f > -1 && (z.call(this), this.manualColumnPositions = [], b.manualColumnPositionsPluginUsages[f] = void 0);
                    }
                }, this.modifyCol = function(a) {
                    return this.getSettings().manualColumnMove ? ("undefined" == typeof this.manualColumnPositions[a] && A(this.manualColumnPositions, a + 1), 
                    this.manualColumnPositions[a]) : a;
                }, this.afterRemoveCol = function(a, b) {
                    if (this.getSettings().manualColumnMove) {
                        var c, d = this.manualColumnPositions;
                        c = d.splice(a, b), d = d.map(function(a) {
                            var b, d = a;
                            for (b = 0; b < c.length; b++) a > c[b] && d--;
                            return d;
                        }), this.manualColumnPositions = d;
                    }
                }, this.afterCreateCol = function(a, b) {
                    if (this.getSettings().manualColumnMove) {
                        var c = this.manualColumnPositions;
                        if (c.length) {
                            for (var d = [], e = 0; b > e; e++) d.push(a + e);
                            a >= c.length ? c.concat(d) : (c = c.map(function(c) {
                                return c >= a ? c + b : c;
                            }), c.splice.apply(c, [ a, 0 ].concat(d))), this.manualColumnPositions = c;
                        }
                    }
                };
            }
            Object.defineProperties(c, {
                ManualColumnMove: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), j = i.addClass, k = i.hasClass, l = i.removeClass, m = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager, n = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), o = n.pageX, p = (n.pageY, (h = a("plugins"), h && h.__esModule && h || {
                "default": h
            }).registerPlugin, new d());
            Handsontable.hooks.add("beforeInit", p.beforeInit), Handsontable.hooks.add("afterInit", function() {
                p.init.call(this, "afterInit");
            }), Handsontable.hooks.add("afterUpdateSettings", function() {
                p.init.call(this, "afterUpdateSettings");
            }), Handsontable.hooks.add("modifyCol", p.modifyCol), Handsontable.hooks.add("afterRemoveCol", p.afterRemoveCol), 
            Handsontable.hooks.add("afterCreateCol", p.afterCreateCol), Handsontable.hooks.register("beforeColumnMove"), 
            Handsontable.hooks.register("afterColumnMove");
        }, {
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            plugins: 55
        } ],
        76: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                ManualColumnResize: {
                    get: function() {
                        return r;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i = (d = a("_base.js"), d && d.__esModule && d || {
                "default": d
            })["default"], j = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), k = j.addClass, l = j.hasClass, m = j.removeClass, n = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager, o = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), p = o.pageX, q = (o.pageY, (h = a("plugins"), h && h.__esModule && h || {
                "default": h
            }).registerPlugin), r = function(a) {
                $traceurRuntime.superConstructor(s).call(this, a), this.currentTH = null, this.currentCol = null, 
                this.currentWidth = null, this.newSize = null, this.startY = null, this.startWidth = null, 
                this.startOffset = null, this.handle = document.createElement("DIV"), this.guide = document.createElement("DIV"), 
                this.eventManager = n(this), this.pressed = null, this.dblclick = 0, this.autoresizeTimeout = null, 
                this.manualColumnWidths = [], k(this.handle, "manualColumnResizer"), k(this.guide, "manualColumnResizerGuide");
            }, s = r;
            $traceurRuntime.createClass(r, {
                isEnabled: function() {
                    return this.hot.getSettings().manualColumnResize;
                },
                enablePlugin: function() {
                    var a = this;
                    if (!this.enabled) {
                        this.manualColumnWidths = [];
                        var b = this.hot.getSettings().manualColumnResize, c = this.loadManualColumnWidths();
                        this.addHook("modifyColWidth", function(b, c) {
                            return a.onModifyColWidth(b, c);
                        }), "undefined" != typeof c ? this.manualColumnWidths = c : Array.isArray(b) ? this.manualColumnWidths = b : this.manualColumnWidths = [], 
                        Handsontable.hooks.register("beforeColumnResize"), Handsontable.hooks.register("afterColumnResize"), 
                        this.bindEvents(), $traceurRuntime.superGet(this, s.prototype, "enablePlugin").call(this);
                    }
                },
                updatePlugin: function() {
                    var a = this.hot.getSettings().manualColumnResize;
                    Array.isArray(a) ? this.manualColumnWidths = a : this.manualColumnWidths = [];
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, s.prototype, "disablePlugin").call(this);
                },
                saveManualColumnWidths: function() {
                    this.hot.runHooks("persistentStateSave", "manualColumnWidths", this.manualColumnWidths);
                },
                loadManualColumnWidths: function() {
                    var a = {};
                    return this.hot.runHooks("persistentStateLoad", "manualColumnWidths", a), a.value;
                },
                setupHandlePosition: function(a) {
                    this.currentTH = a;
                    var b = this.hot.view.wt.wtTable.getCoords(a).col;
                    if (b >= 0) {
                        var c = this.currentTH.getBoundingClientRect();
                        this.currentCol = b, this.startOffset = c.left - 6, this.startWidth = parseInt(c.width, 10), 
                        this.handle.style.top = c.top + "px", this.handle.style.left = this.startOffset + this.startWidth + "px", 
                        this.hot.rootElement.appendChild(this.handle);
                    }
                },
                refreshHandlePosition: function() {
                    this.handle.style.left = this.startOffset + this.currentWidth + "px";
                },
                setupGuidePosition: function() {
                    k(this.handle, "active"), k(this.guide, "active"), this.guide.style.top = this.handle.style.top, 
                    this.guide.style.left = this.handle.style.left, this.guide.style.height = this.hot.view.maximumVisibleElementHeight(0) + "px", 
                    this.hot.rootElement.appendChild(this.guide);
                },
                refreshGuidePosition: function() {
                    this.guide.style.left = this.handle.style.left;
                },
                hideHandleAndGuide: function() {
                    m(this.handle, "active"), m(this.guide, "active");
                },
                checkIfColumnHeader: function(a) {
                    return "BODY" != a.tagName ? "THEAD" == a.parentNode.tagName ? !0 : (a = a.parentNode, 
                    this.checkIfColumnHeader(a)) : !1;
                },
                getTHFromTargetElement: function(a) {
                    return "TABLE" != a.tagName ? "TH" == a.tagName ? a : this.getTHFromTargetElement(a.parentNode) : null;
                },
                onMouseOver: function(a) {
                    if (this.checkIfColumnHeader(a.target)) {
                        var b = this.getTHFromTargetElement(a.target);
                        if (!b) return;
                        var c = b.getAttribute("colspan");
                        !b || null !== c && 1 !== c || this.pressed || this.setupHandlePosition(b);
                    }
                },
                afterMouseDownTimeout: function() {
                    if (this.dblclick >= 2) {
                        var a = this.hot.runHooks("beforeColumnResize", this.currentCol, this.newSize, !0);
                        void 0 !== a && (this.newSize = a), this.setManualSize(this.currentCol, this.newSize), 
                        this.hot.forceFullRender = !0, this.hot.view.render(), this.hot.view.wt.wtOverlays.adjustElementsSize(!0), 
                        this.hot.runHooks("afterColumnResize", this.currentCol, this.newSize, !0);
                    }
                    this.dblclick = 0, this.autoresizeTimeout = null;
                },
                onMouseDown: function(a) {
                    var b = this;
                    l(a.target, "manualColumnResizer") && (this.setupGuidePosition(), this.pressed = this.hot, 
                    null === this.autoresizeTimeout && (this.autoresizeTimeout = setTimeout(function() {
                        return b.afterMouseDownTimeout();
                    }, 500), this.hot._registerTimeout(this.autoresizeTimeout)), this.dblclick++, this.startX = p(a), 
                    this.newSize = this.startWidth);
                },
                onMouseMove: function(a) {
                    this.pressed && (this.currentWidth = this.startWidth + (p(a) - this.startX), this.newSize = this.setManualSize(this.currentCol, this.currentWidth), 
                    this.refreshHandlePosition(), this.refreshGuidePosition());
                },
                onMouseUp: function(a) {
                    this.pressed && (this.hideHandleAndGuide(), this.pressed = !1, this.newSize != this.startWidth && (this.hot.runHooks("beforeColumnResize", this.currentCol, this.newSize), 
                    this.hot.forceFullRender = !0, this.hot.view.render(), this.hot.view.wt.wtOverlays.adjustElementsSize(!0), 
                    this.saveManualColumnWidths(), this.hot.runHooks("afterColumnResize", this.currentCol, this.newSize)), 
                    this.setupHandlePosition(this.currentTH));
                },
                bindEvents: function() {
                    var a = this;
                    this.eventManager.addEventListener(this.hot.rootElement, "mouseover", function(b) {
                        return a.onMouseOver(b);
                    }), this.eventManager.addEventListener(this.hot.rootElement, "mousedown", function(b) {
                        return a.onMouseDown(b);
                    }), this.eventManager.addEventListener(window, "mousemove", function(b) {
                        return a.onMouseMove(b);
                    }), this.eventManager.addEventListener(window, "mouseup", function(b) {
                        return a.onMouseUp(b);
                    });
                },
                setManualSize: function(a, b) {
                    return b = Math.max(b, 20), a = this.hot.runHooks("modifyCol", a), this.manualColumnWidths[a] = b, 
                    b;
                },
                onModifyColWidth: function(a, b) {
                    return this.enabled && (b = this.hot.runHooks("modifyCol", b), this.hot.getSettings().manualColumnResize && this.manualColumnWidths[b]) ? this.manualColumnWidths[b] : a;
                }
            }, {}, i), q("manualColumnResize", r);
        }, {
            "_base.js": 56,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            plugins: 55
        } ],
        77: [ function(a, b, c) {
            "use strict";
            function d() {
                function a(a) {
                    var b = this;
                    p = a;
                    var c = this.view.wt.wtTable.getCoords(a).row;
                    if (c >= 0) {
                        n = c;
                        var d = p.getBoundingClientRect();
                        i = d.top, q.style.top = i + "px", q.style.left = d.left + "px", b.rootElement.appendChild(q);
                    }
                }
                function b(a, b) {
                    var c = a.getBoundingClientRect(), d = 6;
                    b > 0 ? q.style.top = c.top + c.height - d + "px" : q.style.top = c.top + "px";
                }
                function c() {
                    var a = this;
                    j(q, "active"), j(r, "active");
                    var b = p.getBoundingClientRect();
                    r.style.width = a.view.maximumVisibleElementWidth(0) + "px", r.style.height = b.height + "px", 
                    r.style.top = i + "px", r.style.left = q.style.left, a.rootElement.appendChild(r);
                }
                function d(a) {
                    r.style.top = i + a + "px";
                }
                function e() {
                    l(q, "active"), l(r, "active");
                }
                var f, g, h, i, n, p, q = document.createElement("DIV"), r = document.createElement("DIV"), s = m(this);
                q.className = "manualRowMover", r.className = "manualRowMoverGuide";
                var t = function() {
                    var a = this;
                    Handsontable.hooks.run(a, "persistentStateSave", "manualRowPositions", a.manualRowPositions);
                }, u = function() {
                    var a = this, b = {};
                    return Handsontable.hooks.run(a, "persistentStateLoad", "manualRowPositions", b), 
                    b.value;
                }, v = function(a) {
                    return "BODY" != a.tagName ? "TBODY" == a.parentNode.tagName ? !0 : (a = a.parentNode, 
                    v(a)) : !1;
                }, w = function(a) {
                    return "TABLE" != a.tagName ? "TH" == a.tagName ? a : w(a.parentNode) : null;
                }, x = function() {
                    var i, j = this;
                    s.addEventListener(j.rootElement, "mouseover", function(c) {
                        if (v(c.target)) {
                            var d = w(c.target);
                            d && (i ? (g = j.view.wt.wtTable.getCoords(d).row, b(d, g - f)) : a.call(j, d));
                        }
                    }), s.addEventListener(j.rootElement, "mousedown", function(a) {
                        k(a.target, "manualRowMover") && (h = o(a), c.call(j), i = j, f = n, g = n);
                    }), s.addEventListener(window, "mousemove", function(a) {
                        i && d(o(a) - h);
                    }), s.addEventListener(window, "mouseup", function(b) {
                        i && (e(), i = !1, z(j.manualRowPositions, j.countRows()), j.manualRowPositions.splice(g, 0, j.manualRowPositions.splice(f, 1)[0]), 
                        Handsontable.hooks.run(j, "beforeRowMove", f, g), j.forceFullRender = !0, j.view.render(), 
                        t.call(j), Handsontable.hooks.run(j, "afterRowMove", f, g), a.call(j, p));
                    }), j.addHook("afterDestroy", y);
                }, y = function() {
                    s.clear();
                }, z = function(a, b) {
                    if (a.length < b) for (var c = a.length; b > c; c++) a[c] = c;
                };
                this.beforeInit = function() {
                    this.manualRowPositions = [];
                }, this.init = function(a) {
                    var b = this, c = !!b.getSettings().manualRowMove;
                    if (c) {
                        var d = b.getSettings().manualRowMove, e = u.call(b);
                        "undefined" == typeof b.manualRowPositionsPluginUsages ? b.manualRowPositionsPluginUsages = [ "manualColumnMove" ] : b.manualRowPositionsPluginUsages.push("manualColumnMove"), 
                        "undefined" != typeof e ? this.manualRowPositions = e : Array.isArray(d) ? this.manualRowPositions = d : this.manualRowPositions = [], 
                        ("afterInit" === a || "afterUpdateSettings" === a && 0 === s.context.eventListeners.length) && (x.call(this), 
                        this.manualRowPositions.length > 0 && (b.forceFullRender = !0, b.render()));
                    } else {
                        var f = b.manualRowPositionsPluginUsages ? b.manualRowPositionsPluginUsages.indexOf("manualColumnMove") : -1;
                        f > -1 && (y.call(this), b.manualRowPositions = [], b.manualRowPositionsPluginUsages[f] = void 0);
                    }
                }, this.modifyRow = function(a) {
                    var b = this;
                    return b.getSettings().manualRowMove ? ("undefined" == typeof b.manualRowPositions[a] && z(this.manualRowPositions, a + 1), 
                    b.manualRowPositions[a]) : a;
                };
            }
            Object.defineProperties(c, {
                ManualRowMove: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), j = i.addClass, k = i.hasClass, l = i.removeClass, m = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager, n = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), o = (n.pageX, n.pageY), p = ((h = a("plugins"), h && h.__esModule && h || {
                "default": h
            }).registerPlugin, new d());
            Handsontable.hooks.add("beforeInit", p.beforeInit), Handsontable.hooks.add("afterInit", function() {
                p.init.call(this, "afterInit");
            }), Handsontable.hooks.add("afterUpdateSettings", function() {
                p.init.call(this, "afterUpdateSettings");
            }), Handsontable.hooks.add("modifyRow", p.modifyRow), Handsontable.hooks.register("beforeRowMove"), 
            Handsontable.hooks.register("afterRowMove");
        }, {
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            plugins: 55
        } ],
        78: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                ManualRowResize: {
                    get: function() {
                        return r;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i = (d = a("_base.js"), d && d.__esModule && d || {
                "default": d
            })["default"], j = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), k = j.addClass, l = j.hasClass, m = j.removeClass, n = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager, o = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), p = (o.pageX, o.pageY), q = (h = a("plugins"), h && h.__esModule && h || {
                "default": h
            }).registerPlugin, r = function(a) {
                $traceurRuntime.superConstructor(s).call(this, a), this.currentTH = null, this.currentRow = null, 
                this.currentHeight = null, this.newSize = null, this.startY = null, this.startHeight = null, 
                this.startOffset = null, this.handle = document.createElement("DIV"), this.guide = document.createElement("DIV"), 
                this.eventManager = n(this), this.pressed = null, this.dblclick = 0, this.autoresizeTimeout = null, 
                this.manualRowHeights = [], k(this.handle, "manualRowResizer"), k(this.guide, "manualRowResizerGuide");
            }, s = r;
            $traceurRuntime.createClass(r, {
                isEnabled: function() {
                    return this.hot.getSettings().manualRowResize;
                },
                enablePlugin: function() {
                    var a = this;
                    if (!this.enabled) {
                        this.manualRowHeights = [];
                        var b = this.hot.getSettings().manualRowResize, c = this.loadManualRowHeights();
                        "undefined" != typeof c ? this.manualRowHeights = c : Array.isArray(b) ? this.manualRowHeights = b : this.manualRowHeights = [], 
                        this.addHook("modifyRowHeight", function(b, c) {
                            return a.onModifyRowHeight(b, c);
                        }), Handsontable.hooks.register("beforeRowResize"), Handsontable.hooks.register("afterRowResize"), 
                        this.bindEvents(), $traceurRuntime.superGet(this, s.prototype, "enablePlugin").call(this);
                    }
                },
                updatePlugin: function() {
                    var a = this.hot.getSettings().manualRowResize;
                    Array.isArray(a) ? this.manualRowHeights = a : this.manualRowHeights = [];
                },
                disablePlugin: function() {
                    $traceurRuntime.superGet(this, s.prototype, "disablePlugin").call(this);
                },
                saveManualRowHeights: function() {
                    this.hot.runHooks("persistentStateSave", "manualRowHeights", this.manualRowHeights);
                },
                loadManualRowHeights: function() {
                    var a = {};
                    return this.hot.runHooks("persistentStateLoad", "manualRowHeights", a), a.value;
                },
                setupHandlePosition: function(a) {
                    this.currentTH = a;
                    var b = this.hot.view.wt.wtTable.getCoords(a).row;
                    if (b >= 0) {
                        var c = this.currentTH.getBoundingClientRect();
                        this.currentRow = b, this.startOffset = c.top - 6, this.startHeight = parseInt(c.height, 10), 
                        this.handle.style.left = c.left + "px", this.handle.style.top = this.startOffset + this.startHeight + "px", 
                        this.hot.rootElement.appendChild(this.handle);
                    }
                },
                refreshHandlePosition: function() {
                    this.handle.style.top = this.startOffset + this.currentHeight + "px";
                },
                setupGuidePosition: function() {
                    k(this.handle, "active"), k(this.guide, "active"), this.guide.style.top = this.handle.style.top, 
                    this.guide.style.left = this.handle.style.left, this.guide.style.width = this.hot.view.maximumVisibleElementWidth(0) + "px", 
                    this.hot.rootElement.appendChild(this.guide);
                },
                refreshGuidePosition: function() {
                    this.guide.style.top = this.handle.style.top;
                },
                hideHandleAndGuide: function() {
                    m(this.handle, "active"), m(this.guide, "active");
                },
                checkIfRowHeader: function(a) {
                    return "BODY" != a.tagName ? "TBODY" == a.parentNode.tagName ? !0 : (a = a.parentNode, 
                    this.checkIfRowHeader(a)) : !1;
                },
                getTHFromTargetElement: function(a) {
                    return "TABLE" != a.tagName ? "TH" == a.tagName ? a : this.getTHFromTargetElement(a.parentNode) : null;
                },
                onMouseOver: function(a) {
                    if (this.checkIfRowHeader(a.target)) {
                        var b = this.getTHFromTargetElement(a.target);
                        b && (this.pressed || this.setupHandlePosition(b));
                    }
                },
                afterMouseDownTimeout: function() {
                    if (this.dblclick >= 2) {
                        var a = this.hot.runHooks("beforeRowResize", this.currentRow, this.newSize, !0);
                        void 0 !== a && (this.newSize = a), this.setManualSize(this.currentRow, this.newSize), 
                        this.hot.forceFullRender = !0, this.hot.view.render(), this.hot.view.wt.wtOverlays.adjustElementsSize(!0), 
                        this.hot.runHooks("afterRowResize", this.currentRow, this.newSize, !0);
                    }
                    this.dblclick = 0, this.autoresizeTimeout = null;
                },
                onMouseDown: function(a) {
                    var b = this;
                    l(a.target, "manualRowResizer") && (this.setupGuidePosition(), this.pressed = this.hot, 
                    null == this.autoresizeTimeout && (this.autoresizeTimeout = setTimeout(function() {
                        return b.afterMouseDownTimeout();
                    }, 500), this.hot._registerTimeout(this.autoresizeTimeout)), this.dblclick++, this.startY = p(a), 
                    this.newSize = this.startHeight);
                },
                onMouseMove: function(a) {
                    this.pressed && (this.currentHeight = this.startHeight + (p(a) - this.startY), this.newSize = this.setManualSize(this.currentRow, this.currentHeight), 
                    this.refreshHandlePosition(), this.refreshGuidePosition());
                },
                onMouseUp: function(a) {
                    this.pressed && (this.hideHandleAndGuide(), this.pressed = !1, this.newSize != this.startHeight && (this.hot.runHooks("beforeRowResize", this.currentRow, this.newSize), 
                    this.hot.forceFullRender = !0, this.hot.view.render(), this.hot.view.wt.wtOverlays.adjustElementsSize(!0), 
                    this.saveManualRowHeights(), this.hot.runHooks("afterRowResize", this.currentRow, this.newSize)), 
                    this.setupHandlePosition(this.currentTH));
                },
                bindEvents: function() {
                    var a = this;
                    this.eventManager.addEventListener(this.hot.rootElement, "mouseover", function(b) {
                        return a.onMouseOver(b);
                    }), this.eventManager.addEventListener(this.hot.rootElement, "mousedown", function(b) {
                        return a.onMouseDown(b);
                    }), this.eventManager.addEventListener(window, "mousemove", function(b) {
                        return a.onMouseMove(b);
                    }), this.eventManager.addEventListener(window, "mouseup", function(b) {
                        return a.onMouseUp(b);
                    });
                },
                setManualSize: function(a, b) {
                    return a = this.hot.runHooks("modifyRow", a), this.manualRowHeights[a] = b, b;
                },
                onModifyRowHeight: function(a, b) {
                    if (this.enabled) {
                        var c = this.hot.getPlugin("autoRowSize"), d = c ? c.heights[b] : null;
                        b = this.hot.runHooks("modifyRow", b);
                        var e = this.manualRowHeights[b];
                        if (void 0 !== e && (e === d || e > (a || 0))) return e;
                    }
                    return a;
                }
            }, {}, i), q("manualRowResize", r);
        }, {
            "_base.js": 56,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            plugins: 55
        } ],
        79: [ function(a, b, c) {
            "use strict";
            function d() {
                var a = [];
                return a.getInfo = function(a, b) {
                    for (var c = 0, d = this.length; d > c; c++) if (this[c].row <= a && this[c].row + this[c].rowspan - 1 >= a && this[c].col <= b && this[c].col + this[c].colspan - 1 >= b) return this[c];
                }, a.setInfo = function(a) {
                    for (var b = 0, c = this.length; c > b; b++) if (this[b].row === a.row && this[b].col === a.col) return void (this[b] = a);
                    this.push(a);
                }, a.removeInfo = function(a, b) {
                    for (var c = 0, d = this.length; d > c; c++) if (this[c].row === a && this[c].col === b) {
                        this.splice(c, 1);
                        break;
                    }
                }, a;
            }
            function e(a) {
                if (this.mergedCellInfoCollection = new d(), Array.isArray(a)) for (var b = 0, c = a.length; c > b; b++) this.mergedCellInfoCollection.setInfo(a[b]);
            }
            function f(a, b) {
                var c = this.getSettings().mergeCells;
                if (c && !this.selection.isMultiple()) {
                    var d = this.mergeCells.mergedCellInfoCollection.getInfo(a[0], a[1]);
                    d && (a[0] = d.row, a[1] = d.col, a[2] = d.row + d.rowspan - 1, a[3] = d.col + d.colspan - 1);
                }
            }
            function g(a, b) {
                this.mergeCells && this.mergeCells.shiftCollection("right", a, b);
            }
            function h(a, b) {
                this.mergeCells && this.mergeCells.shiftCollection("left", a, b);
            }
            function i(a, b) {
                this.mergeCells && this.mergeCells.shiftCollection("down", a, b);
            }
            function j(a, b) {
                this.mergeCells && this.mergeCells.shiftCollection("up", a, b);
            }
            Object.defineProperties(c, {
                MergeCells: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var k, l, m, n, o, p = ((k = a("plugins"), k && k.__esModule && k || {
                "default": k
            }).registerPlugin, (l = a("helpers/dom/event"), l && l.__esModule && l || {
                "default": l
            }).stopImmediatePropagation), q = (m = a("3rdparty/walkontable/src/cell/coords"), 
            m && m.__esModule && m || {
                "default": m
            }).WalkontableCellCoords, r = (n = a("3rdparty/walkontable/src/cell/range"), n && n.__esModule && n || {
                "default": n
            }).WalkontableCellRange, s = (o = a("3rdparty/walkontable/src/table"), o && o.__esModule && o || {
                "default": o
            }).WalkontableTable;
            e.prototype.canMergeRange = function(a) {
                return !a.isSingle();
            }, e.prototype.mergeRange = function(a) {
                if (this.canMergeRange(a)) {
                    var b = a.getTopLeftCorner(), c = a.getBottomRightCorner(), d = {};
                    d.row = b.row, d.col = b.col, d.rowspan = c.row - b.row + 1, d.colspan = c.col - b.col + 1, 
                    this.mergedCellInfoCollection.setInfo(d);
                }
            }, e.prototype.mergeOrUnmergeSelection = function(a) {
                var b = this.mergedCellInfoCollection.getInfo(a.from.row, a.from.col);
                b ? this.unmergeSelection(a.from) : this.mergeSelection(a);
            }, e.prototype.mergeSelection = function(a) {
                this.mergeRange(a);
            }, e.prototype.unmergeSelection = function(a) {
                var b = this.mergedCellInfoCollection.getInfo(a.row, a.col);
                this.mergedCellInfoCollection.removeInfo(b.row, b.col);
            }, e.prototype.applySpanProperties = function(a, b, c) {
                var d = this.mergedCellInfoCollection.getInfo(b, c);
                d ? d.row === b && d.col === c ? (a.setAttribute("rowspan", d.rowspan), a.setAttribute("colspan", d.colspan)) : (a.removeAttribute("rowspan"), 
                a.removeAttribute("colspan"), a.style.display = "none") : (a.removeAttribute("rowspan"), 
                a.removeAttribute("colspan"));
            }, e.prototype.modifyTransform = function(a, b, c) {
                var d = function(a, b) {
                    return b.row >= a.row && b.row <= a.row + a.rowspan - 1;
                }, e = function(a, b) {
                    return b.col >= a.col && b.col <= a.col + a.colspan - 1;
                }, f = function(a) {
                    return new q(b.to.row + a.row, b.to.col + a.col);
                }, g = {
                    row: c.row,
                    col: c.col
                };
                if ("modifyTransformStart" == a) {
                    this.lastDesiredCoords || (this.lastDesiredCoords = new q(null, null));
                    for (var h, i = new q(b.highlight.row, b.highlight.col), j = this.mergedCellInfoCollection.getInfo(i.row, i.col), k = 0, l = this.mergedCellInfoCollection.length; l > k; k++) {
                        var m = this.mergedCellInfoCollection[k];
                        if (m = new q(m.row + m.rowspan - 1, m.col + m.colspan - 1), b.includes(m)) {
                            h = !0;
                            break;
                        }
                    }
                    if (j) {
                        var n = new q(j.row, j.col), o = new q(j.row + j.rowspan - 1, j.col + j.colspan - 1), p = new r(n, n, o);
                        p.includes(this.lastDesiredCoords) || (this.lastDesiredCoords = new q(null, null)), 
                        g.row = this.lastDesiredCoords.row ? this.lastDesiredCoords.row - i.row : g.row, 
                        g.col = this.lastDesiredCoords.col ? this.lastDesiredCoords.col - i.col : g.col, 
                        c.row > 0 ? g.row = j.row + j.rowspan - 1 - i.row + c.row : c.row < 0 && (g.row = i.row - j.row + c.row), 
                        c.col > 0 ? g.col = j.col + j.colspan - 1 - i.col + c.col : c.col < 0 && (g.col = i.col - j.col + c.col);
                    }
                    var s = new q(b.highlight.row + g.row, b.highlight.col + g.col), t = this.mergedCellInfoCollection.getInfo(s.row, s.col);
                    t && (this.lastDesiredCoords = s, g = {
                        row: t.row - i.row,
                        col: t.col - i.col
                    });
                } else if ("modifyTransformEnd" == a) for (var k = 0, l = this.mergedCellInfoCollection.length; l > k; k++) {
                    var u = this.mergedCellInfoCollection[k], n = new q(u.row, u.col), o = new q(u.row + u.rowspan - 1, u.col + u.colspan - 1), v = new r(n, n, o), w = b.getBordersSharedWith(v);
                    if (v.isEqual(b)) b.setDirection("NW-SE"); else if (w.length > 0) {
                        var x = b.highlight.isEqual(v.from);
                        w.indexOf("top") > -1 ? b.to.isSouthEastOf(v.from) && x ? b.setDirection("NW-SE") : b.to.isSouthWestOf(v.from) && x && b.setDirection("NE-SW") : w.indexOf("bottom") > -1 && (b.to.isNorthEastOf(v.from) && x ? b.setDirection("SW-NE") : b.to.isNorthWestOf(v.from) && x && b.setDirection("SE-NW"));
                    }
                    var s = f(g), y = d(u, s), z = e(u, s);
                    b.includesRange(v) && (v.includes(s) || y || z) && (y && (g.row < 0 ? g.row -= u.rowspan - 1 : g.row > 0 && (g.row += u.rowspan - 1)), 
                    z && (g.col < 0 ? g.col -= u.colspan - 1 : g.col > 0 && (g.col += u.colspan - 1)));
                }
                0 !== g.row && (c.row = g.row), 0 !== g.col && (c.col = g.col);
            }, e.prototype.shiftCollection = function(a, b, c) {
                var d = [ 0, 0 ];
                switch (a) {
                  case "right":
                    d[0] += 1;
                    break;

                  case "left":
                    d[0] -= 1;
                    break;

                  case "down":
                    d[1] += 1;
                    break;

                  case "up":
                    d[1] -= 1;
                }
                for (var e = 0; e < this.mergedCellInfoCollection.length; e++) {
                    var f = this.mergedCellInfoCollection[e];
                    "right" === a || "left" === a ? b <= f.col && (f.col += d[0]) : b <= f.row && (f.row += d[1]);
                }
            };
            var t = function() {
                var a = this, b = a.getSettings().mergeCells;
                b && (a.mergeCells || (a.mergeCells = new e(b)));
            }, u = function() {
                var a = this;
                a.mergeCells && (a.view.wt.wtTable.getCell = function(b) {
                    if (a.getSettings().mergeCells) {
                        var c = a.mergeCells.mergedCellInfoCollection.getInfo(b.row, b.col);
                        c && (b = c);
                    }
                    return s.prototype.getCell.call(this, b);
                });
            }, v = function() {
                var a = this, b = a.getSettings().mergeCells;
                if (b) if (a.mergeCells) {
                    if (a.mergeCells.mergedCellInfoCollection = new d(), Array.isArray(b)) for (var c = 0, f = b.length; f > c; c++) a.mergeCells.mergedCellInfoCollection.setInfo(b[c]);
                } else a.mergeCells = new e(b); else a.mergeCells && (a.mergeCells.mergedCellInfoCollection = new d());
            }, w = function(a) {
                if (this.mergeCells) {
                    var b = (a.ctrlKey || a.metaKey) && !a.altKey;
                    b && 77 === a.keyCode && (this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()), 
                    this.render(), p(a));
                }
            }, x = function(a) {
                this.getSettings().mergeCells && (a.items.push(Handsontable.plugins.ContextMenu.SEPARATOR), 
                a.items.push({
                    key: "mergeCells",
                    name: function() {
                        var a = this.getSelected(), b = this.mergeCells.mergedCellInfoCollection.getInfo(a[0], a[1]);
                        return b ? "Unmerge cells" : "Merge cells";
                    },
                    callback: function() {
                        this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()), this.render();
                    },
                    disabled: function() {
                        return !1;
                    }
                }));
            }, y = function(a, b, c, d, e, f) {
                this.mergeCells && this.mergeCells.applySpanProperties(a, b, c);
            }, z = function(a) {
                return function(b) {
                    var c = this.getSettings().mergeCells;
                    if (c) {
                        var d = this.getSelectedRange();
                        if (this.mergeCells.modifyTransform(a, d, b), "modifyTransformEnd" === a) {
                            var e = this.countRows(), f = this.countCols();
                            d.from.row < 0 ? d.from.row = 0 : d.from.row > 0 && d.from.row >= e && (d.from.row = d.from - 1), 
                            d.from.col < 0 ? d.from.col = 0 : d.from.col > 0 && d.from.col >= f && (d.from.col = f - 1);
                        }
                    }
                };
            }, A = function(a) {
                this.lastDesiredCoords = null;
                var b = this.getSettings().mergeCells;
                if (b) {
                    var c = this.getSelectedRange();
                    c.highlight = new q(c.highlight.row, c.highlight.col), c.to = a;
                    var d = !1;
                    do {
                        d = !1;
                        for (var e = 0, f = this.mergeCells.mergedCellInfoCollection.length; f > e; e++) {
                            var g = this.mergeCells.mergedCellInfoCollection[e], h = new q(g.row, g.col), i = new q(g.row + g.rowspan - 1, g.col + g.colspan - 1), j = new r(h, h, i);
                            c.expandByRange(j) && (a.row = c.to.row, a.col = c.to.col, d = !0);
                        }
                    } while (d);
                }
            }, B = function(a, b) {
                if (b && "area" == b) {
                    var c = this.getSettings().mergeCells;
                    if (c) for (var d = this.getSelectedRange(), e = new r(d.from, d.from, d.from), f = new r(d.to, d.to, d.to), g = 0, h = this.mergeCells.mergedCellInfoCollection.length; h > g; g++) {
                        var i = this.mergeCells.mergedCellInfoCollection[g], j = new q(i.row, i.col), k = new q(i.row + i.rowspan - 1, i.col + i.colspan - 1), l = new r(j, j, k);
                        e.expandByRange(l) && (a[0] = e.from.row, a[1] = e.from.col), f.expandByRange(l) && (a[2] = f.from.row, 
                        a[3] = f.from.col);
                    }
                }
            }, C = function(a, b, c) {
                var d = this.getSettings().mergeCells;
                if (d) {
                    var e = this.mergeCells.mergedCellInfoCollection.getInfo(a, b);
                    !e || e.row == a && e.col == b || (c.copyable = !1);
                }
            }, D = function(a) {
                var b = this.getSettings().mergeCells;
                if (b) for (var c, d = this.countCols(), e = 0; d > e; e++) {
                    if (c = this.mergeCells.mergedCellInfoCollection.getInfo(a.startRow, e), c && c.row < a.startRow) return a.startRow = c.row, 
                    D.call(this, a);
                    if (c = this.mergeCells.mergedCellInfoCollection.getInfo(a.endRow, e)) {
                        var f = c.row + c.rowspan - 1;
                        if (f > a.endRow) return a.endRow = f, D.call(this, a);
                    }
                }
            }, E = function(a) {
                var b = this.getSettings().mergeCells;
                if (b) for (var c, d = this.countRows(), e = 0; d > e; e++) {
                    if (c = this.mergeCells.mergedCellInfoCollection.getInfo(e, a.startColumn), c && c.col < a.startColumn) return a.startColumn = c.col, 
                    E.call(this, a);
                    if (c = this.mergeCells.mergedCellInfoCollection.getInfo(e, a.endColumn)) {
                        var f = c.col + c.colspan - 1;
                        if (f > a.endColumn) return a.endColumn = f, E.call(this, a);
                    }
                }
            }, F = function(a) {
                if (a && this.mergeCells) {
                    var b = this.mergeCells.mergedCellInfoCollection, c = this.getSelectedRange();
                    for (var d in b) if (c.highlight.row == b[d].row && c.highlight.col == b[d].col && c.to.row == b[d].row + b[d].rowspan - 1 && c.to.col == b[d].col + b[d].colspan - 1) return !1;
                }
                return a;
            };
            Handsontable.hooks.add("beforeInit", t), Handsontable.hooks.add("afterInit", u), 
            Handsontable.hooks.add("afterUpdateSettings", v), Handsontable.hooks.add("beforeKeyDown", w), 
            Handsontable.hooks.add("modifyTransformStart", z("modifyTransformStart")), Handsontable.hooks.add("modifyTransformEnd", z("modifyTransformEnd")), 
            Handsontable.hooks.add("beforeSetRangeEnd", A), Handsontable.hooks.add("beforeDrawBorders", B), 
            Handsontable.hooks.add("afterIsMultipleSelection", F), Handsontable.hooks.add("afterRenderer", y), 
            Handsontable.hooks.add("afterContextMenuDefaultOptions", x), Handsontable.hooks.add("afterGetCellMeta", C), 
            Handsontable.hooks.add("afterViewportRowCalculatorOverride", D), Handsontable.hooks.add("afterViewportColumnCalculatorOverride", E), 
            Handsontable.hooks.add("afterAutofillApplyValues", f), Handsontable.hooks.add("afterCreateCol", g), 
            Handsontable.hooks.add("afterRemoveCol", h), Handsontable.hooks.add("afterCreateRow", i), 
            Handsontable.hooks.add("afterRemoveRow", j), Handsontable.MergeCells = e;
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            "3rdparty/walkontable/src/cell/range": 6,
            "3rdparty/walkontable/src/table": 20,
            "helpers/dom/event": 45,
            plugins: 55
        } ],
        80: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                MultipleSelectionHandles: {
                    get: function() {
                        return o;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), i = h.getWindowScrollTop, j = h.hasClass, k = h.getWindowScrollLeft, l = (e = a("_base"), 
            e && e.__esModule && e || {
                "default": e
            })["default"], m = (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).EventManager, n = (g = a("plugins"), g && g.__esModule && g || {
                "default": g
            }).registerPlugin, o = function(a) {
                $traceurRuntime.superConstructor(p).call(this, a), this.dragged = [], this.eventManager = null, 
                this.lastSetCell = null;
            }, p = o;
            $traceurRuntime.createClass(o, {
                isEnabled: function() {
                    return Handsontable.mobileBrowser;
                },
                enablePlugin: function() {
                    this.enabled || (this.eventManager || (this.eventManager = new m(this)), this.registerListeners(), 
                    $traceurRuntime.superGet(this, p.prototype, "enablePlugin").call(this));
                },
                registerListeners: function() {
                    function a(a) {
                        if (1 === b.dragged.length) return b.dragged.splice(0, b.dragged.length), !0;
                        var c = b.dragged.indexOf(a);
                        return -1 == c ? !1 : void (0 === c ? b.dragged = b.dragged.slice(0, 1) : 1 == c && (b.dragged = b.dragged.slice(-1)));
                    }
                    var b = this;
                    this.eventManager.addEventListener(this.hot.rootElement, "touchstart", function(a) {
                        var c;
                        return j(a.target, "topLeftSelectionHandle-HitArea") ? (c = b.hot.getSelectedRange(), 
                        b.dragged.push("topLeft"), b.touchStartRange = {
                            width: c.getWidth(),
                            height: c.getHeight(),
                            direction: c.getDirection()
                        }, a.preventDefault(), !1) : j(a.target, "bottomRightSelectionHandle-HitArea") ? (c = b.hot.getSelectedRange(), 
                        b.dragged.push("bottomRight"), b.touchStartRange = {
                            width: c.getWidth(),
                            height: c.getHeight(),
                            direction: c.getDirection()
                        }, a.preventDefault(), !1) : void 0;
                    }), this.eventManager.addEventListener(this.hot.rootElement, "touchend", function(c) {
                        return j(c.target, "topLeftSelectionHandle-HitArea") ? (a.call(b, "topLeft"), b.touchStartRange = void 0, 
                        c.preventDefault(), !1) : j(c.target, "bottomRightSelectionHandle-HitArea") ? (a.call(b, "bottomRight"), 
                        b.touchStartRange = void 0, c.preventDefault(), !1) : void 0;
                    }), this.eventManager.addEventListener(this.hot.rootElement, "touchmove", function(a) {
                        var c, d, e, f, g, h, j, l = i(), m = k();
                        0 !== b.dragged.length && (c = document.elementFromPoint(a.touches[0].screenX - m, a.touches[0].screenY - l), 
                        c && c !== b.lastSetCell && ("TD" != c.nodeName && "TH" != c.nodeName || (d = b.hot.getCoords(c), 
                        -1 == d.col && (d.col = 0), e = b.hot.getSelectedRange(), f = e.getWidth(), g = e.getHeight(), 
                        h = e.getDirection(), 1 == f && 1 == g && b.hot.selection.setRangeEnd(d), j = b.getCurrentRangeCoords(e, d, b.touchStartRange.direction, h, b.dragged[0]), 
                        null !== j.start && b.hot.selection.setRangeStart(j.start), b.hot.selection.setRangeEnd(j.end), 
                        b.lastSetCell = c), a.preventDefault()));
                    });
                },
                getCurrentRangeCoords: function(a, b, c, d, e) {
                    var f = a.getTopLeftCorner(), g = a.getBottomRightCorner(), h = a.getBottomLeftCorner(), i = a.getTopRightCorner(), j = {
                        start: null,
                        end: null
                    };
                    switch (c) {
                      case "NE-SW":
                        switch (d) {
                          case "NE-SW":
                          case "NW-SE":
                            j = "topLeft" == e ? {
                                start: new WalkontableCellCoords(b.row, a.highlight.col),
                                end: new WalkontableCellCoords(h.row, b.col)
                            } : {
                                start: new WalkontableCellCoords(a.highlight.row, b.col),
                                end: new WalkontableCellCoords(b.row, f.col)
                            };
                            break;

                          case "SE-NW":
                            "bottomRight" == e && (j = {
                                start: new WalkontableCellCoords(g.row, b.col),
                                end: new WalkontableCellCoords(b.row, f.col)
                            });
                        }
                        break;

                      case "NW-SE":
                        switch (d) {
                          case "NE-SW":
                            "topLeft" == e ? j = {
                                start: b,
                                end: h
                            } : j.end = b;
                            break;

                          case "NW-SE":
                            "topLeft" == e ? j = {
                                start: b,
                                end: g
                            } : j.end = b;
                            break;

                          case "SE-NW":
                            "topLeft" == e ? j = {
                                start: b,
                                end: f
                            } : j.end = b;
                            break;

                          case "SW-NE":
                            "topLeft" == e ? j = {
                                start: b,
                                end: i
                            } : j.end = b;
                        }
                        break;

                      case "SW-NE":
                        switch (d) {
                          case "NW-SE":
                            j = "bottomRight" == e ? {
                                start: new WalkontableCellCoords(b.row, f.col),
                                end: new WalkontableCellCoords(h.row, b.col)
                            } : {
                                start: new WalkontableCellCoords(f.row, b.col),
                                end: new WalkontableCellCoords(b.row, g.col)
                            };
                            break;

                          case "SW-NE":
                            j = "topLeft" == e ? {
                                start: new WalkontableCellCoords(a.highlight.row, b.col),
                                end: new WalkontableCellCoords(b.row, g.col)
                            } : {
                                start: new WalkontableCellCoords(b.row, f.col),
                                end: new WalkontableCellCoords(f.row, b.col)
                            };
                            break;

                          case "SE-NW":
                            "bottomRight" == e ? j = {
                                start: new WalkontableCellCoords(b.row, i.col),
                                end: new WalkontableCellCoords(f.row, b.col)
                            } : "topLeft" == e && (j = {
                                start: h,
                                end: b
                            });
                        }
                        break;

                      case "SE-NW":
                        switch (d) {
                          case "NW-SE":
                          case "NE-SW":
                          case "SW-NE":
                            "topLeft" == e && (j.end = b);
                            break;

                          case "SE-NW":
                            "topLeft" == e ? j.end = b : j = {
                                start: b,
                                end: f
                            };
                        }
                    }
                    return j;
                },
                isDragged: function() {
                    return this.dragged.length > 0;
                }
            }, {}, l), n("multipleSelectionHandles", o);
        }, {
            _base: 56,
            eventManager: 40,
            "helpers/dom/element": 44,
            plugins: 55
        } ],
        81: [ function(a, b, c) {
            "use strict";
            function d() {}
            function e() {
                var a = this, b = a.getSettings().observeChanges;
                b ? (a.observer && h.call(a), f.call(a), j.call(a)) : b || h.call(a);
            }
            function f() {
                var a = this;
                a.observeChangesActive = !0, a.pauseObservingChanges = function() {
                    a.observeChangesActive = !1;
                }, a.resumeObservingChanges = function() {
                    a.observeChangesActive = !0;
                }, a.observedData = a.getData(), a.observer = o.observe(a.observedData, function(b) {
                    a.observeChangesActive && (g.call(a, b), a.render()), a.runHooks("afterChangesObserved");
                });
            }
            function g(a) {
                function b(a) {
                    var b;
                    return b = d(a), b = c(b);
                }
                function c(a) {
                    var b = [];
                    return a.filter(function(a) {
                        var c = e(a.path);
                        if (-1 != [ "add", "remove" ].indexOf(a.op) && !isNaN(c.col)) {
                            if (-1 != b.indexOf(c.col)) return !1;
                            b.push(c.col);
                        }
                        return !0;
                    });
                }
                function d(a) {
                    return a.filter(function(a) {
                        return !/[/]length/gi.test(a.path);
                    });
                }
                function e(a) {
                    var b = a.match(/^\/(\d+)\/?(.*)?$/);
                    return {
                        row: parseInt(b[1], 10),
                        col: /^\d*$/.test(b[2]) ? parseInt(b[2], 10) : b[2]
                    };
                }
                for (var f = this, g = b(a), h = 0, i = g.length; i > h; h++) {
                    var j = g[h], k = e(j.path);
                    switch (j.op) {
                      case "add":
                        isNaN(k.col) ? f.runHooks("afterCreateRow", k.row) : f.runHooks("afterCreateCol", k.col);
                        break;

                      case "remove":
                        isNaN(k.col) ? f.runHooks("afterRemoveRow", k.row, 1) : f.runHooks("afterRemoveCol", k.col, 1);
                        break;

                      case "replace":
                        f.runHooks("afterChange", [ k.row, k.col, null, j.value ], "external");
                    }
                }
            }
            function h() {
                var a = this;
                a.observer && (i.call(a), k.call(a));
            }
            function i() {
                var a = this;
                o.unobserve(a.observedData, a.observer), delete a.observedData, delete a.observeChangesActive, 
                delete a.pauseObservingChanges, delete a.resumeObservingChanges;
            }
            function j() {
                var a = this;
                a.addHook("afterDestroy", h), a.addHook("afterCreateRow", l), a.addHook("afterRemoveRow", l), 
                a.addHook("afterCreateCol", l), a.addHook("afterRemoveCol", l), a.addHook("afterChange", function(a, b) {
                    "loadData" != b && l.call(this);
                });
            }
            function k() {
                var a = this;
                a.removeHook("afterDestroy", h), a.removeHook("afterCreateRow", l), a.removeHook("afterRemoveRow", l), 
                a.removeHook("afterCreateCol", l), a.removeHook("afterRemoveCol", l), a.removeHook("afterChange", l);
            }
            function l() {
                var a = this;
                a.pauseObservingChanges(), a.addHookOnce("afterChangesObserved", function() {
                    a.resumeObservingChanges();
                });
            }
            Object.defineProperties(c, {
                ObserveChanges: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var m, n, o = ((m = a("plugins"), m && m.__esModule && m || {
                "default": m
            }).registerPlugin, (n = a("jsonpatch"), n && n.__esModule && n || {
                "default": n
            })["default"]);
            Handsontable.hooks.add("afterLoadData", e), Handsontable.hooks.add("afterUpdateSettings", e), 
            Handsontable.hooks.register("afterChangesObserved");
        }, {
            jsonpatch: "jsonpatch",
            plugins: 55
        } ],
        82: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b, c = function() {
                    window.localStorage[a + "__persistentStateKeys"] = JSON.stringify(b);
                }, d = function() {
                    var c = window.localStorage[a + "__persistentStateKeys"], d = "string" == typeof c ? JSON.parse(c) : void 0;
                    b = d ? d : [];
                }, e = function() {
                    b = [], c();
                };
                d(), this.saveValue = function(d, e) {
                    window.localStorage[a + "_" + d] = JSON.stringify(e), -1 == b.indexOf(d) && (b.push(d), 
                    c());
                }, this.loadValue = function(b, c) {
                    b = "undefined" == typeof b ? c : b;
                    var d = window.localStorage[a + "_" + b];
                    return "undefined" == typeof d ? void 0 : JSON.parse(d);
                }, this.reset = function(b) {
                    window.localStorage.removeItem(a + "_" + b);
                }, this.resetAll = function() {
                    for (var c = 0; c < b.length; c++) window.localStorage.removeItem(a + "_" + b[c]);
                    e();
                };
            }
            function e() {
                function a() {
                    var a = this;
                    for (var b in e) e.hasOwnProperty(b) && a.addHook(b, e[b]);
                }
                function b() {
                    var a = this;
                    for (var b in e) e.hasOwnProperty(b) && a.removeHook(b, e[b]);
                }
                var c = this;
                this.init = function() {
                    var e = this, f = e.getSettings().persistentState;
                    return c.enabled = !!f, c.enabled ? (e.storage || (e.storage = new d(e.rootElement.id)), 
                    e.resetState = c.resetValue, void a.call(e)) : void b.call(e);
                }, this.saveValue = function(a, b) {
                    var c = this;
                    c.storage.saveValue(a, b);
                }, this.loadValue = function(a, b) {
                    var c = this;
                    b.value = c.storage.loadValue(a);
                }, this.resetValue = function(a) {
                    var b = this;
                    "undefined" == typeof a ? b.storage.resetAll() : b.storage.reset(a);
                };
                var e = {
                    persistentStateSave: c.saveValue,
                    persistentStateLoad: c.loadValue,
                    persistentStateReset: c.resetValue
                };
                for (var f in e) e.hasOwnProperty(f) && Handsontable.hooks.register(f);
            }
            Object.defineProperties(c, {
                HandsontablePersistentState: {
                    get: function() {
                        return e;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var f, g = ((f = a("plugins"), f && f.__esModule && f || {
                "default": f
            }).registerPlugin, new e());
            Handsontable.hooks.add("beforeInit", g.init), Handsontable.hooks.add("afterUpdateSettings", g.init);
        }, {
            plugins: 55
        } ],
        83: [ function(a, b, c) {
            "use strict";
            function d() {
                var a = this, b = !!a.getSettings().search;
                b ? a.search = new Handsontable.Search(a) : delete a.search;
            }
            var e, f, g = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), h = g.addClass, i = g.removeClass, j = (f = a("renderers"), f && f.__esModule && f || {
                "default": f
            }), k = j.registerRenderer, l = j.getRenderer;
            Handsontable.Search = function(a) {
                this.query = function(b, c, d) {
                    var e = a.countRows(), f = a.countCols(), g = [];
                    c || (c = Handsontable.Search.global.getDefaultCallback()), d || (d = Handsontable.Search.global.getDefaultQueryMethod());
                    for (var h = 0; e > h; h++) for (var i = 0; f > i; i++) {
                        var j = a.getDataAtCell(h, i), k = a.getCellMeta(h, i), l = k.search.callback || c, m = k.search.queryMethod || d, n = m(b, j);
                        if (n) {
                            var o = {
                                row: h,
                                col: i,
                                data: j
                            };
                            g.push(o);
                        }
                        l && l(a, h, i, j, n);
                    }
                    return g;
                };
            }, Handsontable.Search.DEFAULT_CALLBACK = function(a, b, c, d, e) {
                a.getCellMeta(b, c).isSearchResult = e;
            }, Handsontable.Search.DEFAULT_QUERY_METHOD = function(a, b) {
                return "undefined" != typeof a && null != a && a.toLowerCase && 0 !== a.length ? "undefined" == typeof b || null == b ? !1 : -1 != b.toString().toLowerCase().indexOf(a.toLowerCase()) : !1;
            }, Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS = "htSearchResult", Handsontable.Search.global = function() {
                var a = Handsontable.Search.DEFAULT_CALLBACK, b = Handsontable.Search.DEFAULT_QUERY_METHOD, c = Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS;
                return {
                    getDefaultCallback: function() {
                        return a;
                    },
                    setDefaultCallback: function(b) {
                        a = b;
                    },
                    getDefaultQueryMethod: function() {
                        return b;
                    },
                    setDefaultQueryMethod: function(a) {
                        b = a;
                    },
                    getDefaultSearchResultClass: function() {
                        return c;
                    },
                    setDefaultSearchResultClass: function(a) {
                        c = a;
                    }
                };
            }(), Handsontable.SearchCellDecorator = function(a, b, c, d, e, f, g) {
                var j = null !== g.search && "object" == typeof g.search && g.search.searchResultClass || Handsontable.Search.global.getDefaultSearchResultClass();
                g.isSearchResult ? h(b, j) : i(b, j);
            };
            var m = l("base");
            k("base", function(a, b, c, d, e, f, g) {
                m.apply(this, arguments), Handsontable.SearchCellDecorator.apply(this, arguments);
            }), Handsontable.hooks.add("afterInit", d), Handsontable.hooks.add("afterUpdateSettings", d);
        }, {
            "helpers/dom/element": 44,
            renderers: 86
        } ],
        84: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                TouchScroll: {
                    get: function() {
                        return l;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), h = g.addClass, i = g.removeClass, j = (e = a("_base"), e && e.__esModule && e || {
                "default": e
            })["default"], k = (f = a("plugins"), f && f.__esModule && f || {
                "default": f
            }).registerPlugin, l = function(a) {
                var b = this;
                $traceurRuntime.superConstructor(m).call(this, a), this.hot.addHook("afterInit", function() {
                    return b.afterInit();
                }), this.hot.addHook("afterUpdateSettings", function() {
                    return b.onAfterUpdateSettings();
                }), this.scrollbars = [], this.clones = [];
            }, m = l;
            $traceurRuntime.createClass(l, {
                afterInit: function() {
                    this.registerEvents(), this.onAfterUpdateSettings();
                },
                onAfterUpdateSettings: function() {
                    var a = this;
                    this.hot.addHookOnce("afterRender", function() {
                        var b = a.hot.view.wt.wtOverlays;
                        a.scrollbars = [], a.scrollbars.push(b.topOverlay), b.bottomOverlay.clone && a.scrollbars.push(b.bottomOverlay), 
                        a.scrollbars.push(b.leftOverlay), b.topLeftCornerOverlay && a.scrollbars.push(b.topLeftCornerOverlay), 
                        b.bottomLeftCornerOverlay && b.bottomLeftCornerOverlay.clone && a.scrollbars.push(b.bottomLeftCornerOverlay), 
                        a.clones = [], b.topOverlay.needFullRender && a.clones.push(b.topOverlay.clone.wtTable.holder.parentNode), 
                        b.bottomOverlay.needFullRender && a.clones.push(b.bottomOverlay.clone.wtTable.holder.parentNode), 
                        b.leftOverlay.needFullRender && a.clones.push(b.leftOverlay.clone.wtTable.holder.parentNode), 
                        b.topLeftCornerOverlay && a.clones.push(b.topLeftCornerOverlay.clone.wtTable.holder.parentNode), 
                        b.bottomLeftCornerOverlay && b.bottomLeftCornerOverlay.clone && a.clones.push(b.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);
                    });
                },
                registerEvents: function() {
                    var a = this;
                    this.hot.addHook("beforeTouchScroll", function() {
                        return a.onBeforeTouchScroll();
                    }), this.hot.addHook("afterMomentumScroll", function() {
                        return a.onAfterMomentumScroll();
                    });
                },
                onBeforeTouchScroll: function() {
                    Handsontable.freezeOverlays = !0;
                    for (var a = 0, b = this.clones.length; b > a; a++) h(this.clones[a], "hide-tween");
                },
                onAfterMomentumScroll: function() {
                    Handsontable.freezeOverlays = !1;
                    for (var a = this, b = 0, c = this.clones.length; c > b; b++) i(this.clones[b], "hide-tween");
                    for (var d = 0, e = this.clones.length; e > d; d++) h(this.clones[d], "show-tween");
                    setTimeout(function() {
                        for (var b = 0, c = a.clones.length; c > b; b++) i(a.clones[b], "show-tween");
                    }, 400);
                    for (var f = 0, g = this.scrollbars.length; g > f; f++) this.scrollbars[f].refresh(), 
                    this.scrollbars[f].resetFixedPosition();
                    this.hot.view.wt.wtOverlays.syncScrollWithMaster();
                }
            }, {}, j), k("touchScroll", l);
        }, {
            _base: 56,
            "helpers/dom/element": 44,
            plugins: 55
        } ],
        85: [ function(a, b, c) {
            "use strict";
            function d() {
                var a = this, b = "undefined" == typeof a.getSettings().undo || a.getSettings().undo;
                b ? a.undoRedo || (a.undoRedo = new Handsontable.UndoRedo(a), g(a), a.addHook("beforeKeyDown", e), 
                a.addHook("afterChange", f)) : a.undoRedo && (delete a.undoRedo, h(a), a.removeHook("beforeKeyDown", e), 
                a.removeHook("afterChange", f));
            }
            function e(a) {
                var b = this, c = (a.ctrlKey || a.metaKey) && !a.altKey;
                c && (89 === a.keyCode || a.shiftKey && 90 === a.keyCode ? (b.undoRedo.redo(), n(a)) : 90 === a.keyCode && (b.undoRedo.undo(), 
                n(a)));
            }
            function f(a, b) {
                var c = this;
                return "loadData" == b ? c.undoRedo.clear() : void 0;
            }
            function g(a) {
                a.undo = function() {
                    return a.undoRedo.undo();
                }, a.redo = function() {
                    return a.undoRedo.redo();
                }, a.isUndoAvailable = function() {
                    return a.undoRedo.isUndoAvailable();
                }, a.isRedoAvailable = function() {
                    return a.undoRedo.isRedoAvailable();
                }, a.clearUndo = function() {
                    return a.undoRedo.clear();
                };
            }
            function h(a) {
                delete a.undo, delete a.redo, delete a.isUndoAvailable, delete a.isRedoAvailable, 
                delete a.clearUndo;
            }
            var i, j, k = (i = a("helpers/object"), i && i.__esModule && i || {
                "default": i
            }), l = k.inherit, m = k.deepClone, n = (j = a("helpers/dom/event"), j && j.__esModule && j || {
                "default": j
            }).stopImmediatePropagation;
            Handsontable.UndoRedo = function(a) {
                var b = this;
                this.instance = a, this.doneActions = [], this.undoneActions = [], this.ignoreNewActions = !1, 
                a.addHook("afterChange", function(a, c) {
                    if (a) {
                        var d = new Handsontable.UndoRedo.ChangeAction(a);
                        b.done(d);
                    }
                }), a.addHook("afterCreateRow", function(a, c, d) {
                    if (!d) {
                        var e = new Handsontable.UndoRedo.CreateRowAction(a, c);
                        b.done(e);
                    }
                }), a.addHook("beforeRemoveRow", function(a, c) {
                    var d = b.instance.getData();
                    a = (d.length + a) % d.length;
                    var e = d.slice(a, a + c), f = new Handsontable.UndoRedo.RemoveRowAction(a, e);
                    b.done(f);
                }), a.addHook("afterCreateCol", function(a, c, d) {
                    if (!d) {
                        var e = new Handsontable.UndoRedo.CreateColumnAction(a, c);
                        b.done(e);
                    }
                }), a.addHook("beforeRemoveCol", function(c, d) {
                    var e = b.instance.getData();
                    c = (b.instance.countCols() + c) % b.instance.countCols();
                    for (var f = [], g = 0, h = e.length; h > g; g++) f[g] = e[g].slice(c, c + d);
                    var i;
                    Array.isArray(a.getSettings().colHeaders) && (i = a.getSettings().colHeaders.slice(c, c + f.length));
                    var j = new Handsontable.UndoRedo.RemoveColumnAction(c, f, i);
                    b.done(j);
                }), a.addHook("beforeCellAlignment", function(a, c, d, e) {
                    var f = new Handsontable.UndoRedo.CellAlignmentAction(a, c, d, e);
                    b.done(f);
                });
            }, Handsontable.UndoRedo.prototype.done = function(a) {
                this.ignoreNewActions || (this.doneActions.push(a), this.undoneActions.length = 0);
            }, Handsontable.UndoRedo.prototype.undo = function() {
                if (this.isUndoAvailable()) {
                    var a = this.doneActions.pop();
                    this.ignoreNewActions = !0;
                    var b = this;
                    a.undo(this.instance, function() {
                        b.ignoreNewActions = !1, b.undoneActions.push(a);
                    });
                }
            }, Handsontable.UndoRedo.prototype.redo = function() {
                if (this.isRedoAvailable()) {
                    var a = this.undoneActions.pop();
                    this.ignoreNewActions = !0;
                    var b = this;
                    a.redo(this.instance, function() {
                        b.ignoreNewActions = !1, b.doneActions.push(a);
                    });
                }
            }, Handsontable.UndoRedo.prototype.isUndoAvailable = function() {
                return this.doneActions.length > 0;
            }, Handsontable.UndoRedo.prototype.isRedoAvailable = function() {
                return this.undoneActions.length > 0;
            }, Handsontable.UndoRedo.prototype.clear = function() {
                this.doneActions.length = 0, this.undoneActions.length = 0;
            }, Handsontable.UndoRedo.Action = function() {}, Handsontable.UndoRedo.Action.prototype.undo = function() {}, 
            Handsontable.UndoRedo.Action.prototype.redo = function() {}, Handsontable.UndoRedo.ChangeAction = function(a) {
                this.changes = a;
            }, l(Handsontable.UndoRedo.ChangeAction, Handsontable.UndoRedo.Action), Handsontable.UndoRedo.ChangeAction.prototype.undo = function(a, b) {
                for (var c = m(this.changes), d = a.countEmptyRows(!0), e = a.countEmptyCols(!0), f = 0, g = c.length; g > f; f++) c[f].splice(3, 1);
                a.addHookOnce("afterChange", b), a.setDataAtRowProp(c, null, null, "undo");
                for (var f = 0, g = c.length; g > f; f++) a.getSettings().minSpareRows && c[f][0] + 1 + a.getSettings().minSpareRows === a.countRows() && d == a.getSettings().minSpareRows && (a.alter("remove_row", parseInt(c[f][0] + 1, 10), a.getSettings().minSpareRows), 
                a.undoRedo.doneActions.pop()), a.getSettings().minSpareCols && c[f][1] + 1 + a.getSettings().minSpareCols === a.countCols() && e == a.getSettings().minSpareCols && (a.alter("remove_col", parseInt(c[f][1] + 1, 10), a.getSettings().minSpareCols), 
                a.undoRedo.doneActions.pop());
            }, Handsontable.UndoRedo.ChangeAction.prototype.redo = function(a, b) {
                for (var c = m(this.changes), d = 0, e = c.length; e > d; d++) c[d].splice(2, 1);
                a.addHookOnce("afterChange", b), a.setDataAtRowProp(c, null, null, "redo");
            }, Handsontable.UndoRedo.CreateRowAction = function(a, b) {
                this.index = a, this.amount = b;
            }, l(Handsontable.UndoRedo.CreateRowAction, Handsontable.UndoRedo.Action), Handsontable.UndoRedo.CreateRowAction.prototype.undo = function(a, b) {
                var c = a.countRows(), d = a.getSettings().minSpareRows;
                this.index >= c && this.index - d < c && (this.index -= d), a.addHookOnce("afterRemoveRow", b), 
                a.alter("remove_row", this.index, this.amount);
            }, Handsontable.UndoRedo.CreateRowAction.prototype.redo = function(a, b) {
                a.addHookOnce("afterCreateRow", b), a.alter("insert_row", this.index + 1, this.amount);
            }, Handsontable.UndoRedo.RemoveRowAction = function(a, b) {
                this.index = a, this.data = b;
            }, l(Handsontable.UndoRedo.RemoveRowAction, Handsontable.UndoRedo.Action), Handsontable.UndoRedo.RemoveRowAction.prototype.undo = function(a, b) {
                var c = [ this.index, 0 ];
                Array.prototype.push.apply(c, this.data), Array.prototype.splice.apply(a.getData(), c), 
                a.addHookOnce("afterRender", b), a.render();
            }, Handsontable.UndoRedo.RemoveRowAction.prototype.redo = function(a, b) {
                a.addHookOnce("afterRemoveRow", b), a.alter("remove_row", this.index, this.data.length);
            }, Handsontable.UndoRedo.CreateColumnAction = function(a, b) {
                this.index = a, this.amount = b;
            }, l(Handsontable.UndoRedo.CreateColumnAction, Handsontable.UndoRedo.Action), Handsontable.UndoRedo.CreateColumnAction.prototype.undo = function(a, b) {
                a.addHookOnce("afterRemoveCol", b), a.alter("remove_col", this.index, this.amount);
            }, Handsontable.UndoRedo.CreateColumnAction.prototype.redo = function(a, b) {
                a.addHookOnce("afterCreateCol", b), a.alter("insert_col", this.index + 1, this.amount);
            }, Handsontable.UndoRedo.CellAlignmentAction = function(a, b, c, d) {
                this.stateBefore = a, this.range = b, this.type = c, this.alignment = d;
            }, Handsontable.UndoRedo.CellAlignmentAction.prototype.undo = function(a, b) {
                if (a.getPlugin("contextMenu").isEnabled()) {
                    for (var c = this.range.from.row; c <= this.range.to.row; c++) for (var d = this.range.from.col; d <= this.range.to.col; d++) a.setCellMeta(c, d, "className", this.stateBefore[c][d] || " htLeft");
                    a.addHookOnce("afterRender", b), a.render();
                }
            }, Handsontable.UndoRedo.CellAlignmentAction.prototype.redo = function(a, b) {
                a.getPlugin("contextMenu").isEnabled() && (a.selectCell(this.range.from.row, this.range.from.col, this.range.to.row, this.range.to.col), 
                a.getPlugin("contextMenu").executeCommand("alignment:" + this.alignment.replace("ht", "").toLowerCase()), 
                a.addHookOnce("afterRender", b), a.render());
            }, Handsontable.UndoRedo.RemoveColumnAction = function(a, b, c) {
                this.index = a, this.data = b, this.amount = this.data[0].length, this.headers = c;
            }, l(Handsontable.UndoRedo.RemoveColumnAction, Handsontable.UndoRedo.Action), Handsontable.UndoRedo.RemoveColumnAction.prototype.undo = function(a, b) {
                for (var c, d, e = 0, f = a.getData().length; f > e; e++) c = a.getSourceDataAtRow(e), 
                d = [ this.index, 0 ], Array.prototype.push.apply(d, this.data[e]), Array.prototype.splice.apply(c, d);
                "undefined" != typeof this.headers && (d = [ this.index, 0 ], Array.prototype.push.apply(d, this.headers), 
                Array.prototype.splice.apply(a.getSettings().colHeaders, d)), a.addHookOnce("afterRender", b), 
                a.render();
            }, Handsontable.UndoRedo.RemoveColumnAction.prototype.redo = function(a, b) {
                a.addHookOnce("afterRemoveCol", b), a.alter("remove_col", this.index, this.amount);
            }, Handsontable.hooks.add("afterInit", d), Handsontable.hooks.add("afterUpdateSettings", d);
        }, {
            "helpers/dom/event": 45,
            "helpers/object": 49
        } ],
        86: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                var c;
                i[a] = b, c = h(a) + "Renderer", Handsontable.renderers[c] = b, Handsontable[c] = b;
            }
            function e(a) {
                if ("function" == typeof a) return a;
                if ("string" != typeof a) throw Error('Only strings and functions can be passed as "renderer" parameter');
                if (!(a in i)) throw Error('No editor registered under name "' + a + '"');
                return i[a];
            }
            function f(a) {
                return a in i;
            }
            Object.defineProperties(c, {
                registerRenderer: {
                    get: function() {
                        return d;
                    }
                },
                getRenderer: {
                    get: function() {
                        return e;
                    }
                },
                hasRenderer: {
                    get: function() {
                        return f;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var g, h = (g = a("helpers/string"), g && g.__esModule && g || {
                "default": g
            }).toUpperCaseFirst, i = {};
            Handsontable.renderers = Handsontable.renderers || {}, Handsontable.renderers.registerRenderer = d, 
            Handsontable.renderers.getRenderer = e;
        }, {
            "helpers/string": 51
        } ],
        87: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, g) {
                g.className && (b.className ? b.className = b.className + " " + g.className : b.className = g.className), 
                g.readOnly && h(b, g.readOnlyCellClassName), g.valid === !1 && g.invalidCellClassName ? h(b, g.invalidCellClassName) : i(b, g.invalidCellClassName), 
                g.wordWrap === !1 && g.noWordWrapClassName && h(b, g.noWordWrapClassName), !f && g.placeholder && h(b, g.placeholderCellClassName);
            }
            Object.defineProperties(c, {
                cellDecorator: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), h = g.addClass, i = g.removeClass, j = (f = a("renderers"), f && f.__esModule && f || {
                "default": f
            }).registerRenderer;
            j("base", d), Handsontable.renderers.cellDecorator = d;
        }, {
            "helpers/dom/element": 44,
            renderers: 86
        } ],
        88: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, g) {
                var h = (q.cloneNode(!0), r.cloneNode(!0));
                if (n("text")(a, b, c, d, e, f, g), b.appendChild(h), j(b, "htAutocomplete"), b.firstChild || b.appendChild(document.createTextNode(String.fromCharCode(160))), 
                !a.acArrowListener) {
                    var i = l(a);
                    a.acArrowListener = function(e) {
                        k(e.target, "htAutocompleteArrow") && a.view.wt.getSetting("onCellDblClick", null, new p(c, d), b);
                    }, i.addEventListener(a.rootElement, "mousedown", a.acArrowListener), a.addHookOnce("afterDestroy", function() {
                        i.destroy();
                    });
                }
            }
            Object.defineProperties(c, {
                autocompleteRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), j = i.addClass, k = i.hasClass, l = (i.empty, (f = a("eventManager"), f && f.__esModule && f || {
                "default": f
            }).eventManager), m = (g = a("renderers"), g && g.__esModule && g || {
                "default": g
            }), n = m.getRenderer, o = m.registerRenderer, p = (h = a("3rdparty/walkontable/src/cell/coords"), 
            h && h.__esModule && h || {
                "default": h
            }).WalkontableCellCoords, q = document.createElement("DIV");
            q.className = "htAutocompleteWrapper";
            var r = document.createElement("DIV");
            r.className = "htAutocompleteArrow", r.appendChild(document.createTextNode(String.fromCharCode(9660)));
            o("autocomplete", d);
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            eventManager: 40,
            "helpers/dom/element": 44,
            renderers: 86
        } ],
        89: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, h, i, j) {
                function k(a) {
                    var b = [ v.SPACE, v.ENTER, v.DELETE, v.BACKSPACE ];
                    -1 === b.indexOf(a.keyCode) || z(a) || n(function() {
                        y(a), a.preventDefault();
                    }), a.keyCode != v.SPACE && a.keyCode != v.ENTER || l(), a.keyCode != v.DELETE && a.keyCode != v.BACKSPACE || l(!1);
                }
                function l() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    n(function(b) {
                        for (var c = 0, d = b.length; d > c; c++) {
                            if (q(b[c], B) && null === a) return;
                            m(b[c], a);
                        }
                    });
                }
                function m(a) {
                    var b = void 0 !== arguments[1] ? arguments[1] : null;
                    null === b ? a.checked = !a.checked : a.checked = b, t.fireEvent(a, "change");
                }
                function n(b) {
                    for (var c = a.getSelectedRange(), d = c.getTopLeftCorner(), e = c.getBottomRightCorner(), f = d.row; f <= e.row; f++) for (var g = d.col; g <= e.col; g++) {
                        var h = a.getCell(f, g), i = a.getCellMeta(f, g), j = h.querySelectorAll("input[type=checkbox]");
                        j.length > 0 && !i.readOnly && b(j);
                    }
                }
                var t = new s(a), u = e(), w = j.label, C = !1;
                if ("undefined" == typeof j.checkedTemplate && (j.checkedTemplate = !0), "undefined" == typeof j.uncheckedTemplate && (j.uncheckedTemplate = !1), 
                o(b), i === j.checkedTemplate || r(i, j.checkedTemplate) ? u.checked = !0 : i === j.uncheckedTemplate || r(i, j.uncheckedTemplate) ? u.checked = !1 : null === i ? p(u, "noValue") : (u.style.display = "none", 
                p(u, B), C = !0), !C && w) {
                    var D = "";
                    w.value ? D = "function" == typeof w.value ? w.value.call(this, c, d, h, i) : w.value : w.property && (D = a.getDataAtRowProp(c, w.property));
                    var E = f(D);
                    "before" === w.position ? E.appendChild(u) : E.insertBefore(u, E.firstChild), u = E;
                }
                b.appendChild(u), C && b.appendChild(document.createTextNode("#bad-value#")), j.readOnly ? t.addEventListener(u, "click", g) : (t.addEventListener(u, "mousedown", x), 
                t.addEventListener(u, "mouseup", x), t.addEventListener(u, "change", function(b) {
                    a.setDataAtRowProp(c, h, b.target.checked ? j.checkedTemplate : j.uncheckedTemplate);
                })), A.has(a) || (A.set(a, !0), a.addHook("beforeKeyDown", k));
            }
            function e() {
                var a = document.createElement("input");
                return a.className = "htCheckboxRendererInput", a.type = "checkbox", a.setAttribute("autocomplete", "off"), 
                a.cloneNode(!1);
            }
            function f(a) {
                var b = document.createElement("label");
                return b.className = "htCheckboxRendererLabel", b.appendChild(document.createTextNode(a)), 
                b.cloneNode(!0);
            }
            function g(a) {
                a.preventDefault();
            }
            Object.defineProperties(c, {
                checkboxRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var h, i, j, k, l, m, n = (h = a("helpers/dom/element"), h && h.__esModule && h || {
                "default": h
            }), o = n.empty, p = n.addClass, q = n.hasClass, r = (i = a("helpers/string"), i && i.__esModule && i || {
                "default": i
            }).equalsIgnoreCase, s = (j = a("eventManager"), j && j.__esModule && j || {
                "default": j
            }).EventManager, t = (k = a("renderers"), k && k.__esModule && k || {
                "default": k
            }), u = (t.getRenderer, t.registerRenderer), v = (l = a("helpers/unicode"), l && l.__esModule && l || {
                "default": l
            }).KEY_CODES, w = (m = a("helpers/dom/event"), m && m.__esModule && m || {
                "default": m
            }), x = w.stopPropagation, y = w.stopImmediatePropagation, z = w.isImmediatePropagationStopped, A = new WeakMap(), B = "htBadValue";
            u("checkbox", d);
        }, {
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45,
            "helpers/string": 51,
            "helpers/unicode": 52,
            renderers: 86
        } ],
        90: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, h) {
                i("base").apply(this, arguments), g(b, f);
            }
            Object.defineProperties(c, {
                htmlRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }).fastInnerHTML, h = (f = a("renderers"), f && f.__esModule && f || {
                "default": f
            }), i = h.getRenderer, j = h.registerRenderer;
            j("html", d);
        }, {
            "helpers/dom/element": 44,
            renderers: 86
        } ],
        91: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, g) {
                n(f) && ("undefined" != typeof g.language && i.language(g.language), f = i(f).format(g.format || "0"), 
                j(b, "htNumeric")), l("text")(a, b, c, d, e, f, g);
            }
            Object.defineProperties(c, {
                numericRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i = (e = a("numeral"), e && e.__esModule && e || {
                "default": e
            })["default"], j = (f = a("helpers/dom/element"), f && f.__esModule && f || {
                "default": f
            }).addClass, k = (g = a("renderers"), g && g.__esModule && g || {
                "default": g
            }), l = k.getRenderer, m = k.registerRenderer, n = (h = a("helpers/number"), h && h.__esModule && h || {
                "default": h
            }).isNumeric;
            m("numeric", d);
        }, {
            "helpers/dom/element": 44,
            "helpers/number": 48,
            numeral: "numeral",
            renderers: 86
        } ],
        92: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, h) {
                i("text").apply(this, arguments), f = b.innerHTML;
                var j, k = h.hashLength || f.length, l = h.hashSymbol || "*";
                for (j = ""; j.split(l).length - 1 < k; j += l) ;
                g(b, j);
            }
            Object.defineProperties(c, {
                passwordRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }).fastInnerHTML, h = (f = a("renderers"), f && f.__esModule && f || {
                "default": f
            }), i = h.getRenderer, j = h.registerRenderer;
            j("password", d);
        }, {
            "helpers/dom/element": 44,
            renderers: 86
        } ],
        93: [ function(a, b, c) {
            "use strict";
            function d(a, b, c, d, e, f, g) {
                m("base").apply(this, arguments), !f && g.placeholder && (f = g.placeholder);
                var h = k(f);
                if (a.getSettings().trimWhitespace || (h = h.replace(/ /g, String.fromCharCode(160))), 
                g.rendererTemplate) {
                    i(b);
                    var l = document.createElement("TEMPLATE");
                    l.setAttribute("bind", "{{}}"), l.innerHTML = g.rendererTemplate, HTMLTemplateElement.decorate(l), 
                    l.model = a.getSourceDataAtRow(c), b.appendChild(l);
                } else j(b, h);
            }
            Object.defineProperties(c, {
                textRenderer: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), i = h.empty, j = h.fastInnerText, k = (f = a("helpers/mixed"), f && f.__esModule && f || {
                "default": f
            }).stringify, l = (g = a("renderers"), g && g.__esModule && g || {
                "default": g
            }), m = l.getRenderer, n = l.registerRenderer;
            n("text", d);
        }, {
            "helpers/dom/element": 44,
            "helpers/mixed": 47,
            renderers: 86
        } ],
        94: [ function(a, b, c) {
            "use strict";
            !function(a) {
                function b(a) {
                    return {
                        configurable: !0,
                        enumerable: !1,
                        value: a,
                        writable: !0
                    };
                }
                function c() {
                    return "__$" + Math.floor(1e9 * Math.random()) + "$" + ++S + "$__";
                }
                function d(a) {
                    return X[a];
                }
                function e() {
                    var a = c();
                    return X[a] = !0, a;
                }
                function f(a) {
                    return "object" == typeof a && a instanceof i;
                }
                function g(a) {
                    return f(a) ? "symbol" : typeof a;
                }
                function h(a) {
                    var b = new i(a);
                    if (!(this instanceof h)) return b;
                    throw new TypeError("Symbol cannot be new'ed");
                }
                function i(a) {
                    var b = c();
                    I(this, V, {
                        value: this
                    }), I(this, T, {
                        value: b
                    }), I(this, U, {
                        value: a
                    }), k(this), W[b] = this;
                }
                function j(a) {
                    var b = a[Y];
                    return b && b.self === a ? b : Q(a) ? ($.hash.value = _++, $.self.value = a, Z.value = G(null, $), 
                    I(a, Y, Z), Z.value) : void 0;
                }
                function k(a) {
                    return j(a), J.apply(this, arguments);
                }
                function l(a) {
                    return j(a), O.apply(this, arguments);
                }
                function m(a) {
                    return j(a), P.apply(this, arguments);
                }
                function n(a) {
                    return W[a] || X[a];
                }
                function o(a) {
                    return f(a) ? a[T] : a;
                }
                function p(a) {
                    for (var b = [], c = 0; c < a.length; c++) n(a[c]) || b.push(a[c]);
                    return b;
                }
                function q(a) {
                    return p(L(a));
                }
                function r(a) {
                    return p(M(a));
                }
                function s(a) {
                    for (var b = [], c = L(a), d = 0; d < c.length; d++) {
                        var e = W[c[d]];
                        e && b.push(e);
                    }
                    return b;
                }
                function t(a, b) {
                    return K(a, o(b));
                }
                function u(a) {
                    return N.call(this, o(a));
                }
                function v(b) {
                    return a.traceur && a.traceur.options[b];
                }
                function w(a, b, c) {
                    return f(b) && (b = b[T]), I(a, b, c), a;
                }
                function x(a) {
                    I(a, "defineProperty", {
                        value: w
                    }), I(a, "getOwnPropertyNames", {
                        value: q
                    }), I(a, "getOwnPropertyDescriptor", {
                        value: t
                    }), I(a.prototype, "hasOwnProperty", {
                        value: u
                    }), I(a, "freeze", {
                        value: k
                    }), I(a, "preventExtensions", {
                        value: l
                    }), I(a, "seal", {
                        value: m
                    }), I(a, "keys", {
                        value: r
                    });
                }
                function y(a) {
                    for (var b = 1; b < arguments.length; b++) for (var c = L(arguments[b]), d = 0; d < c.length; d++) {
                        var e = c[d];
                        n(e) || !function(b, c) {
                            I(a, c, {
                                get: function() {
                                    return b[c];
                                },
                                enumerable: !0
                            });
                        }(arguments[b], c[d]);
                    }
                    return a;
                }
                function z(a) {
                    return null != a && ("object" == typeof a || "function" == typeof a);
                }
                function A(a) {
                    if (null == a) throw F();
                    return E(a);
                }
                function B(a) {
                    if (null == a) throw new TypeError("Value cannot be converted to an Object");
                    return a;
                }
                function C(a, b) {
                    a.Symbol || (a.Symbol = b, Object.getOwnPropertySymbols = s), a.Symbol.iterator || (a.Symbol.iterator = b("Symbol.iterator"));
                }
                function D(a) {
                    C(a, h), a.Reflect = a.Reflect || {}, a.Reflect.global = a.Reflect.global || a, 
                    x(a.Object);
                }
                if (!a.$traceurRuntime) {
                    var E = Object, F = TypeError, G = E.create, H = E.defineProperties, I = E.defineProperty, J = E.freeze, K = E.getOwnPropertyDescriptor, L = E.getOwnPropertyNames, M = E.keys, N = E.prototype.hasOwnProperty, O = Object.preventExtensions, P = Object.seal, Q = Object.isExtensible, R = b, S = 0, T = c(), U = c(), V = c(), W = G(null), X = G(null);
                    I(h.prototype, "constructor", b(h)), I(h.prototype, "toString", R(function() {
                        var a = this[V];
                        if (!v("symbols")) return a[T];
                        if (!a) throw TypeError("Conversion from symbol to string");
                        var b = a[U];
                        return void 0 === b && (b = ""), "Symbol(" + b + ")";
                    })), I(h.prototype, "valueOf", R(function() {
                        var a = this[V];
                        if (!a) throw TypeError("Conversion from symbol to string");
                        return v("symbols") ? a : a[T];
                    })), I(i.prototype, "constructor", b(h)), I(i.prototype, "toString", {
                        value: h.prototype.toString,
                        enumerable: !1
                    }), I(i.prototype, "valueOf", {
                        value: h.prototype.valueOf,
                        enumerable: !1
                    });
                    var Y = e(), Z = {
                        value: void 0
                    }, $ = {
                        hash: {
                            value: void 0
                        },
                        self: {
                            value: void 0
                        }
                    }, _ = 0;
                    k(i.prototype), D(a), a.$traceurRuntime = {
                        checkObjectCoercible: B,
                        createPrivateName: e,
                        defineProperties: H,
                        defineProperty: I,
                        exportStar: y,
                        getOwnHashObject: j,
                        getOwnPropertyDescriptor: K,
                        getOwnPropertyNames: L,
                        isObject: z,
                        isPrivateName: d,
                        isSymbolString: n,
                        keys: M,
                        setupGlobals: D,
                        toObject: A,
                        toProperty: o,
                        "typeof": g
                    };
                }
            }(window), function() {
                function a() {
                    for (var a, c = [], d = 0, e = 0; e < arguments.length; e++) {
                        var f = $traceurRuntime.checkObjectCoercible(arguments[e]);
                        if ("function" != typeof f[b(Symbol.iterator)]) throw new TypeError("Cannot spread non-iterable object.");
                        for (var g = f[b(Symbol.iterator)](); !(a = g.next()).done; ) c[d++] = a.value;
                    }
                    return c;
                }
                var b = $traceurRuntime.toProperty;
                $traceurRuntime.spread = a;
            }(), function() {
                function a(a, b) {
                    var c = p(a);
                    do {
                        var d = o(c, b);
                        if (d) return d;
                        c = p(c);
                    } while (c);
                }
                function b(a) {
                    return a.__proto__;
                }
                function c(a, b, c, e) {
                    return d(a, b, c).apply(a, e);
                }
                function d(b, c, d) {
                    var e = a(c, d);
                    return e ? e.get ? e.get.call(b) : e.value : void 0;
                }
                function e(b, c, d, e) {
                    var f = a(c, d);
                    if (f && f.set) return f.set.call(b, e), e;
                    throw k("super has no setter '" + d + "'.");
                }
                function f(a) {
                    for (var b = {}, c = s(a), d = 0; d < c.length; d++) {
                        var e = c[d];
                        b[e] = o(a, e);
                    }
                    for (var f = t(a), d = 0; d < f.length; d++) {
                        var g = f[d];
                        b[q(g)] = o(a, q(g));
                    }
                    return b;
                }
                function g(a, b, c, d) {
                    return n(b, "constructor", {
                        value: a,
                        configurable: !0,
                        enumerable: !1,
                        writable: !0
                    }), arguments.length > 3 ? ("function" == typeof d && (a.__proto__ = d), a.prototype = l(h(d), f(b))) : a.prototype = b, 
                    n(a, "prototype", {
                        configurable: !1,
                        writable: !1
                    }), m(a, f(c));
                }
                function h(a) {
                    if ("function" == typeof a) {
                        var b = a.prototype;
                        if (j(b) === b || null === b) return a.prototype;
                        throw new k("super prototype must be an Object or null");
                    }
                    if (null === a) return null;
                    throw new k("Super expression must either be null or a function, not " + typeof a + ".");
                }
                function i(a, b, d) {
                    null !== p(b) && c(a, b, "constructor", d);
                }
                var j = Object, k = TypeError, l = j.create, m = $traceurRuntime.defineProperties, n = $traceurRuntime.defineProperty, o = $traceurRuntime.getOwnPropertyDescriptor, p = Object.getPrototypeOf, q = $traceurRuntime.toProperty, r = Object, s = r.getOwnPropertyNames, t = r.getOwnPropertySymbols;
                $traceurRuntime.createClass = g, $traceurRuntime.defaultSuperCall = i, $traceurRuntime.superCall = c, 
                $traceurRuntime.superConstructor = b, $traceurRuntime.superGet = d, $traceurRuntime.superSet = e;
            }();
        }, {} ],
        95: [ function(a, b, c) {
            "use strict";
            function d(a) {
                var b = this;
                this.eventManager = u(a), this.instance = a, this.settings = a.getSettings();
                var c = a.rootElement.getAttribute("style");
                c && a.rootElement.setAttribute("data-originalstyle", c), l(a.rootElement, "handsontable");
                var d = document.createElement("TABLE");
                l(d, "htCore"), a.getSettings().tableClassName && l(d, a.getSettings().tableClassName), 
                this.THEAD = document.createElement("THEAD"), d.appendChild(this.THEAD), this.TBODY = document.createElement("TBODY"), 
                d.appendChild(this.TBODY), a.table = d, a.container.insertBefore(d, a.container.firstChild), 
                this.eventManager.addEventListener(a.rootElement, "mousedown", function(a) {
                    b.isTextSelectionAllowed(a.target) || (f(), a.preventDefault(), window.focus());
                }), this.eventManager.addEventListener(document.documentElement, "keyup", function(b) {
                    a.selection.isInProgress() && !b.shiftKey && a.selection.finish();
                });
                var e;
                this.isMouseDown = function() {
                    return e;
                }, this.eventManager.addEventListener(document.documentElement, "mouseup", function(b) {
                    a.selection.isInProgress() && 1 === b.which && a.selection.finish(), e = !1, t(document.activeElement) && a.unlisten();
                }), this.eventManager.addEventListener(document.documentElement, "mousedown", function(c) {
                    var d = c.target, f = c.x || c.clientX, g = c.y || c.clientY;
                    if (!e && a.rootElement) {
                        if (d === a.view.wt.wtTable.holder) {
                            var h = p();
                            if (document.elementFromPoint(f + h, g) !== a.view.wt.wtTable.holder || document.elementFromPoint(f, g + h) !== a.view.wt.wtTable.holder) return;
                        } else for (;d !== document.documentElement; ) {
                            if (null === d) {
                                if (c.isTargetWebComponent) break;
                                return;
                            }
                            if (d === a.rootElement) return;
                            d = d.parentNode;
                        }
                        b.settings.outsideClickDeselects ? a.deselectCell() : a.destroyEditor();
                    }
                }), this.eventManager.addEventListener(d, "selectstart", function(a) {
                    b.settings.fragmentSelection || a.preventDefault();
                });
                var f = function() {
                    window.getSelection ? window.getSelection().empty ? window.getSelection().empty() : window.getSelection().removeAllRanges && window.getSelection().removeAllRanges() : document.selection && document.selection.empty();
                }, g = [ new z({
                    className: "current",
                    border: {
                        width: 2,
                        color: "#5292F7",
                        cornerVisible: function() {
                            return b.settings.fillHandle && !b.isCellEdited() && !a.selection.isMultiple();
                        },
                        multipleSelectionHandlesVisible: function() {
                            return !b.isCellEdited() && !a.selection.isMultiple();
                        }
                    }
                }), new z({
                    className: "area",
                    border: {
                        width: 1,
                        color: "#89AFF9",
                        cornerVisible: function() {
                            return b.settings.fillHandle && !b.isCellEdited() && a.selection.isMultiple();
                        },
                        multipleSelectionHandlesVisible: function() {
                            return !b.isCellEdited() && a.selection.isMultiple();
                        }
                    }
                }), new z({
                    className: "highlight",
                    highlightRowClassName: b.settings.currentRowClassName,
                    highlightColumnClassName: b.settings.currentColClassName
                }), new z({
                    className: "fill",
                    border: {
                        width: 1,
                        color: "red"
                    }
                }) ];
                g.current = g[0], g.area = g[1], g.highlight = g[2], g.fill = g[3];
                var h = {
                    debug: function() {
                        return b.settings.debug;
                    },
                    externalRowCalculator: this.instance.getPlugin("autoRowSize") && this.instance.getPlugin("autoRowSize").isEnabled(),
                    table: d,
                    stretchH: this.settings.stretchH,
                    data: a.getDataAtCell,
                    totalRows: a.countRows,
                    totalColumns: a.countCols,
                    fixedColumnsLeft: function() {
                        return b.settings.fixedColumnsLeft;
                    },
                    fixedRowsTop: function() {
                        return b.settings.fixedRowsTop;
                    },
                    fixedRowsBottom: function() {
                        return b.settings.fixedRowsBottom;
                    },
                    minSpareRows: function() {
                        return b.settings.minSpareRows;
                    },
                    renderAllRows: b.settings.renderAllRows,
                    rowHeaders: function() {
                        var c = [];
                        return a.hasRowHeaders() && c.push(function(a, c) {
                            b.appendRowHeader(a, c);
                        }), Handsontable.hooks.run(a, "afterGetRowHeaderRenderers", c), c;
                    },
                    columnHeaders: function() {
                        var c = [];
                        return a.hasColHeaders() && c.push(function(a, c) {
                            b.appendColHeader(a, c);
                        }), Handsontable.hooks.run(a, "afterGetColumnHeaderRenderers", c), c;
                    },
                    columnWidth: a.getColWidth,
                    rowHeight: a.getRowHeight,
                    cellRenderer: function(a, c, d) {
                        var e = b.instance.colToProp(c), f = b.instance.getCellMeta(a, c), g = b.instance.getCellRenderer(f), h = b.instance.getDataAtRowProp(a, e);
                        g(b.instance, d, a, c, e, h, f), Handsontable.hooks.run(b.instance, "afterRenderer", d, a, c, e, h, f);
                    },
                    selections: g,
                    hideBorderOnMouseDownOver: function() {
                        return b.settings.fragmentSelection;
                    },
                    onCellMouseDown: function(c, d, f, g) {
                        var h, i, j = f.parentNode, k = j.parentNode;
                        if (a.listen(), b.activeWt = g, e = !0, Handsontable.hooks.run(a, "beforeOnCellMouseDown", c, d, f), 
                        a.selection.setSelectedHeaders(!1, !1), !x(c)) {
                            if (2 === c.button && a.selection.inInSelection(d)) ; else c.shiftKey ? d.row >= 0 && d.col >= 0 && a.selection.setRangeEnd(d) : (d.row < 0 || d.col < 0) && (d.row >= 0 || d.col >= 0) ? (d.row < 0 && (h = k.childNodes.length - Array.prototype.indexOf.call(k.childNodes, j) - 1, 
                            i = a.getHeaderColspan(d.col, h), a.selection.setSelectedHeaders(!1, !0), a.selectCell(0, d.col, a.countRows() - 1, d.col + Math.max(0, i - 1))), 
                            d.col < 0 && (a.selection.setSelectedHeaders(!0, !1), a.selectCell(d.row, 0, d.row, a.countCols() - 1))) : (d.row = d.row < 0 ? 0 : d.row, 
                            d.col = d.col < 0 ? 0 : d.col, a.selection.setRangeStart(d));
                            Handsontable.hooks.run(a, "afterOnCellMouseDown", c, d, f), b.activeWt = b.wt;
                        }
                    },
                    onCellMouseOver: function(c, d, f, g) {
                        b.activeWt = g, d.row >= 0 && d.col >= 0 ? e && a.selection.setRangeEnd(d) : e && (d.row < 0 && (a.selection.selectedHeader.cols ? (a.selection.setRangeEnd(new y(a.countRows() - 1, d.col)), 
                        a.selection.setSelectedHeaders(!1, !0)) : a.selection.setRangeEnd(new y(d.row, d.col))), 
                        d.col < 0 && (a.selection.selectedHeader.rows ? (a.selection.setRangeEnd(new y(d.row, a.countCols() - 1)), 
                        a.selection.setSelectedHeaders(!0, !1)) : a.selection.setRangeEnd(new y(d.row, d.col)))), 
                        Handsontable.hooks.run(a, "afterOnCellMouseOver", c, d, f), b.activeWt = b.wt;
                    },
                    onCellCornerMouseDown: function(b) {
                        b.preventDefault(), Handsontable.hooks.run(a, "afterOnCellCornerMouseDown", b);
                    },
                    beforeDraw: function(a) {
                        b.beforeRender(a);
                    },
                    onDraw: function(a) {
                        b.onDraw(a);
                    },
                    onScrollVertically: function() {
                        a.runHooks("afterScrollVertically");
                    },
                    onScrollHorizontally: function() {
                        a.runHooks("afterScrollHorizontally");
                    },
                    onBeforeDrawBorders: function(b, c) {
                        a.runHooks("beforeDrawBorders", b, c);
                    },
                    onBeforeTouchScroll: function() {
                        a.runHooks("beforeTouchScroll");
                    },
                    onAfterMomentumScroll: function() {
                        a.runHooks("afterMomentumScroll");
                    },
                    viewportRowCalculatorOverride: function(c) {
                        var d = a.countRows(), e = b.settings.viewportRowRenderingOffset;
                        if ("auto" === e && b.settings.fixedRowsTop && (e = 10), "number" == typeof e && (c.startRow = Math.max(c.startRow - e, 0), 
                        c.endRow = Math.min(c.endRow + e, d - 1)), "auto" === e) {
                            var f = c.startRow + c.endRow - c.startRow, g = Math.ceil(f / d * 12);
                            c.startRow = Math.max(c.startRow - g, 0), c.endRow = Math.min(c.endRow + g, d - 1);
                        }
                        a.runHooks("afterViewportRowCalculatorOverride", c);
                    },
                    viewportColumnCalculatorOverride: function(c) {
                        var d = a.countCols(), e = b.settings.viewportColumnRenderingOffset;
                        if ("auto" === e && b.settings.fixedColumnsLeft && (e = 10), "number" == typeof e && (c.startColumn = Math.max(c.startColumn - e, 0), 
                        c.endColumn = Math.min(c.endColumn + e, d - 1)), "auto" === e) {
                            var f = c.startColumn + c.endColumn - c.startColumn, g = Math.ceil(f / d * 12);
                            c.startRow = Math.max(c.startColumn - g, 0), c.endColumn = Math.min(c.endColumn + g, d - 1);
                        }
                        a.runHooks("afterViewportColumnCalculatorOverride", c);
                    }
                };
                Handsontable.hooks.run(a, "beforeInitWalkontable", h), this.wt = new A(h), this.activeWt = this.wt, 
                this.eventManager.addEventListener(b.wt.wtTable.spreader, "mousedown", function(a) {
                    a.target === b.wt.wtTable.spreader && 3 === a.which && w(a);
                }), this.eventManager.addEventListener(b.wt.wtTable.spreader, "contextmenu", function(a) {
                    a.target === b.wt.wtTable.spreader && 3 === a.which && w(a);
                }), this.eventManager.addEventListener(document.documentElement, "click", function() {
                    b.settings.observeDOMVisibility && b.wt.drawInterrupted && (b.instance.forceFullRender = !0, 
                    b.render());
                });
            }
            Object.defineProperties(c, {
                TableView: {
                    get: function() {
                        return d;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i, j, k = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), l = k.addClass, m = k.empty, n = k.fastInnerHTML, o = k.fastInnerText, p = k.getScrollbarWidth, q = k.hasClass, r = k.isChildOf, s = k.isInput, t = k.isOutsideInput, u = (f = a("eventManager"), 
            f && f.__esModule && f || {
                "default": f
            }).eventManager, v = (g = a("helpers/dom/event"), g && g.__esModule && g || {
                "default": g
            }), w = v.stopPropagation, x = v.isImmediatePropagationStopped, y = (h = a("3rdparty/walkontable/src/cell/coords"), 
            h && h.__esModule && h || {
                "default": h
            }).WalkontableCellCoords, z = (i = a("3rdparty/walkontable/src/selection"), i && i.__esModule && i || {
                "default": i
            }).WalkontableSelection, A = (j = a("3rdparty/walkontable/src/core"), j && j.__esModule && j || {
                "default": j
            }).Walkontable;
            Handsontable.TableView = d, d.prototype.isTextSelectionAllowed = function(a) {
                return s(a) ? !0 : !(!this.settings.fragmentSelection || !r(a, this.TBODY));
            }, d.prototype.isCellEdited = function() {
                var a = this.instance.getActiveEditor();
                return a && a.isOpened();
            }, d.prototype.beforeRender = function(a) {
                a && Handsontable.hooks.run(this.instance, "beforeRender", this.instance.forceFullRender);
            }, d.prototype.onDraw = function(a) {
                a && Handsontable.hooks.run(this.instance, "afterRender", this.instance.forceFullRender);
            }, d.prototype.render = function() {
                this.wt.draw(!this.instance.forceFullRender), this.instance.forceFullRender = !1, 
                this.instance.renderCall = !1;
            }, d.prototype.getCellAtCoords = function(a, b) {
                var c = this.wt.getCell(a, b);
                return 0 > c ? null : c;
            }, d.prototype.scrollViewport = function(a) {
                this.wt.scrollViewport(a);
            }, d.prototype.appendRowHeader = function(a, b) {
                if (b.firstChild) {
                    var c = b.firstChild;
                    if (!q(c, "relative")) return m(b), void this.appendRowHeader(a, b);
                    this.updateCellHeader(c.querySelector(".rowHeader"), a, this.instance.getRowHeader);
                } else {
                    var d = document.createElement("div"), e = document.createElement("span");
                    d.className = "relative", e.className = "rowHeader", this.updateCellHeader(e, a, this.instance.getRowHeader), 
                    d.appendChild(e), b.appendChild(d);
                }
                Handsontable.hooks.run(this.instance, "afterGetRowHeader", a, b);
            }, d.prototype.appendColHeader = function(a, b) {
                if (b.firstChild) {
                    var c = b.firstChild;
                    if (!q(c, "relative")) return m(b), void this.appendRowHeader(a, b);
                    this.updateCellHeader(c.querySelector(".colHeader"), a, this.instance.getColHeader);
                } else {
                    var d = document.createElement("div"), e = document.createElement("span");
                    d.className = "relative", e.className = "colHeader", this.updateCellHeader(e, a, this.instance.getColHeader), 
                    d.appendChild(e), b.appendChild(d);
                }
                Handsontable.hooks.run(this.instance, "afterGetColHeader", a, b);
            }, d.prototype.updateCellHeader = function(a, b, c) {
                b > -1 ? n(a, c(b)) : (o(a, String.fromCharCode(160)), l(a, "cornerHeader"));
            }, d.prototype.maximumVisibleElementWidth = function(a) {
                var b = this.wt.wtViewport.getWorkspaceWidth(), c = b - a;
                return c > 0 ? c : 0;
            }, d.prototype.maximumVisibleElementHeight = function(a) {
                var b = this.wt.wtViewport.getWorkspaceHeight(), c = b - a;
                return c > 0 ? c : 0;
            }, d.prototype.mainViewIsActive = function() {
                return this.wt === this.activeWt;
            }, d.prototype.destroy = function() {
                this.wt.destroy(), this.eventManager.destroy();
            };
        }, {
            "3rdparty/walkontable/src/cell/coords": 5,
            "3rdparty/walkontable/src/core": 7,
            "3rdparty/walkontable/src/selection": 18,
            eventManager: 40,
            "helpers/dom/element": 44,
            "helpers/dom/event": 45
        } ],
        96: [ function(a, b, c) {
            "use strict";
            Object.defineProperties(c, {
                GhostTable: {
                    get: function() {
                        return n;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var d, e, f, g, h, i = (d = a("helpers/dom/element"), d && d.__esModule && d || {
                "default": d
            }), j = i.addClass, k = i.outerHeight, l = i.outerWidth, m = (e = a("helpers/array"), 
            e && e.__esModule && e || {
                "default": e
            }).arrayEach, n = ((f = a("helpers/object"), f && f.__esModule && f || {
                "default": f
            }).objectEach, (g = a("helpers/number"), g && g.__esModule && g || {
                "default": g
            }).rangeEach, (h = a("helpers/mixed"), h && h.__esModule && h || {
                "default": h
            }).stringify, function(a) {
                this.hot = a, this.container = null, this.injected = !1, this.rows = [], this.columns = [], 
                this.samples = null;
            });
            $traceurRuntime.createClass(n, {
                addRow: function(a, b) {
                    if (this.columns.length) throw new Error("Doesn't support multi-dimensional table");
                    this.rows.length || (this.container = this.createContainer(this.hot.rootElement.className));
                    var c = {
                        row: a
                    };
                    this.rows.push(c), this.samples = b, this.table = this.createTable(this.hot.table.className), 
                    this.table.colGroup.appendChild(this.createColGroupsCol()), this.table.tr.appendChild(this.createRow(a)), 
                    this.container.container.appendChild(this.table.fragment), c.table = this.table.table;
                },
                addColumn: function(a, b) {
                    if (this.rows.length) throw new Error("Doesn't support multi-dimensional table");
                    this.columns.length || (this.container = this.createContainer(this.hot.rootElement.className));
                    var c = {
                        col: a
                    };
                    this.columns.push(c), this.samples = b, this.table = this.createTable(this.hot.table.className), 
                    null !== this.hot.getColHeader(a) && this.hot.view.appendColHeader(a, this.table.th), 
                    this.table.tBody.appendChild(this.createCol(a)), this.container.container.appendChild(this.table.fragment), 
                    c.table = this.table.table;
                },
                getHeights: function(a) {
                    this.injected || this.injectTable(), m(this.rows, function(b) {
                        a(b.row, k(b.table) - 1);
                    });
                },
                getWidths: function(a) {
                    this.injected || this.injectTable(), m(this.columns, function(b) {
                        a(b.col, l(b.table));
                    });
                },
                createColGroupsCol: function() {
                    var a = this, b = document, c = b.createDocumentFragment();
                    return c.appendChild(this.createColElement(-1)), this.samples.forEach(function(b) {
                        m(b.strings, function(b) {
                            c.appendChild(a.createColElement(b.col));
                        });
                    }), c;
                },
                createRow: function(a) {
                    var b = this, c = document, d = c.createDocumentFragment(), e = c.createElement("th");
                    return null !== this.hot.getRowHeader(a) && this.hot.view.appendRowHeader(a, e), 
                    d.appendChild(e), this.samples.forEach(function(e) {
                        m(e.strings, function(e) {
                            var f = e.col, g = b.hot.getCellMeta(a, f);
                            g.col = f, g.row = a;
                            var h = b.hot.getCellRenderer(g), i = c.createElement("td");
                            h(b.hot, i, a, f, b.hot.colToProp(f), e.value, g), d.appendChild(i);
                        });
                    }), d;
                },
                createCol: function(a) {
                    var b = this, c = document, d = c.createDocumentFragment();
                    return this.samples.forEach(function(e) {
                        m(e.strings, function(e) {
                            var f = e.row, g = b.hot.getCellMeta(f, a);
                            g.col = a, g.row = f;
                            var h = b.hot.getCellRenderer(g), i = c.createElement("td"), j = c.createElement("tr");
                            h(b.hot, i, f, a, b.hot.colToProp(f), e.value, g), j.appendChild(i), d.appendChild(j);
                        });
                    }), d;
                },
                clean: function() {
                    this.rows.length = 0, this.columns.length = 0, this.samples && this.samples.clear(), 
                    this.samples = null, this.removeTable();
                },
                injectTable: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : null;
                    this.injected || ((a || this.hot.rootElement).appendChild(this.container.fragment), 
                    this.injected = !0);
                },
                removeTable: function() {
                    this.injected && this.container.container.parentNode && (this.container.container.parentNode.removeChild(this.container.container), 
                    this.container = null, this.injected = !1);
                },
                createColElement: function(a) {
                    var b = document, c = b.createElement("col");
                    return c.style.width = this.hot.view.wt.wtTable.getStretchedColumnWidth(a) + "px", 
                    c;
                },
                createTable: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : "", b = document, c = b.createDocumentFragment(), d = b.createElement("table"), e = b.createElement("thead"), f = b.createElement("tbody"), g = b.createElement("colgroup"), h = b.createElement("tr"), i = b.createElement("th");
                    return this.isVertical() && d.appendChild(g), this.isHorizontal() && (h.appendChild(i), 
                    e.appendChild(h), d.style.tableLayout = "auto", d.style.width = "auto"), d.appendChild(e), 
                    this.isVertical() && f.appendChild(h), d.appendChild(f), j(d, a), c.appendChild(d), 
                    {
                        fragment: c,
                        table: d,
                        tHead: e,
                        tBody: f,
                        colGroup: g,
                        tr: h,
                        th: i
                    };
                },
                createContainer: function() {
                    var a = void 0 !== arguments[0] ? arguments[0] : "", b = document, c = b.createDocumentFragment(), d = b.createElement("div");
                    return a = "htGhostTable htAutoSize " + a.trim(), j(d, a), c.appendChild(d), {
                        fragment: c,
                        container: d
                    };
                },
                isVertical: function() {
                    return !(!this.rows.length || this.columns.length);
                },
                isHorizontal: function() {
                    return !(!this.columns.length || this.rows.length);
                }
            }, {}), Handsontable.utils = Handsontable.utils || {}, Handsontable.utils.GhostTable = n;
        }, {
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/mixed": 47,
            "helpers/number": 48,
            "helpers/object": 49
        } ],
        97: [ function(a, b, c) {
            "use strict";
            var d;
            Object.defineProperties(c, {
                SamplesGenerator: {
                    get: function() {
                        return m;
                    }
                },
                __esModule: {
                    value: !0
                }
            });
            var e, f, g, h, i, j = (e = a("helpers/dom/element"), e && e.__esModule && e || {
                "default": e
            }), k = (j.addClass, j.outerHeight, j.outerWidth, (f = a("helpers/array"), f && f.__esModule && f || {
                "default": f
            }).arrayEach, (g = a("helpers/object"), g && g.__esModule && g || {
                "default": g
            }).objectEach, (h = a("helpers/number"), h && h.__esModule && h || {
                "default": h
            }).rangeEach), l = (i = a("helpers/mixed"), i && i.__esModule && i || {
                "default": i
            }).stringify, m = function(a) {
                this.samples = null, this.dataFactory = a;
            }, n = m;
            $traceurRuntime.createClass(m, (d = {}, Object.defineProperty(d, "generateRowSamples", {
                value: function(a, b) {
                    return this.generateSamples("row", b, a);
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(d, "generateColumnSamples", {
                value: function(a, b) {
                    return this.generateSamples("col", b, a);
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(d, "generateSamples", {
                value: function(a, b, c) {
                    var d = this, e = new Map();
                    return "number" == typeof c && (c = {
                        from: c,
                        to: c
                    }), k(c.from, c.to, function(c) {
                        var f = d.generateSample(a, b, c);
                        e.set(c, f);
                    }), e;
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), Object.defineProperty(d, "generateSample", {
                value: function(a, b, c) {
                    var d = this, e = new Map();
                    return k(b.from, b.to, function(b) {
                        var f, g;
                        if ("row" === a) g = d.dataFactory(c, b); else {
                            if ("col" !== a) throw new Error("Unsupported sample type");
                            g = d.dataFactory(b, c);
                        }
                        Array.isArray(g) || (g = l(g));
                        var h = g.length;
                        e.has(h) || e.set(h, {
                            needed: n.SAMPLE_COUNT,
                            strings: []
                        });
                        var i = e.get(h);
                        if (i.needed) {
                            var j = "row" === a ? "col" : "row";
                            i.strings.push((f = {}, Object.defineProperty(f, "value", {
                                value: g,
                                configurable: !0,
                                enumerable: !0,
                                writable: !0
                            }), Object.defineProperty(f, j, {
                                value: b,
                                configurable: !0,
                                enumerable: !0,
                                writable: !0
                            }), f)), i.needed--;
                        }
                    }), e;
                },
                configurable: !0,
                enumerable: !0,
                writable: !0
            }), d), {
                get SAMPLE_COUNT() {
                    return 3;
                }
            }), Handsontable.utils = Handsontable.utils || {}, Handsontable.utils.SamplesGenerator = m;
        }, {
            "helpers/array": 41,
            "helpers/dom/element": 44,
            "helpers/mixed": 47,
            "helpers/number": 48,
            "helpers/object": 49
        } ],
        98: [ function(a, b, c) {
            "use strict";
            function d(a, b) {
                var c = a, d = "string" == typeof c ? c.toLowerCase() : null;
                return function(a) {
                    for (var e = !1, g = 0, h = a.length; h > g; g++) {
                        if (c === a[g]) {
                            e = !0;
                            break;
                        }
                        if (d === f(a[g]).toLowerCase()) {
                            e = !0;
                            break;
                        }
                    }
                    b(e);
                };
            }
            var e, f = (e = a("helpers/mixed"), e && e.__esModule && e || {
                "default": e
            }).stringify;
            Handsontable.AutocompleteValidator = function(a, b) {
                this.strict && this.source ? "function" == typeof this.source ? this.source(a, d(a, b)) : d(a, b)(this.source) : b(!0);
            };
        }, {
            "helpers/mixed": 47
        } ],
        99: [ function(a, b, c) {
            "use strict";
            var d, e, f = (d = a("moment"), d && d.__esModule && d || {
                "default": d
            })["default"], g = (e = a("editors"), e && e.__esModule && e || {
                "default": e
            }).getEditor;
            Handsontable.DateValidator = function(a, b) {
                var c = !0, d = g("date", this.instance);
                null === a && (a = "");
                var e = f(new Date(a)).isValid(), i = f(a, this.dateFormat || d.defaultDateFormat, !0).isValid();
                if (e || (c = !1), !e && i && (c = !0), e && !i) if (this.correctFormat === !0) {
                    var j = h(a, this.dateFormat);
                    this.instance.setDataAtCell(this.row, this.col, j, "dateValidator"), c = !0;
                } else c = !1;
                b(c);
            };
            var h = function(a, b) {
                var c = f(new Date(a)), d = c.format("YYYY"), e = f().format("YYYY");
                return d.substr(0, 2) !== e.substr(0, 2) ? a.match(new RegExp(d)) || c.year(d.replace(d.substr(0, 2), e.substr(0, 2))) : d.length > 4 && c.year((c.year() + "").substr(0, 4)), 
                c.format(b);
            };
        }, {
            editors: 28,
            moment: "moment"
        } ],
        100: [ function(a, b, c) {
            "use strict";
            Handsontable.NumericValidator = function(a, b) {
                null === a && (a = ""), b(/^-?\d*(\.|\,)?\d*$/.test(a));
            };
        }, {} ],
        SheetClip: [ function(a, b, c) {
            "use strict";
            !function(a) {
                function b(a) {
                    return a.split('"').length - 1;
                }
                var d = {
                    parse: function(a) {
                        var c, d, e, f, g, h, i, j = [], k = 0;
                        for (e = a.split("\n"), e.length > 1 && "" === e[e.length - 1] && e.pop(), c = 0, 
                        d = e.length; d > c; c += 1) {
                            for (e[c] = e[c].split("	"), f = 0, g = e[c].length; g > f; f += 1) j[k] || (j[k] = []), 
                            h && 0 === f ? (i = j[k].length - 1, j[k][i] = j[k][i] + "\n" + e[c][0], h && 1 & b(e[c][0]) && (h = !1, 
                            j[k][i] = j[k][i].substring(0, j[k][i].length - 1).replace(/""/g, '"'))) : f === g - 1 && 0 === e[c][f].indexOf('"') && 1 & b(e[c][f]) ? (j[k].push(e[c][f].substring(1).replace(/""/g, '"')), 
                            h = !0) : (j[k].push(e[c][f].replace(/""/g, '"')), h = !1);
                            h || (k += 1);
                        }
                        return j;
                    },
                    stringify: function(a) {
                        var b, c, d, e, f, g = "";
                        for (b = 0, c = a.length; c > b; b += 1) {
                            for (e = a[b].length, d = 0; e > d; d += 1) d > 0 && (g += "	"), f = a[b][d], g += "string" == typeof f ? f.indexOf("\n") > -1 ? '"' + f.replace(/"/g, '""') + '"' : f : null === f || void 0 === f ? "" : f;
                            g += "\n";
                        }
                        return g;
                    }
                };
                "undefined" != typeof c ? (c.parse = d.parse, c.stringify = d.stringify) : a.SheetClip = d;
            }(window);
        }, {} ],
        autoResize: [ function(a, b, c) {
            "use strict";
            function d() {
                var a, b = {
                    minHeight: 200,
                    maxHeight: 300,
                    minWidth: 100,
                    maxWidth: 300
                }, c = document.body, d = document.createTextNode(""), e = document.createElement("SPAN"), f = function(a, b, c) {
                    window.attachEvent ? a.attachEvent("on" + b, c) : a.addEventListener(b, c, !1);
                }, g = function(a, b, c) {
                    window.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent("on" + b, c);
                }, h = function(f) {
                    var g, h;
                    f ? /^[a-zA-Z \.,\\\/\|0-9]$/.test(f) || (f = ".") : f = "", void 0 !== d.textContent ? d.textContent = a.value + f : d.data = a.value + f, 
                    e.style.fontSize = Handsontable.Dom.getComputedStyle(a).fontSize, e.style.fontFamily = Handsontable.Dom.getComputedStyle(a).fontFamily, 
                    e.style.whiteSpace = "pre", c.appendChild(e), g = e.clientWidth + 2, c.removeChild(e), 
                    a.style.height = b.minHeight + "px", b.minWidth > g ? a.style.width = b.minWidth + "px" : g > b.maxWidth ? a.style.width = b.maxWidth + "px" : a.style.width = g + "px", 
                    h = a.scrollHeight ? a.scrollHeight - 1 : 0, b.minHeight > h ? a.style.height = b.minHeight + "px" : b.maxHeight < h ? (a.style.height = b.maxHeight + "px", 
                    a.style.overflowY = "visible") : a.style.height = h + "px";
                }, i = function() {
                    window.setTimeout(h, 0);
                }, j = function(c) {
                    if (c && c.minHeight) if ("inherit" == c.minHeight) b.minHeight = a.clientHeight; else {
                        var f = parseInt(c.minHeight);
                        isNaN(f) || (b.minHeight = f);
                    }
                    if (c && c.maxHeight) if ("inherit" == c.maxHeight) b.maxHeight = a.clientHeight; else {
                        var g = parseInt(c.maxHeight);
                        isNaN(g) || (b.maxHeight = g);
                    }
                    if (c && c.minWidth) if ("inherit" == c.minWidth) b.minWidth = a.clientWidth; else {
                        var h = parseInt(c.minWidth);
                        isNaN(h) || (b.minWidth = h);
                    }
                    if (c && c.maxWidth) if ("inherit" == c.maxWidth) b.maxWidth = a.clientWidth; else {
                        var i = parseInt(c.maxWidth);
                        isNaN(i) || (b.maxWidth = i);
                    }
                    e.firstChild || (e.className = "autoResize", e.style.display = "inline-block", e.appendChild(d));
                }, k = function(c, d, e) {
                    a = c, j(d), "TEXTAREA" == a.nodeName && (a.style.resize = "none", a.style.overflowY = "", 
                    a.style.height = b.minHeight + "px", a.style.minWidth = b.minWidth + "px", a.style.maxWidth = b.maxWidth + "px", 
                    a.style.overflowY = "hidden"), e && (f(a, "change", h), f(a, "cut", i), f(a, "paste", i), 
                    f(a, "drop", i), f(a, "keydown", i)), h();
                };
                return {
                    init: function(a, b, c) {
                        k(a, b, c);
                    },
                    unObserve: function() {
                        g(a, "change", h), g(a, "cut", i), g(a, "paste", i), g(a, "drop", i), g(a, "keydown", i);
                    },
                    resize: h
                };
            }
            "undefined" != typeof c && (b.exports = d);
        }, {} ],
        copyPaste: [ function(a, b, c) {
            "use strict";
            function d() {
                return f ? f.hasBeenDestroyed() && f.init() : f = new e(), f.refCounter++, f;
            }
            function e() {
                this.refCounter = 0, this.init();
            }
            var f;
            "undefined" != typeof c && (b.exports = d), e.prototype.init = function() {
                var a, b;
                this.copyCallbacks = [], this.cutCallbacks = [], this.pasteCallbacks = [], b = document.body, 
                document.getElementById("CopyPasteDiv") ? (this.elDiv = document.getElementById("CopyPasteDiv"), 
                this.elTextarea = this.elDiv.firstChild) : (this.elDiv = document.createElement("div"), 
                this.elDiv.id = "CopyPasteDiv", a = this.elDiv.style, a.position = "fixed", a.top = "-10000px", 
                a.left = "-10000px", b.appendChild(this.elDiv), this.elTextarea = document.createElement("textarea"), 
                this.elTextarea.className = "copyPaste", this.elTextarea.onpaste = function(a) {
                    var b, c;
                    return "WebkitAppearance" in document.documentElement.style ? (b = a.clipboardData.getData("Text"), 
                    -1 !== navigator.userAgent.indexOf("Safari") && -1 === navigator.userAgent.indexOf("Chrome") && (c = b.split("\n"), 
                    "" === c[c.length - 1] && c.pop(), b = c.join("\n")), this.value = b, !1) : void 0;
                }, a = this.elTextarea.style, a.width = "10000px", a.height = "10000px", a.overflow = "hidden", 
                this.elDiv.appendChild(this.elTextarea), "undefined" != typeof a.opacity && (a.opacity = 0)), 
                this.onKeyDownRef = this.onKeyDown.bind(this), document.documentElement.addEventListener("keydown", this.onKeyDownRef, !1);
            }, e.prototype.onKeyDown = function(a) {
                function b() {
                    var a = document.activeElement;
                    return a.shadowRoot && a.shadowRoot.activeElement && (a = a.shadowRoot.activeElement), 
                    [ "INPUT", "SELECT", "TEXTAREA" ].indexOf(a.nodeName) > -1 || "true" === a.contentEditable;
                }
                var c = this, d = !1;
                if (a.metaKey ? d = !0 : a.ctrlKey && -1 === navigator.userAgent.indexOf("Mac") && (d = !0), 
                d) {
                    if (document.activeElement !== this.elTextarea && ("" !== this.getSelectionText() || b())) return;
                    this.selectNodeText(this.elTextarea), setTimeout(function() {
                        document.activeElement !== c.elTextarea && c.selectNodeText(c.elTextarea);
                    }, 0);
                }
                !d || 67 !== a.keyCode && 86 !== a.keyCode && 88 !== a.keyCode || (88 === a.keyCode ? setTimeout(function() {
                    c.triggerCut(a);
                }, 0) : 86 === a.keyCode && setTimeout(function() {
                    c.triggerPaste(a);
                }, 0));
            }, e.prototype.selectNodeText = function(a) {
                a && a.select();
            }, e.prototype.getSelectionText = function() {
                var a = "";
                return window.getSelection ? a = window.getSelection().toString() : document.selection && "Control" !== document.selection.type && (a = document.selection.createRange().text), 
                a;
            }, e.prototype.copyable = function(a) {
                if ("string" != typeof a && void 0 === a.toString) throw new Error("copyable requires string parameter");
                this.elTextarea.value = a, this.selectNodeText(this.elTextarea);
            }, e.prototype.onCut = function(a) {
                this.cutCallbacks.push(a);
            }, e.prototype.onPaste = function(a) {
                this.pasteCallbacks.push(a);
            }, e.prototype.removeCallback = function(a) {
                var b, c;
                for (b = 0, c = this.copyCallbacks.length; c > b; b++) if (this.copyCallbacks[b] === a) return this.copyCallbacks.splice(b, 1), 
                !0;
                for (b = 0, c = this.cutCallbacks.length; c > b; b++) if (this.cutCallbacks[b] === a) return this.cutCallbacks.splice(b, 1), 
                !0;
                for (b = 0, c = this.pasteCallbacks.length; c > b; b++) if (this.pasteCallbacks[b] === a) return this.pasteCallbacks.splice(b, 1), 
                !0;
                return !1;
            }, e.prototype.triggerCut = function(a) {
                var b = this;
                b.cutCallbacks && setTimeout(function() {
                    for (var c = 0, d = b.cutCallbacks.length; d > c; c++) b.cutCallbacks[c](a);
                }, 50);
            }, e.prototype.triggerPaste = function(a, b) {
                var c = this;
                c.pasteCallbacks && setTimeout(function() {
                    for (var d = b || c.elTextarea.value, e = 0, f = c.pasteCallbacks.length; f > e; e++) c.pasteCallbacks[e](d, a);
                }, 50);
            }, e.prototype.destroy = function() {
                this.hasBeenDestroyed() || 0 !== --this.refCounter || (this.elDiv && this.elDiv.parentNode && (this.elDiv.parentNode.removeChild(this.elDiv), 
                this.elDiv = null, this.elTextarea = null), document.documentElement.removeEventListener("keydown", this.onKeyDownRef), 
                this.onKeyDownRef = null);
            }, e.prototype.hasBeenDestroyed = function() {
                return !this.refCounter;
            };
        }, {} ],
        es6collections: [ function(a, b, c) {
            "use strict";
            !function(a) {
                function b(a, b) {
                    function d(a) {
                        return this && this.constructor === d ? (this._keys = [], this._values = [], this._itp = [], 
                        this.objectOnly = b, void (a && c.call(this, a))) : new d(a);
                    }
                    return b || t(a, "size", {
                        get: q
                    }), a.constructor = d, d.prototype = a, d;
                }
                function c(a) {
                    this.add ? a.forEach(this.add, this) : a.forEach(function(a) {
                        this.set(a[0], a[1]);
                    }, this);
                }
                function d(a) {
                    return this.has(a) && (this._keys.splice(s, 1), this._values.splice(s, 1), this._itp.forEach(function(a) {
                        s < a[0] && a[0]--;
                    })), s > -1;
                }
                function e(a) {
                    return this.has(a) ? this._values[s] : void 0;
                }
                function f(a, b) {
                    if (this.objectOnly && b !== Object(b)) throw new TypeError("Invalid value used as weak collection key");
                    if (b != b || 0 === b) for (s = a.length; s-- && !u(a[s], b); ) ; else s = a.indexOf(b);
                    return s > -1;
                }
                function g(a) {
                    return f.call(this, this._values, a);
                }
                function h(a) {
                    return f.call(this, this._keys, a);
                }
                function i(a, b) {
                    return this.has(a) ? this._values[s] = b : this._values[this._keys.push(a) - 1] = b, 
                    this;
                }
                function j(a) {
                    return this.has(a) || this._values.push(a), this;
                }
                function k() {
                    this._values.length = 0;
                }
                function l() {
                    return p(this._itp, this._keys);
                }
                function m() {
                    return p(this._itp, this._values);
                }
                function n() {
                    return p(this._itp, this._keys, this._values);
                }
                function o() {
                    return p(this._itp, this._values, this._values);
                }
                function p(a, b, c) {
                    var d = [ 0 ], e = !1;
                    return a.push(d), {
                        next: function() {
                            var f, g = d[0];
                            return !e && g < b.length ? (f = c ? [ b[g], c[g] ] : b[g], d[0]++) : (e = !0, a.splice(a.indexOf(d), 1)), 
                            {
                                done: e,
                                value: f
                            };
                        }
                    };
                }
                function q() {
                    return this._values.length;
                }
                function r(a, b) {
                    for (var c = this.entries(); ;) {
                        var d = c.next();
                        if (d.done) break;
                        a.call(b, d.value[1], d.value[0], this);
                    }
                }
                var s, t = Object.defineProperty, u = function(a, b) {
                    return isNaN(a) ? isNaN(b) : a === b;
                };
                "undefined" == typeof WeakMap && (a.WeakMap = b({
                    "delete": d,
                    clear: k,
                    get: e,
                    has: h,
                    set: i
                }, !0)), "undefined" == typeof Map && (a.Map = b({
                    "delete": d,
                    has: h,
                    get: e,
                    set: i,
                    keys: l,
                    values: m,
                    entries: n,
                    forEach: r,
                    clear: k
                })), "undefined" == typeof Set && (a.Set = b({
                    has: g,
                    add: j,
                    "delete": d,
                    clear: k,
                    keys: m,
                    values: m,
                    entries: o,
                    forEach: r
                })), "undefined" == typeof WeakSet && (a.WeakSet = b({
                    "delete": d,
                    add: j,
                    clear: k,
                    has: g
                }, !0));
            }("undefined" != typeof c && "undefined" != typeof global ? global : window);
        }, {} ],
        jsonpatch: [ function(a, b, c) {
            "use strict";
            var d;
            !function(a) {
                function b(a) {
                    return -1 === a.indexOf("/") && -1 === a.indexOf("~") ? a : a.replace(/~/g, "~0").replace(/\//g, "~1");
                }
                function c(a, d) {
                    var e;
                    for (var f in a) if (a.hasOwnProperty(f)) {
                        if (a[f] === d) return b(f) + "/";
                        if ("object" == typeof a[f] && (e = c(a[f], d), "" != e)) return b(f) + "/" + e;
                    }
                    return "";
                }
                function d(a, b) {
                    if (a === b) return "/";
                    var d = c(a, b);
                    if ("" === d) throw new Error("Object not found in root");
                    return "/" + d;
                }
                function e(a) {
                    for (var b = 0, c = s.length; c > b; b++) if (s[b].obj === a) return s[b];
                }
                function f(a) {
                    for (var b = 0, c = s.length; c > b; b++) s[b] === a && s.splice(b, 1);
                }
                function g(a, b) {
                    for (var c = 0, d = a.observers.length; d > c; c++) if (a.observers[c].callback === b) return a.observers[c].observer;
                }
                function h(a, b) {
                    for (var c = 0, d = a.observers.length; d > c; c++) if (a.observers[c].observer === b) return a.observers.splice(c, 1), 
                    void (a.observers.length || f(a));
                }
                function i(a, b) {
                    m(b), Object.observe ? l(b, a) : clearTimeout(b.next);
                    var c = e(a);
                    h(c, b);
                }
                function j(a, b) {
                    var c, f = [], h = a, i = e(a);
                    if (i ? c = g(i, b) : (i = new t(a), s.push(i)), c) return c;
                    if (Object.observe) c = function(e) {
                        l(c, a), k(c, a);
                        for (var g = 0, i = e.length; i > g; ) {
                            if (("length" !== e[g].name || !w(e[g].object)) && "__Jasmine_been_here_before__" !== e[g].name) {
                                var j = e[g].type;
                                switch (j) {
                                  case "new":
                                    j = "add";
                                    break;

                                  case "deleted":
                                    j = "delete";
                                    break;

                                  case "updated":
                                    j = "update";
                                }
                                r[j].call(e[g], f, d(h, e[g].object));
                            }
                            g++;
                        }
                        f && b && b(f), c.patches = f, f = [];
                    }; else if (c = {}, i.value = JSON.parse(JSON.stringify(a)), b) {
                        c.callback = b, c.next = null;
                        var j = this.intervals || [ 100, 1e3, 1e4, 6e4 ], n = 0, o = function() {
                            m(c);
                        }, p = function() {
                            clearTimeout(c.next), c.next = setTimeout(function() {
                                o(), n = 0, c.next = setTimeout(q, j[n++]);
                            }, 0);
                        }, q = function() {
                            o(), n == j.length && (n = j.length - 1), c.next = setTimeout(q, j[n++]);
                        };
                        "undefined" != typeof window && (window.addEventListener ? (window.addEventListener("mousedown", p), 
                        window.addEventListener("mouseup", p), window.addEventListener("keydown", p)) : (window.attachEvent("onmousedown", p), 
                        window.attachEvent("onmouseup", p), window.attachEvent("onkeydown", p))), c.next = setTimeout(q, j[n++]);
                    }
                    return c.patches = f, c.object = a, i.observers.push(new u(b, c)), k(c, a);
                }
                function k(a, b) {
                    if (Object.observe) {
                        Object.observe(b, a);
                        for (var c in b) if (b.hasOwnProperty(c)) {
                            var d = b[c];
                            d && "object" == typeof d && k(a, d);
                        }
                    }
                    return a;
                }
                function l(a, b) {
                    if (Object.observe) {
                        Object.unobserve(b, a);
                        for (var c in b) if (b.hasOwnProperty(c)) {
                            var d = b[c];
                            d && "object" == typeof d && l(a, d);
                        }
                    }
                    return a;
                }
                function m(a) {
                    if (Object.observe) Object.deliverChangeRecords(a); else {
                        for (var b, c = 0, d = s.length; d > c; c++) if (s[c].obj === a.object) {
                            b = s[c];
                            break;
                        }
                        b && n(b.value, a.object, a.patches, "");
                    }
                    var e = a.patches;
                    return e.length > 0 && (a.patches = [], a.callback && a.callback(e)), e;
                }
                function n(a, c, d, e) {
                    for (var f = v(c), g = v(a), h = !1, i = !1, j = g.length - 1; j >= 0; j--) {
                        var k = g[j], l = a[k];
                        if (c.hasOwnProperty(k)) {
                            var m = c[k];
                            l instanceof Object ? n(l, m, d, e + "/" + b(k)) : l != m && (h = !0, d.push({
                                op: "replace",
                                path: e + "/" + b(k),
                                value: m
                            }), a[k] = m);
                        } else d.push({
                            op: "remove",
                            path: e + "/" + b(k)
                        }), delete a[k], i = !0;
                    }
                    if (i || f.length != g.length) for (var j = 0; j < f.length; j++) {
                        var k = f[j];
                        a.hasOwnProperty(k) || (d.push({
                            op: "add",
                            path: e + "/" + b(k),
                            value: c[k]
                        }), a[k] = JSON.parse(JSON.stringify(c[k])));
                    }
                }
                function o(a, b) {
                    for (var c, d = !1, e = 0, f = b.length; f > e; ) {
                        c = b[e];
                        for (var g = c.path.split("/"), h = a, i = 1, j = g.length; ;) if (w(h)) {
                            var k = parseInt(g[i], 10);
                            if (i++, i >= j) {
                                d = q[c.op].call(c, h, k, a);
                                break;
                            }
                            h = h[k];
                        } else {
                            var l = g[i];
                            if (-1 != l.indexOf("~") && (l = l.replace(/~1/g, "/").replace(/~0/g, "~")), i++, 
                            i >= j) {
                                d = p[c.op].call(c, h, l, a);
                                break;
                            }
                            h = h[l];
                        }
                        e++;
                    }
                    return d;
                }
                var p = {
                    add: function(a, b) {
                        return a[b] = this.value, !0;
                    },
                    remove: function(a, b) {
                        return delete a[b], !0;
                    },
                    replace: function(a, b) {
                        return a[b] = this.value, !0;
                    },
                    move: function(a, b, c) {
                        var d = {
                            op: "_get",
                            path: this.from
                        };
                        return o(c, [ d ]), o(c, [ {
                            op: "remove",
                            path: this.from
                        } ]), o(c, [ {
                            op: "add",
                            path: this.path,
                            value: d.value
                        } ]), !0;
                    },
                    copy: function(a, b, c) {
                        var d = {
                            op: "_get",
                            path: this.from
                        };
                        return o(c, [ d ]), o(c, [ {
                            op: "add",
                            path: this.path,
                            value: d.value
                        } ]), !0;
                    },
                    test: function(a, b) {
                        return JSON.stringify(a[b]) === JSON.stringify(this.value);
                    },
                    _get: function(a, b) {
                        this.value = a[b];
                    }
                }, q = {
                    add: function(a, b) {
                        return a.splice(b, 0, this.value), !0;
                    },
                    remove: function(a, b) {
                        return a.splice(b, 1), !0;
                    },
                    replace: function(a, b) {
                        return a[b] = this.value, !0;
                    },
                    move: p.move,
                    copy: p.copy,
                    test: p.test,
                    _get: p._get
                }, r = {
                    add: function(a, c) {
                        var d = {
                            op: "add",
                            path: c + b(this.name),
                            value: this.object[this.name]
                        };
                        a.push(d);
                    },
                    "delete": function(a, c) {
                        var d = {
                            op: "remove",
                            path: c + b(this.name)
                        };
                        a.push(d);
                    },
                    update: function(a, c) {
                        var d = {
                            op: "replace",
                            path: c + b(this.name),
                            value: this.object[this.name]
                        };
                        a.push(d);
                    }
                }, s = [];
                a.intervals;
                var t = function() {
                    function a(a) {
                        this.observers = [], this.obj = a;
                    }
                    return a;
                }(), u = function() {
                    function a(a, b) {
                        this.callback = a, this.observer = b;
                    }
                    return a;
                }();
                a.unobserve = i, a.observe = j, a.generate = m;
                var v;
                v = Object.keys ? Object.keys : function(a) {
                    var b = [];
                    for (var c in a) a.hasOwnProperty(c) && b.push(c);
                    return b;
                };
                var w;
                w = Array.isArray ? Array.isArray : function(a) {
                    return a.push && "number" == typeof a.length;
                }, a.apply = o;
            }(d || (d = {})), "undefined" != typeof c && (c.apply = d.apply, c.observe = d.observe, 
            c.unobserve = d.unobserve, c.generate = d.generate);
        }, {} ],
        moment: [ function(b, c, d) {
            !function(b, e) {
                "object" == typeof d && "undefined" != typeof c ? c.exports = e() : "function" == typeof a && a.amd ? a(e) : b.moment = e();
            }(this, function() {
                "use strict";
                function a() {
                    return Jc.apply(null, arguments);
                }
                function d(a) {
                    Jc = a;
                }
                function e(a) {
                    return "[object Array]" === Object.prototype.toString.call(a);
                }
                function f(a) {
                    return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a);
                }
                function g(a, b) {
                    var c, d = [];
                    for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
                    return d;
                }
                function h(a, b) {
                    return Object.prototype.hasOwnProperty.call(a, b);
                }
                function i(a, b) {
                    for (var c in b) h(b, c) && (a[c] = b[c]);
                    return h(b, "toString") && (a.toString = b.toString), h(b, "valueOf") && (a.valueOf = b.valueOf), 
                    a;
                }
                function j(a, b, c, d) {
                    return Ea(a, b, c, d, !0).utc();
                }
                function k() {
                    return {
                        empty: !1,
                        unusedTokens: [],
                        unusedInput: [],
                        overflow: -2,
                        charsLeftOver: 0,
                        nullInput: !1,
                        invalidMonth: null,
                        invalidFormat: !1,
                        userInvalidated: !1,
                        iso: !1
                    };
                }
                function l(a) {
                    return null == a._pf && (a._pf = k()), a._pf;
                }
                function m(a) {
                    if (null == a._isValid) {
                        var b = l(a);
                        a._isValid = !(isNaN(a._d.getTime()) || !(b.overflow < 0) || b.empty || b.invalidMonth || b.invalidWeekday || b.nullInput || b.invalidFormat || b.userInvalidated), 
                        a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour);
                    }
                    return a._isValid;
                }
                function n(a) {
                    var b = j(NaN);
                    return null != a ? i(l(b), a) : l(b).userInvalidated = !0, b;
                }
                function o(a, b) {
                    var c, d, e;
                    if ("undefined" != typeof b._isAMomentObject && (a._isAMomentObject = b._isAMomentObject), 
                    "undefined" != typeof b._i && (a._i = b._i), "undefined" != typeof b._f && (a._f = b._f), 
                    "undefined" != typeof b._l && (a._l = b._l), "undefined" != typeof b._strict && (a._strict = b._strict), 
                    "undefined" != typeof b._tzm && (a._tzm = b._tzm), "undefined" != typeof b._isUTC && (a._isUTC = b._isUTC), 
                    "undefined" != typeof b._offset && (a._offset = b._offset), "undefined" != typeof b._pf && (a._pf = l(b)), 
                    "undefined" != typeof b._locale && (a._locale = b._locale), Lc.length > 0) for (c in Lc) d = Lc[c], 
                    e = b[d], "undefined" != typeof e && (a[d] = e);
                    return a;
                }
                function p(b) {
                    o(this, b), this._d = new Date(null != b._d ? b._d.getTime() : NaN), Mc === !1 && (Mc = !0, 
                    a.updateOffset(this), Mc = !1);
                }
                function q(a) {
                    return a instanceof p || null != a && null != a._isAMomentObject;
                }
                function r(a) {
                    return 0 > a ? Math.ceil(a) : Math.floor(a);
                }
                function s(a) {
                    var b = +a, c = 0;
                    return 0 !== b && isFinite(b) && (c = r(b)), c;
                }
                function t(a, b, c) {
                    var d, e = Math.min(a.length, b.length), f = Math.abs(a.length - b.length), g = 0;
                    for (d = 0; e > d; d++) (c && a[d] !== b[d] || !c && s(a[d]) !== s(b[d])) && g++;
                    return g + f;
                }
                function u() {}
                function v(a) {
                    return a ? a.toLowerCase().replace("_", "-") : a;
                }
                function w(a) {
                    for (var b, c, d, e, f = 0; f < a.length; ) {
                        for (e = v(a[f]).split("-"), b = e.length, c = v(a[f + 1]), c = c ? c.split("-") : null; b > 0; ) {
                            if (d = x(e.slice(0, b).join("-"))) return d;
                            if (c && c.length >= b && t(e, c, !0) >= b - 1) break;
                            b--;
                        }
                        f++;
                    }
                    return null;
                }
                function x(a) {
                    var d = null;
                    if (!Nc[a] && "undefined" != typeof c && c && c.exports) try {
                        d = Kc._abbr, b("./locale/" + a), y(d);
                    } catch (e) {}
                    return Nc[a];
                }
                function y(a, b) {
                    var c;
                    return a && (c = "undefined" == typeof b ? A(a) : z(a, b), c && (Kc = c)), Kc._abbr;
                }
                function z(a, b) {
                    return null !== b ? (b.abbr = a, Nc[a] = Nc[a] || new u(), Nc[a].set(b), y(a), Nc[a]) : (delete Nc[a], 
                    null);
                }
                function A(a) {
                    var b;
                    if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return Kc;
                    if (!e(a)) {
                        if (b = x(a)) return b;
                        a = [ a ];
                    }
                    return w(a);
                }
                function B(a, b) {
                    var c = a.toLowerCase();
                    Oc[c] = Oc[c + "s"] = Oc[b] = a;
                }
                function C(a) {
                    return "string" == typeof a ? Oc[a] || Oc[a.toLowerCase()] : void 0;
                }
                function D(a) {
                    var b, c, d = {};
                    for (c in a) h(a, c) && (b = C(c), b && (d[b] = a[c]));
                    return d;
                }
                function E(b, c) {
                    return function(d) {
                        return null != d ? (G(this, b, d), a.updateOffset(this, c), this) : F(this, b);
                    };
                }
                function F(a, b) {
                    return a._d["get" + (a._isUTC ? "UTC" : "") + b]();
                }
                function G(a, b, c) {
                    return a._d["set" + (a._isUTC ? "UTC" : "") + b](c);
                }
                function H(a, b) {
                    var c;
                    if ("object" == typeof a) for (c in a) this.set(c, a[c]); else if (a = C(a), "function" == typeof this[a]) return this[a](b);
                    return this;
                }
                function I(a, b, c) {
                    var d = "" + Math.abs(a), e = b - d.length, f = a >= 0;
                    return (f ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, e)).toString().substr(1) + d;
                }
                function J(a, b, c, d) {
                    var e = d;
                    "string" == typeof d && (e = function() {
                        return this[d]();
                    }), a && (Sc[a] = e), b && (Sc[b[0]] = function() {
                        return I(e.apply(this, arguments), b[1], b[2]);
                    }), c && (Sc[c] = function() {
                        return this.localeData().ordinal(e.apply(this, arguments), a);
                    });
                }
                function K(a) {
                    return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "");
                }
                function L(a) {
                    var b, c, d = a.match(Pc);
                    for (b = 0, c = d.length; c > b; b++) Sc[d[b]] ? d[b] = Sc[d[b]] : d[b] = K(d[b]);
                    return function(e) {
                        var f = "";
                        for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
                        return f;
                    };
                }
                function M(a, b) {
                    return a.isValid() ? (b = N(b, a.localeData()), Rc[b] = Rc[b] || L(b), Rc[b](a)) : a.localeData().invalidDate();
                }
                function N(a, b) {
                    function c(a) {
                        return b.longDateFormat(a) || a;
                    }
                    var d = 5;
                    for (Qc.lastIndex = 0; d >= 0 && Qc.test(a); ) a = a.replace(Qc, c), Qc.lastIndex = 0, 
                    d -= 1;
                    return a;
                }
                function O(a) {
                    return "function" == typeof a && "[object Function]" === Object.prototype.toString.call(a);
                }
                function P(a, b, c) {
                    fd[a] = O(b) ? b : function(a) {
                        return a && c ? c : b;
                    };
                }
                function Q(a, b) {
                    return h(fd, a) ? fd[a](b._strict, b._locale) : new RegExp(R(a));
                }
                function R(a) {
                    return a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(a, b, c, d, e) {
                        return b || c || d || e;
                    }).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
                }
                function S(a, b) {
                    var c, d = b;
                    for ("string" == typeof a && (a = [ a ]), "number" == typeof b && (d = function(a, c) {
                        c[b] = s(a);
                    }), c = 0; c < a.length; c++) gd[a[c]] = d;
                }
                function T(a, b) {
                    S(a, function(a, c, d, e) {
                        d._w = d._w || {}, b(a, d._w, d, e);
                    });
                }
                function U(a, b, c) {
                    null != b && h(gd, a) && gd[a](b, c._a, c, a);
                }
                function V(a, b) {
                    return new Date(Date.UTC(a, b + 1, 0)).getUTCDate();
                }
                function W(a) {
                    return this._months[a.month()];
                }
                function X(a) {
                    return this._monthsShort[a.month()];
                }
                function Y(a, b, c) {
                    var d, e, f;
                    for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), 
                    d = 0; 12 > d; d++) {
                        if (e = j([ 2e3, d ]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), 
                        this._shortMonthsParse[d] = new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), 
                        c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), 
                        this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
                        if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
                        if (!c && this._monthsParse[d].test(a)) return d;
                    }
                }
                function Z(a, b) {
                    var c;
                    return "string" == typeof b && (b = a.localeData().monthsParse(b), "number" != typeof b) ? a : (c = Math.min(a.date(), V(a.year(), b)), 
                    a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c), a);
                }
                function $(b) {
                    return null != b ? (Z(this, b), a.updateOffset(this, !0), this) : F(this, "Month");
                }
                function _() {
                    return V(this.year(), this.month());
                }
                function aa(a) {
                    var b, c = a._a;
                    return c && -2 === l(a).overflow && (b = c[id] < 0 || c[id] > 11 ? id : c[jd] < 1 || c[jd] > V(c[hd], c[id]) ? jd : c[kd] < 0 || c[kd] > 24 || 24 === c[kd] && (0 !== c[ld] || 0 !== c[md] || 0 !== c[nd]) ? kd : c[ld] < 0 || c[ld] > 59 ? ld : c[md] < 0 || c[md] > 59 ? md : c[nd] < 0 || c[nd] > 999 ? nd : -1, 
                    l(a)._overflowDayOfYear && (hd > b || b > jd) && (b = jd), l(a).overflow = b), a;
                }
                function ba(b) {
                    a.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b);
                }
                function ca(a, b) {
                    var c = !0;
                    return i(function() {
                        return c && (ba(a + "\n" + new Error().stack), c = !1), b.apply(this, arguments);
                    }, b);
                }
                function da(a, b) {
                    qd[a] || (ba(b), qd[a] = !0);
                }
                function ea(a) {
                    var b, c, d = a._i, e = rd.exec(d);
                    if (e) {
                        for (l(a).iso = !0, b = 0, c = sd.length; c > b; b++) if (sd[b][1].exec(d)) {
                            a._f = sd[b][0];
                            break;
                        }
                        for (b = 0, c = td.length; c > b; b++) if (td[b][1].exec(d)) {
                            a._f += (e[6] || " ") + td[b][0];
                            break;
                        }
                        d.match(cd) && (a._f += "Z"), xa(a);
                    } else a._isValid = !1;
                }
                function fa(b) {
                    var c = ud.exec(b._i);
                    return null !== c ? void (b._d = new Date(+c[1])) : (ea(b), void (b._isValid === !1 && (delete b._isValid, 
                    a.createFromInputFallback(b))));
                }
                function ga(a, b, c, d, e, f, g) {
                    var h = new Date(a, b, c, d, e, f, g);
                    return 1970 > a && h.setFullYear(a), h;
                }
                function ha(a) {
                    var b = new Date(Date.UTC.apply(null, arguments));
                    return 1970 > a && b.setUTCFullYear(a), b;
                }
                function ia(a) {
                    return ja(a) ? 366 : 365;
                }
                function ja(a) {
                    return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0;
                }
                function ka() {
                    return ja(this.year());
                }
                function la(a, b, c) {
                    var d, e = c - b, f = c - a.day();
                    return f > e && (f -= 7), e - 7 > f && (f += 7), d = Fa(a).add(f, "d"), {
                        week: Math.ceil(d.dayOfYear() / 7),
                        year: d.year()
                    };
                }
                function ma(a) {
                    return la(a, this._week.dow, this._week.doy).week;
                }
                function na() {
                    return this._week.dow;
                }
                function oa() {
                    return this._week.doy;
                }
                function pa(a) {
                    var b = this.localeData().week(this);
                    return null == a ? b : this.add(7 * (a - b), "d");
                }
                function qa(a) {
                    var b = la(this, 1, 4).week;
                    return null == a ? b : this.add(7 * (a - b), "d");
                }
                function ra(a, b, c, d, e) {
                    var f, g = 6 + e - d, h = ha(a, 0, 1 + g), i = h.getUTCDay();
                    return e > i && (i += 7), c = null != c ? 1 * c : e, f = 1 + g + 7 * (b - 1) - i + c, 
                    {
                        year: f > 0 ? a : a - 1,
                        dayOfYear: f > 0 ? f : ia(a - 1) + f
                    };
                }
                function sa(a) {
                    var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
                    return null == a ? b : this.add(a - b, "d");
                }
                function ta(a, b, c) {
                    return null != a ? a : null != b ? b : c;
                }
                function ua(a) {
                    var b = new Date();
                    return a._useUTC ? [ b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDate() ] : [ b.getFullYear(), b.getMonth(), b.getDate() ];
                }
                function va(a) {
                    var b, c, d, e, f = [];
                    if (!a._d) {
                        for (d = ua(a), a._w && null == a._a[jd] && null == a._a[id] && wa(a), a._dayOfYear && (e = ta(a._a[hd], d[hd]), 
                        a._dayOfYear > ia(e) && (l(a)._overflowDayOfYear = !0), c = ha(e, 0, a._dayOfYear), 
                        a._a[id] = c.getUTCMonth(), a._a[jd] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
                        for (;7 > b; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
                        24 === a._a[kd] && 0 === a._a[ld] && 0 === a._a[md] && 0 === a._a[nd] && (a._nextDay = !0, 
                        a._a[kd] = 0), a._d = (a._useUTC ? ha : ga).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), 
                        a._nextDay && (a._a[kd] = 24);
                    }
                }
                function wa(a) {
                    var b, c, d, e, f, g, h;
                    b = a._w, null != b.GG || null != b.W || null != b.E ? (f = 1, g = 4, c = ta(b.GG, a._a[hd], la(Fa(), 1, 4).year), 
                    d = ta(b.W, 1), e = ta(b.E, 1)) : (f = a._locale._week.dow, g = a._locale._week.doy, 
                    c = ta(b.gg, a._a[hd], la(Fa(), f, g).year), d = ta(b.w, 1), null != b.d ? (e = b.d, 
                    f > e && ++d) : e = null != b.e ? b.e + f : f), h = ra(c, d, e, g, f), a._a[hd] = h.year, 
                    a._dayOfYear = h.dayOfYear;
                }
                function xa(b) {
                    if (b._f === a.ISO_8601) return void ea(b);
                    b._a = [], l(b).empty = !0;
                    var c, d, e, f, g, h = "" + b._i, i = h.length, j = 0;
                    for (e = N(b._f, b._locale).match(Pc) || [], c = 0; c < e.length; c++) f = e[c], 
                    d = (h.match(Q(f, b)) || [])[0], d && (g = h.substr(0, h.indexOf(d)), g.length > 0 && l(b).unusedInput.push(g), 
                    h = h.slice(h.indexOf(d) + d.length), j += d.length), Sc[f] ? (d ? l(b).empty = !1 : l(b).unusedTokens.push(f), 
                    U(f, d, b)) : b._strict && !d && l(b).unusedTokens.push(f);
                    l(b).charsLeftOver = i - j, h.length > 0 && l(b).unusedInput.push(h), l(b).bigHour === !0 && b._a[kd] <= 12 && b._a[kd] > 0 && (l(b).bigHour = void 0), 
                    b._a[kd] = ya(b._locale, b._a[kd], b._meridiem), va(b), aa(b);
                }
                function ya(a, b, c) {
                    var d;
                    return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b, c) : null != a.isPM ? (d = a.isPM(c), 
                    d && 12 > b && (b += 12), d || 12 !== b || (b = 0), b) : b;
                }
                function za(a) {
                    var b, c, d, e, f;
                    if (0 === a._f.length) return l(a).invalidFormat = !0, void (a._d = new Date(NaN));
                    for (e = 0; e < a._f.length; e++) f = 0, b = o({}, a), null != a._useUTC && (b._useUTC = a._useUTC), 
                    b._f = a._f[e], xa(b), m(b) && (f += l(b).charsLeftOver, f += 10 * l(b).unusedTokens.length, 
                    l(b).score = f, (null == d || d > f) && (d = f, c = b));
                    i(a, c || b);
                }
                function Aa(a) {
                    if (!a._d) {
                        var b = D(a._i);
                        a._a = [ b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond ], 
                        va(a);
                    }
                }
                function Ba(a) {
                    var b = new p(aa(Ca(a)));
                    return b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b;
                }
                function Ca(a) {
                    var b = a._i, c = a._f;
                    return a._locale = a._locale || A(a._l), null === b || void 0 === c && "" === b ? n({
                        nullInput: !0
                    }) : ("string" == typeof b && (a._i = b = a._locale.preparse(b)), q(b) ? new p(aa(b)) : (e(c) ? za(a) : c ? xa(a) : f(b) ? a._d = b : Da(a), 
                    a));
                }
                function Da(b) {
                    var c = b._i;
                    void 0 === c ? b._d = new Date() : f(c) ? b._d = new Date(+c) : "string" == typeof c ? fa(b) : e(c) ? (b._a = g(c.slice(0), function(a) {
                        return parseInt(a, 10);
                    }), va(b)) : "object" == typeof c ? Aa(b) : "number" == typeof c ? b._d = new Date(c) : a.createFromInputFallback(b);
                }
                function Ea(a, b, c, d, e) {
                    var f = {};
                    return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, 
                    f._l = c, f._i = a, f._f = b, f._strict = d, Ba(f);
                }
                function Fa(a, b, c, d) {
                    return Ea(a, b, c, d, !1);
                }
                function Ga(a, b) {
                    var c, d;
                    if (1 === b.length && e(b[0]) && (b = b[0]), !b.length) return Fa();
                    for (c = b[0], d = 1; d < b.length; ++d) b[d].isValid() && !b[d][a](c) || (c = b[d]);
                    return c;
                }
                function Ha() {
                    var a = [].slice.call(arguments, 0);
                    return Ga("isBefore", a);
                }
                function Ia() {
                    var a = [].slice.call(arguments, 0);
                    return Ga("isAfter", a);
                }
                function Ja(a) {
                    var b = D(a), c = b.year || 0, d = b.quarter || 0, e = b.month || 0, f = b.week || 0, g = b.day || 0, h = b.hour || 0, i = b.minute || 0, j = b.second || 0, k = b.millisecond || 0;
                    this._milliseconds = +k + 1e3 * j + 6e4 * i + 36e5 * h, this._days = +g + 7 * f, 
                    this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = A(), this._bubble();
                }
                function Ka(a) {
                    return a instanceof Ja;
                }
                function La(a, b) {
                    J(a, 0, 0, function() {
                        var a = this.utcOffset(), c = "+";
                        return 0 > a && (a = -a, c = "-"), c + I(~~(a / 60), 2) + b + I(~~a % 60, 2);
                    });
                }
                function Ma(a) {
                    var b = (a || "").match(cd) || [], c = b[b.length - 1] || [], d = (c + "").match(zd) || [ "-", 0, 0 ], e = +(60 * d[1]) + s(d[2]);
                    return "+" === d[0] ? e : -e;
                }
                function Na(b, c) {
                    var d, e;
                    return c._isUTC ? (d = c.clone(), e = (q(b) || f(b) ? +b : +Fa(b)) - +d, d._d.setTime(+d._d + e), 
                    a.updateOffset(d, !1), d) : Fa(b).local();
                }
                function Oa(a) {
                    return 15 * -Math.round(a._d.getTimezoneOffset() / 15);
                }
                function Pa(b, c) {
                    var d, e = this._offset || 0;
                    return null != b ? ("string" == typeof b && (b = Ma(b)), Math.abs(b) < 16 && (b = 60 * b), 
                    !this._isUTC && c && (d = Oa(this)), this._offset = b, this._isUTC = !0, null != d && this.add(d, "m"), 
                    e !== b && (!c || this._changeInProgress ? db(this, $a(b - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, 
                    a.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Oa(this);
                }
                function Qa(a, b) {
                    return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset();
                }
                function Ra(a) {
                    return this.utcOffset(0, a);
                }
                function Sa(a) {
                    return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Oa(this), "m")), 
                    this;
                }
                function Ta() {
                    return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(Ma(this._i)), 
                    this;
                }
                function Ua(a) {
                    return a = a ? Fa(a).utcOffset() : 0, (this.utcOffset() - a) % 60 === 0;
                }
                function Va() {
                    return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
                }
                function Wa() {
                    if ("undefined" != typeof this._isDSTShifted) return this._isDSTShifted;
                    var a = {};
                    if (o(a, this), a = Ca(a), a._a) {
                        var b = a._isUTC ? j(a._a) : Fa(a._a);
                        this._isDSTShifted = this.isValid() && t(a._a, b.toArray()) > 0;
                    } else this._isDSTShifted = !1;
                    return this._isDSTShifted;
                }
                function Xa() {
                    return !this._isUTC;
                }
                function Ya() {
                    return this._isUTC;
                }
                function Za() {
                    return this._isUTC && 0 === this._offset;
                }
                function $a(a, b) {
                    var c, d, e, f = a, g = null;
                    return Ka(a) ? f = {
                        ms: a._milliseconds,
                        d: a._days,
                        M: a._months
                    } : "number" == typeof a ? (f = {}, b ? f[b] = a : f.milliseconds = a) : (g = Ad.exec(a)) ? (c = "-" === g[1] ? -1 : 1, 
                    f = {
                        y: 0,
                        d: s(g[jd]) * c,
                        h: s(g[kd]) * c,
                        m: s(g[ld]) * c,
                        s: s(g[md]) * c,
                        ms: s(g[nd]) * c
                    }) : (g = Bd.exec(a)) ? (c = "-" === g[1] ? -1 : 1, f = {
                        y: _a(g[2], c),
                        M: _a(g[3], c),
                        d: _a(g[4], c),
                        h: _a(g[5], c),
                        m: _a(g[6], c),
                        s: _a(g[7], c),
                        w: _a(g[8], c)
                    }) : null == f ? f = {} : "object" == typeof f && ("from" in f || "to" in f) && (e = bb(Fa(f.from), Fa(f.to)), 
                    f = {}, f.ms = e.milliseconds, f.M = e.months), d = new Ja(f), Ka(a) && h(a, "_locale") && (d._locale = a._locale), 
                    d;
                }
                function _a(a, b) {
                    var c = a && parseFloat(a.replace(",", "."));
                    return (isNaN(c) ? 0 : c) * b;
                }
                function ab(a, b) {
                    var c = {
                        milliseconds: 0,
                        months: 0
                    };
                    return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, 
                    c.milliseconds = +b - +a.clone().add(c.months, "M"), c;
                }
                function bb(a, b) {
                    var c;
                    return b = Na(b, a), a.isBefore(b) ? c = ab(a, b) : (c = ab(b, a), c.milliseconds = -c.milliseconds, 
                    c.months = -c.months), c;
                }
                function cb(a, b) {
                    return function(c, d) {
                        var e, f;
                        return null === d || isNaN(+d) || (da(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), 
                        f = c, c = d, d = f), c = "string" == typeof c ? +c : c, e = $a(c, d), db(this, e, a), 
                        this;
                    };
                }
                function db(b, c, d, e) {
                    var f = c._milliseconds, g = c._days, h = c._months;
                    e = null == e ? !0 : e, f && b._d.setTime(+b._d + f * d), g && G(b, "Date", F(b, "Date") + g * d), 
                    h && Z(b, F(b, "Month") + h * d), e && a.updateOffset(b, g || h);
                }
                function eb(a, b) {
                    var c = a || Fa(), d = Na(c, this).startOf("day"), e = this.diff(d, "days", !0), f = -6 > e ? "sameElse" : -1 > e ? "lastWeek" : 0 > e ? "lastDay" : 1 > e ? "sameDay" : 2 > e ? "nextDay" : 7 > e ? "nextWeek" : "sameElse";
                    return this.format(b && b[f] || this.localeData().calendar(f, this, Fa(c)));
                }
                function fb() {
                    return new p(this);
                }
                function gb(a, b) {
                    var c;
                    return b = C("undefined" != typeof b ? b : "millisecond"), "millisecond" === b ? (a = q(a) ? a : Fa(a), 
                    +this > +a) : (c = q(a) ? +a : +Fa(a), c < +this.clone().startOf(b));
                }
                function hb(a, b) {
                    var c;
                    return b = C("undefined" != typeof b ? b : "millisecond"), "millisecond" === b ? (a = q(a) ? a : Fa(a), 
                    +a > +this) : (c = q(a) ? +a : +Fa(a), +this.clone().endOf(b) < c);
                }
                function ib(a, b, c) {
                    return this.isAfter(a, c) && this.isBefore(b, c);
                }
                function jb(a, b) {
                    var c;
                    return b = C(b || "millisecond"), "millisecond" === b ? (a = q(a) ? a : Fa(a), +this === +a) : (c = +Fa(a), 
                    +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b));
                }
                function kb(a, b, c) {
                    var d, e, f = Na(a, this), g = 6e4 * (f.utcOffset() - this.utcOffset());
                    return b = C(b), "year" === b || "month" === b || "quarter" === b ? (e = lb(this, f), 
                    "quarter" === b ? e /= 3 : "year" === b && (e /= 12)) : (d = this - f, e = "second" === b ? d / 1e3 : "minute" === b ? d / 6e4 : "hour" === b ? d / 36e5 : "day" === b ? (d - g) / 864e5 : "week" === b ? (d - g) / 6048e5 : d), 
                    c ? e : r(e);
                }
                function lb(a, b) {
                    var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()), f = a.clone().add(e, "months");
                    return 0 > b - f ? (c = a.clone().add(e - 1, "months"), d = (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), 
                    d = (b - f) / (c - f)), -(e + d);
                }
                function mb() {
                    return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
                }
                function nb() {
                    var a = this.clone().utc();
                    return 0 < a.year() && a.year() <= 9999 ? "function" == typeof Date.prototype.toISOString ? this.toDate().toISOString() : M(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : M(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");
                }
                function ob(b) {
                    var c = M(this, b || a.defaultFormat);
                    return this.localeData().postformat(c);
                }
                function pb(a, b) {
                    return this.isValid() ? $a({
                        to: this,
                        from: a
                    }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
                }
                function qb(a) {
                    return this.from(Fa(), a);
                }
                function rb(a, b) {
                    return this.isValid() ? $a({
                        from: this,
                        to: a
                    }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
                }
                function sb(a) {
                    return this.to(Fa(), a);
                }
                function tb(a) {
                    var b;
                    return void 0 === a ? this._locale._abbr : (b = A(a), null != b && (this._locale = b), 
                    this);
                }
                function ub() {
                    return this._locale;
                }
                function vb(a) {
                    switch (a = C(a)) {
                      case "year":
                        this.month(0);

                      case "quarter":
                      case "month":
                        this.date(1);

                      case "week":
                      case "isoWeek":
                      case "day":
                        this.hours(0);

                      case "hour":
                        this.minutes(0);

                      case "minute":
                        this.seconds(0);

                      case "second":
                        this.milliseconds(0);
                    }
                    return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), 
                    this;
                }
                function wb(a) {
                    return a = C(a), void 0 === a || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms");
                }
                function xb() {
                    return +this._d - 6e4 * (this._offset || 0);
                }
                function yb() {
                    return Math.floor(+this / 1e3);
                }
                function zb() {
                    return this._offset ? new Date(+this) : this._d;
                }
                function Ab() {
                    var a = this;
                    return [ a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond() ];
                }
                function Bb() {
                    var a = this;
                    return {
                        years: a.year(),
                        months: a.month(),
                        date: a.date(),
                        hours: a.hours(),
                        minutes: a.minutes(),
                        seconds: a.seconds(),
                        milliseconds: a.milliseconds()
                    };
                }
                function Cb() {
                    return m(this);
                }
                function Db() {
                    return i({}, l(this));
                }
                function Eb() {
                    return l(this).overflow;
                }
                function Fb(a, b) {
                    J(0, [ a, a.length ], 0, b);
                }
                function Gb(a, b, c) {
                    return la(Fa([ a, 11, 31 + b - c ]), b, c).week;
                }
                function Hb(a) {
                    var b = la(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
                    return null == a ? b : this.add(a - b, "y");
                }
                function Ib(a) {
                    var b = la(this, 1, 4).year;
                    return null == a ? b : this.add(a - b, "y");
                }
                function Jb() {
                    return Gb(this.year(), 1, 4);
                }
                function Kb() {
                    var a = this.localeData()._week;
                    return Gb(this.year(), a.dow, a.doy);
                }
                function Lb(a) {
                    return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3);
                }
                function Mb(a, b) {
                    return "string" != typeof a ? a : isNaN(a) ? (a = b.weekdaysParse(a), "number" == typeof a ? a : null) : parseInt(a, 10);
                }
                function Nb(a) {
                    return this._weekdays[a.day()];
                }
                function Ob(a) {
                    return this._weekdaysShort[a.day()];
                }
                function Pb(a) {
                    return this._weekdaysMin[a.day()];
                }
                function Qb(a) {
                    var b, c, d;
                    for (this._weekdaysParse = this._weekdaysParse || [], b = 0; 7 > b; b++) if (this._weekdaysParse[b] || (c = Fa([ 2e3, 1 ]).day(b), 
                    d = "^" + this.weekdays(c, "") + "|^" + this.weekdaysShort(c, "") + "|^" + this.weekdaysMin(c, ""), 
                    this._weekdaysParse[b] = new RegExp(d.replace(".", ""), "i")), this._weekdaysParse[b].test(a)) return b;
                }
                function Rb(a) {
                    var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                    return null != a ? (a = Mb(a, this.localeData()), this.add(a - b, "d")) : b;
                }
                function Sb(a) {
                    var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
                    return null == a ? b : this.add(a - b, "d");
                }
                function Tb(a) {
                    return null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7);
                }
                function Ub(a, b) {
                    J(a, 0, 0, function() {
                        return this.localeData().meridiem(this.hours(), this.minutes(), b);
                    });
                }
                function Vb(a, b) {
                    return b._meridiemParse;
                }
                function Wb(a) {
                    return "p" === (a + "").toLowerCase().charAt(0);
                }
                function Xb(a, b, c) {
                    return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM";
                }
                function Yb(a, b) {
                    b[nd] = s(1e3 * ("0." + a));
                }
                function Zb() {
                    return this._isUTC ? "UTC" : "";
                }
                function $b() {
                    return this._isUTC ? "Coordinated Universal Time" : "";
                }
                function _b(a) {
                    return Fa(1e3 * a);
                }
                function ac() {
                    return Fa.apply(null, arguments).parseZone();
                }
                function bc(a, b, c) {
                    var d = this._calendar[a];
                    return "function" == typeof d ? d.call(b, c) : d;
                }
                function cc(a) {
                    var b = this._longDateFormat[a], c = this._longDateFormat[a.toUpperCase()];
                    return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function(a) {
                        return a.slice(1);
                    }), this._longDateFormat[a]);
                }
                function dc() {
                    return this._invalidDate;
                }
                function ec(a) {
                    return this._ordinal.replace("%d", a);
                }
                function fc(a) {
                    return a;
                }
                function gc(a, b, c, d) {
                    var e = this._relativeTime[c];
                    return "function" == typeof e ? e(a, b, c, d) : e.replace(/%d/i, a);
                }
                function hc(a, b) {
                    var c = this._relativeTime[a > 0 ? "future" : "past"];
                    return "function" == typeof c ? c(b) : c.replace(/%s/i, b);
                }
                function ic(a) {
                    var b, c;
                    for (c in a) b = a[c], "function" == typeof b ? this[c] = b : this["_" + c] = b;
                    this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source);
                }
                function jc(a, b, c, d) {
                    var e = A(), f = j().set(d, b);
                    return e[c](f, a);
                }
                function kc(a, b, c, d, e) {
                    if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return jc(a, b, c, e);
                    var f, g = [];
                    for (f = 0; d > f; f++) g[f] = jc(a, f, c, e);
                    return g;
                }
                function lc(a, b) {
                    return kc(a, b, "months", 12, "month");
                }
                function mc(a, b) {
                    return kc(a, b, "monthsShort", 12, "month");
                }
                function nc(a, b) {
                    return kc(a, b, "weekdays", 7, "day");
                }
                function oc(a, b) {
                    return kc(a, b, "weekdaysShort", 7, "day");
                }
                function pc(a, b) {
                    return kc(a, b, "weekdaysMin", 7, "day");
                }
                function qc() {
                    var a = this._data;
                    return this._milliseconds = Yd(this._milliseconds), this._days = Yd(this._days), 
                    this._months = Yd(this._months), a.milliseconds = Yd(a.milliseconds), a.seconds = Yd(a.seconds), 
                    a.minutes = Yd(a.minutes), a.hours = Yd(a.hours), a.months = Yd(a.months), a.years = Yd(a.years), 
                    this;
                }
                function rc(a, b, c, d) {
                    var e = $a(b, c);
                    return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months += d * e._months, 
                    a._bubble();
                }
                function sc(a, b) {
                    return rc(this, a, b, 1);
                }
                function tc(a, b) {
                    return rc(this, a, b, -1);
                }
                function uc(a) {
                    return 0 > a ? Math.floor(a) : Math.ceil(a);
                }
                function vc() {
                    var a, b, c, d, e, f = this._milliseconds, g = this._days, h = this._months, i = this._data;
                    return f >= 0 && g >= 0 && h >= 0 || 0 >= f && 0 >= g && 0 >= h || (f += 864e5 * uc(xc(h) + g), 
                    g = 0, h = 0), i.milliseconds = f % 1e3, a = r(f / 1e3), i.seconds = a % 60, b = r(a / 60), 
                    i.minutes = b % 60, c = r(b / 60), i.hours = c % 24, g += r(c / 24), e = r(wc(g)), 
                    h += e, g -= uc(xc(e)), d = r(h / 12), h %= 12, i.days = g, i.months = h, i.years = d, 
                    this;
                }
                function wc(a) {
                    return 4800 * a / 146097;
                }
                function xc(a) {
                    return 146097 * a / 4800;
                }
                function yc(a) {
                    var b, c, d = this._milliseconds;
                    if (a = C(a), "month" === a || "year" === a) return b = this._days + d / 864e5, 
                    c = this._months + wc(b), "month" === a ? c : c / 12;
                    switch (b = this._days + Math.round(xc(this._months)), a) {
                      case "week":
                        return b / 7 + d / 6048e5;

                      case "day":
                        return b + d / 864e5;

                      case "hour":
                        return 24 * b + d / 36e5;

                      case "minute":
                        return 1440 * b + d / 6e4;

                      case "second":
                        return 86400 * b + d / 1e3;

                      case "millisecond":
                        return Math.floor(864e5 * b) + d;

                      default:
                        throw new Error("Unknown unit " + a);
                    }
                }
                function zc() {
                    return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * s(this._months / 12);
                }
                function Ac(a) {
                    return function() {
                        return this.as(a);
                    };
                }
                function Bc(a) {
                    return a = C(a), this[a + "s"]();
                }
                function Cc(a) {
                    return function() {
                        return this._data[a];
                    };
                }
                function Dc() {
                    return r(this.days() / 7);
                }
                function Ec(a, b, c, d, e) {
                    return e.relativeTime(b || 1, !!c, a, d);
                }
                function Fc(a, b, c) {
                    var d = $a(a).abs(), e = me(d.as("s")), f = me(d.as("m")), g = me(d.as("h")), h = me(d.as("d")), i = me(d.as("M")), j = me(d.as("y")), k = e < ne.s && [ "s", e ] || 1 === f && [ "m" ] || f < ne.m && [ "mm", f ] || 1 === g && [ "h" ] || g < ne.h && [ "hh", g ] || 1 === h && [ "d" ] || h < ne.d && [ "dd", h ] || 1 === i && [ "M" ] || i < ne.M && [ "MM", i ] || 1 === j && [ "y" ] || [ "yy", j ];
                    return k[2] = b, k[3] = +a > 0, k[4] = c, Ec.apply(null, k);
                }
                function Gc(a, b) {
                    return void 0 === ne[a] ? !1 : void 0 === b ? ne[a] : (ne[a] = b, !0);
                }
                function Hc(a) {
                    var b = this.localeData(), c = Fc(this, !a, b);
                    return a && (c = b.pastFuture(+this, c)), b.postformat(c);
                }
                function Ic() {
                    var a, b, c, d = oe(this._milliseconds) / 1e3, e = oe(this._days), f = oe(this._months);
                    a = r(d / 60), b = r(a / 60), d %= 60, a %= 60, c = r(f / 12), f %= 12;
                    var g = c, h = f, i = e, j = b, k = a, l = d, m = this.asSeconds();
                    return m ? (0 > m ? "-" : "") + "P" + (g ? g + "Y" : "") + (h ? h + "M" : "") + (i ? i + "D" : "") + (j || k || l ? "T" : "") + (j ? j + "H" : "") + (k ? k + "M" : "") + (l ? l + "S" : "") : "P0D";
                }
                var Jc, Kc, Lc = a.momentProperties = [], Mc = !1, Nc = {}, Oc = {}, Pc = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, Qc = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, Rc = {}, Sc = {}, Tc = /\d/, Uc = /\d\d/, Vc = /\d{3}/, Wc = /\d{4}/, Xc = /[+-]?\d{6}/, Yc = /\d\d?/, Zc = /\d{1,3}/, $c = /\d{1,4}/, _c = /[+-]?\d{1,6}/, ad = /\d+/, bd = /[+-]?\d+/, cd = /Z|[+-]\d\d:?\d\d/gi, dd = /[+-]?\d+(\.\d{1,3})?/, ed = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, fd = {}, gd = {}, hd = 0, id = 1, jd = 2, kd = 3, ld = 4, md = 5, nd = 6;
                J("M", [ "MM", 2 ], "Mo", function() {
                    return this.month() + 1;
                }), J("MMM", 0, 0, function(a) {
                    return this.localeData().monthsShort(this, a);
                }), J("MMMM", 0, 0, function(a) {
                    return this.localeData().months(this, a);
                }), B("month", "M"), P("M", Yc), P("MM", Yc, Uc), P("MMM", ed), P("MMMM", ed), S([ "M", "MM" ], function(a, b) {
                    b[id] = s(a) - 1;
                }), S([ "MMM", "MMMM" ], function(a, b, c, d) {
                    var e = c._locale.monthsParse(a, d, c._strict);
                    null != e ? b[id] = e : l(c).invalidMonth = a;
                });
                var od = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), pd = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), qd = {};
                a.suppressDeprecationWarnings = !1;
                var rd = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, sd = [ [ "YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/ ], [ "YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/ ], [ "GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/ ], [ "GGGG-[W]WW", /\d{4}-W\d{2}/ ], [ "YYYY-DDD", /\d{4}-\d{3}/ ] ], td = [ [ "HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d+/ ], [ "HH:mm:ss", /(T| )\d\d:\d\d:\d\d/ ], [ "HH:mm", /(T| )\d\d:\d\d/ ], [ "HH", /(T| )\d\d/ ] ], ud = /^\/?Date\((\-?\d+)/i;
                a.createFromInputFallback = ca("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(a) {
                    a._d = new Date(a._i + (a._useUTC ? " UTC" : ""));
                }), J(0, [ "YY", 2 ], 0, function() {
                    return this.year() % 100;
                }), J(0, [ "YYYY", 4 ], 0, "year"), J(0, [ "YYYYY", 5 ], 0, "year"), J(0, [ "YYYYYY", 6, !0 ], 0, "year"), 
                B("year", "y"), P("Y", bd), P("YY", Yc, Uc), P("YYYY", $c, Wc), P("YYYYY", _c, Xc), 
                P("YYYYYY", _c, Xc), S([ "YYYYY", "YYYYYY" ], hd), S("YYYY", function(b, c) {
                    c[hd] = 2 === b.length ? a.parseTwoDigitYear(b) : s(b);
                }), S("YY", function(b, c) {
                    c[hd] = a.parseTwoDigitYear(b);
                }), a.parseTwoDigitYear = function(a) {
                    return s(a) + (s(a) > 68 ? 1900 : 2e3);
                };
                var vd = E("FullYear", !1);
                J("w", [ "ww", 2 ], "wo", "week"), J("W", [ "WW", 2 ], "Wo", "isoWeek"), B("week", "w"), 
                B("isoWeek", "W"), P("w", Yc), P("ww", Yc, Uc), P("W", Yc), P("WW", Yc, Uc), T([ "w", "ww", "W", "WW" ], function(a, b, c, d) {
                    b[d.substr(0, 1)] = s(a);
                });
                var wd = {
                    dow: 0,
                    doy: 6
                };
                J("DDD", [ "DDDD", 3 ], "DDDo", "dayOfYear"), B("dayOfYear", "DDD"), P("DDD", Zc), 
                P("DDDD", Vc), S([ "DDD", "DDDD" ], function(a, b, c) {
                    c._dayOfYear = s(a);
                }), a.ISO_8601 = function() {};
                var xd = ca("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
                    var a = Fa.apply(null, arguments);
                    return this > a ? this : a;
                }), yd = ca("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
                    var a = Fa.apply(null, arguments);
                    return a > this ? this : a;
                });
                La("Z", ":"), La("ZZ", ""), P("Z", cd), P("ZZ", cd), S([ "Z", "ZZ" ], function(a, b, c) {
                    c._useUTC = !0, c._tzm = Ma(a);
                });
                var zd = /([\+\-]|\d\d)/gi;
                a.updateOffset = function() {};
                var Ad = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, Bd = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;
                $a.fn = Ja.prototype;
                var Cd = cb(1, "add"), Dd = cb(-1, "subtract");
                a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
                var Ed = ca("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(a) {
                    return void 0 === a ? this.localeData() : this.locale(a);
                });
                J(0, [ "gg", 2 ], 0, function() {
                    return this.weekYear() % 100;
                }), J(0, [ "GG", 2 ], 0, function() {
                    return this.isoWeekYear() % 100;
                }), Fb("gggg", "weekYear"), Fb("ggggg", "weekYear"), Fb("GGGG", "isoWeekYear"), 
                Fb("GGGGG", "isoWeekYear"), B("weekYear", "gg"), B("isoWeekYear", "GG"), P("G", bd), 
                P("g", bd), P("GG", Yc, Uc), P("gg", Yc, Uc), P("GGGG", $c, Wc), P("gggg", $c, Wc), 
                P("GGGGG", _c, Xc), P("ggggg", _c, Xc), T([ "gggg", "ggggg", "GGGG", "GGGGG" ], function(a, b, c, d) {
                    b[d.substr(0, 2)] = s(a);
                }), T([ "gg", "GG" ], function(b, c, d, e) {
                    c[e] = a.parseTwoDigitYear(b);
                }), J("Q", 0, 0, "quarter"), B("quarter", "Q"), P("Q", Tc), S("Q", function(a, b) {
                    b[id] = 3 * (s(a) - 1);
                }), J("D", [ "DD", 2 ], "Do", "date"), B("date", "D"), P("D", Yc), P("DD", Yc, Uc), 
                P("Do", function(a, b) {
                    return a ? b._ordinalParse : b._ordinalParseLenient;
                }), S([ "D", "DD" ], jd), S("Do", function(a, b) {
                    b[jd] = s(a.match(Yc)[0], 10);
                });
                var Fd = E("Date", !0);
                J("d", 0, "do", "day"), J("dd", 0, 0, function(a) {
                    return this.localeData().weekdaysMin(this, a);
                }), J("ddd", 0, 0, function(a) {
                    return this.localeData().weekdaysShort(this, a);
                }), J("dddd", 0, 0, function(a) {
                    return this.localeData().weekdays(this, a);
                }), J("e", 0, 0, "weekday"), J("E", 0, 0, "isoWeekday"), B("day", "d"), B("weekday", "e"), 
                B("isoWeekday", "E"), P("d", Yc), P("e", Yc), P("E", Yc), P("dd", ed), P("ddd", ed), 
                P("dddd", ed), T([ "dd", "ddd", "dddd" ], function(a, b, c) {
                    var d = c._locale.weekdaysParse(a);
                    null != d ? b.d = d : l(c).invalidWeekday = a;
                }), T([ "d", "e", "E" ], function(a, b, c, d) {
                    b[d] = s(a);
                });
                var Gd = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), Hd = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), Id = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
                J("H", [ "HH", 2 ], 0, "hour"), J("h", [ "hh", 2 ], 0, function() {
                    return this.hours() % 12 || 12;
                }), Ub("a", !0), Ub("A", !1), B("hour", "h"), P("a", Vb), P("A", Vb), P("H", Yc), 
                P("h", Yc), P("HH", Yc, Uc), P("hh", Yc, Uc), S([ "H", "HH" ], kd), S([ "a", "A" ], function(a, b, c) {
                    c._isPm = c._locale.isPM(a), c._meridiem = a;
                }), S([ "h", "hh" ], function(a, b, c) {
                    b[kd] = s(a), l(c).bigHour = !0;
                });
                var Jd = /[ap]\.?m?\.?/i, Kd = E("Hours", !0);
                J("m", [ "mm", 2 ], 0, "minute"), B("minute", "m"), P("m", Yc), P("mm", Yc, Uc), 
                S([ "m", "mm" ], ld);
                var Ld = E("Minutes", !1);
                J("s", [ "ss", 2 ], 0, "second"), B("second", "s"), P("s", Yc), P("ss", Yc, Uc), 
                S([ "s", "ss" ], md);
                var Md = E("Seconds", !1);
                J("S", 0, 0, function() {
                    return ~~(this.millisecond() / 100);
                }), J(0, [ "SS", 2 ], 0, function() {
                    return ~~(this.millisecond() / 10);
                }), J(0, [ "SSS", 3 ], 0, "millisecond"), J(0, [ "SSSS", 4 ], 0, function() {
                    return 10 * this.millisecond();
                }), J(0, [ "SSSSS", 5 ], 0, function() {
                    return 100 * this.millisecond();
                }), J(0, [ "SSSSSS", 6 ], 0, function() {
                    return 1e3 * this.millisecond();
                }), J(0, [ "SSSSSSS", 7 ], 0, function() {
                    return 1e4 * this.millisecond();
                }), J(0, [ "SSSSSSSS", 8 ], 0, function() {
                    return 1e5 * this.millisecond();
                }), J(0, [ "SSSSSSSSS", 9 ], 0, function() {
                    return 1e6 * this.millisecond();
                }), B("millisecond", "ms"), P("S", Zc, Tc), P("SS", Zc, Uc), P("SSS", Zc, Vc);
                var Nd;
                for (Nd = "SSSS"; Nd.length <= 9; Nd += "S") P(Nd, ad);
                for (Nd = "S"; Nd.length <= 9; Nd += "S") S(Nd, Yb);
                var Od = E("Milliseconds", !1);
                J("z", 0, 0, "zoneAbbr"), J("zz", 0, 0, "zoneName");
                var Pd = p.prototype;
                Pd.add = Cd, Pd.calendar = eb, Pd.clone = fb, Pd.diff = kb, Pd.endOf = wb, Pd.format = ob, 
                Pd.from = pb, Pd.fromNow = qb, Pd.to = rb, Pd.toNow = sb, Pd.get = H, Pd.invalidAt = Eb, 
                Pd.isAfter = gb, Pd.isBefore = hb, Pd.isBetween = ib, Pd.isSame = jb, Pd.isValid = Cb, 
                Pd.lang = Ed, Pd.locale = tb, Pd.localeData = ub, Pd.max = yd, Pd.min = xd, Pd.parsingFlags = Db, 
                Pd.set = H, Pd.startOf = vb, Pd.subtract = Dd, Pd.toArray = Ab, Pd.toObject = Bb, 
                Pd.toDate = zb, Pd.toISOString = nb, Pd.toJSON = nb, Pd.toString = mb, Pd.unix = yb, 
                Pd.valueOf = xb, Pd.year = vd, Pd.isLeapYear = ka, Pd.weekYear = Hb, Pd.isoWeekYear = Ib, 
                Pd.quarter = Pd.quarters = Lb, Pd.month = $, Pd.daysInMonth = _, Pd.week = Pd.weeks = pa, 
                Pd.isoWeek = Pd.isoWeeks = qa, Pd.weeksInYear = Kb, Pd.isoWeeksInYear = Jb, Pd.date = Fd, 
                Pd.day = Pd.days = Rb, Pd.weekday = Sb, Pd.isoWeekday = Tb, Pd.dayOfYear = sa, Pd.hour = Pd.hours = Kd, 
                Pd.minute = Pd.minutes = Ld, Pd.second = Pd.seconds = Md, Pd.millisecond = Pd.milliseconds = Od, 
                Pd.utcOffset = Pa, Pd.utc = Ra, Pd.local = Sa, Pd.parseZone = Ta, Pd.hasAlignedHourOffset = Ua, 
                Pd.isDST = Va, Pd.isDSTShifted = Wa, Pd.isLocal = Xa, Pd.isUtcOffset = Ya, Pd.isUtc = Za, 
                Pd.isUTC = Za, Pd.zoneAbbr = Zb, Pd.zoneName = $b, Pd.dates = ca("dates accessor is deprecated. Use date instead.", Fd), 
                Pd.months = ca("months accessor is deprecated. Use month instead", $), Pd.years = ca("years accessor is deprecated. Use year instead", vd), 
                Pd.zone = ca("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", Qa);
                var Qd = Pd, Rd = {
                    sameDay: "[Today at] LT",
                    nextDay: "[Tomorrow at] LT",
                    nextWeek: "dddd [at] LT",
                    lastDay: "[Yesterday at] LT",
                    lastWeek: "[Last] dddd [at] LT",
                    sameElse: "L"
                }, Sd = {
                    LTS: "h:mm:ss A",
                    LT: "h:mm A",
                    L: "MM/DD/YYYY",
                    LL: "MMMM D, YYYY",
                    LLL: "MMMM D, YYYY h:mm A",
                    LLLL: "dddd, MMMM D, YYYY h:mm A"
                }, Td = "Invalid date", Ud = "%d", Vd = /\d{1,2}/, Wd = {
                    future: "in %s",
                    past: "%s ago",
                    s: "a few seconds",
                    m: "a minute",
                    mm: "%d minutes",
                    h: "an hour",
                    hh: "%d hours",
                    d: "a day",
                    dd: "%d days",
                    M: "a month",
                    MM: "%d months",
                    y: "a year",
                    yy: "%d years"
                }, Xd = u.prototype;
                Xd._calendar = Rd, Xd.calendar = bc, Xd._longDateFormat = Sd, Xd.longDateFormat = cc, 
                Xd._invalidDate = Td, Xd.invalidDate = dc, Xd._ordinal = Ud, Xd.ordinal = ec, Xd._ordinalParse = Vd, 
                Xd.preparse = fc, Xd.postformat = fc, Xd._relativeTime = Wd, Xd.relativeTime = gc, 
                Xd.pastFuture = hc, Xd.set = ic, Xd.months = W, Xd._months = od, Xd.monthsShort = X, 
                Xd._monthsShort = pd, Xd.monthsParse = Y, Xd.week = ma, Xd._week = wd, Xd.firstDayOfYear = oa, 
                Xd.firstDayOfWeek = na, Xd.weekdays = Nb, Xd._weekdays = Gd, Xd.weekdaysMin = Pb, 
                Xd._weekdaysMin = Id, Xd.weekdaysShort = Ob, Xd._weekdaysShort = Hd, Xd.weekdaysParse = Qb, 
                Xd.isPM = Wb, Xd._meridiemParse = Jd, Xd.meridiem = Xb, y("en", {
                    ordinalParse: /\d{1,2}(th|st|nd|rd)/,
                    ordinal: function(a) {
                        var b = a % 10, c = 1 === s(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
                        return a + c;
                    }
                }), a.lang = ca("moment.lang is deprecated. Use moment.locale instead.", y), a.langData = ca("moment.langData is deprecated. Use moment.localeData instead.", A);
                var Yd = Math.abs, Zd = Ac("ms"), $d = Ac("s"), _d = Ac("m"), ae = Ac("h"), be = Ac("d"), ce = Ac("w"), de = Ac("M"), ee = Ac("y"), fe = Cc("milliseconds"), ge = Cc("seconds"), he = Cc("minutes"), ie = Cc("hours"), je = Cc("days"), ke = Cc("months"), le = Cc("years"), me = Math.round, ne = {
                    s: 45,
                    m: 45,
                    h: 22,
                    d: 26,
                    M: 11
                }, oe = Math.abs, pe = Ja.prototype;
                pe.abs = qc, pe.add = sc, pe.subtract = tc, pe.as = yc, pe.asMilliseconds = Zd, 
                pe.asSeconds = $d, pe.asMinutes = _d, pe.asHours = ae, pe.asDays = be, pe.asWeeks = ce, 
                pe.asMonths = de, pe.asYears = ee, pe.valueOf = zc, pe._bubble = vc, pe.get = Bc, 
                pe.milliseconds = fe, pe.seconds = ge, pe.minutes = he, pe.hours = ie, pe.days = je, 
                pe.weeks = Dc, pe.months = ke, pe.years = le, pe.humanize = Hc, pe.toISOString = Ic, 
                pe.toString = Ic, pe.toJSON = Ic, pe.locale = tb, pe.localeData = ub, pe.toIsoString = ca("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Ic), 
                pe.lang = Ed, J("X", 0, 0, "unix"), J("x", 0, 0, "valueOf"), P("x", bd), P("X", dd), 
                S("X", function(a, b, c) {
                    c._d = new Date(1e3 * parseFloat(a, 10));
                }), S("x", function(a, b, c) {
                    c._d = new Date(s(a));
                }), a.version = "2.10.6", d(Fa), a.fn = Qd, a.min = Ha, a.max = Ia, a.utc = j, a.unix = _b, 
                a.months = lc, a.isDate = f, a.locale = y, a.invalid = n, a.duration = $a, a.isMoment = q, 
                a.weekdays = nc, a.parseZone = ac, a.localeData = A, a.isDuration = Ka, a.monthsShort = mc, 
                a.weekdaysMin = pc, a.defineLocale = z, a.weekdaysShort = oc, a.normalizeUnits = C, 
                a.relativeTimeThreshold = Gc;
                var qe = a;
                return qe;
            });
        }, {} ],
        numeral: [ function(b, c, d) {
            "use strict";
            (function() {
                function b(a) {
                    this._value = a;
                }
                function d(a, b, c, d) {
                    var e, f, g = Math.pow(10, b);
                    return f = (c(a * g) / g).toFixed(b), d && (e = new RegExp("0{1," + d + "}$"), f = f.replace(e, "")), 
                    f;
                }
                function e(a, b, c) {
                    var d;
                    return d = b.indexOf("$") > -1 ? g(a, b, c) : b.indexOf("%") > -1 ? h(a, b, c) : b.indexOf(":") > -1 ? i(a, b) : k(a._value, b, c);
                }
                function f(a, b) {
                    var c, d, e, f, g, h = b, i = [ "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" ], k = !1;
                    if (b.indexOf(":") > -1) a._value = j(b); else if (b === s) a._value = 0; else {
                        for ("." !== q[r].delimiters.decimal && (b = b.replace(/\./g, "").replace(q[r].delimiters.decimal, ".")), 
                        c = new RegExp("[^a-zA-Z]" + q[r].abbreviations.thousand + "(?:\\)|(\\" + q[r].currency.symbol + ")?(?:\\))?)?$"), 
                        d = new RegExp("[^a-zA-Z]" + q[r].abbreviations.million + "(?:\\)|(\\" + q[r].currency.symbol + ")?(?:\\))?)?$"), 
                        e = new RegExp("[^a-zA-Z]" + q[r].abbreviations.billion + "(?:\\)|(\\" + q[r].currency.symbol + ")?(?:\\))?)?$"), 
                        f = new RegExp("[^a-zA-Z]" + q[r].abbreviations.trillion + "(?:\\)|(\\" + q[r].currency.symbol + ")?(?:\\))?)?$"), 
                        g = 0; g <= i.length && !(k = b.indexOf(i[g]) > -1 ? Math.pow(1024, g + 1) : !1); g++) ;
                        a._value = (k ? k : 1) * (h.match(c) ? Math.pow(10, 3) : 1) * (h.match(d) ? Math.pow(10, 6) : 1) * (h.match(e) ? Math.pow(10, 9) : 1) * (h.match(f) ? Math.pow(10, 12) : 1) * (b.indexOf("%") > -1 ? .01 : 1) * ((b.split("-").length + Math.min(b.split("(").length - 1, b.split(")").length - 1)) % 2 ? 1 : -1) * Number(b.replace(/[^0-9\.]+/g, "")), 
                        a._value = k ? Math.ceil(a._value) : a._value;
                    }
                    return a._value;
                }
                function g(a, b, c) {
                    var d, e, f = b.indexOf("$"), g = b.indexOf("("), h = b.indexOf("-"), i = "";
                    return b.indexOf(" $") > -1 ? (i = " ", b = b.replace(" $", "")) : b.indexOf("$ ") > -1 ? (i = " ", 
                    b = b.replace("$ ", "")) : b = b.replace("$", ""), e = k(a._value, b, c), 1 >= f ? e.indexOf("(") > -1 || e.indexOf("-") > -1 ? (e = e.split(""), 
                    d = 1, (g > f || h > f) && (d = 0), e.splice(d, 0, q[r].currency.symbol + i), e = e.join("")) : e = q[r].currency.symbol + i + e : e.indexOf(")") > -1 ? (e = e.split(""), 
                    e.splice(-1, 0, i + q[r].currency.symbol), e = e.join("")) : e = e + i + q[r].currency.symbol, 
                    e;
                }
                function h(a, b, c) {
                    var d, e = "", f = 100 * a._value;
                    return b.indexOf(" %") > -1 ? (e = " ", b = b.replace(" %", "")) : b = b.replace("%", ""), 
                    d = k(f, b, c), d.indexOf(")") > -1 ? (d = d.split(""), d.splice(-1, 0, e + "%"), 
                    d = d.join("")) : d = d + e + "%", d;
                }
                function i(a) {
                    var b = Math.floor(a._value / 60 / 60), c = Math.floor((a._value - 60 * b * 60) / 60), d = Math.round(a._value - 60 * b * 60 - 60 * c);
                    return b + ":" + (10 > c ? "0" + c : c) + ":" + (10 > d ? "0" + d : d);
                }
                function j(a) {
                    var b = a.split(":"), c = 0;
                    return 3 === b.length ? (c += 60 * Number(b[0]) * 60, c += 60 * Number(b[1]), c += Number(b[2])) : 2 === b.length && (c += 60 * Number(b[0]), 
                    c += Number(b[1])), Number(c);
                }
                function k(a, b, c) {
                    var e, f, g, h, i, j, k = !1, l = !1, m = !1, n = "", o = !1, p = !1, t = !1, u = !1, v = !1, w = "", x = "", y = Math.abs(a), z = [ "B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" ], A = "", B = !1;
                    if (0 === a && null !== s) return s;
                    if (b.indexOf("(") > -1 ? (k = !0, b = b.slice(1, -1)) : b.indexOf("+") > -1 && (l = !0, 
                    b = b.replace(/\+/g, "")), b.indexOf("a") > -1 && (o = b.indexOf("aK") >= 0, p = b.indexOf("aM") >= 0, 
                    t = b.indexOf("aB") >= 0, u = b.indexOf("aT") >= 0, v = o || p || t || u, b.indexOf(" a") > -1 ? (n = " ", 
                    b = b.replace(" a", "")) : b = b.replace("a", ""), y >= Math.pow(10, 12) && !v || u ? (n += q[r].abbreviations.trillion, 
                    a /= Math.pow(10, 12)) : y < Math.pow(10, 12) && y >= Math.pow(10, 9) && !v || t ? (n += q[r].abbreviations.billion, 
                    a /= Math.pow(10, 9)) : y < Math.pow(10, 9) && y >= Math.pow(10, 6) && !v || p ? (n += q[r].abbreviations.million, 
                    a /= Math.pow(10, 6)) : (y < Math.pow(10, 6) && y >= Math.pow(10, 3) && !v || o) && (n += q[r].abbreviations.thousand, 
                    a /= Math.pow(10, 3))), b.indexOf("b") > -1) for (b.indexOf(" b") > -1 ? (w = " ", 
                    b = b.replace(" b", "")) : b = b.replace("b", ""), g = 0; g <= z.length; g++) if (e = Math.pow(1024, g), 
                    f = Math.pow(1024, g + 1), a >= e && f > a) {
                        w += z[g], e > 0 && (a /= e);
                        break;
                    }
                    return b.indexOf("o") > -1 && (b.indexOf(" o") > -1 ? (x = " ", b = b.replace(" o", "")) : b = b.replace("o", ""), 
                    x += q[r].ordinal(a)), b.indexOf("[.]") > -1 && (m = !0, b = b.replace("[.]", ".")), 
                    h = a.toString().split(".")[0], i = b.split(".")[1], j = b.indexOf(","), i ? (i.indexOf("[") > -1 ? (i = i.replace("]", ""), 
                    i = i.split("["), A = d(a, i[0].length + i[1].length, c, i[1].length)) : A = d(a, i.length, c), 
                    h = A.split(".")[0], A = A.split(".")[1].length ? q[r].delimiters.decimal + A.split(".")[1] : "", 
                    m && 0 === Number(A.slice(1)) && (A = "")) : h = d(a, null, c), h.indexOf("-") > -1 && (h = h.slice(1), 
                    B = !0), j > -1 && (h = h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + q[r].delimiters.thousands)), 
                    0 === b.indexOf(".") && (h = ""), (k && B ? "(" : "") + (!k && B ? "-" : "") + (!B && l ? "+" : "") + h + A + (x ? x : "") + (n ? n : "") + (w ? w : "") + (k && B ? ")" : "");
                }
                function l(a, b) {
                    q[a] = b;
                }
                function m(a) {
                    var b = a.toString().split(".");
                    return b.length < 2 ? 1 : Math.pow(10, b[1].length);
                }
                function n() {
                    var a = Array.prototype.slice.call(arguments);
                    return a.reduce(function(a, b) {
                        var c = m(a), d = m(b);
                        return c > d ? c : d;
                    }, -(1 / 0));
                }
                var o, p = "1.5.3", q = {}, r = "en", s = null, t = "0,0", u = "undefined" != typeof c && c.exports;
                o = function(a) {
                    return o.isNumeral(a) ? a = a.value() : 0 === a || "undefined" == typeof a ? a = 0 : Number(a) || (a = o.fn.unformat(a)), 
                    new b(Number(a));
                }, o.version = p, o.isNumeral = function(a) {
                    return a instanceof b;
                }, o.language = function(a, b) {
                    if (!a) return r;
                    if (a && !b) {
                        if (!q[a]) throw new Error("Unknown language : " + a);
                        r = a;
                    }
                    return !b && q[a] || l(a, b), o;
                }, o.languageData = function(a) {
                    if (!a) return q[r];
                    if (!q[a]) throw new Error("Unknown language : " + a);
                    return q[a];
                }, o.language("en", {
                    delimiters: {
                        thousands: ",",
                        decimal: "."
                    },
                    abbreviations: {
                        thousand: "k",
                        million: "m",
                        billion: "b",
                        trillion: "t"
                    },
                    ordinal: function(a) {
                        var b = a % 10;
                        return 1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
                    },
                    currency: {
                        symbol: "$"
                    }
                }), o.zeroFormat = function(a) {
                    s = "string" == typeof a ? a : null;
                }, o.defaultFormat = function(a) {
                    t = "string" == typeof a ? a : "0.0";
                }, o.validate = function(a, b) {
                    var c, d, e, f, g, h, i, j;
                    if ("string" != typeof a && (a += "", console.warn && console.warn("Numeral.js: Value is not string. It has been co-erced to: ", a)), 
                    a = a.trim(), "" === a) return !1;
                    a = a.replace(/^[+-]?/, "");
                    try {
                        i = o.languageData(b);
                    } catch (k) {
                        i = o.languageData(o.language());
                    }
                    return e = i.currency.symbol, g = i.abbreviations, c = i.delimiters.decimal, d = "." === i.delimiters.thousands ? "\\." : i.delimiters.thousands, 
                    j = a.match(/^[^\d\.\,]+/), null !== j && (a = a.substr(1), j[0] !== e) ? !1 : (j = a.match(/[^\d]+$/), 
                    null !== j && (a = a.slice(0, -1), j[0] !== g.thousand && j[0] !== g.million && j[0] !== g.billion && j[0] !== g.trillion) ? !1 : a.match(/^\d+$/) ? !0 : (h = new RegExp(d + "{2}"), 
                    a.match(/[^\d.,]/g) ? !1 : (f = a.split(c), f.length > 2 ? !1 : f.length < 2 ? !!f[0].match(/^\d+.*\d$/) && !f[0].match(h) : "" === f[0] ? !f[0].match(h) && !!f[1].match(/^\d+$/) : 1 === f[0].length ? !!f[0].match(/^\d+$/) && !f[0].match(h) && !!f[1].match(/^\d+$/) : !!f[0].match(/^\d+.*\d$/) && !f[0].match(h) && !!f[1].match(/^\d+$/))));
                }, "function" != typeof Array.prototype.reduce && (Array.prototype.reduce = function(a, b) {
                    if (null === this || "undefined" == typeof this) throw new TypeError("Array.prototype.reduce called on null or undefined");
                    if ("function" != typeof a) throw new TypeError(a + " is not a function");
                    var c, d, e = this.length >>> 0, f = !1;
                    for (1 < arguments.length && (d = b, f = !0), c = 0; e > c; ++c) this.hasOwnProperty(c) && (f ? d = a(d, this[c], c, this) : (d = this[c], 
                    f = !0));
                    if (!f) throw new TypeError("Reduce of empty array with no initial value");
                    return d;
                }), o.fn = b.prototype = {
                    clone: function() {
                        return o(this);
                    },
                    format: function(a, b) {
                        return e(this, a ? a : t, void 0 !== b ? b : Math.round);
                    },
                    unformat: function(a) {
                        return "[object Number]" === Object.prototype.toString.call(a) ? a : f(this, a ? a : t);
                    },
                    value: function() {
                        return this._value;
                    },
                    valueOf: function() {
                        return this._value;
                    },
                    set: function(a) {
                        return this._value = Number(a), this;
                    },
                    add: function(a) {
                        function b(a, b, d, e) {
                            return a + c * b;
                        }
                        var c = n.call(null, this._value, a);
                        return this._value = [ this._value, a ].reduce(b, 0) / c, this;
                    },
                    subtract: function(a) {
                        function b(a, b, d, e) {
                            return a - c * b;
                        }
                        var c = n.call(null, this._value, a);
                        return this._value = [ a ].reduce(b, this._value * c) / c, this;
                    },
                    multiply: function(a) {
                        function b(a, b, c, d) {
                            var e = n(a, b);
                            return a * e * (b * e) / (e * e);
                        }
                        return this._value = [ this._value, a ].reduce(b, 1), this;
                    },
                    divide: function(a) {
                        function b(a, b, c, d) {
                            var e = n(a, b);
                            return a * e / (b * e);
                        }
                        return this._value = [ this._value, a ].reduce(b), this;
                    },
                    difference: function(a) {
                        return Math.abs(o(this._value).subtract(a).value());
                    }
                }, u && (c.exports = o), "undefined" == typeof ender && (this.numeral = o), "function" == typeof a && a.amd && a([], function() {
                    return o;
                });
            }).call(window);
        }, {} ],
        pikaday: [ function(b, c, d) {
            !function(e, f) {
                "use strict";
                var g;
                if ("object" == typeof d) {
                    try {
                        g = b("moment");
                    } catch (h) {}
                    c.exports = f(g);
                } else "function" == typeof a && a.amd ? a(function(a) {
                    var b = "moment";
                    try {
                        g = a(b);
                    } catch (c) {}
                    return f(g);
                }) : e.Pikaday = f(e.moment);
            }(this, function(a) {
                "use strict";
                var b = "function" == typeof a, c = !!window.addEventListener, d = window.document, e = window.setTimeout, f = function(a, b, d, e) {
                    c ? a.addEventListener(b, d, !!e) : a.attachEvent("on" + b, d);
                }, g = function(a, b, d, e) {
                    c ? a.removeEventListener(b, d, !!e) : a.detachEvent("on" + b, d);
                }, h = function(a, b, c) {
                    var e;
                    d.createEvent ? (e = d.createEvent("HTMLEvents"), e.initEvent(b, !0, !1), e = t(e, c), 
                    a.dispatchEvent(e)) : d.createEventObject && (e = d.createEventObject(), e = t(e, c), 
                    a.fireEvent("on" + b, e));
                }, i = function(a) {
                    return a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "");
                }, j = function(a, b) {
                    return -1 !== (" " + a.className + " ").indexOf(" " + b + " ");
                }, k = function(a, b) {
                    j(a, b) || (a.className = "" === a.className ? b : a.className + " " + b);
                }, l = function(a, b) {
                    a.className = i((" " + a.className + " ").replace(" " + b + " ", " "));
                }, m = function(a) {
                    return /Array/.test(Object.prototype.toString.call(a));
                }, n = function(a) {
                    return /Date/.test(Object.prototype.toString.call(a)) && !isNaN(a.getTime());
                }, o = function(a) {
                    var b = a.getDay();
                    return 0 === b || 6 === b;
                }, p = function(a) {
                    return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0;
                }, q = function(a, b) {
                    return [ 31, p(a) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ][b];
                }, r = function(a) {
                    n(a) && a.setHours(0, 0, 0, 0);
                }, s = function(a, b) {
                    return a.getTime() === b.getTime();
                }, t = function(a, b, c) {
                    var d, e;
                    for (d in b) e = void 0 !== a[d], e && "object" == typeof b[d] && null !== b[d] && void 0 === b[d].nodeName ? n(b[d]) ? c && (a[d] = new Date(b[d].getTime())) : m(b[d]) ? c && (a[d] = b[d].slice(0)) : a[d] = t({}, b[d], c) : !c && e || (a[d] = b[d]);
                    return a;
                }, u = function(a) {
                    return a.month < 0 && (a.year -= Math.ceil(Math.abs(a.month) / 12), a.month += 12), 
                    a.month > 11 && (a.year += Math.floor(Math.abs(a.month) / 12), a.month -= 12), a;
                }, v = {
                    field: null,
                    bound: void 0,
                    position: "bottom left",
                    reposition: !0,
                    format: "YYYY-MM-DD",
                    defaultDate: null,
                    setDefaultDate: !1,
                    firstDay: 0,
                    minDate: null,
                    maxDate: null,
                    yearRange: 10,
                    showWeekNumber: !1,
                    minYear: 0,
                    maxYear: 9999,
                    minMonth: void 0,
                    maxMonth: void 0,
                    startRange: null,
                    endRange: null,
                    isRTL: !1,
                    yearSuffix: "",
                    showMonthAfterYear: !1,
                    numberOfMonths: 1,
                    mainCalendar: "left",
                    container: void 0,
                    i18n: {
                        previousMonth: "Previous Month",
                        nextMonth: "Next Month",
                        months: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
                        weekdays: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
                        weekdaysShort: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ]
                    },
                    theme: null,
                    onSelect: null,
                    onOpen: null,
                    onClose: null,
                    onDraw: null
                }, w = function(a, b, c) {
                    for (b += a.firstDay; b >= 7; ) b -= 7;
                    return c ? a.i18n.weekdaysShort[b] : a.i18n.weekdays[b];
                }, x = function(a) {
                    if (a.isEmpty) return '<td class="is-empty"></td>';
                    var b = [];
                    return a.isDisabled && b.push("is-disabled"), a.isToday && b.push("is-today"), a.isSelected && b.push("is-selected"), 
                    a.isInRange && b.push("is-inrange"), a.isStartRange && b.push("is-startrange"), 
                    a.isEndRange && b.push("is-endrange"), '<td data-day="' + a.day + '" class="' + b.join(" ") + '"><button class="pika-button pika-day" type="button" data-pika-year="' + a.year + '" data-pika-month="' + a.month + '" data-pika-day="' + a.day + '">' + a.day + "</button></td>";
                }, y = function(a, b, c) {
                    var d = new Date(c, 0, 1), e = Math.ceil(((new Date(c, b, a) - d) / 864e5 + d.getDay() + 1) / 7);
                    return '<td class="pika-week">' + e + "</td>";
                }, z = function(a, b) {
                    return "<tr>" + (b ? a.reverse() : a).join("") + "</tr>";
                }, A = function(a) {
                    return "<tbody>" + a.join("") + "</tbody>";
                }, B = function(a) {
                    var b, c = [];
                    for (a.showWeekNumber && c.push("<th></th>"), b = 0; 7 > b; b++) c.push('<th scope="col"><abbr title="' + w(a, b) + '">' + w(a, b, !0) + "</abbr></th>");
                    return "<thead>" + (a.isRTL ? c.reverse() : c).join("") + "</thead>";
                }, C = function(a, b, c, d, e) {
                    var f, g, h, i, j, k = a._o, l = c === k.minYear, n = c === k.maxYear, o = '<div class="pika-title">', p = !0, q = !0;
                    for (h = [], f = 0; 12 > f; f++) h.push('<option value="' + (c === e ? f - b : 12 + f - b) + '"' + (f === d ? " selected" : "") + (l && f < k.minMonth || n && f > k.maxMonth ? "disabled" : "") + ">" + k.i18n.months[f] + "</option>");
                    for (i = '<div class="pika-label">' + k.i18n.months[d] + '<select class="pika-select pika-select-month" tabindex="-1">' + h.join("") + "</select></div>", 
                    m(k.yearRange) ? (f = k.yearRange[0], g = k.yearRange[1] + 1) : (f = c - k.yearRange, 
                    g = 1 + c + k.yearRange), h = []; g > f && f <= k.maxYear; f++) f >= k.minYear && h.push('<option value="' + f + '"' + (f === c ? " selected" : "") + ">" + f + "</option>");
                    return j = '<div class="pika-label">' + c + k.yearSuffix + '<select class="pika-select pika-select-year" tabindex="-1">' + h.join("") + "</select></div>", 
                    o += k.showMonthAfterYear ? j + i : i + j, l && (0 === d || k.minMonth >= d) && (p = !1), 
                    n && (11 === d || k.maxMonth <= d) && (q = !1), 0 === b && (o += '<button class="pika-prev' + (p ? "" : " is-disabled") + '" type="button">' + k.i18n.previousMonth + "</button>"), 
                    b === a._o.numberOfMonths - 1 && (o += '<button class="pika-next' + (q ? "" : " is-disabled") + '" type="button">' + k.i18n.nextMonth + "</button>"), 
                    o += "</div>";
                }, D = function(a, b) {
                    return '<table cellpadding="0" cellspacing="0" class="pika-table">' + B(a) + A(b) + "</table>";
                }, E = function(g) {
                    var h = this, i = h.config(g);
                    h._onMouseDown = function(a) {
                        if (h._v) {
                            a = a || window.event;
                            var b = a.target || a.srcElement;
                            if (b) {
                                if (!j(b.parentNode, "is-disabled")) {
                                    if (j(b, "pika-button") && !j(b, "is-empty")) return h.setDate(new Date(b.getAttribute("data-pika-year"), b.getAttribute("data-pika-month"), b.getAttribute("data-pika-day"))), 
                                    void (i.bound && e(function() {
                                        h.hide(), i.field && i.field.blur();
                                    }, 100));
                                    j(b, "pika-prev") ? h.prevMonth() : j(b, "pika-next") && h.nextMonth();
                                }
                                if (j(b, "pika-select")) h._c = !0; else {
                                    if (!a.preventDefault) return a.returnValue = !1, !1;
                                    a.preventDefault();
                                }
                            }
                        }
                    }, h._onChange = function(a) {
                        a = a || window.event;
                        var b = a.target || a.srcElement;
                        b && (j(b, "pika-select-month") ? h.gotoMonth(b.value) : j(b, "pika-select-year") && h.gotoYear(b.value));
                    }, h._onInputChange = function(c) {
                        var d;
                        c.firedBy !== h && (b ? (d = a(i.field.value, i.format), d = d && d.isValid() ? d.toDate() : null) : d = new Date(Date.parse(i.field.value)), 
                        n(d) && h.setDate(d), h._v || h.show());
                    }, h._onInputFocus = function() {
                        h.show();
                    }, h._onInputClick = function() {
                        h.show();
                    }, h._onInputBlur = function() {
                        var a = d.activeElement;
                        do if (j(a, "pika-single")) return; while (a = a.parentNode);
                        h._c || (h._b = e(function() {
                            h.hide();
                        }, 50)), h._c = !1;
                    }, h._onClick = function(a) {
                        a = a || window.event;
                        var b = a.target || a.srcElement, d = b;
                        if (b) {
                            !c && j(b, "pika-select") && (b.onchange || (b.setAttribute("onchange", "return;"), 
                            f(b, "change", h._onChange)));
                            do if (j(d, "pika-single") || d === i.trigger) return; while (d = d.parentNode);
                            h._v && b !== i.trigger && d !== i.trigger && h.hide();
                        }
                    }, h.el = d.createElement("div"), h.el.className = "pika-single" + (i.isRTL ? " is-rtl" : "") + (i.theme ? " " + i.theme : ""), 
                    f(h.el, "ontouchend" in d ? "touchend" : "mousedown", h._onMouseDown, !0), f(h.el, "change", h._onChange), 
                    i.field && (i.container ? i.container.appendChild(h.el) : i.bound ? d.body.appendChild(h.el) : i.field.parentNode.insertBefore(h.el, i.field.nextSibling), 
                    f(i.field, "change", h._onInputChange), i.defaultDate || (b && i.field.value ? i.defaultDate = a(i.field.value, i.format).toDate() : i.defaultDate = new Date(Date.parse(i.field.value)), 
                    i.setDefaultDate = !0));
                    var k = i.defaultDate;
                    n(k) ? i.setDefaultDate ? h.setDate(k, !0) : h.gotoDate(k) : h.gotoDate(new Date()), 
                    i.bound ? (this.hide(), h.el.className += " is-bound", f(i.trigger, "click", h._onInputClick), 
                    f(i.trigger, "focus", h._onInputFocus), f(i.trigger, "blur", h._onInputBlur)) : this.show();
                };
                return E.prototype = {
                    config: function(a) {
                        this._o || (this._o = t({}, v, !0));
                        var b = t(this._o, a, !0);
                        b.isRTL = !!b.isRTL, b.field = b.field && b.field.nodeName ? b.field : null, b.theme = "string" == typeof b.theme && b.theme ? b.theme : null, 
                        b.bound = !!(void 0 !== b.bound ? b.field && b.bound : b.field), b.trigger = b.trigger && b.trigger.nodeName ? b.trigger : b.field, 
                        b.disableWeekends = !!b.disableWeekends, b.disableDayFn = "function" == typeof b.disableDayFn ? b.disableDayFn : null;
                        var c = parseInt(b.numberOfMonths, 10) || 1;
                        if (b.numberOfMonths = c > 4 ? 4 : c, n(b.minDate) || (b.minDate = !1), n(b.maxDate) || (b.maxDate = !1), 
                        b.minDate && b.maxDate && b.maxDate < b.minDate && (b.maxDate = b.minDate = !1), 
                        b.minDate && this.setMinDate(b.minDate), b.maxDate && (r(b.maxDate), b.maxYear = b.maxDate.getFullYear(), 
                        b.maxMonth = b.maxDate.getMonth()), m(b.yearRange)) {
                            var d = new Date().getFullYear() - 10;
                            b.yearRange[0] = parseInt(b.yearRange[0], 10) || d, b.yearRange[1] = parseInt(b.yearRange[1], 10) || d;
                        } else b.yearRange = Math.abs(parseInt(b.yearRange, 10)) || v.yearRange, b.yearRange > 100 && (b.yearRange = 100);
                        return b;
                    },
                    toString: function(c) {
                        return n(this._d) ? b ? a(this._d).format(c || this._o.format) : this._d.toDateString() : "";
                    },
                    getMoment: function() {
                        return b ? a(this._d) : null;
                    },
                    setMoment: function(c, d) {
                        b && a.isMoment(c) && this.setDate(c.toDate(), d);
                    },
                    getDate: function() {
                        return n(this._d) ? new Date(this._d.getTime()) : null;
                    },
                    setDate: function(a, b) {
                        if (!a) return this._d = null, this._o.field && (this._o.field.value = "", h(this._o.field, "change", {
                            firedBy: this
                        })), this.draw();
                        if ("string" == typeof a && (a = new Date(Date.parse(a))), n(a)) {
                            var c = this._o.minDate, d = this._o.maxDate;
                            n(c) && c > a ? a = c : n(d) && a > d && (a = d), this._d = new Date(a.getTime()), 
                            r(this._d), this.gotoDate(this._d), this._o.field && (this._o.field.value = this.toString(), 
                            h(this._o.field, "change", {
                                firedBy: this
                            })), b || "function" != typeof this._o.onSelect || this._o.onSelect.call(this, this.getDate());
                        }
                    },
                    gotoDate: function(a) {
                        var b = !0;
                        if (n(a)) {
                            if (this.calendars) {
                                var c = new Date(this.calendars[0].year, this.calendars[0].month, 1), d = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1), e = a.getTime();
                                d.setMonth(d.getMonth() + 1), d.setDate(d.getDate() - 1), b = e < c.getTime() || d.getTime() < e;
                            }
                            b && (this.calendars = [ {
                                month: a.getMonth(),
                                year: a.getFullYear()
                            } ], "right" === this._o.mainCalendar && (this.calendars[0].month += 1 - this._o.numberOfMonths)), 
                            this.adjustCalendars();
                        }
                    },
                    adjustCalendars: function() {
                        this.calendars[0] = u(this.calendars[0]);
                        for (var a = 1; a < this._o.numberOfMonths; a++) this.calendars[a] = u({
                            month: this.calendars[0].month + a,
                            year: this.calendars[0].year
                        });
                        this.draw();
                    },
                    gotoToday: function() {
                        this.gotoDate(new Date());
                    },
                    gotoMonth: function(a) {
                        isNaN(a) || (this.calendars[0].month = parseInt(a, 10), this.adjustCalendars());
                    },
                    nextMonth: function() {
                        this.calendars[0].month++, this.adjustCalendars();
                    },
                    prevMonth: function() {
                        this.calendars[0].month--, this.adjustCalendars();
                    },
                    gotoYear: function(a) {
                        isNaN(a) || (this.calendars[0].year = parseInt(a, 10), this.adjustCalendars());
                    },
                    setMinDate: function(a) {
                        r(a), this._o.minDate = a, this._o.minYear = a.getFullYear(), this._o.minMonth = a.getMonth();
                    },
                    setMaxDate: function(a) {
                        this._o.maxDate = a;
                    },
                    setStartRange: function(a) {
                        this._o.startRange = a;
                    },
                    setEndRange: function(a) {
                        this._o.endRange = a;
                    },
                    draw: function(a) {
                        if (this._v || a) {
                            var b = this._o, c = b.minYear, d = b.maxYear, f = b.minMonth, g = b.maxMonth, h = "";
                            this._y <= c && (this._y = c, !isNaN(f) && this._m < f && (this._m = f)), this._y >= d && (this._y = d, 
                            !isNaN(g) && this._m > g && (this._m = g));
                            for (var i = 0; i < b.numberOfMonths; i++) h += '<div class="pika-lendar">' + C(this, i, this.calendars[i].year, this.calendars[i].month, this.calendars[0].year) + this.render(this.calendars[i].year, this.calendars[i].month) + "</div>";
                            if (this.el.innerHTML = h, b.bound && "hidden" !== b.field.type && e(function() {
                                b.trigger.focus();
                            }, 1), "function" == typeof this._o.onDraw) {
                                var j = this;
                                e(function() {
                                    j._o.onDraw.call(j);
                                }, 0);
                            }
                        }
                    },
                    adjustPosition: function() {
                        var a, b, c, e, f, g, h, i, j, k;
                        if (!this._o.container) {
                            if (this.el.style.position = "absolute", a = this._o.trigger, b = a, c = this.el.offsetWidth, 
                            e = this.el.offsetHeight, f = window.innerWidth || d.documentElement.clientWidth, 
                            g = window.innerHeight || d.documentElement.clientHeight, h = window.pageYOffset || d.body.scrollTop || d.documentElement.scrollTop, 
                            "function" == typeof a.getBoundingClientRect) k = a.getBoundingClientRect(), i = k.left + window.pageXOffset, 
                            j = k.bottom + window.pageYOffset; else for (i = b.offsetLeft, j = b.offsetTop + b.offsetHeight; b = b.offsetParent; ) i += b.offsetLeft, 
                            j += b.offsetTop;
                            (this._o.reposition && i + c > f || this._o.position.indexOf("right") > -1 && i - c + a.offsetWidth > 0) && (i = i - c + a.offsetWidth), 
                            (this._o.reposition && j + e > g + h || this._o.position.indexOf("top") > -1 && j - e - a.offsetHeight > 0) && (j = j - e - a.offsetHeight), 
                            this.el.style.left = i + "px", this.el.style.top = j + "px";
                        }
                    },
                    render: function(a, b) {
                        var c = this._o, d = new Date(), e = q(a, b), f = new Date(a, b, 1).getDay(), g = [], h = [];
                        r(d), c.firstDay > 0 && (f -= c.firstDay, 0 > f && (f += 7));
                        for (var i = e + f, j = i; j > 7; ) j -= 7;
                        i += 7 - j;
                        for (var k = 0, l = 0; i > k; k++) {
                            var m, p = new Date(a, b, 1 + (k - f)), t = n(this._d) ? s(p, this._d) : !1, u = s(p, d), v = f > k || k >= e + f, w = c.startRange && s(c.startRange, p), A = c.endRange && s(c.endRange, p), B = c.startRange && c.endRange && c.startRange < p && p < c.endRange, C = c.minDate && p < c.minDate || c.maxDate && p > c.maxDate || c.disableWeekends && o(p) || c.disableDayFn && c.disableDayFn(p), m = {
                                day: 1 + (k - f),
                                month: b,
                                year: a,
                                isSelected: t,
                                isToday: u,
                                isDisabled: C,
                                isEmpty: v,
                                isStartRange: w,
                                isEndRange: A,
                                isInRange: B
                            };
                            h.push(x(m)), 7 === ++l && (c.showWeekNumber && h.unshift(y(k - f, b, a)), g.push(z(h, c.isRTL)), 
                            h = [], l = 0);
                        }
                        return D(c, g);
                    },
                    isVisible: function() {
                        return this._v;
                    },
                    show: function() {
                        this._v || (l(this.el, "is-hidden"), this._v = !0, this.draw(), this._o.bound && (f(d, "click", this._onClick), 
                        this.adjustPosition()), "function" == typeof this._o.onOpen && this._o.onOpen.call(this));
                    },
                    hide: function() {
                        var a = this._v;
                        a !== !1 && (this._o.bound && g(d, "click", this._onClick), this.el.style.position = "static", 
                        this.el.style.left = "auto", this.el.style.top = "auto", k(this.el, "is-hidden"), 
                        this._v = !1, void 0 !== a && "function" == typeof this._o.onClose && this._o.onClose.call(this));
                    },
                    destroy: function() {
                        this.hide(), g(this.el, "mousedown", this._onMouseDown, !0), g(this.el, "change", this._onChange), 
                        this._o.field && (g(this._o.field, "change", this._onInputChange), this._o.bound && (g(this._o.trigger, "click", this._onInputClick), 
                        g(this._o.trigger, "focus", this._onInputFocus), g(this._o.trigger, "blur", this._onInputBlur))), 
                        this.el.parentNode && this.el.parentNode.removeChild(this.el);
                    }
                }, E;
            });
        }, {
            moment: "moment"
        } ],
        zeroclipboard: [ function(b, c, d) {
            !function(b, d) {
                "use strict";
                var e, f, g, h = b, i = h.document, j = h.navigator, k = h.setTimeout, l = h.clearTimeout, m = h.setInterval, n = h.clearInterval, o = h.getComputedStyle, p = h.encodeURIComponent, q = h.ActiveXObject, r = h.Error, s = h.Number.parseInt || h.parseInt, t = h.Number.parseFloat || h.parseFloat, u = h.Number.isNaN || h.isNaN, v = h.Date.now, w = h.Object.keys, x = h.Object.defineProperty, y = h.Object.prototype.hasOwnProperty, z = h.Array.prototype.slice, A = function() {
                    var a = function(a) {
                        return a;
                    };
                    if ("function" == typeof h.wrap && "function" == typeof h.unwrap) try {
                        var b = i.createElement("div"), c = h.unwrap(b);
                        1 === b.nodeType && c && 1 === c.nodeType && (a = h.unwrap);
                    } catch (d) {}
                    return a;
                }(), B = function(a) {
                    return z.call(a, 0);
                }, C = function() {
                    var a, b, c, e, f, g, h = B(arguments), i = h[0] || {};
                    for (a = 1, b = h.length; b > a; a++) if (null != (c = h[a])) for (e in c) y.call(c, e) && (f = i[e], 
                    g = c[e], i !== g && g !== d && (i[e] = g));
                    return i;
                }, D = function(a) {
                    var b, c, d, e;
                    if ("object" != typeof a || null == a || "number" == typeof a.nodeType) b = a; else if ("number" == typeof a.length) for (b = [], 
                    c = 0, d = a.length; d > c; c++) y.call(a, c) && (b[c] = D(a[c])); else {
                        b = {};
                        for (e in a) y.call(a, e) && (b[e] = D(a[e]));
                    }
                    return b;
                }, E = function(a, b) {
                    for (var c = {}, d = 0, e = b.length; e > d; d++) b[d] in a && (c[b[d]] = a[b[d]]);
                    return c;
                }, F = function(a, b) {
                    var c = {};
                    for (var d in a) -1 === b.indexOf(d) && (c[d] = a[d]);
                    return c;
                }, G = function(a) {
                    if (a) for (var b in a) y.call(a, b) && delete a[b];
                    return a;
                }, H = function(a, b) {
                    if (a && 1 === a.nodeType && a.ownerDocument && b && (1 === b.nodeType && b.ownerDocument && b.ownerDocument === a.ownerDocument || 9 === b.nodeType && !b.ownerDocument && b === a.ownerDocument)) do {
                        if (a === b) return !0;
                        a = a.parentNode;
                    } while (a);
                    return !1;
                }, I = function(a) {
                    var b;
                    return "string" == typeof a && a && (b = a.split("#")[0].split("?")[0], b = a.slice(0, a.lastIndexOf("/") + 1)), 
                    b;
                }, J = function(a) {
                    var b, c;
                    return "string" == typeof a && a && (c = a.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/), 
                    c && c[1] ? b = c[1] : (c = a.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/), 
                    c && c[1] && (b = c[1]))), b;
                }, K = function() {
                    var a, b;
                    try {
                        throw new r();
                    } catch (c) {
                        b = c;
                    }
                    return b && (a = b.sourceURL || b.fileName || J(b.stack)), a;
                }, L = function() {
                    var a, b, c;
                    if (i.currentScript && (a = i.currentScript.src)) return a;
                    if (b = i.getElementsByTagName("script"), 1 === b.length) return b[0].src || d;
                    if ("readyState" in b[0]) for (c = b.length; c--; ) if ("interactive" === b[c].readyState && (a = b[c].src)) return a;
                    return "loading" === i.readyState && (a = b[b.length - 1].src) ? a : (a = K()) ? a : d;
                }, M = function() {
                    var a, b, c, e = i.getElementsByTagName("script");
                    for (a = e.length; a--; ) {
                        if (!(c = e[a].src)) {
                            b = null;
                            break;
                        }
                        if (c = I(c), null == b) b = c; else if (b !== c) {
                            b = null;
                            break;
                        }
                    }
                    return b || d;
                }, N = function() {
                    var a = I(L()) || M() || "";
                    return a + "ZeroClipboard.swf";
                }, O = function() {
                    return null == b.opener && (!!b.top && b != b.top || !!b.parent && b != b.parent);
                }(), P = {
                    bridge: null,
                    version: "0.0.0",
                    pluginType: "unknown",
                    disabled: null,
                    outdated: null,
                    sandboxed: null,
                    unavailable: null,
                    degraded: null,
                    deactivated: null,
                    overdue: null,
                    ready: null
                }, Q = "11.0.0", R = {}, S = {}, T = null, U = 0, V = 0, W = {
                    ready: "Flash communication is established",
                    error: {
                        "flash-disabled": "Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.",
                        "flash-outdated": "Flash is too outdated to support ZeroClipboard",
                        "flash-sandboxed": "Attempting to run Flash in a sandboxed iframe, which is impossible",
                        "flash-unavailable": "Flash is unable to communicate bidirectionally with JavaScript",
                        "flash-degraded": "Flash is unable to preserve data fidelity when communicating with JavaScript",
                        "flash-deactivated": "Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
                        "flash-overdue": "Flash communication was established but NOT within the acceptable time limit",
                        "version-mismatch": "ZeroClipboard JS version number does not match ZeroClipboard SWF version number",
                        "clipboard-error": "At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard",
                        "config-mismatch": "ZeroClipboard configuration does not match Flash's reality",
                        "swf-not-found": "The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"
                    }
                }, X = [ "flash-unavailable", "flash-degraded", "flash-overdue", "version-mismatch", "config-mismatch", "clipboard-error" ], Y = [ "flash-disabled", "flash-outdated", "flash-sandboxed", "flash-unavailable", "flash-degraded", "flash-deactivated", "flash-overdue" ], Z = new RegExp("^flash-(" + Y.map(function(a) {
                    return a.replace(/^flash-/, "");
                }).join("|") + ")$"), $ = new RegExp("^flash-(" + Y.slice(1).map(function(a) {
                    return a.replace(/^flash-/, "");
                }).join("|") + ")$"), _ = {
                    swfPath: N(),
                    trustedDomains: b.location.host ? [ b.location.host ] : [],
                    cacheBust: !0,
                    forceEnhancedClipboard: !1,
                    flashLoadTimeout: 3e4,
                    autoActivate: !0,
                    bubbleEvents: !0,
                    containerId: "global-zeroclipboard-html-bridge",
                    containerClass: "global-zeroclipboard-container",
                    swfObjectId: "global-zeroclipboard-flash-bridge",
                    hoverClass: "zeroclipboard-is-hover",
                    activeClass: "zeroclipboard-is-active",
                    forceHandCursor: !1,
                    title: null,
                    zIndex: 999999999
                }, aa = function(a) {
                    if ("object" == typeof a && null !== a) for (var b in a) if (y.call(a, b)) if (/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b)) _[b] = a[b]; else if (null == P.bridge) if ("containerId" === b || "swfObjectId" === b) {
                        if (!pa(a[b])) throw new Error("The specified `" + b + "` value is not valid as an HTML4 Element ID");
                        _[b] = a[b];
                    } else _[b] = a[b];
                    {
                        if ("string" != typeof a || !a) return D(_);
                        if (y.call(_, a)) return _[a];
                    }
                }, ba = function() {
                    return Va(), {
                        browser: E(j, [ "userAgent", "platform", "appName" ]),
                        flash: F(P, [ "bridge" ]),
                        zeroclipboard: {
                            version: Xa.version,
                            config: Xa.config()
                        }
                    };
                }, ca = function() {
                    return !!(P.disabled || P.outdated || P.sandboxed || P.unavailable || P.degraded || P.deactivated);
                }, da = function(a, b) {
                    var c, f, g, h = {};
                    if ("string" == typeof a && a) g = a.toLowerCase().split(/\s+/); else if ("object" == typeof a && a && "undefined" == typeof b) for (c in a) y.call(a, c) && "string" == typeof c && c && "function" == typeof a[c] && Xa.on(c, a[c]);
                    if (g && g.length) {
                        for (c = 0, f = g.length; f > c; c++) a = g[c].replace(/^on/, ""), h[a] = !0, R[a] || (R[a] = []), 
                        R[a].push(b);
                        if (h.ready && P.ready && Xa.emit({
                            type: "ready"
                        }), h.error) {
                            for (c = 0, f = Y.length; f > c; c++) if (P[Y[c].replace(/^flash-/, "")] === !0) {
                                Xa.emit({
                                    type: "error",
                                    name: Y[c]
                                });
                                break;
                            }
                            e !== d && Xa.version !== e && Xa.emit({
                                type: "error",
                                name: "version-mismatch",
                                jsVersion: Xa.version,
                                swfVersion: e
                            });
                        }
                    }
                    return Xa;
                }, ea = function(a, b) {
                    var c, d, e, f, g;
                    if (0 === arguments.length) f = w(R); else if ("string" == typeof a && a) f = a.split(/\s+/); else if ("object" == typeof a && a && "undefined" == typeof b) for (c in a) y.call(a, c) && "string" == typeof c && c && "function" == typeof a[c] && Xa.off(c, a[c]);
                    if (f && f.length) for (c = 0, d = f.length; d > c; c++) if (a = f[c].toLowerCase().replace(/^on/, ""), 
                    g = R[a], g && g.length) if (b) for (e = g.indexOf(b); -1 !== e; ) g.splice(e, 1), 
                    e = g.indexOf(b, e); else g.length = 0;
                    return Xa;
                }, fa = function(a) {
                    var b;
                    return b = "string" == typeof a && a ? D(R[a]) || null : D(R);
                }, ga = function(a) {
                    var b, c, d;
                    return a = qa(a), a && !xa(a) ? "ready" === a.type && P.overdue === !0 ? Xa.emit({
                        type: "error",
                        name: "flash-overdue"
                    }) : (b = C({}, a), va.call(this, b), "copy" === a.type && (d = Fa(S), c = d.data, 
                    T = d.formatMap), c) : void 0;
                }, ha = function() {
                    var a = P.sandboxed;
                    if (Va(), "boolean" != typeof P.ready && (P.ready = !1), P.sandboxed !== a && P.sandboxed === !0) P.ready = !1, 
                    Xa.emit({
                        type: "error",
                        name: "flash-sandboxed"
                    }); else if (!Xa.isFlashUnusable() && null === P.bridge) {
                        var b = _.flashLoadTimeout;
                        "number" == typeof b && b >= 0 && (U = k(function() {
                            "boolean" != typeof P.deactivated && (P.deactivated = !0), P.deactivated === !0 && Xa.emit({
                                type: "error",
                                name: "flash-deactivated"
                            });
                        }, b)), P.overdue = !1, Da();
                    }
                }, ia = function() {
                    Xa.clearData(), Xa.blur(), Xa.emit("destroy"), Ea(), Xa.off();
                }, ja = function(a, b) {
                    var c;
                    if ("object" == typeof a && a && "undefined" == typeof b) c = a, Xa.clearData(); else {
                        if ("string" != typeof a || !a) return;
                        c = {}, c[a] = b;
                    }
                    for (var d in c) "string" == typeof d && d && y.call(c, d) && "string" == typeof c[d] && c[d] && (S[d] = c[d]);
                }, ka = function(a) {
                    "undefined" == typeof a ? (G(S), T = null) : "string" == typeof a && y.call(S, a) && delete S[a];
                }, la = function(a) {
                    return "undefined" == typeof a ? D(S) : "string" == typeof a && y.call(S, a) ? S[a] : void 0;
                }, ma = function(a) {
                    if (a && 1 === a.nodeType) {
                        f && (Na(f, _.activeClass), f !== a && Na(f, _.hoverClass)), f = a, Ma(a, _.hoverClass);
                        var b = a.getAttribute("title") || _.title;
                        if ("string" == typeof b && b) {
                            var c = Ca(P.bridge);
                            c && c.setAttribute("title", b);
                        }
                        var d = _.forceHandCursor === !0 || "pointer" === Oa(a, "cursor");
                        Ta(d), Sa();
                    }
                }, na = function() {
                    var a = Ca(P.bridge);
                    a && (a.removeAttribute("title"), a.style.left = "0px", a.style.top = "-9999px", 
                    a.style.width = "1px", a.style.height = "1px"), f && (Na(f, _.hoverClass), Na(f, _.activeClass), 
                    f = null);
                }, oa = function() {
                    return f || null;
                }, pa = function(a) {
                    return "string" == typeof a && a && /^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(a);
                }, qa = function(a) {
                    var b;
                    if ("string" == typeof a && a ? (b = a, a = {}) : "object" == typeof a && a && "string" == typeof a.type && a.type && (b = a.type), 
                    b) {
                        b = b.toLowerCase(), !a.target && (/^(copy|aftercopy|_click)$/.test(b) || "error" === b && "clipboard-error" === a.name) && (a.target = g), 
                        C(a, {
                            type: b,
                            target: a.target || f || null,
                            relatedTarget: a.relatedTarget || null,
                            currentTarget: P && P.bridge || null,
                            timeStamp: a.timeStamp || v() || null
                        });
                        var c = W[a.type];
                        return "error" === a.type && a.name && c && (c = c[a.name]), c && (a.message = c), 
                        "ready" === a.type && C(a, {
                            target: null,
                            version: P.version
                        }), "error" === a.type && (Z.test(a.name) && C(a, {
                            target: null,
                            minimumVersion: Q
                        }), $.test(a.name) && C(a, {
                            version: P.version
                        })), "copy" === a.type && (a.clipboardData = {
                            setData: Xa.setData,
                            clearData: Xa.clearData
                        }), "aftercopy" === a.type && (a = Ga(a, T)), a.target && !a.relatedTarget && (a.relatedTarget = ra(a.target)), 
                        sa(a);
                    }
                }, ra = function(a) {
                    var b = a && a.getAttribute && a.getAttribute("data-clipboard-target");
                    return b ? i.getElementById(b) : null;
                }, sa = function(a) {
                    if (a && /^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)) {
                        var b = a.target, c = "_mouseover" === a.type && a.relatedTarget ? a.relatedTarget : d, e = "_mouseout" === a.type && a.relatedTarget ? a.relatedTarget : d, f = Pa(b), g = h.screenLeft || h.screenX || 0, j = h.screenTop || h.screenY || 0, k = i.body.scrollLeft + i.documentElement.scrollLeft, l = i.body.scrollTop + i.documentElement.scrollTop, m = f.left + ("number" == typeof a._stageX ? a._stageX : 0), n = f.top + ("number" == typeof a._stageY ? a._stageY : 0), o = m - k, p = n - l, q = g + o, r = j + p, s = "number" == typeof a.movementX ? a.movementX : 0, t = "number" == typeof a.movementY ? a.movementY : 0;
                        delete a._stageX, delete a._stageY, C(a, {
                            srcElement: b,
                            fromElement: c,
                            toElement: e,
                            screenX: q,
                            screenY: r,
                            pageX: m,
                            pageY: n,
                            clientX: o,
                            clientY: p,
                            x: o,
                            y: p,
                            movementX: s,
                            movementY: t,
                            offsetX: 0,
                            offsetY: 0,
                            layerX: 0,
                            layerY: 0
                        });
                    }
                    return a;
                }, ta = function(a) {
                    var b = a && "string" == typeof a.type && a.type || "";
                    return !/^(?:(?:before)?copy|destroy)$/.test(b);
                }, ua = function(a, b, c, d) {
                    d ? k(function() {
                        a.apply(b, c);
                    }, 0) : a.apply(b, c);
                }, va = function(a) {
                    if ("object" == typeof a && a && a.type) {
                        var b = ta(a), c = R["*"] || [], d = R[a.type] || [], e = c.concat(d);
                        if (e && e.length) {
                            var f, g, i, j, k, l = this;
                            for (f = 0, g = e.length; g > f; f++) i = e[f], j = l, "string" == typeof i && "function" == typeof h[i] && (i = h[i]), 
                            "object" == typeof i && i && "function" == typeof i.handleEvent && (j = i, i = i.handleEvent), 
                            "function" == typeof i && (k = C({}, a), ua(i, j, [ k ], b));
                        }
                        return this;
                    }
                }, wa = function(a) {
                    var b = null;
                    return (O === !1 || a && "error" === a.type && a.name && -1 !== X.indexOf(a.name)) && (b = !1), 
                    b;
                }, xa = function(a) {
                    var b = a.target || f || null, c = "swf" === a._source;
                    switch (delete a._source, a.type) {
                      case "error":
                        var d = "flash-sandboxed" === a.name || wa(a);
                        "boolean" == typeof d && (P.sandboxed = d), -1 !== Y.indexOf(a.name) ? C(P, {
                            disabled: "flash-disabled" === a.name,
                            outdated: "flash-outdated" === a.name,
                            unavailable: "flash-unavailable" === a.name,
                            degraded: "flash-degraded" === a.name,
                            deactivated: "flash-deactivated" === a.name,
                            overdue: "flash-overdue" === a.name,
                            ready: !1
                        }) : "version-mismatch" === a.name && (e = a.swfVersion, C(P, {
                            disabled: !1,
                            outdated: !1,
                            unavailable: !1,
                            degraded: !1,
                            deactivated: !1,
                            overdue: !1,
                            ready: !1
                        })), Ra();
                        break;

                      case "ready":
                        e = a.swfVersion;
                        var h = P.deactivated === !0;
                        C(P, {
                            disabled: !1,
                            outdated: !1,
                            sandboxed: !1,
                            unavailable: !1,
                            degraded: !1,
                            deactivated: !1,
                            overdue: h,
                            ready: !h
                        }), Ra();
                        break;

                      case "beforecopy":
                        g = b;
                        break;

                      case "copy":
                        var i, j, k = a.relatedTarget;
                        !S["text/html"] && !S["text/plain"] && k && (j = k.value || k.outerHTML || k.innerHTML) && (i = k.value || k.textContent || k.innerText) ? (a.clipboardData.clearData(), 
                        a.clipboardData.setData("text/plain", i), j !== i && a.clipboardData.setData("text/html", j)) : !S["text/plain"] && a.target && (i = a.target.getAttribute("data-clipboard-text")) && (a.clipboardData.clearData(), 
                        a.clipboardData.setData("text/plain", i));
                        break;

                      case "aftercopy":
                        ya(a), Xa.clearData(), b && b !== La() && b.focus && b.focus();
                        break;

                      case "_mouseover":
                        Xa.focus(b), _.bubbleEvents === !0 && c && (b && b !== a.relatedTarget && !H(a.relatedTarget, b) && za(C({}, a, {
                            type: "mouseenter",
                            bubbles: !1,
                            cancelable: !1
                        })), za(C({}, a, {
                            type: "mouseover"
                        })));
                        break;

                      case "_mouseout":
                        Xa.blur(), _.bubbleEvents === !0 && c && (b && b !== a.relatedTarget && !H(a.relatedTarget, b) && za(C({}, a, {
                            type: "mouseleave",
                            bubbles: !1,
                            cancelable: !1
                        })), za(C({}, a, {
                            type: "mouseout"
                        })));
                        break;

                      case "_mousedown":
                        Ma(b, _.activeClass), _.bubbleEvents === !0 && c && za(C({}, a, {
                            type: a.type.slice(1)
                        }));
                        break;

                      case "_mouseup":
                        Na(b, _.activeClass), _.bubbleEvents === !0 && c && za(C({}, a, {
                            type: a.type.slice(1)
                        }));
                        break;

                      case "_click":
                        g = null, _.bubbleEvents === !0 && c && za(C({}, a, {
                            type: a.type.slice(1)
                        }));
                        break;

                      case "_mousemove":
                        _.bubbleEvents === !0 && c && za(C({}, a, {
                            type: a.type.slice(1)
                        }));
                    }
                    return /^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type) ? !0 : void 0;
                }, ya = function(a) {
                    if (a.errors && a.errors.length > 0) {
                        var b = D(a);
                        C(b, {
                            type: "error",
                            name: "clipboard-error"
                        }), delete b.success, k(function() {
                            Xa.emit(b);
                        }, 0);
                    }
                }, za = function(a) {
                    if (a && "string" == typeof a.type && a) {
                        var b, c = a.target || null, d = c && c.ownerDocument || i, e = {
                            view: d.defaultView || h,
                            canBubble: !0,
                            cancelable: !0,
                            detail: "click" === a.type ? 1 : 0,
                            button: "number" == typeof a.which ? a.which - 1 : "number" == typeof a.button ? a.button : d.createEvent ? 0 : 1
                        }, f = C(e, a);
                        c && d.createEvent && c.dispatchEvent && (f = [ f.type, f.canBubble, f.cancelable, f.view, f.detail, f.screenX, f.screenY, f.clientX, f.clientY, f.ctrlKey, f.altKey, f.shiftKey, f.metaKey, f.button, f.relatedTarget ], 
                        b = d.createEvent("MouseEvents"), b.initMouseEvent && (b.initMouseEvent.apply(b, f), 
                        b._source = "js", c.dispatchEvent(b)));
                    }
                }, Aa = function() {
                    var a = _.flashLoadTimeout;
                    if ("number" == typeof a && a >= 0) {
                        var b = Math.min(1e3, a / 10), c = _.swfObjectId + "_fallbackContent";
                        V = m(function() {
                            var a = i.getElementById(c);
                            Qa(a) && (Ra(), P.deactivated = null, Xa.emit({
                                type: "error",
                                name: "swf-not-found"
                            }));
                        }, b);
                    }
                }, Ba = function() {
                    var a = i.createElement("div");
                    return a.id = _.containerId, a.className = _.containerClass, a.style.position = "absolute", 
                    a.style.left = "0px", a.style.top = "-9999px", a.style.width = "1px", a.style.height = "1px", 
                    a.style.zIndex = "" + Ua(_.zIndex), a;
                }, Ca = function(a) {
                    for (var b = a && a.parentNode; b && "OBJECT" === b.nodeName && b.parentNode; ) b = b.parentNode;
                    return b || null;
                }, Da = function() {
                    var a, b = P.bridge, c = Ca(b);
                    if (!b) {
                        var d = Ka(h.location.host, _), e = "never" === d ? "none" : "all", f = Ia(C({
                            jsVersion: Xa.version
                        }, _)), g = _.swfPath + Ha(_.swfPath, _);
                        c = Ba();
                        var j = i.createElement("div");
                        c.appendChild(j), i.body.appendChild(c);
                        var k = i.createElement("div"), l = "activex" === P.pluginType;
                        k.innerHTML = '<object id="' + _.swfObjectId + '" name="' + _.swfObjectId + '" width="100%" height="100%" ' + (l ? 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"' : 'type="application/x-shockwave-flash" data="' + g + '"') + ">" + (l ? '<param name="movie" value="' + g + '"/>' : "") + '<param name="allowScriptAccess" value="' + d + '"/><param name="allowNetworking" value="' + e + '"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="' + f + '"/><div id="' + _.swfObjectId + '_fallbackContent">&nbsp;</div></object>', 
                        b = k.firstChild, k = null, A(b).ZeroClipboard = Xa, c.replaceChild(b, j), Aa();
                    }
                    return b || (b = i[_.swfObjectId], b && (a = b.length) && (b = b[a - 1]), !b && c && (b = c.firstChild)), 
                    P.bridge = b || null, b;
                }, Ea = function() {
                    var a = P.bridge;
                    if (a) {
                        var b = Ca(a);
                        b && ("activex" === P.pluginType && "readyState" in a ? (a.style.display = "none", 
                        function c() {
                            if (4 === a.readyState) {
                                for (var d in a) "function" == typeof a[d] && (a[d] = null);
                                a.parentNode && a.parentNode.removeChild(a), b.parentNode && b.parentNode.removeChild(b);
                            } else k(c, 10);
                        }()) : (a.parentNode && a.parentNode.removeChild(a), b.parentNode && b.parentNode.removeChild(b))), 
                        Ra(), P.ready = null, P.bridge = null, P.deactivated = null, e = d;
                    }
                }, Fa = function(a) {
                    var b = {}, c = {};
                    if ("object" == typeof a && a) {
                        for (var d in a) if (d && y.call(a, d) && "string" == typeof a[d] && a[d]) switch (d.toLowerCase()) {
                          case "text/plain":
                          case "text":
                          case "air:text":
                          case "flash:text":
                            b.text = a[d], c.text = d;
                            break;

                          case "text/html":
                          case "html":
                          case "air:html":
                          case "flash:html":
                            b.html = a[d], c.html = d;
                            break;

                          case "application/rtf":
                          case "text/rtf":
                          case "rtf":
                          case "richtext":
                          case "air:rtf":
                          case "flash:rtf":
                            b.rtf = a[d], c.rtf = d;
                        }
                        return {
                            data: b,
                            formatMap: c
                        };
                    }
                }, Ga = function(a, b) {
                    if ("object" != typeof a || !a || "object" != typeof b || !b) return a;
                    var c = {};
                    for (var d in a) if (y.call(a, d)) if ("errors" === d) {
                        c[d] = a[d] ? a[d].slice() : [];
                        for (var e = 0, f = c[d].length; f > e; e++) c[d][e].format = b[c[d][e].format];
                    } else if ("success" !== d && "data" !== d) c[d] = a[d]; else {
                        c[d] = {};
                        var g = a[d];
                        for (var h in g) h && y.call(g, h) && y.call(b, h) && (c[d][b[h]] = g[h]);
                    }
                    return c;
                }, Ha = function(a, b) {
                    var c = null == b || b && b.cacheBust === !0;
                    return c ? (-1 === a.indexOf("?") ? "?" : "&") + "noCache=" + v() : "";
                }, Ia = function(a) {
                    var b, c, d, e, f = "", g = [];
                    if (a.trustedDomains && ("string" == typeof a.trustedDomains ? e = [ a.trustedDomains ] : "object" == typeof a.trustedDomains && "length" in a.trustedDomains && (e = a.trustedDomains)), 
                    e && e.length) for (b = 0, c = e.length; c > b; b++) if (y.call(e, b) && e[b] && "string" == typeof e[b]) {
                        if (d = Ja(e[b]), !d) continue;
                        if ("*" === d) {
                            g.length = 0, g.push(d);
                            break;
                        }
                        g.push.apply(g, [ d, "//" + d, h.location.protocol + "//" + d ]);
                    }
                    return g.length && (f += "trustedOrigins=" + p(g.join(","))), a.forceEnhancedClipboard === !0 && (f += (f ? "&" : "") + "forceEnhancedClipboard=true"), 
                    "string" == typeof a.swfObjectId && a.swfObjectId && (f += (f ? "&" : "") + "swfObjectId=" + p(a.swfObjectId)), 
                    "string" == typeof a.jsVersion && a.jsVersion && (f += (f ? "&" : "") + "jsVersion=" + p(a.jsVersion)), 
                    f;
                }, Ja = function(a) {
                    if (null == a || "" === a) return null;
                    if (a = a.replace(/^\s+|\s+$/g, ""), "" === a) return null;
                    var b = a.indexOf("//");
                    a = -1 === b ? a : a.slice(b + 2);
                    var c = a.indexOf("/");
                    return a = -1 === c ? a : -1 === b || 0 === c ? null : a.slice(0, c), a && ".swf" === a.slice(-4).toLowerCase() ? null : a || null;
                }, Ka = function() {
                    var a = function(a) {
                        var b, c, d, e = [];
                        if ("string" == typeof a && (a = [ a ]), "object" != typeof a || !a || "number" != typeof a.length) return e;
                        for (b = 0, c = a.length; c > b; b++) if (y.call(a, b) && (d = Ja(a[b]))) {
                            if ("*" === d) {
                                e.length = 0, e.push("*");
                                break;
                            }
                            -1 === e.indexOf(d) && e.push(d);
                        }
                        return e;
                    };
                    return function(b, c) {
                        var d = Ja(c.swfPath);
                        null === d && (d = b);
                        var e = a(c.trustedDomains), f = e.length;
                        if (f > 0) {
                            if (1 === f && "*" === e[0]) return "always";
                            if (-1 !== e.indexOf(b)) return 1 === f && b === d ? "sameDomain" : "always";
                        }
                        return "never";
                    };
                }(), La = function() {
                    try {
                        return i.activeElement;
                    } catch (a) {
                        return null;
                    }
                }, Ma = function(a, b) {
                    var c, d, e, f = [];
                    if ("string" == typeof b && b && (f = b.split(/\s+/)), a && 1 === a.nodeType && f.length > 0) if (a.classList) for (c = 0, 
                    d = f.length; d > c; c++) a.classList.add(f[c]); else if (a.hasOwnProperty("className")) {
                        for (e = " " + a.className + " ", c = 0, d = f.length; d > c; c++) -1 === e.indexOf(" " + f[c] + " ") && (e += f[c] + " ");
                        a.className = e.replace(/^\s+|\s+$/g, "");
                    }
                    return a;
                }, Na = function(a, b) {
                    var c, d, e, f = [];
                    if ("string" == typeof b && b && (f = b.split(/\s+/)), a && 1 === a.nodeType && f.length > 0) if (a.classList && a.classList.length > 0) for (c = 0, 
                    d = f.length; d > c; c++) a.classList.remove(f[c]); else if (a.className) {
                        for (e = (" " + a.className + " ").replace(/[\r\n\t]/g, " "), c = 0, d = f.length; d > c; c++) e = e.replace(" " + f[c] + " ", " ");
                        a.className = e.replace(/^\s+|\s+$/g, "");
                    }
                    return a;
                }, Oa = function(a, b) {
                    var c = o(a, null).getPropertyValue(b);
                    return "cursor" !== b || c && "auto" !== c || "A" !== a.nodeName ? c : "pointer";
                }, Pa = function(a) {
                    var b = {
                        left: 0,
                        top: 0,
                        width: 0,
                        height: 0
                    };
                    if (a.getBoundingClientRect) {
                        var c = a.getBoundingClientRect(), d = h.pageXOffset, e = h.pageYOffset, f = i.documentElement.clientLeft || 0, g = i.documentElement.clientTop || 0, j = 0, k = 0;
                        if ("relative" === Oa(i.body, "position")) {
                            var l = i.body.getBoundingClientRect(), m = i.documentElement.getBoundingClientRect();
                            j = l.left - m.left || 0, k = l.top - m.top || 0;
                        }
                        b.left = c.left + d - f - j, b.top = c.top + e - g - k, b.width = "width" in c ? c.width : c.right - c.left, 
                        b.height = "height" in c ? c.height : c.bottom - c.top;
                    }
                    return b;
                }, Qa = function(a) {
                    if (!a) return !1;
                    var b = o(a, null), c = t(b.height) > 0, d = t(b.width) > 0, e = t(b.top) >= 0, f = t(b.left) >= 0, g = c && d && e && f, h = g ? null : Pa(a), i = "none" !== b.display && "collapse" !== b.visibility && (g || !!h && (c || h.height > 0) && (d || h.width > 0) && (e || h.top >= 0) && (f || h.left >= 0));
                    return i;
                }, Ra = function() {
                    l(U), U = 0, n(V), V = 0;
                }, Sa = function() {
                    var a;
                    if (f && (a = Ca(P.bridge))) {
                        var b = Pa(f);
                        C(a.style, {
                            width: b.width + "px",
                            height: b.height + "px",
                            top: b.top + "px",
                            left: b.left + "px",
                            zIndex: "" + Ua(_.zIndex)
                        });
                    }
                }, Ta = function(a) {
                    P.ready === !0 && (P.bridge && "function" == typeof P.bridge.setHandCursor ? P.bridge.setHandCursor(a) : P.ready = !1);
                }, Ua = function(a) {
                    if (/^(?:auto|inherit)$/.test(a)) return a;
                    var b;
                    return "number" != typeof a || u(a) ? "string" == typeof a && (b = Ua(s(a, 10))) : b = a, 
                    "number" == typeof b ? b : "auto";
                }, Va = function(a) {
                    var c, d, e, f = P.sandboxed, g = null;
                    if (a = a === !0, O === !1) g = !1; else {
                        try {
                            d = b.frameElement || null;
                        } catch (h) {
                            e = {
                                name: h.name,
                                message: h.message
                            };
                        }
                        if (d && 1 === d.nodeType && "IFRAME" === d.nodeName) try {
                            g = d.hasAttribute("sandbox");
                        } catch (h) {
                            g = null;
                        } else {
                            try {
                                c = document.domain || null;
                            } catch (h) {
                                c = null;
                            }
                            (null === c || e && "SecurityError" === e.name && /(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase())) && (g = !0);
                        }
                    }
                    return P.sandboxed = g, f === g || a || Wa(q), g;
                }, Wa = function(a) {
                    function b(a) {
                        var b = a.match(/[\d]+/g);
                        return b.length = 3, b.join(".");
                    }
                    function c(a) {
                        return !!a && (a = a.toLowerCase()) && (/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a) || "chrome.plugin" === a.slice(-13));
                    }
                    function d(a) {
                        a && (h = !0, a.version && (l = b(a.version)), !l && a.description && (l = b(a.description)), 
                        a.filename && (k = c(a.filename)));
                    }
                    var e, f, g, h = !1, i = !1, k = !1, l = "";
                    if (j.plugins && j.plugins.length) e = j.plugins["Shockwave Flash"], d(e), j.plugins["Shockwave Flash 2.0"] && (h = !0, 
                    l = "2.0.0.11"); else if (j.mimeTypes && j.mimeTypes.length) g = j.mimeTypes["application/x-shockwave-flash"], 
                    e = g && g.enabledPlugin, d(e); else if ("undefined" != typeof a) {
                        i = !0;
                        try {
                            f = new a("ShockwaveFlash.ShockwaveFlash.7"), h = !0, l = b(f.GetVariable("$version"));
                        } catch (m) {
                            try {
                                f = new a("ShockwaveFlash.ShockwaveFlash.6"), h = !0, l = "6.0.21";
                            } catch (n) {
                                try {
                                    f = new a("ShockwaveFlash.ShockwaveFlash"), h = !0, l = b(f.GetVariable("$version"));
                                } catch (o) {
                                    i = !1;
                                }
                            }
                        }
                    }
                    P.disabled = h !== !0, P.outdated = l && t(l) < t(Q), P.version = l || "0.0.0", 
                    P.pluginType = k ? "pepper" : i ? "activex" : h ? "netscape" : "unknown";
                };
                Wa(q), Va(!0);
                var Xa = function() {
                    return this instanceof Xa ? void ("function" == typeof Xa._createClient && Xa._createClient.apply(this, B(arguments))) : new Xa();
                };
                x(Xa, "version", {
                    value: "2.2.0",
                    writable: !1,
                    configurable: !0,
                    enumerable: !0
                }), Xa.config = function() {
                    return aa.apply(this, B(arguments));
                }, Xa.state = function() {
                    return ba.apply(this, B(arguments));
                }, Xa.isFlashUnusable = function() {
                    return ca.apply(this, B(arguments));
                }, Xa.on = function() {
                    return da.apply(this, B(arguments));
                }, Xa.off = function() {
                    return ea.apply(this, B(arguments));
                }, Xa.handlers = function() {
                    return fa.apply(this, B(arguments));
                }, Xa.emit = function() {
                    return ga.apply(this, B(arguments));
                }, Xa.create = function() {
                    return ha.apply(this, B(arguments));
                }, Xa.destroy = function() {
                    return ia.apply(this, B(arguments));
                }, Xa.setData = function() {
                    return ja.apply(this, B(arguments));
                }, Xa.clearData = function() {
                    return ka.apply(this, B(arguments));
                }, Xa.getData = function() {
                    return la.apply(this, B(arguments));
                }, Xa.focus = Xa.activate = function() {
                    return ma.apply(this, B(arguments));
                }, Xa.blur = Xa.deactivate = function() {
                    return na.apply(this, B(arguments));
                }, Xa.activeElement = function() {
                    return oa.apply(this, B(arguments));
                };
                var Ya = 0, Za = {}, $a = 0, _a = {}, ab = {};
                C(_, {
                    autoActivate: !0
                });
                var bb = function(a) {
                    var b = this;
                    b.id = "" + Ya++, Za[b.id] = {
                        instance: b,
                        elements: [],
                        handlers: {}
                    }, a && b.clip(a), Xa.on("*", function(a) {
                        return b.emit(a);
                    }), Xa.on("destroy", function() {
                        b.destroy();
                    }), Xa.create();
                }, cb = function(a, b) {
                    var c, f, g, h = {}, i = Za[this.id], j = i && i.handlers;
                    if (!i) throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");
                    if ("string" == typeof a && a) g = a.toLowerCase().split(/\s+/); else if ("object" == typeof a && a && "undefined" == typeof b) for (c in a) y.call(a, c) && "string" == typeof c && c && "function" == typeof a[c] && this.on(c, a[c]);
                    if (g && g.length) {
                        for (c = 0, f = g.length; f > c; c++) a = g[c].replace(/^on/, ""), h[a] = !0, j[a] || (j[a] = []), 
                        j[a].push(b);
                        if (h.ready && P.ready && this.emit({
                            type: "ready",
                            client: this
                        }), h.error) {
                            for (c = 0, f = Y.length; f > c; c++) if (P[Y[c].replace(/^flash-/, "")]) {
                                this.emit({
                                    type: "error",
                                    name: Y[c],
                                    client: this
                                });
                                break;
                            }
                            e !== d && Xa.version !== e && this.emit({
                                type: "error",
                                name: "version-mismatch",
                                jsVersion: Xa.version,
                                swfVersion: e
                            });
                        }
                    }
                    return this;
                }, db = function(a, b) {
                    var c, d, e, f, g, h = Za[this.id], i = h && h.handlers;
                    if (!i) return this;
                    if (0 === arguments.length) f = w(i); else if ("string" == typeof a && a) f = a.split(/\s+/); else if ("object" == typeof a && a && "undefined" == typeof b) for (c in a) y.call(a, c) && "string" == typeof c && c && "function" == typeof a[c] && this.off(c, a[c]);
                    if (f && f.length) for (c = 0, d = f.length; d > c; c++) if (a = f[c].toLowerCase().replace(/^on/, ""), 
                    g = i[a], g && g.length) if (b) for (e = g.indexOf(b); -1 !== e; ) g.splice(e, 1), 
                    e = g.indexOf(b, e); else g.length = 0;
                    return this;
                }, eb = function(a) {
                    var b = null, c = Za[this.id] && Za[this.id].handlers;
                    return c && (b = "string" == typeof a && a ? c[a] ? c[a].slice(0) : [] : D(c)), 
                    b;
                }, fb = function(a) {
                    if (kb.call(this, a)) {
                        "object" == typeof a && a && "string" == typeof a.type && a.type && (a = C({}, a));
                        var b = C({}, qa(a), {
                            client: this
                        });
                        lb.call(this, b);
                    }
                    return this;
                }, gb = function(a) {
                    if (!Za[this.id]) throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");
                    a = mb(a);
                    for (var b = 0; b < a.length; b++) if (y.call(a, b) && a[b] && 1 === a[b].nodeType) {
                        a[b].zcClippingId ? -1 === _a[a[b].zcClippingId].indexOf(this.id) && _a[a[b].zcClippingId].push(this.id) : (a[b].zcClippingId = "zcClippingId_" + $a++, 
                        _a[a[b].zcClippingId] = [ this.id ], _.autoActivate === !0 && nb(a[b]));
                        var c = Za[this.id] && Za[this.id].elements;
                        -1 === c.indexOf(a[b]) && c.push(a[b]);
                    }
                    return this;
                }, hb = function(a) {
                    var b = Za[this.id];
                    if (!b) return this;
                    var c, d = b.elements;
                    a = "undefined" == typeof a ? d.slice(0) : mb(a);
                    for (var e = a.length; e--; ) if (y.call(a, e) && a[e] && 1 === a[e].nodeType) {
                        for (c = 0; -1 !== (c = d.indexOf(a[e], c)); ) d.splice(c, 1);
                        var f = _a[a[e].zcClippingId];
                        if (f) {
                            for (c = 0; -1 !== (c = f.indexOf(this.id, c)); ) f.splice(c, 1);
                            0 === f.length && (_.autoActivate === !0 && ob(a[e]), delete a[e].zcClippingId);
                        }
                    }
                    return this;
                }, ib = function() {
                    var a = Za[this.id];
                    return a && a.elements ? a.elements.slice(0) : [];
                }, jb = function() {
                    Za[this.id] && (this.unclip(), this.off(), delete Za[this.id]);
                }, kb = function(a) {
                    if (!a || !a.type) return !1;
                    if (a.client && a.client !== this) return !1;
                    var b = Za[this.id], c = b && b.elements, d = !!c && c.length > 0, e = !a.target || d && -1 !== c.indexOf(a.target), f = a.relatedTarget && d && -1 !== c.indexOf(a.relatedTarget), g = a.client && a.client === this;
                    return !(!b || !(e || f || g));
                }, lb = function(a) {
                    var b = Za[this.id];
                    if ("object" == typeof a && a && a.type && b) {
                        var c = ta(a), d = b && b.handlers["*"] || [], e = b && b.handlers[a.type] || [], f = d.concat(e);
                        if (f && f.length) {
                            var g, i, j, k, l, m = this;
                            for (g = 0, i = f.length; i > g; g++) j = f[g], k = m, "string" == typeof j && "function" == typeof h[j] && (j = h[j]), 
                            "object" == typeof j && j && "function" == typeof j.handleEvent && (k = j, j = j.handleEvent), 
                            "function" == typeof j && (l = C({}, a), ua(j, k, [ l ], c));
                        }
                    }
                }, mb = function(a) {
                    return "string" == typeof a && (a = []), "number" != typeof a.length ? [ a ] : a;
                }, nb = function(a) {
                    if (a && 1 === a.nodeType) {
                        var b = function(a) {
                            (a || (a = h.event)) && ("js" !== a._source && (a.stopImmediatePropagation(), a.preventDefault()), 
                            delete a._source);
                        }, c = function(c) {
                            (c || (c = h.event)) && (b(c), Xa.focus(a));
                        };
                        a.addEventListener("mouseover", c, !1), a.addEventListener("mouseout", b, !1), a.addEventListener("mouseenter", b, !1), 
                        a.addEventListener("mouseleave", b, !1), a.addEventListener("mousemove", b, !1), 
                        ab[a.zcClippingId] = {
                            mouseover: c,
                            mouseout: b,
                            mouseenter: b,
                            mouseleave: b,
                            mousemove: b
                        };
                    }
                }, ob = function(a) {
                    if (a && 1 === a.nodeType) {
                        var b = ab[a.zcClippingId];
                        if ("object" == typeof b && b) {
                            for (var c, d, e = [ "move", "leave", "enter", "out", "over" ], f = 0, g = e.length; g > f; f++) c = "mouse" + e[f], 
                            d = b[c], "function" == typeof d && a.removeEventListener(c, d, !1);
                            delete ab[a.zcClippingId];
                        }
                    }
                };
                Xa._createClient = function() {
                    bb.apply(this, B(arguments));
                }, Xa.prototype.on = function() {
                    return cb.apply(this, B(arguments));
                }, Xa.prototype.off = function() {
                    return db.apply(this, B(arguments));
                }, Xa.prototype.handlers = function() {
                    return eb.apply(this, B(arguments));
                }, Xa.prototype.emit = function() {
                    return fb.apply(this, B(arguments));
                }, Xa.prototype.clip = function() {
                    return gb.apply(this, B(arguments));
                }, Xa.prototype.unclip = function() {
                    return hb.apply(this, B(arguments));
                }, Xa.prototype.elements = function() {
                    return ib.apply(this, B(arguments));
                }, Xa.prototype.destroy = function() {
                    return jb.apply(this, B(arguments));
                }, Xa.prototype.setText = function(a) {
                    if (!Za[this.id]) throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.setData("text/plain", a), this;
                }, Xa.prototype.setHtml = function(a) {
                    if (!Za[this.id]) throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.setData("text/html", a), this;
                }, Xa.prototype.setRichText = function(a) {
                    if (!Za[this.id]) throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.setData("application/rtf", a), this;
                }, Xa.prototype.setData = function() {
                    if (!Za[this.id]) throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.setData.apply(this, B(arguments)), this;
                }, Xa.prototype.clearData = function() {
                    if (!Za[this.id]) throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.clearData.apply(this, B(arguments)), this;
                }, Xa.prototype.getData = function() {
                    if (!Za[this.id]) throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");
                    return Xa.getData.apply(this, B(arguments));
                }, "function" == typeof a && a.amd ? a(function() {
                    return Xa;
                }) : "object" == typeof c && c && "object" == typeof c.exports && c.exports ? c.exports = Xa : b.ZeroClipboard = Xa;
            }(function() {
                return this || window;
            }());
        }, {} ]
    }, {}, [ 23, 57, 59, 58, 60, 81, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 82, 83, 84, 85, 98, 99, 100, 88, 89, 90, 91, 92, 93, 30, 34, 31, 32, 39, 33, 35, 36, 37, 38 ])("zeroclipboard");
}), !function(a, b) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
        if (!a.document) throw new Error("jQuery requires a window with a document");
        return b(a);
    } : b(a);
}("undefined" != typeof window ? window : this, function(a, b) {
    function c(a) {
        var b = "length" in a && a.length, c = _.type(a);
        return "function" === c || _.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a;
    }
    function d(a, b, c) {
        if (_.isFunction(b)) return _.grep(a, function(a, d) {
            return !!b.call(a, d, a) !== c;
        });
        if (b.nodeType) return _.grep(a, function(a) {
            return a === b !== c;
        });
        if ("string" == typeof b) {
            if (ha.test(b)) return _.filter(b, a, c);
            b = _.filter(b, a);
        }
        return _.grep(a, function(a) {
            return U.call(b, a) >= 0 !== c;
        });
    }
    function e(a, b) {
        for (;(a = a[b]) && 1 !== a.nodeType; ) ;
        return a;
    }
    function f(a) {
        var b = oa[a] = {};
        return _.each(a.match(na) || [], function(a, c) {
            b[c] = !0;
        }), b;
    }
    function g() {
        Z.removeEventListener("DOMContentLoaded", g, !1), a.removeEventListener("load", g, !1), 
        _.ready();
    }
    function h() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {};
            }
        }), this.expando = _.expando + h.uid++;
    }
    function i(a, b, c) {
        var d;
        if (void 0 === c && 1 === a.nodeType) if (d = "data-" + b.replace(ua, "-$1").toLowerCase(), 
        c = a.getAttribute(d), "string" == typeof c) {
            try {
                c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : ta.test(c) ? _.parseJSON(c) : c;
            } catch (e) {}
            sa.set(a, b, c);
        } else c = void 0;
        return c;
    }
    function j() {
        return !0;
    }
    function k() {
        return !1;
    }
    function l() {
        try {
            return Z.activeElement;
        } catch (a) {}
    }
    function m(a, b) {
        return _.nodeName(a, "table") && _.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a;
    }
    function n(a) {
        return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a;
    }
    function o(a) {
        var b = Ka.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"), a;
    }
    function p(a, b) {
        for (var c = 0, d = a.length; d > c; c++) ra.set(a[c], "globalEval", !b || ra.get(b[c], "globalEval"));
    }
    function q(a, b) {
        var c, d, e, f, g, h, i, j;
        if (1 === b.nodeType) {
            if (ra.hasData(a) && (f = ra.access(a), g = ra.set(b, f), j = f.events)) {
                delete g.handle, g.events = {};
                for (e in j) for (c = 0, d = j[e].length; d > c; c++) _.event.add(b, e, j[e][c]);
            }
            sa.hasData(a) && (h = sa.access(a), i = _.extend({}, h), sa.set(b, i));
        }
    }
    function r(a, b) {
        var c = a.getElementsByTagName ? a.getElementsByTagName(b || "*") : a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
        return void 0 === b || b && _.nodeName(a, b) ? _.merge([ a ], c) : c;
    }
    function s(a, b) {
        var c = b.nodeName.toLowerCase();
        "input" === c && ya.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue);
    }
    function t(b, c) {
        var d, e = _(c.createElement(b)).appendTo(c.body), f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : _.css(e[0], "display");
        return e.detach(), f;
    }
    function u(a) {
        var b = Z, c = Oa[a];
        return c || (c = t(a, b), "none" !== c && c || (Na = (Na || _("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), 
        b = Na[0].contentDocument, b.write(), b.close(), c = t(a, b), Na.detach()), Oa[a] = c), 
        c;
    }
    function v(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || Ra(a), c && (g = c.getPropertyValue(b) || c[b]), c && ("" !== g || _.contains(a.ownerDocument, a) || (g = _.style(a, b)), 
        Qa.test(g) && Pa.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, 
        g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 !== g ? g + "" : g;
    }
    function w(a, b) {
        return {
            get: function() {
                return a() ? void delete this.get : (this.get = b).apply(this, arguments);
            }
        };
    }
    function x(a, b) {
        if (b in a) return b;
        for (var c = b[0].toUpperCase() + b.slice(1), d = b, e = Xa.length; e--; ) if (b = Xa[e] + c, 
        b in a) return b;
        return d;
    }
    function y(a, b, c) {
        var d = Ta.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b;
    }
    function z(a, b, c, d, e) {
        for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += _.css(a, c + wa[f], !0, e)), 
        d ? ("content" === c && (g -= _.css(a, "padding" + wa[f], !0, e)), "margin" !== c && (g -= _.css(a, "border" + wa[f] + "Width", !0, e))) : (g += _.css(a, "padding" + wa[f], !0, e), 
        "padding" !== c && (g += _.css(a, "border" + wa[f] + "Width", !0, e)));
        return g;
    }
    function A(a, b, c) {
        var d = !0, e = "width" === b ? a.offsetWidth : a.offsetHeight, f = Ra(a), g = "border-box" === _.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = v(a, b, f), (0 > e || null == e) && (e = a.style[b]), Qa.test(e)) return e;
            d = g && (Y.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0;
        }
        return e + z(a, b, c || (g ? "border" : "content"), d, f) + "px";
    }
    function B(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = ra.get(d, "olddisplay"), 
        c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && xa(d) && (f[g] = ra.access(d, "olddisplay", u(d.nodeName)))) : (e = xa(d), 
        "none" === c && e || ra.set(d, "olddisplay", e ? c : _.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
        return a;
    }
    function C(a, b, c, d, e) {
        return new C.prototype.init(a, b, c, d, e);
    }
    function D() {
        return setTimeout(function() {
            Ya = void 0;
        }), Ya = _.now();
    }
    function E(a, b) {
        var c, d = 0, e = {
            height: a
        };
        for (b = b ? 1 : 0; 4 > d; d += 2 - b) c = wa[d], e["margin" + c] = e["padding" + c] = a;
        return b && (e.opacity = e.width = a), e;
    }
    function F(a, b, c) {
        for (var d, e = (cb[b] || []).concat(cb["*"]), f = 0, g = e.length; g > f; f++) if (d = e[f].call(c, b, a)) return d;
    }
    function G(a, b, c) {
        var d, e, f, g, h, i, j, k, l = this, m = {}, n = a.style, o = a.nodeType && xa(a), p = ra.get(a, "fxshow");
        c.queue || (h = _._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, 
        h.empty.fire = function() {
            h.unqueued || i();
        }), h.unqueued++, l.always(function() {
            l.always(function() {
                h.unqueued--, _.queue(a, "fx").length || h.empty.fire();
            });
        })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [ n.overflow, n.overflowX, n.overflowY ], 
        j = _.css(a, "display"), k = "none" === j ? ra.get(a, "olddisplay") || u(a.nodeName) : j, 
        "inline" === k && "none" === _.css(a, "float") && (n.display = "inline-block")), 
        c.overflow && (n.overflow = "hidden", l.always(function() {
            n.overflow = c.overflow[0], n.overflowX = c.overflow[1], n.overflowY = c.overflow[2];
        }));
        for (d in b) if (e = b[d], $a.exec(e)) {
            if (delete b[d], f = f || "toggle" === e, e === (o ? "hide" : "show")) {
                if ("show" !== e || !p || void 0 === p[d]) continue;
                o = !0;
            }
            m[d] = p && p[d] || _.style(a, d);
        } else j = void 0;
        if (_.isEmptyObject(m)) "inline" === ("none" === j ? u(a.nodeName) : j) && (n.display = j); else {
            p ? "hidden" in p && (o = p.hidden) : p = ra.access(a, "fxshow", {}), f && (p.hidden = !o), 
            o ? _(a).show() : l.done(function() {
                _(a).hide();
            }), l.done(function() {
                var b;
                ra.remove(a, "fxshow");
                for (b in m) _.style(a, b, m[b]);
            });
            for (d in m) g = F(o ? p[d] : 0, d, l), d in p || (p[d] = g.start, o && (g.end = g.start, 
            g.start = "width" === d || "height" === d ? 1 : 0));
        }
    }
    function H(a, b) {
        var c, d, e, f, g;
        for (c in a) if (d = _.camelCase(c), e = b[d], f = a[c], _.isArray(f) && (e = f[1], 
        f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = _.cssHooks[d], g && "expand" in g) {
            f = g.expand(f), delete a[d];
            for (c in f) c in a || (a[c] = f[c], b[c] = e);
        } else b[d] = e;
    }
    function I(a, b, c) {
        var d, e, f = 0, g = bb.length, h = _.Deferred().always(function() {
            delete i.elem;
        }), i = function() {
            if (e) return !1;
            for (var b = Ya || D(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
            return h.notifyWith(a, [ j, f, c ]), 1 > f && i ? c : (h.resolveWith(a, [ j ]), 
            !1);
        }, j = h.promise({
            elem: a,
            props: _.extend({}, b),
            opts: _.extend(!0, {
                specialEasing: {}
            }, c),
            originalProperties: b,
            originalOptions: c,
            startTime: Ya || D(),
            duration: c.duration,
            tweens: [],
            createTween: function(b, c) {
                var d = _.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                return j.tweens.push(d), d;
            },
            stop: function(b) {
                var c = 0, d = b ? j.tweens.length : 0;
                if (e) return this;
                for (e = !0; d > c; c++) j.tweens[c].run(1);
                return b ? h.resolveWith(a, [ j, b ]) : h.rejectWith(a, [ j, b ]), this;
            }
        }), k = j.props;
        for (H(k, j.opts.specialEasing); g > f; f++) if (d = bb[f].call(j, a, k, j.opts)) return d;
        return _.map(k, F, j), _.isFunction(j.opts.start) && j.opts.start.call(a, j), _.fx.timer(_.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always);
    }
    function J(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0, f = b.toLowerCase().match(na) || [];
            if (_.isFunction(c)) for (;d = f[e++]; ) "+" === d[0] ? (d = d.slice(1) || "*", 
            (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c);
        };
    }
    function K(a, b, c, d) {
        function e(h) {
            var i;
            return f[h] = !0, _.each(a[h] || [], function(a, h) {
                var j = h(b, c, d);
                return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), 
                e(j), !1);
            }), i;
        }
        var f = {}, g = a === tb;
        return e(b.dataTypes[0]) || !f["*"] && e("*");
    }
    function L(a, b) {
        var c, d, e = _.ajaxSettings.flatOptions || {};
        for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
        return d && _.extend(!0, a, d), a;
    }
    function M(a, b, c) {
        for (var d, e, f, g, h = a.contents, i = a.dataTypes; "*" === i[0]; ) i.shift(), 
        void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
        if (d) for (e in h) if (h[e] && h[e].test(d)) {
            i.unshift(e);
            break;
        }
        if (i[0] in c) f = i[0]; else {
            for (e in c) {
                if (!i[0] || a.converters[e + " " + i[0]]) {
                    f = e;
                    break;
                }
                g || (g = e);
            }
            f = f || g;
        }
        return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0;
    }
    function N(a, b, c, d) {
        var e, f, g, h, i, j = {}, k = a.dataTypes.slice();
        if (k[1]) for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        for (f = k.shift(); f; ) if (a.responseFields[f] && (c[a.responseFields[f]] = b), 
        !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift()) if ("*" === f) f = i; else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g) for (e in j) if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                break;
            }
            if (g !== !0) if (g && a["throws"]) b = g(b); else try {
                b = g(b);
            } catch (l) {
                return {
                    state: "parsererror",
                    error: g ? l : "No conversion from " + i + " to " + f
                };
            }
        }
        return {
            state: "success",
            data: b
        };
    }
    function O(a, b, c, d) {
        var e;
        if (_.isArray(b)) _.each(b, function(b, e) {
            c || yb.test(a) ? d(a, e) : O(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d);
        }); else if (c || "object" !== _.type(b)) d(a, b); else for (e in b) O(a + "[" + e + "]", b[e], c, d);
    }
    function P(a) {
        return _.isWindow(a) ? a : 9 === a.nodeType && a.defaultView;
    }
    var Q = [], R = Q.slice, S = Q.concat, T = Q.push, U = Q.indexOf, V = {}, W = V.toString, X = V.hasOwnProperty, Y = {}, Z = a.document, $ = "2.1.4", _ = function(a, b) {
        return new _.fn.init(a, b);
    }, aa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ba = /^-ms-/, ca = /-([\da-z])/gi, da = function(a, b) {
        return b.toUpperCase();
    };
    _.fn = _.prototype = {
        jquery: $,
        constructor: _,
        selector: "",
        length: 0,
        toArray: function() {
            return R.call(this);
        },
        get: function(a) {
            return null != a ? 0 > a ? this[a + this.length] : this[a] : R.call(this);
        },
        pushStack: function(a) {
            var b = _.merge(this.constructor(), a);
            return b.prevObject = this, b.context = this.context, b;
        },
        each: function(a, b) {
            return _.each(this, a, b);
        },
        map: function(a) {
            return this.pushStack(_.map(this, function(b, c) {
                return a.call(b, c, b);
            }));
        },
        slice: function() {
            return this.pushStack(R.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(a) {
            var b = this.length, c = +a + (0 > a ? b : 0);
            return this.pushStack(c >= 0 && b > c ? [ this[c] ] : []);
        },
        end: function() {
            return this.prevObject || this.constructor(null);
        },
        push: T,
        sort: Q.sort,
        splice: Q.splice
    }, _.extend = _.fn.extend = function() {
        var a, b, c, d, e, f, g = arguments[0] || {}, h = 1, i = arguments.length, j = !1;
        for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || _.isFunction(g) || (g = {}), 
        h === i && (g = this, h--); i > h; h++) if (null != (a = arguments[h])) for (b in a) c = g[b], 
        d = a[b], g !== d && (j && d && (_.isPlainObject(d) || (e = _.isArray(d))) ? (e ? (e = !1, 
        f = c && _.isArray(c) ? c : []) : f = c && _.isPlainObject(c) ? c : {}, g[b] = _.extend(j, f, d)) : void 0 !== d && (g[b] = d));
        return g;
    }, _.extend({
        expando: "jQuery" + ($ + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(a) {
            throw new Error(a);
        },
        noop: function() {},
        isFunction: function(a) {
            return "function" === _.type(a);
        },
        isArray: Array.isArray,
        isWindow: function(a) {
            return null != a && a === a.window;
        },
        isNumeric: function(a) {
            return !_.isArray(a) && a - parseFloat(a) + 1 >= 0;
        },
        isPlainObject: function(a) {
            return "object" !== _.type(a) || a.nodeType || _.isWindow(a) ? !1 : !a.constructor || X.call(a.constructor.prototype, "isPrototypeOf");
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return !1;
            return !0;
        },
        type: function(a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? V[W.call(a)] || "object" : typeof a;
        },
        globalEval: function(a) {
            var b, c = eval;
            a = _.trim(a), a && (1 === a.indexOf("use strict") ? (b = Z.createElement("script"), 
            b.text = a, Z.head.appendChild(b).parentNode.removeChild(b)) : c(a));
        },
        camelCase: function(a) {
            return a.replace(ba, "ms-").replace(ca, da);
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase();
        },
        each: function(a, b, d) {
            var e, f = 0, g = a.length, h = c(a);
            if (d) {
                if (h) for (;g > f && (e = b.apply(a[f], d), e !== !1); f++) ; else for (f in a) if (e = b.apply(a[f], d), 
                e === !1) break;
            } else if (h) for (;g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++) ; else for (f in a) if (e = b.call(a[f], f, a[f]), 
            e === !1) break;
            return a;
        },
        trim: function(a) {
            return null == a ? "" : (a + "").replace(aa, "");
        },
        makeArray: function(a, b) {
            var d = b || [];
            return null != a && (c(Object(a)) ? _.merge(d, "string" == typeof a ? [ a ] : a) : T.call(d, a)), 
            d;
        },
        inArray: function(a, b, c) {
            return null == b ? -1 : U.call(b, a, c);
        },
        merge: function(a, b) {
            for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
            return a.length = e, a;
        },
        grep: function(a, b, c) {
            for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
            return e;
        },
        map: function(a, b, d) {
            var e, f = 0, g = a.length, h = c(a), i = [];
            if (h) for (;g > f; f++) e = b(a[f], f, d), null != e && i.push(e); else for (f in a) e = b(a[f], f, d), 
            null != e && i.push(e);
            return S.apply([], i);
        },
        guid: 1,
        proxy: function(a, b) {
            var c, d, e;
            return "string" == typeof b && (c = a[b], b = a, a = c), _.isFunction(a) ? (d = R.call(arguments, 2), 
            e = function() {
                return a.apply(b || this, d.concat(R.call(arguments)));
            }, e.guid = a.guid = a.guid || _.guid++, e) : void 0;
        },
        now: Date.now,
        support: Y
    }), _.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
        V["[object " + b + "]"] = b.toLowerCase();
    });
    var ea = function(a) {
        function b(a, b, c, d) {
            var e, f, g, h, i, j, l, n, o, p;
            if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], h = b.nodeType, 
            "string" != typeof a || !a || 1 !== h && 9 !== h && 11 !== h) return c;
            if (!d && I) {
                if (11 !== h && (e = sa.exec(a))) if (g = e[1]) {
                    if (9 === h) {
                        if (f = b.getElementById(g), !f || !f.parentNode) return c;
                        if (f.id === g) return c.push(f), c;
                    } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f), 
                    c;
                } else {
                    if (e[2]) return $.apply(c, b.getElementsByTagName(a)), c;
                    if ((g = e[3]) && v.getElementsByClassName) return $.apply(c, b.getElementsByClassName(g)), 
                    c;
                }
                if (v.qsa && (!J || !J.test(a))) {
                    if (n = l = N, o = b, p = 1 !== h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                        for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), 
                        n = "[id='" + n + "'] ", i = j.length; i--; ) j[i] = n + m(j[i]);
                        o = ta.test(a) && k(b.parentNode) || b, p = j.join(",");
                    }
                    if (p) try {
                        return $.apply(c, o.querySelectorAll(p)), c;
                    } catch (q) {} finally {
                        l || b.removeAttribute("id");
                    }
                }
            }
            return B(a.replace(ia, "$1"), b, c, d);
        }
        function c() {
            function a(c, d) {
                return b.push(c + " ") > w.cacheLength && delete a[b.shift()], a[c + " "] = d;
            }
            var b = [];
            return a;
        }
        function d(a) {
            return a[N] = !0, a;
        }
        function e(a) {
            var b = G.createElement("div");
            try {
                return !!a(b);
            } catch (c) {
                return !1;
            } finally {
                b.parentNode && b.parentNode.removeChild(b), b = null;
            }
        }
        function f(a, b) {
            for (var c = a.split("|"), d = a.length; d--; ) w.attrHandle[c[d]] = b;
        }
        function g(a, b) {
            var c = b && a, d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || V) - (~a.sourceIndex || V);
            if (d) return d;
            if (c) for (;c = c.nextSibling; ) if (c === b) return -1;
            return a ? 1 : -1;
        }
        function h(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a;
            };
        }
        function i(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a;
            };
        }
        function j(a) {
            return d(function(b) {
                return b = +b, d(function(c, d) {
                    for (var e, f = a([], c.length, b), g = f.length; g--; ) c[e = f[g]] && (c[e] = !(d[e] = c[e]));
                });
            });
        }
        function k(a) {
            return a && "undefined" != typeof a.getElementsByTagName && a;
        }
        function l() {}
        function m(a) {
            for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
            return d;
        }
        function n(a, b, c) {
            var d = b.dir, e = c && "parentNode" === d, f = Q++;
            return b.first ? function(b, c, f) {
                for (;b = b[d]; ) if (1 === b.nodeType || e) return a(b, c, f);
            } : function(b, c, g) {
                var h, i, j = [ P, f ];
                if (g) {
                    for (;b = b[d]; ) if ((1 === b.nodeType || e) && a(b, c, g)) return !0;
                } else for (;b = b[d]; ) if (1 === b.nodeType || e) {
                    if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f) return j[2] = h[2];
                    if (i[d] = j, j[2] = a(b, c, g)) return !0;
                }
            };
        }
        function o(a) {
            return a.length > 1 ? function(b, c, d) {
                for (var e = a.length; e--; ) if (!a[e](b, c, d)) return !1;
                return !0;
            } : a[0];
        }
        function p(a, c, d) {
            for (var e = 0, f = c.length; f > e; e++) b(a, c[e], d);
            return d;
        }
        function q(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++) (f = a[h]) && (!c || c(f, d, e)) && (g.push(f), 
            j && b.push(h));
            return g;
        }
        function r(a, b, c, e, f, g) {
            return e && !e[N] && (e = r(e)), f && !f[N] && (f = r(f, g)), d(function(d, g, h, i) {
                var j, k, l, m = [], n = [], o = g.length, r = d || p(b || "*", h.nodeType ? [ h ] : h, []), s = !a || !d && b ? r : q(r, m, a, h, i), t = c ? f || (d ? a : o || e) ? [] : g : s;
                if (c && c(s, t, h, i), e) for (j = q(t, n), e(j, [], h, i), k = j.length; k--; ) (l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
                if (d) {
                    if (f || a) {
                        if (f) {
                            for (j = [], k = t.length; k--; ) (l = t[k]) && j.push(s[k] = l);
                            f(null, t = [], j, i);
                        }
                        for (k = t.length; k--; ) (l = t[k]) && (j = f ? aa(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l));
                    }
                } else t = q(t === g ? t.splice(o, t.length) : t), f ? f(null, g, t, i) : $.apply(g, t);
            });
        }
        function s(a) {
            for (var b, c, d, e = a.length, f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function(a) {
                return a === b;
            }, g, !0), j = n(function(a) {
                return aa(b, a) > -1;
            }, g, !0), k = [ function(a, c, d) {
                var e = !f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d));
                return b = null, e;
            } ]; e > h; h++) if (c = w.relative[a[h].type]) k = [ n(o(k), c) ]; else {
                if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                    for (d = ++h; e > d && !w.relative[a[d].type]; d++) ;
                    return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
                        value: " " === a[h - 2].type ? "*" : ""
                    })).replace(ia, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && m(a));
                }
                k.push(c);
            }
            return o(k);
        }
        function t(a, c) {
            var e = c.length > 0, f = a.length > 0, g = function(d, g, h, i, j) {
                var k, l, m, n = 0, o = "0", p = d && [], r = [], s = C, t = d || f && w.find.TAG("*", j), u = P += null == s ? 1 : Math.random() || .1, v = t.length;
                for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
                    if (f && k) {
                        for (l = 0; m = a[l++]; ) if (m(k, g, h)) {
                            i.push(k);
                            break;
                        }
                        j && (P = u);
                    }
                    e && ((k = !m && k) && n--, d && p.push(k));
                }
                if (n += o, e && o !== n) {
                    for (l = 0; m = c[l++]; ) m(p, r, g, h);
                    if (d) {
                        if (n > 0) for (;o--; ) p[o] || r[o] || (r[o] = Y.call(i));
                        r = q(r);
                    }
                    $.apply(i, r), j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i);
                }
                return j && (P = u, C = s), p;
            };
            return e ? d(g) : g;
        }
        var u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + 1 * new Date(), O = a.document, P = 0, Q = 0, R = c(), S = c(), T = c(), U = function(a, b) {
            return a === b && (E = !0), 0;
        }, V = 1 << 31, W = {}.hasOwnProperty, X = [], Y = X.pop, Z = X.push, $ = X.push, _ = X.slice, aa = function(a, b) {
            for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return c;
            return -1;
        }, ba = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", ca = "[\\x20\\t\\r\\n\\f]", da = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ea = da.replace("w", "w#"), fa = "\\[" + ca + "*(" + da + ")(?:" + ca + "*([*^$|!~]?=)" + ca + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ea + "))|)" + ca + "*\\]", ga = ":(" + da + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + fa + ")*)|.*)\\)|)", ha = new RegExp(ca + "+", "g"), ia = new RegExp("^" + ca + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ca + "+$", "g"), ja = new RegExp("^" + ca + "*," + ca + "*"), ka = new RegExp("^" + ca + "*([>+~]|" + ca + ")" + ca + "*"), la = new RegExp("=" + ca + "*([^\\]'\"]*?)" + ca + "*\\]", "g"), ma = new RegExp(ga), na = new RegExp("^" + ea + "$"), oa = {
            ID: new RegExp("^#(" + da + ")"),
            CLASS: new RegExp("^\\.(" + da + ")"),
            TAG: new RegExp("^(" + da.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + fa),
            PSEUDO: new RegExp("^" + ga),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ca + "*(even|odd|(([+-]|)(\\d*)n|)" + ca + "*(?:([+-]|)" + ca + "*(\\d+)|))" + ca + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + ba + ")$", "i"),
            needsContext: new RegExp("^" + ca + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ca + "*((?:-\\d)?\\d*)" + ca + "*\\)|)(?=[^-]|$)", "i")
        }, pa = /^(?:input|select|textarea|button)$/i, qa = /^h\d$/i, ra = /^[^{]+\{\s*\[native \w/, sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ta = /[+~]/, ua = /'|\\/g, va = new RegExp("\\\\([\\da-f]{1,6}" + ca + "?|(" + ca + ")|.)", "ig"), wa = function(a, b, c) {
            var d = "0x" + b - 65536;
            return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320);
        }, xa = function() {
            F();
        };
        try {
            $.apply(X = _.call(O.childNodes), O.childNodes), X[O.childNodes.length].nodeType;
        } catch (ya) {
            $ = {
                apply: X.length ? function(a, b) {
                    Z.apply(a, _.call(b));
                } : function(a, b) {
                    for (var c = a.length, d = 0; a[c++] = b[d++]; ) ;
                    a.length = c - 1;
                }
            };
        }
        v = b.support = {}, y = b.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1;
        }, F = b.setDocument = function(a) {
            var b, c, d = a ? a.ownerDocument || a : O;
            return d !== G && 9 === d.nodeType && d.documentElement ? (G = d, H = d.documentElement, 
            c = d.defaultView, c && c !== c.top && (c.addEventListener ? c.addEventListener("unload", xa, !1) : c.attachEvent && c.attachEvent("onunload", xa)), 
            I = !y(d), v.attributes = e(function(a) {
                return a.className = "i", !a.getAttribute("className");
            }), v.getElementsByTagName = e(function(a) {
                return a.appendChild(d.createComment("")), !a.getElementsByTagName("*").length;
            }), v.getElementsByClassName = ra.test(d.getElementsByClassName), v.getById = e(function(a) {
                return H.appendChild(a).id = N, !d.getElementsByName || !d.getElementsByName(N).length;
            }), v.getById ? (w.find.ID = function(a, b) {
                if ("undefined" != typeof b.getElementById && I) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [ c ] : [];
                }
            }, w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    return a.getAttribute("id") === b;
                };
            }) : (delete w.find.ID, w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    var c = "undefined" != typeof a.getAttributeNode && a.getAttributeNode("id");
                    return c && c.value === b;
                };
            }), w.find.TAG = v.getElementsByTagName ? function(a, b) {
                return "undefined" != typeof b.getElementsByTagName ? b.getElementsByTagName(a) : v.qsa ? b.querySelectorAll(a) : void 0;
            } : function(a, b) {
                var c, d = [], e = 0, f = b.getElementsByTagName(a);
                if ("*" === a) {
                    for (;c = f[e++]; ) 1 === c.nodeType && d.push(c);
                    return d;
                }
                return f;
            }, w.find.CLASS = v.getElementsByClassName && function(a, b) {
                return I ? b.getElementsByClassName(a) : void 0;
            }, K = [], J = [], (v.qsa = ra.test(d.querySelectorAll)) && (e(function(a) {
                H.appendChild(a).innerHTML = "<a id='" + N + "'></a><select id='" + N + "-\f]' msallowcapture=''><option selected=''></option></select>", 
                a.querySelectorAll("[msallowcapture^='']").length && J.push("[*^$]=" + ca + "*(?:''|\"\")"), 
                a.querySelectorAll("[selected]").length || J.push("\\[" + ca + "*(?:value|" + ba + ")"), 
                a.querySelectorAll("[id~=" + N + "-]").length || J.push("~="), a.querySelectorAll(":checked").length || J.push(":checked"), 
                a.querySelectorAll("a#" + N + "+*").length || J.push(".#.+[+~]");
            }), e(function(a) {
                var b = d.createElement("input");
                b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && J.push("name" + ca + "*[*^$|!~]?="), 
                a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), 
                J.push(",.*:");
            })), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function(a) {
                v.disconnectedMatch = L.call(a, "div"), L.call(a, "[s!='']:x"), K.push("!=", ga);
            }), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), 
            b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ? function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a, d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)));
            } : function(a, b) {
                if (b) for (;b = b.parentNode; ) if (b === a) return !0;
                return !1;
            }, U = b ? function(a, b) {
                if (a === b) return E = !0, 0;
                var c = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return c ? c : (c = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 
                1 & c || !v.sortDetached && b.compareDocumentPosition(a) === c ? a === d || a.ownerDocument === O && M(O, a) ? -1 : b === d || b.ownerDocument === O && M(O, b) ? 1 : D ? aa(D, a) - aa(D, b) : 0 : 4 & c ? -1 : 1);
            } : function(a, b) {
                if (a === b) return E = !0, 0;
                var c, e = 0, f = a.parentNode, h = b.parentNode, i = [ a ], j = [ b ];
                if (!f || !h) return a === d ? -1 : b === d ? 1 : f ? -1 : h ? 1 : D ? aa(D, a) - aa(D, b) : 0;
                if (f === h) return g(a, b);
                for (c = a; c = c.parentNode; ) i.unshift(c);
                for (c = b; c = c.parentNode; ) j.unshift(c);
                for (;i[e] === j[e]; ) e++;
                return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0;
            }, d) : G;
        }, b.matches = function(a, c) {
            return b(a, null, null, c);
        }, b.matchesSelector = function(a, c) {
            if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), !(!v.matchesSelector || !I || K && K.test(c) || J && J.test(c))) try {
                var d = L.call(a, c);
                if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d;
            } catch (e) {}
            return b(c, G, null, [ a ]).length > 0;
        }, b.contains = function(a, b) {
            return (a.ownerDocument || a) !== G && F(a), M(a, b);
        }, b.attr = function(a, b) {
            (a.ownerDocument || a) !== G && F(a);
            var c = w.attrHandle[b.toLowerCase()], d = c && W.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
            return void 0 !== d ? d : v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value : null;
        }, b.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a);
        }, b.uniqueSort = function(a) {
            var b, c = [], d = 0, e = 0;
            if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
                for (;b = a[e++]; ) b === a[e] && (d = c.push(e));
                for (;d--; ) a.splice(c[d], 1);
            }
            return D = null, a;
        }, x = b.getText = function(a) {
            var b, c = "", d = 0, e = a.nodeType;
            if (e) {
                if (1 === e || 9 === e || 11 === e) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += x(a);
                } else if (3 === e || 4 === e) return a.nodeValue;
            } else for (;b = a[d++]; ) c += x(b);
            return c;
        }, w = b.selectors = {
            cacheLength: 50,
            createPseudo: d,
            match: oa,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(va, wa), a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa), 
                    "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4);
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), 
                    a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]), 
                    a;
                },
                PSEUDO: function(a) {
                    var b, c = !a[6] && a[2];
                    return oa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), 
                    a[2] = c.slice(0, b)), a.slice(0, 3));
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(va, wa).toLowerCase();
                    return "*" === a ? function() {
                        return !0;
                    } : function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b;
                    };
                },
                CLASS: function(a) {
                    var b = R[a + " "];
                    return b || (b = new RegExp("(^|" + ca + ")" + a + "(" + ca + "|$)")) && R(a, function(a) {
                        return b.test("string" == typeof a.className && a.className || "undefined" != typeof a.getAttribute && a.getAttribute("class") || "");
                    });
                },
                ATTR: function(a, c, d) {
                    return function(e) {
                        var f = b.attr(e, a);
                        return null == f ? "!=" === c : c ? (f += "", "=" === c ? f === d : "!=" === c ? f !== d : "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice(-d.length) === d : "~=" === c ? (" " + f.replace(ha, " ") + " ").indexOf(d) > -1 : "|=" === c ? f === d || f.slice(0, d.length + 1) === d + "-" : !1) : !0;
                    };
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3), g = "last" !== a.slice(-4), h = "of-type" === b;
                    return 1 === d && 0 === e ? function(a) {
                        return !!a.parentNode;
                    } : function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling", q = b.parentNode, r = h && b.nodeName.toLowerCase(), s = !i && !h;
                        if (q) {
                            if (f) {
                                for (;p; ) {
                                    for (l = b; l = l[p]; ) if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                    o = p = "only" === a && !o && "nextSibling";
                                }
                                return !0;
                            }
                            if (o = [ g ? q.firstChild : q.lastChild ], g && s) {
                                for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], 
                                l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop(); ) if (1 === l.nodeType && ++m && l === b) {
                                    k[a] = [ P, n, m ];
                                    break;
                                }
                            } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1]; else for (;(l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [ P, m ]), 
                            l !== b)); ) ;
                            return m -= e, m === d || m % d === 0 && m / d >= 0;
                        }
                    };
                },
                PSEUDO: function(a, c) {
                    var e, f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
                    return f[N] ? f(c) : f.length > 1 ? (e = [ a, a, "", c ], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function(a, b) {
                        for (var d, e = f(a, c), g = e.length; g--; ) d = aa(a, e[g]), a[d] = !(b[d] = e[g]);
                    }) : function(a) {
                        return f(a, 0, e);
                    }) : f;
                }
            },
            pseudos: {
                not: d(function(a) {
                    var b = [], c = [], e = A(a.replace(ia, "$1"));
                    return e[N] ? d(function(a, b, c, d) {
                        for (var f, g = e(a, null, d, []), h = a.length; h--; ) (f = g[h]) && (a[h] = !(b[h] = f));
                    }) : function(a, d, f) {
                        return b[0] = a, e(b, null, f, c), b[0] = null, !c.pop();
                    };
                }),
                has: d(function(a) {
                    return function(c) {
                        return b(a, c).length > 0;
                    };
                }),
                contains: d(function(a) {
                    return a = a.replace(va, wa), function(b) {
                        return (b.textContent || b.innerText || x(b)).indexOf(a) > -1;
                    };
                }),
                lang: d(function(a) {
                    return na.test(a || "") || b.error("unsupported lang: " + a), a = a.replace(va, wa).toLowerCase(), 
                    function(b) {
                        var c;
                        do if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), 
                        c === a || 0 === c.indexOf(a + "-"); while ((b = b.parentNode) && 1 === b.nodeType);
                        return !1;
                    };
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id;
                },
                root: function(a) {
                    return a === H;
                },
                focus: function(a) {
                    return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex);
                },
                enabled: function(a) {
                    return a.disabled === !1;
                },
                disabled: function(a) {
                    return a.disabled === !0;
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected;
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0;
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling) if (a.nodeType < 6) return !1;
                    return !0;
                },
                parent: function(a) {
                    return !w.pseudos.empty(a);
                },
                header: function(a) {
                    return qa.test(a.nodeName);
                },
                input: function(a) {
                    return pa.test(a.nodeName);
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b;
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase());
                },
                first: j(function() {
                    return [ 0 ];
                }),
                last: j(function(a, b) {
                    return [ b - 1 ];
                }),
                eq: j(function(a, b, c) {
                    return [ 0 > c ? c + b : c ];
                }),
                even: j(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a;
                }),
                odd: j(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a;
                }),
                lt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0; ) a.push(d);
                    return a;
                }),
                gt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; ++d < b; ) a.push(d);
                    return a;
                })
            }
        }, w.pseudos.nth = w.pseudos.eq;
        for (u in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) w.pseudos[u] = h(u);
        for (u in {
            submit: !0,
            reset: !0
        }) w.pseudos[u] = i(u);
        return l.prototype = w.filters = w.pseudos, w.setFilters = new l(), z = b.tokenize = function(a, c) {
            var d, e, f, g, h, i, j, k = S[a + " "];
            if (k) return c ? 0 : k.slice(0);
            for (h = a, i = [], j = w.preFilter; h; ) {
                (!d || (e = ja.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), 
                d = !1, (e = ka.exec(h)) && (d = e.shift(), f.push({
                    value: d,
                    type: e[0].replace(ia, " ")
                }), h = h.slice(d.length));
                for (g in w.filter) !(e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), 
                f.push({
                    value: d,
                    type: g,
                    matches: e
                }), h = h.slice(d.length));
                if (!d) break;
            }
            return c ? h.length : h ? b.error(a) : S(a, i).slice(0);
        }, A = b.compile = function(a, b) {
            var c, d = [], e = [], f = T[a + " "];
            if (!f) {
                for (b || (b = z(a)), c = b.length; c--; ) f = s(b[c]), f[N] ? d.push(f) : e.push(f);
                f = T(a, t(e, d)), f.selector = a;
            }
            return f;
        }, B = b.select = function(a, b, c, d) {
            var e, f, g, h, i, j = "function" == typeof a && a, l = !d && z(a = j.selector || a);
            if (c = c || [], 1 === l.length) {
                if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
                    if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b) return c;
                    j && (b = b.parentNode), a = a.slice(f.shift().value.length);
                }
                for (e = oa.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !w.relative[h = g.type]); ) if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
                    if (f.splice(e, 1), a = d.length && m(f), !a) return $.apply(c, d), c;
                    break;
                }
            }
            return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b), c;
        }, v.sortStable = N.split("").sort(U).join("") === N, v.detectDuplicates = !!E, 
        F(), v.sortDetached = e(function(a) {
            return 1 & a.compareDocumentPosition(G.createElement("div"));
        }), e(function(a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href");
        }) || f("type|href|height|width", function(a, b, c) {
            return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2);
        }), v.attributes && e(function(a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value");
        }) || f("value", function(a, b, c) {
            return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue;
        }), e(function(a) {
            return null == a.getAttribute("disabled");
        }) || f(ba, function(a, b, c) {
            var d;
            return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null;
        }), b;
    }(a);
    _.find = ea, _.expr = ea.selectors, _.expr[":"] = _.expr.pseudos, _.unique = ea.uniqueSort, 
    _.text = ea.getText, _.isXMLDoc = ea.isXML, _.contains = ea.contains;
    var fa = _.expr.match.needsContext, ga = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, ha = /^.[^:#\[\.,]*$/;
    _.filter = function(a, b, c) {
        var d = b[0];
        return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? _.find.matchesSelector(d, a) ? [ d ] : [] : _.find.matches(a, _.grep(b, function(a) {
            return 1 === a.nodeType;
        }));
    }, _.fn.extend({
        find: function(a) {
            var b, c = this.length, d = [], e = this;
            if ("string" != typeof a) return this.pushStack(_(a).filter(function() {
                for (b = 0; c > b; b++) if (_.contains(e[b], this)) return !0;
            }));
            for (b = 0; c > b; b++) _.find(a, e[b], d);
            return d = this.pushStack(c > 1 ? _.unique(d) : d), d.selector = this.selector ? this.selector + " " + a : a, 
            d;
        },
        filter: function(a) {
            return this.pushStack(d(this, a || [], !1));
        },
        not: function(a) {
            return this.pushStack(d(this, a || [], !0));
        },
        is: function(a) {
            return !!d(this, "string" == typeof a && fa.test(a) ? _(a) : a || [], !1).length;
        }
    });
    var ia, ja = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, ka = _.fn.init = function(a, b) {
        var c, d;
        if (!a) return this;
        if ("string" == typeof a) {
            if (c = "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3 ? [ null, a, null ] : ja.exec(a), 
            !c || !c[1] && b) return !b || b.jquery ? (b || ia).find(a) : this.constructor(b).find(a);
            if (c[1]) {
                if (b = b instanceof _ ? b[0] : b, _.merge(this, _.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : Z, !0)), 
                ga.test(c[1]) && _.isPlainObject(b)) for (c in b) _.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                return this;
            }
            return d = Z.getElementById(c[2]), d && d.parentNode && (this.length = 1, this[0] = d), 
            this.context = Z, this.selector = a, this;
        }
        return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : _.isFunction(a) ? "undefined" != typeof ia.ready ? ia.ready(a) : a(_) : (void 0 !== a.selector && (this.selector = a.selector, 
        this.context = a.context), _.makeArray(a, this));
    };
    ka.prototype = _.fn, ia = _(Z);
    var la = /^(?:parents|prev(?:Until|All))/, ma = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    _.extend({
        dir: function(a, b, c) {
            for (var d = [], e = void 0 !== c; (a = a[b]) && 9 !== a.nodeType; ) if (1 === a.nodeType) {
                if (e && _(a).is(c)) break;
                d.push(a);
            }
            return d;
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c;
        }
    }), _.fn.extend({
        has: function(a) {
            var b = _(a, this), c = b.length;
            return this.filter(function() {
                for (var a = 0; c > a; a++) if (_.contains(this, b[a])) return !0;
            });
        },
        closest: function(a, b) {
            for (var c, d = 0, e = this.length, f = [], g = fa.test(a) || "string" != typeof a ? _(a, b || this.context) : 0; e > d; d++) for (c = this[d]; c && c !== b; c = c.parentNode) if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && _.find.matchesSelector(c, a))) {
                f.push(c);
                break;
            }
            return this.pushStack(f.length > 1 ? _.unique(f) : f);
        },
        index: function(a) {
            return a ? "string" == typeof a ? U.call(_(a), this[0]) : U.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function(a, b) {
            return this.pushStack(_.unique(_.merge(this.get(), _(a, b))));
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a));
        }
    }), _.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null;
        },
        parents: function(a) {
            return _.dir(a, "parentNode");
        },
        parentsUntil: function(a, b, c) {
            return _.dir(a, "parentNode", c);
        },
        next: function(a) {
            return e(a, "nextSibling");
        },
        prev: function(a) {
            return e(a, "previousSibling");
        },
        nextAll: function(a) {
            return _.dir(a, "nextSibling");
        },
        prevAll: function(a) {
            return _.dir(a, "previousSibling");
        },
        nextUntil: function(a, b, c) {
            return _.dir(a, "nextSibling", c);
        },
        prevUntil: function(a, b, c) {
            return _.dir(a, "previousSibling", c);
        },
        siblings: function(a) {
            return _.sibling((a.parentNode || {}).firstChild, a);
        },
        children: function(a) {
            return _.sibling(a.firstChild);
        },
        contents: function(a) {
            return a.contentDocument || _.merge([], a.childNodes);
        }
    }, function(a, b) {
        _.fn[a] = function(c, d) {
            var e = _.map(this, b, c);
            return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = _.filter(d, e)), 
            this.length > 1 && (ma[a] || _.unique(e), la.test(a) && e.reverse()), this.pushStack(e);
        };
    });
    var na = /\S+/g, oa = {};
    _.Callbacks = function(a) {
        a = "string" == typeof a ? oa[a] || f(a) : _.extend({}, a);
        var b, c, d, e, g, h, i = [], j = !a.once && [], k = function(f) {
            for (b = a.memory && f, c = !0, h = e || 0, e = 0, g = i.length, d = !0; i && g > h; h++) if (i[h].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
                b = !1;
                break;
            }
            d = !1, i && (j ? j.length && k(j.shift()) : b ? i = [] : l.disable());
        }, l = {
            add: function() {
                if (i) {
                    var c = i.length;
                    !function f(b) {
                        _.each(b, function(b, c) {
                            var d = _.type(c);
                            "function" === d ? a.unique && l.has(c) || i.push(c) : c && c.length && "string" !== d && f(c);
                        });
                    }(arguments), d ? g = i.length : b && (e = c, k(b));
                }
                return this;
            },
            remove: function() {
                return i && _.each(arguments, function(a, b) {
                    for (var c; (c = _.inArray(b, i, c)) > -1; ) i.splice(c, 1), d && (g >= c && g--, 
                    h >= c && h--);
                }), this;
            },
            has: function(a) {
                return a ? _.inArray(a, i) > -1 : !(!i || !i.length);
            },
            empty: function() {
                return i = [], g = 0, this;
            },
            disable: function() {
                return i = j = b = void 0, this;
            },
            disabled: function() {
                return !i;
            },
            lock: function() {
                return j = void 0, b || l.disable(), this;
            },
            locked: function() {
                return !j;
            },
            fireWith: function(a, b) {
                return !i || c && !j || (b = b || [], b = [ a, b.slice ? b.slice() : b ], d ? j.push(b) : k(b)), 
                this;
            },
            fire: function() {
                return l.fireWith(this, arguments), this;
            },
            fired: function() {
                return !!c;
            }
        };
        return l;
    }, _.extend({
        Deferred: function(a) {
            var b = [ [ "resolve", "done", _.Callbacks("once memory"), "resolved" ], [ "reject", "fail", _.Callbacks("once memory"), "rejected" ], [ "notify", "progress", _.Callbacks("memory") ] ], c = "pending", d = {
                state: function() {
                    return c;
                },
                always: function() {
                    return e.done(arguments).fail(arguments), this;
                },
                then: function() {
                    var a = arguments;
                    return _.Deferred(function(c) {
                        _.each(b, function(b, f) {
                            var g = _.isFunction(a[b]) && a[b];
                            e[f[1]](function() {
                                var a = g && g.apply(this, arguments);
                                a && _.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [ a ] : arguments);
                            });
                        }), a = null;
                    }).promise();
                },
                promise: function(a) {
                    return null != a ? _.extend(a, d) : d;
                }
            }, e = {};
            return d.pipe = d.then, _.each(b, function(a, f) {
                var g = f[2], h = f[3];
                d[f[1]] = g.add, h && g.add(function() {
                    c = h;
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d : this, arguments), this;
                }, e[f[0] + "With"] = g.fireWith;
            }), d.promise(e), a && a.call(e, e), e;
        },
        when: function(a) {
            var b, c, d, e = 0, f = R.call(arguments), g = f.length, h = 1 !== g || a && _.isFunction(a.promise) ? g : 0, i = 1 === h ? a : _.Deferred(), j = function(a, c, d) {
                return function(e) {
                    c[a] = this, d[a] = arguments.length > 1 ? R.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d);
                };
            };
            if (g > 1) for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++) f[e] && _.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
            return h || i.resolveWith(d, f), i.promise();
        }
    });
    var pa;
    _.fn.ready = function(a) {
        return _.ready.promise().done(a), this;
    }, _.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? _.readyWait++ : _.ready(!0);
        },
        ready: function(a) {
            (a === !0 ? --_.readyWait : _.isReady) || (_.isReady = !0, a !== !0 && --_.readyWait > 0 || (pa.resolveWith(Z, [ _ ]), 
            _.fn.triggerHandler && (_(Z).triggerHandler("ready"), _(Z).off("ready"))));
        }
    }), _.ready.promise = function(b) {
        return pa || (pa = _.Deferred(), "complete" === Z.readyState ? setTimeout(_.ready) : (Z.addEventListener("DOMContentLoaded", g, !1), 
        a.addEventListener("load", g, !1))), pa.promise(b);
    }, _.ready.promise();
    var qa = _.access = function(a, b, c, d, e, f, g) {
        var h = 0, i = a.length, j = null == c;
        if ("object" === _.type(c)) {
            e = !0;
            for (h in c) _.access(a, b, h, c[h], !0, f, g);
        } else if (void 0 !== d && (e = !0, _.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), 
        b = null) : (j = b, b = function(a, b, c) {
            return j.call(_(a), c);
        })), b)) for (;i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
        return e ? a : j ? b.call(a) : i ? b(a[0], c) : f;
    };
    _.acceptData = function(a) {
        return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType;
    }, h.uid = 1, h.accepts = _.acceptData, h.prototype = {
        key: function(a) {
            if (!h.accepts(a)) return 0;
            var b = {}, c = a[this.expando];
            if (!c) {
                c = h.uid++;
                try {
                    b[this.expando] = {
                        value: c
                    }, Object.defineProperties(a, b);
                } catch (d) {
                    b[this.expando] = c, _.extend(a, b);
                }
            }
            return this.cache[c] || (this.cache[c] = {}), c;
        },
        set: function(a, b, c) {
            var d, e = this.key(a), f = this.cache[e];
            if ("string" == typeof b) f[b] = c; else if (_.isEmptyObject(f)) _.extend(this.cache[e], b); else for (d in b) f[d] = b[d];
            return f;
        },
        get: function(a, b) {
            var c = this.cache[this.key(a)];
            return void 0 === b ? c : c[b];
        },
        access: function(a, b, c) {
            var d;
            return void 0 === b || b && "string" == typeof b && void 0 === c ? (d = this.get(a, b), 
            void 0 !== d ? d : this.get(a, _.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b);
        },
        remove: function(a, b) {
            var c, d, e, f = this.key(a), g = this.cache[f];
            if (void 0 === b) this.cache[f] = {}; else {
                _.isArray(b) ? d = b.concat(b.map(_.camelCase)) : (e = _.camelCase(b), b in g ? d = [ b, e ] : (d = e, 
                d = d in g ? [ d ] : d.match(na) || [])), c = d.length;
                for (;c--; ) delete g[d[c]];
            }
        },
        hasData: function(a) {
            return !_.isEmptyObject(this.cache[a[this.expando]] || {});
        },
        discard: function(a) {
            a[this.expando] && delete this.cache[a[this.expando]];
        }
    };
    var ra = new h(), sa = new h(), ta = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, ua = /([A-Z])/g;
    _.extend({
        hasData: function(a) {
            return sa.hasData(a) || ra.hasData(a);
        },
        data: function(a, b, c) {
            return sa.access(a, b, c);
        },
        removeData: function(a, b) {
            sa.remove(a, b);
        },
        _data: function(a, b, c) {
            return ra.access(a, b, c);
        },
        _removeData: function(a, b) {
            ra.remove(a, b);
        }
    }), _.fn.extend({
        data: function(a, b) {
            var c, d, e, f = this[0], g = f && f.attributes;
            if (void 0 === a) {
                if (this.length && (e = sa.get(f), 1 === f.nodeType && !ra.get(f, "hasDataAttrs"))) {
                    for (c = g.length; c--; ) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = _.camelCase(d.slice(5)), 
                    i(f, d, e[d])));
                    ra.set(f, "hasDataAttrs", !0);
                }
                return e;
            }
            return "object" == typeof a ? this.each(function() {
                sa.set(this, a);
            }) : qa(this, function(b) {
                var c, d = _.camelCase(a);
                if (f && void 0 === b) {
                    if (c = sa.get(f, a), void 0 !== c) return c;
                    if (c = sa.get(f, d), void 0 !== c) return c;
                    if (c = i(f, d, void 0), void 0 !== c) return c;
                } else this.each(function() {
                    var c = sa.get(this, d);
                    sa.set(this, d, b), -1 !== a.indexOf("-") && void 0 !== c && sa.set(this, a, b);
                });
            }, null, b, arguments.length > 1, null, !0);
        },
        removeData: function(a) {
            return this.each(function() {
                sa.remove(this, a);
            });
        }
    }), _.extend({
        queue: function(a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = ra.get(a, b), c && (!d || _.isArray(c) ? d = ra.access(a, b, _.makeArray(c)) : d.push(c)), 
            d || []) : void 0;
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = _.queue(a, b), d = c.length, e = c.shift(), f = _._queueHooks(a, b), g = function() {
                _.dequeue(a, b);
            };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), 
            delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire();
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return ra.get(a, c) || ra.access(a, c, {
                empty: _.Callbacks("once memory").add(function() {
                    ra.remove(a, [ b + "queue", c ]);
                })
            });
        }
    }), _.fn.extend({
        queue: function(a, b) {
            var c = 2;
            return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? _.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                var c = _.queue(this, a, b);
                _._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && _.dequeue(this, a);
            });
        },
        dequeue: function(a) {
            return this.each(function() {
                _.dequeue(this, a);
            });
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", []);
        },
        promise: function(a, b) {
            var c, d = 1, e = _.Deferred(), f = this, g = this.length, h = function() {
                --d || e.resolveWith(f, [ f ]);
            };
            for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--; ) c = ra.get(f[g], a + "queueHooks"), 
            c && c.empty && (d++, c.empty.add(h));
            return h(), e.promise(b);
        }
    });
    var va = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, wa = [ "Top", "Right", "Bottom", "Left" ], xa = function(a, b) {
        return a = b || a, "none" === _.css(a, "display") || !_.contains(a.ownerDocument, a);
    }, ya = /^(?:checkbox|radio)$/i;
    !function() {
        var a = Z.createDocumentFragment(), b = a.appendChild(Z.createElement("div")), c = Z.createElement("input");
        c.setAttribute("type", "radio"), c.setAttribute("checked", "checked"), c.setAttribute("name", "t"), 
        b.appendChild(c), Y.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        b.innerHTML = "<textarea>x</textarea>", Y.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue;
    }();
    var za = "undefined";
    Y.focusinBubbles = "onfocusin" in a;
    var Aa = /^key/, Ba = /^(?:mouse|pointer|contextmenu)|click/, Ca = /^(?:focusinfocus|focusoutblur)$/, Da = /^([^.]*)(?:\.(.+)|)$/;
    _.event = {
        global: {},
        add: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ra.get(a);
            if (q) for (c.handler && (f = c, c = f.handler, e = f.selector), c.guid || (c.guid = _.guid++), 
            (i = q.events) || (i = q.events = {}), (g = q.handle) || (g = q.handle = function(b) {
                return typeof _ !== za && _.event.triggered !== b.type ? _.event.dispatch.apply(a, arguments) : void 0;
            }), b = (b || "").match(na) || [ "" ], j = b.length; j--; ) h = Da.exec(b[j]) || [], 
            n = p = h[1], o = (h[2] || "").split(".").sort(), n && (l = _.event.special[n] || {}, 
            n = (e ? l.delegateType : l.bindType) || n, l = _.event.special[n] || {}, k = _.extend({
                type: n,
                origType: p,
                data: d,
                handler: c,
                guid: c.guid,
                selector: e,
                needsContext: e && _.expr.match.needsContext.test(e),
                namespace: o.join(".")
            }, f), (m = i[n]) || (m = i[n] = [], m.delegateCount = 0, l.setup && l.setup.call(a, d, o, g) !== !1 || a.addEventListener && a.addEventListener(n, g, !1)), 
            l.add && (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, k) : m.push(k), 
            _.event.global[n] = !0);
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ra.hasData(a) && ra.get(a);
            if (q && (i = q.events)) {
                for (b = (b || "").match(na) || [ "" ], j = b.length; j--; ) if (h = Da.exec(b[j]) || [], 
                n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                    for (l = _.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, m = i[n] || [], 
                    h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), g = f = m.length; f--; ) k = m[f], 
                    !e && p !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), 
                    k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                    g && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || _.removeEvent(a, n, q.handle), 
                    delete i[n]);
                } else for (n in i) _.event.remove(a, n + b[j], c, d, !0);
                _.isEmptyObject(i) && (delete q.handle, ra.remove(a, "events"));
            }
        },
        trigger: function(b, c, d, e) {
            var f, g, h, i, j, k, l, m = [ d || Z ], n = X.call(b, "type") ? b.type : b, o = X.call(b, "namespace") ? b.namespace.split(".") : [];
            if (g = h = d = d || Z, 3 !== d.nodeType && 8 !== d.nodeType && !Ca.test(n + _.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), 
            n = o.shift(), o.sort()), j = n.indexOf(":") < 0 && "on" + n, b = b[_.expando] ? b : new _.Event(n, "object" == typeof b && b), 
            b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            b.result = void 0, b.target || (b.target = d), c = null == c ? [ b ] : _.makeArray(c, [ b ]), 
            l = _.event.special[n] || {}, e || !l.trigger || l.trigger.apply(d, c) !== !1)) {
                if (!e && !l.noBubble && !_.isWindow(d)) {
                    for (i = l.delegateType || n, Ca.test(i + n) || (g = g.parentNode); g; g = g.parentNode) m.push(g), 
                    h = g;
                    h === (d.ownerDocument || Z) && m.push(h.defaultView || h.parentWindow || a);
                }
                for (f = 0; (g = m[f++]) && !b.isPropagationStopped(); ) b.type = f > 1 ? i : l.bindType || n, 
                k = (ra.get(g, "events") || {})[b.type] && ra.get(g, "handle"), k && k.apply(g, c), 
                k = j && g[j], k && k.apply && _.acceptData(g) && (b.result = k.apply(g, c), b.result === !1 && b.preventDefault());
                return b.type = n, e || b.isDefaultPrevented() || l._default && l._default.apply(m.pop(), c) !== !1 || !_.acceptData(d) || j && _.isFunction(d[n]) && !_.isWindow(d) && (h = d[j], 
                h && (d[j] = null), _.event.triggered = n, d[n](), _.event.triggered = void 0, h && (d[j] = h)), 
                b.result;
            }
        },
        dispatch: function(a) {
            a = _.event.fix(a);
            var b, c, d, e, f, g = [], h = R.call(arguments), i = (ra.get(this, "events") || {})[a.type] || [], j = _.event.special[a.type] || {};
            if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
                for (g = _.event.handlers.call(this, a, i), b = 0; (e = g[b++]) && !a.isPropagationStopped(); ) for (a.currentTarget = e.elem, 
                c = 0; (f = e.handlers[c++]) && !a.isImmediatePropagationStopped(); ) (!a.namespace_re || a.namespace_re.test(f.namespace)) && (a.handleObj = f, 
                a.data = f.data, d = ((_.event.special[f.origType] || {}).handle || f.handler).apply(e.elem, h), 
                void 0 !== d && (a.result = d) === !1 && (a.preventDefault(), a.stopPropagation()));
                return j.postDispatch && j.postDispatch.call(this, a), a.result;
            }
        },
        handlers: function(a, b) {
            var c, d, e, f, g = [], h = b.delegateCount, i = a.target;
            if (h && i.nodeType && (!a.button || "click" !== a.type)) for (;i !== this; i = i.parentNode || this) if (i.disabled !== !0 || "click" !== a.type) {
                for (d = [], c = 0; h > c; c++) f = b[c], e = f.selector + " ", void 0 === d[e] && (d[e] = f.needsContext ? _(e, this).index(i) >= 0 : _.find(e, this, null, [ i ]).length), 
                d[e] && d.push(f);
                d.length && g.push({
                    elem: i,
                    handlers: d
                });
            }
            return h < b.length && g.push({
                elem: this,
                handlers: b.slice(h)
            }), g;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), 
                a;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, b) {
                var c, d, e, f = b.button;
                return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || Z, 
                d = c.documentElement, e = c.body, a.pageX = b.clientX + (d && d.scrollLeft || e && e.scrollLeft || 0) - (d && d.clientLeft || e && e.clientLeft || 0), 
                a.pageY = b.clientY + (d && d.scrollTop || e && e.scrollTop || 0) - (d && d.clientTop || e && e.clientTop || 0)), 
                a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a;
            }
        },
        fix: function(a) {
            if (a[_.expando]) return a;
            var b, c, d, e = a.type, f = a, g = this.fixHooks[e];
            for (g || (this.fixHooks[e] = g = Ba.test(e) ? this.mouseHooks : Aa.test(e) ? this.keyHooks : {}), 
            d = g.props ? this.props.concat(g.props) : this.props, a = new _.Event(f), b = d.length; b--; ) c = d[b], 
            a[c] = f[c];
            return a.target || (a.target = Z), 3 === a.target.nodeType && (a.target = a.target.parentNode), 
            g.filter ? g.filter(a, f) : a;
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    return this !== l() && this.focus ? (this.focus(), !1) : void 0;
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === l() && this.blur ? (this.blur(), !1) : void 0;
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return "checkbox" === this.type && this.click && _.nodeName(this, "input") ? (this.click(), 
                    !1) : void 0;
                },
                _default: function(a) {
                    return _.nodeName(a.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result);
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = _.extend(new _.Event(), c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? _.event.trigger(e, null, b) : _.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault();
        }
    }, _.removeEvent = function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1);
    }, _.Event = function(a, b) {
        return this instanceof _.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, 
        this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? j : k) : this.type = a, 
        b && _.extend(this, b), this.timeStamp = a && a.timeStamp || _.now(), void (this[_.expando] = !0)) : new _.Event(a, b);
    }, _.Event.prototype = {
        isDefaultPrevented: k,
        isPropagationStopped: k,
        isImmediatePropagationStopped: k,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = j, a && a.preventDefault && a.preventDefault();
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = j, a && a.stopPropagation && a.stopPropagation();
        },
        stopImmediatePropagation: function() {
            var a = this.originalEvent;
            this.isImmediatePropagationStopped = j, a && a.stopImmediatePropagation && a.stopImmediatePropagation(), 
            this.stopPropagation();
        }
    }, _.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(a, b) {
        _.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this, e = a.relatedTarget, f = a.handleObj;
                return (!e || e !== d && !_.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), 
                a.type = b), c;
            }
        };
    }), Y.focusinBubbles || _.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var c = function(a) {
            _.event.simulate(b, a.target, _.event.fix(a), !0);
        };
        _.event.special[b] = {
            setup: function() {
                var d = this.ownerDocument || this, e = ra.access(d, b);
                e || d.addEventListener(a, c, !0), ra.access(d, b, (e || 0) + 1);
            },
            teardown: function() {
                var d = this.ownerDocument || this, e = ra.access(d, b) - 1;
                e ? ra.access(d, b, e) : (d.removeEventListener(a, c, !0), ra.remove(d, b));
            }
        };
    }), _.fn.extend({
        on: function(a, b, c, d, e) {
            var f, g;
            if ("object" == typeof a) {
                "string" != typeof b && (c = c || b, b = void 0);
                for (g in a) this.on(g, b, c, a[g], e);
                return this;
            }
            if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, 
            c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = k; else if (!d) return this;
            return 1 === e && (f = d, d = function(a) {
                return _().off(a), f.apply(this, arguments);
            }, d.guid = f.guid || (f.guid = _.guid++)), this.each(function() {
                _.event.add(this, a, d, c, b);
            });
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1);
        },
        off: function(a, b, c) {
            var d, e;
            if (a && a.preventDefault && a.handleObj) return d = a.handleObj, _(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), 
            this;
            if ("object" == typeof a) {
                for (e in a) this.off(e, b, a[e]);
                return this;
            }
            return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = k), 
            this.each(function() {
                _.event.remove(this, a, c, b);
            });
        },
        trigger: function(a, b) {
            return this.each(function() {
                _.event.trigger(a, b, this);
            });
        },
        triggerHandler: function(a, b) {
            var c = this[0];
            return c ? _.event.trigger(a, b, c, !0) : void 0;
        }
    });
    var Ea = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Fa = /<([\w:]+)/, Ga = /<|&#?\w+;/, Ha = /<(?:script|style|link)/i, Ia = /checked\s*(?:[^=]|=\s*.checked.)/i, Ja = /^$|\/(?:java|ecma)script/i, Ka = /^true\/(.*)/, La = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, Ma = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        thead: [ 1, "<table>", "</table>" ],
        col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: [ 0, "", "" ]
    };
    Ma.optgroup = Ma.option, Ma.tbody = Ma.tfoot = Ma.colgroup = Ma.caption = Ma.thead, 
    Ma.th = Ma.td, _.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h = a.cloneNode(!0), i = _.contains(a.ownerDocument, a);
            if (!(Y.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || _.isXMLDoc(a))) for (g = r(h), 
            f = r(a), d = 0, e = f.length; e > d; d++) s(f[d], g[d]);
            if (b) if (c) for (f = f || r(a), g = g || r(h), d = 0, e = f.length; e > d; d++) q(f[d], g[d]); else q(a, h);
            return g = r(h, "script"), g.length > 0 && p(g, !i && r(a, "script")), h;
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k = b.createDocumentFragment(), l = [], m = 0, n = a.length; n > m; m++) if (e = a[m], 
            e || 0 === e) if ("object" === _.type(e)) _.merge(l, e.nodeType ? [ e ] : e); else if (Ga.test(e)) {
                for (f = f || k.appendChild(b.createElement("div")), g = (Fa.exec(e) || [ "", "" ])[1].toLowerCase(), 
                h = Ma[g] || Ma._default, f.innerHTML = h[1] + e.replace(Ea, "<$1></$2>") + h[2], 
                j = h[0]; j--; ) f = f.lastChild;
                _.merge(l, f.childNodes), f = k.firstChild, f.textContent = "";
            } else l.push(b.createTextNode(e));
            for (k.textContent = "", m = 0; e = l[m++]; ) if ((!d || -1 === _.inArray(e, d)) && (i = _.contains(e.ownerDocument, e), 
            f = r(k.appendChild(e), "script"), i && p(f), c)) for (j = 0; e = f[j++]; ) Ja.test(e.type || "") && c.push(e);
            return k;
        },
        cleanData: function(a) {
            for (var b, c, d, e, f = _.event.special, g = 0; void 0 !== (c = a[g]); g++) {
                if (_.acceptData(c) && (e = c[ra.expando], e && (b = ra.cache[e]))) {
                    if (b.events) for (d in b.events) f[d] ? _.event.remove(c, d) : _.removeEvent(c, d, b.handle);
                    ra.cache[e] && delete ra.cache[e];
                }
                delete sa.cache[c[sa.expando]];
            }
        }
    }), _.fn.extend({
        text: function(a) {
            return qa(this, function(a) {
                return void 0 === a ? _.text(this) : this.empty().each(function() {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = a);
                });
            }, null, a, arguments.length);
        },
        append: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = m(this, a);
                    b.appendChild(a);
                }
            });
        },
        prepend: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = m(this, a);
                    b.insertBefore(a, b.firstChild);
                }
            });
        },
        before: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this);
            });
        },
        after: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling);
            });
        },
        remove: function(a, b) {
            for (var c, d = a ? _.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || _.cleanData(r(c)), 
            c.parentNode && (b && _.contains(c.ownerDocument, c) && p(r(c, "script")), c.parentNode.removeChild(c));
            return this;
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (_.cleanData(r(a, !1)), 
            a.textContent = "");
            return this;
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                return _.clone(this, a, b);
            });
        },
        html: function(a) {
            return qa(this, function(a) {
                var b = this[0] || {}, c = 0, d = this.length;
                if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
                if ("string" == typeof a && !Ha.test(a) && !Ma[(Fa.exec(a) || [ "", "" ])[1].toLowerCase()]) {
                    a = a.replace(Ea, "<$1></$2>");
                    try {
                        for (;d > c; c++) b = this[c] || {}, 1 === b.nodeType && (_.cleanData(r(b, !1)), 
                        b.innerHTML = a);
                        b = 0;
                    } catch (e) {}
                }
                b && this.empty().append(a);
            }, null, a, arguments.length);
        },
        replaceWith: function() {
            var a = arguments[0];
            return this.domManip(arguments, function(b) {
                a = this.parentNode, _.cleanData(r(this)), a && a.replaceChild(b, this);
            }), a && (a.length || a.nodeType) ? this : this.remove();
        },
        detach: function(a) {
            return this.remove(a, !0);
        },
        domManip: function(a, b) {
            a = S.apply([], a);
            var c, d, e, f, g, h, i = 0, j = this.length, k = this, l = j - 1, m = a[0], p = _.isFunction(m);
            if (p || j > 1 && "string" == typeof m && !Y.checkClone && Ia.test(m)) return this.each(function(c) {
                var d = k.eq(c);
                p && (a[0] = m.call(this, c, d.html())), d.domManip(a, b);
            });
            if (j && (c = _.buildFragment(a, this[0].ownerDocument, !1, this), d = c.firstChild, 
            1 === c.childNodes.length && (c = d), d)) {
                for (e = _.map(r(c, "script"), n), f = e.length; j > i; i++) g = c, i !== l && (g = _.clone(g, !0, !0), 
                f && _.merge(e, r(g, "script"))), b.call(this[i], g, i);
                if (f) for (h = e[e.length - 1].ownerDocument, _.map(e, o), i = 0; f > i; i++) g = e[i], 
                Ja.test(g.type || "") && !ra.access(g, "globalEval") && _.contains(h, g) && (g.src ? _._evalUrl && _._evalUrl(g.src) : _.globalEval(g.textContent.replace(La, "")));
            }
            return this;
        }
    }), _.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        _.fn[a] = function(a) {
            for (var c, d = [], e = _(a), f = e.length - 1, g = 0; f >= g; g++) c = g === f ? this : this.clone(!0), 
            _(e[g])[b](c), T.apply(d, c.get());
            return this.pushStack(d);
        };
    });
    var Na, Oa = {}, Pa = /^margin/, Qa = new RegExp("^(" + va + ")(?!px)[a-z%]+$", "i"), Ra = function(b) {
        return b.ownerDocument.defaultView.opener ? b.ownerDocument.defaultView.getComputedStyle(b, null) : a.getComputedStyle(b, null);
    };
    !function() {
        function b() {
            g.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", 
            g.innerHTML = "", e.appendChild(f);
            var b = a.getComputedStyle(g, null);
            c = "1%" !== b.top, d = "4px" === b.width, e.removeChild(f);
        }
        var c, d, e = Z.documentElement, f = Z.createElement("div"), g = Z.createElement("div");
        g.style && (g.style.backgroundClip = "content-box", g.cloneNode(!0).style.backgroundClip = "", 
        Y.clearCloneStyle = "content-box" === g.style.backgroundClip, f.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", 
        f.appendChild(g), a.getComputedStyle && _.extend(Y, {
            pixelPosition: function() {
                return b(), c;
            },
            boxSizingReliable: function() {
                return null == d && b(), d;
            },
            reliableMarginRight: function() {
                var b, c = g.appendChild(Z.createElement("div"));
                return c.style.cssText = g.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", 
                c.style.marginRight = c.style.width = "0", g.style.width = "1px", e.appendChild(f), 
                b = !parseFloat(a.getComputedStyle(c, null).marginRight), e.removeChild(f), g.removeChild(c), 
                b;
            }
        }));
    }(), _.swap = function(a, b, c, d) {
        var e, f, g = {};
        for (f in b) g[f] = a.style[f], a.style[f] = b[f];
        e = c.apply(a, d || []);
        for (f in b) a.style[f] = g[f];
        return e;
    };
    var Sa = /^(none|table(?!-c[ea]).+)/, Ta = new RegExp("^(" + va + ")(.*)$", "i"), Ua = new RegExp("^([+-])=(" + va + ")", "i"), Va = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, Wa = {
        letterSpacing: "0",
        fontWeight: "400"
    }, Xa = [ "Webkit", "O", "Moz", "ms" ];
    _.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = v(a, "opacity");
                        return "" === c ? "1" : c;
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function(a, b, c, d) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var e, f, g, h = _.camelCase(b), i = a.style;
                return b = _.cssProps[h] || (_.cssProps[h] = x(i, h)), g = _.cssHooks[b] || _.cssHooks[h], 
                void 0 === c ? g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b] : (f = typeof c, 
                "string" === f && (e = Ua.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(_.css(a, b)), 
                f = "number"), void (null != c && c === c && ("number" !== f || _.cssNumber[h] || (c += "px"), 
                Y.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), 
                g && "set" in g && void 0 === (c = g.set(a, c, d)) || (i[b] = c))));
            }
        },
        css: function(a, b, c, d) {
            var e, f, g, h = _.camelCase(b);
            return b = _.cssProps[h] || (_.cssProps[h] = x(a.style, h)), g = _.cssHooks[b] || _.cssHooks[h], 
            g && "get" in g && (e = g.get(a, !0, c)), void 0 === e && (e = v(a, b, d)), "normal" === e && b in Wa && (e = Wa[b]), 
            "" === c || c ? (f = parseFloat(e), c === !0 || _.isNumeric(f) ? f || 0 : e) : e;
        }
    }), _.each([ "height", "width" ], function(a, b) {
        _.cssHooks[b] = {
            get: function(a, c, d) {
                return c ? Sa.test(_.css(a, "display")) && 0 === a.offsetWidth ? _.swap(a, Va, function() {
                    return A(a, b, d);
                }) : A(a, b, d) : void 0;
            },
            set: function(a, c, d) {
                var e = d && Ra(a);
                return y(a, c, d ? z(a, b, d, "border-box" === _.css(a, "boxSizing", !1, e), e) : 0);
            }
        };
    }), _.cssHooks.marginRight = w(Y.reliableMarginRight, function(a, b) {
        return b ? _.swap(a, {
            display: "inline-block"
        }, v, [ a, "marginRight" ]) : void 0;
    }), _.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        _.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [ c ]; 4 > d; d++) e[a + wa[d] + b] = f[d] || f[d - 2] || f[0];
                return e;
            }
        }, Pa.test(a) || (_.cssHooks[a + b].set = y);
    }), _.fn.extend({
        css: function(a, b) {
            return qa(this, function(a, b, c) {
                var d, e, f = {}, g = 0;
                if (_.isArray(b)) {
                    for (d = Ra(a), e = b.length; e > g; g++) f[b[g]] = _.css(a, b[g], !1, d);
                    return f;
                }
                return void 0 !== c ? _.style(a, b, c) : _.css(a, b);
            }, a, b, arguments.length > 1);
        },
        show: function() {
            return B(this, !0);
        },
        hide: function() {
            return B(this);
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                xa(this) ? _(this).show() : _(this).hide();
            });
        }
    }), _.Tween = C, C.prototype = {
        constructor: C,
        init: function(a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), 
            this.end = d, this.unit = f || (_.cssNumber[c] ? "" : "px");
        },
        cur: function() {
            var a = C.propHooks[this.prop];
            return a && a.get ? a.get(this) : C.propHooks._default.get(this);
        },
        run: function(a) {
            var b, c = C.propHooks[this.prop];
            return this.options.duration ? this.pos = b = _.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = b = a, 
            this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            c && c.set ? c.set(this) : C.propHooks._default.set(this), this;
        }
    }, C.prototype.init.prototype = C.prototype, C.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = _.css(a.elem, a.prop, ""), 
                b && "auto" !== b ? b : 0) : a.elem[a.prop];
            },
            set: function(a) {
                _.fx.step[a.prop] ? _.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[_.cssProps[a.prop]] || _.cssHooks[a.prop]) ? _.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now;
            }
        }
    }, C.propHooks.scrollTop = C.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now);
        }
    }, _.easing = {
        linear: function(a) {
            return a;
        },
        swing: function(a) {
            return .5 - Math.cos(a * Math.PI) / 2;
        }
    }, _.fx = C.prototype.init, _.fx.step = {};
    var Ya, Za, $a = /^(?:toggle|show|hide)$/, _a = new RegExp("^(?:([+-])=|)(" + va + ")([a-z%]*)$", "i"), ab = /queueHooks$/, bb = [ G ], cb = {
        "*": [ function(a, b) {
            var c = this.createTween(a, b), d = c.cur(), e = _a.exec(b), f = e && e[3] || (_.cssNumber[a] ? "" : "px"), g = (_.cssNumber[a] || "px" !== f && +d) && _a.exec(_.css(c.elem, a)), h = 1, i = 20;
            if (g && g[3] !== f) {
                f = f || g[3], e = e || [], g = +d || 1;
                do h = h || ".5", g /= h, _.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i);
            }
            return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), 
            c;
        } ]
    };
    _.Animation = _.extend(I, {
        tweener: function(a, b) {
            _.isFunction(a) ? (b = a, a = [ "*" ]) : a = a.split(" ");
            for (var c, d = 0, e = a.length; e > d; d++) c = a[d], cb[c] = cb[c] || [], cb[c].unshift(b);
        },
        prefilter: function(a, b) {
            b ? bb.unshift(a) : bb.push(a);
        }
    }), _.speed = function(a, b, c) {
        var d = a && "object" == typeof a ? _.extend({}, a) : {
            complete: c || !c && b || _.isFunction(a) && a,
            duration: a,
            easing: c && b || b && !_.isFunction(b) && b
        };
        return d.duration = _.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in _.fx.speeds ? _.fx.speeds[d.duration] : _.fx.speeds._default, 
        (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
            _.isFunction(d.old) && d.old.call(this), d.queue && _.dequeue(this, d.queue);
        }, d;
    }, _.fn.extend({
        fadeTo: function(a, b, c, d) {
            return this.filter(xa).css("opacity", 0).show().end().animate({
                opacity: b
            }, a, c, d);
        },
        animate: function(a, b, c, d) {
            var e = _.isEmptyObject(a), f = _.speed(b, c, d), g = function() {
                var b = I(this, _.extend({}, a), f);
                (e || ra.get(this, "finish")) && b.stop(!0);
            };
            return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g);
        },
        stop: function(a, b, c) {
            var d = function(a) {
                var b = a.stop;
                delete a.stop, b(c);
            };
            return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), 
            this.each(function() {
                var b = !0, e = null != a && a + "queueHooks", f = _.timers, g = ra.get(this);
                if (e) g[e] && g[e].stop && d(g[e]); else for (e in g) g[e] && g[e].stop && ab.test(e) && d(g[e]);
                for (e = f.length; e--; ) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), 
                b = !1, f.splice(e, 1));
                (b || !c) && _.dequeue(this, a);
            });
        },
        finish: function(a) {
            return a !== !1 && (a = a || "fx"), this.each(function() {
                var b, c = ra.get(this), d = c[a + "queue"], e = c[a + "queueHooks"], f = _.timers, g = d ? d.length : 0;
                for (c.finish = !0, _.queue(this, a, []), e && e.stop && e.stop.call(this, !0), 
                b = f.length; b--; ) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), 
                f.splice(b, 1));
                for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                delete c.finish;
            });
        }
    }), _.each([ "toggle", "show", "hide" ], function(a, b) {
        var c = _.fn[b];
        _.fn[b] = function(a, d, e) {
            return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(E(b, !0), a, d, e);
        };
    }), _.each({
        slideDown: E("show"),
        slideUp: E("hide"),
        slideToggle: E("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(a, b) {
        _.fn[a] = function(a, c, d) {
            return this.animate(b, a, c, d);
        };
    }), _.timers = [], _.fx.tick = function() {
        var a, b = 0, c = _.timers;
        for (Ya = _.now(); b < c.length; b++) a = c[b], a() || c[b] !== a || c.splice(b--, 1);
        c.length || _.fx.stop(), Ya = void 0;
    }, _.fx.timer = function(a) {
        _.timers.push(a), a() ? _.fx.start() : _.timers.pop();
    }, _.fx.interval = 13, _.fx.start = function() {
        Za || (Za = setInterval(_.fx.tick, _.fx.interval));
    }, _.fx.stop = function() {
        clearInterval(Za), Za = null;
    }, _.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, _.fn.delay = function(a, b) {
        return a = _.fx ? _.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
            var d = setTimeout(b, a);
            c.stop = function() {
                clearTimeout(d);
            };
        });
    }, function() {
        var a = Z.createElement("input"), b = Z.createElement("select"), c = b.appendChild(Z.createElement("option"));
        a.type = "checkbox", Y.checkOn = "" !== a.value, Y.optSelected = c.selected, b.disabled = !0, 
        Y.optDisabled = !c.disabled, a = Z.createElement("input"), a.value = "t", a.type = "radio", 
        Y.radioValue = "t" === a.value;
    }();
    var db, eb, fb = _.expr.attrHandle;
    _.fn.extend({
        attr: function(a, b) {
            return qa(this, _.attr, a, b, arguments.length > 1);
        },
        removeAttr: function(a) {
            return this.each(function() {
                _.removeAttr(this, a);
            });
        }
    }), _.extend({
        attr: function(a, b, c) {
            var d, e, f = a.nodeType;
            return a && 3 !== f && 8 !== f && 2 !== f ? typeof a.getAttribute === za ? _.prop(a, b, c) : (1 === f && _.isXMLDoc(a) || (b = b.toLowerCase(), 
            d = _.attrHooks[b] || (_.expr.match.bool.test(b) ? eb : db)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = _.find.attr(a, b), 
            null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), 
            c) : void _.removeAttr(a, b)) : void 0;
        },
        removeAttr: function(a, b) {
            var c, d, e = 0, f = b && b.match(na);
            if (f && 1 === a.nodeType) for (;c = f[e++]; ) d = _.propFix[c] || c, _.expr.match.bool.test(c) && (a[d] = !1), 
            a.removeAttribute(c);
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!Y.radioValue && "radio" === b && _.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b;
                    }
                }
            }
        }
    }), eb = {
        set: function(a, b, c) {
            return b === !1 ? _.removeAttr(a, c) : a.setAttribute(c, c), c;
        }
    }, _.each(_.expr.match.bool.source.match(/\w+/g), function(a, b) {
        var c = fb[b] || _.find.attr;
        fb[b] = function(a, b, d) {
            var e, f;
            return d || (f = fb[b], fb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, 
            fb[b] = f), e;
        };
    });
    var gb = /^(?:input|select|textarea|button)$/i;
    _.fn.extend({
        prop: function(a, b) {
            return qa(this, _.prop, a, b, arguments.length > 1);
        },
        removeProp: function(a) {
            return this.each(function() {
                delete this[_.propFix[a] || a];
            });
        }
    }), _.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, b, c) {
            var d, e, f, g = a.nodeType;
            return a && 3 !== g && 8 !== g && 2 !== g ? (f = 1 !== g || !_.isXMLDoc(a), f && (b = _.propFix[b] || b, 
            e = _.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]) : void 0;
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    return a.hasAttribute("tabindex") || gb.test(a.nodeName) || a.href ? a.tabIndex : -1;
                }
            }
        }
    }), Y.optSelected || (_.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && b.parentNode && b.parentNode.selectedIndex, null;
        }
    }), _.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        _.propFix[this.toLowerCase()] = this;
    });
    var hb = /[\t\r\n\f]/g;
    _.fn.extend({
        addClass: function(a) {
            var b, c, d, e, f, g, h = "string" == typeof a && a, i = 0, j = this.length;
            if (_.isFunction(a)) return this.each(function(b) {
                _(this).addClass(a.call(this, b, this.className));
            });
            if (h) for (b = (a || "").match(na) || []; j > i; i++) if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : " ")) {
                for (f = 0; e = b[f++]; ) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                g = _.trim(d), c.className !== g && (c.className = g);
            }
            return this;
        },
        removeClass: function(a) {
            var b, c, d, e, f, g, h = 0 === arguments.length || "string" == typeof a && a, i = 0, j = this.length;
            if (_.isFunction(a)) return this.each(function(b) {
                _(this).removeClass(a.call(this, b, this.className));
            });
            if (h) for (b = (a || "").match(na) || []; j > i; i++) if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : "")) {
                for (f = 0; e = b[f++]; ) for (;d.indexOf(" " + e + " ") >= 0; ) d = d.replace(" " + e + " ", " ");
                g = a ? _.trim(d) : "", c.className !== g && (c.className = g);
            }
            return this;
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(_.isFunction(a) ? function(c) {
                _(this).toggleClass(a.call(this, c, this.className, b), b);
            } : function() {
                if ("string" === c) for (var b, d = 0, e = _(this), f = a.match(na) || []; b = f[d++]; ) e.hasClass(b) ? e.removeClass(b) : e.addClass(b); else (c === za || "boolean" === c) && (this.className && ra.set(this, "__className__", this.className), 
                this.className = this.className || a === !1 ? "" : ra.get(this, "__className__") || "");
            });
        },
        hasClass: function(a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++) if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(hb, " ").indexOf(b) >= 0) return !0;
            return !1;
        }
    });
    var ib = /\r/g;
    _.fn.extend({
        val: function(a) {
            var b, c, d, e = this[0];
            return arguments.length ? (d = _.isFunction(a), this.each(function(c) {
                var e;
                1 === this.nodeType && (e = d ? a.call(this, c, _(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : _.isArray(e) && (e = _.map(e, function(a) {
                    return null == a ? "" : a + "";
                })), b = _.valHooks[this.type] || _.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e));
            })) : e ? (b = _.valHooks[e.type] || _.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, 
            "string" == typeof c ? c.replace(ib, "") : null == c ? "" : c)) : void 0;
        }
    }), _.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = _.find.attr(a, "value");
                    return null != b ? b : _.trim(_.text(a));
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++) if (c = d[i], 
                    !(!c.selected && i !== e || (Y.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && _.nodeName(c.parentNode, "optgroup"))) {
                        if (b = _(c).val(), f) return b;
                        g.push(b);
                    }
                    return g;
                },
                set: function(a, b) {
                    for (var c, d, e = a.options, f = _.makeArray(b), g = e.length; g--; ) d = e[g], 
                    (d.selected = _.inArray(d.value, f) >= 0) && (c = !0);
                    return c || (a.selectedIndex = -1), f;
                }
            }
        }
    }), _.each([ "radio", "checkbox" ], function() {
        _.valHooks[this] = {
            set: function(a, b) {
                return _.isArray(b) ? a.checked = _.inArray(_(a).val(), b) >= 0 : void 0;
            }
        }, Y.checkOn || (_.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on" : a.value;
        });
    }), _.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        _.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b);
        };
    }), _.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a);
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c);
        },
        unbind: function(a, b) {
            return this.off(a, null, b);
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d);
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c);
        }
    });
    var jb = _.now(), kb = /\?/;
    _.parseJSON = function(a) {
        return JSON.parse(a + "");
    }, _.parseXML = function(a) {
        var b, c;
        if (!a || "string" != typeof a) return null;
        try {
            c = new DOMParser(), b = c.parseFromString(a, "text/xml");
        } catch (d) {
            b = void 0;
        }
        return (!b || b.getElementsByTagName("parsererror").length) && _.error("Invalid XML: " + a), 
        b;
    };
    var lb = /#.*$/, mb = /([?&])_=[^&]*/, nb = /^(.*?):[ \t]*([^\r\n]*)$/gm, ob = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, pb = /^(?:GET|HEAD)$/, qb = /^\/\//, rb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, sb = {}, tb = {}, ub = "*/".concat("*"), vb = a.location.href, wb = rb.exec(vb.toLowerCase()) || [];
    _.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: vb,
            type: "GET",
            isLocal: ob.test(wb[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": ub,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": _.parseJSON,
                "text xml": _.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? L(L(a, _.ajaxSettings), b) : L(_.ajaxSettings, a);
        },
        ajaxPrefilter: J(sb),
        ajaxTransport: J(tb),
        ajax: function(a, b) {
            function c(a, b, c, g) {
                var i, k, r, s, u, w = b;
                2 !== t && (t = 2, h && clearTimeout(h), d = void 0, f = g || "", v.readyState = a > 0 ? 4 : 0, 
                i = a >= 200 && 300 > a || 304 === a, c && (s = M(l, v, c)), s = N(l, s, v, i), 
                i ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (_.lastModified[e] = u), 
                u = v.getResponseHeader("etag"), u && (_.etag[e] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent" : 304 === a ? w = "notmodified" : (w = s.state, 
                k = s.data, r = s.error, i = !r)) : (r = w, (a || !w) && (w = "error", 0 > a && (a = 0))), 
                v.status = a, v.statusText = (b || w) + "", i ? o.resolveWith(m, [ k, w, v ]) : o.rejectWith(m, [ v, w, r ]), 
                v.statusCode(q), q = void 0, j && n.trigger(i ? "ajaxSuccess" : "ajaxError", [ v, l, i ? k : r ]), 
                p.fireWith(m, [ v, w ]), j && (n.trigger("ajaxComplete", [ v, l ]), --_.active || _.event.trigger("ajaxStop")));
            }
            "object" == typeof a && (b = a, a = void 0), b = b || {};
            var d, e, f, g, h, i, j, k, l = _.ajaxSetup({}, b), m = l.context || l, n = l.context && (m.nodeType || m.jquery) ? _(m) : _.event, o = _.Deferred(), p = _.Callbacks("once memory"), q = l.statusCode || {}, r = {}, s = {}, t = 0, u = "canceled", v = {
                readyState: 0,
                getResponseHeader: function(a) {
                    var b;
                    if (2 === t) {
                        if (!g) for (g = {}; b = nb.exec(f); ) g[b[1].toLowerCase()] = b[2];
                        b = g[a.toLowerCase()];
                    }
                    return null == b ? null : b;
                },
                getAllResponseHeaders: function() {
                    return 2 === t ? f : null;
                },
                setRequestHeader: function(a, b) {
                    var c = a.toLowerCase();
                    return t || (a = s[c] = s[c] || a, r[a] = b), this;
                },
                overrideMimeType: function(a) {
                    return t || (l.mimeType = a), this;
                },
                statusCode: function(a) {
                    var b;
                    if (a) if (2 > t) for (b in a) q[b] = [ q[b], a[b] ]; else v.always(a[v.status]);
                    return this;
                },
                abort: function(a) {
                    var b = a || u;
                    return d && d.abort(b), c(0, b), this;
                }
            };
            if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || vb) + "").replace(lb, "").replace(qb, wb[1] + "//"), 
            l.type = b.method || b.type || l.method || l.type, l.dataTypes = _.trim(l.dataType || "*").toLowerCase().match(na) || [ "" ], 
            null == l.crossDomain && (i = rb.exec(l.url.toLowerCase()), l.crossDomain = !(!i || i[1] === wb[1] && i[2] === wb[2] && (i[3] || ("http:" === i[1] ? "80" : "443")) === (wb[3] || ("http:" === wb[1] ? "80" : "443")))), 
            l.data && l.processData && "string" != typeof l.data && (l.data = _.param(l.data, l.traditional)), 
            K(sb, l, b, v), 2 === t) return v;
            j = _.event && l.global, j && 0 === _.active++ && _.event.trigger("ajaxStart"), 
            l.type = l.type.toUpperCase(), l.hasContent = !pb.test(l.type), e = l.url, l.hasContent || (l.data && (e = l.url += (kb.test(e) ? "&" : "?") + l.data, 
            delete l.data), l.cache === !1 && (l.url = mb.test(e) ? e.replace(mb, "$1_=" + jb++) : e + (kb.test(e) ? "&" : "?") + "_=" + jb++)), 
            l.ifModified && (_.lastModified[e] && v.setRequestHeader("If-Modified-Since", _.lastModified[e]), 
            _.etag[e] && v.setRequestHeader("If-None-Match", _.etag[e])), (l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType), 
            v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + ub + "; q=0.01" : "") : l.accepts["*"]);
            for (k in l.headers) v.setRequestHeader(k, l.headers[k]);
            if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t)) return v.abort();
            u = "abort";
            for (k in {
                success: 1,
                error: 1,
                complete: 1
            }) v[k](l[k]);
            if (d = K(tb, l, b, v)) {
                v.readyState = 1, j && n.trigger("ajaxSend", [ v, l ]), l.async && l.timeout > 0 && (h = setTimeout(function() {
                    v.abort("timeout");
                }, l.timeout));
                try {
                    t = 1, d.send(r, c);
                } catch (w) {
                    if (!(2 > t)) throw w;
                    c(-1, w);
                }
            } else c(-1, "No Transport");
            return v;
        },
        getJSON: function(a, b, c) {
            return _.get(a, b, c, "json");
        },
        getScript: function(a, b) {
            return _.get(a, void 0, b, "script");
        }
    }), _.each([ "get", "post" ], function(a, b) {
        _[b] = function(a, c, d, e) {
            return _.isFunction(c) && (e = e || d, d = c, c = void 0), _.ajax({
                url: a,
                type: b,
                dataType: e,
                data: c,
                success: d
            });
        };
    }), _._evalUrl = function(a) {
        return _.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        });
    }, _.fn.extend({
        wrapAll: function(a) {
            var b;
            return _.isFunction(a) ? this.each(function(b) {
                _(this).wrapAll(a.call(this, b));
            }) : (this[0] && (b = _(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), 
            b.map(function() {
                for (var a = this; a.firstElementChild; ) a = a.firstElementChild;
                return a;
            }).append(this)), this);
        },
        wrapInner: function(a) {
            return this.each(_.isFunction(a) ? function(b) {
                _(this).wrapInner(a.call(this, b));
            } : function() {
                var b = _(this), c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a);
            });
        },
        wrap: function(a) {
            var b = _.isFunction(a);
            return this.each(function(c) {
                _(this).wrapAll(b ? a.call(this, c) : a);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                _.nodeName(this, "body") || _(this).replaceWith(this.childNodes);
            }).end();
        }
    }), _.expr.filters.hidden = function(a) {
        return a.offsetWidth <= 0 && a.offsetHeight <= 0;
    }, _.expr.filters.visible = function(a) {
        return !_.expr.filters.hidden(a);
    };
    var xb = /%20/g, yb = /\[\]$/, zb = /\r?\n/g, Ab = /^(?:submit|button|image|reset|file)$/i, Bb = /^(?:input|select|textarea|keygen)/i;
    _.param = function(a, b) {
        var c, d = [], e = function(a, b) {
            b = _.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b);
        };
        if (void 0 === b && (b = _.ajaxSettings && _.ajaxSettings.traditional), _.isArray(a) || a.jquery && !_.isPlainObject(a)) _.each(a, function() {
            e(this.name, this.value);
        }); else for (c in a) O(c, a[c], b, e);
        return d.join("&").replace(xb, "+");
    }, _.fn.extend({
        serialize: function() {
            return _.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var a = _.prop(this, "elements");
                return a ? _.makeArray(a) : this;
            }).filter(function() {
                var a = this.type;
                return this.name && !_(this).is(":disabled") && Bb.test(this.nodeName) && !Ab.test(a) && (this.checked || !ya.test(a));
            }).map(function(a, b) {
                var c = _(this).val();
                return null == c ? null : _.isArray(c) ? _.map(c, function(a) {
                    return {
                        name: b.name,
                        value: a.replace(zb, "\r\n")
                    };
                }) : {
                    name: b.name,
                    value: c.replace(zb, "\r\n")
                };
            }).get();
        }
    }), _.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest();
        } catch (a) {}
    };
    var Cb = 0, Db = {}, Eb = {
        0: 200,
        1223: 204
    }, Fb = _.ajaxSettings.xhr();
    a.attachEvent && a.attachEvent("onunload", function() {
        for (var a in Db) Db[a]();
    }), Y.cors = !!Fb && "withCredentials" in Fb, Y.ajax = Fb = !!Fb, _.ajaxTransport(function(a) {
        var b;
        return Y.cors || Fb && !a.crossDomain ? {
            send: function(c, d) {
                var e, f = a.xhr(), g = ++Cb;
                if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields) for (e in a.xhrFields) f[e] = a.xhrFields[e];
                a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                for (e in c) f.setRequestHeader(e, c[e]);
                b = function(a) {
                    return function() {
                        b && (delete Db[g], b = f.onload = f.onerror = null, "abort" === a ? f.abort() : "error" === a ? d(f.status, f.statusText) : d(Eb[f.status] || f.status, f.statusText, "string" == typeof f.responseText ? {
                            text: f.responseText
                        } : void 0, f.getAllResponseHeaders()));
                    };
                }, f.onload = b(), f.onerror = b("error"), b = Db[g] = b("abort");
                try {
                    f.send(a.hasContent && a.data || null);
                } catch (h) {
                    if (b) throw h;
                }
            },
            abort: function() {
                b && b();
            }
        } : void 0;
    }), _.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return _.globalEval(a), a;
            }
        }
    }), _.ajaxPrefilter("script", function(a) {
        void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET");
    }), _.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var b, c;
            return {
                send: function(d, e) {
                    b = _("<script>").prop({
                        async: !0,
                        charset: a.scriptCharset,
                        src: a.url
                    }).on("load error", c = function(a) {
                        b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type);
                    }), Z.head.appendChild(b[0]);
                },
                abort: function() {
                    c && c();
                }
            };
        }
    });
    var Gb = [], Hb = /(=)\?(?=&|$)|\?\?/;
    _.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = Gb.pop() || _.expando + "_" + jb++;
            return this[a] = !0, a;
        }
    }), _.ajaxPrefilter("json jsonp", function(b, c, d) {
        var e, f, g, h = b.jsonp !== !1 && (Hb.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && Hb.test(b.data) && "data");
        return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = _.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, 
        h ? b[h] = b[h].replace(Hb, "$1" + e) : b.jsonp !== !1 && (b.url += (kb.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), 
        b.converters["script json"] = function() {
            return g || _.error(e + " was not called"), g[0];
        }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
            g = arguments;
        }, d.always(function() {
            a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, Gb.push(e)), g && _.isFunction(f) && f(g[0]), 
            g = f = void 0;
        }), "script") : void 0;
    }), _.parseHTML = function(a, b, c) {
        if (!a || "string" != typeof a) return null;
        "boolean" == typeof b && (c = b, b = !1), b = b || Z;
        var d = ga.exec(a), e = !c && [];
        return d ? [ b.createElement(d[1]) ] : (d = _.buildFragment([ a ], b, e), e && e.length && _(e).remove(), 
        _.merge([], d.childNodes));
    };
    var Ib = _.fn.load;
    _.fn.load = function(a, b, c) {
        if ("string" != typeof a && Ib) return Ib.apply(this, arguments);
        var d, e, f, g = this, h = a.indexOf(" ");
        return h >= 0 && (d = _.trim(a.slice(h)), a = a.slice(0, h)), _.isFunction(b) ? (c = b, 
        b = void 0) : b && "object" == typeof b && (e = "POST"), g.length > 0 && _.ajax({
            url: a,
            type: e,
            dataType: "html",
            data: b
        }).done(function(a) {
            f = arguments, g.html(d ? _("<div>").append(_.parseHTML(a)).find(d) : a);
        }).complete(c && function(a, b) {
            g.each(c, f || [ a.responseText, b, a ]);
        }), this;
    }, _.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(a, b) {
        _.fn[b] = function(a) {
            return this.on(b, a);
        };
    }), _.expr.filters.animated = function(a) {
        return _.grep(_.timers, function(b) {
            return a === b.elem;
        }).length;
    };
    var Jb = a.document.documentElement;
    _.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = _.css(a, "position"), l = _(a), m = {};
            "static" === k && (a.style.position = "relative"), h = l.offset(), f = _.css(a, "top"), 
            i = _.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, 
            j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), 
            _.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), 
            null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m);
        }
    }, _.fn.extend({
        offset: function(a) {
            if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                _.offset.setOffset(this, a, b);
            });
            var b, c, d = this[0], e = {
                top: 0,
                left: 0
            }, f = d && d.ownerDocument;
            return f ? (b = f.documentElement, _.contains(b, d) ? (typeof d.getBoundingClientRect !== za && (e = d.getBoundingClientRect()), 
            c = P(f), {
                top: e.top + c.pageYOffset - b.clientTop,
                left: e.left + c.pageXOffset - b.clientLeft
            }) : e) : void 0;
        },
        position: function() {
            if (this[0]) {
                var a, b, c = this[0], d = {
                    top: 0,
                    left: 0
                };
                return "fixed" === _.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), 
                b = this.offset(), _.nodeName(a[0], "html") || (d = a.offset()), d.top += _.css(a[0], "borderTopWidth", !0), 
                d.left += _.css(a[0], "borderLeftWidth", !0)), {
                    top: b.top - d.top - _.css(c, "marginTop", !0),
                    left: b.left - d.left - _.css(c, "marginLeft", !0)
                };
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var a = this.offsetParent || Jb; a && !_.nodeName(a, "html") && "static" === _.css(a, "position"); ) a = a.offsetParent;
                return a || Jb;
            });
        }
    }), _.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(b, c) {
        var d = "pageYOffset" === c;
        _.fn[b] = function(e) {
            return qa(this, function(b, e, f) {
                var g = P(b);
                return void 0 === f ? g ? g[c] : b[e] : void (g ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset) : b[e] = f);
            }, b, e, arguments.length, null);
        };
    }), _.each([ "top", "left" ], function(a, b) {
        _.cssHooks[b] = w(Y.pixelPosition, function(a, c) {
            return c ? (c = v(a, b), Qa.test(c) ? _(a).position()[b] + "px" : c) : void 0;
        });
    }), _.each({
        Height: "height",
        Width: "width"
    }, function(a, b) {
        _.each({
            padding: "inner" + a,
            content: b,
            "": "outer" + a
        }, function(c, d) {
            _.fn[d] = function(d, e) {
                var f = arguments.length && (c || "boolean" != typeof d), g = c || (d === !0 || e === !0 ? "margin" : "border");
                return qa(this, function(b, c, d) {
                    var e;
                    return _.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, 
                    Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? _.css(b, c, g) : _.style(b, c, d, g);
                }, b, f ? d : void 0, f, null);
            };
        });
    }), _.fn.size = function() {
        return this.length;
    }, _.fn.andSelf = _.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return _;
    });
    var Kb = a.jQuery, Lb = a.$;
    return _.noConflict = function(b) {
        return a.$ === _ && (a.$ = Lb), b && a.jQuery === _ && (a.jQuery = Kb), _;
    }, typeof b === za && (a.jQuery = a.$ = _), _;
}), function(a, b, c, d) {
    "use strict";
    function e(c, d, e, f) {
        function g() {
            t = b.devicePixelRatio > 1, h(e), d("delay") >= 0 && setTimeout(function() {
                i(!0);
            }, d("delay")), (d("delay") < 0 || d("combined")) && (f.e = n(d("throttle"), function(a) {
                "resize" === a.type && (r = s = -1), i(a.all);
            }), f.a = function(a) {
                h(a), e.push.apply(e, a);
            }, f.g = function() {
                return e;
            }, i(), a(d("appendScroll")).on("scroll." + c.name + " resize." + c.name, f.e));
        }
        function h(b) {
            if (b = a(b).filter(function() {
                return !a(this).data(d("handledName")) && (a(this).attr(d("attribute")) || a(this).attr(d("loaderAttribute")));
            }).data("plugin_" + c.name, c), d("defaultImage") || d("placeholder")) for (var e = 0; e < b.length; e++) {
                var f = a(b[e]), g = b[e].tagName.toLowerCase(), h = "background-image";
                "img" == g && d("defaultImage") && !f.attr("src") ? f.attr("src", d("defaultImage")) : "img" == g || !d("placeholder") || f.css(h) && "none" != f.css(h) || f.css(h, "url(" + d("placeholder") + ")");
            }
        }
        function i(b) {
            if (!e.length) return void (d("autoDestroy") && c.destroy());
            for (var f = !1, g = d("imageBase") ? d("imageBase") : "", h = 0; h < e.length; h++) (function(c) {
                if (k(c) || b) {
                    var e, h = a(c), i = c.tagName.toLowerCase(), l = h.attr(d("attribute"));
                    h.data(d("handledName")) || d("visibleOnly") && !h.is(":visible") || !(l && ("img" == i && g + l != h.attr("src") || "img" != i && g + l != h.css("background-image")) || (e = h.attr(d("loaderAttribute")))) || (f = !0, 
                    h.data(d("handledName"), !0), j(h, i, g, e));
                }
            })(e[h]);
            f && (e = a(e).filter(function() {
                return !a(this).data(d("handledName"));
            }));
        }
        function j(b, c, e, f) {
            ++q;
            var g = function() {
                p("onError", b), o();
            };
            if (p("beforeLoad", b), f) b.off("error").one("error", g), b.one("load", function() {
                d("removeAttribute") && b.removeAttr(d("loaderAttribute")), p("afterLoad", b), o();
            }), p(f, b, function(a) {
                a ? b.load() : b.error();
            }) || b.error(); else {
                var h = a(new Image());
                h.one("error", g), h.one("load", function() {
                    b.hide(), "img" == c ? b.attr("src", h.attr("src")) : b.css("background-image", "url(" + h.attr("src") + ")"), 
                    b[d("effect")](d("effectTime")), d("removeAttribute") && b.removeAttr(d("attribute") + " " + d("retinaAttribute")), 
                    p("afterLoad", b), h.remove(), o();
                }), h.attr("src", e + b.attr(d(t && b.attr(d("retinaAttribute")) ? "retinaAttribute" : "attribute"))), 
                h.complete && h.load();
            }
        }
        function k(a) {
            var b = a.getBoundingClientRect(), c = d("scrollDirection"), e = d("threshold"), f = m() + e > b.top && -e < b.bottom, g = l() + e > b.left && -e < b.right;
            return "vertical" == c ? f : "horizontal" == c ? g : f && g;
        }
        function l() {
            return r >= 0 ? r : r = a(b).width();
        }
        function m() {
            return s >= 0 ? s : s = a(b).height();
        }
        function n(a, b) {
            var e, f = 0;
            return function(g, h) {
                function i() {
                    f = +new Date(), b.call(c, g);
                }
                var j = +new Date() - f;
                e && clearTimeout(e), j > a || !d("enableThrottle") || h ? i() : e = setTimeout(i, a - j);
            };
        }
        function o() {
            --q, e.size() || q || p("onFinishedAll");
        }
        function p(a, b, e) {
            return (a = d(a)) ? (a.apply(c, [].slice.call(arguments, 1)), !0) : !1;
        }
        var q = 0, r = -1, s = -1, t = !1;
        !function() {
            "event" == d("bind") ? g() : a(b).load(g);
        }();
    }
    function f(b, c) {
        var f = this, g = a.extend({}, f.configuration, c), h = {};
        return f.config = function(a, b) {
            return b === d ? g[a] : (g[a] = b, f);
        }, f.addItems = function(b) {
            return h.a && h.a("string" === a.type(b) ? a(b) : b), f;
        }, f.getItems = function() {
            return h.g ? h.g() : {};
        }, f.update = function(a) {
            return h.e && h.e({}, !a), f;
        }, f.loadAll = function() {
            return h.e && h.e({
                all: !0
            }, !0), f;
        }, f.destroy = function() {
            return a(f.config("appendScroll")).off("." + f.name, h.e), h = {}, d;
        }, e(f, f.config, b, h), f.config("chainable") ? b : f;
    }
    a.fn.Lazy = a.fn.lazy = function(a) {
        return new f(this, a);
    }, a.extend(f.prototype, {
        name: "lazy",
        configuration: {
            chainable: !0,
            autoDestroy: !0,
            bind: "load",
            threshold: 500,
            visibleOnly: !1,
            appendScroll: b,
            scrollDirection: "both",
            imageBase: null,
            defaultImage: "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",
            placeholder: null,
            delay: -1,
            combined: !1,
            attribute: "data-src",
            retinaAttribute: "data-retina",
            loaderAttribute: "data-loader",
            removeAttribute: !0,
            handledName: "handled",
            effect: "show",
            effectTime: 0,
            enableThrottle: !0,
            throttle: 250,
            beforeLoad: null,
            afterLoad: null,
            onError: null,
            onFinishedAll: null
        }
    });
}(jQuery, window, document), !function(a, b) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.moment = b();
}(this, function() {
    "use strict";
    function a() {
        return Zc.apply(null, arguments);
    }
    function b(a) {
        Zc = a;
    }
    function c(a) {
        return a instanceof Array || "[object Array]" === Object.prototype.toString.call(a);
    }
    function d(a) {
        return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a);
    }
    function e(a, b) {
        var c, d = [];
        for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
        return d;
    }
    function f(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }
    function g(a, b) {
        for (var c in b) f(b, c) && (a[c] = b[c]);
        return f(b, "toString") && (a.toString = b.toString), f(b, "valueOf") && (a.valueOf = b.valueOf), 
        a;
    }
    function h(a, b, c, d) {
        return Ia(a, b, c, d, !0).utc();
    }
    function i() {
        return {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1
        };
    }
    function j(a) {
        return null == a._pf && (a._pf = i()), a._pf;
    }
    function k(a) {
        if (null == a._isValid) {
            var b = j(a);
            a._isValid = !(isNaN(a._d.getTime()) || !(b.overflow < 0) || b.empty || b.invalidMonth || b.invalidWeekday || b.nullInput || b.invalidFormat || b.userInvalidated), 
            a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour);
        }
        return a._isValid;
    }
    function l(a) {
        var b = h(NaN);
        return null != a ? g(j(b), a) : j(b).userInvalidated = !0, b;
    }
    function m(a) {
        return void 0 === a;
    }
    function n(a, b) {
        var c, d, e;
        if (m(b._isAMomentObject) || (a._isAMomentObject = b._isAMomentObject), m(b._i) || (a._i = b._i), 
        m(b._f) || (a._f = b._f), m(b._l) || (a._l = b._l), m(b._strict) || (a._strict = b._strict), 
        m(b._tzm) || (a._tzm = b._tzm), m(b._isUTC) || (a._isUTC = b._isUTC), m(b._offset) || (a._offset = b._offset), 
        m(b._pf) || (a._pf = j(b)), m(b._locale) || (a._locale = b._locale), $c.length > 0) for (c in $c) d = $c[c], 
        e = b[d], m(e) || (a[d] = e);
        return a;
    }
    function o(b) {
        n(this, b), this._d = new Date(null != b._d ? b._d.getTime() : NaN), _c === !1 && (_c = !0, 
        a.updateOffset(this), _c = !1);
    }
    function p(a) {
        return a instanceof o || null != a && null != a._isAMomentObject;
    }
    function q(a) {
        return 0 > a ? Math.ceil(a) : Math.floor(a);
    }
    function r(a) {
        var b = +a, c = 0;
        return 0 !== b && isFinite(b) && (c = q(b)), c;
    }
    function s(a, b, c) {
        var d, e = Math.min(a.length, b.length), f = Math.abs(a.length - b.length), g = 0;
        for (d = 0; e > d; d++) (c && a[d] !== b[d] || !c && r(a[d]) !== r(b[d])) && g++;
        return g + f;
    }
    function t(b) {
        a.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b);
    }
    function u(a, b) {
        var c = !0;
        return g(function() {
            return c && (t(a + "\nArguments: " + Array.prototype.slice.call(arguments).join(", ") + "\n" + new Error().stack), 
            c = !1), b.apply(this, arguments);
        }, b);
    }
    function v(a, b) {
        ad[a] || (t(b), ad[a] = !0);
    }
    function w(a) {
        return a instanceof Function || "[object Function]" === Object.prototype.toString.call(a);
    }
    function x(a) {
        return "[object Object]" === Object.prototype.toString.call(a);
    }
    function y(a) {
        var b, c;
        for (c in a) b = a[c], w(b) ? this[c] = b : this["_" + c] = b;
        this._config = a, this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source);
    }
    function z(a, b) {
        var c, d = g({}, a);
        for (c in b) f(b, c) && (x(a[c]) && x(b[c]) ? (d[c] = {}, g(d[c], a[c]), g(d[c], b[c])) : null != b[c] ? d[c] = b[c] : delete d[c]);
        return d;
    }
    function A(a) {
        null != a && this.set(a);
    }
    function B(a) {
        return a ? a.toLowerCase().replace("_", "-") : a;
    }
    function C(a) {
        for (var b, c, d, e, f = 0; f < a.length; ) {
            for (e = B(a[f]).split("-"), b = e.length, c = B(a[f + 1]), c = c ? c.split("-") : null; b > 0; ) {
                if (d = D(e.slice(0, b).join("-"))) return d;
                if (c && c.length >= b && s(e, c, !0) >= b - 1) break;
                b--;
            }
            f++;
        }
        return null;
    }
    function D(a) {
        var b = null;
        if (!cd[a] && "undefined" != typeof module && module && module.exports) try {
            b = bd._abbr, require("./locale/" + a), E(b);
        } catch (c) {}
        return cd[a];
    }
    function E(a, b) {
        var c;
        return a && (c = m(b) ? H(a) : F(a, b), c && (bd = c)), bd._abbr;
    }
    function F(a, b) {
        return null !== b ? (b.abbr = a, null != cd[a] ? (v("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"), 
        b = z(cd[a]._config, b)) : null != b.parentLocale && (null != cd[b.parentLocale] ? b = z(cd[b.parentLocale]._config, b) : v("parentLocaleUndefined", "specified parentLocale is not defined yet")), 
        cd[a] = new A(b), E(a), cd[a]) : (delete cd[a], null);
    }
    function G(a, b) {
        if (null != b) {
            var c;
            null != cd[a] && (b = z(cd[a]._config, b)), c = new A(b), c.parentLocale = cd[a], 
            cd[a] = c, E(a);
        } else null != cd[a] && (null != cd[a].parentLocale ? cd[a] = cd[a].parentLocale : null != cd[a] && delete cd[a]);
        return cd[a];
    }
    function H(a) {
        var b;
        if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return bd;
        if (!c(a)) {
            if (b = D(a)) return b;
            a = [ a ];
        }
        return C(a);
    }
    function I() {
        return Object.keys(cd);
    }
    function J(a, b) {
        var c = a.toLowerCase();
        dd[c] = dd[c + "s"] = dd[b] = a;
    }
    function K(a) {
        return "string" == typeof a ? dd[a] || dd[a.toLowerCase()] : void 0;
    }
    function L(a) {
        var b, c, d = {};
        for (c in a) f(a, c) && (b = K(c), b && (d[b] = a[c]));
        return d;
    }
    function M(b, c) {
        return function(d) {
            return null != d ? (O(this, b, d), a.updateOffset(this, c), this) : N(this, b);
        };
    }
    function N(a, b) {
        return a.isValid() ? a._d["get" + (a._isUTC ? "UTC" : "") + b]() : NaN;
    }
    function O(a, b, c) {
        a.isValid() && a._d["set" + (a._isUTC ? "UTC" : "") + b](c);
    }
    function P(a, b) {
        var c;
        if ("object" == typeof a) for (c in a) this.set(c, a[c]); else if (a = K(a), w(this[a])) return this[a](b);
        return this;
    }
    function Q(a, b, c) {
        var d = "" + Math.abs(a), e = b - d.length, f = a >= 0;
        return (f ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, e)).toString().substr(1) + d;
    }
    function R(a, b, c, d) {
        var e = d;
        "string" == typeof d && (e = function() {
            return this[d]();
        }), a && (hd[a] = e), b && (hd[b[0]] = function() {
            return Q(e.apply(this, arguments), b[1], b[2]);
        }), c && (hd[c] = function() {
            return this.localeData().ordinal(e.apply(this, arguments), a);
        });
    }
    function S(a) {
        return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "");
    }
    function T(a) {
        var b, c, d = a.match(ed);
        for (b = 0, c = d.length; c > b; b++) hd[d[b]] ? d[b] = hd[d[b]] : d[b] = S(d[b]);
        return function(e) {
            var f = "";
            for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
            return f;
        };
    }
    function U(a, b) {
        return a.isValid() ? (b = V(b, a.localeData()), gd[b] = gd[b] || T(b), gd[b](a)) : a.localeData().invalidDate();
    }
    function V(a, b) {
        function c(a) {
            return b.longDateFormat(a) || a;
        }
        var d = 5;
        for (fd.lastIndex = 0; d >= 0 && fd.test(a); ) a = a.replace(fd, c), fd.lastIndex = 0, 
        d -= 1;
        return a;
    }
    function W(a, b, c) {
        zd[a] = w(b) ? b : function(a, d) {
            return a && c ? c : b;
        };
    }
    function X(a, b) {
        return f(zd, a) ? zd[a](b._strict, b._locale) : new RegExp(Y(a));
    }
    function Y(a) {
        return Z(a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(a, b, c, d, e) {
            return b || c || d || e;
        }));
    }
    function Z(a) {
        return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
    }
    function $(a, b) {
        var c, d = b;
        for ("string" == typeof a && (a = [ a ]), "number" == typeof b && (d = function(a, c) {
            c[b] = r(a);
        }), c = 0; c < a.length; c++) Ad[a[c]] = d;
    }
    function _(a, b) {
        $(a, function(a, c, d, e) {
            d._w = d._w || {}, b(a, d._w, d, e);
        });
    }
    function aa(a, b, c) {
        null != b && f(Ad, a) && Ad[a](b, c._a, c, a);
    }
    function ba(a, b) {
        return new Date(Date.UTC(a, b + 1, 0)).getUTCDate();
    }
    function ca(a, b) {
        return c(this._months) ? this._months[a.month()] : this._months[Kd.test(b) ? "format" : "standalone"][a.month()];
    }
    function da(a, b) {
        return c(this._monthsShort) ? this._monthsShort[a.month()] : this._monthsShort[Kd.test(b) ? "format" : "standalone"][a.month()];
    }
    function ea(a, b, c) {
        var d, e, f;
        for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), 
        d = 0; 12 > d; d++) {
            if (e = h([ 2e3, d ]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), 
            this._shortMonthsParse[d] = new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), 
            c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), 
            this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
            if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
            if (!c && this._monthsParse[d].test(a)) return d;
        }
    }
    function fa(a, b) {
        var c;
        if (!a.isValid()) return a;
        if ("string" == typeof b) if (/^\d+$/.test(b)) b = r(b); else if (b = a.localeData().monthsParse(b), 
        "number" != typeof b) return a;
        return c = Math.min(a.date(), ba(a.year(), b)), a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c), 
        a;
    }
    function ga(b) {
        return null != b ? (fa(this, b), a.updateOffset(this, !0), this) : N(this, "Month");
    }
    function ha() {
        return ba(this.year(), this.month());
    }
    function ia(a) {
        return this._monthsParseExact ? (f(this, "_monthsRegex") || ka.call(this), a ? this._monthsShortStrictRegex : this._monthsShortRegex) : this._monthsShortStrictRegex && a ? this._monthsShortStrictRegex : this._monthsShortRegex;
    }
    function ja(a) {
        return this._monthsParseExact ? (f(this, "_monthsRegex") || ka.call(this), a ? this._monthsStrictRegex : this._monthsRegex) : this._monthsStrictRegex && a ? this._monthsStrictRegex : this._monthsRegex;
    }
    function ka() {
        function a(a, b) {
            return b.length - a.length;
        }
        var b, c, d = [], e = [], f = [];
        for (b = 0; 12 > b; b++) c = h([ 2e3, b ]), d.push(this.monthsShort(c, "")), e.push(this.months(c, "")), 
        f.push(this.months(c, "")), f.push(this.monthsShort(c, ""));
        for (d.sort(a), e.sort(a), f.sort(a), b = 0; 12 > b; b++) d[b] = Z(d[b]), e[b] = Z(e[b]), 
        f[b] = Z(f[b]);
        this._monthsRegex = new RegExp("^(" + f.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, 
        this._monthsStrictRegex = new RegExp("^(" + e.join("|") + ")$", "i"), this._monthsShortStrictRegex = new RegExp("^(" + d.join("|") + ")$", "i");
    }
    function la(a) {
        var b, c = a._a;
        return c && -2 === j(a).overflow && (b = c[Cd] < 0 || c[Cd] > 11 ? Cd : c[Dd] < 1 || c[Dd] > ba(c[Bd], c[Cd]) ? Dd : c[Ed] < 0 || c[Ed] > 24 || 24 === c[Ed] && (0 !== c[Fd] || 0 !== c[Gd] || 0 !== c[Hd]) ? Ed : c[Fd] < 0 || c[Fd] > 59 ? Fd : c[Gd] < 0 || c[Gd] > 59 ? Gd : c[Hd] < 0 || c[Hd] > 999 ? Hd : -1, 
        j(a)._overflowDayOfYear && (Bd > b || b > Dd) && (b = Dd), j(a)._overflowWeeks && -1 === b && (b = Id), 
        j(a)._overflowWeekday && -1 === b && (b = Jd), j(a).overflow = b), a;
    }
    function ma(a) {
        var b, c, d, e, f, g, h = a._i, i = Pd.exec(h) || Qd.exec(h);
        if (i) {
            for (j(a).iso = !0, b = 0, c = Sd.length; c > b; b++) if (Sd[b][1].exec(i[1])) {
                e = Sd[b][0], d = Sd[b][2] !== !1;
                break;
            }
            if (null == e) return void (a._isValid = !1);
            if (i[3]) {
                for (b = 0, c = Td.length; c > b; b++) if (Td[b][1].exec(i[3])) {
                    f = (i[2] || " ") + Td[b][0];
                    break;
                }
                if (null == f) return void (a._isValid = !1);
            }
            if (!d && null != f) return void (a._isValid = !1);
            if (i[4]) {
                if (!Rd.exec(i[4])) return void (a._isValid = !1);
                g = "Z";
            }
            a._f = e + (f || "") + (g || ""), Ba(a);
        } else a._isValid = !1;
    }
    function na(b) {
        var c = Ud.exec(b._i);
        return null !== c ? void (b._d = new Date(+c[1])) : (ma(b), void (b._isValid === !1 && (delete b._isValid, 
        a.createFromInputFallback(b))));
    }
    function oa(a, b, c, d, e, f, g) {
        var h = new Date(a, b, c, d, e, f, g);
        return 100 > a && a >= 0 && isFinite(h.getFullYear()) && h.setFullYear(a), h;
    }
    function pa(a) {
        var b = new Date(Date.UTC.apply(null, arguments));
        return 100 > a && a >= 0 && isFinite(b.getUTCFullYear()) && b.setUTCFullYear(a), 
        b;
    }
    function qa(a) {
        return ra(a) ? 366 : 365;
    }
    function ra(a) {
        return a % 4 === 0 && a % 100 !== 0 || a % 400 === 0;
    }
    function sa() {
        return ra(this.year());
    }
    function ta(a, b, c) {
        var d = 7 + b - c, e = (7 + pa(a, 0, d).getUTCDay() - b) % 7;
        return -e + d - 1;
    }
    function ua(a, b, c, d, e) {
        var f, g, h = (7 + c - d) % 7, i = ta(a, d, e), j = 1 + 7 * (b - 1) + h + i;
        return 0 >= j ? (f = a - 1, g = qa(f) + j) : j > qa(a) ? (f = a + 1, g = j - qa(a)) : (f = a, 
        g = j), {
            year: f,
            dayOfYear: g
        };
    }
    function va(a, b, c) {
        var d, e, f = ta(a.year(), b, c), g = Math.floor((a.dayOfYear() - f - 1) / 7) + 1;
        return 1 > g ? (e = a.year() - 1, d = g + wa(e, b, c)) : g > wa(a.year(), b, c) ? (d = g - wa(a.year(), b, c), 
        e = a.year() + 1) : (e = a.year(), d = g), {
            week: d,
            year: e
        };
    }
    function wa(a, b, c) {
        var d = ta(a, b, c), e = ta(a + 1, b, c);
        return (qa(a) - d + e) / 7;
    }
    function xa(a, b, c) {
        return null != a ? a : null != b ? b : c;
    }
    function ya(b) {
        var c = new Date(a.now());
        return b._useUTC ? [ c.getUTCFullYear(), c.getUTCMonth(), c.getUTCDate() ] : [ c.getFullYear(), c.getMonth(), c.getDate() ];
    }
    function za(a) {
        var b, c, d, e, f = [];
        if (!a._d) {
            for (d = ya(a), a._w && null == a._a[Dd] && null == a._a[Cd] && Aa(a), a._dayOfYear && (e = xa(a._a[Bd], d[Bd]), 
            a._dayOfYear > qa(e) && (j(a)._overflowDayOfYear = !0), c = pa(e, 0, a._dayOfYear), 
            a._a[Cd] = c.getUTCMonth(), a._a[Dd] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
            for (;7 > b; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
            24 === a._a[Ed] && 0 === a._a[Fd] && 0 === a._a[Gd] && 0 === a._a[Hd] && (a._nextDay = !0, 
            a._a[Ed] = 0), a._d = (a._useUTC ? pa : oa).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), 
            a._nextDay && (a._a[Ed] = 24);
        }
    }
    function Aa(a) {
        var b, c, d, e, f, g, h, i;
        b = a._w, null != b.GG || null != b.W || null != b.E ? (f = 1, g = 4, c = xa(b.GG, a._a[Bd], va(Ja(), 1, 4).year), 
        d = xa(b.W, 1), e = xa(b.E, 1), (1 > e || e > 7) && (i = !0)) : (f = a._locale._week.dow, 
        g = a._locale._week.doy, c = xa(b.gg, a._a[Bd], va(Ja(), f, g).year), d = xa(b.w, 1), 
        null != b.d ? (e = b.d, (0 > e || e > 6) && (i = !0)) : null != b.e ? (e = b.e + f, 
        (b.e < 0 || b.e > 6) && (i = !0)) : e = f), 1 > d || d > wa(c, f, g) ? j(a)._overflowWeeks = !0 : null != i ? j(a)._overflowWeekday = !0 : (h = ua(c, d, e, f, g), 
        a._a[Bd] = h.year, a._dayOfYear = h.dayOfYear);
    }
    function Ba(b) {
        if (b._f === a.ISO_8601) return void ma(b);
        b._a = [], j(b).empty = !0;
        var c, d, e, f, g, h = "" + b._i, i = h.length, k = 0;
        for (e = V(b._f, b._locale).match(ed) || [], c = 0; c < e.length; c++) f = e[c], 
        d = (h.match(X(f, b)) || [])[0], d && (g = h.substr(0, h.indexOf(d)), g.length > 0 && j(b).unusedInput.push(g), 
        h = h.slice(h.indexOf(d) + d.length), k += d.length), hd[f] ? (d ? j(b).empty = !1 : j(b).unusedTokens.push(f), 
        aa(f, d, b)) : b._strict && !d && j(b).unusedTokens.push(f);
        j(b).charsLeftOver = i - k, h.length > 0 && j(b).unusedInput.push(h), j(b).bigHour === !0 && b._a[Ed] <= 12 && b._a[Ed] > 0 && (j(b).bigHour = void 0), 
        b._a[Ed] = Ca(b._locale, b._a[Ed], b._meridiem), za(b), la(b);
    }
    function Ca(a, b, c) {
        var d;
        return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b, c) : null != a.isPM ? (d = a.isPM(c), 
        d && 12 > b && (b += 12), d || 12 !== b || (b = 0), b) : b;
    }
    function Da(a) {
        var b, c, d, e, f;
        if (0 === a._f.length) return j(a).invalidFormat = !0, void (a._d = new Date(NaN));
        for (e = 0; e < a._f.length; e++) f = 0, b = n({}, a), null != a._useUTC && (b._useUTC = a._useUTC), 
        b._f = a._f[e], Ba(b), k(b) && (f += j(b).charsLeftOver, f += 10 * j(b).unusedTokens.length, 
        j(b).score = f, (null == d || d > f) && (d = f, c = b));
        g(a, c || b);
    }
    function Ea(a) {
        if (!a._d) {
            var b = L(a._i);
            a._a = e([ b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond ], function(a) {
                return a && parseInt(a, 10);
            }), za(a);
        }
    }
    function Fa(a) {
        var b = new o(la(Ga(a)));
        return b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b;
    }
    function Ga(a) {
        var b = a._i, e = a._f;
        return a._locale = a._locale || H(a._l), null === b || void 0 === e && "" === b ? l({
            nullInput: !0
        }) : ("string" == typeof b && (a._i = b = a._locale.preparse(b)), p(b) ? new o(la(b)) : (c(e) ? Da(a) : e ? Ba(a) : d(b) ? a._d = b : Ha(a), 
        k(a) || (a._d = null), a));
    }
    function Ha(b) {
        var f = b._i;
        void 0 === f ? b._d = new Date(a.now()) : d(f) ? b._d = new Date(+f) : "string" == typeof f ? na(b) : c(f) ? (b._a = e(f.slice(0), function(a) {
            return parseInt(a, 10);
        }), za(b)) : "object" == typeof f ? Ea(b) : "number" == typeof f ? b._d = new Date(f) : a.createFromInputFallback(b);
    }
    function Ia(a, b, c, d, e) {
        var f = {};
        return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, 
        f._l = c, f._i = a, f._f = b, f._strict = d, Fa(f);
    }
    function Ja(a, b, c, d) {
        return Ia(a, b, c, d, !1);
    }
    function Ka(a, b) {
        var d, e;
        if (1 === b.length && c(b[0]) && (b = b[0]), !b.length) return Ja();
        for (d = b[0], e = 1; e < b.length; ++e) (!b[e].isValid() || b[e][a](d)) && (d = b[e]);
        return d;
    }
    function La() {
        var a = [].slice.call(arguments, 0);
        return Ka("isBefore", a);
    }
    function Ma() {
        var a = [].slice.call(arguments, 0);
        return Ka("isAfter", a);
    }
    function Na(a) {
        var b = L(a), c = b.year || 0, d = b.quarter || 0, e = b.month || 0, f = b.week || 0, g = b.day || 0, h = b.hour || 0, i = b.minute || 0, j = b.second || 0, k = b.millisecond || 0;
        this._milliseconds = +k + 1e3 * j + 6e4 * i + 36e5 * h, this._days = +g + 7 * f, 
        this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = H(), this._bubble();
    }
    function Oa(a) {
        return a instanceof Na;
    }
    function Pa(a, b) {
        R(a, 0, 0, function() {
            var a = this.utcOffset(), c = "+";
            return 0 > a && (a = -a, c = "-"), c + Q(~~(a / 60), 2) + b + Q(~~a % 60, 2);
        });
    }
    function Qa(a, b) {
        var c = (b || "").match(a) || [], d = c[c.length - 1] || [], e = (d + "").match(Zd) || [ "-", 0, 0 ], f = +(60 * e[1]) + r(e[2]);
        return "+" === e[0] ? f : -f;
    }
    function Ra(b, c) {
        var e, f;
        return c._isUTC ? (e = c.clone(), f = (p(b) || d(b) ? +b : +Ja(b)) - +e, e._d.setTime(+e._d + f), 
        a.updateOffset(e, !1), e) : Ja(b).local();
    }
    function Sa(a) {
        return 15 * -Math.round(a._d.getTimezoneOffset() / 15);
    }
    function Ta(b, c) {
        var d, e = this._offset || 0;
        return this.isValid() ? null != b ? ("string" == typeof b ? b = Qa(wd, b) : Math.abs(b) < 16 && (b = 60 * b), 
        !this._isUTC && c && (d = Sa(this)), this._offset = b, this._isUTC = !0, null != d && this.add(d, "m"), 
        e !== b && (!c || this._changeInProgress ? ib(this, cb(b - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, 
        a.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Sa(this) : null != b ? this : NaN;
    }
    function Ua(a, b) {
        return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset();
    }
    function Va(a) {
        return this.utcOffset(0, a);
    }
    function Wa(a) {
        return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Sa(this), "m")), 
        this;
    }
    function Xa() {
        return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(Qa(vd, this._i)), 
        this;
    }
    function Ya(a) {
        return this.isValid() ? (a = a ? Ja(a).utcOffset() : 0, (this.utcOffset() - a) % 60 === 0) : !1;
    }
    function Za() {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
    }
    function $a() {
        if (!m(this._isDSTShifted)) return this._isDSTShifted;
        var a = {};
        if (n(a, this), a = Ga(a), a._a) {
            var b = a._isUTC ? h(a._a) : Ja(a._a);
            this._isDSTShifted = this.isValid() && s(a._a, b.toArray()) > 0;
        } else this._isDSTShifted = !1;
        return this._isDSTShifted;
    }
    function _a() {
        return this.isValid() ? !this._isUTC : !1;
    }
    function ab() {
        return this.isValid() ? this._isUTC : !1;
    }
    function bb() {
        return this.isValid() ? this._isUTC && 0 === this._offset : !1;
    }
    function cb(a, b) {
        var c, d, e, g = a, h = null;
        return Oa(a) ? g = {
            ms: a._milliseconds,
            d: a._days,
            M: a._months
        } : "number" == typeof a ? (g = {}, b ? g[b] = a : g.milliseconds = a) : (h = $d.exec(a)) ? (c = "-" === h[1] ? -1 : 1, 
        g = {
            y: 0,
            d: r(h[Dd]) * c,
            h: r(h[Ed]) * c,
            m: r(h[Fd]) * c,
            s: r(h[Gd]) * c,
            ms: r(h[Hd]) * c
        }) : (h = _d.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
            y: db(h[2], c),
            M: db(h[3], c),
            w: db(h[4], c),
            d: db(h[5], c),
            h: db(h[6], c),
            m: db(h[7], c),
            s: db(h[8], c)
        }) : null == g ? g = {} : "object" == typeof g && ("from" in g || "to" in g) && (e = fb(Ja(g.from), Ja(g.to)), 
        g = {}, g.ms = e.milliseconds, g.M = e.months), d = new Na(g), Oa(a) && f(a, "_locale") && (d._locale = a._locale), 
        d;
    }
    function db(a, b) {
        var c = a && parseFloat(a.replace(",", "."));
        return (isNaN(c) ? 0 : c) * b;
    }
    function eb(a, b) {
        var c = {
            milliseconds: 0,
            months: 0
        };
        return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, 
        c.milliseconds = +b - +a.clone().add(c.months, "M"), c;
    }
    function fb(a, b) {
        var c;
        return a.isValid() && b.isValid() ? (b = Ra(b, a), a.isBefore(b) ? c = eb(a, b) : (c = eb(b, a), 
        c.milliseconds = -c.milliseconds, c.months = -c.months), c) : {
            milliseconds: 0,
            months: 0
        };
    }
    function gb(a) {
        return 0 > a ? -1 * Math.round(-1 * a) : Math.round(a);
    }
    function hb(a, b) {
        return function(c, d) {
            var e, f;
            return null === d || isNaN(+d) || (v(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), 
            f = c, c = d, d = f), c = "string" == typeof c ? +c : c, e = cb(c, d), ib(this, e, a), 
            this;
        };
    }
    function ib(b, c, d, e) {
        var f = c._milliseconds, g = gb(c._days), h = gb(c._months);
        b.isValid() && (e = null == e ? !0 : e, f && b._d.setTime(+b._d + f * d), g && O(b, "Date", N(b, "Date") + g * d), 
        h && fa(b, N(b, "Month") + h * d), e && a.updateOffset(b, g || h));
    }
    function jb(a, b) {
        var c = a || Ja(), d = Ra(c, this).startOf("day"), e = this.diff(d, "days", !0), f = -6 > e ? "sameElse" : -1 > e ? "lastWeek" : 0 > e ? "lastDay" : 1 > e ? "sameDay" : 2 > e ? "nextDay" : 7 > e ? "nextWeek" : "sameElse", g = b && (w(b[f]) ? b[f]() : b[f]);
        return this.format(g || this.localeData().calendar(f, this, Ja(c)));
    }
    function kb() {
        return new o(this);
    }
    function lb(a, b) {
        var c = p(a) ? a : Ja(a);
        return this.isValid() && c.isValid() ? (b = K(m(b) ? "millisecond" : b), "millisecond" === b ? +this > +c : +c < +this.clone().startOf(b)) : !1;
    }
    function mb(a, b) {
        var c = p(a) ? a : Ja(a);
        return this.isValid() && c.isValid() ? (b = K(m(b) ? "millisecond" : b), "millisecond" === b ? +c > +this : +this.clone().endOf(b) < +c) : !1;
    }
    function nb(a, b, c) {
        return this.isAfter(a, c) && this.isBefore(b, c);
    }
    function ob(a, b) {
        var c, d = p(a) ? a : Ja(a);
        return this.isValid() && d.isValid() ? (b = K(b || "millisecond"), "millisecond" === b ? +this === +d : (c = +d, 
        +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b))) : !1;
    }
    function pb(a, b) {
        return this.isSame(a, b) || this.isAfter(a, b);
    }
    function qb(a, b) {
        return this.isSame(a, b) || this.isBefore(a, b);
    }
    function rb(a, b, c) {
        var d, e, f, g;
        return this.isValid() ? (d = Ra(a, this), d.isValid() ? (e = 6e4 * (d.utcOffset() - this.utcOffset()), 
        b = K(b), "year" === b || "month" === b || "quarter" === b ? (g = sb(this, d), "quarter" === b ? g /= 3 : "year" === b && (g /= 12)) : (f = this - d, 
        g = "second" === b ? f / 1e3 : "minute" === b ? f / 6e4 : "hour" === b ? f / 36e5 : "day" === b ? (f - e) / 864e5 : "week" === b ? (f - e) / 6048e5 : f), 
        c ? g : q(g)) : NaN) : NaN;
    }
    function sb(a, b) {
        var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()), f = a.clone().add(e, "months");
        return 0 > b - f ? (c = a.clone().add(e - 1, "months"), d = (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), 
        d = (b - f) / (c - f)), -(e + d);
    }
    function tb() {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
    }
    function ub() {
        var a = this.clone().utc();
        return 0 < a.year() && a.year() <= 9999 ? w(Date.prototype.toISOString) ? this.toDate().toISOString() : U(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : U(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");
    }
    function vb(b) {
        var c = U(this, b || a.defaultFormat);
        return this.localeData().postformat(c);
    }
    function wb(a, b) {
        return this.isValid() && (p(a) && a.isValid() || Ja(a).isValid()) ? cb({
            to: this,
            from: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
    }
    function xb(a) {
        return this.from(Ja(), a);
    }
    function yb(a, b) {
        return this.isValid() && (p(a) && a.isValid() || Ja(a).isValid()) ? cb({
            from: this,
            to: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
    }
    function zb(a) {
        return this.to(Ja(), a);
    }
    function Ab(a) {
        var b;
        return void 0 === a ? this._locale._abbr : (b = H(a), null != b && (this._locale = b), 
        this);
    }
    function Bb() {
        return this._locale;
    }
    function Cb(a) {
        switch (a = K(a)) {
          case "year":
            this.month(0);

          case "quarter":
          case "month":
            this.date(1);

          case "week":
          case "isoWeek":
          case "day":
            this.hours(0);

          case "hour":
            this.minutes(0);

          case "minute":
            this.seconds(0);

          case "second":
            this.milliseconds(0);
        }
        return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), 
        this;
    }
    function Db(a) {
        return a = K(a), void 0 === a || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms");
    }
    function Eb() {
        return +this._d - 6e4 * (this._offset || 0);
    }
    function Fb() {
        return Math.floor(+this / 1e3);
    }
    function Gb() {
        return this._offset ? new Date(+this) : this._d;
    }
    function Hb() {
        var a = this;
        return [ a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond() ];
    }
    function Ib() {
        var a = this;
        return {
            years: a.year(),
            months: a.month(),
            date: a.date(),
            hours: a.hours(),
            minutes: a.minutes(),
            seconds: a.seconds(),
            milliseconds: a.milliseconds()
        };
    }
    function Jb() {
        return this.isValid() ? this.toISOString() : null;
    }
    function Kb() {
        return k(this);
    }
    function Lb() {
        return g({}, j(this));
    }
    function Mb() {
        return j(this).overflow;
    }
    function Nb() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }
    function Ob(a, b) {
        R(0, [ a, a.length ], 0, b);
    }
    function Pb(a) {
        return Tb.call(this, a, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
    }
    function Qb(a) {
        return Tb.call(this, a, this.isoWeek(), this.isoWeekday(), 1, 4);
    }
    function Rb() {
        return wa(this.year(), 1, 4);
    }
    function Sb() {
        var a = this.localeData()._week;
        return wa(this.year(), a.dow, a.doy);
    }
    function Tb(a, b, c, d, e) {
        var f;
        return null == a ? va(this, d, e).year : (f = wa(a, d, e), b > f && (b = f), Ub.call(this, a, b, c, d, e));
    }
    function Ub(a, b, c, d, e) {
        var f = ua(a, b, c, d, e), g = pa(f.year, 0, f.dayOfYear);
        return this.year(g.getUTCFullYear()), this.month(g.getUTCMonth()), this.date(g.getUTCDate()), 
        this;
    }
    function Vb(a) {
        return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3);
    }
    function Wb(a) {
        return va(a, this._week.dow, this._week.doy).week;
    }
    function Xb() {
        return this._week.dow;
    }
    function Yb() {
        return this._week.doy;
    }
    function Zb(a) {
        var b = this.localeData().week(this);
        return null == a ? b : this.add(7 * (a - b), "d");
    }
    function $b(a) {
        var b = va(this, 1, 4).week;
        return null == a ? b : this.add(7 * (a - b), "d");
    }
    function _b(a, b) {
        return "string" != typeof a ? a : isNaN(a) ? (a = b.weekdaysParse(a), "number" == typeof a ? a : null) : parseInt(a, 10);
    }
    function ac(a, b) {
        return c(this._weekdays) ? this._weekdays[a.day()] : this._weekdays[this._weekdays.isFormat.test(b) ? "format" : "standalone"][a.day()];
    }
    function bc(a) {
        return this._weekdaysShort[a.day()];
    }
    function cc(a) {
        return this._weekdaysMin[a.day()];
    }
    function dc(a, b, c) {
        var d, e, f;
        for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], 
        this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), d = 0; 7 > d; d++) {
            if (e = Ja([ 2e3, 1 ]).day(d), c && !this._fullWeekdaysParse[d] && (this._fullWeekdaysParse[d] = new RegExp("^" + this.weekdays(e, "").replace(".", ".?") + "$", "i"), 
            this._shortWeekdaysParse[d] = new RegExp("^" + this.weekdaysShort(e, "").replace(".", ".?") + "$", "i"), 
            this._minWeekdaysParse[d] = new RegExp("^" + this.weekdaysMin(e, "").replace(".", ".?") + "$", "i")), 
            this._weekdaysParse[d] || (f = "^" + this.weekdays(e, "") + "|^" + this.weekdaysShort(e, "") + "|^" + this.weekdaysMin(e, ""), 
            this._weekdaysParse[d] = new RegExp(f.replace(".", ""), "i")), c && "dddd" === b && this._fullWeekdaysParse[d].test(a)) return d;
            if (c && "ddd" === b && this._shortWeekdaysParse[d].test(a)) return d;
            if (c && "dd" === b && this._minWeekdaysParse[d].test(a)) return d;
            if (!c && this._weekdaysParse[d].test(a)) return d;
        }
    }
    function ec(a) {
        if (!this.isValid()) return null != a ? this : NaN;
        var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        return null != a ? (a = _b(a, this.localeData()), this.add(a - b, "d")) : b;
    }
    function fc(a) {
        if (!this.isValid()) return null != a ? this : NaN;
        var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == a ? b : this.add(a - b, "d");
    }
    function gc(a) {
        return this.isValid() ? null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7) : null != a ? this : NaN;
    }
    function hc(a) {
        var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
        return null == a ? b : this.add(a - b, "d");
    }
    function ic() {
        return this.hours() % 12 || 12;
    }
    function jc(a, b) {
        R(a, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), b);
        });
    }
    function kc(a, b) {
        return b._meridiemParse;
    }
    function lc(a) {
        return "p" === (a + "").toLowerCase().charAt(0);
    }
    function mc(a, b, c) {
        return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM";
    }
    function nc(a, b) {
        b[Hd] = r(1e3 * ("0." + a));
    }
    function oc() {
        return this._isUTC ? "UTC" : "";
    }
    function pc() {
        return this._isUTC ? "Coordinated Universal Time" : "";
    }
    function qc(a) {
        return Ja(1e3 * a);
    }
    function rc() {
        return Ja.apply(null, arguments).parseZone();
    }
    function sc(a, b, c) {
        var d = this._calendar[a];
        return w(d) ? d.call(b, c) : d;
    }
    function tc(a) {
        var b = this._longDateFormat[a], c = this._longDateFormat[a.toUpperCase()];
        return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function(a) {
            return a.slice(1);
        }), this._longDateFormat[a]);
    }
    function uc() {
        return this._invalidDate;
    }
    function vc(a) {
        return this._ordinal.replace("%d", a);
    }
    function wc(a) {
        return a;
    }
    function xc(a, b, c, d) {
        var e = this._relativeTime[c];
        return w(e) ? e(a, b, c, d) : e.replace(/%d/i, a);
    }
    function yc(a, b) {
        var c = this._relativeTime[a > 0 ? "future" : "past"];
        return w(c) ? c(b) : c.replace(/%s/i, b);
    }
    function zc(a, b, c, d) {
        var e = H(), f = h().set(d, b);
        return e[c](f, a);
    }
    function Ac(a, b, c, d, e) {
        if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return zc(a, b, c, e);
        var f, g = [];
        for (f = 0; d > f; f++) g[f] = zc(a, f, c, e);
        return g;
    }
    function Bc(a, b) {
        return Ac(a, b, "months", 12, "month");
    }
    function Cc(a, b) {
        return Ac(a, b, "monthsShort", 12, "month");
    }
    function Dc(a, b) {
        return Ac(a, b, "weekdays", 7, "day");
    }
    function Ec(a, b) {
        return Ac(a, b, "weekdaysShort", 7, "day");
    }
    function Fc(a, b) {
        return Ac(a, b, "weekdaysMin", 7, "day");
    }
    function Gc() {
        var a = this._data;
        return this._milliseconds = xe(this._milliseconds), this._days = xe(this._days), 
        this._months = xe(this._months), a.milliseconds = xe(a.milliseconds), a.seconds = xe(a.seconds), 
        a.minutes = xe(a.minutes), a.hours = xe(a.hours), a.months = xe(a.months), a.years = xe(a.years), 
        this;
    }
    function Hc(a, b, c, d) {
        var e = cb(b, c);
        return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months += d * e._months, 
        a._bubble();
    }
    function Ic(a, b) {
        return Hc(this, a, b, 1);
    }
    function Jc(a, b) {
        return Hc(this, a, b, -1);
    }
    function Kc(a) {
        return 0 > a ? Math.floor(a) : Math.ceil(a);
    }
    function Lc() {
        var a, b, c, d, e, f = this._milliseconds, g = this._days, h = this._months, i = this._data;
        return f >= 0 && g >= 0 && h >= 0 || 0 >= f && 0 >= g && 0 >= h || (f += 864e5 * Kc(Nc(h) + g), 
        g = 0, h = 0), i.milliseconds = f % 1e3, a = q(f / 1e3), i.seconds = a % 60, b = q(a / 60), 
        i.minutes = b % 60, c = q(b / 60), i.hours = c % 24, g += q(c / 24), e = q(Mc(g)), 
        h += e, g -= Kc(Nc(e)), d = q(h / 12), h %= 12, i.days = g, i.months = h, i.years = d, 
        this;
    }
    function Mc(a) {
        return 4800 * a / 146097;
    }
    function Nc(a) {
        return 146097 * a / 4800;
    }
    function Oc(a) {
        var b, c, d = this._milliseconds;
        if (a = K(a), "month" === a || "year" === a) return b = this._days + d / 864e5, 
        c = this._months + Mc(b), "month" === a ? c : c / 12;
        switch (b = this._days + Math.round(Nc(this._months)), a) {
          case "week":
            return b / 7 + d / 6048e5;

          case "day":
            return b + d / 864e5;

          case "hour":
            return 24 * b + d / 36e5;

          case "minute":
            return 1440 * b + d / 6e4;

          case "second":
            return 86400 * b + d / 1e3;

          case "millisecond":
            return Math.floor(864e5 * b) + d;

          default:
            throw new Error("Unknown unit " + a);
        }
    }
    function Pc() {
        return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * r(this._months / 12);
    }
    function Qc(a) {
        return function() {
            return this.as(a);
        };
    }
    function Rc(a) {
        return a = K(a), this[a + "s"]();
    }
    function Sc(a) {
        return function() {
            return this._data[a];
        };
    }
    function Tc() {
        return q(this.days() / 7);
    }
    function Uc(a, b, c, d, e) {
        return e.relativeTime(b || 1, !!c, a, d);
    }
    function Vc(a, b, c) {
        var d = cb(a).abs(), e = Ne(d.as("s")), f = Ne(d.as("m")), g = Ne(d.as("h")), h = Ne(d.as("d")), i = Ne(d.as("M")), j = Ne(d.as("y")), k = e < Oe.s && [ "s", e ] || 1 >= f && [ "m" ] || f < Oe.m && [ "mm", f ] || 1 >= g && [ "h" ] || g < Oe.h && [ "hh", g ] || 1 >= h && [ "d" ] || h < Oe.d && [ "dd", h ] || 1 >= i && [ "M" ] || i < Oe.M && [ "MM", i ] || 1 >= j && [ "y" ] || [ "yy", j ];
        return k[2] = b, k[3] = +a > 0, k[4] = c, Uc.apply(null, k);
    }
    function Wc(a, b) {
        return void 0 === Oe[a] ? !1 : void 0 === b ? Oe[a] : (Oe[a] = b, !0);
    }
    function Xc(a) {
        var b = this.localeData(), c = Vc(this, !a, b);
        return a && (c = b.pastFuture(+this, c)), b.postformat(c);
    }
    function Yc() {
        var a, b, c, d = Pe(this._milliseconds) / 1e3, e = Pe(this._days), f = Pe(this._months);
        a = q(d / 60), b = q(a / 60), d %= 60, a %= 60, c = q(f / 12), f %= 12;
        var g = c, h = f, i = e, j = b, k = a, l = d, m = this.asSeconds();
        return m ? (0 > m ? "-" : "") + "P" + (g ? g + "Y" : "") + (h ? h + "M" : "") + (i ? i + "D" : "") + (j || k || l ? "T" : "") + (j ? j + "H" : "") + (k ? k + "M" : "") + (l ? l + "S" : "") : "P0D";
    }
    var Zc, $c = a.momentProperties = [], _c = !1, ad = {};
    a.suppressDeprecationWarnings = !1;
    var bd, cd = {}, dd = {}, ed = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, fd = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, gd = {}, hd = {}, id = /\d/, jd = /\d\d/, kd = /\d{3}/, ld = /\d{4}/, md = /[+-]?\d{6}/, nd = /\d\d?/, od = /\d\d\d\d?/, pd = /\d\d\d\d\d\d?/, qd = /\d{1,3}/, rd = /\d{1,4}/, sd = /[+-]?\d{1,6}/, td = /\d+/, ud = /[+-]?\d+/, vd = /Z|[+-]\d\d:?\d\d/gi, wd = /Z|[+-]\d\d(?::?\d\d)?/gi, xd = /[+-]?\d+(\.\d{1,3})?/, yd = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, zd = {}, Ad = {}, Bd = 0, Cd = 1, Dd = 2, Ed = 3, Fd = 4, Gd = 5, Hd = 6, Id = 7, Jd = 8;
    R("M", [ "MM", 2 ], "Mo", function() {
        return this.month() + 1;
    }), R("MMM", 0, 0, function(a) {
        return this.localeData().monthsShort(this, a);
    }), R("MMMM", 0, 0, function(a) {
        return this.localeData().months(this, a);
    }), J("month", "M"), W("M", nd), W("MM", nd, jd), W("MMM", function(a, b) {
        return b.monthsShortRegex(a);
    }), W("MMMM", function(a, b) {
        return b.monthsRegex(a);
    }), $([ "M", "MM" ], function(a, b) {
        b[Cd] = r(a) - 1;
    }), $([ "MMM", "MMMM" ], function(a, b, c, d) {
        var e = c._locale.monthsParse(a, d, c._strict);
        null != e ? b[Cd] = e : j(c).invalidMonth = a;
    });
    var Kd = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/, Ld = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), Md = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), Nd = yd, Od = yd, Pd = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, Qd = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, Rd = /Z|[+-]\d\d(?::?\d\d)?/, Sd = [ [ "YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/ ], [ "YYYY-MM-DD", /\d{4}-\d\d-\d\d/ ], [ "GGGG-[W]WW-E", /\d{4}-W\d\d-\d/ ], [ "GGGG-[W]WW", /\d{4}-W\d\d/, !1 ], [ "YYYY-DDD", /\d{4}-\d{3}/ ], [ "YYYY-MM", /\d{4}-\d\d/, !1 ], [ "YYYYYYMMDD", /[+-]\d{10}/ ], [ "YYYYMMDD", /\d{8}/ ], [ "GGGG[W]WWE", /\d{4}W\d{3}/ ], [ "GGGG[W]WW", /\d{4}W\d{2}/, !1 ], [ "YYYYDDD", /\d{7}/ ] ], Td = [ [ "HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/ ], [ "HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/ ], [ "HH:mm:ss", /\d\d:\d\d:\d\d/ ], [ "HH:mm", /\d\d:\d\d/ ], [ "HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/ ], [ "HHmmss,SSSS", /\d\d\d\d\d\d,\d+/ ], [ "HHmmss", /\d\d\d\d\d\d/ ], [ "HHmm", /\d\d\d\d/ ], [ "HH", /\d\d/ ] ], Ud = /^\/?Date\((\-?\d+)/i;
    a.createFromInputFallback = u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(a) {
        a._d = new Date(a._i + (a._useUTC ? " UTC" : ""));
    }), R("Y", 0, 0, function() {
        var a = this.year();
        return 9999 >= a ? "" + a : "+" + a;
    }), R(0, [ "YY", 2 ], 0, function() {
        return this.year() % 100;
    }), R(0, [ "YYYY", 4 ], 0, "year"), R(0, [ "YYYYY", 5 ], 0, "year"), R(0, [ "YYYYYY", 6, !0 ], 0, "year"), 
    J("year", "y"), W("Y", ud), W("YY", nd, jd), W("YYYY", rd, ld), W("YYYYY", sd, md), 
    W("YYYYYY", sd, md), $([ "YYYYY", "YYYYYY" ], Bd), $("YYYY", function(b, c) {
        c[Bd] = 2 === b.length ? a.parseTwoDigitYear(b) : r(b);
    }), $("YY", function(b, c) {
        c[Bd] = a.parseTwoDigitYear(b);
    }), $("Y", function(a, b) {
        b[Bd] = parseInt(a, 10);
    }), a.parseTwoDigitYear = function(a) {
        return r(a) + (r(a) > 68 ? 1900 : 2e3);
    };
    var Vd = M("FullYear", !1);
    a.ISO_8601 = function() {};
    var Wd = u("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
        var a = Ja.apply(null, arguments);
        return this.isValid() && a.isValid() ? this > a ? this : a : l();
    }), Xd = u("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
        var a = Ja.apply(null, arguments);
        return this.isValid() && a.isValid() ? a > this ? this : a : l();
    }), Yd = function() {
        return Date.now ? Date.now() : +new Date();
    };
    Pa("Z", ":"), Pa("ZZ", ""), W("Z", wd), W("ZZ", wd), $([ "Z", "ZZ" ], function(a, b, c) {
        c._useUTC = !0, c._tzm = Qa(wd, a);
    });
    var Zd = /([\+\-]|\d\d)/gi;
    a.updateOffset = function() {};
    var $d = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/, _d = /^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;
    cb.fn = Na.prototype;
    var ae = hb(1, "add"), be = hb(-1, "subtract");
    a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
    var ce = u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(a) {
        return void 0 === a ? this.localeData() : this.locale(a);
    });
    R(0, [ "gg", 2 ], 0, function() {
        return this.weekYear() % 100;
    }), R(0, [ "GG", 2 ], 0, function() {
        return this.isoWeekYear() % 100;
    }), Ob("gggg", "weekYear"), Ob("ggggg", "weekYear"), Ob("GGGG", "isoWeekYear"), 
    Ob("GGGGG", "isoWeekYear"), J("weekYear", "gg"), J("isoWeekYear", "GG"), W("G", ud), 
    W("g", ud), W("GG", nd, jd), W("gg", nd, jd), W("GGGG", rd, ld), W("gggg", rd, ld), 
    W("GGGGG", sd, md), W("ggggg", sd, md), _([ "gggg", "ggggg", "GGGG", "GGGGG" ], function(a, b, c, d) {
        b[d.substr(0, 2)] = r(a);
    }), _([ "gg", "GG" ], function(b, c, d, e) {
        c[e] = a.parseTwoDigitYear(b);
    }), R("Q", 0, "Qo", "quarter"), J("quarter", "Q"), W("Q", id), $("Q", function(a, b) {
        b[Cd] = 3 * (r(a) - 1);
    }), R("w", [ "ww", 2 ], "wo", "week"), R("W", [ "WW", 2 ], "Wo", "isoWeek"), J("week", "w"), 
    J("isoWeek", "W"), W("w", nd), W("ww", nd, jd), W("W", nd), W("WW", nd, jd), _([ "w", "ww", "W", "WW" ], function(a, b, c, d) {
        b[d.substr(0, 1)] = r(a);
    });
    var de = {
        dow: 0,
        doy: 6
    };
    R("D", [ "DD", 2 ], "Do", "date"), J("date", "D"), W("D", nd), W("DD", nd, jd), 
    W("Do", function(a, b) {
        return a ? b._ordinalParse : b._ordinalParseLenient;
    }), $([ "D", "DD" ], Dd), $("Do", function(a, b) {
        b[Dd] = r(a.match(nd)[0], 10);
    });
    var ee = M("Date", !0);
    R("d", 0, "do", "day"), R("dd", 0, 0, function(a) {
        return this.localeData().weekdaysMin(this, a);
    }), R("ddd", 0, 0, function(a) {
        return this.localeData().weekdaysShort(this, a);
    }), R("dddd", 0, 0, function(a) {
        return this.localeData().weekdays(this, a);
    }), R("e", 0, 0, "weekday"), R("E", 0, 0, "isoWeekday"), J("day", "d"), J("weekday", "e"), 
    J("isoWeekday", "E"), W("d", nd), W("e", nd), W("E", nd), W("dd", yd), W("ddd", yd), 
    W("dddd", yd), _([ "dd", "ddd", "dddd" ], function(a, b, c, d) {
        var e = c._locale.weekdaysParse(a, d, c._strict);
        null != e ? b.d = e : j(c).invalidWeekday = a;
    }), _([ "d", "e", "E" ], function(a, b, c, d) {
        b[d] = r(a);
    });
    var fe = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), ge = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), he = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
    R("DDD", [ "DDDD", 3 ], "DDDo", "dayOfYear"), J("dayOfYear", "DDD"), W("DDD", qd), 
    W("DDDD", kd), $([ "DDD", "DDDD" ], function(a, b, c) {
        c._dayOfYear = r(a);
    }), R("H", [ "HH", 2 ], 0, "hour"), R("h", [ "hh", 2 ], 0, ic), R("hmm", 0, 0, function() {
        return "" + ic.apply(this) + Q(this.minutes(), 2);
    }), R("hmmss", 0, 0, function() {
        return "" + ic.apply(this) + Q(this.minutes(), 2) + Q(this.seconds(), 2);
    }), R("Hmm", 0, 0, function() {
        return "" + this.hours() + Q(this.minutes(), 2);
    }), R("Hmmss", 0, 0, function() {
        return "" + this.hours() + Q(this.minutes(), 2) + Q(this.seconds(), 2);
    }), jc("a", !0), jc("A", !1), J("hour", "h"), W("a", kc), W("A", kc), W("H", nd), 
    W("h", nd), W("HH", nd, jd), W("hh", nd, jd), W("hmm", od), W("hmmss", pd), W("Hmm", od), 
    W("Hmmss", pd), $([ "H", "HH" ], Ed), $([ "a", "A" ], function(a, b, c) {
        c._isPm = c._locale.isPM(a), c._meridiem = a;
    }), $([ "h", "hh" ], function(a, b, c) {
        b[Ed] = r(a), j(c).bigHour = !0;
    }), $("hmm", function(a, b, c) {
        var d = a.length - 2;
        b[Ed] = r(a.substr(0, d)), b[Fd] = r(a.substr(d)), j(c).bigHour = !0;
    }), $("hmmss", function(a, b, c) {
        var d = a.length - 4, e = a.length - 2;
        b[Ed] = r(a.substr(0, d)), b[Fd] = r(a.substr(d, 2)), b[Gd] = r(a.substr(e)), j(c).bigHour = !0;
    }), $("Hmm", function(a, b, c) {
        var d = a.length - 2;
        b[Ed] = r(a.substr(0, d)), b[Fd] = r(a.substr(d));
    }), $("Hmmss", function(a, b, c) {
        var d = a.length - 4, e = a.length - 2;
        b[Ed] = r(a.substr(0, d)), b[Fd] = r(a.substr(d, 2)), b[Gd] = r(a.substr(e));
    });
    var ie = /[ap]\.?m?\.?/i, je = M("Hours", !0);
    R("m", [ "mm", 2 ], 0, "minute"), J("minute", "m"), W("m", nd), W("mm", nd, jd), 
    $([ "m", "mm" ], Fd);
    var ke = M("Minutes", !1);
    R("s", [ "ss", 2 ], 0, "second"), J("second", "s"), W("s", nd), W("ss", nd, jd), 
    $([ "s", "ss" ], Gd);
    var le = M("Seconds", !1);
    R("S", 0, 0, function() {
        return ~~(this.millisecond() / 100);
    }), R(0, [ "SS", 2 ], 0, function() {
        return ~~(this.millisecond() / 10);
    }), R(0, [ "SSS", 3 ], 0, "millisecond"), R(0, [ "SSSS", 4 ], 0, function() {
        return 10 * this.millisecond();
    }), R(0, [ "SSSSS", 5 ], 0, function() {
        return 100 * this.millisecond();
    }), R(0, [ "SSSSSS", 6 ], 0, function() {
        return 1e3 * this.millisecond();
    }), R(0, [ "SSSSSSS", 7 ], 0, function() {
        return 1e4 * this.millisecond();
    }), R(0, [ "SSSSSSSS", 8 ], 0, function() {
        return 1e5 * this.millisecond();
    }), R(0, [ "SSSSSSSSS", 9 ], 0, function() {
        return 1e6 * this.millisecond();
    }), J("millisecond", "ms"), W("S", qd, id), W("SS", qd, jd), W("SSS", qd, kd);
    var me;
    for (me = "SSSS"; me.length <= 9; me += "S") W(me, td);
    for (me = "S"; me.length <= 9; me += "S") $(me, nc);
    var ne = M("Milliseconds", !1);
    R("z", 0, 0, "zoneAbbr"), R("zz", 0, 0, "zoneName");
    var oe = o.prototype;
    oe.add = ae, oe.calendar = jb, oe.clone = kb, oe.diff = rb, oe.endOf = Db, oe.format = vb, 
    oe.from = wb, oe.fromNow = xb, oe.to = yb, oe.toNow = zb, oe.get = P, oe.invalidAt = Mb, 
    oe.isAfter = lb, oe.isBefore = mb, oe.isBetween = nb, oe.isSame = ob, oe.isSameOrAfter = pb, 
    oe.isSameOrBefore = qb, oe.isValid = Kb, oe.lang = ce, oe.locale = Ab, oe.localeData = Bb, 
    oe.max = Xd, oe.min = Wd, oe.parsingFlags = Lb, oe.set = P, oe.startOf = Cb, oe.subtract = be, 
    oe.toArray = Hb, oe.toObject = Ib, oe.toDate = Gb, oe.toISOString = ub, oe.toJSON = Jb, 
    oe.toString = tb, oe.unix = Fb, oe.valueOf = Eb, oe.creationData = Nb, oe.year = Vd, 
    oe.isLeapYear = sa, oe.weekYear = Pb, oe.isoWeekYear = Qb, oe.quarter = oe.quarters = Vb, 
    oe.month = ga, oe.daysInMonth = ha, oe.week = oe.weeks = Zb, oe.isoWeek = oe.isoWeeks = $b, 
    oe.weeksInYear = Sb, oe.isoWeeksInYear = Rb, oe.date = ee, oe.day = oe.days = ec, 
    oe.weekday = fc, oe.isoWeekday = gc, oe.dayOfYear = hc, oe.hour = oe.hours = je, 
    oe.minute = oe.minutes = ke, oe.second = oe.seconds = le, oe.millisecond = oe.milliseconds = ne, 
    oe.utcOffset = Ta, oe.utc = Va, oe.local = Wa, oe.parseZone = Xa, oe.hasAlignedHourOffset = Ya, 
    oe.isDST = Za, oe.isDSTShifted = $a, oe.isLocal = _a, oe.isUtcOffset = ab, oe.isUtc = bb, 
    oe.isUTC = bb, oe.zoneAbbr = oc, oe.zoneName = pc, oe.dates = u("dates accessor is deprecated. Use date instead.", ee), 
    oe.months = u("months accessor is deprecated. Use month instead", ga), oe.years = u("years accessor is deprecated. Use year instead", Vd), 
    oe.zone = u("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", Ua);
    var pe = oe, qe = {
        sameDay: "[Today at] LT",
        nextDay: "[Tomorrow at] LT",
        nextWeek: "dddd [at] LT",
        lastDay: "[Yesterday at] LT",
        lastWeek: "[Last] dddd [at] LT",
        sameElse: "L"
    }, re = {
        LTS: "h:mm:ss A",
        LT: "h:mm A",
        L: "MM/DD/YYYY",
        LL: "MMMM D, YYYY",
        LLL: "MMMM D, YYYY h:mm A",
        LLLL: "dddd, MMMM D, YYYY h:mm A"
    }, se = "Invalid date", te = "%d", ue = /\d{1,2}/, ve = {
        future: "in %s",
        past: "%s ago",
        s: "a few seconds",
        m: "a minute",
        mm: "%d minutes",
        h: "an hour",
        hh: "%d hours",
        d: "a day",
        dd: "%d days",
        M: "a month",
        MM: "%d months",
        y: "a year",
        yy: "%d years"
    }, we = A.prototype;
    we._calendar = qe, we.calendar = sc, we._longDateFormat = re, we.longDateFormat = tc, 
    we._invalidDate = se, we.invalidDate = uc, we._ordinal = te, we.ordinal = vc, we._ordinalParse = ue, 
    we.preparse = wc, we.postformat = wc, we._relativeTime = ve, we.relativeTime = xc, 
    we.pastFuture = yc, we.set = y, we.months = ca, we._months = Ld, we.monthsShort = da, 
    we._monthsShort = Md, we.monthsParse = ea, we._monthsRegex = Od, we.monthsRegex = ja, 
    we._monthsShortRegex = Nd, we.monthsShortRegex = ia, we.week = Wb, we._week = de, 
    we.firstDayOfYear = Yb, we.firstDayOfWeek = Xb, we.weekdays = ac, we._weekdays = fe, 
    we.weekdaysMin = cc, we._weekdaysMin = he, we.weekdaysShort = bc, we._weekdaysShort = ge, 
    we.weekdaysParse = dc, we.isPM = lc, we._meridiemParse = ie, we.meridiem = mc, E("en", {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(a) {
            var b = a % 10, c = 1 === r(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
            return a + c;
        }
    }), a.lang = u("moment.lang is deprecated. Use moment.locale instead.", E), a.langData = u("moment.langData is deprecated. Use moment.localeData instead.", H);
    var xe = Math.abs, ye = Qc("ms"), ze = Qc("s"), Ae = Qc("m"), Be = Qc("h"), Ce = Qc("d"), De = Qc("w"), Ee = Qc("M"), Fe = Qc("y"), Ge = Sc("milliseconds"), He = Sc("seconds"), Ie = Sc("minutes"), Je = Sc("hours"), Ke = Sc("days"), Le = Sc("months"), Me = Sc("years"), Ne = Math.round, Oe = {
        s: 45,
        m: 45,
        h: 22,
        d: 26,
        M: 11
    }, Pe = Math.abs, Qe = Na.prototype;
    Qe.abs = Gc, Qe.add = Ic, Qe.subtract = Jc, Qe.as = Oc, Qe.asMilliseconds = ye, 
    Qe.asSeconds = ze, Qe.asMinutes = Ae, Qe.asHours = Be, Qe.asDays = Ce, Qe.asWeeks = De, 
    Qe.asMonths = Ee, Qe.asYears = Fe, Qe.valueOf = Pc, Qe._bubble = Lc, Qe.get = Rc, 
    Qe.milliseconds = Ge, Qe.seconds = He, Qe.minutes = Ie, Qe.hours = Je, Qe.days = Ke, 
    Qe.weeks = Tc, Qe.months = Le, Qe.years = Me, Qe.humanize = Xc, Qe.toISOString = Yc, 
    Qe.toString = Yc, Qe.toJSON = Yc, Qe.locale = Ab, Qe.localeData = Bb, Qe.toIsoString = u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Yc), 
    Qe.lang = ce, R("X", 0, 0, "unix"), R("x", 0, 0, "valueOf"), W("x", ud), W("X", xd), 
    $("X", function(a, b, c) {
        c._d = new Date(1e3 * parseFloat(a, 10));
    }), $("x", function(a, b, c) {
        c._d = new Date(r(a));
    }), a.version = "2.12.0", b(Ja), a.fn = pe, a.min = La, a.max = Ma, a.now = Yd, 
    a.utc = h, a.unix = qc, a.months = Bc, a.isDate = d, a.locale = E, a.invalid = l, 
    a.duration = cb, a.isMoment = p, a.weekdays = Dc, a.parseZone = rc, a.localeData = H, 
    a.isDuration = Oa, a.monthsShort = Cc, a.weekdaysMin = Fc, a.defineLocale = F, a.updateLocale = G, 
    a.locales = I, a.weekdaysShort = Ec, a.normalizeUnits = K, a.relativeTimeThreshold = Wc, 
    a.prototype = pe;
    var Re = a;
    return Re;
}), !function(a, b) {
    "function" == typeof define && define.amd && define.amd.dust === !0 ? define([ "dust.core" ], b) : "object" == typeof exports ? module.exports = b(require("dustjs-linkedin")) : b(a.dust);
}(this, function(a) {
    function b(b, c, d) {
        d = d || "INFO", b = b ? "{@" + b + "}: " : "", a.log(b + c, d);
    }
    function c(a) {
        l[a] || (b(a, "Deprecation warning: " + a + " is deprecated and will be removed in a future version of dustjs-helpers", "WARN"), 
        b(null, "For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#" + a.replace(/\W+/g, ""), "WARN"), 
        l[a] = !0);
    }
    function d(a) {
        return a.stack.tail && a.stack.tail.head && "undefined" != typeof a.stack.tail.head.__select__;
    }
    function e(a) {
        return d(a) && a.get("__select__");
    }
    function f(a, b) {
        var c, d = a.stack.head, e = a.rebase();
        a.stack && a.stack.tail && (e.stack = a.stack.tail);
        var f = {
            isPending: !1,
            isResolved: !1,
            isDeferredComplete: !1,
            deferreds: []
        };
        for (c in b) f[c] = b[c];
        return e.push({
            __select__: f
        }).push(d, a.stack.index, a.stack.of);
    }
    function g(a) {
        var b, c;
        if (a.isDeferredPending = !0, a.deferreds.length) for (a.isDeferredComplete = !0, 
        b = 0, c = a.deferreds.length; c > b; b++) a.deferreds[b]();
        a.isDeferredPending = !1;
    }
    function h(a, b) {
        return "function" == typeof b ? b.toString().replace(/(^\s+|\s+$)/gm, "").replace(/\n/gm, "").replace(/,\s*/gm, ", ").replace(/\)\{/gm, ") {") : b;
    }
    function i(a, b) {
        return function(c, d, e, f) {
            return j(c, d, e, f, a, b);
        };
    }
    function j(a, c, d, f, g, h) {
        var i, j, l, m, n = d.block, o = d["else"], p = e(c) || {};
        if (p.isResolved && !p.isDeferredPending) return a;
        if (f.hasOwnProperty("key")) j = f.key; else {
            if (!p.hasOwnProperty("key")) return b(g, "No key specified", "WARN"), a;
            j = p.key;
        }
        return m = f.type || p.type, j = k(c.resolve(j), m), l = k(c.resolve(f.value), m), 
        h(j, l) ? (p.isPending || (i = !0, p.isPending = !0), n && (a = a.render(n, c)), 
        i && (p.isResolved = !0)) : o && (a = a.render(o, c)), a;
    }
    function k(a, b) {
        switch (b && (b = b.toLowerCase()), b) {
          case "number":
            return +a;

          case "string":
            return String(a);

          case "boolean":
            return a = "false" === a ? !1 : a, Boolean(a);

          case "date":
            return new Date(a);
        }
        return a;
    }
    var l = {}, m = {
        tap: function(a, b, d) {
            return c("tap"), d.resolve(a);
        },
        sep: function(a, b, c) {
            var d = c.block;
            return b.stack.index === b.stack.of - 1 ? a : d ? d(a, b) : a;
        },
        first: function(a, b, c) {
            return 0 === b.stack.index ? c.block(a, b) : a;
        },
        last: function(a, b, c) {
            return b.stack.index === b.stack.of - 1 ? c.block(a, b) : a;
        },
        contextDump: function(a, c, d, e) {
            var f, g, i = c.resolve(e.to), j = c.resolve(e.key);
            switch (j) {
              case "full":
                f = c.stack;
                break;

              default:
                f = c.stack.head;
            }
            switch (g = JSON.stringify(f, h, 2), i) {
              case "console":
                b("contextDump", g);
                break;

              default:
                g = g.replace(/</g, "\\u003c"), a = a.write(g);
            }
            return a;
        },
        math: function(a, c, d, h) {
            var i, j = h.key, k = h.method, l = h.operand, m = h.round;
            if (!h.hasOwnProperty("key") || !h.method) return b("math", "`key` or `method` was not provided", "ERROR"), 
            a;
            switch (j = parseFloat(c.resolve(j)), l = parseFloat(c.resolve(l)), k) {
              case "mod":
                0 === l && b("math", "Division by 0", "ERROR"), i = j % l;
                break;

              case "add":
                i = j + l;
                break;

              case "subtract":
                i = j - l;
                break;

              case "multiply":
                i = j * l;
                break;

              case "divide":
                0 === l && b("math", "Division by 0", "ERROR"), i = j / l;
                break;

              case "ceil":
              case "floor":
              case "round":
              case "abs":
                i = Math[k](j);
                break;

              case "toint":
                i = parseInt(j, 10);
                break;

              default:
                b("math", "Method `" + k + "` is not supported", "ERROR");
            }
            return "undefined" != typeof i && (m && (i = Math.round(i)), d && d.block ? (c = f(c, {
                key: i
            }), a = a.render(d.block, c), g(e(c))) : a = a.write(i)), a;
        },
        select: function(a, c, d, h) {
            var i = d.block, j = {};
            return h.hasOwnProperty("key") && (j.key = c.resolve(h.key)), h.hasOwnProperty("type") && (j.type = h.type), 
            i ? (c = f(c, j), a = a.render(i, c), g(e(c))) : b("select", "Missing body block", "WARN"), 
            a;
        },
        eq: i("eq", function(a, b) {
            return a === b;
        }),
        ne: i("ne", function(a, b) {
            return a !== b;
        }),
        lt: i("lt", function(a, b) {
            return b > a;
        }),
        lte: i("lte", function(a, b) {
            return b >= a;
        }),
        gt: i("gt", function(a, b) {
            return a > b;
        }),
        gte: i("gte", function(a, b) {
            return a >= b;
        }),
        any: function(a, c, d, f) {
            var g = e(c);
            return g ? g.isDeferredComplete ? b("any", "Must not be nested inside {@any} or {@none} block", "ERROR") : a = a.map(function(a) {
                g.deferreds.push(function() {
                    g.isResolved && (a = a.render(d.block, c)), a.end();
                });
            }) : b("any", "Must be used inside a {@select} block", "ERROR"), a;
        },
        none: function(a, c, d, f) {
            var g = e(c);
            return g ? g.isDeferredComplete ? b("none", "Must not be nested inside {@any} or {@none} block", "ERROR") : a = a.map(function(a) {
                g.deferreds.push(function() {
                    g.isResolved || (a = a.render(d.block, c)), a.end();
                });
            }) : b("none", "Must be used inside a {@select} block", "ERROR"), a;
        },
        size: function(b, c, d, e) {
            var f, g, h = e.key;
            if (h = c.resolve(e.key), h && h !== !0) if (a.isArray(h)) f = h.length; else if (!isNaN(parseFloat(h)) && isFinite(h)) f = h; else if ("object" == typeof h) {
                f = 0;
                for (g in h) h.hasOwnProperty(g) && f++;
            } else f = (h + "").length; else f = 0;
            return b.write(f);
        }
    };
    for (var n in m) a.helpers[n] = m[n];
    return a;
}), function(a, b) {
    "use strict";
    "function" == typeof define && define.amd ? define([ "exports" ], function(c) {
        b(c), a.Path = c;
    }) : b("object" == typeof exports ? exports : a.Path = {});
}(this, function(a) {
    "use strict";
    var b = a;
    b.version = "0.10.0", b.map = function(a) {
        return b.routes.defined.hasOwnProperty(a) ? b.routes.defined[a] : new b.core.route(a);
    }, b.root = function(a) {
        b.routes.root = a;
    }, b.rescue = function(a) {
        b.routes.rescue = a;
    }, b.history = {
        initial: {},
        pushState: function(a, c, d) {
            b.history.supported ? b.dispatch(d) && history.pushState(a, c, d) : b.history.fallback && (window.location.hash = "#" + d);
        },
        popState: function(a) {
            var c = !b.history.initial.popped && location.href === b.history.initial.URL;
            b.history.initial.popped = !0, c || b.dispatch(document.location.pathname);
        },
        listen: function(a) {
            if (b.history.supported = !(!window.history || !window.history.pushState), b.history.fallback = a, 
            b.history.supported) b.history.initial.popped = "state" in window.history, b.history.initial.URL = location.href, 
            window.onpopstate = b.history.popState; else if (b.history.fallback) {
                for (var c in b.routes.defined) "#" !== c.charAt(0) && (b.routes.defined["#" + c] = b.routes.defined[c], 
                b.routes.defined["#" + c].path = "#" + c);
                b.listen();
            }
        }
    }, b.match = function(a, c) {
        var d, e, f, g, h, i = {}, j = null;
        for (j in b.routes.defined) if (null !== j && void 0 !== j) for (j = b.routes.defined[j], 
        d = j.partition(), g = 0; g < d.length; g += 1) {
            if (e = d[g], h = a, e.search(/:/) > 0) for (f = 0; f < e.split("/").length; f += 1) f < h.split("/").length && ":" === e.split("/")[f].charAt(0) && (i[e.split("/")[f].replace(/:/, "")] = h.split("/")[f], 
            h = h.replace(h.split("/")[f], e.split("/")[f]));
            if (e === h) return c && (j.params = i), j;
        }
        return null;
    }, b.dispatch = function(a) {
        var c, d;
        if (b.routes.current !== a) {
            if (b.routes.previous = b.routes.current, b.routes.current = a, d = b.match(a, !0), 
            b.routes.previous && (c = b.match(b.routes.previous), null !== c && null !== c.do_exit && c.do_exit()), 
            null !== d) return d.run(), !0;
            null !== b.routes.rescue && b.routes.rescue();
        }
    }, b.listen = function() {
        var a = function() {
            b.dispatch(location.hash);
        };
        "" === location.hash && null !== b.routes.root && (location.hash = b.routes.root), 
        "onhashchange" in window && (!document.documentMode || document.documentMode >= 8) ? window.onhashchange = a : setInterval(a, 50), 
        "" !== location.hash && b.dispatch(location.hash);
    }, b.core = {
        route: function(a) {
            this.path = a, this.action = null, this.do_enter = [], this.do_exit = null, this.params = {}, 
            b.routes.defined[a] = this;
        }
    }, b.routes = {
        current: null,
        root: null,
        rescue: null,
        previous: null,
        defined: {}
    }, b.core.route.prototype = {
        to: function(a) {
            return this.action = a, this;
        },
        enter: function(a) {
            return a instanceof Array ? this.do_enter = this.do_enter.concat(a) : this.do_enter.push(a), 
            this;
        },
        exit: function(a) {
            return this.do_exit = a, this;
        },
        partition: function() {
            for (var a, b, c = [], d = [], e = /\(([^}]+?)\)/g; a = e.exec(this.path); ) c.push(a[1]);
            for (d.push(this.path.split("(")[0]), b = 0; b < c.length; b += 1) d.push(d[d.length - 1] + c[b]);
            return d;
        },
        run: function() {
            var a, c, d = !1;
            if (b.routes.defined[this.path].hasOwnProperty("do_enter") && b.routes.defined[this.path].do_enter.length > 0) for (a = 0; a < b.routes.defined[this.path].do_enter.length; a += 1) if (c = b.routes.defined[this.path].do_enter[a].apply(this, null), 
            c === !1) {
                d = !0;
                break;
            }
            d || b.routes.defined[this.path].action();
        }
    };
});

var THREE = {
    REVISION: "75"
};

"function" == typeof define && define.amd ? define("three", THREE) : "undefined" != typeof exports && "undefined" != typeof module && (module.exports = THREE), 
void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)), void 0 === Math.sign && (Math.sign = function(a) {
    return 0 > a ? -1 : a > 0 ? 1 : +a;
}), void 0 === Function.prototype.name && void 0 !== Object.defineProperty && Object.defineProperty(Function.prototype, "name", {
    get: function() {
        return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];
    }
}), void 0 === Object.assign && Object.defineProperty(Object, "assign", {
    writable: !0,
    configurable: !0,
    value: function(a) {
        "use strict";
        if (void 0 === a || null === a) throw new TypeError("Cannot convert first argument to object");
        for (var b = Object(a), c = 1, d = arguments.length; c !== d; ++c) {
            var e = arguments[c];
            if (void 0 !== e && null !== e) {
                e = Object(e);
                for (var f = Object.keys(e), g = 0, h = f.length; g !== h; ++g) {
                    var i = f[g], j = Object.getOwnPropertyDescriptor(e, i);
                    void 0 !== j && j.enumerable && (b[i] = e[i]);
                }
            }
        }
        return b;
    }
}), THREE.MOUSE = {
    LEFT: 0,
    MIDDLE: 1,
    RIGHT: 2
}, THREE.CullFaceNone = 0, THREE.CullFaceBack = 1, THREE.CullFaceFront = 2, THREE.CullFaceFrontBack = 3, 
THREE.FrontFaceDirectionCW = 0, THREE.FrontFaceDirectionCCW = 1, THREE.BasicShadowMap = 0, 
THREE.PCFShadowMap = 1, THREE.PCFSoftShadowMap = 2, THREE.FrontSide = 0, THREE.BackSide = 1, 
THREE.DoubleSide = 2, THREE.FlatShading = 1, THREE.SmoothShading = 2, THREE.NoColors = 0, 
THREE.FaceColors = 1, THREE.VertexColors = 2, THREE.NoBlending = 0, THREE.NormalBlending = 1, 
THREE.AdditiveBlending = 2, THREE.SubtractiveBlending = 3, THREE.MultiplyBlending = 4, 
THREE.CustomBlending = 5, THREE.AddEquation = 100, THREE.SubtractEquation = 101, 
THREE.ReverseSubtractEquation = 102, THREE.MinEquation = 103, THREE.MaxEquation = 104, 
THREE.ZeroFactor = 200, THREE.OneFactor = 201, THREE.SrcColorFactor = 202, THREE.OneMinusSrcColorFactor = 203, 
THREE.SrcAlphaFactor = 204, THREE.OneMinusSrcAlphaFactor = 205, THREE.DstAlphaFactor = 206, 
THREE.OneMinusDstAlphaFactor = 207, THREE.DstColorFactor = 208, THREE.OneMinusDstColorFactor = 209, 
THREE.SrcAlphaSaturateFactor = 210, THREE.NeverDepth = 0, THREE.AlwaysDepth = 1, 
THREE.LessDepth = 2, THREE.LessEqualDepth = 3, THREE.EqualDepth = 4, THREE.GreaterEqualDepth = 5, 
THREE.GreaterDepth = 6, THREE.NotEqualDepth = 7, THREE.MultiplyOperation = 0, THREE.MixOperation = 1, 
THREE.AddOperation = 2, THREE.NoToneMapping = 0, THREE.LinearToneMapping = 1, THREE.ReinhardToneMapping = 2, 
THREE.Uncharted2ToneMapping = 3, THREE.CineonToneMapping = 4, THREE.UVMapping = 300, 
THREE.CubeReflectionMapping = 301, THREE.CubeRefractionMapping = 302, THREE.EquirectangularReflectionMapping = 303, 
THREE.EquirectangularRefractionMapping = 304, THREE.SphericalReflectionMapping = 305, 
THREE.CubeUVReflectionMapping = 306, THREE.CubeUVRefractionMapping = 307, THREE.RepeatWrapping = 1e3, 
THREE.ClampToEdgeWrapping = 1001, THREE.MirroredRepeatWrapping = 1002, THREE.NearestFilter = 1003, 
THREE.NearestMipMapNearestFilter = 1004, THREE.NearestMipMapLinearFilter = 1005, 
THREE.LinearFilter = 1006, THREE.LinearMipMapNearestFilter = 1007, THREE.LinearMipMapLinearFilter = 1008, 
THREE.UnsignedByteType = 1009, THREE.ByteType = 1010, THREE.ShortType = 1011, THREE.UnsignedShortType = 1012, 
THREE.IntType = 1013, THREE.UnsignedIntType = 1014, THREE.FloatType = 1015, THREE.HalfFloatType = 1025, 
THREE.UnsignedShort4444Type = 1016, THREE.UnsignedShort5551Type = 1017, THREE.UnsignedShort565Type = 1018, 
THREE.AlphaFormat = 1019, THREE.RGBFormat = 1020, THREE.RGBAFormat = 1021, THREE.LuminanceFormat = 1022, 
THREE.LuminanceAlphaFormat = 1023, THREE.RGBEFormat = THREE.RGBAFormat, THREE.RGB_S3TC_DXT1_Format = 2001, 
THREE.RGBA_S3TC_DXT1_Format = 2002, THREE.RGBA_S3TC_DXT3_Format = 2003, THREE.RGBA_S3TC_DXT5_Format = 2004, 
THREE.RGB_PVRTC_4BPPV1_Format = 2100, THREE.RGB_PVRTC_2BPPV1_Format = 2101, THREE.RGBA_PVRTC_4BPPV1_Format = 2102, 
THREE.RGBA_PVRTC_2BPPV1_Format = 2103, THREE.RGB_ETC1_Format = 2151, THREE.LoopOnce = 2200, 
THREE.LoopRepeat = 2201, THREE.LoopPingPong = 2202, THREE.InterpolateDiscrete = 2300, 
THREE.InterpolateLinear = 2301, THREE.InterpolateSmooth = 2302, THREE.ZeroCurvatureEnding = 2400, 
THREE.ZeroSlopeEnding = 2401, THREE.WrapAroundEnding = 2402, THREE.TrianglesDrawMode = 0, 
THREE.TriangleStripDrawMode = 1, THREE.TriangleFanDrawMode = 2, THREE.LinearEncoding = 3e3, 
THREE.sRGBEncoding = 3001, THREE.GammaEncoding = 3007, THREE.RGBEEncoding = 3002, 
THREE.LogLuvEncoding = 3003, THREE.RGBM7Encoding = 3004, THREE.RGBM16Encoding = 3005, 
THREE.RGBDEncoding = 3006, THREE.Color = function(a) {
    return 3 === arguments.length ? this.fromArray(arguments) : this.set(a);
}, THREE.Color.prototype = {
    constructor: THREE.Color,
    r: 1,
    g: 1,
    b: 1,
    set: function(a) {
        return a instanceof THREE.Color ? this.copy(a) : "number" == typeof a ? this.setHex(a) : "string" == typeof a && this.setStyle(a), 
        this;
    },
    setScalar: function(a) {
        this.r = a, this.g = a, this.b = a;
    },
    setHex: function(a) {
        return a = Math.floor(a), this.r = (a >> 16 & 255) / 255, this.g = (a >> 8 & 255) / 255, 
        this.b = (255 & a) / 255, this;
    },
    setRGB: function(a, b, c) {
        return this.r = a, this.g = b, this.b = c, this;
    },
    setHSL: function() {
        function a(a, b, c) {
            return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a;
        }
        return function(b, c, d) {
            if (b = THREE.Math.euclideanModulo(b, 1), c = THREE.Math.clamp(c, 0, 1), d = THREE.Math.clamp(d, 0, 1), 
            0 === c) this.r = this.g = this.b = d; else {
                var e = .5 >= d ? d * (1 + c) : d + c - d * c, f = 2 * d - e;
                this.r = a(f, e, b + 1 / 3), this.g = a(f, e, b), this.b = a(f, e, b - 1 / 3);
            }
            return this;
        };
    }(),
    setStyle: function(a) {
        function b(b) {
            void 0 !== b && parseFloat(b) < 1 && console.warn("THREE.Color: Alpha component of " + a + " will be ignored.");
        }
        var c;
        if (c = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)) {
            var d, e = c[1], f = c[2];
            switch (e) {
              case "rgb":
              case "rgba":
                if (d = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f)) return this.r = Math.min(255, parseInt(d[1], 10)) / 255, 
                this.g = Math.min(255, parseInt(d[2], 10)) / 255, this.b = Math.min(255, parseInt(d[3], 10)) / 255, 
                b(d[5]), this;
                if (d = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f)) return this.r = Math.min(100, parseInt(d[1], 10)) / 100, 
                this.g = Math.min(100, parseInt(d[2], 10)) / 100, this.b = Math.min(100, parseInt(d[3], 10)) / 100, 
                b(d[5]), this;
                break;

              case "hsl":
              case "hsla":
                if (d = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(f)) {
                    var g = parseFloat(d[1]) / 360, h = parseInt(d[2], 10) / 100, i = parseInt(d[3], 10) / 100;
                    return b(d[5]), this.setHSL(g, h, i);
                }
            }
        } else if (c = /^\#([A-Fa-f0-9]+)$/.exec(a)) {
            var j = c[1], k = j.length;
            if (3 === k) return this.r = parseInt(j.charAt(0) + j.charAt(0), 16) / 255, this.g = parseInt(j.charAt(1) + j.charAt(1), 16) / 255, 
            this.b = parseInt(j.charAt(2) + j.charAt(2), 16) / 255, this;
            if (6 === k) return this.r = parseInt(j.charAt(0) + j.charAt(1), 16) / 255, this.g = parseInt(j.charAt(2) + j.charAt(3), 16) / 255, 
            this.b = parseInt(j.charAt(4) + j.charAt(5), 16) / 255, this;
        }
        if (a && a.length > 0) {
            var j = THREE.ColorKeywords[a];
            void 0 !== j ? this.setHex(j) : console.warn("THREE.Color: Unknown color " + a);
        }
        return this;
    },
    clone: function() {
        return new this.constructor(this.r, this.g, this.b);
    },
    copy: function(a) {
        return this.r = a.r, this.g = a.g, this.b = a.b, this;
    },
    copyGammaToLinear: function(a, b) {
        return void 0 === b && (b = 2), this.r = Math.pow(a.r, b), this.g = Math.pow(a.g, b), 
        this.b = Math.pow(a.b, b), this;
    },
    copyLinearToGamma: function(a, b) {
        void 0 === b && (b = 2);
        var c = b > 0 ? 1 / b : 1;
        return this.r = Math.pow(a.r, c), this.g = Math.pow(a.g, c), this.b = Math.pow(a.b, c), 
        this;
    },
    convertGammaToLinear: function() {
        var a = this.r, b = this.g, c = this.b;
        return this.r = a * a, this.g = b * b, this.b = c * c, this;
    },
    convertLinearToGamma: function() {
        return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), 
        this;
    },
    getHex: function() {
        return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0;
    },
    getHexString: function() {
        return ("000000" + this.getHex().toString(16)).slice(-6);
    },
    getHSL: function(a) {
        var b, c, d = a || {
            h: 0,
            s: 0,
            l: 0
        }, e = this.r, f = this.g, g = this.b, h = Math.max(e, f, g), i = Math.min(e, f, g), j = (i + h) / 2;
        if (i === h) b = 0, c = 0; else {
            var k = h - i;
            switch (c = .5 >= j ? k / (h + i) : k / (2 - h - i), h) {
              case e:
                b = (f - g) / k + (g > f ? 6 : 0);
                break;

              case f:
                b = (g - e) / k + 2;
                break;

              case g:
                b = (e - f) / k + 4;
            }
            b /= 6;
        }
        return d.h = b, d.s = c, d.l = j, d;
    },
    getStyle: function() {
        return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")";
    },
    offsetHSL: function(a, b, c) {
        var d = this.getHSL();
        return d.h += a, d.s += b, d.l += c, this.setHSL(d.h, d.s, d.l), this;
    },
    add: function(a) {
        return this.r += a.r, this.g += a.g, this.b += a.b, this;
    },
    addColors: function(a, b) {
        return this.r = a.r + b.r, this.g = a.g + b.g, this.b = a.b + b.b, this;
    },
    addScalar: function(a) {
        return this.r += a, this.g += a, this.b += a, this;
    },
    multiply: function(a) {
        return this.r *= a.r, this.g *= a.g, this.b *= a.b, this;
    },
    multiplyScalar: function(a) {
        return this.r *= a, this.g *= a, this.b *= a, this;
    },
    lerp: function(a, b) {
        return this.r += (a.r - this.r) * b, this.g += (a.g - this.g) * b, this.b += (a.b - this.b) * b, 
        this;
    },
    equals: function(a) {
        return a.r === this.r && a.g === this.g && a.b === this.b;
    },
    fromArray: function(a, b) {
        return void 0 === b && (b = 0), this.r = a[b], this.g = a[b + 1], this.b = a[b + 2], 
        this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.r, a[b + 1] = this.g, 
        a[b + 2] = this.b, a;
    }
}, THREE.ColorKeywords = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
}, THREE.Quaternion = function(a, b, c, d) {
    this._x = a || 0, this._y = b || 0, this._z = c || 0, this._w = void 0 !== d ? d : 1;
}, THREE.Quaternion.prototype = {
    constructor: THREE.Quaternion,
    get x() {
        return this._x;
    },
    set x(a) {
        this._x = a, this.onChangeCallback();
    },
    get y() {
        return this._y;
    },
    set y(a) {
        this._y = a, this.onChangeCallback();
    },
    get z() {
        return this._z;
    },
    set z(a) {
        this._z = a, this.onChangeCallback();
    },
    get w() {
        return this._w;
    },
    set w(a) {
        this._w = a, this.onChangeCallback();
    },
    set: function(a, b, c, d) {
        return this._x = a, this._y = b, this._z = c, this._w = d, this.onChangeCallback(), 
        this;
    },
    clone: function() {
        return new this.constructor(this._x, this._y, this._z, this._w);
    },
    copy: function(a) {
        return this._x = a.x, this._y = a.y, this._z = a.z, this._w = a.w, this.onChangeCallback(), 
        this;
    },
    setFromEuler: function(a, b) {
        if (a instanceof THREE.Euler == !1) throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
        var c = Math.cos(a._x / 2), d = Math.cos(a._y / 2), e = Math.cos(a._z / 2), f = Math.sin(a._x / 2), g = Math.sin(a._y / 2), h = Math.sin(a._z / 2), i = a.order;
        return "XYZ" === i ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, 
        this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "YXZ" === i ? (this._x = f * d * e + c * g * h, 
        this._y = c * g * e - f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "ZXY" === i ? (this._x = f * d * e - c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "ZYX" === i ? (this._x = f * d * e - c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "YZX" === i ? (this._x = f * d * e + c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e - f * g * h) : "XZY" === i && (this._x = f * d * e - c * g * h, 
        this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e + f * g * h), 
        b !== !1 && this.onChangeCallback(), this;
    },
    setFromAxisAngle: function(a, b) {
        var c = b / 2, d = Math.sin(c);
        return this._x = a.x * d, this._y = a.y * d, this._z = a.z * d, this._w = Math.cos(c), 
        this.onChangeCallback(), this;
    },
    setFromRotationMatrix: function(a) {
        var b, c = a.elements, d = c[0], e = c[4], f = c[8], g = c[1], h = c[5], i = c[9], j = c[2], k = c[6], l = c[10], m = d + h + l;
        return m > 0 ? (b = .5 / Math.sqrt(m + 1), this._w = .25 / b, this._x = (k - i) * b, 
        this._y = (f - j) * b, this._z = (g - e) * b) : d > h && d > l ? (b = 2 * Math.sqrt(1 + d - h - l), 
        this._w = (k - i) / b, this._x = .25 * b, this._y = (e + g) / b, this._z = (f + j) / b) : h > l ? (b = 2 * Math.sqrt(1 + h - d - l), 
        this._w = (f - j) / b, this._x = (e + g) / b, this._y = .25 * b, this._z = (i + k) / b) : (b = 2 * Math.sqrt(1 + l - d - h), 
        this._w = (g - e) / b, this._x = (f + j) / b, this._y = (i + k) / b, this._z = .25 * b), 
        this.onChangeCallback(), this;
    },
    setFromUnitVectors: function() {
        var a, b, c = 1e-6;
        return function(d, e) {
            return void 0 === a && (a = new THREE.Vector3()), b = d.dot(e) + 1, c > b ? (b = 0, 
            Math.abs(d.x) > Math.abs(d.z) ? a.set(-d.y, d.x, 0) : a.set(0, -d.z, d.y)) : a.crossVectors(d, e), 
            this._x = a.x, this._y = a.y, this._z = a.z, this._w = b, this.normalize(), this;
        };
    }(),
    inverse: function() {
        return this.conjugate().normalize(), this;
    },
    conjugate: function() {
        return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this;
    },
    dot: function(a) {
        return this._x * a._x + this._y * a._y + this._z * a._z + this._w * a._w;
    },
    lengthSq: function() {
        return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
    },
    length: function() {
        return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
    },
    normalize: function() {
        var a = this.length();
        return 0 === a ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (a = 1 / a, 
        this._x = this._x * a, this._y = this._y * a, this._z = this._z * a, this._w = this._w * a), 
        this.onChangeCallback(), this;
    },
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), 
        this.multiplyQuaternions(a, b)) : this.multiplyQuaternions(this, a);
    },
    multiplyQuaternions: function(a, b) {
        var c = a._x, d = a._y, e = a._z, f = a._w, g = b._x, h = b._y, i = b._z, j = b._w;
        return this._x = c * j + f * g + d * i - e * h, this._y = d * j + f * h + e * g - c * i, 
        this._z = e * j + f * i + c * h - d * g, this._w = f * j - c * g - d * h - e * i, 
        this.onChangeCallback(), this;
    },
    slerp: function(a, b) {
        if (0 === b) return this;
        if (1 === b) return this.copy(a);
        var c = this._x, d = this._y, e = this._z, f = this._w, g = f * a._w + c * a._x + d * a._y + e * a._z;
        if (0 > g ? (this._w = -a._w, this._x = -a._x, this._y = -a._y, this._z = -a._z, 
        g = -g) : this.copy(a), g >= 1) return this._w = f, this._x = c, this._y = d, this._z = e, 
        this;
        var h = Math.sqrt(1 - g * g);
        if (Math.abs(h) < .001) return this._w = .5 * (f + this._w), this._x = .5 * (c + this._x), 
        this._y = .5 * (d + this._y), this._z = .5 * (e + this._z), this;
        var i = Math.atan2(h, g), j = Math.sin((1 - b) * i) / h, k = Math.sin(b * i) / h;
        return this._w = f * j + this._w * k, this._x = c * j + this._x * k, this._y = d * j + this._y * k, 
        this._z = e * j + this._z * k, this.onChangeCallback(), this;
    },
    equals: function(a) {
        return a._x === this._x && a._y === this._y && a._z === this._z && a._w === this._w;
    },
    fromArray: function(a, b) {
        return void 0 === b && (b = 0), this._x = a[b], this._y = a[b + 1], this._z = a[b + 2], 
        this._w = a[b + 3], this.onChangeCallback(), this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this._x, a[b + 1] = this._y, 
        a[b + 2] = this._z, a[b + 3] = this._w, a;
    },
    onChange: function(a) {
        return this.onChangeCallback = a, this;
    },
    onChangeCallback: function() {}
}, Object.assign(THREE.Quaternion, {
    slerp: function(a, b, c, d) {
        return c.copy(a).slerp(b, d);
    },
    slerpFlat: function(a, b, c, d, e, f, g) {
        var h = c[d + 0], i = c[d + 1], j = c[d + 2], k = c[d + 3], l = e[f + 0], m = e[f + 1], n = e[f + 2], o = e[f + 3];
        if (k !== o || h !== l || i !== m || j !== n) {
            var p = 1 - g, q = h * l + i * m + j * n + k * o, r = q >= 0 ? 1 : -1, s = 1 - q * q;
            if (s > Number.EPSILON) {
                var t = Math.sqrt(s), u = Math.atan2(t, q * r);
                p = Math.sin(p * u) / t, g = Math.sin(g * u) / t;
            }
            var v = g * r;
            if (h = h * p + l * v, i = i * p + m * v, j = j * p + n * v, k = k * p + o * v, 
            p === 1 - g) {
                var w = 1 / Math.sqrt(h * h + i * i + j * j + k * k);
                h *= w, i *= w, j *= w, k *= w;
            }
        }
        a[b] = h, a[b + 1] = i, a[b + 2] = j, a[b + 3] = k;
    }
}), THREE.Vector2 = function(a, b) {
    this.x = a || 0, this.y = b || 0;
}, THREE.Vector2.prototype = {
    constructor: THREE.Vector2,
    get width() {
        return this.x;
    },
    set width(a) {
        this.x = a;
    },
    get height() {
        return this.y;
    },
    set height(a) {
        this.y = a;
    },
    set: function(a, b) {
        return this.x = a, this.y = b, this;
    },
    setScalar: function(a) {
        return this.x = a, this.y = a, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    clone: function() {
        return new this.constructor(this.x, this.y);
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this);
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this;
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this;
    },
    addScaledVector: function(a, b) {
        return this.x += a.x * b, this.y += a.y * b, this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this);
    },
    subScalar: function(a) {
        return this.x -= a, this.y -= a, this;
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this;
    },
    multiply: function(a) {
        return this.x *= a.x, this.y *= a.y, this;
    },
    multiplyScalar: function(a) {
        return isFinite(a) ? (this.x *= a, this.y *= a) : (this.x = 0, this.y = 0), this;
    },
    divide: function(a) {
        return this.x /= a.x, this.y /= a.y, this;
    },
    divideScalar: function(a) {
        return this.multiplyScalar(1 / a);
    },
    min: function(a) {
        return this.x = Math.min(this.x, a.x), this.y = Math.min(this.y, a.y), this;
    },
    max: function(a) {
        return this.x = Math.max(this.x, a.x), this.y = Math.max(this.y, a.y), this;
    },
    clamp: function(a, b) {
        return this.x = Math.max(a.x, Math.min(b.x, this.x)), this.y = Math.max(a.y, Math.min(b.y, this.y)), 
        this;
    },
    clampScalar: function() {
        var a, b;
        return function(c, d) {
            return void 0 === a && (a = new THREE.Vector2(), b = new THREE.Vector2()), a.set(c, c), 
            b.set(d, d), this.clamp(a, b);
        };
    }(),
    clampLength: function(a, b) {
        var c = this.length();
        return this.multiplyScalar(Math.max(a, Math.min(b, c)) / c), this;
    },
    floor: function() {
        return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
    },
    ceil: function() {
        return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
    },
    round: function() {
        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
    },
    roundToZero: function() {
        return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
        this;
    },
    negate: function() {
        return this.x = -this.x, this.y = -this.y, this;
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
    },
    lengthManhattan: function() {
        return Math.abs(this.x) + Math.abs(this.y);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    angle: function() {
        var a = Math.atan2(this.y, this.x);
        return 0 > a && (a += 2 * Math.PI), a;
    },
    distanceTo: function(a) {
        return Math.sqrt(this.distanceToSquared(a));
    },
    distanceToSquared: function(a) {
        var b = this.x - a.x, c = this.y - a.y;
        return b * b + c * c;
    },
    setLength: function(a) {
        return this.multiplyScalar(a / this.length());
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this;
    },
    lerpVectors: function(a, b, c) {
        return this.subVectors(b, a).multiplyScalar(c).add(a), this;
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y;
    },
    fromArray: function(a, b) {
        return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, 
        a;
    },
    fromAttribute: function(a, b, c) {
        return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], 
        this;
    },
    rotateAround: function(a, b) {
        var c = Math.cos(b), d = Math.sin(b), e = this.x - a.x, f = this.y - a.y;
        return this.x = e * c - f * d + a.x, this.y = e * d + f * c + a.y, this;
    }
}, THREE.Vector3 = function(a, b, c) {
    this.x = a || 0, this.y = b || 0, this.z = c || 0;
}, THREE.Vector3.prototype = {
    constructor: THREE.Vector3,
    set: function(a, b, c) {
        return this.x = a, this.y = b, this.z = c, this;
    },
    setScalar: function(a) {
        return this.x = a, this.y = a, this.z = a, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setZ: function(a) {
        return this.z = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          case 2:
            this.z = b;
            break;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          case 2:
            return this.z;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    clone: function() {
        return new this.constructor(this.x, this.y, this.z);
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this.z = a.z, this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this);
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this.z += a, this;
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this;
    },
    addScaledVector: function(a, b) {
        return this.x += a.x * b, this.y += a.y * b, this.z += a.z * b, this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this);
    },
    subScalar: function(a) {
        return this.x -= a, this.y -= a, this.z -= a, this;
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this;
    },
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), 
        this.multiplyVectors(a, b)) : (this.x *= a.x, this.y *= a.y, this.z *= a.z, this);
    },
    multiplyScalar: function(a) {
        return isFinite(a) ? (this.x *= a, this.y *= a, this.z *= a) : (this.x = 0, this.y = 0, 
        this.z = 0), this;
    },
    multiplyVectors: function(a, b) {
        return this.x = a.x * b.x, this.y = a.y * b.y, this.z = a.z * b.z, this;
    },
    applyEuler: function() {
        var a;
        return function(b) {
            return b instanceof THREE.Euler == !1 && console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), 
            void 0 === a && (a = new THREE.Quaternion()), this.applyQuaternion(a.setFromEuler(b)), 
            this;
        };
    }(),
    applyAxisAngle: function() {
        var a;
        return function(b, c) {
            return void 0 === a && (a = new THREE.Quaternion()), this.applyQuaternion(a.setFromAxisAngle(b, c)), 
            this;
        };
    }(),
    applyMatrix3: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.elements;
        return this.x = e[0] * b + e[3] * c + e[6] * d, this.y = e[1] * b + e[4] * c + e[7] * d, 
        this.z = e[2] * b + e[5] * c + e[8] * d, this;
    },
    applyMatrix4: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.elements;
        return this.x = e[0] * b + e[4] * c + e[8] * d + e[12], this.y = e[1] * b + e[5] * c + e[9] * d + e[13], 
        this.z = e[2] * b + e[6] * c + e[10] * d + e[14], this;
    },
    applyProjection: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.elements, f = 1 / (e[3] * b + e[7] * c + e[11] * d + e[15]);
        return this.x = (e[0] * b + e[4] * c + e[8] * d + e[12]) * f, this.y = (e[1] * b + e[5] * c + e[9] * d + e[13]) * f, 
        this.z = (e[2] * b + e[6] * c + e[10] * d + e[14]) * f, this;
    },
    applyQuaternion: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.x, f = a.y, g = a.z, h = a.w, i = h * b + f * d - g * c, j = h * c + g * b - e * d, k = h * d + e * c - f * b, l = -e * b - f * c - g * d;
        return this.x = i * h + l * -e + j * -g - k * -f, this.y = j * h + l * -f + k * -e - i * -g, 
        this.z = k * h + l * -g + i * -f - j * -e, this;
    },
    project: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.multiplyMatrices(b.projectionMatrix, a.getInverse(b.matrixWorld)), 
            this.applyProjection(a);
        };
    }(),
    unproject: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.multiplyMatrices(b.matrixWorld, a.getInverse(b.projectionMatrix)), 
            this.applyProjection(a);
        };
    }(),
    transformDirection: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.elements;
        return this.x = e[0] * b + e[4] * c + e[8] * d, this.y = e[1] * b + e[5] * c + e[9] * d, 
        this.z = e[2] * b + e[6] * c + e[10] * d, this.normalize(), this;
    },
    divide: function(a) {
        return this.x /= a.x, this.y /= a.y, this.z /= a.z, this;
    },
    divideScalar: function(a) {
        return this.multiplyScalar(1 / a);
    },
    min: function(a) {
        return this.x = Math.min(this.x, a.x), this.y = Math.min(this.y, a.y), this.z = Math.min(this.z, a.z), 
        this;
    },
    max: function(a) {
        return this.x = Math.max(this.x, a.x), this.y = Math.max(this.y, a.y), this.z = Math.max(this.z, a.z), 
        this;
    },
    clamp: function(a, b) {
        return this.x = Math.max(a.x, Math.min(b.x, this.x)), this.y = Math.max(a.y, Math.min(b.y, this.y)), 
        this.z = Math.max(a.z, Math.min(b.z, this.z)), this;
    },
    clampScalar: function() {
        var a, b;
        return function(c, d) {
            return void 0 === a && (a = new THREE.Vector3(), b = new THREE.Vector3()), a.set(c, c, c), 
            b.set(d, d, d), this.clamp(a, b);
        };
    }(),
    clampLength: function(a, b) {
        var c = this.length();
        return this.multiplyScalar(Math.max(a, Math.min(b, c)) / c), this;
    },
    floor: function() {
        return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), 
        this;
    },
    ceil: function() {
        return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), 
        this;
    },
    round: function() {
        return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), 
        this;
    },
    roundToZero: function() {
        return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
        this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
    },
    negate: function() {
        return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y + this.z * this.z;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
    },
    lengthManhattan: function() {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    setLength: function(a) {
        return this.multiplyScalar(a / this.length());
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, 
        this;
    },
    lerpVectors: function(a, b, c) {
        return this.subVectors(b, a).multiplyScalar(c).add(a), this;
    },
    cross: function(a, b) {
        if (void 0 !== b) return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), 
        this.crossVectors(a, b);
        var c = this.x, d = this.y, e = this.z;
        return this.x = d * a.z - e * a.y, this.y = e * a.x - c * a.z, this.z = c * a.y - d * a.x, 
        this;
    },
    crossVectors: function(a, b) {
        var c = a.x, d = a.y, e = a.z, f = b.x, g = b.y, h = b.z;
        return this.x = d * h - e * g, this.y = e * f - c * h, this.z = c * g - d * f, this;
    },
    projectOnVector: function() {
        var a, b;
        return function(c) {
            return void 0 === a && (a = new THREE.Vector3()), a.copy(c).normalize(), b = this.dot(a), 
            this.copy(a).multiplyScalar(b);
        };
    }(),
    projectOnPlane: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Vector3()), a.copy(this).projectOnVector(b), 
            this.sub(a);
        };
    }(),
    reflect: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Vector3()), this.sub(a.copy(b).multiplyScalar(2 * this.dot(b)));
        };
    }(),
    angleTo: function(a) {
        var b = this.dot(a) / Math.sqrt(this.lengthSq() * a.lengthSq());
        return Math.acos(THREE.Math.clamp(b, -1, 1));
    },
    distanceTo: function(a) {
        return Math.sqrt(this.distanceToSquared(a));
    },
    distanceToSquared: function(a) {
        var b = this.x - a.x, c = this.y - a.y, d = this.z - a.z;
        return b * b + c * c + d * d;
    },
    setFromSpherical: function(a) {
        var b = Math.sin(a.phi) * a.radius;
        return this.x = b * Math.sin(a.theta), this.y = Math.cos(a.phi) * a.radius, this.z = b * Math.cos(a.theta), 
        this;
    },
    setFromMatrixPosition: function(a) {
        return this.setFromMatrixColumn(a, 3);
    },
    setFromMatrixScale: function(a) {
        var b = this.setFromMatrixColumn(a, 0).length(), c = this.setFromMatrixColumn(a, 1).length(), d = this.setFromMatrixColumn(a, 2).length();
        return this.x = b, this.y = c, this.z = d, this;
    },
    setFromMatrixColumn: function(a, b) {
        return "number" == typeof a && (console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index )."), 
        a = arguments[1], b = arguments[0]), this.fromArray(a.elements, 4 * b);
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y && a.z === this.z;
    },
    fromArray: function(a, b) {
        return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], 
        this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, 
        a[b + 2] = this.z, a;
    },
    fromAttribute: function(a, b, c) {
        return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], 
        this.z = a.array[b + 2], this;
    }
}, THREE.Vector4 = function(a, b, c, d) {
    this.x = a || 0, this.y = b || 0, this.z = c || 0, this.w = void 0 !== d ? d : 1;
}, THREE.Vector4.prototype = {
    constructor: THREE.Vector4,
    set: function(a, b, c, d) {
        return this.x = a, this.y = b, this.z = c, this.w = d, this;
    },
    setScalar: function(a) {
        return this.x = a, this.y = a, this.z = a, this.w = a, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setZ: function(a) {
        return this.z = a, this;
    },
    setW: function(a) {
        return this.w = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          case 2:
            this.z = b;
            break;

          case 3:
            this.w = b;
            break;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          case 2:
            return this.z;

          case 3:
            return this.w;

          default:
            throw new Error("index is out of range: " + a);
        }
    },
    clone: function() {
        return new this.constructor(this.x, this.y, this.z, this.w);
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this.z = a.z, this.w = void 0 !== a.w ? a.w : 1, 
        this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this.w += a.w, 
        this);
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this.z += a, this.w += a, this;
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this.w = a.w + b.w, 
        this;
    },
    addScaledVector: function(a, b) {
        return this.x += a.x * b, this.y += a.y * b, this.z += a.z * b, this.w += a.w * b, 
        this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this.w -= a.w, 
        this);
    },
    subScalar: function(a) {
        return this.x -= a, this.y -= a, this.z -= a, this.w -= a, this;
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this.w = a.w - b.w, 
        this;
    },
    multiplyScalar: function(a) {
        return isFinite(a) ? (this.x *= a, this.y *= a, this.z *= a, this.w *= a) : (this.x = 0, 
        this.y = 0, this.z = 0, this.w = 0), this;
    },
    applyMatrix4: function(a) {
        var b = this.x, c = this.y, d = this.z, e = this.w, f = a.elements;
        return this.x = f[0] * b + f[4] * c + f[8] * d + f[12] * e, this.y = f[1] * b + f[5] * c + f[9] * d + f[13] * e, 
        this.z = f[2] * b + f[6] * c + f[10] * d + f[14] * e, this.w = f[3] * b + f[7] * c + f[11] * d + f[15] * e, 
        this;
    },
    divideScalar: function(a) {
        return this.multiplyScalar(1 / a);
    },
    setAxisAngleFromQuaternion: function(a) {
        this.w = 2 * Math.acos(a.w);
        var b = Math.sqrt(1 - a.w * a.w);
        return 1e-4 > b ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = a.x / b, this.y = a.y / b, 
        this.z = a.z / b), this;
    },
    setAxisAngleFromRotationMatrix: function(a) {
        var b, c, d, e, f = .01, g = .1, h = a.elements, i = h[0], j = h[4], k = h[8], l = h[1], m = h[5], n = h[9], o = h[2], p = h[6], q = h[10];
        if (Math.abs(j - l) < f && Math.abs(k - o) < f && Math.abs(n - p) < f) {
            if (Math.abs(j + l) < g && Math.abs(k + o) < g && Math.abs(n + p) < g && Math.abs(i + m + q - 3) < g) return this.set(1, 0, 0, 0), 
            this;
            b = Math.PI;
            var r = (i + 1) / 2, s = (m + 1) / 2, t = (q + 1) / 2, u = (j + l) / 4, v = (k + o) / 4, w = (n + p) / 4;
            return r > s && r > t ? f > r ? (c = 0, d = .707106781, e = .707106781) : (c = Math.sqrt(r), 
            d = u / c, e = v / c) : s > t ? f > s ? (c = .707106781, d = 0, e = .707106781) : (d = Math.sqrt(s), 
            c = u / d, e = w / d) : f > t ? (c = .707106781, d = .707106781, e = 0) : (e = Math.sqrt(t), 
            c = v / e, d = w / e), this.set(c, d, e, b), this;
        }
        var x = Math.sqrt((p - n) * (p - n) + (k - o) * (k - o) + (l - j) * (l - j));
        return Math.abs(x) < .001 && (x = 1), this.x = (p - n) / x, this.y = (k - o) / x, 
        this.z = (l - j) / x, this.w = Math.acos((i + m + q - 1) / 2), this;
    },
    min: function(a) {
        return this.x = Math.min(this.x, a.x), this.y = Math.min(this.y, a.y), this.z = Math.min(this.z, a.z), 
        this.w = Math.min(this.w, a.w), this;
    },
    max: function(a) {
        return this.x = Math.max(this.x, a.x), this.y = Math.max(this.y, a.y), this.z = Math.max(this.z, a.z), 
        this.w = Math.max(this.w, a.w), this;
    },
    clamp: function(a, b) {
        return this.x = Math.max(a.x, Math.min(b.x, this.x)), this.y = Math.max(a.y, Math.min(b.y, this.y)), 
        this.z = Math.max(a.z, Math.min(b.z, this.z)), this.w = Math.max(a.w, Math.min(b.w, this.w)), 
        this;
    },
    clampScalar: function() {
        var a, b;
        return function(c, d) {
            return void 0 === a && (a = new THREE.Vector4(), b = new THREE.Vector4()), a.set(c, c, c, c), 
            b.set(d, d, d, d), this.clamp(a, b);
        };
    }(),
    floor: function() {
        return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), 
        this.w = Math.floor(this.w), this;
    },
    ceil: function() {
        return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), 
        this.w = Math.ceil(this.w), this;
    },
    round: function() {
        return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), 
        this.w = Math.round(this.w), this;
    },
    roundToZero: function() {
        return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
        this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), 
        this;
    },
    negate: function() {
        return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
    },
    lengthManhattan: function() {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    setLength: function(a) {
        return this.multiplyScalar(a / this.length());
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, 
        this.w += (a.w - this.w) * b, this;
    },
    lerpVectors: function(a, b, c) {
        return this.subVectors(b, a).multiplyScalar(c).add(a), this;
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y && a.z === this.z && a.w === this.w;
    },
    fromArray: function(a, b) {
        return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], 
        this.w = a[b + 3], this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, 
        a[b + 2] = this.z, a[b + 3] = this.w, a;
    },
    fromAttribute: function(a, b, c) {
        return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], 
        this.z = a.array[b + 2], this.w = a.array[b + 3], this;
    }
}, THREE.Euler = function(a, b, c, d) {
    this._x = a || 0, this._y = b || 0, this._z = c || 0, this._order = d || THREE.Euler.DefaultOrder;
}, THREE.Euler.RotationOrders = [ "XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX" ], THREE.Euler.DefaultOrder = "XYZ", 
THREE.Euler.prototype = {
    constructor: THREE.Euler,
    get x() {
        return this._x;
    },
    set x(a) {
        this._x = a, this.onChangeCallback();
    },
    get y() {
        return this._y;
    },
    set y(a) {
        this._y = a, this.onChangeCallback();
    },
    get z() {
        return this._z;
    },
    set z(a) {
        this._z = a, this.onChangeCallback();
    },
    get order() {
        return this._order;
    },
    set order(a) {
        this._order = a, this.onChangeCallback();
    },
    set: function(a, b, c, d) {
        return this._x = a, this._y = b, this._z = c, this._order = d || this._order, this.onChangeCallback(), 
        this;
    },
    clone: function() {
        return new this.constructor(this._x, this._y, this._z, this._order);
    },
    copy: function(a) {
        return this._x = a._x, this._y = a._y, this._z = a._z, this._order = a._order, this.onChangeCallback(), 
        this;
    },
    setFromRotationMatrix: function(a, b, c) {
        var d = THREE.Math.clamp, e = a.elements, f = e[0], g = e[4], h = e[8], i = e[1], j = e[5], k = e[9], l = e[2], m = e[6], n = e[10];
        return b = b || this._order, "XYZ" === b ? (this._y = Math.asin(d(h, -1, 1)), Math.abs(h) < .99999 ? (this._x = Math.atan2(-k, n), 
        this._z = Math.atan2(-g, f)) : (this._x = Math.atan2(m, j), this._z = 0)) : "YXZ" === b ? (this._x = Math.asin(-d(k, -1, 1)), 
        Math.abs(k) < .99999 ? (this._y = Math.atan2(h, n), this._z = Math.atan2(i, j)) : (this._y = Math.atan2(-l, f), 
        this._z = 0)) : "ZXY" === b ? (this._x = Math.asin(d(m, -1, 1)), Math.abs(m) < .99999 ? (this._y = Math.atan2(-l, n), 
        this._z = Math.atan2(-g, j)) : (this._y = 0, this._z = Math.atan2(i, f))) : "ZYX" === b ? (this._y = Math.asin(-d(l, -1, 1)), 
        Math.abs(l) < .99999 ? (this._x = Math.atan2(m, n), this._z = Math.atan2(i, f)) : (this._x = 0, 
        this._z = Math.atan2(-g, j))) : "YZX" === b ? (this._z = Math.asin(d(i, -1, 1)), 
        Math.abs(i) < .99999 ? (this._x = Math.atan2(-k, j), this._y = Math.atan2(-l, f)) : (this._x = 0, 
        this._y = Math.atan2(h, n))) : "XZY" === b ? (this._z = Math.asin(-d(g, -1, 1)), 
        Math.abs(g) < .99999 ? (this._x = Math.atan2(m, j), this._y = Math.atan2(h, f)) : (this._x = Math.atan2(-k, n), 
        this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + b), 
        this._order = b, c !== !1 && this.onChangeCallback(), this;
    },
    setFromQuaternion: function() {
        var a;
        return function(b, c, d) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationFromQuaternion(b), 
            this.setFromRotationMatrix(a, c, d), this;
        };
    }(),
    setFromVector3: function(a, b) {
        return this.set(a.x, a.y, a.z, b || this._order);
    },
    reorder: function() {
        var a = new THREE.Quaternion();
        return function(b) {
            a.setFromEuler(this), this.setFromQuaternion(a, b);
        };
    }(),
    equals: function(a) {
        return a._x === this._x && a._y === this._y && a._z === this._z && a._order === this._order;
    },
    fromArray: function(a) {
        return this._x = a[0], this._y = a[1], this._z = a[2], void 0 !== a[3] && (this._order = a[3]), 
        this.onChangeCallback(), this;
    },
    toArray: function(a, b) {
        return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this._x, a[b + 1] = this._y, 
        a[b + 2] = this._z, a[b + 3] = this._order, a;
    },
    toVector3: function(a) {
        return a ? a.set(this._x, this._y, this._z) : new THREE.Vector3(this._x, this._y, this._z);
    },
    onChange: function(a) {
        return this.onChangeCallback = a, this;
    },
    onChangeCallback: function() {}
}, THREE.Line3 = function(a, b) {
    this.start = void 0 !== a ? a : new THREE.Vector3(), this.end = void 0 !== b ? b : new THREE.Vector3();
}, THREE.Line3.prototype = {
    constructor: THREE.Line3,
    set: function(a, b) {
        return this.start.copy(a), this.end.copy(b), this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.start.copy(a.start), this.end.copy(a.end), this;
    },
    center: function(a) {
        var b = a || new THREE.Vector3();
        return b.addVectors(this.start, this.end).multiplyScalar(.5);
    },
    delta: function(a) {
        var b = a || new THREE.Vector3();
        return b.subVectors(this.end, this.start);
    },
    distanceSq: function() {
        return this.start.distanceToSquared(this.end);
    },
    distance: function() {
        return this.start.distanceTo(this.end);
    },
    at: function(a, b) {
        var c = b || new THREE.Vector3();
        return this.delta(c).multiplyScalar(a).add(this.start);
    },
    closestPointToPointParameter: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c, d) {
            a.subVectors(c, this.start), b.subVectors(this.end, this.start);
            var e = b.dot(b), f = b.dot(a), g = f / e;
            return d && (g = THREE.Math.clamp(g, 0, 1)), g;
        };
    }(),
    closestPointToPoint: function(a, b, c) {
        var d = this.closestPointToPointParameter(a, b), e = c || new THREE.Vector3();
        return this.delta(e).multiplyScalar(d).add(this.start);
    },
    applyMatrix4: function(a) {
        return this.start.applyMatrix4(a), this.end.applyMatrix4(a), this;
    },
    equals: function(a) {
        return a.start.equals(this.start) && a.end.equals(this.end);
    }
}, THREE.Box2 = function(a, b) {
    this.min = void 0 !== a ? a : new THREE.Vector2(+(1 / 0), +(1 / 0)), this.max = void 0 !== b ? b : new THREE.Vector2(-(1 / 0), -(1 / 0));
}, THREE.Box2.prototype = {
    constructor: THREE.Box2,
    set: function(a, b) {
        return this.min.copy(a), this.max.copy(b), this;
    },
    setFromPoints: function(a) {
        this.makeEmpty();
        for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
        return this;
    },
    setFromCenterAndSize: function() {
        var a = new THREE.Vector2();
        return function(b, c) {
            var d = a.copy(c).multiplyScalar(.5);
            return this.min.copy(b).sub(d), this.max.copy(b).add(d), this;
        };
    }(),
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.min.copy(a.min), this.max.copy(a.max), this;
    },
    makeEmpty: function() {
        return this.min.x = this.min.y = +(1 / 0), this.max.x = this.max.y = -(1 / 0), this;
    },
    isEmpty: function() {
        return this.max.x < this.min.x || this.max.y < this.min.y;
    },
    center: function(a) {
        var b = a || new THREE.Vector2();
        return b.addVectors(this.min, this.max).multiplyScalar(.5);
    },
    size: function(a) {
        var b = a || new THREE.Vector2();
        return b.subVectors(this.max, this.min);
    },
    expandByPoint: function(a) {
        return this.min.min(a), this.max.max(a), this;
    },
    expandByVector: function(a) {
        return this.min.sub(a), this.max.add(a), this;
    },
    expandByScalar: function(a) {
        return this.min.addScalar(-a), this.max.addScalar(a), this;
    },
    containsPoint: function(a) {
        return !(a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y);
    },
    containsBox: function(a) {
        return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y;
    },
    getParameter: function(a, b) {
        var c = b || new THREE.Vector2();
        return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y));
    },
    intersectsBox: function(a) {
        return !(a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y);
    },
    clampPoint: function(a, b) {
        var c = b || new THREE.Vector2();
        return c.copy(a).clamp(this.min, this.max);
    },
    distanceToPoint: function() {
        var a = new THREE.Vector2();
        return function(b) {
            var c = a.copy(b).clamp(this.min, this.max);
            return c.sub(b).length();
        };
    }(),
    intersect: function(a) {
        return this.min.max(a.min), this.max.min(a.max), this;
    },
    union: function(a) {
        return this.min.min(a.min), this.max.max(a.max), this;
    },
    translate: function(a) {
        return this.min.add(a), this.max.add(a), this;
    },
    equals: function(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
    }
}, THREE.Box3 = function(a, b) {
    this.min = void 0 !== a ? a : new THREE.Vector3(+(1 / 0), +(1 / 0), +(1 / 0)), this.max = void 0 !== b ? b : new THREE.Vector3(-(1 / 0), -(1 / 0), -(1 / 0));
}, THREE.Box3.prototype = {
    constructor: THREE.Box3,
    set: function(a, b) {
        return this.min.copy(a), this.max.copy(b), this;
    },
    setFromArray: function(a) {
        this.makeEmpty();
        for (var b = +(1 / 0), c = +(1 / 0), d = +(1 / 0), e = -(1 / 0), f = -(1 / 0), g = -(1 / 0), h = 0, i = a.length; i > h; h += 3) {
            var j = a[h], k = a[h + 1], l = a[h + 2];
            b > j && (b = j), c > k && (c = k), d > l && (d = l), j > e && (e = j), k > f && (f = k), 
            l > g && (g = l);
        }
        this.min.set(b, c, d), this.max.set(e, f, g);
    },
    setFromPoints: function(a) {
        this.makeEmpty();
        for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
        return this;
    },
    setFromCenterAndSize: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            var d = a.copy(c).multiplyScalar(.5);
            return this.min.copy(b).sub(d), this.max.copy(b).add(d), this;
        };
    }(),
    setFromObject: function() {
        var a;
        return function(b) {
            void 0 === a && (a = new THREE.Box3());
            var c = this;
            return this.makeEmpty(), b.updateMatrixWorld(!0), b.traverse(function(b) {
                var d = b.geometry;
                void 0 !== d && (null === d.boundingBox && d.computeBoundingBox(), d.boundingBox.isEmpty() === !1 && (a.copy(d.boundingBox), 
                a.applyMatrix4(b.matrixWorld), c.union(a)));
            }), this;
        };
    }(),
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.min.copy(a.min), this.max.copy(a.max), this;
    },
    makeEmpty: function() {
        return this.min.x = this.min.y = this.min.z = +(1 / 0), this.max.x = this.max.y = this.max.z = -(1 / 0), 
        this;
    },
    isEmpty: function() {
        return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
    },
    center: function(a) {
        var b = a || new THREE.Vector3();
        return b.addVectors(this.min, this.max).multiplyScalar(.5);
    },
    size: function(a) {
        var b = a || new THREE.Vector3();
        return b.subVectors(this.max, this.min);
    },
    expandByPoint: function(a) {
        return this.min.min(a), this.max.max(a), this;
    },
    expandByVector: function(a) {
        return this.min.sub(a), this.max.add(a), this;
    },
    expandByScalar: function(a) {
        return this.min.addScalar(-a), this.max.addScalar(a), this;
    },
    containsPoint: function(a) {
        return !(a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y || a.z < this.min.z || a.z > this.max.z);
    },
    containsBox: function(a) {
        return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y && this.min.z <= a.min.z && a.max.z <= this.max.z;
    },
    getParameter: function(a, b) {
        var c = b || new THREE.Vector3();
        return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y), (a.z - this.min.z) / (this.max.z - this.min.z));
    },
    intersectsBox: function(a) {
        return !(a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y || a.max.z < this.min.z || a.min.z > this.max.z);
    },
    intersectsSphere: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Vector3()), this.clampPoint(b.center, a), 
            a.distanceToSquared(b.center) <= b.radius * b.radius;
        };
    }(),
    intersectsPlane: function(a) {
        var b, c;
        return a.normal.x > 0 ? (b = a.normal.x * this.min.x, c = a.normal.x * this.max.x) : (b = a.normal.x * this.max.x, 
        c = a.normal.x * this.min.x), a.normal.y > 0 ? (b += a.normal.y * this.min.y, c += a.normal.y * this.max.y) : (b += a.normal.y * this.max.y, 
        c += a.normal.y * this.min.y), a.normal.z > 0 ? (b += a.normal.z * this.min.z, c += a.normal.z * this.max.z) : (b += a.normal.z * this.max.z, 
        c += a.normal.z * this.min.z), b <= a.constant && c >= a.constant;
    },
    clampPoint: function(a, b) {
        var c = b || new THREE.Vector3();
        return c.copy(a).clamp(this.min, this.max);
    },
    distanceToPoint: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = a.copy(b).clamp(this.min, this.max);
            return c.sub(b).length();
        };
    }(),
    getBoundingSphere: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = b || new THREE.Sphere();
            return c.center = this.center(), c.radius = .5 * this.size(a).length(), c;
        };
    }(),
    intersect: function(a) {
        return this.min.max(a.min), this.max.min(a.max), this;
    },
    union: function(a) {
        return this.min.min(a.min), this.max.max(a.max), this;
    },
    applyMatrix4: function() {
        var a = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
        return function(b) {
            return a[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(b), a[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(b), 
            a[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(b), a[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(b), 
            a[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(b), a[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(b), 
            a[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(b), a[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(b), 
            this.makeEmpty(), this.setFromPoints(a), this;
        };
    }(),
    translate: function(a) {
        return this.min.add(a), this.max.add(a), this;
    },
    equals: function(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
    }
}, THREE.Matrix3 = function() {
    this.elements = new Float32Array([ 1, 0, 0, 0, 1, 0, 0, 0, 1 ]), arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");
}, THREE.Matrix3.prototype = {
    constructor: THREE.Matrix3,
    set: function(a, b, c, d, e, f, g, h, i) {
        var j = this.elements;
        return j[0] = a, j[1] = d, j[2] = g, j[3] = b, j[4] = e, j[5] = h, j[6] = c, j[7] = f, 
        j[8] = i, this;
    },
    identity: function() {
        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
    },
    clone: function() {
        return new this.constructor().fromArray(this.elements);
    },
    copy: function(a) {
        var b = a.elements;
        return this.set(b[0], b[3], b[6], b[1], b[4], b[7], b[2], b[5], b[8]), this;
    },
    setFromMatrix4: function(a) {
        var b = a.elements;
        return this.set(b[0], b[4], b[8], b[1], b[5], b[9], b[2], b[6], b[10]), this;
    },
    applyToVector3Array: function() {
        var a;
        return function(b, c, d) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === c && (c = 0), void 0 === d && (d = b.length);
            for (var e = 0, f = c; d > e; e += 3, f += 3) a.fromArray(b, f), a.applyMatrix3(this), 
            a.toArray(b, f);
            return b;
        };
    }(),
    applyToBuffer: function() {
        var a;
        return function(b, c, d) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === c && (c = 0), void 0 === d && (d = b.length / b.itemSize);
            for (var e = 0, f = c; d > e; e++, f++) a.x = b.getX(f), a.y = b.getY(f), a.z = b.getZ(f), 
            a.applyMatrix3(this), b.setXYZ(a.x, a.y, a.z);
            return b;
        };
    }(),
    multiplyScalar: function(a) {
        var b = this.elements;
        return b[0] *= a, b[3] *= a, b[6] *= a, b[1] *= a, b[4] *= a, b[7] *= a, b[2] *= a, 
        b[5] *= a, b[8] *= a, this;
    },
    determinant: function() {
        var a = this.elements, b = a[0], c = a[1], d = a[2], e = a[3], f = a[4], g = a[5], h = a[6], i = a[7], j = a[8];
        return b * f * j - b * g * i - c * e * j + c * g * h + d * e * i - d * f * h;
    },
    getInverse: function(a, b) {
        a instanceof THREE.Matrix4 && console.warn("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");
        var c = a.elements, d = this.elements, e = c[0], f = c[1], g = c[2], h = c[3], i = c[4], j = c[5], k = c[6], l = c[7], m = c[8], n = m * i - j * l, o = j * k - m * h, p = l * h - i * k, q = e * n + f * o + g * p;
        if (0 === q) {
            var r = "THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";
            if (b) throw new Error(r);
            return console.warn(r), this.identity();
        }
        return d[0] = n, d[1] = g * l - m * f, d[2] = j * f - g * i, d[3] = o, d[4] = m * e - g * k, 
        d[5] = g * h - j * e, d[6] = p, d[7] = f * k - l * e, d[8] = i * e - f * h, this.multiplyScalar(1 / q);
    },
    transpose: function() {
        var a, b = this.elements;
        return a = b[1], b[1] = b[3], b[3] = a, a = b[2], b[2] = b[6], b[6] = a, a = b[5], 
        b[5] = b[7], b[7] = a, this;
    },
    flattenToArrayOffset: function(a, b) {
        var c = this.elements;
        return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], 
        a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a;
    },
    getNormalMatrix: function(a) {
        return this.setFromMatrix4(a).getInverse(this).transpose();
    },
    transposeIntoArray: function(a) {
        var b = this.elements;
        return a[0] = b[0], a[1] = b[3], a[2] = b[6], a[3] = b[1], a[4] = b[4], a[5] = b[7], 
        a[6] = b[2], a[7] = b[5], a[8] = b[8], this;
    },
    fromArray: function(a) {
        return this.elements.set(a), this;
    },
    toArray: function() {
        var a = this.elements;
        return [ a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8] ];
    }
}, THREE.Matrix4 = function() {
    this.elements = new Float32Array([ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ]), 
    arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.");
}, THREE.Matrix4.prototype = {
    constructor: THREE.Matrix4,
    set: function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this.elements;
        return q[0] = a, q[4] = b, q[8] = c, q[12] = d, q[1] = e, q[5] = f, q[9] = g, q[13] = h, 
        q[2] = i, q[6] = j, q[10] = k, q[14] = l, q[3] = m, q[7] = n, q[11] = o, q[15] = p, 
        this;
    },
    identity: function() {
        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
    },
    clone: function() {
        return new THREE.Matrix4().fromArray(this.elements);
    },
    copy: function(a) {
        return this.elements.set(a.elements), this;
    },
    copyPosition: function(a) {
        var b = this.elements, c = a.elements;
        return b[12] = c[12], b[13] = c[13], b[14] = c[14], this;
    },
    extractBasis: function(a, b, c) {
        return a.setFromMatrixColumn(this, 0), b.setFromMatrixColumn(this, 1), c.setFromMatrixColumn(this, 2), 
        this;
    },
    makeBasis: function(a, b, c) {
        return this.set(a.x, b.x, c.x, 0, a.y, b.y, c.y, 0, a.z, b.z, c.z, 0, 0, 0, 0, 1), 
        this;
    },
    extractRotation: function() {
        var a;
        return function(b) {
            void 0 === a && (a = new THREE.Vector3());
            var c = this.elements, d = b.elements, e = 1 / a.setFromMatrixColumn(b, 0).length(), f = 1 / a.setFromMatrixColumn(b, 1).length(), g = 1 / a.setFromMatrixColumn(b, 2).length();
            return c[0] = d[0] * e, c[1] = d[1] * e, c[2] = d[2] * e, c[4] = d[4] * f, c[5] = d[5] * f, 
            c[6] = d[6] * f, c[8] = d[8] * g, c[9] = d[9] * g, c[10] = d[10] * g, this;
        };
    }(),
    makeRotationFromEuler: function(a) {
        a instanceof THREE.Euler == !1 && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
        var b = this.elements, c = a.x, d = a.y, e = a.z, f = Math.cos(c), g = Math.sin(c), h = Math.cos(d), i = Math.sin(d), j = Math.cos(e), k = Math.sin(e);
        if ("XYZ" === a.order) {
            var l = f * j, m = f * k, n = g * j, o = g * k;
            b[0] = h * j, b[4] = -h * k, b[8] = i, b[1] = m + n * i, b[5] = l - o * i, b[9] = -g * h, 
            b[2] = o - l * i, b[6] = n + m * i, b[10] = f * h;
        } else if ("YXZ" === a.order) {
            var p = h * j, q = h * k, r = i * j, s = i * k;
            b[0] = p + s * g, b[4] = r * g - q, b[8] = f * i, b[1] = f * k, b[5] = f * j, b[9] = -g, 
            b[2] = q * g - r, b[6] = s + p * g, b[10] = f * h;
        } else if ("ZXY" === a.order) {
            var p = h * j, q = h * k, r = i * j, s = i * k;
            b[0] = p - s * g, b[4] = -f * k, b[8] = r + q * g, b[1] = q + r * g, b[5] = f * j, 
            b[9] = s - p * g, b[2] = -f * i, b[6] = g, b[10] = f * h;
        } else if ("ZYX" === a.order) {
            var l = f * j, m = f * k, n = g * j, o = g * k;
            b[0] = h * j, b[4] = n * i - m, b[8] = l * i + o, b[1] = h * k, b[5] = o * i + l, 
            b[9] = m * i - n, b[2] = -i, b[6] = g * h, b[10] = f * h;
        } else if ("YZX" === a.order) {
            var t = f * h, u = f * i, v = g * h, w = g * i;
            b[0] = h * j, b[4] = w - t * k, b[8] = v * k + u, b[1] = k, b[5] = f * j, b[9] = -g * j, 
            b[2] = -i * j, b[6] = u * k + v, b[10] = t - w * k;
        } else if ("XZY" === a.order) {
            var t = f * h, u = f * i, v = g * h, w = g * i;
            b[0] = h * j, b[4] = -k, b[8] = i * j, b[1] = t * k + w, b[5] = f * j, b[9] = u * k - v, 
            b[2] = v * k - u, b[6] = g * j, b[10] = w * k + t;
        }
        return b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, 
        this;
    },
    makeRotationFromQuaternion: function(a) {
        var b = this.elements, c = a.x, d = a.y, e = a.z, f = a.w, g = c + c, h = d + d, i = e + e, j = c * g, k = c * h, l = c * i, m = d * h, n = d * i, o = e * i, p = f * g, q = f * h, r = f * i;
        return b[0] = 1 - (m + o), b[4] = k - r, b[8] = l + q, b[1] = k + r, b[5] = 1 - (j + o), 
        b[9] = n - p, b[2] = l - q, b[6] = n + p, b[10] = 1 - (j + m), b[3] = 0, b[7] = 0, 
        b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this;
    },
    lookAt: function() {
        var a, b, c;
        return function(d, e, f) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === b && (b = new THREE.Vector3()), 
            void 0 === c && (c = new THREE.Vector3());
            var g = this.elements;
            return c.subVectors(d, e).normalize(), 0 === c.lengthSq() && (c.z = 1), a.crossVectors(f, c).normalize(), 
            0 === a.lengthSq() && (c.x += 1e-4, a.crossVectors(f, c).normalize()), b.crossVectors(c, a), 
            g[0] = a.x, g[4] = b.x, g[8] = c.x, g[1] = a.y, g[5] = b.y, g[9] = c.y, g[2] = a.z, 
            g[6] = b.z, g[10] = c.z, this;
        };
    }(),
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), 
        this.multiplyMatrices(a, b)) : this.multiplyMatrices(this, a);
    },
    multiplyMatrices: function(a, b) {
        var c = a.elements, d = b.elements, e = this.elements, f = c[0], g = c[4], h = c[8], i = c[12], j = c[1], k = c[5], l = c[9], m = c[13], n = c[2], o = c[6], p = c[10], q = c[14], r = c[3], s = c[7], t = c[11], u = c[15], v = d[0], w = d[4], x = d[8], y = d[12], z = d[1], A = d[5], B = d[9], C = d[13], D = d[2], E = d[6], F = d[10], G = d[14], H = d[3], I = d[7], J = d[11], K = d[15];
        return e[0] = f * v + g * z + h * D + i * H, e[4] = f * w + g * A + h * E + i * I, 
        e[8] = f * x + g * B + h * F + i * J, e[12] = f * y + g * C + h * G + i * K, e[1] = j * v + k * z + l * D + m * H, 
        e[5] = j * w + k * A + l * E + m * I, e[9] = j * x + k * B + l * F + m * J, e[13] = j * y + k * C + l * G + m * K, 
        e[2] = n * v + o * z + p * D + q * H, e[6] = n * w + o * A + p * E + q * I, e[10] = n * x + o * B + p * F + q * J, 
        e[14] = n * y + o * C + p * G + q * K, e[3] = r * v + s * z + t * D + u * H, e[7] = r * w + s * A + t * E + u * I, 
        e[11] = r * x + s * B + t * F + u * J, e[15] = r * y + s * C + t * G + u * K, this;
    },
    multiplyToArray: function(a, b, c) {
        var d = this.elements;
        return this.multiplyMatrices(a, b), c[0] = d[0], c[1] = d[1], c[2] = d[2], c[3] = d[3], 
        c[4] = d[4], c[5] = d[5], c[6] = d[6], c[7] = d[7], c[8] = d[8], c[9] = d[9], c[10] = d[10], 
        c[11] = d[11], c[12] = d[12], c[13] = d[13], c[14] = d[14], c[15] = d[15], this;
    },
    multiplyScalar: function(a) {
        var b = this.elements;
        return b[0] *= a, b[4] *= a, b[8] *= a, b[12] *= a, b[1] *= a, b[5] *= a, b[9] *= a, 
        b[13] *= a, b[2] *= a, b[6] *= a, b[10] *= a, b[14] *= a, b[3] *= a, b[7] *= a, 
        b[11] *= a, b[15] *= a, this;
    },
    applyToVector3Array: function() {
        var a;
        return function(b, c, d) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === c && (c = 0), void 0 === d && (d = b.length);
            for (var e = 0, f = c; d > e; e += 3, f += 3) a.fromArray(b, f), a.applyMatrix4(this), 
            a.toArray(b, f);
            return b;
        };
    }(),
    applyToBuffer: function() {
        var a;
        return function(b, c, d) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === c && (c = 0), void 0 === d && (d = b.length / b.itemSize);
            for (var e = 0, f = c; d > e; e++, f++) a.x = b.getX(f), a.y = b.getY(f), a.z = b.getZ(f), 
            a.applyMatrix4(this), b.setXYZ(a.x, a.y, a.z);
            return b;
        };
    }(),
    determinant: function() {
        var a = this.elements, b = a[0], c = a[4], d = a[8], e = a[12], f = a[1], g = a[5], h = a[9], i = a[13], j = a[2], k = a[6], l = a[10], m = a[14], n = a[3], o = a[7], p = a[11], q = a[15];
        return n * (+e * h * k - d * i * k - e * g * l + c * i * l + d * g * m - c * h * m) + o * (+b * h * m - b * i * l + e * f * l - d * f * m + d * i * j - e * h * j) + p * (+b * i * k - b * g * m - e * f * k + c * f * m + e * g * j - c * i * j) + q * (-d * g * j - b * h * k + b * g * l + d * f * k - c * f * l + c * h * j);
    },
    transpose: function() {
        var a, b = this.elements;
        return a = b[1], b[1] = b[4], b[4] = a, a = b[2], b[2] = b[8], b[8] = a, a = b[6], 
        b[6] = b[9], b[9] = a, a = b[3], b[3] = b[12], b[12] = a, a = b[7], b[7] = b[13], 
        b[13] = a, a = b[11], b[11] = b[14], b[14] = a, this;
    },
    flattenToArrayOffset: function(a, b) {
        var c = this.elements;
        return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], 
        a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a[b + 9] = c[9], 
        a[b + 10] = c[10], a[b + 11] = c[11], a[b + 12] = c[12], a[b + 13] = c[13], a[b + 14] = c[14], 
        a[b + 15] = c[15], a;
    },
    getPosition: function() {
        var a;
        return function() {
            return void 0 === a && (a = new THREE.Vector3()), console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."), 
            a.setFromMatrixColumn(this, 3);
        };
    }(),
    setPosition: function(a) {
        var b = this.elements;
        return b[12] = a.x, b[13] = a.y, b[14] = a.z, this;
    },
    getInverse: function(a, b) {
        var c = this.elements, d = a.elements, e = d[0], f = d[1], g = d[2], h = d[3], i = d[4], j = d[5], k = d[6], l = d[7], m = d[8], n = d[9], o = d[10], p = d[11], q = d[12], r = d[13], s = d[14], t = d[15], u = n * s * l - r * o * l + r * k * p - j * s * p - n * k * t + j * o * t, v = q * o * l - m * s * l - q * k * p + i * s * p + m * k * t - i * o * t, w = m * r * l - q * n * l + q * j * p - i * r * p - m * j * t + i * n * t, x = q * n * k - m * r * k - q * j * o + i * r * o + m * j * s - i * n * s, y = e * u + f * v + g * w + h * x;
        if (0 === y) {
            var z = "THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";
            if (b) throw new Error(z);
            return console.warn(z), this.identity();
        }
        return c[0] = u, c[1] = r * o * h - n * s * h - r * g * p + f * s * p + n * g * t - f * o * t, 
        c[2] = j * s * h - r * k * h + r * g * l - f * s * l - j * g * t + f * k * t, c[3] = n * k * h - j * o * h - n * g * l + f * o * l + j * g * p - f * k * p, 
        c[4] = v, c[5] = m * s * h - q * o * h + q * g * p - e * s * p - m * g * t + e * o * t, 
        c[6] = q * k * h - i * s * h - q * g * l + e * s * l + i * g * t - e * k * t, c[7] = i * o * h - m * k * h + m * g * l - e * o * l - i * g * p + e * k * p, 
        c[8] = w, c[9] = q * n * h - m * r * h - q * f * p + e * r * p + m * f * t - e * n * t, 
        c[10] = i * r * h - q * j * h + q * f * l - e * r * l - i * f * t + e * j * t, c[11] = m * j * h - i * n * h - m * f * l + e * n * l + i * f * p - e * j * p, 
        c[12] = x, c[13] = m * r * g - q * n * g + q * f * o - e * r * o - m * f * s + e * n * s, 
        c[14] = q * j * g - i * r * g - q * f * k + e * r * k + i * f * s - e * j * s, c[15] = i * n * g - m * j * g + m * f * k - e * n * k - i * f * o + e * j * o, 
        this.multiplyScalar(1 / y);
    },
    scale: function(a) {
        var b = this.elements, c = a.x, d = a.y, e = a.z;
        return b[0] *= c, b[4] *= d, b[8] *= e, b[1] *= c, b[5] *= d, b[9] *= e, b[2] *= c, 
        b[6] *= d, b[10] *= e, b[3] *= c, b[7] *= d, b[11] *= e, this;
    },
    getMaxScaleOnAxis: function() {
        var a = this.elements, b = a[0] * a[0] + a[1] * a[1] + a[2] * a[2], c = a[4] * a[4] + a[5] * a[5] + a[6] * a[6], d = a[8] * a[8] + a[9] * a[9] + a[10] * a[10];
        return Math.sqrt(Math.max(b, c, d));
    },
    makeTranslation: function(a, b, c) {
        return this.set(1, 0, 0, a, 0, 1, 0, b, 0, 0, 1, c, 0, 0, 0, 1), this;
    },
    makeRotationX: function(a) {
        var b = Math.cos(a), c = Math.sin(a);
        return this.set(1, 0, 0, 0, 0, b, -c, 0, 0, c, b, 0, 0, 0, 0, 1), this;
    },
    makeRotationY: function(a) {
        var b = Math.cos(a), c = Math.sin(a);
        return this.set(b, 0, c, 0, 0, 1, 0, 0, -c, 0, b, 0, 0, 0, 0, 1), this;
    },
    makeRotationZ: function(a) {
        var b = Math.cos(a), c = Math.sin(a);
        return this.set(b, -c, 0, 0, c, b, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
    },
    makeRotationAxis: function(a, b) {
        var c = Math.cos(b), d = Math.sin(b), e = 1 - c, f = a.x, g = a.y, h = a.z, i = e * f, j = e * g;
        return this.set(i * f + c, i * g - d * h, i * h + d * g, 0, i * g + d * h, j * g + c, j * h - d * f, 0, i * h - d * g, j * h + d * f, e * h * h + c, 0, 0, 0, 0, 1), 
        this;
    },
    makeScale: function(a, b, c) {
        return this.set(a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1), this;
    },
    compose: function(a, b, c) {
        return this.makeRotationFromQuaternion(b), this.scale(c), this.setPosition(a), this;
    },
    decompose: function() {
        var a, b;
        return function(c, d, e) {
            void 0 === a && (a = new THREE.Vector3()), void 0 === b && (b = new THREE.Matrix4());
            var f = this.elements, g = a.set(f[0], f[1], f[2]).length(), h = a.set(f[4], f[5], f[6]).length(), i = a.set(f[8], f[9], f[10]).length(), j = this.determinant();
            0 > j && (g = -g), c.x = f[12], c.y = f[13], c.z = f[14], b.elements.set(this.elements);
            var k = 1 / g, l = 1 / h, m = 1 / i;
            return b.elements[0] *= k, b.elements[1] *= k, b.elements[2] *= k, b.elements[4] *= l, 
            b.elements[5] *= l, b.elements[6] *= l, b.elements[8] *= m, b.elements[9] *= m, 
            b.elements[10] *= m, d.setFromRotationMatrix(b), e.x = g, e.y = h, e.z = i, this;
        };
    }(),
    makeFrustum: function(a, b, c, d, e, f) {
        var g = this.elements, h = 2 * e / (b - a), i = 2 * e / (d - c), j = (b + a) / (b - a), k = (d + c) / (d - c), l = -(f + e) / (f - e), m = -2 * f * e / (f - e);
        return g[0] = h, g[4] = 0, g[8] = j, g[12] = 0, g[1] = 0, g[5] = i, g[9] = k, g[13] = 0, 
        g[2] = 0, g[6] = 0, g[10] = l, g[14] = m, g[3] = 0, g[7] = 0, g[11] = -1, g[15] = 0, 
        this;
    },
    makePerspective: function(a, b, c, d) {
        var e = c * Math.tan(THREE.Math.degToRad(.5 * a)), f = -e, g = f * b, h = e * b;
        return this.makeFrustum(g, h, f, e, c, d);
    },
    makeOrthographic: function(a, b, c, d, e, f) {
        var g = this.elements, h = 1 / (b - a), i = 1 / (c - d), j = 1 / (f - e), k = (b + a) * h, l = (c + d) * i, m = (f + e) * j;
        return g[0] = 2 * h, g[4] = 0, g[8] = 0, g[12] = -k, g[1] = 0, g[5] = 2 * i, g[9] = 0, 
        g[13] = -l, g[2] = 0, g[6] = 0, g[10] = -2 * j, g[14] = -m, g[3] = 0, g[7] = 0, 
        g[11] = 0, g[15] = 1, this;
    },
    equals: function(a) {
        for (var b = this.elements, c = a.elements, d = 0; 16 > d; d++) if (b[d] !== c[d]) return !1;
        return !0;
    },
    fromArray: function(a) {
        return this.elements.set(a), this;
    },
    toArray: function() {
        var a = this.elements;
        return [ a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15] ];
    }
}, THREE.Ray = function(a, b) {
    this.origin = void 0 !== a ? a : new THREE.Vector3(), this.direction = void 0 !== b ? b : new THREE.Vector3();
}, THREE.Ray.prototype = {
    constructor: THREE.Ray,
    set: function(a, b) {
        return this.origin.copy(a), this.direction.copy(b), this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.origin.copy(a.origin), this.direction.copy(a.direction), this;
    },
    at: function(a, b) {
        var c = b || new THREE.Vector3();
        return c.copy(this.direction).multiplyScalar(a).add(this.origin);
    },
    lookAt: function(a) {
        this.direction.copy(a).sub(this.origin).normalize();
    },
    recast: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return this.origin.copy(this.at(b, a)), this;
        };
    }(),
    closestPointToPoint: function(a, b) {
        var c = b || new THREE.Vector3();
        c.subVectors(a, this.origin);
        var d = c.dot(this.direction);
        return 0 > d ? c.copy(this.origin) : c.copy(this.direction).multiplyScalar(d).add(this.origin);
    },
    distanceToPoint: function(a) {
        return Math.sqrt(this.distanceSqToPoint(a));
    },
    distanceSqToPoint: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = a.subVectors(b, this.origin).dot(this.direction);
            return 0 > c ? this.origin.distanceToSquared(b) : (a.copy(this.direction).multiplyScalar(c).add(this.origin), 
            a.distanceToSquared(b));
        };
    }(),
    distanceSqToSegment: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
        return function(d, e, f, g) {
            a.copy(d).add(e).multiplyScalar(.5), b.copy(e).sub(d).normalize(), c.copy(this.origin).sub(a);
            var h, i, j, k, l = .5 * d.distanceTo(e), m = -this.direction.dot(b), n = c.dot(this.direction), o = -c.dot(b), p = c.lengthSq(), q = Math.abs(1 - m * m);
            if (q > 0) if (h = m * o - n, i = m * n - o, k = l * q, h >= 0) if (i >= -k) if (k >= i) {
                var r = 1 / q;
                h *= r, i *= r, j = h * (h + m * i + 2 * n) + i * (m * h + i + 2 * o) + p;
            } else i = l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p; else i = -l, 
            h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p; else -k >= i ? (h = Math.max(0, -(-m * l + n)), 
            i = h > 0 ? -l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p) : k >= i ? (h = 0, 
            i = Math.min(Math.max(-l, -o), l), j = i * (i + 2 * o) + p) : (h = Math.max(0, -(m * l + n)), 
            i = h > 0 ? l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p); else i = m > 0 ? -l : l, 
            h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
            return f && f.copy(this.direction).multiplyScalar(h).add(this.origin), g && g.copy(b).multiplyScalar(i).add(a), 
            j;
        };
    }(),
    intersectSphere: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            a.subVectors(b.center, this.origin);
            var d = a.dot(this.direction), e = a.dot(a) - d * d, f = b.radius * b.radius;
            if (e > f) return null;
            var g = Math.sqrt(f - e), h = d - g, i = d + g;
            return 0 > h && 0 > i ? null : 0 > h ? this.at(i, c) : this.at(h, c);
        };
    }(),
    intersectsSphere: function(a) {
        return this.distanceToPoint(a.center) <= a.radius;
    },
    distanceToPlane: function(a) {
        var b = a.normal.dot(this.direction);
        if (0 === b) return 0 === a.distanceToPoint(this.origin) ? 0 : null;
        var c = -(this.origin.dot(a.normal) + a.constant) / b;
        return c >= 0 ? c : null;
    },
    intersectPlane: function(a, b) {
        var c = this.distanceToPlane(a);
        return null === c ? null : this.at(c, b);
    },
    intersectsPlane: function(a) {
        var b = a.distanceToPoint(this.origin);
        if (0 === b) return !0;
        var c = a.normal.dot(this.direction);
        return 0 > c * b;
    },
    intersectBox: function(a, b) {
        var c, d, e, f, g, h, i = 1 / this.direction.x, j = 1 / this.direction.y, k = 1 / this.direction.z, l = this.origin;
        return i >= 0 ? (c = (a.min.x - l.x) * i, d = (a.max.x - l.x) * i) : (c = (a.max.x - l.x) * i, 
        d = (a.min.x - l.x) * i), j >= 0 ? (e = (a.min.y - l.y) * j, f = (a.max.y - l.y) * j) : (e = (a.max.y - l.y) * j, 
        f = (a.min.y - l.y) * j), c > f || e > d ? null : ((e > c || c !== c) && (c = e), 
        (d > f || d !== d) && (d = f), k >= 0 ? (g = (a.min.z - l.z) * k, h = (a.max.z - l.z) * k) : (g = (a.max.z - l.z) * k, 
        h = (a.min.z - l.z) * k), c > h || g > d ? null : ((g > c || c !== c) && (c = g), 
        (d > h || d !== d) && (d = h), 0 > d ? null : this.at(c >= 0 ? c : d, b)));
    },
    intersectsBox: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return null !== this.intersectBox(b, a);
        };
    }(),
    intersectTriangle: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3(), d = new THREE.Vector3();
        return function(e, f, g, h, i) {
            b.subVectors(f, e), c.subVectors(g, e), d.crossVectors(b, c);
            var j, k = this.direction.dot(d);
            if (k > 0) {
                if (h) return null;
                j = 1;
            } else {
                if (!(0 > k)) return null;
                j = -1, k = -k;
            }
            a.subVectors(this.origin, e);
            var l = j * this.direction.dot(c.crossVectors(a, c));
            if (0 > l) return null;
            var m = j * this.direction.dot(b.cross(a));
            if (0 > m) return null;
            if (l + m > k) return null;
            var n = -j * a.dot(d);
            return 0 > n ? null : this.at(n / k, i);
        };
    }(),
    applyMatrix4: function(a) {
        return this.direction.add(this.origin).applyMatrix4(a), this.origin.applyMatrix4(a), 
        this.direction.sub(this.origin), this.direction.normalize(), this;
    },
    equals: function(a) {
        return a.origin.equals(this.origin) && a.direction.equals(this.direction);
    }
}, THREE.Sphere = function(a, b) {
    this.center = void 0 !== a ? a : new THREE.Vector3(), this.radius = void 0 !== b ? b : 0;
}, THREE.Sphere.prototype = {
    constructor: THREE.Sphere,
    set: function(a, b) {
        return this.center.copy(a), this.radius = b, this;
    },
    setFromPoints: function() {
        var a = new THREE.Box3();
        return function(b, c) {
            var d = this.center;
            void 0 !== c ? d.copy(c) : a.setFromPoints(b).center(d);
            for (var e = 0, f = 0, g = b.length; g > f; f++) e = Math.max(e, d.distanceToSquared(b[f]));
            return this.radius = Math.sqrt(e), this;
        };
    }(),
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.center.copy(a.center), this.radius = a.radius, this;
    },
    empty: function() {
        return this.radius <= 0;
    },
    containsPoint: function(a) {
        return a.distanceToSquared(this.center) <= this.radius * this.radius;
    },
    distanceToPoint: function(a) {
        return a.distanceTo(this.center) - this.radius;
    },
    intersectsSphere: function(a) {
        var b = this.radius + a.radius;
        return a.center.distanceToSquared(this.center) <= b * b;
    },
    intersectsBox: function(a) {
        return a.intersectsSphere(this);
    },
    intersectsPlane: function(a) {
        return Math.abs(this.center.dot(a.normal) - a.constant) <= this.radius;
    },
    clampPoint: function(a, b) {
        var c = this.center.distanceToSquared(a), d = b || new THREE.Vector3();
        return d.copy(a), c > this.radius * this.radius && (d.sub(this.center).normalize(), 
        d.multiplyScalar(this.radius).add(this.center)), d;
    },
    getBoundingBox: function(a) {
        var b = a || new THREE.Box3();
        return b.set(this.center, this.center), b.expandByScalar(this.radius), b;
    },
    applyMatrix4: function(a) {
        return this.center.applyMatrix4(a), this.radius = this.radius * a.getMaxScaleOnAxis(), 
        this;
    },
    translate: function(a) {
        return this.center.add(a), this;
    },
    equals: function(a) {
        return a.center.equals(this.center) && a.radius === this.radius;
    }
}, THREE.Frustum = function(a, b, c, d, e, f) {
    this.planes = [ void 0 !== a ? a : new THREE.Plane(), void 0 !== b ? b : new THREE.Plane(), void 0 !== c ? c : new THREE.Plane(), void 0 !== d ? d : new THREE.Plane(), void 0 !== e ? e : new THREE.Plane(), void 0 !== f ? f : new THREE.Plane() ];
}, THREE.Frustum.prototype = {
    constructor: THREE.Frustum,
    set: function(a, b, c, d, e, f) {
        var g = this.planes;
        return g[0].copy(a), g[1].copy(b), g[2].copy(c), g[3].copy(d), g[4].copy(e), g[5].copy(f), 
        this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        for (var b = this.planes, c = 0; 6 > c; c++) b[c].copy(a.planes[c]);
        return this;
    },
    setFromMatrix: function(a) {
        var b = this.planes, c = a.elements, d = c[0], e = c[1], f = c[2], g = c[3], h = c[4], i = c[5], j = c[6], k = c[7], l = c[8], m = c[9], n = c[10], o = c[11], p = c[12], q = c[13], r = c[14], s = c[15];
        return b[0].setComponents(g - d, k - h, o - l, s - p).normalize(), b[1].setComponents(g + d, k + h, o + l, s + p).normalize(), 
        b[2].setComponents(g + e, k + i, o + m, s + q).normalize(), b[3].setComponents(g - e, k - i, o - m, s - q).normalize(), 
        b[4].setComponents(g - f, k - j, o - n, s - r).normalize(), b[5].setComponents(g + f, k + j, o + n, s + r).normalize(), 
        this;
    },
    intersectsObject: function() {
        var a = new THREE.Sphere();
        return function(b) {
            var c = b.geometry;
            return null === c.boundingSphere && c.computeBoundingSphere(), a.copy(c.boundingSphere), 
            a.applyMatrix4(b.matrixWorld), this.intersectsSphere(a);
        };
    }(),
    intersectsSphere: function(a) {
        for (var b = this.planes, c = a.center, d = -a.radius, e = 0; 6 > e; e++) {
            var f = b[e].distanceToPoint(c);
            if (d > f) return !1;
        }
        return !0;
    },
    intersectsBox: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c) {
            for (var d = this.planes, e = 0; 6 > e; e++) {
                var f = d[e];
                a.x = f.normal.x > 0 ? c.min.x : c.max.x, b.x = f.normal.x > 0 ? c.max.x : c.min.x, 
                a.y = f.normal.y > 0 ? c.min.y : c.max.y, b.y = f.normal.y > 0 ? c.max.y : c.min.y, 
                a.z = f.normal.z > 0 ? c.min.z : c.max.z, b.z = f.normal.z > 0 ? c.max.z : c.min.z;
                var g = f.distanceToPoint(a), h = f.distanceToPoint(b);
                if (0 > g && 0 > h) return !1;
            }
            return !0;
        };
    }(),
    containsPoint: function(a) {
        for (var b = this.planes, c = 0; 6 > c; c++) if (b[c].distanceToPoint(a) < 0) return !1;
        return !0;
    }
}, THREE.Plane = function(a, b) {
    this.normal = void 0 !== a ? a : new THREE.Vector3(1, 0, 0), this.constant = void 0 !== b ? b : 0;
}, THREE.Plane.prototype = {
    constructor: THREE.Plane,
    set: function(a, b) {
        return this.normal.copy(a), this.constant = b, this;
    },
    setComponents: function(a, b, c, d) {
        return this.normal.set(a, b, c), this.constant = d, this;
    },
    setFromNormalAndCoplanarPoint: function(a, b) {
        return this.normal.copy(a), this.constant = -b.dot(this.normal), this;
    },
    setFromCoplanarPoints: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c, d, e) {
            var f = a.subVectors(e, d).cross(b.subVectors(c, d)).normalize();
            return this.setFromNormalAndCoplanarPoint(f, c), this;
        };
    }(),
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.normal.copy(a.normal), this.constant = a.constant, this;
    },
    normalize: function() {
        var a = 1 / this.normal.length();
        return this.normal.multiplyScalar(a), this.constant *= a, this;
    },
    negate: function() {
        return this.constant *= -1, this.normal.negate(), this;
    },
    distanceToPoint: function(a) {
        return this.normal.dot(a) + this.constant;
    },
    distanceToSphere: function(a) {
        return this.distanceToPoint(a.center) - a.radius;
    },
    projectPoint: function(a, b) {
        return this.orthoPoint(a, b).sub(a).negate();
    },
    orthoPoint: function(a, b) {
        var c = this.distanceToPoint(a), d = b || new THREE.Vector3();
        return d.copy(this.normal).multiplyScalar(c);
    },
    intersectLine: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            var d = c || new THREE.Vector3(), e = b.delta(a), f = this.normal.dot(e);
            if (0 !== f) {
                var g = -(b.start.dot(this.normal) + this.constant) / f;
                if (!(0 > g || g > 1)) return d.copy(e).multiplyScalar(g).add(b.start);
            } else if (0 === this.distanceToPoint(b.start)) return d.copy(b.start);
        };
    }(),
    intersectsLine: function(a) {
        var b = this.distanceToPoint(a.start), c = this.distanceToPoint(a.end);
        return 0 > b && c > 0 || 0 > c && b > 0;
    },
    intersectsBox: function(a) {
        return a.intersectsPlane(this);
    },
    intersectsSphere: function(a) {
        return a.intersectsPlane(this);
    },
    coplanarPoint: function(a) {
        var b = a || new THREE.Vector3();
        return b.copy(this.normal).multiplyScalar(-this.constant);
    },
    applyMatrix4: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Matrix3();
        return function(d, e) {
            var f = e || c.getNormalMatrix(d), g = a.copy(this.normal).applyMatrix3(f), h = this.coplanarPoint(b);
            return h.applyMatrix4(d), this.setFromNormalAndCoplanarPoint(g, h), this;
        };
    }(),
    translate: function(a) {
        return this.constant = this.constant - a.dot(this.normal), this;
    },
    equals: function(a) {
        return a.normal.equals(this.normal) && a.constant === this.constant;
    }
}, THREE.Spherical = function(a, b, c) {
    return this.radius = void 0 !== a ? a : 1, this.phi = void 0 !== b ? b : 0, this.theta = void 0 !== c ? c : 0, 
    this;
}, THREE.Spherical.prototype = {
    constructor: THREE.Spherical,
    set: function(a, b, c) {
        this.radius = a, this.phi = b, this.theta = c;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.radius.copy(a.radius), this.phi.copy(a.phi), this.theta.copy(a.theta), 
        this;
    },
    makeSafe: function() {
        var a = 1e-6;
        this.phi = Math.max(a, Math.min(Math.PI - a, this.phi));
    },
    setFromVector3: function(a) {
        return this.radius = a.length(), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(a.x, a.z), 
        this.phi = Math.acos(THREE.Math.clamp(a.y / this.radius, -1, 1))), this;
    }
}, THREE.Math = {
    generateUUID: function() {
        var a, b = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), c = new Array(36), d = 0;
        return function() {
            for (var e = 0; 36 > e; e++) 8 === e || 13 === e || 18 === e || 23 === e ? c[e] = "-" : 14 === e ? c[e] = "4" : (2 >= d && (d = 33554432 + 16777216 * Math.random() | 0), 
            a = 15 & d, d >>= 4, c[e] = b[19 === e ? 3 & a | 8 : a]);
            return c.join("");
        };
    }(),
    clamp: function(a, b, c) {
        return Math.max(b, Math.min(c, a));
    },
    euclideanModulo: function(a, b) {
        return (a % b + b) % b;
    },
    mapLinear: function(a, b, c, d, e) {
        return d + (a - b) * (e - d) / (c - b);
    },
    smoothstep: function(a, b, c) {
        return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * (3 - 2 * a));
    },
    smootherstep: function(a, b, c) {
        return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * a * (a * (6 * a - 15) + 10));
    },
    random16: function() {
        return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."), 
        Math.random();
    },
    randInt: function(a, b) {
        return a + Math.floor(Math.random() * (b - a + 1));
    },
    randFloat: function(a, b) {
        return a + Math.random() * (b - a);
    },
    randFloatSpread: function(a) {
        return a * (.5 - Math.random());
    },
    degToRad: function() {
        var a = Math.PI / 180;
        return function(b) {
            return b * a;
        };
    }(),
    radToDeg: function() {
        var a = 180 / Math.PI;
        return function(b) {
            return b * a;
        };
    }(),
    isPowerOfTwo: function(a) {
        return 0 === (a & a - 1) && 0 !== a;
    },
    nearestPowerOfTwo: function(a) {
        return Math.pow(2, Math.round(Math.log(a) / Math.LN2));
    },
    nextPowerOfTwo: function(a) {
        return a--, a |= a >> 1, a |= a >> 2, a |= a >> 4, a |= a >> 8, a |= a >> 16, a++, 
        a;
    }
}, THREE.Spline = function(a) {
    function b(a, b, c, d, e, f, g) {
        var h = .5 * (c - a), i = .5 * (d - b);
        return (2 * (b - c) + h + i) * g + (-3 * (b - c) - 2 * h - i) * f + h * e + b;
    }
    this.points = a;
    var c, d, e, f, g, h, i, j, k, l = [], m = {
        x: 0,
        y: 0,
        z: 0
    };
    this.initFromArray = function(a) {
        this.points = [];
        for (var b = 0; b < a.length; b++) this.points[b] = {
            x: a[b][0],
            y: a[b][1],
            z: a[b][2]
        };
    }, this.getPoint = function(a) {
        return c = (this.points.length - 1) * a, d = Math.floor(c), e = c - d, l[0] = 0 === d ? d : d - 1, 
        l[1] = d, l[2] = d > this.points.length - 2 ? this.points.length - 1 : d + 1, l[3] = d > this.points.length - 3 ? this.points.length - 1 : d + 2, 
        h = this.points[l[0]], i = this.points[l[1]], j = this.points[l[2]], k = this.points[l[3]], 
        f = e * e, g = e * f, m.x = b(h.x, i.x, j.x, k.x, e, f, g), m.y = b(h.y, i.y, j.y, k.y, e, f, g), 
        m.z = b(h.z, i.z, j.z, k.z, e, f, g), m;
    }, this.getControlPointsArray = function() {
        var a, b, c = this.points.length, d = [];
        for (a = 0; c > a; a++) b = this.points[a], d[a] = [ b.x, b.y, b.z ];
        return d;
    }, this.getLength = function(a) {
        var b, c, d, e, f = 0, g = 0, h = 0, i = new THREE.Vector3(), j = new THREE.Vector3(), k = [], l = 0;
        for (k[0] = 0, a || (a = 100), d = this.points.length * a, i.copy(this.points[0]), 
        b = 1; d > b; b++) c = b / d, e = this.getPoint(c), j.copy(e), l += j.distanceTo(i), 
        i.copy(e), f = (this.points.length - 1) * c, g = Math.floor(f), g !== h && (k[g] = l, 
        h = g);
        return k[k.length] = l, {
            chunks: k,
            total: l
        };
    }, this.reparametrizeByArcLength = function(a) {
        var b, c, d, e, f, g, h, i, j = [], k = new THREE.Vector3(), l = this.getLength();
        for (j.push(k.copy(this.points[0]).clone()), b = 1; b < this.points.length; b++) {
            for (g = l.chunks[b] - l.chunks[b - 1], h = Math.ceil(a * g / l.total), e = (b - 1) / (this.points.length - 1), 
            f = b / (this.points.length - 1), c = 1; h - 1 > c; c++) d = e + c * (1 / h) * (f - e), 
            i = this.getPoint(d), j.push(k.copy(i).clone());
            j.push(k.copy(this.points[b]).clone());
        }
        this.points = j;
    };
}, THREE.Triangle = function(a, b, c) {
    this.a = void 0 !== a ? a : new THREE.Vector3(), this.b = void 0 !== b ? b : new THREE.Vector3(), 
    this.c = void 0 !== c ? c : new THREE.Vector3();
}, THREE.Triangle.normal = function() {
    var a = new THREE.Vector3();
    return function(b, c, d, e) {
        var f = e || new THREE.Vector3();
        f.subVectors(d, c), a.subVectors(b, c), f.cross(a);
        var g = f.lengthSq();
        return g > 0 ? f.multiplyScalar(1 / Math.sqrt(g)) : f.set(0, 0, 0);
    };
}(), THREE.Triangle.barycoordFromPoint = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
    return function(d, e, f, g, h) {
        a.subVectors(g, e), b.subVectors(f, e), c.subVectors(d, e);
        var i = a.dot(a), j = a.dot(b), k = a.dot(c), l = b.dot(b), m = b.dot(c), n = i * l - j * j, o = h || new THREE.Vector3();
        if (0 === n) return o.set(-2, -1, -1);
        var p = 1 / n, q = (l * k - j * m) * p, r = (i * m - j * k) * p;
        return o.set(1 - q - r, r, q);
    };
}(), THREE.Triangle.containsPoint = function() {
    var a = new THREE.Vector3();
    return function(b, c, d, e) {
        var f = THREE.Triangle.barycoordFromPoint(b, c, d, e, a);
        return f.x >= 0 && f.y >= 0 && f.x + f.y <= 1;
    };
}(), THREE.Triangle.prototype = {
    constructor: THREE.Triangle,
    set: function(a, b, c) {
        return this.a.copy(a), this.b.copy(b), this.c.copy(c), this;
    },
    setFromPointsAndIndices: function(a, b, c, d) {
        return this.a.copy(a[b]), this.b.copy(a[c]), this.c.copy(a[d]), this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.a.copy(a.a), this.b.copy(a.b), this.c.copy(a.c), this;
    },
    area: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function() {
            return a.subVectors(this.c, this.b), b.subVectors(this.a, this.b), .5 * a.cross(b).length();
        };
    }(),
    midpoint: function(a) {
        var b = a || new THREE.Vector3();
        return b.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
    },
    normal: function(a) {
        return THREE.Triangle.normal(this.a, this.b, this.c, a);
    },
    plane: function(a) {
        var b = a || new THREE.Plane();
        return b.setFromCoplanarPoints(this.a, this.b, this.c);
    },
    barycoordFromPoint: function(a, b) {
        return THREE.Triangle.barycoordFromPoint(a, this.a, this.b, this.c, b);
    },
    containsPoint: function(a) {
        return THREE.Triangle.containsPoint(a, this.a, this.b, this.c);
    },
    equals: function(a) {
        return a.a.equals(this.a) && a.b.equals(this.b) && a.c.equals(this.c);
    }
}, THREE.Interpolant = function(a, b, c, d) {
    this.parameterPositions = a, this._cachedIndex = 0, this.resultBuffer = void 0 !== d ? d : new b.constructor(c), 
    this.sampleValues = b, this.valueSize = c;
}, THREE.Interpolant.prototype = {
    constructor: THREE.Interpolant,
    evaluate: function(a) {
        var b = this.parameterPositions, c = this._cachedIndex, d = b[c], e = b[c - 1];
        a: {
            b: {
                var f;
                c: {
                    d: if (!(d > a)) {
                        for (var g = c + 2; ;) {
                            if (void 0 === d) {
                                if (e > a) break d;
                                return c = b.length, this._cachedIndex = c, this.afterEnd_(c - 1, a, e);
                            }
                            if (c === g) break;
                            if (e = d, d = b[++c], d > a) break b;
                        }
                        f = b.length;
                        break c;
                    }
                    {
                        if (a >= e) break a;
                        var h = b[1];
                        h > a && (c = 2, e = h);
                        for (var g = c - 2; ;) {
                            if (void 0 === e) return this._cachedIndex = 0, this.beforeStart_(0, a, d);
                            if (c === g) break;
                            if (d = e, e = b[--c - 1], a >= e) break b;
                        }
                        f = c, c = 0;
                    }
                }
                for (;f > c; ) {
                    var i = c + f >>> 1;
                    a < b[i] ? f = i : c = i + 1;
                }
                if (d = b[c], e = b[c - 1], void 0 === e) return this._cachedIndex = 0, this.beforeStart_(0, a, d);
                if (void 0 === d) return c = b.length, this._cachedIndex = c, this.afterEnd_(c - 1, e, a);
            }
            this._cachedIndex = c, this.intervalChanged_(c, e, d);
        }
        return this.interpolate_(c, e, a, d);
    },
    settings: null,
    DefaultSettings_: {},
    getSettings_: function() {
        return this.settings || this.DefaultSettings_;
    },
    copySampleValue_: function(a) {
        for (var b = this.resultBuffer, c = this.sampleValues, d = this.valueSize, e = a * d, f = 0; f !== d; ++f) b[f] = c[e + f];
        return b;
    },
    interpolate_: function(a, b, c, d) {
        throw new Error("call to abstract method");
    },
    intervalChanged_: function(a, b, c) {}
}, Object.assign(THREE.Interpolant.prototype, {
    beforeStart_: THREE.Interpolant.prototype.copySampleValue_,
    afterEnd_: THREE.Interpolant.prototype.copySampleValue_
}), THREE.CubicInterpolant = function(a, b, c, d) {
    THREE.Interpolant.call(this, a, b, c, d), this._weightPrev = -0, this._offsetPrev = -0, 
    this._weightNext = -0, this._offsetNext = -0;
}, THREE.CubicInterpolant.prototype = Object.assign(Object.create(THREE.Interpolant.prototype), {
    constructor: THREE.CubicInterpolant,
    DefaultSettings_: {
        endingStart: THREE.ZeroCurvatureEnding,
        endingEnd: THREE.ZeroCurvatureEnding
    },
    intervalChanged_: function(a, b, c) {
        var d = this.parameterPositions, e = a - 2, f = a + 1, g = d[e], h = d[f];
        if (void 0 === g) switch (this.getSettings_().endingStart) {
          case THREE.ZeroSlopeEnding:
            e = a, g = 2 * b - c;
            break;

          case THREE.WrapAroundEnding:
            e = d.length - 2, g = b + d[e] - d[e + 1];
            break;

          default:
            e = a, g = c;
        }
        if (void 0 === h) switch (this.getSettings_().endingEnd) {
          case THREE.ZeroSlopeEnding:
            f = a, h = 2 * c - b;
            break;

          case THREE.WrapAroundEnding:
            f = 1, h = c + d[1] - d[0];
            break;

          default:
            f = a - 1, h = b;
        }
        var i = .5 * (c - b), j = this.valueSize;
        this._weightPrev = i / (b - g), this._weightNext = i / (h - c), this._offsetPrev = e * j, 
        this._offsetNext = f * j;
    },
    interpolate_: function(a, b, c, d) {
        for (var e = this.resultBuffer, f = this.sampleValues, g = this.valueSize, h = a * g, i = h - g, j = this._offsetPrev, k = this._offsetNext, l = this._weightPrev, m = this._weightNext, n = (c - b) / (d - b), o = n * n, p = o * n, q = -l * p + 2 * l * o - l * n, r = (1 + l) * p + (-1.5 - 2 * l) * o + (-.5 + l) * n + 1, s = (-1 - m) * p + (1.5 + m) * o + .5 * n, t = m * p - m * o, u = 0; u !== g; ++u) e[u] = q * f[j + u] + r * f[i + u] + s * f[h + u] + t * f[k + u];
        return e;
    }
}), THREE.DiscreteInterpolant = function(a, b, c, d) {
    THREE.Interpolant.call(this, a, b, c, d);
}, THREE.DiscreteInterpolant.prototype = Object.assign(Object.create(THREE.Interpolant.prototype), {
    constructor: THREE.DiscreteInterpolant,
    interpolate_: function(a, b, c, d) {
        return this.copySampleValue_(a - 1);
    }
}), THREE.LinearInterpolant = function(a, b, c, d) {
    THREE.Interpolant.call(this, a, b, c, d);
}, THREE.LinearInterpolant.prototype = Object.assign(Object.create(THREE.Interpolant.prototype), {
    constructor: THREE.LinearInterpolant,
    interpolate_: function(a, b, c, d) {
        for (var e = this.resultBuffer, f = this.sampleValues, g = this.valueSize, h = a * g, i = h - g, j = (c - b) / (d - b), k = 1 - j, l = 0; l !== g; ++l) e[l] = f[i + l] * k + f[h + l] * j;
        return e;
    }
}), THREE.QuaternionLinearInterpolant = function(a, b, c, d) {
    THREE.Interpolant.call(this, a, b, c, d);
}, THREE.QuaternionLinearInterpolant.prototype = Object.assign(Object.create(THREE.Interpolant.prototype), {
    constructor: THREE.QuaternionLinearInterpolant,
    interpolate_: function(a, b, c, d) {
        for (var e = this.resultBuffer, f = this.sampleValues, g = this.valueSize, h = a * g, i = (c - b) / (d - b), j = h + g; h !== j; h += 4) THREE.Quaternion.slerpFlat(e, 0, f, h - g, f, h, i);
        return e;
    }
}), THREE.Clock = function(a) {
    this.autoStart = void 0 !== a ? a : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, 
    this.running = !1;
}, THREE.Clock.prototype = {
    constructor: THREE.Clock,
    start: function() {
        this.startTime = performance.now(), this.oldTime = this.startTime, this.running = !0;
    },
    stop: function() {
        this.getElapsedTime(), this.running = !1;
    },
    getElapsedTime: function() {
        return this.getDelta(), this.elapsedTime;
    },
    getDelta: function() {
        var a = 0;
        if (this.autoStart && !this.running && this.start(), this.running) {
            var b = performance.now();
            a = .001 * (b - this.oldTime), this.oldTime = b, this.elapsedTime += a;
        }
        return a;
    }
}, THREE.EventDispatcher = function() {}, THREE.EventDispatcher.prototype = {
    constructor: THREE.EventDispatcher,
    apply: function(a) {
        a.addEventListener = THREE.EventDispatcher.prototype.addEventListener, a.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener, 
        a.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener, a.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;
    },
    addEventListener: function(a, b) {
        void 0 === this._listeners && (this._listeners = {});
        var c = this._listeners;
        void 0 === c[a] && (c[a] = []), -1 === c[a].indexOf(b) && c[a].push(b);
    },
    hasEventListener: function(a, b) {
        if (void 0 === this._listeners) return !1;
        var c = this._listeners;
        return void 0 !== c[a] && -1 !== c[a].indexOf(b);
    },
    removeEventListener: function(a, b) {
        if (void 0 !== this._listeners) {
            var c = this._listeners, d = c[a];
            if (void 0 !== d) {
                var e = d.indexOf(b);
                -1 !== e && d.splice(e, 1);
            }
        }
    },
    dispatchEvent: function(a) {
        if (void 0 !== this._listeners) {
            var b = this._listeners, c = b[a.type];
            if (void 0 !== c) {
                a.target = this;
                for (var d = [], e = c.length, f = 0; e > f; f++) d[f] = c[f];
                for (var f = 0; e > f; f++) d[f].call(this, a);
            }
        }
    }
}, THREE.Layers = function() {
    this.mask = 1;
}, THREE.Layers.prototype = {
    constructor: THREE.Layers,
    set: function(a) {
        this.mask = 1 << a;
    },
    enable: function(a) {
        this.mask |= 1 << a;
    },
    toggle: function(a) {
        this.mask ^= 1 << a;
    },
    disable: function(a) {
        this.mask &= ~(1 << a);
    },
    test: function(a) {
        return 0 !== (this.mask & a.mask);
    }
}, function(a) {
    function b(a, b) {
        return a.distance - b.distance;
    }
    function c(a, b, d, e) {
        if (a.visible !== !1 && (a.raycast(b, d), e === !0)) for (var f = a.children, g = 0, h = f.length; h > g; g++) c(f[g], b, d, !0);
    }
    a.Raycaster = function(b, c, d, e) {
        this.ray = new a.Ray(b, c), this.near = d || 0, this.far = e || 1 / 0, this.params = {
            Mesh: {},
            Line: {},
            LOD: {},
            Points: {
                threshold: 1
            },
            Sprite: {}
        }, Object.defineProperties(this.params, {
            PointCloud: {
                get: function() {
                    return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), 
                    this.Points;
                }
            }
        });
    }, a.Raycaster.prototype = {
        constructor: a.Raycaster,
        linePrecision: 1,
        set: function(a, b) {
            this.ray.set(a, b);
        },
        setFromCamera: function(b, c) {
            c instanceof a.PerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(c.matrixWorld), 
            this.ray.direction.set(b.x, b.y, .5).unproject(c).sub(this.ray.origin).normalize()) : c instanceof a.OrthographicCamera ? (this.ray.origin.set(b.x, b.y, -1).unproject(c), 
            this.ray.direction.set(0, 0, -1).transformDirection(c.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.");
        },
        intersectObject: function(a, d) {
            var e = [];
            return c(a, this, e, d), e.sort(b), e;
        },
        intersectObjects: function(a, d) {
            var e = [];
            if (Array.isArray(a) === !1) return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), 
            e;
            for (var f = 0, g = a.length; g > f; f++) c(a[f], this, e, d);
            return e.sort(b), e;
        }
    };
}(THREE), THREE.Object3D = function() {
    function a() {
        e.setFromEuler(d, !1);
    }
    function b() {
        d.setFromQuaternion(e, void 0, !1);
    }
    Object.defineProperty(this, "id", {
        value: THREE.Object3DIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Object3D", 
    this.parent = null, this.children = [], this.up = THREE.Object3D.DefaultUp.clone();
    var c = new THREE.Vector3(), d = new THREE.Euler(), e = new THREE.Quaternion(), f = new THREE.Vector3(1, 1, 1);
    d.onChange(a), e.onChange(b), Object.defineProperties(this, {
        position: {
            enumerable: !0,
            value: c
        },
        rotation: {
            enumerable: !0,
            value: d
        },
        quaternion: {
            enumerable: !0,
            value: e
        },
        scale: {
            enumerable: !0,
            value: f
        },
        modelViewMatrix: {
            value: new THREE.Matrix4()
        },
        normalMatrix: {
            value: new THREE.Matrix3()
        }
    }), this.rotationAutoUpdate = !0, this.matrix = new THREE.Matrix4(), this.matrixWorld = new THREE.Matrix4(), 
    this.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, 
    this.layers = new THREE.Layers(), this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, 
    this.frustumCulled = !0, this.renderOrder = 0, this.userData = {};
}, THREE.Object3D.DefaultUp = new THREE.Vector3(0, 1, 0), THREE.Object3D.DefaultMatrixAutoUpdate = !0, 
THREE.Object3D.prototype = {
    constructor: THREE.Object3D,
    applyMatrix: function(a) {
        this.matrix.multiplyMatrices(a, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale);
    },
    setRotationFromAxisAngle: function(a, b) {
        this.quaternion.setFromAxisAngle(a, b);
    },
    setRotationFromEuler: function(a) {
        this.quaternion.setFromEuler(a, !0);
    },
    setRotationFromMatrix: function(a) {
        this.quaternion.setFromRotationMatrix(a);
    },
    setRotationFromQuaternion: function(a) {
        this.quaternion.copy(a);
    },
    rotateOnAxis: function() {
        var a = new THREE.Quaternion();
        return function(b, c) {
            return a.setFromAxisAngle(b, c), this.quaternion.multiply(a), this;
        };
    }(),
    rotateX: function() {
        var a = new THREE.Vector3(1, 0, 0);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    rotateY: function() {
        var a = new THREE.Vector3(0, 1, 0);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    rotateZ: function() {
        var a = new THREE.Vector3(0, 0, 1);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    translateOnAxis: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            return a.copy(b).applyQuaternion(this.quaternion), this.position.add(a.multiplyScalar(c)), 
            this;
        };
    }(),
    translateX: function() {
        var a = new THREE.Vector3(1, 0, 0);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    translateY: function() {
        var a = new THREE.Vector3(0, 1, 0);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    translateZ: function() {
        var a = new THREE.Vector3(0, 0, 1);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    localToWorld: function(a) {
        return a.applyMatrix4(this.matrixWorld);
    },
    worldToLocal: function() {
        var a = new THREE.Matrix4();
        return function(b) {
            return b.applyMatrix4(a.getInverse(this.matrixWorld));
        };
    }(),
    lookAt: function() {
        var a = new THREE.Matrix4();
        return function(b) {
            a.lookAt(b, this.position, this.up), this.quaternion.setFromRotationMatrix(a);
        };
    }(),
    add: function(a) {
        if (arguments.length > 1) {
            for (var b = 0; b < arguments.length; b++) this.add(arguments[b]);
            return this;
        }
        return a === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", a), 
        this) : (a instanceof THREE.Object3D ? (null !== a.parent && a.parent.remove(a), 
        a.parent = this, a.dispatchEvent({
            type: "added"
        }), this.children.push(a)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", a), 
        this);
    },
    remove: function(a) {
        if (arguments.length > 1) for (var b = 0; b < arguments.length; b++) this.remove(arguments[b]);
        var c = this.children.indexOf(a);
        -1 !== c && (a.parent = null, a.dispatchEvent({
            type: "removed"
        }), this.children.splice(c, 1));
    },
    getObjectById: function(a) {
        return this.getObjectByProperty("id", a);
    },
    getObjectByName: function(a) {
        return this.getObjectByProperty("name", a);
    },
    getObjectByProperty: function(a, b) {
        if (this[a] === b) return this;
        for (var c = 0, d = this.children.length; d > c; c++) {
            var e = this.children[c], f = e.getObjectByProperty(a, b);
            if (void 0 !== f) return f;
        }
    },
    getWorldPosition: function(a) {
        var b = a || new THREE.Vector3();
        return this.updateMatrixWorld(!0), b.setFromMatrixPosition(this.matrixWorld);
    },
    getWorldQuaternion: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c) {
            var d = c || new THREE.Quaternion();
            return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, d, b), d;
        };
    }(),
    getWorldRotation: function() {
        var a = new THREE.Quaternion();
        return function(b) {
            var c = b || new THREE.Euler();
            return this.getWorldQuaternion(a), c.setFromQuaternion(a, this.rotation.order, !1);
        };
    }(),
    getWorldScale: function() {
        var a = new THREE.Vector3(), b = new THREE.Quaternion();
        return function(c) {
            var d = c || new THREE.Vector3();
            return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, b, d), d;
        };
    }(),
    getWorldDirection: function() {
        var a = new THREE.Quaternion();
        return function(b) {
            var c = b || new THREE.Vector3();
            return this.getWorldQuaternion(a), c.set(0, 0, 1).applyQuaternion(a);
        };
    }(),
    raycast: function() {},
    traverse: function(a) {
        a(this);
        for (var b = this.children, c = 0, d = b.length; d > c; c++) b[c].traverse(a);
    },
    traverseVisible: function(a) {
        if (this.visible !== !1) {
            a(this);
            for (var b = this.children, c = 0, d = b.length; d > c; c++) b[c].traverseVisible(a);
        }
    },
    traverseAncestors: function(a) {
        var b = this.parent;
        null !== b && (a(b), b.traverseAncestors(a));
    },
    updateMatrix: function() {
        this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0;
    },
    updateMatrixWorld: function(a) {
        this.matrixAutoUpdate === !0 && this.updateMatrix(), this.matrixWorldNeedsUpdate !== !0 && a !== !0 || (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), 
        this.matrixWorldNeedsUpdate = !1, a = !0);
        for (var b = 0, c = this.children.length; c > b; b++) this.children[b].updateMatrixWorld(a);
    },
    toJSON: function(a) {
        function b(a) {
            var b = [];
            for (var c in a) {
                var d = a[c];
                delete d.metadata, b.push(d);
            }
            return b;
        }
        var c = void 0 === a, d = {};
        c && (a = {
            geometries: {},
            materials: {},
            textures: {},
            images: {}
        }, d.metadata = {
            version: 4.4,
            type: "Object",
            generator: "Object3D.toJSON"
        });
        var e = {};
        if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), 
        "{}" !== JSON.stringify(this.userData) && (e.userData = this.userData), this.castShadow === !0 && (e.castShadow = !0), 
        this.receiveShadow === !0 && (e.receiveShadow = !0), this.visible === !1 && (e.visible = !1), 
        e.matrix = this.matrix.toArray(), void 0 !== this.geometry && (void 0 === a.geometries[this.geometry.uuid] && (a.geometries[this.geometry.uuid] = this.geometry.toJSON(a)), 
        e.geometry = this.geometry.uuid), void 0 !== this.material && (void 0 === a.materials[this.material.uuid] && (a.materials[this.material.uuid] = this.material.toJSON(a)), 
        e.material = this.material.uuid), this.children.length > 0) {
            e.children = [];
            for (var f = 0; f < this.children.length; f++) e.children.push(this.children[f].toJSON(a).object);
        }
        if (c) {
            var g = b(a.geometries), h = b(a.materials), i = b(a.textures), j = b(a.images);
            g.length > 0 && (d.geometries = g), h.length > 0 && (d.materials = h), i.length > 0 && (d.textures = i), 
            j.length > 0 && (d.images = j);
        }
        return d.object = e, d;
    },
    clone: function(a) {
        return new this.constructor().copy(this, a);
    },
    copy: function(a, b) {
        if (void 0 === b && (b = !0), this.name = a.name, this.up.copy(a.up), this.position.copy(a.position), 
        this.quaternion.copy(a.quaternion), this.scale.copy(a.scale), this.rotationAutoUpdate = a.rotationAutoUpdate, 
        this.matrix.copy(a.matrix), this.matrixWorld.copy(a.matrixWorld), this.matrixAutoUpdate = a.matrixAutoUpdate, 
        this.matrixWorldNeedsUpdate = a.matrixWorldNeedsUpdate, this.visible = a.visible, 
        this.castShadow = a.castShadow, this.receiveShadow = a.receiveShadow, this.frustumCulled = a.frustumCulled, 
        this.renderOrder = a.renderOrder, this.userData = JSON.parse(JSON.stringify(a.userData)), 
        b === !0) for (var c = 0; c < a.children.length; c++) {
            var d = a.children[c];
            this.add(d.clone());
        }
        return this;
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype), THREE.Object3DIdCount = 0, 
THREE.Face3 = function(a, b, c, d, e, f) {
    this.a = a, this.b = b, this.c = c, this.normal = d instanceof THREE.Vector3 ? d : new THREE.Vector3(), 
    this.vertexNormals = Array.isArray(d) ? d : [], this.color = e instanceof THREE.Color ? e : new THREE.Color(), 
    this.vertexColors = Array.isArray(e) ? e : [], this.materialIndex = void 0 !== f ? f : 0;
}, THREE.Face3.prototype = {
    constructor: THREE.Face3,
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        this.a = a.a, this.b = a.b, this.c = a.c, this.normal.copy(a.normal), this.color.copy(a.color), 
        this.materialIndex = a.materialIndex;
        for (var b = 0, c = a.vertexNormals.length; c > b; b++) this.vertexNormals[b] = a.vertexNormals[b].clone();
        for (var b = 0, c = a.vertexColors.length; c > b; b++) this.vertexColors[b] = a.vertexColors[b].clone();
        return this;
    }
}, THREE.BufferAttribute = function(a, b) {
    this.uuid = THREE.Math.generateUUID(), this.array = a, this.itemSize = b, this.dynamic = !1, 
    this.updateRange = {
        offset: 0,
        count: -1
    }, this.version = 0;
}, THREE.BufferAttribute.prototype = {
    constructor: THREE.BufferAttribute,
    get count() {
        return this.array.length / this.itemSize;
    },
    set needsUpdate(a) {
        a === !0 && this.version++;
    },
    setDynamic: function(a) {
        return this.dynamic = a, this;
    },
    copy: function(a) {
        return this.array = new a.array.constructor(a.array), this.itemSize = a.itemSize, 
        this.dynamic = a.dynamic, this;
    },
    copyAt: function(a, b, c) {
        a *= this.itemSize, c *= b.itemSize;
        for (var d = 0, e = this.itemSize; e > d; d++) this.array[a + d] = b.array[c + d];
        return this;
    },
    copyArray: function(a) {
        return this.array.set(a), this;
    },
    copyColorsArray: function(a) {
        for (var b = this.array, c = 0, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            void 0 === f && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", d), 
            f = new THREE.Color()), b[c++] = f.r, b[c++] = f.g, b[c++] = f.b;
        }
        return this;
    },
    copyIndicesArray: function(a) {
        for (var b = this.array, c = 0, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            b[c++] = f.a, b[c++] = f.b, b[c++] = f.c;
        }
        return this;
    },
    copyVector2sArray: function(a) {
        for (var b = this.array, c = 0, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            void 0 === f && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", d), 
            f = new THREE.Vector2()), b[c++] = f.x, b[c++] = f.y;
        }
        return this;
    },
    copyVector3sArray: function(a) {
        for (var b = this.array, c = 0, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            void 0 === f && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", d), 
            f = new THREE.Vector3()), b[c++] = f.x, b[c++] = f.y, b[c++] = f.z;
        }
        return this;
    },
    copyVector4sArray: function(a) {
        for (var b = this.array, c = 0, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            void 0 === f && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", d), 
            f = new THREE.Vector4()), b[c++] = f.x, b[c++] = f.y, b[c++] = f.z, b[c++] = f.w;
        }
        return this;
    },
    set: function(a, b) {
        return void 0 === b && (b = 0), this.array.set(a, b), this;
    },
    getX: function(a) {
        return this.array[a * this.itemSize];
    },
    setX: function(a, b) {
        return this.array[a * this.itemSize] = b, this;
    },
    getY: function(a) {
        return this.array[a * this.itemSize + 1];
    },
    setY: function(a, b) {
        return this.array[a * this.itemSize + 1] = b, this;
    },
    getZ: function(a) {
        return this.array[a * this.itemSize + 2];
    },
    setZ: function(a, b) {
        return this.array[a * this.itemSize + 2] = b, this;
    },
    getW: function(a) {
        return this.array[a * this.itemSize + 3];
    },
    setW: function(a, b) {
        return this.array[a * this.itemSize + 3] = b, this;
    },
    setXY: function(a, b, c) {
        return a *= this.itemSize, this.array[a + 0] = b, this.array[a + 1] = c, this;
    },
    setXYZ: function(a, b, c, d) {
        return a *= this.itemSize, this.array[a + 0] = b, this.array[a + 1] = c, this.array[a + 2] = d, 
        this;
    },
    setXYZW: function(a, b, c, d, e) {
        return a *= this.itemSize, this.array[a + 0] = b, this.array[a + 1] = c, this.array[a + 2] = d, 
        this.array[a + 3] = e, this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    }
}, THREE.Int8Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Int8Array(a), b);
}, THREE.Uint8Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Uint8Array(a), b);
}, THREE.Uint8ClampedAttribute = function(a, b) {
    return new THREE.BufferAttribute(new Uint8ClampedArray(a), b);
}, THREE.Int16Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Int16Array(a), b);
}, THREE.Uint16Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Uint16Array(a), b);
}, THREE.Int32Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Int32Array(a), b);
}, THREE.Uint32Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Uint32Array(a), b);
}, THREE.Float32Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Float32Array(a), b);
}, THREE.Float64Attribute = function(a, b) {
    return new THREE.BufferAttribute(new Float64Array(a), b);
}, THREE.DynamicBufferAttribute = function(a, b) {
    return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."), 
    new THREE.BufferAttribute(a, b).setDynamic(!0);
}, THREE.InstancedBufferAttribute = function(a, b, c) {
    THREE.BufferAttribute.call(this, a, b), this.meshPerAttribute = c || 1;
}, THREE.InstancedBufferAttribute.prototype = Object.create(THREE.BufferAttribute.prototype), 
THREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute, 
THREE.InstancedBufferAttribute.prototype.copy = function(a) {
    return THREE.BufferAttribute.prototype.copy.call(this, a), this.meshPerAttribute = a.meshPerAttribute, 
    this;
}, THREE.InterleavedBuffer = function(a, b) {
    this.uuid = THREE.Math.generateUUID(), this.array = a, this.stride = b, this.dynamic = !1, 
    this.updateRange = {
        offset: 0,
        count: -1
    }, this.version = 0;
}, THREE.InterleavedBuffer.prototype = {
    constructor: THREE.InterleavedBuffer,
    get length() {
        return this.array.length;
    },
    get count() {
        return this.array.length / this.stride;
    },
    set needsUpdate(a) {
        a === !0 && this.version++;
    },
    setDynamic: function(a) {
        return this.dynamic = a, this;
    },
    copy: function(a) {
        return this.array = new a.array.constructor(a.array), this.stride = a.stride, this.dynamic = a.dynamic, 
        this;
    },
    copyAt: function(a, b, c) {
        a *= this.stride, c *= b.stride;
        for (var d = 0, e = this.stride; e > d; d++) this.array[a + d] = b.array[c + d];
        return this;
    },
    set: function(a, b) {
        return void 0 === b && (b = 0), this.array.set(a, b), this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    }
}, THREE.InstancedInterleavedBuffer = function(a, b, c) {
    THREE.InterleavedBuffer.call(this, a, b), this.meshPerAttribute = c || 1;
}, THREE.InstancedInterleavedBuffer.prototype = Object.create(THREE.InterleavedBuffer.prototype), 
THREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer, 
THREE.InstancedInterleavedBuffer.prototype.copy = function(a) {
    return THREE.InterleavedBuffer.prototype.copy.call(this, a), this.meshPerAttribute = a.meshPerAttribute, 
    this;
}, THREE.InterleavedBufferAttribute = function(a, b, c) {
    this.uuid = THREE.Math.generateUUID(), this.data = a, this.itemSize = b, this.offset = c;
}, THREE.InterleavedBufferAttribute.prototype = {
    constructor: THREE.InterleavedBufferAttribute,
    get length() {
        return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), 
        this.array.length;
    },
    get count() {
        return this.data.count;
    },
    setX: function(a, b) {
        return this.data.array[a * this.data.stride + this.offset] = b, this;
    },
    setY: function(a, b) {
        return this.data.array[a * this.data.stride + this.offset + 1] = b, this;
    },
    setZ: function(a, b) {
        return this.data.array[a * this.data.stride + this.offset + 2] = b, this;
    },
    setW: function(a, b) {
        return this.data.array[a * this.data.stride + this.offset + 3] = b, this;
    },
    getX: function(a) {
        return this.data.array[a * this.data.stride + this.offset];
    },
    getY: function(a) {
        return this.data.array[a * this.data.stride + this.offset + 1];
    },
    getZ: function(a) {
        return this.data.array[a * this.data.stride + this.offset + 2];
    },
    getW: function(a) {
        return this.data.array[a * this.data.stride + this.offset + 3];
    },
    setXY: function(a, b, c) {
        return a = a * this.data.stride + this.offset, this.data.array[a + 0] = b, this.data.array[a + 1] = c, 
        this;
    },
    setXYZ: function(a, b, c, d) {
        return a = a * this.data.stride + this.offset, this.data.array[a + 0] = b, this.data.array[a + 1] = c, 
        this.data.array[a + 2] = d, this;
    },
    setXYZW: function(a, b, c, d, e) {
        return a = a * this.data.stride + this.offset, this.data.array[a + 0] = b, this.data.array[a + 1] = c, 
        this.data.array[a + 2] = d, this.data.array[a + 3] = e, this;
    }
}, THREE.Geometry = function() {
    Object.defineProperty(this, "id", {
        value: THREE.GeometryIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Geometry", 
    this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [ [] ], 
    this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], 
    this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, 
    this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, 
    this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1;
}, THREE.Geometry.prototype = {
    constructor: THREE.Geometry,
    applyMatrix: function(a) {
        for (var b = new THREE.Matrix3().getNormalMatrix(a), c = 0, d = this.vertices.length; d > c; c++) {
            var e = this.vertices[c];
            e.applyMatrix4(a);
        }
        for (var c = 0, d = this.faces.length; d > c; c++) {
            var f = this.faces[c];
            f.normal.applyMatrix3(b).normalize();
            for (var g = 0, h = f.vertexNormals.length; h > g; g++) f.vertexNormals[g].applyMatrix3(b).normalize();
        }
        return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), 
        this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this;
    },
    rotateX: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationX(b), this.applyMatrix(a), 
            this;
        };
    }(),
    rotateY: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationY(b), this.applyMatrix(a), 
            this;
        };
    }(),
    rotateZ: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationZ(b), this.applyMatrix(a), 
            this;
        };
    }(),
    translate: function() {
        var a;
        return function(b, c, d) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeTranslation(b, c, d), this.applyMatrix(a), 
            this;
        };
    }(),
    scale: function() {
        var a;
        return function(b, c, d) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeScale(b, c, d), this.applyMatrix(a), 
            this;
        };
    }(),
    lookAt: function() {
        var a;
        return function(b) {
            void 0 === a && (a = new THREE.Object3D()), a.lookAt(b), a.updateMatrix(), this.applyMatrix(a.matrix);
        };
    }(),
    fromBufferGeometry: function(a) {
        function b(a, b, d, e) {
            var f = void 0 !== g ? [ k[a].clone(), k[b].clone(), k[d].clone() ] : [], n = void 0 !== h ? [ c.colors[a].clone(), c.colors[b].clone(), c.colors[d].clone() ] : [], o = new THREE.Face3(a, b, d, f, n, e);
            c.faces.push(o), void 0 !== i && c.faceVertexUvs[0].push([ l[a].clone(), l[b].clone(), l[d].clone() ]), 
            void 0 !== j && c.faceVertexUvs[1].push([ m[a].clone(), m[b].clone(), m[d].clone() ]);
        }
        var c = this, d = null !== a.index ? a.index.array : void 0, e = a.attributes, f = e.position.array, g = void 0 !== e.normal ? e.normal.array : void 0, h = void 0 !== e.color ? e.color.array : void 0, i = void 0 !== e.uv ? e.uv.array : void 0, j = void 0 !== e.uv2 ? e.uv2.array : void 0;
        void 0 !== j && (this.faceVertexUvs[1] = []);
        for (var k = [], l = [], m = [], n = 0, o = 0; n < f.length; n += 3, o += 2) c.vertices.push(new THREE.Vector3(f[n], f[n + 1], f[n + 2])), 
        void 0 !== g && k.push(new THREE.Vector3(g[n], g[n + 1], g[n + 2])), void 0 !== h && c.colors.push(new THREE.Color(h[n], h[n + 1], h[n + 2])), 
        void 0 !== i && l.push(new THREE.Vector2(i[o], i[o + 1])), void 0 !== j && m.push(new THREE.Vector2(j[o], j[o + 1]));
        if (void 0 !== d) {
            var p = a.groups;
            if (p.length > 0) for (var n = 0; n < p.length; n++) for (var q = p[n], r = q.start, s = q.count, o = r, t = r + s; t > o; o += 3) b(d[o], d[o + 1], d[o + 2], q.materialIndex); else for (var n = 0; n < d.length; n += 3) b(d[n], d[n + 1], d[n + 2]);
        } else for (var n = 0; n < f.length / 3; n += 3) b(n, n + 1, n + 2);
        return this.computeFaceNormals(), null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()), 
        null !== a.boundingSphere && (this.boundingSphere = a.boundingSphere.clone()), this;
    },
    center: function() {
        this.computeBoundingBox();
        var a = this.boundingBox.center().negate();
        return this.translate(a.x, a.y, a.z), a;
    },
    normalize: function() {
        this.computeBoundingSphere();
        var a = this.boundingSphere.center, b = this.boundingSphere.radius, c = 0 === b ? 1 : 1 / b, d = new THREE.Matrix4();
        return d.set(c, 0, 0, -c * a.x, 0, c, 0, -c * a.y, 0, 0, c, -c * a.z, 0, 0, 0, 1), 
        this.applyMatrix(d), this;
    },
    computeFaceNormals: function() {
        for (var a = new THREE.Vector3(), b = new THREE.Vector3(), c = 0, d = this.faces.length; d > c; c++) {
            var e = this.faces[c], f = this.vertices[e.a], g = this.vertices[e.b], h = this.vertices[e.c];
            a.subVectors(h, g), b.subVectors(f, g), a.cross(b), a.normalize(), e.normal.copy(a);
        }
    },
    computeVertexNormals: function(a) {
        void 0 === a && (a = !0);
        var b, c, d, e, f, g;
        for (g = new Array(this.vertices.length), b = 0, c = this.vertices.length; c > b; b++) g[b] = new THREE.Vector3();
        if (a) {
            var h, i, j, k = new THREE.Vector3(), l = new THREE.Vector3();
            for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], h = this.vertices[f.a], 
            i = this.vertices[f.b], j = this.vertices[f.c], k.subVectors(j, i), l.subVectors(h, i), 
            k.cross(l), g[f.a].add(k), g[f.b].add(k), g[f.c].add(k);
        } else for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], g[f.a].add(f.normal), 
        g[f.b].add(f.normal), g[f.c].add(f.normal);
        for (b = 0, c = this.vertices.length; c > b; b++) g[b].normalize();
        for (d = 0, e = this.faces.length; e > d; d++) {
            f = this.faces[d];
            var m = f.vertexNormals;
            3 === m.length ? (m[0].copy(g[f.a]), m[1].copy(g[f.b]), m[2].copy(g[f.c])) : (m[0] = g[f.a].clone(), 
            m[1] = g[f.b].clone(), m[2] = g[f.c].clone());
        }
        this.faces.length > 0 && (this.normalsNeedUpdate = !0);
    },
    computeMorphNormals: function() {
        var a, b, c, d, e;
        for (c = 0, d = this.faces.length; d > c; c++) for (e = this.faces[c], e.__originalFaceNormal ? e.__originalFaceNormal.copy(e.normal) : e.__originalFaceNormal = e.normal.clone(), 
        e.__originalVertexNormals || (e.__originalVertexNormals = []), a = 0, b = e.vertexNormals.length; b > a; a++) e.__originalVertexNormals[a] ? e.__originalVertexNormals[a].copy(e.vertexNormals[a]) : e.__originalVertexNormals[a] = e.vertexNormals[a].clone();
        var f = new THREE.Geometry();
        for (f.faces = this.faces, a = 0, b = this.morphTargets.length; b > a; a++) {
            if (!this.morphNormals[a]) {
                this.morphNormals[a] = {}, this.morphNormals[a].faceNormals = [], this.morphNormals[a].vertexNormals = [];
                var g, h, i = this.morphNormals[a].faceNormals, j = this.morphNormals[a].vertexNormals;
                for (c = 0, d = this.faces.length; d > c; c++) g = new THREE.Vector3(), h = {
                    a: new THREE.Vector3(),
                    b: new THREE.Vector3(),
                    c: new THREE.Vector3()
                }, i.push(g), j.push(h);
            }
            var k = this.morphNormals[a];
            f.vertices = this.morphTargets[a].vertices, f.computeFaceNormals(), f.computeVertexNormals();
            var g, h;
            for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], g = k.faceNormals[c], 
            h = k.vertexNormals[c], g.copy(e.normal), h.a.copy(e.vertexNormals[0]), h.b.copy(e.vertexNormals[1]), 
            h.c.copy(e.vertexNormals[2]);
        }
        for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], e.normal = e.__originalFaceNormal, 
        e.vertexNormals = e.__originalVertexNormals;
    },
    computeTangents: function() {
        console.warn("THREE.Geometry: .computeTangents() has been removed.");
    },
    computeLineDistances: function() {
        for (var a = 0, b = this.vertices, c = 0, d = b.length; d > c; c++) c > 0 && (a += b[c].distanceTo(b[c - 1])), 
        this.lineDistances[c] = a;
    },
    computeBoundingBox: function() {
        null === this.boundingBox && (this.boundingBox = new THREE.Box3()), this.boundingBox.setFromPoints(this.vertices);
    },
    computeBoundingSphere: function() {
        null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere()), this.boundingSphere.setFromPoints(this.vertices);
    },
    merge: function(a, b, c) {
        if (a instanceof THREE.Geometry == !1) return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", a);
        var d, e = this.vertices.length, f = this.vertices, g = a.vertices, h = this.faces, i = a.faces, j = this.faceVertexUvs[0], k = a.faceVertexUvs[0];
        void 0 === c && (c = 0), void 0 !== b && (d = new THREE.Matrix3().getNormalMatrix(b));
        for (var l = 0, m = g.length; m > l; l++) {
            var n = g[l], o = n.clone();
            void 0 !== b && o.applyMatrix4(b), f.push(o);
        }
        for (l = 0, m = i.length; m > l; l++) {
            var p, q, r, s = i[l], t = s.vertexNormals, u = s.vertexColors;
            p = new THREE.Face3(s.a + e, s.b + e, s.c + e), p.normal.copy(s.normal), void 0 !== d && p.normal.applyMatrix3(d).normalize();
            for (var v = 0, w = t.length; w > v; v++) q = t[v].clone(), void 0 !== d && q.applyMatrix3(d).normalize(), 
            p.vertexNormals.push(q);
            p.color.copy(s.color);
            for (var v = 0, w = u.length; w > v; v++) r = u[v], p.vertexColors.push(r.clone());
            p.materialIndex = s.materialIndex + c, h.push(p);
        }
        for (l = 0, m = k.length; m > l; l++) {
            var x = k[l], y = [];
            if (void 0 !== x) {
                for (var v = 0, w = x.length; w > v; v++) y.push(x[v].clone());
                j.push(y);
            }
        }
    },
    mergeMesh: function(a) {
        return a instanceof THREE.Mesh == !1 ? void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", a) : (a.matrixAutoUpdate && a.updateMatrix(), 
        void this.merge(a.geometry, a.matrix));
    },
    mergeVertices: function() {
        var a, b, c, d, e, f, g, h, i = {}, j = [], k = [], l = 4, m = Math.pow(10, l);
        for (c = 0, d = this.vertices.length; d > c; c++) a = this.vertices[c], b = Math.round(a.x * m) + "_" + Math.round(a.y * m) + "_" + Math.round(a.z * m), 
        void 0 === i[b] ? (i[b] = c, j.push(this.vertices[c]), k[c] = j.length - 1) : k[c] = k[i[b]];
        var n = [];
        for (c = 0, d = this.faces.length; d > c; c++) {
            e = this.faces[c], e.a = k[e.a], e.b = k[e.b], e.c = k[e.c], f = [ e.a, e.b, e.c ];
            for (var o = -1, p = 0; 3 > p; p++) if (f[p] === f[(p + 1) % 3]) {
                o = p, n.push(c);
                break;
            }
        }
        for (c = n.length - 1; c >= 0; c--) {
            var q = n[c];
            for (this.faces.splice(q, 1), g = 0, h = this.faceVertexUvs.length; h > g; g++) this.faceVertexUvs[g].splice(q, 1);
        }
        var r = this.vertices.length - j.length;
        return this.vertices = j, r;
    },
    sortFacesByMaterialIndex: function() {
        function a(a, b) {
            return a.materialIndex - b.materialIndex;
        }
        for (var b = this.faces, c = b.length, d = 0; c > d; d++) b[d]._id = d;
        b.sort(a);
        var e, f, g = this.faceVertexUvs[0], h = this.faceVertexUvs[1];
        g && g.length === c && (e = []), h && h.length === c && (f = []);
        for (var d = 0; c > d; d++) {
            var i = b[d]._id;
            e && e.push(g[i]), f && f.push(h[i]);
        }
        e && (this.faceVertexUvs[0] = e), f && (this.faceVertexUvs[1] = f);
    },
    toJSON: function() {
        function a(a, b, c) {
            return c ? a | 1 << b : a & ~(1 << b);
        }
        function b(a) {
            var b = a.x.toString() + a.y.toString() + a.z.toString();
            return void 0 !== m[b] ? m[b] : (m[b] = l.length / 3, l.push(a.x, a.y, a.z), m[b]);
        }
        function c(a) {
            var b = a.r.toString() + a.g.toString() + a.b.toString();
            return void 0 !== o[b] ? o[b] : (o[b] = n.length, n.push(a.getHex()), o[b]);
        }
        function d(a) {
            var b = a.x.toString() + a.y.toString();
            return void 0 !== q[b] ? q[b] : (q[b] = p.length / 2, p.push(a.x, a.y), q[b]);
        }
        var e = {
            metadata: {
                version: 4.4,
                type: "Geometry",
                generator: "Geometry.toJSON"
            }
        };
        if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), 
        void 0 !== this.parameters) {
            var f = this.parameters;
            for (var g in f) void 0 !== f[g] && (e[g] = f[g]);
            return e;
        }
        for (var h = [], i = 0; i < this.vertices.length; i++) {
            var j = this.vertices[i];
            h.push(j.x, j.y, j.z);
        }
        for (var k = [], l = [], m = {}, n = [], o = {}, p = [], q = {}, i = 0; i < this.faces.length; i++) {
            var r = this.faces[i], s = !0, t = !1, u = void 0 !== this.faceVertexUvs[0][i], v = r.normal.length() > 0, w = r.vertexNormals.length > 0, x = 1 !== r.color.r || 1 !== r.color.g || 1 !== r.color.b, y = r.vertexColors.length > 0, z = 0;
            if (z = a(z, 0, 0), z = a(z, 1, s), z = a(z, 2, t), z = a(z, 3, u), z = a(z, 4, v), 
            z = a(z, 5, w), z = a(z, 6, x), z = a(z, 7, y), k.push(z), k.push(r.a, r.b, r.c), 
            k.push(r.materialIndex), u) {
                var A = this.faceVertexUvs[0][i];
                k.push(d(A[0]), d(A[1]), d(A[2]));
            }
            if (v && k.push(b(r.normal)), w) {
                var B = r.vertexNormals;
                k.push(b(B[0]), b(B[1]), b(B[2]));
            }
            if (x && k.push(c(r.color)), y) {
                var C = r.vertexColors;
                k.push(c(C[0]), c(C[1]), c(C[2]));
            }
        }
        return e.data = {}, e.data.vertices = h, e.data.normals = l, n.length > 0 && (e.data.colors = n), 
        p.length > 0 && (e.data.uvs = [ p ]), e.data.faces = k, e;
    },
    clone: function() {
        return new THREE.Geometry().copy(this);
    },
    copy: function(a) {
        this.vertices = [], this.faces = [], this.faceVertexUvs = [ [] ];
        for (var b = a.vertices, c = 0, d = b.length; d > c; c++) this.vertices.push(b[c].clone());
        for (var e = a.faces, c = 0, d = e.length; d > c; c++) this.faces.push(e[c].clone());
        for (var c = 0, d = a.faceVertexUvs.length; d > c; c++) {
            var f = a.faceVertexUvs[c];
            void 0 === this.faceVertexUvs[c] && (this.faceVertexUvs[c] = []);
            for (var g = 0, h = f.length; h > g; g++) {
                for (var i = f[g], j = [], k = 0, l = i.length; l > k; k++) {
                    var m = i[k];
                    j.push(m.clone());
                }
                this.faceVertexUvs[c].push(j);
            }
        }
        return this;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype), THREE.GeometryIdCount = 0, 
THREE.DirectGeometry = function() {
    Object.defineProperty(this, "id", {
        value: THREE.GeometryIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "DirectGeometry", 
    this.indices = [], this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], 
    this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], 
    this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, 
    this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, 
    this.groupsNeedUpdate = !1;
}, THREE.DirectGeometry.prototype = {
    constructor: THREE.DirectGeometry,
    computeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,
    computeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,
    computeFaceNormals: function() {
        console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.");
    },
    computeVertexNormals: function() {
        console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.");
    },
    computeGroups: function(a) {
        for (var b, c, d = [], e = a.faces, f = 0; f < e.length; f++) {
            var g = e[f];
            g.materialIndex !== c && (c = g.materialIndex, void 0 !== b && (b.count = 3 * f - b.start, 
            d.push(b)), b = {
                start: 3 * f,
                materialIndex: c
            });
        }
        void 0 !== b && (b.count = 3 * f - b.start, d.push(b)), this.groups = d;
    },
    fromGeometry: function(a) {
        var b, c = a.faces, d = a.vertices, e = a.faceVertexUvs, f = e[0] && e[0].length > 0, g = e[1] && e[1].length > 0, h = a.morphTargets, i = h.length;
        if (i > 0) {
            b = [];
            for (var j = 0; i > j; j++) b[j] = [];
            this.morphTargets.position = b;
        }
        var k, l = a.morphNormals, m = l.length;
        if (m > 0) {
            k = [];
            for (var j = 0; m > j; j++) k[j] = [];
            this.morphTargets.normal = k;
        }
        for (var n = a.skinIndices, o = a.skinWeights, p = n.length === d.length, q = o.length === d.length, j = 0; j < c.length; j++) {
            var r = c[j];
            this.vertices.push(d[r.a], d[r.b], d[r.c]);
            var s = r.vertexNormals;
            if (3 === s.length) this.normals.push(s[0], s[1], s[2]); else {
                var t = r.normal;
                this.normals.push(t, t, t);
            }
            var u = r.vertexColors;
            if (3 === u.length) this.colors.push(u[0], u[1], u[2]); else {
                var v = r.color;
                this.colors.push(v, v, v);
            }
            if (f === !0) {
                var w = e[0][j];
                void 0 !== w ? this.uvs.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", j), 
                this.uvs.push(new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2()));
            }
            if (g === !0) {
                var w = e[1][j];
                void 0 !== w ? this.uvs2.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", j), 
                this.uvs2.push(new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2()));
            }
            for (var x = 0; i > x; x++) {
                var y = h[x].vertices;
                b[x].push(y[r.a], y[r.b], y[r.c]);
            }
            for (var x = 0; m > x; x++) {
                var z = l[x].vertexNormals[j];
                k[x].push(z.a, z.b, z.c);
            }
            p && this.skinIndices.push(n[r.a], n[r.b], n[r.c]), q && this.skinWeights.push(o[r.a], o[r.b], o[r.c]);
        }
        return this.computeGroups(a), this.verticesNeedUpdate = a.verticesNeedUpdate, this.normalsNeedUpdate = a.normalsNeedUpdate, 
        this.colorsNeedUpdate = a.colorsNeedUpdate, this.uvsNeedUpdate = a.uvsNeedUpdate, 
        this.groupsNeedUpdate = a.groupsNeedUpdate, this;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype), THREE.BufferGeometry = function() {
    Object.defineProperty(this, "id", {
        value: THREE.GeometryIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", 
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], 
    this.boundingBox = null, this.boundingSphere = null, this.drawRange = {
        start: 0,
        count: 1 / 0
    };
}, THREE.BufferGeometry.prototype = {
    constructor: THREE.BufferGeometry,
    getIndex: function() {
        return this.index;
    },
    setIndex: function(a) {
        this.index = a;
    },
    addAttribute: function(a, b) {
        return b instanceof THREE.BufferAttribute == !1 && b instanceof THREE.InterleavedBufferAttribute == !1 ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), 
        void this.addAttribute(a, new THREE.BufferAttribute(arguments[1], arguments[2]))) : "index" === a ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), 
        void this.setIndex(b)) : (this.attributes[a] = b, this);
    },
    getAttribute: function(a) {
        return this.attributes[a];
    },
    removeAttribute: function(a) {
        return delete this.attributes[a], this;
    },
    addGroup: function(a, b, c) {
        this.groups.push({
            start: a,
            count: b,
            materialIndex: void 0 !== c ? c : 0
        });
    },
    clearGroups: function() {
        this.groups = [];
    },
    setDrawRange: function(a, b) {
        this.drawRange.start = a, this.drawRange.count = b;
    },
    applyMatrix: function(a) {
        var b = this.attributes.position;
        void 0 !== b && (a.applyToVector3Array(b.array), b.needsUpdate = !0);
        var c = this.attributes.normal;
        if (void 0 !== c) {
            var d = new THREE.Matrix3().getNormalMatrix(a);
            d.applyToVector3Array(c.array), c.needsUpdate = !0;
        }
        return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), 
        this;
    },
    rotateX: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationX(b), this.applyMatrix(a), 
            this;
        };
    }(),
    rotateY: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationY(b), this.applyMatrix(a), 
            this;
        };
    }(),
    rotateZ: function() {
        var a;
        return function(b) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeRotationZ(b), this.applyMatrix(a), 
            this;
        };
    }(),
    translate: function() {
        var a;
        return function(b, c, d) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeTranslation(b, c, d), this.applyMatrix(a), 
            this;
        };
    }(),
    scale: function() {
        var a;
        return function(b, c, d) {
            return void 0 === a && (a = new THREE.Matrix4()), a.makeScale(b, c, d), this.applyMatrix(a), 
            this;
        };
    }(),
    lookAt: function() {
        var a;
        return function(b) {
            void 0 === a && (a = new THREE.Object3D()), a.lookAt(b), a.updateMatrix(), this.applyMatrix(a.matrix);
        };
    }(),
    center: function() {
        this.computeBoundingBox();
        var a = this.boundingBox.center().negate();
        return this.translate(a.x, a.y, a.z), a;
    },
    setFromObject: function(a) {
        var b = a.geometry;
        if (a instanceof THREE.Points || a instanceof THREE.Line) {
            var c = new THREE.Float32Attribute(3 * b.vertices.length, 3), d = new THREE.Float32Attribute(3 * b.colors.length, 3);
            if (this.addAttribute("position", c.copyVector3sArray(b.vertices)), this.addAttribute("color", d.copyColorsArray(b.colors)), 
            b.lineDistances && b.lineDistances.length === b.vertices.length) {
                var e = new THREE.Float32Attribute(b.lineDistances.length, 1);
                this.addAttribute("lineDistance", e.copyArray(b.lineDistances));
            }
            null !== b.boundingSphere && (this.boundingSphere = b.boundingSphere.clone()), null !== b.boundingBox && (this.boundingBox = b.boundingBox.clone());
        } else a instanceof THREE.Mesh && b instanceof THREE.Geometry && this.fromGeometry(b);
        return this;
    },
    updateFromObject: function(a) {
        var b = a.geometry;
        if (a instanceof THREE.Mesh) {
            var c = b.__directGeometry;
            if (void 0 === c) return this.fromGeometry(b);
            c.verticesNeedUpdate = b.verticesNeedUpdate, c.normalsNeedUpdate = b.normalsNeedUpdate, 
            c.colorsNeedUpdate = b.colorsNeedUpdate, c.uvsNeedUpdate = b.uvsNeedUpdate, c.groupsNeedUpdate = b.groupsNeedUpdate, 
            b.verticesNeedUpdate = !1, b.normalsNeedUpdate = !1, b.colorsNeedUpdate = !1, b.uvsNeedUpdate = !1, 
            b.groupsNeedUpdate = !1, b = c;
        }
        if (b.verticesNeedUpdate === !0) {
            var d = this.attributes.position;
            void 0 !== d && (d.copyVector3sArray(b.vertices), d.needsUpdate = !0), b.verticesNeedUpdate = !1;
        }
        if (b.normalsNeedUpdate === !0) {
            var d = this.attributes.normal;
            void 0 !== d && (d.copyVector3sArray(b.normals), d.needsUpdate = !0), b.normalsNeedUpdate = !1;
        }
        if (b.colorsNeedUpdate === !0) {
            var d = this.attributes.color;
            void 0 !== d && (d.copyColorsArray(b.colors), d.needsUpdate = !0), b.colorsNeedUpdate = !1;
        }
        if (b.uvsNeedUpdate) {
            var d = this.attributes.uv;
            void 0 !== d && (d.copyVector2sArray(b.uvs), d.needsUpdate = !0), b.uvsNeedUpdate = !1;
        }
        if (b.lineDistancesNeedUpdate) {
            var d = this.attributes.lineDistance;
            void 0 !== d && (d.copyArray(b.lineDistances), d.needsUpdate = !0), b.lineDistancesNeedUpdate = !1;
        }
        return b.groupsNeedUpdate && (b.computeGroups(a.geometry), this.groups = b.groups, 
        b.groupsNeedUpdate = !1), this;
    },
    fromGeometry: function(a) {
        return a.__directGeometry = new THREE.DirectGeometry().fromGeometry(a), this.fromDirectGeometry(a.__directGeometry);
    },
    fromDirectGeometry: function(a) {
        var b = new Float32Array(3 * a.vertices.length);
        if (this.addAttribute("position", new THREE.BufferAttribute(b, 3).copyVector3sArray(a.vertices)), 
        a.normals.length > 0) {
            var c = new Float32Array(3 * a.normals.length);
            this.addAttribute("normal", new THREE.BufferAttribute(c, 3).copyVector3sArray(a.normals));
        }
        if (a.colors.length > 0) {
            var d = new Float32Array(3 * a.colors.length);
            this.addAttribute("color", new THREE.BufferAttribute(d, 3).copyColorsArray(a.colors));
        }
        if (a.uvs.length > 0) {
            var e = new Float32Array(2 * a.uvs.length);
            this.addAttribute("uv", new THREE.BufferAttribute(e, 2).copyVector2sArray(a.uvs));
        }
        if (a.uvs2.length > 0) {
            var f = new Float32Array(2 * a.uvs2.length);
            this.addAttribute("uv2", new THREE.BufferAttribute(f, 2).copyVector2sArray(a.uvs2));
        }
        if (a.indices.length > 0) {
            var g = a.vertices.length > 65535 ? Uint32Array : Uint16Array, h = new g(3 * a.indices.length);
            this.setIndex(new THREE.BufferAttribute(h, 1).copyIndicesArray(a.indices));
        }
        this.groups = a.groups;
        for (var i in a.morphTargets) {
            for (var j = [], k = a.morphTargets[i], l = 0, m = k.length; m > l; l++) {
                var n = k[l], o = new THREE.Float32Attribute(3 * n.length, 3);
                j.push(o.copyVector3sArray(n));
            }
            this.morphAttributes[i] = j;
        }
        if (a.skinIndices.length > 0) {
            var p = new THREE.Float32Attribute(4 * a.skinIndices.length, 4);
            this.addAttribute("skinIndex", p.copyVector4sArray(a.skinIndices));
        }
        if (a.skinWeights.length > 0) {
            var q = new THREE.Float32Attribute(4 * a.skinWeights.length, 4);
            this.addAttribute("skinWeight", q.copyVector4sArray(a.skinWeights));
        }
        return null !== a.boundingSphere && (this.boundingSphere = a.boundingSphere.clone()), 
        null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()), this;
    },
    computeBoundingBox: function() {
        new THREE.Vector3();
        return function() {
            null === this.boundingBox && (this.boundingBox = new THREE.Box3());
            var a = this.attributes.position.array;
            a && this.boundingBox.setFromArray(a), void 0 !== a && 0 !== a.length || (this.boundingBox.min.set(0, 0, 0), 
            this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
        };
    }(),
    computeBoundingSphere: function() {
        var a = new THREE.Box3(), b = new THREE.Vector3();
        return function() {
            null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere());
            var c = this.attributes.position.array;
            if (c) {
                var d = this.boundingSphere.center;
                a.setFromArray(c), a.center(d);
                for (var e = 0, f = 0, g = c.length; g > f; f += 3) b.fromArray(c, f), e = Math.max(e, d.distanceToSquared(b));
                this.boundingSphere.radius = Math.sqrt(e), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
            }
        };
    }(),
    computeFaceNormals: function() {},
    computeVertexNormals: function() {
        var a = this.index, b = this.attributes, c = this.groups;
        if (b.position) {
            var d = b.position.array;
            if (void 0 === b.normal) this.addAttribute("normal", new THREE.BufferAttribute(new Float32Array(d.length), 3)); else for (var e = b.normal.array, f = 0, g = e.length; g > f; f++) e[f] = 0;
            var h, i, j, k = b.normal.array, l = new THREE.Vector3(), m = new THREE.Vector3(), n = new THREE.Vector3(), o = new THREE.Vector3(), p = new THREE.Vector3();
            if (a) {
                var q = a.array;
                0 === c.length && this.addGroup(0, q.length);
                for (var r = 0, s = c.length; s > r; ++r) for (var t = c[r], u = t.start, v = t.count, f = u, g = u + v; g > f; f += 3) h = 3 * q[f + 0], 
                i = 3 * q[f + 1], j = 3 * q[f + 2], l.fromArray(d, h), m.fromArray(d, i), n.fromArray(d, j), 
                o.subVectors(n, m), p.subVectors(l, m), o.cross(p), k[h] += o.x, k[h + 1] += o.y, 
                k[h + 2] += o.z, k[i] += o.x, k[i + 1] += o.y, k[i + 2] += o.z, k[j] += o.x, k[j + 1] += o.y, 
                k[j + 2] += o.z;
            } else for (var f = 0, g = d.length; g > f; f += 9) l.fromArray(d, f), m.fromArray(d, f + 3), 
            n.fromArray(d, f + 6), o.subVectors(n, m), p.subVectors(l, m), o.cross(p), k[f] = o.x, 
            k[f + 1] = o.y, k[f + 2] = o.z, k[f + 3] = o.x, k[f + 4] = o.y, k[f + 5] = o.z, 
            k[f + 6] = o.x, k[f + 7] = o.y, k[f + 8] = o.z;
            this.normalizeNormals(), b.normal.needsUpdate = !0;
        }
    },
    merge: function(a, b) {
        if (a instanceof THREE.BufferGeometry == !1) return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", a);
        void 0 === b && (b = 0);
        var c = this.attributes;
        for (var d in c) if (void 0 !== a.attributes[d]) for (var e = c[d], f = e.array, g = a.attributes[d], h = g.array, i = g.itemSize, j = 0, k = i * b; j < h.length; j++, 
        k++) f[k] = h[j];
        return this;
    },
    normalizeNormals: function() {
        for (var a, b, c, d, e = this.attributes.normal.array, f = 0, g = e.length; g > f; f += 3) a = e[f], 
        b = e[f + 1], c = e[f + 2], d = 1 / Math.sqrt(a * a + b * b + c * c), e[f] *= d, 
        e[f + 1] *= d, e[f + 2] *= d;
    },
    toNonIndexed: function() {
        if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), 
        this;
        var a = new THREE.BufferGeometry(), b = this.index.array, c = this.attributes;
        for (var d in c) {
            for (var e = c[d], f = e.array, g = e.itemSize, h = new f.constructor(b.length * g), i = 0, j = 0, k = 0, l = b.length; l > k; k++) {
                i = b[k] * g;
                for (var m = 0; g > m; m++) h[j++] = f[i++];
            }
            a.addAttribute(d, new THREE.BufferAttribute(h, g));
        }
        return a;
    },
    toJSON: function() {
        var a = {
            metadata: {
                version: 4.4,
                type: "BufferGeometry",
                generator: "BufferGeometry.toJSON"
            }
        };
        if (a.uuid = this.uuid, a.type = this.type, "" !== this.name && (a.name = this.name), 
        void 0 !== this.parameters) {
            var b = this.parameters;
            for (var c in b) void 0 !== b[c] && (a[c] = b[c]);
            return a;
        }
        a.data = {
            attributes: {}
        };
        var d = this.index;
        if (null !== d) {
            var e = Array.prototype.slice.call(d.array);
            a.data.index = {
                type: d.array.constructor.name,
                array: e
            };
        }
        var f = this.attributes;
        for (var c in f) {
            var g = f[c], e = Array.prototype.slice.call(g.array);
            a.data.attributes[c] = {
                itemSize: g.itemSize,
                type: g.array.constructor.name,
                array: e
            };
        }
        var h = this.groups;
        h.length > 0 && (a.data.groups = JSON.parse(JSON.stringify(h)));
        var i = this.boundingSphere;
        return null !== i && (a.data.boundingSphere = {
            center: i.center.toArray(),
            radius: i.radius
        }), a;
    },
    clone: function() {
        return new THREE.BufferGeometry().copy(this);
    },
    copy: function(a) {
        var b = a.index;
        null !== b && this.setIndex(b.clone());
        var c = a.attributes;
        for (var d in c) {
            var e = c[d];
            this.addAttribute(d, e.clone());
        }
        for (var f = a.groups, g = 0, h = f.length; h > g; g++) {
            var i = f[g];
            this.addGroup(i.start, i.count);
        }
        return this;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype), THREE.BufferGeometry.MaxIndex = 65535, 
THREE.InstancedBufferGeometry = function() {
    THREE.BufferGeometry.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0;
}, THREE.InstancedBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry, 
THREE.InstancedBufferGeometry.prototype.addGroup = function(a, b, c) {
    this.groups.push({
        start: a,
        count: b,
        instances: c
    });
}, THREE.InstancedBufferGeometry.prototype.copy = function(a) {
    var b = a.index;
    null !== b && this.setIndex(b.clone());
    var c = a.attributes;
    for (var d in c) {
        var e = c[d];
        this.addAttribute(d, e.clone());
    }
    for (var f = a.groups, g = 0, h = f.length; h > g; g++) {
        var i = f[g];
        this.addGroup(i.start, i.count, i.instances);
    }
    return this;
}, THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype), 
THREE.Uniform = function(a, b) {
    this.type = a, this.value = b, this.dynamic = !1;
}, THREE.Uniform.prototype = {
    constructor: THREE.Uniform,
    onUpdate: function(a) {
        return this.dynamic = !0, this.onUpdateCallback = a, this;
    }
}, THREE.AnimationClip = function(a, b, c) {
    this.name = a || THREE.Math.generateUUID(), this.tracks = c, this.duration = void 0 !== b ? b : -1, 
    this.duration < 0 && this.resetDuration(), this.trim(), this.optimize();
}, THREE.AnimationClip.prototype = {
    constructor: THREE.AnimationClip,
    resetDuration: function() {
        for (var a = this.tracks, b = 0, c = 0, d = a.length; c !== d; ++c) {
            var e = this.tracks[c];
            b = Math.max(b, e.times[e.times.length - 1]);
        }
        this.duration = b;
    },
    trim: function() {
        for (var a = 0; a < this.tracks.length; a++) this.tracks[a].trim(0, this.duration);
        return this;
    },
    optimize: function() {
        for (var a = 0; a < this.tracks.length; a++) this.tracks[a].optimize();
        return this;
    }
}, Object.assign(THREE.AnimationClip, {
    parse: function(a) {
        for (var b = [], c = a.tracks, d = 1 / (a.fps || 1), e = 0, f = c.length; e !== f; ++e) b.push(THREE.KeyframeTrack.parse(c[e]).scale(d));
        return new THREE.AnimationClip(a.name, a.duration, b);
    },
    toJSON: function(a) {
        for (var b = [], c = a.tracks, d = {
            name: a.name,
            duration: a.duration,
            tracks: b
        }, e = 0, f = c.length; e !== f; ++e) b.push(THREE.KeyframeTrack.toJSON(c[e]));
        return d;
    },
    CreateFromMorphTargetSequence: function(a, b, c) {
        for (var d = b.length, e = [], f = 0; d > f; f++) {
            var g = [], h = [];
            g.push((f + d - 1) % d, f, (f + 1) % d), h.push(0, 1, 0);
            var i = THREE.AnimationUtils.getKeyframeOrder(g);
            g = THREE.AnimationUtils.sortedArray(g, 1, i), h = THREE.AnimationUtils.sortedArray(h, 1, i), 
            0 === g[0] && (g.push(d), h.push(h[0])), e.push(new THREE.NumberKeyframeTrack(".morphTargetInfluences[" + b[f].name + "]", g, h).scale(1 / c));
        }
        return new THREE.AnimationClip(a, -1, e);
    },
    findByName: function(a, b) {
        for (var c = 0; c < a.length; c++) if (a[c].name === b) return a[c];
        return null;
    },
    CreateClipsFromMorphTargetSequences: function(a, b) {
        for (var c = {}, d = /^([\w-]*?)([\d]+)$/, e = 0, f = a.length; f > e; e++) {
            var g = a[e], h = g.name.match(d);
            if (h && h.length > 1) {
                var i = h[1], j = c[i];
                j || (c[i] = j = []), j.push(g);
            }
        }
        var k = [];
        for (var i in c) k.push(THREE.AnimationClip.CreateFromMorphTargetSequence(i, c[i], b));
        return k;
    },
    parseAnimation: function(a, b, c) {
        if (!a) return console.error("  no animation in JSONLoader data"), null;
        for (var d = function(a, b, c, d, e) {
            if (0 !== c.length) {
                var f = [], g = [];
                THREE.AnimationUtils.flattenJSON(c, f, g, d), 0 !== f.length && e.push(new a(b, f, g));
            }
        }, e = [], f = a.name || "default", g = a.length || -1, h = a.fps || 30, i = a.hierarchy || [], j = 0; j < i.length; j++) {
            var k = i[j].keys;
            if (k && 0 != k.length) if (k[0].morphTargets) {
                for (var l = {}, m = 0; m < k.length; m++) if (k[m].morphTargets) for (var n = 0; n < k[m].morphTargets.length; n++) l[k[m].morphTargets[n]] = -1;
                for (var o in l) {
                    for (var p = [], q = [], n = 0; n !== k[m].morphTargets.length; ++n) {
                        var r = k[m];
                        p.push(r.time), q.push(r.morphTarget === o ? 1 : 0);
                    }
                    e.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence[" + o + "]", p, q));
                }
                g = l.length * (h || 1);
            } else {
                var s = ".bones[" + b[j].name + "]";
                d(THREE.VectorKeyframeTrack, s + ".position", k, "pos", e), d(THREE.QuaternionKeyframeTrack, s + ".quaternion", k, "rot", e), 
                d(THREE.VectorKeyframeTrack, s + ".scale", k, "scl", e);
            }
        }
        if (0 === e.length) return null;
        var t = new THREE.AnimationClip(f, g, e);
        return t;
    }
}), THREE.AnimationMixer = function(a) {
    this._root = a, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1;
}, THREE.AnimationMixer.prototype = {
    constructor: THREE.AnimationMixer,
    clipAction: function(a, b) {
        var c, d = b || this._root, e = d.uuid, f = "string" == typeof a ? a : a.name, g = a !== f ? a : null, h = this._actionsByClip[f];
        if (void 0 !== h) {
            var i = h.actionByRoot[e];
            if (void 0 !== i) return i;
            if (c = h.knownActions[0], g = c._clip, a !== f && a !== g) throw new Error("Different clips with the same name detected!");
        }
        if (null === g) return null;
        var j = new THREE.AnimationMixer._Action(this, g, b);
        return this._bindAction(j, c), this._addInactiveAction(j, f, e), j;
    },
    existingAction: function(a, b) {
        var c = b || this._root, d = c.uuid, e = "string" == typeof a ? a : a.name, f = this._actionsByClip[e];
        return void 0 !== f ? f.actionByRoot[d] || null : null;
    },
    stopAllAction: function() {
        var a = this._actions, b = this._nActiveActions, c = this._bindings, d = this._nActiveBindings;
        this._nActiveActions = 0, this._nActiveBindings = 0;
        for (var e = 0; e !== b; ++e) a[e].reset();
        for (var e = 0; e !== d; ++e) c[e].useCount = 0;
        return this;
    },
    update: function(a) {
        a *= this.timeScale;
        for (var b = this._actions, c = this._nActiveActions, d = this.time += a, e = Math.sign(a), f = this._accuIndex ^= 1, g = 0; g !== c; ++g) {
            var h = b[g];
            h.enabled && h._update(d, a, e, f);
        }
        for (var i = this._bindings, j = this._nActiveBindings, g = 0; g !== j; ++g) i[g].apply(f);
        return this;
    },
    getRoot: function() {
        return this._root;
    },
    uncacheClip: function(a) {
        var b = this._actions, c = a.name, d = this._actionsByClip, e = d[c];
        if (void 0 !== e) {
            for (var f = e.knownActions, g = 0, h = f.length; g !== h; ++g) {
                var i = f[g];
                this._deactivateAction(i);
                var j = i._cacheIndex, k = b[b.length - 1];
                i._cacheIndex = null, i._byClipCacheIndex = null, k._cacheIndex = j, b[j] = k, b.pop(), 
                this._removeInactiveBindingsForAction(i);
            }
            delete d[c];
        }
    },
    uncacheRoot: function(a) {
        var b = a.uuid, c = this._actionsByClip;
        for (var d in c) {
            var e = c[d].actionByRoot, f = e[b];
            void 0 !== f && (this._deactivateAction(f), this._removeInactiveAction(f));
        }
        var g = this._bindingsByRootAndName, h = g[b];
        if (void 0 !== h) for (var i in h) {
            var j = h[i];
            j.restoreOriginalState(), this._removeInactiveBinding(j);
        }
    },
    uncacheAction: function(a, b) {
        var c = this.existingAction(a, b);
        null !== c && (this._deactivateAction(c), this._removeInactiveAction(c));
    }
}, THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype), THREE.AnimationMixer._Action = function(a, b, c) {
    this._mixer = a, this._clip = b, this._localRoot = c || null;
    for (var d = b.tracks, e = d.length, f = new Array(e), g = {
        endingStart: THREE.ZeroCurvatureEnding,
        endingEnd: THREE.ZeroCurvatureEnding
    }, h = 0; h !== e; ++h) {
        var i = d[h].createInterpolant(null);
        f[h] = i, i.settings = g;
    }
    this._interpolantSettings = g, this._interpolants = f, this._propertyBindings = new Array(e), 
    this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, 
    this._weightInterpolant = null, this.loop = THREE.LoopRepeat, this._loopCount = -1, 
    this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, 
    this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, 
    this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0;
}, THREE.AnimationMixer._Action.prototype = {
    constructor: THREE.AnimationMixer._Action,
    play: function() {
        return this._mixer._activateAction(this), this;
    },
    stop: function() {
        return this._mixer._deactivateAction(this), this.reset();
    },
    reset: function() {
        return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, 
        this._startTime = null, this.stopFading().stopWarping();
    },
    isRunning: function() {
        this._startTime;
        return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this);
    },
    isScheduled: function() {
        return this._mixer._isActiveAction(this);
    },
    startAt: function(a) {
        return this._startTime = a, this;
    },
    setLoop: function(a, b) {
        return this.loop = a, this.repetitions = b, this;
    },
    setEffectiveWeight: function(a) {
        return this.weight = a, this._effectiveWeight = this.enabled ? a : 0, this.stopFading();
    },
    getEffectiveWeight: function() {
        return this._effectiveWeight;
    },
    fadeIn: function(a) {
        return this._scheduleFading(a, 0, 1);
    },
    fadeOut: function(a) {
        return this._scheduleFading(a, 1, 0);
    },
    crossFadeFrom: function(a, b, c) {
        this._mixer;
        if (a.fadeOut(b), this.fadeIn(b), c) {
            var d = this._clip.duration, e = a._clip.duration, f = e / d, g = d / e;
            a.warp(1, f, b), this.warp(g, 1, b);
        }
        return this;
    },
    crossFadeTo: function(a, b, c) {
        return a.crossFadeFrom(this, b, c);
    },
    stopFading: function() {
        var a = this._weightInterpolant;
        return null !== a && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(a)), 
        this;
    },
    setEffectiveTimeScale: function(a) {
        return this.timeScale = a, this._effectiveTimeScale = this.paused ? 0 : a, this.stopWarping();
    },
    getEffectiveTimeScale: function() {
        return this._effectiveTimeScale;
    },
    setDuration: function(a) {
        return this.timeScale = this._clip.duration / a, this.stopWarping();
    },
    syncWith: function(a) {
        return this.time = a.time, this.timeScale = a.timeScale, this.stopWarping();
    },
    halt: function(a) {
        return this.warp(this._currentTimeScale, 0, a);
    },
    warp: function(a, b, c) {
        var d = this._mixer, e = d.time, f = this._timeScaleInterpolant, g = this.timeScale;
        null === f && (f = d._lendControlInterpolant(), this._timeScaleInterpolant = f);
        var h = f.parameterPositions, i = f.sampleValues;
        return h[0] = e, h[1] = e + c, i[0] = a / g, i[1] = b / g, this;
    },
    stopWarping: function() {
        var a = this._timeScaleInterpolant;
        return null !== a && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(a)), 
        this;
    },
    getMixer: function() {
        return this._mixer;
    },
    getClip: function() {
        return this._clip;
    },
    getRoot: function() {
        return this._localRoot || this._mixer._root;
    },
    _update: function(a, b, c, d) {
        var e = this._startTime;
        if (null !== e) {
            var f = (a - e) * c;
            if (0 > f || 0 === c) return;
            this._startTime = null, b = c * f;
        }
        b *= this._updateTimeScale(a);
        var g = this._updateTime(b), h = this._updateWeight(a);
        if (h > 0) for (var i = this._interpolants, j = this._propertyBindings, k = 0, l = i.length; k !== l; ++k) i[k].evaluate(g), 
        j[k].accumulate(d, h);
    },
    _updateWeight: function(a) {
        var b = 0;
        if (this.enabled) {
            b = this.weight;
            var c = this._weightInterpolant;
            if (null !== c) {
                var d = c.evaluate(a)[0];
                b *= d, a > c.parameterPositions[1] && (this.stopFading(), 0 === d && (this.enabled = !1));
            }
        }
        return this._effectiveWeight = b, b;
    },
    _updateTimeScale: function(a) {
        var b = 0;
        if (!this.paused) {
            b = this.timeScale;
            var c = this._timeScaleInterpolant;
            if (null !== c) {
                var d = c.evaluate(a)[0];
                b *= d, a > c.parameterPositions[1] && (this.stopWarping(), 0 === b ? this.pause = !0 : this.timeScale = b);
            }
        }
        return this._effectiveTimeScale = b, b;
    },
    _updateTime: function(a) {
        var b = this.time + a;
        if (0 === a) return b;
        var c = this._clip.duration, d = this.loop, e = this._loopCount, f = !1;
        switch (d) {
          case THREE.LoopOnce:
            if (-1 === e && (this.loopCount = 0, this._setEndings(!0, !0, !1)), b >= c) b = c; else {
                if (!(0 > b)) break;
                b = 0;
            }
            this.clampWhenFinished ? this.pause = !0 : this.enabled = !1, this._mixer.dispatchEvent({
                type: "finished",
                action: this,
                direction: 0 > a ? -1 : 1
            });
            break;

          case THREE.LoopPingPong:
            f = !0;

          case THREE.LoopRepeat:
            if (-1 === e && (a > 0 ? (e = 0, this._setEndings(!0, 0 === this.repetitions, f)) : this._setEndings(0 === this.repetitions, !0, f)), 
            b >= c || 0 > b) {
                var g = Math.floor(b / c);
                b -= c * g, e += Math.abs(g);
                var h = this.repetitions - e;
                if (0 > h) {
                    this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, b = a > 0 ? c : 0, 
                    this._mixer.dispatchEvent({
                        type: "finished",
                        action: this,
                        direction: a > 0 ? 1 : -1
                    });
                    break;
                }
                if (0 === h) {
                    var i = 0 > a;
                    this._setEndings(i, !i, f);
                } else this._setEndings(!1, !1, f);
                this._loopCount = e, this._mixer.dispatchEvent({
                    type: "loop",
                    action: this,
                    loopDelta: g
                });
            }
            if (d === THREE.LoopPingPong && 1 === (1 & e)) return this.time = b, c - b;
        }
        return this.time = b, b;
    },
    _setEndings: function(a, b, c) {
        var d = this._interpolantSettings;
        c ? (d.endingStart = THREE.ZeroSlopeEnding, d.endingEnd = THREE.ZeroSlopeEnding) : (a ? d.endingStart = this.zeroSlopeAtStart ? THREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding : d.endingStart = THREE.WrapAroundEnding, 
        b ? d.endingEnd = this.zeroSlopeAtEnd ? THREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding : d.endingEnd = THREE.WrapAroundEnding);
    },
    _scheduleFading: function(a, b, c) {
        var d = this._mixer, e = d.time, f = this._weightInterpolant;
        null === f && (f = d._lendControlInterpolant(), this._weightInterpolant = f);
        var g = f.parameterPositions, h = f.sampleValues;
        return g[0] = e, h[0] = b, g[1] = e + a, h[1] = c, this;
    }
}, Object.assign(THREE.AnimationMixer.prototype, {
    _bindAction: function(a, b) {
        var c = a._localRoot || this._root, d = a._clip.tracks, e = d.length, f = a._propertyBindings, g = a._interpolants, h = c.uuid, i = this._bindingsByRootAndName, j = i[h];
        void 0 === j && (j = {}, i[h] = j);
        for (var k = 0; k !== e; ++k) {
            var l = d[k], m = l.name, n = j[m];
            if (void 0 !== n) f[k] = n; else {
                if (n = f[k], void 0 !== n) {
                    null === n._cacheIndex && (++n.referenceCount, this._addInactiveBinding(n, h, m));
                    continue;
                }
                var o = b && b._propertyBindings[k].binding.parsedPath;
                n = new THREE.PropertyMixer(THREE.PropertyBinding.create(c, m, o), l.ValueTypeName, l.getValueSize()), 
                ++n.referenceCount, this._addInactiveBinding(n, h, m), f[k] = n;
            }
            g[k].resultBuffer = n.buffer;
        }
    },
    _activateAction: function(a) {
        if (!this._isActiveAction(a)) {
            if (null === a._cacheIndex) {
                var b = (a._localRoot || this._root).uuid, c = a._clip.name, d = this._actionsByClip[c];
                this._bindAction(a, d && d.knownActions[0]), this._addInactiveAction(a, c, b);
            }
            for (var e = a._propertyBindings, f = 0, g = e.length; f !== g; ++f) {
                var h = e[f];
                0 === h.useCount++ && (this._lendBinding(h), h.saveOriginalState());
            }
            this._lendAction(a);
        }
    },
    _deactivateAction: function(a) {
        if (this._isActiveAction(a)) {
            for (var b = a._propertyBindings, c = 0, d = b.length; c !== d; ++c) {
                var e = b[c];
                0 === --e.useCount && (e.restoreOriginalState(), this._takeBackBinding(e));
            }
            this._takeBackAction(a);
        }
    },
    _initMemoryManager: function() {
        this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], 
        this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], 
        this._nActiveControlInterpolants = 0;
        var a = this;
        this.stats = {
            actions: {
                get total() {
                    return a._actions.length;
                },
                get inUse() {
                    return a._nActiveActions;
                }
            },
            bindings: {
                get total() {
                    return a._bindings.length;
                },
                get inUse() {
                    return a._nActiveBindings;
                }
            },
            controlInterpolants: {
                get total() {
                    return a._controlInterpolants.length;
                },
                get inUse() {
                    return a._nActiveControlInterpolants;
                }
            }
        };
    },
    _isActiveAction: function(a) {
        var b = a._cacheIndex;
        return null !== b && b < this._nActiveActions;
    },
    _addInactiveAction: function(a, b, c) {
        var d = this._actions, e = this._actionsByClip, f = e[b];
        if (void 0 === f) f = {
            knownActions: [ a ],
            actionByRoot: {}
        }, a._byClipCacheIndex = 0, e[b] = f; else {
            var g = f.knownActions;
            a._byClipCacheIndex = g.length, g.push(a);
        }
        a._cacheIndex = d.length, d.push(a), f.actionByRoot[c] = a;
    },
    _removeInactiveAction: function(a) {
        var b = this._actions, c = b[b.length - 1], d = a._cacheIndex;
        c._cacheIndex = d, b[d] = c, b.pop(), a._cacheIndex = null;
        var e = a._clip.name, f = this._actionsByClip, g = f[e], h = g.knownActions, i = h[h.length - 1], j = a._byClipCacheIndex;
        i._byClipCacheIndex = j, h[j] = i, h.pop(), a._byClipCacheIndex = null;
        var k = g.actionByRoot, l = (b._localRoot || this._root).uuid;
        delete k[l], 0 === h.length && delete f[e], this._removeInactiveBindingsForAction(a);
    },
    _removeInactiveBindingsForAction: function(a) {
        for (var b = a._propertyBindings, c = 0, d = b.length; c !== d; ++c) {
            var e = b[c];
            0 === --e.referenceCount && this._removeInactiveBinding(e);
        }
    },
    _lendAction: function(a) {
        var b = this._actions, c = a._cacheIndex, d = this._nActiveActions++, e = b[d];
        a._cacheIndex = d, b[d] = a, e._cacheIndex = c, b[c] = e;
    },
    _takeBackAction: function(a) {
        var b = this._actions, c = a._cacheIndex, d = --this._nActiveActions, e = b[d];
        a._cacheIndex = d, b[d] = a, e._cacheIndex = c, b[c] = e;
    },
    _addInactiveBinding: function(a, b, c) {
        var d = this._bindingsByRootAndName, e = d[b], f = this._bindings;
        void 0 === e && (e = {}, d[b] = e), e[c] = a, a._cacheIndex = f.length, f.push(a);
    },
    _removeInactiveBinding: function(a) {
        var b = this._bindings, c = a.binding, d = c.rootNode.uuid, e = c.path, f = this._bindingsByRootAndName, g = f[d], h = b[b.length - 1], i = a._cacheIndex;
        h._cacheIndex = i, b[i] = h, b.pop(), delete g[e];
        a: {
            for (var j in g) break a;
            delete f[d];
        }
    },
    _lendBinding: function(a) {
        var b = this._bindings, c = a._cacheIndex, d = this._nActiveBindings++, e = b[d];
        a._cacheIndex = d, b[d] = a, e._cacheIndex = c, b[c] = e;
    },
    _takeBackBinding: function(a) {
        var b = this._bindings, c = a._cacheIndex, d = --this._nActiveBindings, e = b[d];
        a._cacheIndex = d, b[d] = a, e._cacheIndex = c, b[c] = e;
    },
    _lendControlInterpolant: function() {
        var a = this._controlInterpolants, b = this._nActiveControlInterpolants++, c = a[b];
        return void 0 === c && (c = new THREE.LinearInterpolant(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer), 
        c.__cacheIndex = b, a[b] = c), c;
    },
    _takeBackControlInterpolant: function(a) {
        var b = this._controlInterpolants, c = a.__cacheIndex, d = --this._nActiveControlInterpolants, e = b[d];
        a.__cacheIndex = d, b[d] = a, e.__cacheIndex = c, b[c] = e;
    },
    _controlInterpolantsResultBuffer: new Float32Array(1)
}), THREE.AnimationObjectGroup = function(a) {
    this.uuid = THREE.Math.generateUUID(), this._objects = Array.prototype.slice.call(arguments), 
    this.nCachedObjects_ = 0;
    var b = {};
    this._indicesByUUID = b;
    for (var c = 0, d = arguments.length; c !== d; ++c) b[arguments[c].uuid] = c;
    this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {};
    var e = this;
    this.stats = {
        objects: {
            get total() {
                return e._objects.length;
            },
            get inUse() {
                return this.total - e.nCachedObjects_;
            }
        },
        get bindingsPerObject() {
            return e._bindings.length;
        }
    };
}, THREE.AnimationObjectGroup.prototype = {
    constructor: THREE.AnimationObjectGroup,
    add: function(a) {
        for (var b = this._objects, c = b.length, d = this.nCachedObjects_, e = this._indicesByUUID, f = this._paths, g = this._parsedPaths, h = this._bindings, i = h.length, j = 0, k = arguments.length; j !== k; ++j) {
            var l = arguments[j], m = l.uuid, n = e[m];
            if (void 0 === n) {
                n = c++, e[m] = n, b.push(l);
                for (var o = 0, p = i; o !== p; ++o) h[o].push(new THREE.PropertyBinding(l, f[o], g[o]));
            } else if (d > n) {
                var q = b[n], r = --d, s = b[r];
                e[s.uuid] = n, b[n] = s, e[m] = r, b[r] = l;
                for (var o = 0, p = i; o !== p; ++o) {
                    var t = h[o], u = t[r], v = t[n];
                    t[n] = u, void 0 === v && (v = new THREE.PropertyBinding(l, f[o], g[o])), t[r] = v;
                }
            } else b[n] !== q && console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...");
        }
        this.nCachedObjects_ = d;
    },
    remove: function(a) {
        for (var b = this._objects, c = (b.length, this.nCachedObjects_), d = this._indicesByUUID, e = this._bindings, f = e.length, g = 0, h = arguments.length; g !== h; ++g) {
            var i = arguments[g], j = i.uuid, k = d[j];
            if (void 0 !== k && k >= c) {
                var l = c++, m = b[l];
                d[m.uuid] = k, b[k] = m, d[j] = l, b[l] = i;
                for (var n = 0, o = f; n !== o; ++n) {
                    var p = e[n], q = p[l], r = p[k];
                    p[k] = q, p[l] = r;
                }
            }
        }
        this.nCachedObjects_ = c;
    },
    uncache: function(a) {
        for (var b = this._objects, c = b.length, d = this.nCachedObjects_, e = this._indicesByUUID, f = this._bindings, g = f.length, h = 0, i = arguments.length; h !== i; ++h) {
            var j = arguments[h], k = j.uuid, l = e[k];
            if (void 0 !== l) if (delete e[k], d > l) {
                var m = --d, n = b[m], o = --c, p = b[o];
                e[n.uuid] = l, b[l] = n, e[p.uuid] = m, b[m] = p, b.pop();
                for (var q = 0, r = g; q !== r; ++q) {
                    var s = f[q], t = s[m], u = s[o];
                    s[l] = t, s[m] = u, s.pop();
                }
            } else {
                var o = --c, p = b[o];
                e[p.uuid] = l, b[l] = p, b.pop();
                for (var q = 0, r = g; q !== r; ++q) {
                    var s = f[q];
                    s[l] = s[o], s.pop();
                }
            }
        }
        this.nCachedObjects_ = d;
    },
    subscribe_: function(a, b) {
        var c = this._bindingsIndicesByPath, d = c[a], e = this._bindings;
        if (void 0 !== d) return e[d];
        var f = this._paths, g = this._parsedPaths, h = this._objects, i = h.length, j = this.nCachedObjects_, k = new Array(i);
        d = e.length, c[a] = d, f.push(a), g.push(b), e.push(k);
        for (var l = j, m = h.length; l !== m; ++l) {
            var n = h[l];
            k[l] = new THREE.PropertyBinding(n, a, b);
        }
        return k;
    },
    unsubscribe_: function(a) {
        var b = this._bindingsIndicesByPath, c = b[a];
        if (void 0 !== c) {
            var d = this._paths, e = this._parsedPaths, f = this._bindings, g = f.length - 1, h = f[g], i = a[g];
            b[i] = c, f[c] = h, f.pop(), e[c] = e[g], e.pop(), d[c] = d[g], d.pop();
        }
    }
}, THREE.AnimationUtils = {
    arraySlice: function(a, b, c) {
        return THREE.AnimationUtils.isTypedArray(a) ? new a.constructor(a.subarray(b, c)) : a.slice(b, c);
    },
    convertArray: function(a, b, c) {
        return !a || !c && a.constructor === b ? a : "number" == typeof b.BYTES_PER_ELEMENT ? new b(a) : Array.prototype.slice.call(a);
    },
    isTypedArray: function(a) {
        return ArrayBuffer.isView(a) && !(a instanceof DataView);
    },
    getKeyframeOrder: function(a) {
        function b(b, c) {
            return a[b] - a[c];
        }
        for (var c = a.length, d = new Array(c), e = 0; e !== c; ++e) d[e] = e;
        return d.sort(b), d;
    },
    sortedArray: function(a, b, c) {
        for (var d = a.length, e = new a.constructor(d), f = 0, g = 0; g !== d; ++f) for (var h = c[f] * b, i = 0; i !== b; ++i) e[g++] = a[h + i];
        return e;
    },
    flattenJSON: function(a, b, c, d) {
        for (var e = 1, f = a[0]; void 0 !== f && void 0 === f[d]; ) f = a[e++];
        if (void 0 !== f) {
            var g = f[d];
            if (void 0 !== g) if (Array.isArray(g)) {
                do g = f[d], void 0 !== g && (b.push(f.time), c.push.apply(c, g)), f = a[e++]; while (void 0 !== f);
            } else if (void 0 !== g.toArray) {
                do g = f[d], void 0 !== g && (b.push(f.time), g.toArray(c, c.length)), f = a[e++]; while (void 0 !== f);
            } else do g = f[d], void 0 !== g && (b.push(f.time), c.push(g)), f = a[e++]; while (void 0 !== f);
        }
    }
}, THREE.KeyframeTrack = function(a, b, c, d) {
    if (void 0 === a) throw new Error("track name is undefined");
    if (void 0 === b || 0 === b.length) throw new Error("no keyframes in track named " + a);
    this.name = a, this.times = THREE.AnimationUtils.convertArray(b, this.TimeBufferType), 
    this.values = THREE.AnimationUtils.convertArray(c, this.ValueBufferType), this.setInterpolation(d || this.DefaultInterpolation), 
    this.validate(), this.optimize();
}, THREE.KeyframeTrack.prototype = {
    constructor: THREE.KeyframeTrack,
    TimeBufferType: Float32Array,
    ValueBufferType: Float32Array,
    DefaultInterpolation: THREE.InterpolateLinear,
    InterpolantFactoryMethodDiscrete: function(a) {
        return new THREE.DiscreteInterpolant(this.times, this.values, this.getValueSize(), a);
    },
    InterpolantFactoryMethodLinear: function(a) {
        return new THREE.LinearInterpolant(this.times, this.values, this.getValueSize(), a);
    },
    InterpolantFactoryMethodSmooth: function(a) {
        return new THREE.CubicInterpolant(this.times, this.values, this.getValueSize(), a);
    },
    setInterpolation: function(a) {
        var b = void 0;
        switch (a) {
          case THREE.InterpolateDiscrete:
            b = this.InterpolantFactoryMethodDiscrete;
            break;

          case THREE.InterpolateLinear:
            b = this.InterpolantFactoryMethodLinear;
            break;

          case THREE.InterpolateSmooth:
            b = this.InterpolantFactoryMethodSmooth;
        }
        if (void 0 === b) {
            var c = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
            if (void 0 === this.createInterpolant) {
                if (a === this.DefaultInterpolation) throw new Error(c);
                this.setInterpolation(this.DefaultInterpolation);
            }
            return void console.warn(c);
        }
        this.createInterpolant = b;
    },
    getInterpolation: function() {
        switch (this.createInterpolant) {
          case this.InterpolantFactoryMethodDiscrete:
            return THREE.InterpolateDiscrete;

          case this.InterpolantFactoryMethodLinear:
            return THREE.InterpolateLinear;

          case this.InterpolantFactoryMethodSmooth:
            return THREE.InterpolateSmooth;
        }
    },
    getValueSize: function() {
        return this.values.length / this.times.length;
    },
    shift: function(a) {
        if (0 !== a) for (var b = this.times, c = 0, d = b.length; c !== d; ++c) b[c] += a;
        return this;
    },
    scale: function(a) {
        if (1 !== a) for (var b = this.times, c = 0, d = b.length; c !== d; ++c) b[c] *= a;
        return this;
    },
    trim: function(a, b) {
        for (var c = this.times, d = c.length, e = 0, f = d - 1; e !== d && c[e] < a; ) ++e;
        for (;-1 !== f && c[f] > b; ) --f;
        if (++f, 0 !== e || f !== d) {
            e >= f && (f = Math.max(f, 1), e = f - 1);
            var g = this.getValueSize();
            this.times = THREE.AnimationUtils.arraySlice(c, e, f), this.values = THREE.AnimationUtils.arraySlice(this.values, e * g, f * g);
        }
        return this;
    },
    validate: function() {
        var a = !0, b = this.getValueSize();
        b - Math.floor(b) !== 0 && (console.error("invalid value size in track", this), 
        a = !1);
        var c = this.times, d = this.values, e = c.length;
        0 === e && (console.error("track is empty", this), a = !1);
        for (var f = null, g = 0; g !== e; g++) {
            var h = c[g];
            if ("number" == typeof h && isNaN(h)) {
                console.error("time is not a valid number", this, g, h), a = !1;
                break;
            }
            if (null !== f && f > h) {
                console.error("out of order keys", this, g, h, f), a = !1;
                break;
            }
            f = h;
        }
        if (void 0 !== d && THREE.AnimationUtils.isTypedArray(d)) for (var g = 0, i = d.length; g !== i; ++g) {
            var j = d[g];
            if (isNaN(j)) {
                console.error("value is not a valid number", this, g, j), a = !1;
                break;
            }
        }
        return a;
    },
    optimize: function() {
        for (var a = this.times, b = this.values, c = this.getValueSize(), d = 1, e = 1, f = a.length - 1; f >= e; ++e) {
            var g = !1, h = a[e], i = a[e + 1];
            if (h !== i && (1 !== e || h !== h[0])) for (var j = e * c, k = j - c, l = j + c, m = 0; m !== c; ++m) {
                var n = b[j + m];
                if (n !== b[k + m] || n !== b[l + m]) {
                    g = !0;
                    break;
                }
            }
            if (g) {
                if (e !== d) {
                    a[d] = a[e];
                    for (var o = e * c, p = d * c, m = 0; m !== c; ++m) b[p + m] = b[o + m];
                }
                ++d;
            }
        }
        return d !== a.length && (this.times = THREE.AnimationUtils.arraySlice(a, 0, d), 
        this.values = THREE.AnimationUtils.arraySlice(b, 0, d * c)), this;
    }
}, Object.assign(THREE.KeyframeTrack, {
    parse: function(a) {
        if (void 0 === a.type) throw new Error("track type undefined, can not parse");
        var b = THREE.KeyframeTrack._getTrackTypeForValueTypeName(a.type);
        if (void 0 === a.times) {
            console.warn("legacy JSON format detected, converting");
            var c = [], d = [];
            THREE.AnimationUtils.flattenJSON(a.keys, c, d, "value"), a.times = c, a.values = d;
        }
        return void 0 !== b.parse ? b.parse(a) : new b(a.name, a.times, a.values, a.interpolation);
    },
    toJSON: function(a) {
        var b, c = a.constructor;
        if (void 0 !== c.toJSON) b = c.toJSON(a); else {
            b = {
                name: a.name,
                times: THREE.AnimationUtils.convertArray(a.times, Array),
                values: THREE.AnimationUtils.convertArray(a.values, Array)
            };
            var d = a.getInterpolation();
            d !== a.DefaultInterpolation && (b.interpolation = d);
        }
        return b.type = a.ValueTypeName, b;
    },
    _getTrackTypeForValueTypeName: function(a) {
        switch (a.toLowerCase()) {
          case "scalar":
          case "double":
          case "float":
          case "number":
          case "integer":
            return THREE.NumberKeyframeTrack;

          case "vector":
          case "vector2":
          case "vector3":
          case "vector4":
            return THREE.VectorKeyframeTrack;

          case "color":
            return THREE.ColorKeyframeTrack;

          case "quaternion":
            return THREE.QuaternionKeyframeTrack;

          case "bool":
          case "boolean":
            return THREE.BooleanKeyframeTrack;

          case "string":
            return THREE.StringKeyframeTrack;
        }
        throw new Error("Unsupported typeName: " + a);
    }
}), THREE.PropertyBinding = function(a, b, c) {
    this.path = b, this.parsedPath = c || THREE.PropertyBinding.parseTrackName(b), this.node = THREE.PropertyBinding.findNode(a, this.parsedPath.nodeName) || a, 
    this.rootNode = a;
}, THREE.PropertyBinding.prototype = {
    constructor: THREE.PropertyBinding,
    getValue: function(a, b) {
        this.bind(), this.getValue(a, b);
    },
    setValue: function(a, b) {
        this.bind(), this.setValue(a, b);
    },
    bind: function() {
        var a = this.node, b = this.parsedPath, c = b.objectName, d = b.propertyName, e = b.propertyIndex;
        if (a || (a = THREE.PropertyBinding.findNode(this.rootNode, b.nodeName) || this.rootNode, 
        this.node = a), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, 
        !a) return void console.error("  trying to update node for track: " + this.path + " but it wasn't found.");
        if (c) {
            var f = b.objectIndex;
            switch (c) {
              case "materials":
                if (!a.material) return void console.error("  can not bind to material as node does not have a material", this);
                if (!a.material.materials) return void console.error("  can not bind to material.materials as node.material does not have a materials array", this);
                a = a.material.materials;
                break;

              case "bones":
                if (!a.skeleton) return void console.error("  can not bind to bones as node does not have a skeleton", this);
                a = a.skeleton.bones;
                for (var g = 0; g < a.length; g++) if (a[g].name === f) {
                    f = g;
                    break;
                }
                break;

              default:
                if (void 0 === a[c]) return void console.error("  can not bind to objectName of node, undefined", this);
                a = a[c];
            }
            if (void 0 !== f) {
                if (void 0 === a[f]) return void console.error("  trying to bind to objectIndex of objectName, but is undefined:", this, a);
                a = a[f];
            }
        }
        var h = a[d];
        if (!h) {
            var i = b.nodeName;
            return void console.error("  trying to update property for track: " + i + "." + d + " but it wasn't found.", a);
        }
        var j = this.Versioning.None;
        void 0 !== a.needsUpdate ? (j = this.Versioning.NeedsUpdate, this.targetObject = a) : void 0 !== a.matrixWorldNeedsUpdate && (j = this.Versioning.MatrixWorldNeedsUpdate, 
        this.targetObject = a);
        var k = this.BindingType.Direct;
        if (void 0 !== e) {
            if ("morphTargetInfluences" === d) {
                if (!a.geometry) return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry", this);
                if (!a.geometry.morphTargets) return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets", this);
                for (var g = 0; g < this.node.geometry.morphTargets.length; g++) if (a.geometry.morphTargets[g].name === e) {
                    e = g;
                    break;
                }
            }
            k = this.BindingType.ArrayElement, this.resolvedProperty = h, this.propertyIndex = e;
        } else void 0 !== h.fromArray && void 0 !== h.toArray ? (k = this.BindingType.HasFromToArray, 
        this.resolvedProperty = h) : void 0 !== h.length ? (k = this.BindingType.EntireArray, 
        this.resolvedProperty = h) : this.propertyName = d;
        this.getValue = this.GetterByBindingType[k], this.setValue = this.SetterByBindingTypeAndVersioning[k][j];
    },
    unbind: function() {
        this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
    }
}, Object.assign(THREE.PropertyBinding.prototype, {
    _getValue_unavailable: function() {},
    _setValue_unavailable: function() {},
    _getValue_unbound: THREE.PropertyBinding.prototype.getValue,
    _setValue_unbound: THREE.PropertyBinding.prototype.setValue,
    BindingType: {
        Direct: 0,
        EntireArray: 1,
        ArrayElement: 2,
        HasFromToArray: 3
    },
    Versioning: {
        None: 0,
        NeedsUpdate: 1,
        MatrixWorldNeedsUpdate: 2
    },
    GetterByBindingType: [ function(a, b) {
        a[b] = this.node[this.propertyName];
    }, function(a, b) {
        for (var c = this.resolvedProperty, d = 0, e = c.length; d !== e; ++d) a[b++] = c[d];
    }, function(a, b) {
        a[b] = this.resolvedProperty[this.propertyIndex];
    }, function(a, b) {
        this.resolvedProperty.toArray(a, b);
    } ],
    SetterByBindingTypeAndVersioning: [ [ function(a, b) {
        this.node[this.propertyName] = a[b];
    }, function(a, b) {
        this.node[this.propertyName] = a[b], this.targetObject.needsUpdate = !0;
    }, function(a, b) {
        this.node[this.propertyName] = a[b], this.targetObject.matrixWorldNeedsUpdate = !0;
    } ], [ function(a, b) {
        for (var c = this.resolvedProperty, d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
    }, function(a, b) {
        for (var c = this.resolvedProperty, d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
        this.targetObject.needsUpdate = !0;
    }, function(a, b) {
        for (var c = this.resolvedProperty, d = 0, e = c.length; d !== e; ++d) c[d] = a[b++];
        this.targetObject.matrixWorldNeedsUpdate = !0;
    } ], [ function(a, b) {
        this.resolvedProperty[this.propertyIndex] = a[b];
    }, function(a, b) {
        this.resolvedProperty[this.propertyIndex] = a[b], this.targetObject.needsUpdate = !0;
    }, function(a, b) {
        this.resolvedProperty[this.propertyIndex] = a[b], this.targetObject.matrixWorldNeedsUpdate = !0;
    } ], [ function(a, b) {
        this.resolvedProperty.fromArray(a, b);
    }, function(a, b) {
        this.resolvedProperty.fromArray(a, b), this.targetObject.needsUpdate = !0;
    }, function(a, b) {
        this.resolvedProperty.fromArray(a, b), this.targetObject.matrixWorldNeedsUpdate = !0;
    } ] ]
}), THREE.PropertyBinding.Composite = function(a, b, c) {
    var d = c || THREE.PropertyBinding.parseTrackName(b);
    this._targetGroup = a, this._bindings = a.subscribe_(b, d);
}, THREE.PropertyBinding.Composite.prototype = {
    constructor: THREE.PropertyBinding.Composite,
    getValue: function(a, b) {
        this.bind();
        var c = this._targetGroup.nCachedObjects_, d = this._bindings[c];
        void 0 !== d && d.getValue(a, b);
    },
    setValue: function(a, b) {
        for (var c = this._bindings, d = this._targetGroup.nCachedObjects_, e = c.length; d !== e; ++d) c[d].setValue(a, b);
    },
    bind: function() {
        for (var a = this._bindings, b = this._targetGroup.nCachedObjects_, c = a.length; b !== c; ++b) a[b].bind();
    },
    unbind: function() {
        for (var a = this._bindings, b = this._targetGroup.nCachedObjects_, c = a.length; b !== c; ++b) a[b].unbind();
    }
}, THREE.PropertyBinding.create = function(a, b, c) {
    return a instanceof THREE.AnimationObjectGroup ? new THREE.PropertyBinding.Composite(a, b, c) : new THREE.PropertyBinding(a, b, c);
}, THREE.PropertyBinding.parseTrackName = function(a) {
    var b = /^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/, c = b.exec(a);
    if (!c) throw new Error("cannot parse trackName at all: " + a);
    c.index === b.lastIndex && b.lastIndex++;
    var d = {
        nodeName: c[3],
        objectName: c[5],
        objectIndex: c[7],
        propertyName: c[9],
        propertyIndex: c[11]
    };
    if (null === d.propertyName || 0 === d.propertyName.length) throw new Error("can not parse propertyName from trackName: " + a);
    return d;
}, THREE.PropertyBinding.findNode = function(a, b) {
    if (!b || "" === b || "root" === b || "." === b || -1 === b || b === a.name || b === a.uuid) return a;
    if (a.skeleton) {
        var c = function(a) {
            for (var c = 0; c < a.bones.length; c++) {
                var d = a.bones[c];
                if (d.name === b) return d;
            }
            return null;
        }, d = c(a.skeleton);
        if (d) return d;
    }
    if (a.children) {
        var e = function(a) {
            for (var c = 0; c < a.length; c++) {
                var d = a[c];
                if (d.name === b || d.uuid === b) return d;
                var f = e(d.children);
                if (f) return f;
            }
            return null;
        }, f = e(a.children);
        if (f) return f;
    }
    return null;
}, THREE.PropertyMixer = function(a, b, c) {
    this.binding = a, this.valueSize = c;
    var d, e = Float64Array;
    switch (b) {
      case "quaternion":
        d = this._slerp;
        break;

      case "string":
      case "bool":
        e = Array, d = this._select;
        break;

      default:
        d = this._lerp;
    }
    this.buffer = new e(4 * c), this._mixBufferRegion = d, this.cumulativeWeight = 0, 
    this.useCount = 0, this.referenceCount = 0;
}, THREE.PropertyMixer.prototype = {
    constructor: THREE.PropertyMixer,
    accumulate: function(a, b) {
        var c = this.buffer, d = this.valueSize, e = a * d + d, f = this.cumulativeWeight;
        if (0 === f) {
            for (var g = 0; g !== d; ++g) c[e + g] = c[g];
            f = b;
        } else {
            f += b;
            var h = b / f;
            this._mixBufferRegion(c, e, 0, h, d);
        }
        this.cumulativeWeight = f;
    },
    apply: function(a) {
        var b = this.valueSize, c = this.buffer, d = a * b + b, e = this.cumulativeWeight, f = this.binding;
        if (this.cumulativeWeight = 0, 1 > e) {
            var g = 3 * b;
            this._mixBufferRegion(c, d, g, 1 - e, b);
        }
        for (var h = b, i = b + b; h !== i; ++h) if (c[h] !== c[h + b]) {
            f.setValue(c, d);
            break;
        }
    },
    saveOriginalState: function() {
        var a = this.binding, b = this.buffer, c = this.valueSize, d = 3 * c;
        a.getValue(b, d);
        for (var e = c, f = d; e !== f; ++e) b[e] = b[d + e % c];
        this.cumulativeWeight = 0;
    },
    restoreOriginalState: function() {
        var a = 3 * this.valueSize;
        this.binding.setValue(this.buffer, a);
    },
    _select: function(a, b, c, d, e) {
        if (d >= .5) for (var f = 0; f !== e; ++f) a[b + f] = a[c + f];
    },
    _slerp: function(a, b, c, d, e) {
        THREE.Quaternion.slerpFlat(a, b, a, b, a, c, d);
    },
    _lerp: function(a, b, c, d, e) {
        for (var f = 1 - d, g = 0; g !== e; ++g) {
            var h = b + g;
            a[h] = a[h] * f + a[c + g] * d;
        }
    }
}, THREE.BooleanKeyframeTrack = function(a, b, c) {
    THREE.KeyframeTrack.call(this, a, b, c);
}, THREE.BooleanKeyframeTrack.prototype = Object.assign(Object.create(THREE.KeyframeTrack.prototype), {
    constructor: THREE.BooleanKeyframeTrack,
    ValueTypeName: "bool",
    ValueBufferType: Array,
    DefaultInterpolation: THREE.IntepolateDiscrete,
    InterpolantFactoryMethodLinear: void 0,
    InterpolantFactoryMethodSmooth: void 0
}), THREE.NumberKeyframeTrack = function(a, b, c, d) {
    THREE.KeyframeTrack.call(this, a, b, c, d);
}, THREE.NumberKeyframeTrack.prototype = Object.assign(Object.create(THREE.KeyframeTrack.prototype), {
    constructor: THREE.NumberKeyframeTrack,
    ValueTypeName: "number"
}), THREE.QuaternionKeyframeTrack = function(a, b, c, d) {
    THREE.KeyframeTrack.call(this, a, b, c, d);
}, THREE.QuaternionKeyframeTrack.prototype = Object.assign(Object.create(THREE.KeyframeTrack.prototype), {
    constructor: THREE.QuaternionKeyframeTrack,
    ValueTypeName: "quaternion",
    DefaultInterpolation: THREE.InterpolateLinear,
    InterpolantFactoryMethodLinear: function(a) {
        return new THREE.QuaternionLinearInterpolant(this.times, this.values, this.getValueSize(), a);
    },
    InterpolantFactoryMethodSmooth: void 0
}), THREE.StringKeyframeTrack = function(a, b, c, d) {
    THREE.KeyframeTrack.call(this, a, b, c, d);
}, THREE.StringKeyframeTrack.prototype = Object.assign(Object.create(THREE.KeyframeTrack.prototype), {
    constructor: THREE.StringKeyframeTrack,
    ValueTypeName: "string",
    ValueBufferType: Array,
    DefaultInterpolation: THREE.IntepolateDiscrete,
    InterpolantFactoryMethodLinear: void 0,
    InterpolantFactoryMethodSmooth: void 0
}), THREE.VectorKeyframeTrack = function(a, b, c, d) {
    THREE.KeyframeTrack.call(this, a, b, c, d);
}, THREE.VectorKeyframeTrack.prototype = Object.assign(Object.create(THREE.KeyframeTrack.prototype), {
    constructor: THREE.VectorKeyframeTrack,
    ValueTypeName: "vector"
}), THREE.Audio = function(a) {
    THREE.Object3D.call(this), this.type = "Audio", this.context = a.context, this.source = this.context.createBufferSource(), 
    this.source.onended = this.onEnded.bind(this), this.gain = this.context.createGain(), 
    this.gain.connect(a.getInput()), this.autoplay = !1, this.startTime = 0, this.playbackRate = 1, 
    this.isPlaying = !1, this.hasPlaybackControl = !0, this.sourceType = "empty", this.filter = null;
}, THREE.Audio.prototype = Object.create(THREE.Object3D.prototype), THREE.Audio.prototype.constructor = THREE.Audio, 
THREE.Audio.prototype.getOutput = function() {
    return this.gain;
}, THREE.Audio.prototype.load = function(a) {
    var b = new THREE.AudioBuffer(this.context);
    return b.load(a), this.setBuffer(b), this;
}, THREE.Audio.prototype.setNodeSource = function(a) {
    return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = a, 
    this.connect(), this;
}, THREE.Audio.prototype.setBuffer = function(a) {
    var b = this;
    return a.onReady(function(a) {
        b.source.buffer = a, b.sourceType = "buffer", b.autoplay && b.play();
    }), this;
}, THREE.Audio.prototype.play = function() {
    if (this.isPlaying === !0) return void console.warn("THREE.Audio: Audio is already playing.");
    if (this.hasPlaybackControl === !1) return void console.warn("THREE.Audio: this Audio has no playback control.");
    var a = this.context.createBufferSource();
    a.buffer = this.source.buffer, a.loop = this.source.loop, a.onended = this.source.onended, 
    a.start(0, this.startTime), a.playbackRate.value = this.playbackRate, this.isPlaying = !0, 
    this.source = a, this.connect();
}, THREE.Audio.prototype.pause = function() {
    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(), 
    void (this.startTime = this.context.currentTime));
}, THREE.Audio.prototype.stop = function() {
    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(), 
    void (this.startTime = 0));
}, THREE.Audio.prototype.connect = function() {
    null !== this.filter ? (this.source.connect(this.filter), this.filter.connect(this.getOutput())) : this.source.connect(this.getOutput());
}, THREE.Audio.prototype.disconnect = function() {
    null !== this.filter ? (this.source.disconnect(this.filter), this.filter.disconnect(this.getOutput())) : this.source.disconnect(this.getOutput());
}, THREE.Audio.prototype.getFilter = function() {
    return this.filter;
}, THREE.Audio.prototype.setFilter = function(a) {
    void 0 === a && (a = null), this.isPlaying === !0 ? (this.disconnect(), this.filter = a, 
    this.connect()) : this.filter = a;
}, THREE.Audio.prototype.setPlaybackRate = function(a) {
    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.playbackRate = a, 
    void (this.isPlaying === !0 && (this.source.playbackRate.value = this.playbackRate)));
}, THREE.Audio.prototype.getPlaybackRate = function() {
    return this.playbackRate;
}, THREE.Audio.prototype.onEnded = function() {
    this.isPlaying = !1;
}, THREE.Audio.prototype.setLoop = function(a) {
    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : void (this.source.loop = a);
}, THREE.Audio.prototype.getLoop = function() {
    return this.hasPlaybackControl === !1 ? (console.warn("THREE.Audio: this Audio has no playback control."), 
    !1) : this.source.loop;
}, THREE.Audio.prototype.setVolume = function(a) {
    this.gain.gain.value = a;
}, THREE.Audio.prototype.getVolume = function() {
    return this.gain.gain.value;
}, THREE.AudioAnalyser = function(a, b) {
    this.analyser = a.context.createAnalyser(), this.analyser.fftSize = void 0 !== b ? b : 2048, 
    this.data = new Uint8Array(this.analyser.frequencyBinCount), a.getOutput().connect(this.analyser);
}, THREE.AudioAnalyser.prototype = {
    constructor: THREE.AudioAnalyser,
    getData: function() {
        return this.analyser.getByteFrequencyData(this.data), this.data;
    }
}, THREE.AudioBuffer = function(a) {
    this.context = a, this.ready = !1, this.readyCallbacks = [];
}, THREE.AudioBuffer.prototype.load = function(a) {
    var b = this, c = new XMLHttpRequest();
    return c.open("GET", a, !0), c.responseType = "arraybuffer", c.onload = function(a) {
        b.context.decodeAudioData(this.response, function(a) {
            b.buffer = a, b.ready = !0;
            for (var c = 0; c < b.readyCallbacks.length; c++) b.readyCallbacks[c](b.buffer);
            b.readyCallbacks = [];
        });
    }, c.send(), this;
}, THREE.AudioBuffer.prototype.onReady = function(a) {
    this.ready ? a(this.buffer) : this.readyCallbacks.push(a);
}, THREE.PositionalAudio = function(a) {
    THREE.Audio.call(this, a), this.panner = this.context.createPanner(), this.panner.connect(this.gain);
}, THREE.PositionalAudio.prototype = Object.create(THREE.Audio.prototype), THREE.PositionalAudio.prototype.constructor = THREE.PositionalAudio, 
THREE.PositionalAudio.prototype.getOutput = function() {
    return this.panner;
}, THREE.PositionalAudio.prototype.setRefDistance = function(a) {
    this.panner.refDistance = a;
}, THREE.PositionalAudio.prototype.getRefDistance = function() {
    return this.panner.refDistance;
}, THREE.PositionalAudio.prototype.setRolloffFactor = function(a) {
    this.panner.rolloffFactor = a;
}, THREE.PositionalAudio.prototype.getRolloffFactor = function() {
    return this.panner.rolloffFactor;
}, THREE.PositionalAudio.prototype.setDistanceModel = function(a) {
    this.panner.distanceModel = a;
}, THREE.PositionalAudio.prototype.getDistanceModel = function() {
    return this.panner.distanceModel;
}, THREE.PositionalAudio.prototype.setMaxDistance = function(a) {
    this.panner.maxDistance = a;
}, THREE.PositionalAudio.prototype.getMaxDistance = function() {
    return this.panner.maxDistance;
}, THREE.PositionalAudio.prototype.updateMatrixWorld = function() {
    var a = new THREE.Vector3();
    return function(b) {
        THREE.Object3D.prototype.updateMatrixWorld.call(this, b), a.setFromMatrixPosition(this.matrixWorld), 
        this.panner.setPosition(a.x, a.y, a.z);
    };
}(), THREE.AudioListener = function() {
    THREE.Object3D.call(this), this.type = "AudioListener", this.context = new (window.AudioContext || window.webkitAudioContext)(), 
    this.gain = this.context.createGain(), this.gain.connect(this.context.destination), 
    this.filter = null;
}, THREE.AudioListener.prototype = Object.create(THREE.Object3D.prototype), THREE.AudioListener.prototype.constructor = THREE.AudioListener, 
THREE.AudioListener.prototype.getInput = function() {
    return this.gain;
}, THREE.AudioListener.prototype.removeFilter = function() {
    null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), 
    this.gain.connect(this.context.destination), this.filter = null);
}, THREE.AudioListener.prototype.setFilter = function(a) {
    null !== this.filter ? (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination), 
    this.filter = a, this.gain.connect(this.filter), this.filter.connect(this.context.destination);
}, THREE.AudioListener.prototype.getFilter = function() {
    return this.filter;
}, THREE.AudioListener.prototype.setMasterVolume = function(a) {
    this.gain.gain.value = a;
}, THREE.AudioListener.prototype.getMasterVolume = function() {
    return this.gain.gain.value;
}, THREE.AudioListener.prototype.updateMatrixWorld = function() {
    var a = new THREE.Vector3(), b = new THREE.Quaternion(), c = new THREE.Vector3(), d = new THREE.Vector3();
    return function(e) {
        THREE.Object3D.prototype.updateMatrixWorld.call(this, e);
        var f = this.context.listener, g = this.up;
        this.matrixWorld.decompose(a, b, c), d.set(0, 0, -1).applyQuaternion(b), f.setPosition(a.x, a.y, a.z), 
        f.setOrientation(d.x, d.y, d.z, g.x, g.y, g.z);
    };
}(), THREE.Camera = function() {
    THREE.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new THREE.Matrix4(), 
    this.projectionMatrix = new THREE.Matrix4();
}, THREE.Camera.prototype = Object.create(THREE.Object3D.prototype), THREE.Camera.prototype.constructor = THREE.Camera, 
THREE.Camera.prototype.getWorldDirection = function() {
    var a = new THREE.Quaternion();
    return function(b) {
        var c = b || new THREE.Vector3();
        return this.getWorldQuaternion(a), c.set(0, 0, -1).applyQuaternion(a);
    };
}(), THREE.Camera.prototype.lookAt = function() {
    var a = new THREE.Matrix4();
    return function(b) {
        a.lookAt(this.position, b, this.up), this.quaternion.setFromRotationMatrix(a);
    };
}(), THREE.Camera.prototype.clone = function() {
    return new this.constructor().copy(this);
}, THREE.Camera.prototype.copy = function(a) {
    return THREE.Object3D.prototype.copy.call(this, a), this.matrixWorldInverse.copy(a.matrixWorldInverse), 
    this.projectionMatrix.copy(a.projectionMatrix), this;
}, THREE.CubeCamera = function(a, b, c) {
    THREE.Object3D.call(this), this.type = "CubeCamera";
    var d = 90, e = 1, f = new THREE.PerspectiveCamera(d, e, a, b);
    f.up.set(0, -1, 0), f.lookAt(new THREE.Vector3(1, 0, 0)), this.add(f);
    var g = new THREE.PerspectiveCamera(d, e, a, b);
    g.up.set(0, -1, 0), g.lookAt(new THREE.Vector3(-1, 0, 0)), this.add(g);
    var h = new THREE.PerspectiveCamera(d, e, a, b);
    h.up.set(0, 0, 1), h.lookAt(new THREE.Vector3(0, 1, 0)), this.add(h);
    var i = new THREE.PerspectiveCamera(d, e, a, b);
    i.up.set(0, 0, -1), i.lookAt(new THREE.Vector3(0, -1, 0)), this.add(i);
    var j = new THREE.PerspectiveCamera(d, e, a, b);
    j.up.set(0, -1, 0), j.lookAt(new THREE.Vector3(0, 0, 1)), this.add(j);
    var k = new THREE.PerspectiveCamera(d, e, a, b);
    k.up.set(0, -1, 0), k.lookAt(new THREE.Vector3(0, 0, -1)), this.add(k);
    var l = {
        format: THREE.RGBFormat,
        magFilter: THREE.LinearFilter,
        minFilter: THREE.LinearFilter
    };
    this.renderTarget = new THREE.WebGLRenderTargetCube(c, c, l), this.updateCubeMap = function(a, b) {
        null === this.parent && this.updateMatrixWorld();
        var c = this.renderTarget, d = c.texture.generateMipmaps;
        c.texture.generateMipmaps = !1, c.activeCubeFace = 0, a.render(b, f, c), c.activeCubeFace = 1, 
        a.render(b, g, c), c.activeCubeFace = 2, a.render(b, h, c), c.activeCubeFace = 3, 
        a.render(b, i, c), c.activeCubeFace = 4, a.render(b, j, c), c.texture.generateMipmaps = d, 
        c.activeCubeFace = 5, a.render(b, k, c), a.setRenderTarget(null);
    };
}, THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype), THREE.CubeCamera.prototype.constructor = THREE.CubeCamera, 
THREE.OrthographicCamera = function(a, b, c, d, e, f) {
    THREE.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = a, 
    this.right = b, this.top = c, this.bottom = d, this.near = void 0 !== e ? e : .1, 
    this.far = void 0 !== f ? f : 2e3, this.updateProjectionMatrix();
}, THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype), THREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera, 
THREE.OrthographicCamera.prototype.updateProjectionMatrix = function() {
    var a = (this.right - this.left) / (2 * this.zoom), b = (this.top - this.bottom) / (2 * this.zoom), c = (this.right + this.left) / 2, d = (this.top + this.bottom) / 2;
    this.projectionMatrix.makeOrthographic(c - a, c + a, d + b, d - b, this.near, this.far);
}, THREE.OrthographicCamera.prototype.copy = function(a) {
    return THREE.Camera.prototype.copy.call(this, a), this.left = a.left, this.right = a.right, 
    this.top = a.top, this.bottom = a.bottom, this.near = a.near, this.far = a.far, 
    this.zoom = a.zoom, this;
}, THREE.OrthographicCamera.prototype.toJSON = function(a) {
    var b = THREE.Object3D.prototype.toJSON.call(this, a);
    return b.object.zoom = this.zoom, b.object.left = this.left, b.object.right = this.right, 
    b.object.top = this.top, b.object.bottom = this.bottom, b.object.near = this.near, 
    b.object.far = this.far, b;
}, THREE.PerspectiveCamera = function(a, b, c, d) {
    THREE.Camera.call(this), this.type = "PerspectiveCamera", this.focalLength = 10, 
    this.zoom = 1, this.fov = void 0 !== a ? a : 50, this.aspect = void 0 !== b ? b : 1, 
    this.near = void 0 !== c ? c : .1, this.far = void 0 !== d ? d : 2e3, this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype), THREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera, 
THREE.PerspectiveCamera.prototype.setLens = function(a, b) {
    void 0 === b && (b = 24), this.fov = 2 * THREE.Math.radToDeg(Math.atan(b / (2 * a))), 
    this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype.setViewOffset = function(a, b, c, d, e, f) {
    this.fullWidth = a, this.fullHeight = b, this.x = c, this.y = d, this.width = e, 
    this.height = f, this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
    var a = THREE.Math.radToDeg(2 * Math.atan(Math.tan(.5 * THREE.Math.degToRad(this.fov)) / this.zoom));
    if (this.fullWidth) {
        var b = this.fullWidth / this.fullHeight, c = Math.tan(THREE.Math.degToRad(.5 * a)) * this.near, d = -c, e = b * d, f = b * c, g = Math.abs(f - e), h = Math.abs(c - d);
        this.projectionMatrix.makeFrustum(e + this.x * g / this.fullWidth, e + (this.x + this.width) * g / this.fullWidth, c - (this.y + this.height) * h / this.fullHeight, c - this.y * h / this.fullHeight, this.near, this.far);
    } else this.projectionMatrix.makePerspective(a, this.aspect, this.near, this.far);
}, THREE.PerspectiveCamera.prototype.copy = function(a) {
    return THREE.Camera.prototype.copy.call(this, a), this.focalLength = a.focalLength, 
    this.zoom = a.zoom, this.fov = a.fov, this.aspect = a.aspect, this.near = a.near, 
    this.far = a.far, this;
}, THREE.PerspectiveCamera.prototype.toJSON = function(a) {
    var b = THREE.Object3D.prototype.toJSON.call(this, a);
    return b.object.focalLength = this.focalLength, b.object.zoom = this.zoom, b.object.fov = this.fov, 
    b.object.aspect = this.aspect, b.object.near = this.near, b.object.far = this.far, 
    b;
}, THREE.StereoCamera = function() {
    this.type = "StereoCamera", this.aspect = 1, this.cameraL = new THREE.PerspectiveCamera(), 
    this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new THREE.PerspectiveCamera(), 
    this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1;
}, THREE.StereoCamera.prototype = {
    constructor: THREE.StereoCamera,
    update: function() {
        var a, b, c, d, e, f = new THREE.Matrix4(), g = new THREE.Matrix4();
        return function(h) {
            var i = a !== h.focalLength || b !== h.fov || c !== h.aspect * this.aspect || d !== h.near || e !== h.far;
            if (i) {
                a = h.focalLength, b = h.fov, c = h.aspect * this.aspect, d = h.near, e = h.far;
                var j, k, l = h.projectionMatrix.clone(), m = .032, n = m * d / a, o = d * Math.tan(THREE.Math.degToRad(.5 * b));
                g.elements[12] = -m, f.elements[12] = m, j = -o * c + n, k = o * c + n, l.elements[0] = 2 * d / (k - j), 
                l.elements[8] = (k + j) / (k - j), this.cameraL.projectionMatrix.copy(l), j = -o * c - n, 
                k = o * c - n, l.elements[0] = 2 * d / (k - j), l.elements[8] = (k + j) / (k - j), 
                this.cameraR.projectionMatrix.copy(l);
            }
            this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(g), this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(f);
        };
    }()
}, THREE.Light = function(a, b) {
    THREE.Object3D.call(this), this.type = "Light", this.color = new THREE.Color(a), 
    this.intensity = void 0 !== b ? b : 1, this.receiveShadow = void 0;
}, THREE.Light.prototype = Object.create(THREE.Object3D.prototype), THREE.Light.prototype.constructor = THREE.Light, 
THREE.Light.prototype.copy = function(a) {
    return THREE.Object3D.prototype.copy.call(this, a), this.color.copy(a.color), this.intensity = a.intensity, 
    this;
}, THREE.Light.prototype.toJSON = function(a) {
    var b = THREE.Object3D.prototype.toJSON.call(this, a);
    return b.object.color = this.color.getHex(), b.object.intensity = this.intensity, 
    void 0 !== this.groundColor && (b.object.groundColor = this.groundColor.getHex()), 
    void 0 !== this.distance && (b.object.distance = this.distance), void 0 !== this.angle && (b.object.angle = this.angle), 
    void 0 !== this.decay && (b.object.decay = this.decay), void 0 !== this.penumbra && (b.object.penumbra = this.penumbra), 
    b;
}, THREE.LightShadow = function(a) {
    this.camera = a, this.bias = 0, this.radius = 1, this.mapSize = new THREE.Vector2(512, 512), 
    this.map = null, this.matrix = new THREE.Matrix4();
}, THREE.LightShadow.prototype = {
    constructor: THREE.LightShadow,
    copy: function(a) {
        return this.camera = a.camera.clone(), this.bias = a.bias, this.radius = a.radius, 
        this.mapSize.copy(a.mapSize), this;
    },
    clone: function() {
        return new this.constructor().copy(this);
    }
}, THREE.AmbientLight = function(a, b) {
    THREE.Light.call(this, a, b), this.type = "AmbientLight", this.castShadow = void 0;
}, THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype), THREE.AmbientLight.prototype.constructor = THREE.AmbientLight, 
THREE.DirectionalLight = function(a, b) {
    THREE.Light.call(this, a, b), this.type = "DirectionalLight", this.position.set(0, 1, 0), 
    this.updateMatrix(), this.target = new THREE.Object3D(), this.shadow = new THREE.LightShadow(new THREE.OrthographicCamera(-5, 5, 5, -5, .5, 500));
}, THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype), THREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight, 
THREE.DirectionalLight.prototype.copy = function(a) {
    return THREE.Light.prototype.copy.call(this, a), this.target = a.target.clone(), 
    this.shadow = a.shadow.clone(), this;
}, THREE.HemisphereLight = function(a, b, c) {
    THREE.Light.call(this, a, c), this.type = "HemisphereLight", this.castShadow = void 0, 
    this.position.set(0, 1, 0), this.updateMatrix(), this.groundColor = new THREE.Color(b);
}, THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype), THREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight, 
THREE.HemisphereLight.prototype.copy = function(a) {
    return THREE.Light.prototype.copy.call(this, a), this.groundColor.copy(a.groundColor), 
    this;
}, THREE.PointLight = function(a, b, c, d) {
    THREE.Light.call(this, a, b), this.type = "PointLight", this.distance = void 0 !== c ? c : 0, 
    this.decay = void 0 !== d ? d : 1, this.shadow = new THREE.LightShadow(new THREE.PerspectiveCamera(90, 1, .5, 500));
}, THREE.PointLight.prototype = Object.create(THREE.Light.prototype), THREE.PointLight.prototype.constructor = THREE.PointLight, 
Object.defineProperty(THREE.PointLight.prototype, "power", {
    get: function() {
        return 4 * this.intensity * Math.PI;
    },
    set: function(a) {
        this.intensity = a / (4 * Math.PI);
    }
}), THREE.PointLight.prototype.copy = function(a) {
    return THREE.Light.prototype.copy.call(this, a), this.distance = a.distance, this.decay = a.decay, 
    this.shadow = a.shadow.clone(), this;
}, THREE.SpotLight = function(a, b, c, d, e, f) {
    THREE.Light.call(this, a, b), this.type = "SpotLight", this.position.set(0, 1, 0), 
    this.updateMatrix(), this.target = new THREE.Object3D(), this.distance = void 0 !== c ? c : 0, 
    this.angle = void 0 !== d ? d : Math.PI / 3, this.penumbra = void 0 !== e ? e : 0, 
    this.decay = void 0 !== f ? f : 1, this.shadow = new THREE.LightShadow(new THREE.PerspectiveCamera(50, 1, .5, 500));
}, THREE.SpotLight.prototype = Object.create(THREE.Light.prototype), THREE.SpotLight.prototype.constructor = THREE.SpotLight, 
Object.defineProperty(THREE.SpotLight.prototype, "power", {
    get: function() {
        return this.intensity * Math.PI;
    },
    set: function(a) {
        this.intensity = a / Math.PI;
    }
}), THREE.SpotLight.prototype.copy = function(a) {
    return THREE.Light.prototype.copy.call(this, a), this.distance = a.distance, this.angle = a.angle, 
    this.penumbra = a.penumbra, this.decay = a.decay, this.target = a.target.clone(), 
    this.shadow = a.shadow.clone(), this;
}, THREE.Cache = {
    enabled: !1,
    files: {},
    add: function(a, b) {
        this.enabled !== !1 && (this.files[a] = b);
    },
    get: function(a) {
        return this.enabled !== !1 ? this.files[a] : void 0;
    },
    remove: function(a) {
        delete this.files[a];
    },
    clear: function() {
        this.files = {};
    }
}, THREE.Loader = function() {
    this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {};
}, THREE.Loader.prototype = {
    constructor: THREE.Loader,
    crossOrigin: void 0,
    extractUrlBase: function(a) {
        var b = a.split("/");
        return 1 === b.length ? "./" : (b.pop(), b.join("/") + "/");
    },
    initMaterials: function(a, b, c) {
        for (var d = [], e = 0; e < a.length; ++e) d[e] = this.createMaterial(a[e], b, c);
        return d;
    },
    createMaterial: function() {
        var a, b, c;
        return function(d, e, f) {
            function g(a, c, d, g, i) {
                var j, k = e + a, l = THREE.Loader.Handlers.get(k);
                null !== l ? j = l.load(k) : (b.setCrossOrigin(f), j = b.load(k)), void 0 !== c && (j.repeat.fromArray(c), 
                1 !== c[0] && (j.wrapS = THREE.RepeatWrapping), 1 !== c[1] && (j.wrapT = THREE.RepeatWrapping)), 
                void 0 !== d && j.offset.fromArray(d), void 0 !== g && ("repeat" === g[0] && (j.wrapS = THREE.RepeatWrapping), 
                "mirror" === g[0] && (j.wrapS = THREE.MirroredRepeatWrapping), "repeat" === g[1] && (j.wrapT = THREE.RepeatWrapping), 
                "mirror" === g[1] && (j.wrapT = THREE.MirroredRepeatWrapping)), void 0 !== i && (j.anisotropy = i);
                var m = THREE.Math.generateUUID();
                return h[m] = j, m;
            }
            void 0 === a && (a = new THREE.Color()), void 0 === b && (b = new THREE.TextureLoader()), 
            void 0 === c && (c = new THREE.MaterialLoader());
            var h = {}, i = {
                uuid: THREE.Math.generateUUID(),
                type: "MeshLambertMaterial"
            };
            for (var j in d) {
                var k = d[j];
                switch (j) {
                  case "DbgColor":
                  case "DbgIndex":
                  case "opticalDensity":
                  case "illumination":
                    break;

                  case "DbgName":
                    i.name = k;
                    break;

                  case "blending":
                    i.blending = THREE[k];
                    break;

                  case "colorAmbient":
                  case "mapAmbient":
                    console.warn("THREE.Loader.createMaterial:", j, "is no longer supported.");
                    break;

                  case "colorDiffuse":
                    i.color = a.fromArray(k).getHex();
                    break;

                  case "colorSpecular":
                    i.specular = a.fromArray(k).getHex();
                    break;

                  case "colorEmissive":
                    i.emissive = a.fromArray(k).getHex();
                    break;

                  case "specularCoef":
                    i.shininess = k;
                    break;

                  case "shading":
                    "basic" === k.toLowerCase() && (i.type = "MeshBasicMaterial"), "phong" === k.toLowerCase() && (i.type = "MeshPhongMaterial");
                    break;

                  case "mapDiffuse":
                    i.map = g(k, d.mapDiffuseRepeat, d.mapDiffuseOffset, d.mapDiffuseWrap, d.mapDiffuseAnisotropy);
                    break;

                  case "mapDiffuseRepeat":
                  case "mapDiffuseOffset":
                  case "mapDiffuseWrap":
                  case "mapDiffuseAnisotropy":
                    break;

                  case "mapLight":
                    i.lightMap = g(k, d.mapLightRepeat, d.mapLightOffset, d.mapLightWrap, d.mapLightAnisotropy);
                    break;

                  case "mapLightRepeat":
                  case "mapLightOffset":
                  case "mapLightWrap":
                  case "mapLightAnisotropy":
                    break;

                  case "mapAO":
                    i.aoMap = g(k, d.mapAORepeat, d.mapAOOffset, d.mapAOWrap, d.mapAOAnisotropy);
                    break;

                  case "mapAORepeat":
                  case "mapAOOffset":
                  case "mapAOWrap":
                  case "mapAOAnisotropy":
                    break;

                  case "mapBump":
                    i.bumpMap = g(k, d.mapBumpRepeat, d.mapBumpOffset, d.mapBumpWrap, d.mapBumpAnisotropy);
                    break;

                  case "mapBumpScale":
                    i.bumpScale = k;
                    break;

                  case "mapBumpRepeat":
                  case "mapBumpOffset":
                  case "mapBumpWrap":
                  case "mapBumpAnisotropy":
                    break;

                  case "mapNormal":
                    i.normalMap = g(k, d.mapNormalRepeat, d.mapNormalOffset, d.mapNormalWrap, d.mapNormalAnisotropy);
                    break;

                  case "mapNormalFactor":
                    i.normalScale = [ k, k ];
                    break;

                  case "mapNormalRepeat":
                  case "mapNormalOffset":
                  case "mapNormalWrap":
                  case "mapNormalAnisotropy":
                    break;

                  case "mapSpecular":
                    i.specularMap = g(k, d.mapSpecularRepeat, d.mapSpecularOffset, d.mapSpecularWrap, d.mapSpecularAnisotropy);
                    break;

                  case "mapSpecularRepeat":
                  case "mapSpecularOffset":
                  case "mapSpecularWrap":
                  case "mapSpecularAnisotropy":
                    break;

                  case "mapAlpha":
                    i.alphaMap = g(k, d.mapAlphaRepeat, d.mapAlphaOffset, d.mapAlphaWrap, d.mapAlphaAnisotropy);
                    break;

                  case "mapAlphaRepeat":
                  case "mapAlphaOffset":
                  case "mapAlphaWrap":
                  case "mapAlphaAnisotropy":
                    break;

                  case "flipSided":
                    i.side = THREE.BackSide;
                    break;

                  case "doubleSided":
                    i.side = THREE.DoubleSide;
                    break;

                  case "transparency":
                    console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"), 
                    i.opacity = k;
                    break;

                  case "depthTest":
                  case "depthWrite":
                  case "colorWrite":
                  case "opacity":
                  case "reflectivity":
                  case "transparent":
                  case "visible":
                  case "wireframe":
                    i[j] = k;
                    break;

                  case "vertexColors":
                    k === !0 && (i.vertexColors = THREE.VertexColors), "face" === k && (i.vertexColors = THREE.FaceColors);
                    break;

                  default:
                    console.error("THREE.Loader.createMaterial: Unsupported", j, k);
                }
            }
            return "MeshBasicMaterial" === i.type && delete i.emissive, "MeshPhongMaterial" !== i.type && delete i.specular, 
            i.opacity < 1 && (i.transparent = !0), c.setTextures(h), c.parse(i);
        };
    }()
}, THREE.Loader.Handlers = {
    handlers: [],
    add: function(a, b) {
        this.handlers.push(a, b);
    },
    get: function(a) {
        for (var b = this.handlers, c = 0, d = b.length; d > c; c += 2) {
            var e = b[c], f = b[c + 1];
            if (e.test(a)) return f;
        }
        return null;
    }
}, THREE.XHRLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.XHRLoader.prototype = {
    constructor: THREE.XHRLoader,
    load: function(a, b, c, d) {
        void 0 !== this.path && (a = this.path + a);
        var e = this, f = THREE.Cache.get(a);
        if (void 0 !== f) return b && setTimeout(function() {
            b(f);
        }, 0), f;
        var g = new XMLHttpRequest();
        return g.overrideMimeType("text/plain"), g.open("GET", a, !0), g.addEventListener("load", function(c) {
            var f = c.target.response;
            THREE.Cache.add(a, f), 200 === this.status ? (b && b(f), e.manager.itemEnd(a)) : 0 === this.status ? (console.warn("THREE.XHRLoader: HTTP Status 0 received."), 
            b && b(f), e.manager.itemEnd(a)) : (d && d(c), e.manager.itemError(a));
        }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
            c(a);
        }, !1), g.addEventListener("error", function(b) {
            d && d(b), e.manager.itemError(a);
        }, !1), void 0 !== this.responseType && (g.responseType = this.responseType), void 0 !== this.withCredentials && (g.withCredentials = this.withCredentials), 
        g.send(null), e.manager.itemStart(a), g;
    },
    setPath: function(a) {
        this.path = a;
    },
    setResponseType: function(a) {
        this.responseType = a;
    },
    setWithCredentials: function(a) {
        this.withCredentials = a;
    }
}, THREE.FontLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.FontLoader.prototype = {
    constructor: THREE.FontLoader,
    load: function(a, b, c, d) {
        var e = new THREE.XHRLoader(this.manager);
        e.load(a, function(a) {
            b(new THREE.Font(JSON.parse(a.substring(65, a.length - 2))));
        }, c, d);
    }
}, THREE.ImageLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.ImageLoader.prototype = {
    constructor: THREE.ImageLoader,
    load: function(a, b, c, d) {
        void 0 !== this.path && (a = this.path + a);
        var e = this, f = THREE.Cache.get(a);
        if (void 0 !== f) return e.manager.itemStart(a), b ? setTimeout(function() {
            b(f), e.manager.itemEnd(a);
        }, 0) : e.manager.itemEnd(a), f;
        var g = document.createElement("img");
        return g.addEventListener("load", function(c) {
            THREE.Cache.add(a, this), b && b(this), e.manager.itemEnd(a);
        }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
            c(a);
        }, !1), g.addEventListener("error", function(b) {
            d && d(b), e.manager.itemError(a);
        }, !1), void 0 !== this.crossOrigin && (g.crossOrigin = this.crossOrigin), e.manager.itemStart(a), 
        g.src = a, g;
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    setPath: function(a) {
        this.path = a;
    }
}, THREE.JSONLoader = function(a) {
    "boolean" == typeof a && (console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."), 
    a = void 0), this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager, this.withCredentials = !1;
}, THREE.JSONLoader.prototype = {
    constructor: THREE.JSONLoader,
    get statusDomElement() {
        return void 0 === this._statusDomElement && (this._statusDomElement = document.createElement("div")), 
        console.warn("THREE.JSONLoader: .statusDomElement has been removed."), this._statusDomElement;
    },
    load: function(a, b, c, d) {
        var e = this, f = this.texturePath && "string" == typeof this.texturePath ? this.texturePath : THREE.Loader.prototype.extractUrlBase(a), g = new THREE.XHRLoader(this.manager);
        g.setWithCredentials(this.withCredentials), g.load(a, function(c) {
            var d = JSON.parse(c), g = d.metadata;
            if (void 0 !== g) {
                var h = g.type;
                if (void 0 !== h) {
                    if ("object" === h.toLowerCase()) return void console.error("THREE.JSONLoader: " + a + " should be loaded with THREE.ObjectLoader instead.");
                    if ("scene" === h.toLowerCase()) return void console.error("THREE.JSONLoader: " + a + " should be loaded with THREE.SceneLoader instead.");
                }
            }
            var i = e.parse(d, f);
            b(i.geometry, i.materials);
        }, c, d);
    },
    setTexturePath: function(a) {
        this.texturePath = a;
    },
    parse: function(a, b) {
        function c(b) {
            function c(a, b) {
                return a & 1 << b;
            }
            var d, e, f, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F = a.faces, G = a.vertices, H = a.normals, I = a.colors, J = 0;
            if (void 0 !== a.uvs) {
                for (d = 0; d < a.uvs.length; d++) a.uvs[d].length && J++;
                for (d = 0; J > d; d++) g.faceVertexUvs[d] = [];
            }
            for (h = 0, i = G.length; i > h; ) v = new THREE.Vector3(), v.x = G[h++] * b, v.y = G[h++] * b, 
            v.z = G[h++] * b, g.vertices.push(v);
            for (h = 0, i = F.length; i > h; ) if (n = F[h++], o = c(n, 0), p = c(n, 1), q = c(n, 3), 
            r = c(n, 4), s = c(n, 5), t = c(n, 6), u = c(n, 7), o) {
                if (x = new THREE.Face3(), x.a = F[h], x.b = F[h + 1], x.c = F[h + 3], y = new THREE.Face3(), 
                y.a = F[h + 1], y.b = F[h + 2], y.c = F[h + 3], h += 4, p && (m = F[h++], x.materialIndex = m, 
                y.materialIndex = m), f = g.faces.length, q) for (d = 0; J > d; d++) for (B = a.uvs[d], 
                g.faceVertexUvs[d][f] = [], g.faceVertexUvs[d][f + 1] = [], e = 0; 4 > e; e++) l = F[h++], 
                D = B[2 * l], E = B[2 * l + 1], C = new THREE.Vector2(D, E), 2 !== e && g.faceVertexUvs[d][f].push(C), 
                0 !== e && g.faceVertexUvs[d][f + 1].push(C);
                if (r && (k = 3 * F[h++], x.normal.set(H[k++], H[k++], H[k]), y.normal.copy(x.normal)), 
                s) for (d = 0; 4 > d; d++) k = 3 * F[h++], A = new THREE.Vector3(H[k++], H[k++], H[k]), 
                2 !== d && x.vertexNormals.push(A), 0 !== d && y.vertexNormals.push(A);
                if (t && (j = F[h++], z = I[j], x.color.setHex(z), y.color.setHex(z)), u) for (d = 0; 4 > d; d++) j = F[h++], 
                z = I[j], 2 !== d && x.vertexColors.push(new THREE.Color(z)), 0 !== d && y.vertexColors.push(new THREE.Color(z));
                g.faces.push(x), g.faces.push(y);
            } else {
                if (w = new THREE.Face3(), w.a = F[h++], w.b = F[h++], w.c = F[h++], p && (m = F[h++], 
                w.materialIndex = m), f = g.faces.length, q) for (d = 0; J > d; d++) for (B = a.uvs[d], 
                g.faceVertexUvs[d][f] = [], e = 0; 3 > e; e++) l = F[h++], D = B[2 * l], E = B[2 * l + 1], 
                C = new THREE.Vector2(D, E), g.faceVertexUvs[d][f].push(C);
                if (r && (k = 3 * F[h++], w.normal.set(H[k++], H[k++], H[k])), s) for (d = 0; 3 > d; d++) k = 3 * F[h++], 
                A = new THREE.Vector3(H[k++], H[k++], H[k]), w.vertexNormals.push(A);
                if (t && (j = F[h++], w.color.setHex(I[j])), u) for (d = 0; 3 > d; d++) j = F[h++], 
                w.vertexColors.push(new THREE.Color(I[j]));
                g.faces.push(w);
            }
        }
        function d() {
            var b = void 0 !== a.influencesPerVertex ? a.influencesPerVertex : 2;
            if (a.skinWeights) for (var c = 0, d = a.skinWeights.length; d > c; c += b) {
                var e = a.skinWeights[c], f = b > 1 ? a.skinWeights[c + 1] : 0, h = b > 2 ? a.skinWeights[c + 2] : 0, i = b > 3 ? a.skinWeights[c + 3] : 0;
                g.skinWeights.push(new THREE.Vector4(e, f, h, i));
            }
            if (a.skinIndices) for (var c = 0, d = a.skinIndices.length; d > c; c += b) {
                var j = a.skinIndices[c], k = b > 1 ? a.skinIndices[c + 1] : 0, l = b > 2 ? a.skinIndices[c + 2] : 0, m = b > 3 ? a.skinIndices[c + 3] : 0;
                g.skinIndices.push(new THREE.Vector4(j, k, l, m));
            }
            g.bones = a.bones, g.bones && g.bones.length > 0 && (g.skinWeights.length !== g.skinIndices.length || g.skinIndices.length !== g.vertices.length) && console.warn("When skinning, number of vertices (" + g.vertices.length + "), skinIndices (" + g.skinIndices.length + "), and skinWeights (" + g.skinWeights.length + ") should match.");
        }
        function e(b) {
            if (void 0 !== a.morphTargets) for (var c = 0, d = a.morphTargets.length; d > c; c++) {
                g.morphTargets[c] = {}, g.morphTargets[c].name = a.morphTargets[c].name, g.morphTargets[c].vertices = [];
                for (var e = g.morphTargets[c].vertices, f = a.morphTargets[c].vertices, h = 0, i = f.length; i > h; h += 3) {
                    var j = new THREE.Vector3();
                    j.x = f[h] * b, j.y = f[h + 1] * b, j.z = f[h + 2] * b, e.push(j);
                }
            }
            if (void 0 !== a.morphColors && a.morphColors.length > 0) {
                console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');
                for (var k = g.faces, l = a.morphColors[0].colors, c = 0, d = k.length; d > c; c++) k[c].color.fromArray(l, 3 * c);
            }
        }
        function f() {
            var b = [], c = [];
            void 0 !== a.animation && c.push(a.animation), void 0 !== a.animations && (a.animations.length ? c = c.concat(a.animations) : c.push(a.animations));
            for (var d = 0; d < c.length; d++) {
                var e = THREE.AnimationClip.parseAnimation(c[d], g.bones);
                e && b.push(e);
            }
            if (g.morphTargets) {
                var f = THREE.AnimationClip.CreateClipsFromMorphTargetSequences(g.morphTargets, 10);
                b = b.concat(f);
            }
            b.length > 0 && (g.animations = b);
        }
        var g = new THREE.Geometry(), h = void 0 !== a.scale ? 1 / a.scale : 1;
        if (c(h), d(), e(h), f(), g.computeFaceNormals(), g.computeBoundingSphere(), void 0 === a.materials || 0 === a.materials.length) return {
            geometry: g
        };
        var i = THREE.Loader.prototype.initMaterials(a.materials, b, this.crossOrigin);
        return {
            geometry: g,
            materials: i
        };
    }
}, THREE.LoadingManager = function(a, b, c) {
    var d = this, e = !1, f = 0, g = 0;
    this.onStart = void 0, this.onLoad = a, this.onProgress = b, this.onError = c, this.itemStart = function(a) {
        g++, e === !1 && void 0 !== d.onStart && d.onStart(a, f, g), e = !0;
    }, this.itemEnd = function(a) {
        f++, void 0 !== d.onProgress && d.onProgress(a, f, g), f === g && (e = !1, void 0 !== d.onLoad && d.onLoad());
    }, this.itemError = function(a) {
        void 0 !== d.onError && d.onError(a);
    };
}, THREE.DefaultLoadingManager = new THREE.LoadingManager(), THREE.BufferGeometryLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.BufferGeometryLoader.prototype = {
    constructor: THREE.BufferGeometryLoader,
    load: function(a, b, c, d) {
        var e = this, f = new THREE.XHRLoader(e.manager);
        f.load(a, function(a) {
            b(e.parse(JSON.parse(a)));
        }, c, d);
    },
    parse: function(a) {
        var b = new THREE.BufferGeometry(), c = a.data.index, d = {
            Int8Array: Int8Array,
            Uint8Array: Uint8Array,
            Uint8ClampedArray: Uint8ClampedArray,
            Int16Array: Int16Array,
            Uint16Array: Uint16Array,
            Int32Array: Int32Array,
            Uint32Array: Uint32Array,
            Float32Array: Float32Array,
            Float64Array: Float64Array
        };
        if (void 0 !== c) {
            var e = new d[c.type](c.array);
            b.setIndex(new THREE.BufferAttribute(e, 1));
        }
        var f = a.data.attributes;
        for (var g in f) {
            var h = f[g], e = new d[h.type](h.array);
            b.addAttribute(g, new THREE.BufferAttribute(e, h.itemSize));
        }
        var i = a.data.groups || a.data.drawcalls || a.data.offsets;
        if (void 0 !== i) for (var j = 0, k = i.length; j !== k; ++j) {
            var l = i[j];
            b.addGroup(l.start, l.count, l.materialIndex);
        }
        var m = a.data.boundingSphere;
        if (void 0 !== m) {
            var n = new THREE.Vector3();
            void 0 !== m.center && n.fromArray(m.center), b.boundingSphere = new THREE.Sphere(n, m.radius);
        }
        return b;
    }
}, THREE.MaterialLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager, this.textures = {};
}, THREE.MaterialLoader.prototype = {
    constructor: THREE.MaterialLoader,
    load: function(a, b, c, d) {
        var e = this, f = new THREE.XHRLoader(e.manager);
        f.load(a, function(a) {
            b(e.parse(JSON.parse(a)));
        }, c, d);
    },
    setTextures: function(a) {
        this.textures = a;
    },
    getTexture: function(a) {
        var b = this.textures;
        return void 0 === b[a] && console.warn("THREE.MaterialLoader: Undefined texture", a), 
        b[a];
    },
    parse: function(a) {
        var b = new THREE[a.type]();
        if (void 0 !== a.uuid && (b.uuid = a.uuid), void 0 !== a.name && (b.name = a.name), 
        void 0 !== a.color && b.color.setHex(a.color), void 0 !== a.roughness && (b.roughness = a.roughness), 
        void 0 !== a.metalness && (b.metalness = a.metalness), void 0 !== a.emissive && b.emissive.setHex(a.emissive), 
        void 0 !== a.specular && b.specular.setHex(a.specular), void 0 !== a.shininess && (b.shininess = a.shininess), 
        void 0 !== a.uniforms && (b.uniforms = a.uniforms), void 0 !== a.vertexShader && (b.vertexShader = a.vertexShader), 
        void 0 !== a.fragmentShader && (b.fragmentShader = a.fragmentShader), void 0 !== a.vertexColors && (b.vertexColors = a.vertexColors), 
        void 0 !== a.shading && (b.shading = a.shading), void 0 !== a.blending && (b.blending = a.blending), 
        void 0 !== a.side && (b.side = a.side), void 0 !== a.opacity && (b.opacity = a.opacity), 
        void 0 !== a.transparent && (b.transparent = a.transparent), void 0 !== a.alphaTest && (b.alphaTest = a.alphaTest), 
        void 0 !== a.depthTest && (b.depthTest = a.depthTest), void 0 !== a.depthWrite && (b.depthWrite = a.depthWrite), 
        void 0 !== a.colorWrite && (b.colorWrite = a.colorWrite), void 0 !== a.wireframe && (b.wireframe = a.wireframe), 
        void 0 !== a.wireframeLinewidth && (b.wireframeLinewidth = a.wireframeLinewidth), 
        void 0 !== a.size && (b.size = a.size), void 0 !== a.sizeAttenuation && (b.sizeAttenuation = a.sizeAttenuation), 
        void 0 !== a.map && (b.map = this.getTexture(a.map)), void 0 !== a.alphaMap && (b.alphaMap = this.getTexture(a.alphaMap), 
        b.transparent = !0), void 0 !== a.bumpMap && (b.bumpMap = this.getTexture(a.bumpMap)), 
        void 0 !== a.bumpScale && (b.bumpScale = a.bumpScale), void 0 !== a.normalMap && (b.normalMap = this.getTexture(a.normalMap)), 
        void 0 !== a.normalScale) {
            var c = a.normalScale;
            Array.isArray(c) === !1 && (c = [ c, c ]), b.normalScale = new THREE.Vector2().fromArray(c);
        }
        if (void 0 !== a.displacementMap && (b.displacementMap = this.getTexture(a.displacementMap)), 
        void 0 !== a.displacementScale && (b.displacementScale = a.displacementScale), void 0 !== a.displacementBias && (b.displacementBias = a.displacementBias), 
        void 0 !== a.roughnessMap && (b.roughnessMap = this.getTexture(a.roughnessMap)), 
        void 0 !== a.metalnessMap && (b.metalnessMap = this.getTexture(a.metalnessMap)), 
        void 0 !== a.emissiveMap && (b.emissiveMap = this.getTexture(a.emissiveMap)), void 0 !== a.emissiveIntensity && (b.emissiveIntensity = a.emissiveIntensity), 
        void 0 !== a.specularMap && (b.specularMap = this.getTexture(a.specularMap)), void 0 !== a.envMap && (b.envMap = this.getTexture(a.envMap), 
        b.combine = THREE.MultiplyOperation), a.reflectivity && (b.reflectivity = a.reflectivity), 
        void 0 !== a.lightMap && (b.lightMap = this.getTexture(a.lightMap)), void 0 !== a.lightMapIntensity && (b.lightMapIntensity = a.lightMapIntensity), 
        void 0 !== a.aoMap && (b.aoMap = this.getTexture(a.aoMap)), void 0 !== a.aoMapIntensity && (b.aoMapIntensity = a.aoMapIntensity), 
        void 0 !== a.materials) for (var d = 0, e = a.materials.length; e > d; d++) b.materials.push(this.parse(a.materials[d]));
        return b;
    }
}, THREE.ObjectLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager, this.texturePath = "";
}, THREE.ObjectLoader.prototype = {
    constructor: THREE.ObjectLoader,
    load: function(a, b, c, d) {
        "" === this.texturePath && (this.texturePath = a.substring(0, a.lastIndexOf("/") + 1));
        var e = this, f = new THREE.XHRLoader(e.manager);
        f.load(a, function(a) {
            e.parse(JSON.parse(a), b);
        }, c, d);
    },
    setTexturePath: function(a) {
        this.texturePath = a;
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    parse: function(a, b) {
        var c = this.parseGeometries(a.geometries), d = this.parseImages(a.images, function() {
            void 0 !== b && b(g);
        }), e = this.parseTextures(a.textures, d), f = this.parseMaterials(a.materials, e), g = this.parseObject(a.object, c, f);
        return a.animations && (g.animations = this.parseAnimations(a.animations)), void 0 !== a.images && 0 !== a.images.length || void 0 !== b && b(g), 
        g;
    },
    parseGeometries: function(a) {
        var b = {};
        if (void 0 !== a) for (var c = new THREE.JSONLoader(), d = new THREE.BufferGeometryLoader(), e = 0, f = a.length; f > e; e++) {
            var g, h = a[e];
            switch (h.type) {
              case "PlaneGeometry":
              case "PlaneBufferGeometry":
                g = new THREE[h.type](h.width, h.height, h.widthSegments, h.heightSegments);
                break;

              case "BoxGeometry":
              case "BoxBufferGeometry":
              case "CubeGeometry":
                g = new THREE[h.type](h.width, h.height, h.depth, h.widthSegments, h.heightSegments, h.depthSegments);
                break;

              case "CircleGeometry":
              case "CircleBufferGeometry":
                g = new THREE[h.type](h.radius, h.segments, h.thetaStart, h.thetaLength);
                break;

              case "CylinderGeometry":
              case "CylinderBufferGeometry":
                g = new THREE[h.type](h.radiusTop, h.radiusBottom, h.height, h.radialSegments, h.heightSegments, h.openEnded, h.thetaStart, h.thetaLength);
                break;

              case "SphereGeometry":
              case "SphereBufferGeometry":
                g = new THREE[h.type](h.radius, h.widthSegments, h.heightSegments, h.phiStart, h.phiLength, h.thetaStart, h.thetaLength);
                break;

              case "DodecahedronGeometry":
                g = new THREE.DodecahedronGeometry(h.radius, h.detail);
                break;

              case "IcosahedronGeometry":
                g = new THREE.IcosahedronGeometry(h.radius, h.detail);
                break;

              case "OctahedronGeometry":
                g = new THREE.OctahedronGeometry(h.radius, h.detail);
                break;

              case "TetrahedronGeometry":
                g = new THREE.TetrahedronGeometry(h.radius, h.detail);
                break;

              case "RingGeometry":
              case "RingBufferGeometry":
                g = new THREE[h.type](h.innerRadius, h.outerRadius, h.thetaSegments, h.phiSegments, h.thetaStart, h.thetaLength);
                break;

              case "TorusGeometry":
              case "TorusBufferGeometry":
                g = new THREE[h.type](h.radius, h.tube, h.radialSegments, h.tubularSegments, h.arc);
                break;

              case "TorusKnotGeometry":
              case "TorusKnotBufferGeometry":
                g = new THREE[h.type](h.radius, h.tube, h.tubularSegments, h.radialSegments, h.p, h.q);
                break;

              case "LatheGeometry":
                g = new THREE.LatheGeometry(h.points, h.segments, h.phiStart, h.phiLength);
                break;

              case "BufferGeometry":
                g = d.parse(h);
                break;

              case "Geometry":
                g = c.parse(h.data, this.texturePath).geometry;
                break;

              default:
                console.warn('THREE.ObjectLoader: Unsupported geometry type "' + h.type + '"');
                continue;
            }
            g.uuid = h.uuid, void 0 !== h.name && (g.name = h.name), b[h.uuid] = g;
        }
        return b;
    },
    parseMaterials: function(a, b) {
        var c = {};
        if (void 0 !== a) {
            var d = new THREE.MaterialLoader();
            d.setTextures(b);
            for (var e = 0, f = a.length; f > e; e++) {
                var g = d.parse(a[e]);
                c[g.uuid] = g;
            }
        }
        return c;
    },
    parseAnimations: function(a) {
        for (var b = [], c = 0; c < a.length; c++) {
            var d = THREE.AnimationClip.parse(a[c]);
            b.push(d);
        }
        return b;
    },
    parseImages: function(a, b) {
        function c(a) {
            return d.manager.itemStart(a), g.load(a, function() {
                d.manager.itemEnd(a);
            });
        }
        var d = this, e = {};
        if (void 0 !== a && a.length > 0) {
            var f = new THREE.LoadingManager(b), g = new THREE.ImageLoader(f);
            g.setCrossOrigin(this.crossOrigin);
            for (var h = 0, i = a.length; i > h; h++) {
                var j = a[h], k = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(j.url) ? j.url : d.texturePath + j.url;
                e[j.uuid] = c(k);
            }
        }
        return e;
    },
    parseTextures: function(a, b) {
        function c(a) {
            return "number" == typeof a ? a : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", a), 
            THREE[a]);
        }
        var d = {};
        if (void 0 !== a) for (var e = 0, f = a.length; f > e; e++) {
            var g = a[e];
            void 0 === g.image && console.warn('THREE.ObjectLoader: No "image" specified for', g.uuid), 
            void 0 === b[g.image] && console.warn("THREE.ObjectLoader: Undefined image", g.image);
            var h = new THREE.Texture(b[g.image]);
            h.needsUpdate = !0, h.uuid = g.uuid, void 0 !== g.name && (h.name = g.name), void 0 !== g.mapping && (h.mapping = c(g.mapping)), 
            void 0 !== g.offset && (h.offset = new THREE.Vector2(g.offset[0], g.offset[1])), 
            void 0 !== g.repeat && (h.repeat = new THREE.Vector2(g.repeat[0], g.repeat[1])), 
            void 0 !== g.minFilter && (h.minFilter = c(g.minFilter)), void 0 !== g.magFilter && (h.magFilter = c(g.magFilter)), 
            void 0 !== g.anisotropy && (h.anisotropy = g.anisotropy), Array.isArray(g.wrap) && (h.wrapS = c(g.wrap[0]), 
            h.wrapT = c(g.wrap[1])), d[g.uuid] = h;
        }
        return d;
    },
    parseObject: function() {
        var a = new THREE.Matrix4();
        return function(b, c, d) {
            function e(a) {
                return void 0 === c[a] && console.warn("THREE.ObjectLoader: Undefined geometry", a), 
                c[a];
            }
            function f(a) {
                return void 0 !== a ? (void 0 === d[a] && console.warn("THREE.ObjectLoader: Undefined material", a), 
                d[a]) : void 0;
            }
            var g;
            switch (b.type) {
              case "Scene":
                g = new THREE.Scene();
                break;

              case "PerspectiveCamera":
                g = new THREE.PerspectiveCamera(b.fov, b.aspect, b.near, b.far);
                break;

              case "OrthographicCamera":
                g = new THREE.OrthographicCamera(b.left, b.right, b.top, b.bottom, b.near, b.far);
                break;

              case "AmbientLight":
                g = new THREE.AmbientLight(b.color, b.intensity);
                break;

              case "DirectionalLight":
                g = new THREE.DirectionalLight(b.color, b.intensity);
                break;

              case "PointLight":
                g = new THREE.PointLight(b.color, b.intensity, b.distance, b.decay);
                break;

              case "SpotLight":
                g = new THREE.SpotLight(b.color, b.intensity, b.distance, b.angle, b.penumbra, b.decay);
                break;

              case "HemisphereLight":
                g = new THREE.HemisphereLight(b.color, b.groundColor, b.intensity);
                break;

              case "Mesh":
                var h = e(b.geometry), i = f(b.material);
                g = h.bones && h.bones.length > 0 ? new THREE.SkinnedMesh(h, i) : new THREE.Mesh(h, i);
                break;

              case "LOD":
                g = new THREE.LOD();
                break;

              case "Line":
                g = new THREE.Line(e(b.geometry), f(b.material), b.mode);
                break;

              case "PointCloud":
              case "Points":
                g = new THREE.Points(e(b.geometry), f(b.material));
                break;

              case "Sprite":
                g = new THREE.Sprite(f(b.material));
                break;

              case "Group":
                g = new THREE.Group();
                break;

              default:
                g = new THREE.Object3D();
            }
            if (g.uuid = b.uuid, void 0 !== b.name && (g.name = b.name), void 0 !== b.matrix ? (a.fromArray(b.matrix), 
            a.decompose(g.position, g.quaternion, g.scale)) : (void 0 !== b.position && g.position.fromArray(b.position), 
            void 0 !== b.rotation && g.rotation.fromArray(b.rotation), void 0 !== b.scale && g.scale.fromArray(b.scale)), 
            void 0 !== b.castShadow && (g.castShadow = b.castShadow), void 0 !== b.receiveShadow && (g.receiveShadow = b.receiveShadow), 
            void 0 !== b.visible && (g.visible = b.visible), void 0 !== b.userData && (g.userData = b.userData), 
            void 0 !== b.children) for (var j in b.children) g.add(this.parseObject(b.children[j], c, d));
            if ("LOD" === b.type) for (var k = b.levels, l = 0; l < k.length; l++) {
                var m = k[l], j = g.getObjectByProperty("uuid", m.object);
                void 0 !== j && g.addLevel(j, m.distance);
            }
            return g;
        };
    }()
}, THREE.TextureLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.TextureLoader.prototype = {
    constructor: THREE.TextureLoader,
    load: function(a, b, c, d) {
        var e = new THREE.Texture(), f = new THREE.ImageLoader(this.manager);
        return f.setCrossOrigin(this.crossOrigin), f.setPath(this.path), f.load(a, function(a) {
            e.image = a, e.needsUpdate = !0, void 0 !== b && b(e);
        }, c, d), e;
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    setPath: function(a) {
        this.path = a;
    }
}, THREE.CubeTextureLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.CubeTextureLoader.prototype = {
    constructor: THREE.CubeTextureLoader,
    load: function(a, b, c, d) {
        function e(c) {
            g.load(a[c], function(a) {
                f.images[c] = a, h++, 6 === h && (f.needsUpdate = !0, b && b(f));
            }, void 0, d);
        }
        var f = new THREE.CubeTexture(), g = new THREE.ImageLoader(this.manager);
        g.setCrossOrigin(this.crossOrigin), g.setPath(this.path);
        for (var h = 0, i = 0; i < a.length; ++i) e(i);
        return f;
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    setPath: function(a) {
        this.path = a;
    }
}, THREE.DataTextureLoader = THREE.BinaryTextureLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager, this._parser = null;
}, THREE.BinaryTextureLoader.prototype = {
    constructor: THREE.BinaryTextureLoader,
    load: function(a, b, c, d) {
        var e = this, f = new THREE.DataTexture(), g = new THREE.XHRLoader(this.manager);
        return g.setResponseType("arraybuffer"), g.load(a, function(a) {
            var c = e._parser(a);
            c && (void 0 !== c.image ? f.image = c.image : void 0 !== c.data && (f.image.width = c.width, 
            f.image.height = c.height, f.image.data = c.data), f.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, 
            f.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, f.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, 
            f.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, 
            f.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, void 0 !== c.format && (f.format = c.format), 
            void 0 !== c.type && (f.type = c.type), void 0 !== c.mipmaps && (f.mipmaps = c.mipmaps), 
            1 === c.mipmapCount && (f.minFilter = THREE.LinearFilter), f.needsUpdate = !0, b && b(f, c));
        }, c, d), f;
    }
}, THREE.CompressedTextureLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager, this._parser = null;
}, THREE.CompressedTextureLoader.prototype = {
    constructor: THREE.CompressedTextureLoader,
    load: function(a, b, c, d) {
        function e(e) {
            i.load(a[e], function(a) {
                var c = f._parser(a, !0);
                g[e] = {
                    width: c.width,
                    height: c.height,
                    format: c.format,
                    mipmaps: c.mipmaps
                }, j += 1, 6 === j && (1 === c.mipmapCount && (h.minFilter = THREE.LinearFilter), 
                h.format = c.format, h.needsUpdate = !0, b && b(h));
            }, c, d);
        }
        var f = this, g = [], h = new THREE.CompressedTexture();
        h.image = g;
        var i = new THREE.XHRLoader(this.manager);
        if (i.setPath(this.path), i.setResponseType("arraybuffer"), Array.isArray(a)) for (var j = 0, k = 0, l = a.length; l > k; ++k) e(k); else i.load(a, function(a) {
            var c = f._parser(a, !0);
            if (c.isCubemap) for (var d = c.mipmaps.length / c.mipmapCount, e = 0; d > e; e++) {
                g[e] = {
                    mipmaps: []
                };
                for (var i = 0; i < c.mipmapCount; i++) g[e].mipmaps.push(c.mipmaps[e * c.mipmapCount + i]), 
                g[e].format = c.format, g[e].width = c.width, g[e].height = c.height;
            } else h.image.width = c.width, h.image.height = c.height, h.mipmaps = c.mipmaps;
            1 === c.mipmapCount && (h.minFilter = THREE.LinearFilter), h.format = c.format, 
            h.needsUpdate = !0, b && b(h);
        }, c, d);
        return h;
    },
    setPath: function(a) {
        this.path = a;
    }
}, THREE.Material = function() {
    Object.defineProperty(this, "id", {
        value: THREE.MaterialIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Material", 
    this.side = THREE.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = THREE.NormalBlending, 
    this.blendSrc = THREE.SrcAlphaFactor, this.blendDst = THREE.OneMinusSrcAlphaFactor, 
    this.blendEquation = THREE.AddEquation, this.blendSrcAlpha = null, this.blendDstAlpha = null, 
    this.blendEquationAlpha = null, this.depthFunc = THREE.LessEqualDepth, this.depthTest = !0, 
    this.depthWrite = !0, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, 
    this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.premultipliedAlpha = !1, 
    this.overdraw = 0, this.visible = !0, this._needsUpdate = !0;
}, THREE.Material.prototype = {
    constructor: THREE.Material,
    get needsUpdate() {
        return this._needsUpdate;
    },
    set needsUpdate(a) {
        a === !0 && this.update(), this._needsUpdate = a;
    },
    setValues: function(a) {
        if (void 0 !== a) for (var b in a) {
            var c = a[b];
            if (void 0 !== c) {
                var d = this[b];
                void 0 !== d ? d instanceof THREE.Color ? d.set(c) : d instanceof THREE.Vector3 && c instanceof THREE.Vector3 ? d.copy(c) : "overdraw" === b ? this[b] = Number(c) : this[b] = c : console.warn("THREE." + this.type + ": '" + b + "' is not a property of this material.");
            } else console.warn("THREE.Material: '" + b + "' parameter is undefined.");
        }
    },
    toJSON: function(a) {
        function b(a) {
            var b = [];
            for (var c in a) {
                var d = a[c];
                delete d.metadata, b.push(d);
            }
            return b;
        }
        var c = void 0 === a;
        c && (a = {
            textures: {},
            images: {}
        });
        var d = {
            metadata: {
                version: 4.4,
                type: "Material",
                generator: "Material.toJSON"
            }
        };
        if (d.uuid = this.uuid, d.type = this.type, "" !== this.name && (d.name = this.name), 
        this.color instanceof THREE.Color && (d.color = this.color.getHex()), .5 !== this.roughness && (d.roughness = this.roughness), 
        .5 !== this.metalness && (d.metalness = this.metalness), this.emissive instanceof THREE.Color && (d.emissive = this.emissive.getHex()), 
        this.specular instanceof THREE.Color && (d.specular = this.specular.getHex()), void 0 !== this.shininess && (d.shininess = this.shininess), 
        this.map instanceof THREE.Texture && (d.map = this.map.toJSON(a).uuid), this.alphaMap instanceof THREE.Texture && (d.alphaMap = this.alphaMap.toJSON(a).uuid), 
        this.lightMap instanceof THREE.Texture && (d.lightMap = this.lightMap.toJSON(a).uuid), 
        this.bumpMap instanceof THREE.Texture && (d.bumpMap = this.bumpMap.toJSON(a).uuid, 
        d.bumpScale = this.bumpScale), this.normalMap instanceof THREE.Texture && (d.normalMap = this.normalMap.toJSON(a).uuid, 
        d.normalScale = this.normalScale.toArray()), this.displacementMap instanceof THREE.Texture && (d.displacementMap = this.displacementMap.toJSON(a).uuid, 
        d.displacementScale = this.displacementScale, d.displacementBias = this.displacementBias), 
        this.roughnessMap instanceof THREE.Texture && (d.roughnessMap = this.roughnessMap.toJSON(a).uuid), 
        this.metalnessMap instanceof THREE.Texture && (d.metalnessMap = this.metalnessMap.toJSON(a).uuid), 
        this.emissiveMap instanceof THREE.Texture && (d.emissiveMap = this.emissiveMap.toJSON(a).uuid), 
        this.specularMap instanceof THREE.Texture && (d.specularMap = this.specularMap.toJSON(a).uuid), 
        this.envMap instanceof THREE.Texture && (d.envMap = this.envMap.toJSON(a).uuid, 
        d.reflectivity = this.reflectivity), void 0 !== this.size && (d.size = this.size), 
        void 0 !== this.sizeAttenuation && (d.sizeAttenuation = this.sizeAttenuation), void 0 !== this.vertexColors && this.vertexColors !== THREE.NoColors && (d.vertexColors = this.vertexColors), 
        void 0 !== this.shading && this.shading !== THREE.SmoothShading && (d.shading = this.shading), 
        void 0 !== this.blending && this.blending !== THREE.NormalBlending && (d.blending = this.blending), 
        void 0 !== this.side && this.side !== THREE.FrontSide && (d.side = this.side), this.opacity < 1 && (d.opacity = this.opacity), 
        this.transparent === !0 && (d.transparent = this.transparent), this.alphaTest > 0 && (d.alphaTest = this.alphaTest), 
        this.premultipliedAlpha === !0 && (d.premultipliedAlpha = this.premultipliedAlpha), 
        this.wireframe === !0 && (d.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (d.wireframeLinewidth = this.wireframeLinewidth), 
        c) {
            var e = b(a.textures), f = b(a.images);
            e.length > 0 && (d.textures = e), f.length > 0 && (d.images = f);
        }
        return d;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.name = a.name, this.side = a.side, this.opacity = a.opacity, this.transparent = a.transparent, 
        this.blending = a.blending, this.blendSrc = a.blendSrc, this.blendDst = a.blendDst, 
        this.blendEquation = a.blendEquation, this.blendSrcAlpha = a.blendSrcAlpha, this.blendDstAlpha = a.blendDstAlpha, 
        this.blendEquationAlpha = a.blendEquationAlpha, this.depthFunc = a.depthFunc, this.depthTest = a.depthTest, 
        this.depthWrite = a.depthWrite, this.colorWrite = a.colorWrite, this.precision = a.precision, 
        this.polygonOffset = a.polygonOffset, this.polygonOffsetFactor = a.polygonOffsetFactor, 
        this.polygonOffsetUnits = a.polygonOffsetUnits, this.alphaTest = a.alphaTest, this.premultipliedAlpha = a.premultipliedAlpha, 
        this.overdraw = a.overdraw, this.visible = a.visible, this;
    },
    update: function() {
        this.dispatchEvent({
            type: "update"
        });
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Material.prototype), THREE.MaterialIdCount = 0, 
THREE.LineBasicMaterial = function(a) {
    THREE.Material.call(this), this.type = "LineBasicMaterial", this.color = new THREE.Color(16777215), 
    this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.blending = THREE.NormalBlending, 
    this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a);
}, THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial, THREE.LineBasicMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.linewidth = a.linewidth, 
    this.linecap = a.linecap, this.linejoin = a.linejoin, this.vertexColors = a.vertexColors, 
    this.fog = a.fog, this;
}, THREE.LineDashedMaterial = function(a) {
    THREE.Material.call(this), this.type = "LineDashedMaterial", this.color = new THREE.Color(16777215), 
    this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.blending = THREE.NormalBlending, 
    this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a);
}, THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial, THREE.LineDashedMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.linewidth = a.linewidth, 
    this.scale = a.scale, this.dashSize = a.dashSize, this.gapSize = a.gapSize, this.vertexColors = a.vertexColors, 
    this.fog = a.fog, this;
}, THREE.MeshBasicMaterial = function(a) {
    THREE.Material.call(this), this.type = "MeshBasicMaterial", this.color = new THREE.Color(16777215), 
    this.map = null, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, 
    this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, 
    this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, 
    this.blending = THREE.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, 
    this.skinning = !1, this.morphTargets = !1, this.setValues(a);
}, THREE.MeshBasicMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial, THREE.MeshBasicMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.map = a.map, 
    this.aoMap = a.aoMap, this.aoMapIntensity = a.aoMapIntensity, this.specularMap = a.specularMap, 
    this.alphaMap = a.alphaMap, this.envMap = a.envMap, this.combine = a.combine, this.reflectivity = a.reflectivity, 
    this.refractionRatio = a.refractionRatio, this.fog = a.fog, this.shading = a.shading, 
    this.wireframe = a.wireframe, this.wireframeLinewidth = a.wireframeLinewidth, this.wireframeLinecap = a.wireframeLinecap, 
    this.wireframeLinejoin = a.wireframeLinejoin, this.vertexColors = a.vertexColors, 
    this.skinning = a.skinning, this.morphTargets = a.morphTargets, this;
}, THREE.MeshLambertMaterial = function(a) {
    THREE.Material.call(this), this.type = "MeshLambertMaterial", this.color = new THREE.Color(16777215), 
    this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, 
    this.aoMapIntensity = 1, this.emissive = new THREE.Color(0), this.emissiveIntensity = 1, 
    this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, 
    this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, 
    this.fog = !0, this.blending = THREE.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, 
    this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a);
}, THREE.MeshLambertMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial, THREE.MeshLambertMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.map = a.map, 
    this.lightMap = a.lightMap, this.lightMapIntensity = a.lightMapIntensity, this.aoMap = a.aoMap, 
    this.aoMapIntensity = a.aoMapIntensity, this.emissive.copy(a.emissive), this.emissiveMap = a.emissiveMap, 
    this.emissiveIntensity = a.emissiveIntensity, this.specularMap = a.specularMap, 
    this.alphaMap = a.alphaMap, this.envMap = a.envMap, this.combine = a.combine, this.reflectivity = a.reflectivity, 
    this.refractionRatio = a.refractionRatio, this.fog = a.fog, this.wireframe = a.wireframe, 
    this.wireframeLinewidth = a.wireframeLinewidth, this.wireframeLinecap = a.wireframeLinecap, 
    this.wireframeLinejoin = a.wireframeLinejoin, this.vertexColors = a.vertexColors, 
    this.skinning = a.skinning, this.morphTargets = a.morphTargets, this.morphNormals = a.morphNormals, 
    this;
}, THREE.MeshPhongMaterial = function(a) {
    THREE.Material.call(this), this.type = "MeshPhongMaterial", this.color = new THREE.Color(16777215), 
    this.specular = new THREE.Color(1118481), this.shininess = 30, this.map = null, 
    this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, 
    this.emissive = new THREE.Color(0), this.emissiveIntensity = 1, this.emissiveMap = null, 
    this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new THREE.Vector2(1, 1), 
    this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, 
    this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, 
    this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, 
    this.blending = THREE.NormalBlending, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, 
    this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a);
}, THREE.MeshPhongMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial, THREE.MeshPhongMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.specular.copy(a.specular), 
    this.shininess = a.shininess, this.map = a.map, this.lightMap = a.lightMap, this.lightMapIntensity = a.lightMapIntensity, 
    this.aoMap = a.aoMap, this.aoMapIntensity = a.aoMapIntensity, this.emissive.copy(a.emissive), 
    this.emissiveMap = a.emissiveMap, this.emissiveIntensity = a.emissiveIntensity, 
    this.bumpMap = a.bumpMap, this.bumpScale = a.bumpScale, this.normalMap = a.normalMap, 
    this.normalScale.copy(a.normalScale), this.displacementMap = a.displacementMap, 
    this.displacementScale = a.displacementScale, this.displacementBias = a.displacementBias, 
    this.specularMap = a.specularMap, this.alphaMap = a.alphaMap, this.envMap = a.envMap, 
    this.combine = a.combine, this.reflectivity = a.reflectivity, this.refractionRatio = a.refractionRatio, 
    this.fog = a.fog, this.shading = a.shading, this.wireframe = a.wireframe, this.wireframeLinewidth = a.wireframeLinewidth, 
    this.wireframeLinecap = a.wireframeLinecap, this.wireframeLinejoin = a.wireframeLinejoin, 
    this.vertexColors = a.vertexColors, this.skinning = a.skinning, this.morphTargets = a.morphTargets, 
    this.morphNormals = a.morphNormals, this;
}, THREE.MeshStandardMaterial = function(a) {
    THREE.Material.call(this), this.type = "MeshStandardMaterial", this.color = new THREE.Color(16777215), 
    this.roughness = .5, this.metalness = .5, this.map = null, this.lightMap = null, 
    this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new THREE.Color(0), 
    this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, 
    this.normalMap = null, this.normalScale = new THREE.Vector2(1, 1), this.displacementMap = null, 
    this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, 
    this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, 
    this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.blending = THREE.NormalBlending, 
    this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", 
    this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, 
    this.morphTargets = !1, this.morphNormals = !1, this.setValues(a);
}, THREE.MeshStandardMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial, THREE.MeshStandardMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.roughness = a.roughness, 
    this.metalness = a.metalness, this.map = a.map, this.lightMap = a.lightMap, this.lightMapIntensity = a.lightMapIntensity, 
    this.aoMap = a.aoMap, this.aoMapIntensity = a.aoMapIntensity, this.emissive.copy(a.emissive), 
    this.emissiveMap = a.emissiveMap, this.emissiveIntensity = a.emissiveIntensity, 
    this.bumpMap = a.bumpMap, this.bumpScale = a.bumpScale, this.normalMap = a.normalMap, 
    this.normalScale.copy(a.normalScale), this.displacementMap = a.displacementMap, 
    this.displacementScale = a.displacementScale, this.displacementBias = a.displacementBias, 
    this.roughnessMap = a.roughnessMap, this.metalnessMap = a.metalnessMap, this.alphaMap = a.alphaMap, 
    this.envMap = a.envMap, this.envMapIntensity = a.envMapIntensity, this.refractionRatio = a.refractionRatio, 
    this.fog = a.fog, this.shading = a.shading, this.wireframe = a.wireframe, this.wireframeLinewidth = a.wireframeLinewidth, 
    this.wireframeLinecap = a.wireframeLinecap, this.wireframeLinejoin = a.wireframeLinejoin, 
    this.vertexColors = a.vertexColors, this.skinning = a.skinning, this.morphTargets = a.morphTargets, 
    this.morphNormals = a.morphNormals, this;
}, THREE.MeshDepthMaterial = function(a) {
    THREE.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, 
    this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(a);
}, THREE.MeshDepthMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial, THREE.MeshDepthMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.wireframe = a.wireframe, 
    this.wireframeLinewidth = a.wireframeLinewidth, this;
}, THREE.MeshNormalMaterial = function(a) {
    THREE.Material.call(this, a), this.type = "MeshNormalMaterial", this.wireframe = !1, 
    this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(a);
}, THREE.MeshNormalMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial, THREE.MeshNormalMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.wireframe = a.wireframe, 
    this.wireframeLinewidth = a.wireframeLinewidth, this;
}, THREE.MultiMaterial = function(a) {
    this.uuid = THREE.Math.generateUUID(), this.type = "MultiMaterial", this.materials = a instanceof Array ? a : [], 
    this.visible = !0;
}, THREE.MultiMaterial.prototype = {
    constructor: THREE.MultiMaterial,
    toJSON: function(a) {
        for (var b = {
            metadata: {
                version: 4.2,
                type: "material",
                generator: "MaterialExporter"
            },
            uuid: this.uuid,
            type: this.type,
            materials: []
        }, c = this.materials, d = 0, e = c.length; e > d; d++) {
            var f = c[d].toJSON(a);
            delete f.metadata, b.materials.push(f);
        }
        return b.visible = this.visible, b;
    },
    clone: function() {
        for (var a = new this.constructor(), b = 0; b < this.materials.length; b++) a.materials.push(this.materials[b].clone());
        return a.visible = this.visible, a;
    }
}, THREE.PointsMaterial = function(a) {
    THREE.Material.call(this), this.type = "PointsMaterial", this.color = new THREE.Color(16777215), 
    this.map = null, this.size = 1, this.sizeAttenuation = !0, this.blending = THREE.NormalBlending, 
    this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a);
}, THREE.PointsMaterial.prototype = Object.create(THREE.Material.prototype), THREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial, 
THREE.PointsMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.map = a.map, 
    this.size = a.size, this.sizeAttenuation = a.sizeAttenuation, this.vertexColors = a.vertexColors, 
    this.fog = a.fog, this;
}, THREE.ShaderMaterial = function(a) {
    THREE.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, 
    this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", 
    this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", 
    this.shading = THREE.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.fog = !1, this.lights = !1, this.vertexColors = THREE.NoColors, this.skinning = !1, 
    this.morphTargets = !1, this.morphNormals = !1, this.extensions = {
        derivatives: !1,
        fragDepth: !1,
        drawBuffers: !1,
        shaderTextureLOD: !1
    }, this.defaultAttributeValues = {
        color: [ 1, 1, 1 ],
        uv: [ 0, 0 ],
        uv2: [ 0, 0 ]
    }, this.index0AttributeName = void 0, void 0 !== a && (void 0 !== a.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), 
    this.setValues(a));
}, THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype), THREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial, 
THREE.ShaderMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.fragmentShader = a.fragmentShader, 
    this.vertexShader = a.vertexShader, this.uniforms = THREE.UniformsUtils.clone(a.uniforms), 
    this.defines = a.defines, this.shading = a.shading, this.wireframe = a.wireframe, 
    this.wireframeLinewidth = a.wireframeLinewidth, this.fog = a.fog, this.lights = a.lights, 
    this.vertexColors = a.vertexColors, this.skinning = a.skinning, this.morphTargets = a.morphTargets, 
    this.morphNormals = a.morphNormals, this.extensions = a.extensions, this;
}, THREE.ShaderMaterial.prototype.toJSON = function(a) {
    var b = THREE.Material.prototype.toJSON.call(this, a);
    return b.uniforms = this.uniforms, b.vertexShader = this.vertexShader, b.fragmentShader = this.fragmentShader, 
    b;
}, THREE.RawShaderMaterial = function(a) {
    THREE.ShaderMaterial.call(this, a), this.type = "RawShaderMaterial";
}, THREE.RawShaderMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype), 
THREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial, THREE.SpriteMaterial = function(a) {
    THREE.Material.call(this), this.type = "SpriteMaterial", this.color = new THREE.Color(16777215), 
    this.map = null, this.rotation = 0, this.fog = !1, this.setValues(a);
}, THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype), THREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial, 
THREE.SpriteMaterial.prototype.copy = function(a) {
    return THREE.Material.prototype.copy.call(this, a), this.color.copy(a.color), this.map = a.map, 
    this.rotation = a.rotation, this.fog = a.fog, this;
}, THREE.Texture = function(a, b, c, d, e, f, g, h, i) {
    Object.defineProperty(this, "id", {
        value: THREE.TextureIdCount++
    }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.sourceFile = "", 
    this.image = void 0 !== a ? a : THREE.Texture.DEFAULT_IMAGE, this.mipmaps = [], 
    this.mapping = void 0 !== b ? b : THREE.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== c ? c : THREE.ClampToEdgeWrapping, 
    this.wrapT = void 0 !== d ? d : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== e ? e : THREE.LinearFilter, 
    this.minFilter = void 0 !== f ? f : THREE.LinearMipMapLinearFilter, this.anisotropy = void 0 !== i ? i : 1, 
    this.format = void 0 !== g ? g : THREE.RGBAFormat, this.type = void 0 !== h ? h : THREE.UnsignedByteType, 
    this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.generateMipmaps = !0, 
    this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = THREE.LinearEncoding, 
    this.version = 0, this.onUpdate = null;
}, THREE.Texture.DEFAULT_IMAGE = void 0, THREE.Texture.DEFAULT_MAPPING = THREE.UVMapping, 
THREE.Texture.prototype = {
    constructor: THREE.Texture,
    set needsUpdate(a) {
        a === !0 && this.version++;
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.image = a.image, this.mipmaps = a.mipmaps.slice(0), this.mapping = a.mapping, 
        this.wrapS = a.wrapS, this.wrapT = a.wrapT, this.magFilter = a.magFilter, this.minFilter = a.minFilter, 
        this.anisotropy = a.anisotropy, this.format = a.format, this.type = a.type, this.offset.copy(a.offset), 
        this.repeat.copy(a.repeat), this.generateMipmaps = a.generateMipmaps, this.premultiplyAlpha = a.premultiplyAlpha, 
        this.flipY = a.flipY, this.unpackAlignment = a.unpackAlignment, this.encoding = a.encoding, 
        this;
    },
    toJSON: function(a) {
        function b(a) {
            var b;
            return void 0 !== a.toDataURL ? b = a : (b = document.createElement("canvas"), b.width = a.width, 
            b.height = a.height, b.getContext("2d").drawImage(a, 0, 0, a.width, a.height)), 
            b.width > 2048 || b.height > 2048 ? b.toDataURL("image/jpeg", .6) : b.toDataURL("image/png");
        }
        if (void 0 !== a.textures[this.uuid]) return a.textures[this.uuid];
        var c = {
            metadata: {
                version: 4.4,
                type: "Texture",
                generator: "Texture.toJSON"
            },
            uuid: this.uuid,
            name: this.name,
            mapping: this.mapping,
            repeat: [ this.repeat.x, this.repeat.y ],
            offset: [ this.offset.x, this.offset.y ],
            wrap: [ this.wrapS, this.wrapT ],
            minFilter: this.minFilter,
            magFilter: this.magFilter,
            anisotropy: this.anisotropy
        };
        if (void 0 !== this.image) {
            var d = this.image;
            void 0 === d.uuid && (d.uuid = THREE.Math.generateUUID()), void 0 === a.images[d.uuid] && (a.images[d.uuid] = {
                uuid: d.uuid,
                url: b(d)
            }), c.image = d.uuid;
        }
        return a.textures[this.uuid] = c, c;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    },
    transformUv: function(a) {
        if (this.mapping === THREE.UVMapping) {
            if (a.multiply(this.repeat), a.add(this.offset), a.x < 0 || a.x > 1) switch (this.wrapS) {
              case THREE.RepeatWrapping:
                a.x = a.x - Math.floor(a.x);
                break;

              case THREE.ClampToEdgeWrapping:
                a.x = a.x < 0 ? 0 : 1;
                break;

              case THREE.MirroredRepeatWrapping:
                1 === Math.abs(Math.floor(a.x) % 2) ? a.x = Math.ceil(a.x) - a.x : a.x = a.x - Math.floor(a.x);
            }
            if (a.y < 0 || a.y > 1) switch (this.wrapT) {
              case THREE.RepeatWrapping:
                a.y = a.y - Math.floor(a.y);
                break;

              case THREE.ClampToEdgeWrapping:
                a.y = a.y < 0 ? 0 : 1;
                break;

              case THREE.MirroredRepeatWrapping:
                1 === Math.abs(Math.floor(a.y) % 2) ? a.y = Math.ceil(a.y) - a.y : a.y = a.y - Math.floor(a.y);
            }
            this.flipY && (a.y = 1 - a.y);
        }
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype), THREE.TextureIdCount = 0, 
THREE.CanvasTexture = function(a, b, c, d, e, f, g, h, i) {
    THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.needsUpdate = !0;
}, THREE.CanvasTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture, 
THREE.CubeTexture = function(a, b, c, d, e, f, g, h, i) {
    a = void 0 !== a ? a : [], b = void 0 !== b ? b : THREE.CubeReflectionMapping, THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), 
    this.flipY = !1;
}, THREE.CubeTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CubeTexture.prototype.constructor = THREE.CubeTexture, 
Object.defineProperty(THREE.CubeTexture.prototype, "images", {
    get: function() {
        return this.image;
    },
    set: function(a) {
        this.image = a;
    }
}), THREE.CompressedTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
    THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
        width: b,
        height: c
    }, this.mipmaps = a, this.flipY = !1, this.generateMipmaps = !1;
}, THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture, 
THREE.DataTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
    THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
        data: a,
        width: b,
        height: c
    }, this.magFilter = void 0 !== i ? i : THREE.NearestFilter, this.minFilter = void 0 !== j ? j : THREE.NearestFilter, 
    this.flipY = !1, this.generateMipmaps = !1;
}, THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype), THREE.DataTexture.prototype.constructor = THREE.DataTexture, 
THREE.VideoTexture = function(a, b, c, d, e, f, g, h, i) {
    function j() {
        requestAnimationFrame(j), a.readyState === a.HAVE_ENOUGH_DATA && (k.needsUpdate = !0);
    }
    THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.generateMipmaps = !1;
    var k = this;
    j();
}, THREE.VideoTexture.prototype = Object.create(THREE.Texture.prototype), THREE.VideoTexture.prototype.constructor = THREE.VideoTexture, 
THREE.Group = function() {
    THREE.Object3D.call(this), this.type = "Group";
}, THREE.Group.prototype = Object.create(THREE.Object3D.prototype), THREE.Group.prototype.constructor = THREE.Group, 
THREE.Points = function(a, b) {
    THREE.Object3D.call(this), this.type = "Points", this.geometry = void 0 !== a ? a : new THREE.Geometry(), 
    this.material = void 0 !== b ? b : new THREE.PointsMaterial({
        color: 16777215 * Math.random()
    });
}, THREE.Points.prototype = Object.create(THREE.Object3D.prototype), THREE.Points.prototype.constructor = THREE.Points, 
THREE.Points.prototype.raycast = function() {
    var a = new THREE.Matrix4(), b = new THREE.Ray(), c = new THREE.Sphere();
    return function(d, e) {
        function f(a, c) {
            var f = b.distanceSqToPoint(a);
            if (l > f) {
                var h = b.closestPointToPoint(a);
                h.applyMatrix4(i);
                var j = d.ray.origin.distanceTo(h);
                if (j < d.near || j > d.far) return;
                e.push({
                    distance: j,
                    distanceToRay: Math.sqrt(f),
                    point: h.clone(),
                    index: c,
                    face: null,
                    object: g
                });
            }
        }
        var g = this, h = this.geometry, i = this.matrixWorld, j = d.params.Points.threshold;
        if (null === h.boundingSphere && h.computeBoundingSphere(), c.copy(h.boundingSphere), 
        c.applyMatrix4(i), d.ray.intersectsSphere(c) !== !1) {
            a.getInverse(i), b.copy(d.ray).applyMatrix4(a);
            var k = j / ((this.scale.x + this.scale.y + this.scale.z) / 3), l = k * k, m = new THREE.Vector3();
            if (h instanceof THREE.BufferGeometry) {
                var n = h.index, o = h.attributes, p = o.position.array;
                if (null !== n) for (var q = n.array, r = 0, s = q.length; s > r; r++) {
                    var t = q[r];
                    m.fromArray(p, 3 * t), f(m, t);
                } else for (var r = 0, u = p.length / 3; u > r; r++) m.fromArray(p, 3 * r), f(m, r);
            } else for (var v = h.vertices, r = 0, u = v.length; u > r; r++) f(v[r], r);
        }
    };
}(), THREE.Points.prototype.clone = function() {
    return new this.constructor(this.geometry, this.material).copy(this);
}, THREE.Line = function(a, b, c) {
    return 1 === c ? (console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."), 
    new THREE.LineSegments(a, b)) : (THREE.Object3D.call(this), this.type = "Line", 
    this.geometry = void 0 !== a ? a : new THREE.Geometry(), void (this.material = void 0 !== b ? b : new THREE.LineBasicMaterial({
        color: 16777215 * Math.random()
    })));
}, THREE.Line.prototype = Object.create(THREE.Object3D.prototype), THREE.Line.prototype.constructor = THREE.Line, 
THREE.Line.prototype.raycast = function() {
    var a = new THREE.Matrix4(), b = new THREE.Ray(), c = new THREE.Sphere();
    return function(d, e) {
        var f = d.linePrecision, g = f * f, h = this.geometry, i = this.matrixWorld;
        if (null === h.boundingSphere && h.computeBoundingSphere(), c.copy(h.boundingSphere), 
        c.applyMatrix4(i), d.ray.intersectsSphere(c) !== !1) {
            a.getInverse(i), b.copy(d.ray).applyMatrix4(a);
            var j = new THREE.Vector3(), k = new THREE.Vector3(), l = new THREE.Vector3(), m = new THREE.Vector3(), n = this instanceof THREE.LineSegments ? 2 : 1;
            if (h instanceof THREE.BufferGeometry) {
                var o = h.index, p = h.attributes, q = p.position.array;
                if (null !== o) for (var r = o.array, s = 0, t = r.length - 1; t > s; s += n) {
                    var u = r[s], v = r[s + 1];
                    j.fromArray(q, 3 * u), k.fromArray(q, 3 * v);
                    var w = b.distanceSqToSegment(j, k, m, l);
                    if (!(w > g)) {
                        m.applyMatrix4(this.matrixWorld);
                        var x = d.ray.origin.distanceTo(m);
                        x < d.near || x > d.far || e.push({
                            distance: x,
                            point: l.clone().applyMatrix4(this.matrixWorld),
                            index: s,
                            face: null,
                            faceIndex: null,
                            object: this
                        });
                    }
                } else for (var s = 0, t = q.length / 3 - 1; t > s; s += n) {
                    j.fromArray(q, 3 * s), k.fromArray(q, 3 * s + 3);
                    var w = b.distanceSqToSegment(j, k, m, l);
                    if (!(w > g)) {
                        m.applyMatrix4(this.matrixWorld);
                        var x = d.ray.origin.distanceTo(m);
                        x < d.near || x > d.far || e.push({
                            distance: x,
                            point: l.clone().applyMatrix4(this.matrixWorld),
                            index: s,
                            face: null,
                            faceIndex: null,
                            object: this
                        });
                    }
                }
            } else if (h instanceof THREE.Geometry) for (var y = h.vertices, z = y.length, s = 0; z - 1 > s; s += n) {
                var w = b.distanceSqToSegment(y[s], y[s + 1], m, l);
                if (!(w > g)) {
                    m.applyMatrix4(this.matrixWorld);
                    var x = d.ray.origin.distanceTo(m);
                    x < d.near || x > d.far || e.push({
                        distance: x,
                        point: l.clone().applyMatrix4(this.matrixWorld),
                        index: s,
                        face: null,
                        faceIndex: null,
                        object: this
                    });
                }
            }
        }
    };
}(), THREE.Line.prototype.clone = function() {
    return new this.constructor(this.geometry, this.material).copy(this);
}, THREE.LineStrip = 0, THREE.LinePieces = 1, THREE.LineSegments = function(a, b) {
    THREE.Line.call(this, a, b), this.type = "LineSegments";
}, THREE.LineSegments.prototype = Object.create(THREE.Line.prototype), THREE.LineSegments.prototype.constructor = THREE.LineSegments, 
THREE.Mesh = function(a, b) {
    THREE.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== a ? a : new THREE.Geometry(), 
    this.material = void 0 !== b ? b : new THREE.MeshBasicMaterial({
        color: 16777215 * Math.random()
    }), this.drawMode = THREE.TrianglesDrawMode, this.updateMorphTargets();
}, THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype), THREE.Mesh.prototype.constructor = THREE.Mesh, 
THREE.Mesh.prototype.setDrawMode = function(a) {
    this.drawMode = a;
}, THREE.Mesh.prototype.updateMorphTargets = function() {
    if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
        this.morphTargetBase = -1, this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (var a = 0, b = this.geometry.morphTargets.length; b > a; a++) this.morphTargetInfluences.push(0), 
        this.morphTargetDictionary[this.geometry.morphTargets[a].name] = a;
    }
}, THREE.Mesh.prototype.getMorphTargetIndexByName = function(a) {
    return void 0 !== this.morphTargetDictionary[a] ? this.morphTargetDictionary[a] : (console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + a + " does not exist. Returning 0."), 
    0);
}, THREE.Mesh.prototype.raycast = function() {
    function a(a, b, c, d, e, f, g) {
        return THREE.Triangle.barycoordFromPoint(a, b, c, d, p), e.multiplyScalar(p.x), 
        f.multiplyScalar(p.y), g.multiplyScalar(p.z), e.add(f).add(g), e.clone();
    }
    function b(a, b, c, d, e, f, g) {
        var h, i = a.material;
        if (h = i.side === THREE.BackSide ? c.intersectTriangle(f, e, d, !0, g) : c.intersectTriangle(d, e, f, i.side !== THREE.DoubleSide, g), 
        null === h) return null;
        r.copy(g), r.applyMatrix4(a.matrixWorld);
        var j = b.ray.origin.distanceTo(r);
        return j < b.near || j > b.far ? null : {
            distance: j,
            point: r.clone(),
            object: a
        };
    }
    function c(c, d, e, f, j, k, l, p) {
        g.fromArray(f, 3 * k), h.fromArray(f, 3 * l), i.fromArray(f, 3 * p);
        var r = b(c, d, e, g, h, i, q);
        return r && (j && (m.fromArray(j, 2 * k), n.fromArray(j, 2 * l), o.fromArray(j, 2 * p), 
        r.uv = a(q, g, h, i, m, n, o)), r.face = new THREE.Face3(k, l, p, THREE.Triangle.normal(g, h, i)), 
        r.faceIndex = k), r;
    }
    var d = new THREE.Matrix4(), e = new THREE.Ray(), f = new THREE.Sphere(), g = new THREE.Vector3(), h = new THREE.Vector3(), i = new THREE.Vector3(), j = new THREE.Vector3(), k = new THREE.Vector3(), l = new THREE.Vector3(), m = new THREE.Vector2(), n = new THREE.Vector2(), o = new THREE.Vector2(), p = new THREE.Vector3(), q = new THREE.Vector3(), r = new THREE.Vector3();
    return function(p, r) {
        var s = this.geometry, t = this.material, u = this.matrixWorld;
        if (void 0 !== t && (null === s.boundingSphere && s.computeBoundingSphere(), f.copy(s.boundingSphere), 
        f.applyMatrix4(u), p.ray.intersectsSphere(f) !== !1 && (d.getInverse(u), e.copy(p.ray).applyMatrix4(d), 
        null === s.boundingBox || e.intersectsBox(s.boundingBox) !== !1))) {
            var v, w;
            if (s instanceof THREE.BufferGeometry) {
                var x, y, z, A = s.index, B = s.attributes, C = B.position.array;
                if (void 0 !== B.uv && (v = B.uv.array), null !== A) for (var D = A.array, E = 0, F = D.length; F > E; E += 3) x = D[E], 
                y = D[E + 1], z = D[E + 2], w = c(this, p, e, C, v, x, y, z), w && (w.faceIndex = Math.floor(E / 3), 
                r.push(w)); else for (var E = 0, F = C.length; F > E; E += 9) x = E / 3, y = x + 1, 
                z = x + 2, w = c(this, p, e, C, v, x, y, z), w && (w.index = x, r.push(w));
            } else if (s instanceof THREE.Geometry) {
                var G, H, I, J = t instanceof THREE.MultiMaterial, K = J === !0 ? t.materials : null, L = s.vertices, M = s.faces, N = s.faceVertexUvs[0];
                N.length > 0 && (v = N);
                for (var O = 0, P = M.length; P > O; O++) {
                    var Q = M[O], R = J === !0 ? K[Q.materialIndex] : t;
                    if (void 0 !== R) {
                        if (G = L[Q.a], H = L[Q.b], I = L[Q.c], R.morphTargets === !0) {
                            var S = s.morphTargets, T = this.morphTargetInfluences;
                            g.set(0, 0, 0), h.set(0, 0, 0), i.set(0, 0, 0);
                            for (var U = 0, V = S.length; V > U; U++) {
                                var W = T[U];
                                if (0 !== W) {
                                    var X = S[U].vertices;
                                    g.addScaledVector(j.subVectors(X[Q.a], G), W), h.addScaledVector(k.subVectors(X[Q.b], H), W), 
                                    i.addScaledVector(l.subVectors(X[Q.c], I), W);
                                }
                            }
                            g.add(G), h.add(H), i.add(I), G = g, H = h, I = i;
                        }
                        if (w = b(this, p, e, G, H, I, q)) {
                            if (v) {
                                var Y = v[O];
                                m.copy(Y[0]), n.copy(Y[1]), o.copy(Y[2]), w.uv = a(q, G, H, I, m, n, o);
                            }
                            w.face = Q, w.faceIndex = O, r.push(w);
                        }
                    }
                }
            }
        }
    };
}(), THREE.Mesh.prototype.clone = function() {
    return new this.constructor(this.geometry, this.material).copy(this);
}, THREE.Bone = function(a) {
    THREE.Object3D.call(this), this.type = "Bone", this.skin = a;
}, THREE.Bone.prototype = Object.create(THREE.Object3D.prototype), THREE.Bone.prototype.constructor = THREE.Bone, 
THREE.Bone.prototype.copy = function(a) {
    return THREE.Object3D.prototype.copy.call(this, a), this.skin = a.skin, this;
}, THREE.Skeleton = function(a, b, c) {
    if (this.useVertexTexture = void 0 !== c ? c : !0, this.identityMatrix = new THREE.Matrix4(), 
    a = a || [], this.bones = a.slice(0), this.useVertexTexture) {
        var d = Math.sqrt(4 * this.bones.length);
        d = THREE.Math.nextPowerOfTwo(Math.ceil(d)), d = Math.max(d, 4), this.boneTextureWidth = d, 
        this.boneTextureHeight = d, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), 
        this.boneTexture = new THREE.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType);
    } else this.boneMatrices = new Float32Array(16 * this.bones.length);
    if (void 0 === b) this.calculateInverses(); else if (this.bones.length === b.length) this.boneInverses = b.slice(0); else {
        console.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
        for (var e = 0, f = this.bones.length; f > e; e++) this.boneInverses.push(new THREE.Matrix4());
    }
}, THREE.Skeleton.prototype.calculateInverses = function() {
    this.boneInverses = [];
    for (var a = 0, b = this.bones.length; b > a; a++) {
        var c = new THREE.Matrix4();
        this.bones[a] && c.getInverse(this.bones[a].matrixWorld), this.boneInverses.push(c);
    }
}, THREE.Skeleton.prototype.pose = function() {
    for (var a, b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && a.matrixWorld.getInverse(this.boneInverses[b]);
    for (var b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && (a.parent ? (a.matrix.getInverse(a.parent.matrixWorld), 
    a.matrix.multiply(a.matrixWorld)) : a.matrix.copy(a.matrixWorld), a.matrix.decompose(a.position, a.quaternion, a.scale));
}, THREE.Skeleton.prototype.update = function() {
    var a = new THREE.Matrix4();
    return function() {
        for (var b = 0, c = this.bones.length; c > b; b++) {
            var d = this.bones[b] ? this.bones[b].matrixWorld : this.identityMatrix;
            a.multiplyMatrices(d, this.boneInverses[b]), a.flattenToArrayOffset(this.boneMatrices, 16 * b);
        }
        this.useVertexTexture && (this.boneTexture.needsUpdate = !0);
    };
}(), THREE.Skeleton.prototype.clone = function() {
    return new THREE.Skeleton(this.bones, this.boneInverses, this.useVertexTexture);
}, THREE.SkinnedMesh = function(a, b, c) {
    THREE.Mesh.call(this, a, b), this.type = "SkinnedMesh", this.bindMode = "attached", 
    this.bindMatrix = new THREE.Matrix4(), this.bindMatrixInverse = new THREE.Matrix4();
    var d = [];
    if (this.geometry && void 0 !== this.geometry.bones) {
        for (var e, f, g = 0, h = this.geometry.bones.length; h > g; ++g) f = this.geometry.bones[g], 
        e = new THREE.Bone(this), d.push(e), e.name = f.name, e.position.fromArray(f.pos), 
        e.quaternion.fromArray(f.rotq), void 0 !== f.scl && e.scale.fromArray(f.scl);
        for (var g = 0, h = this.geometry.bones.length; h > g; ++g) f = this.geometry.bones[g], 
        -1 !== f.parent && null !== f.parent ? d[f.parent].add(d[g]) : this.add(d[g]);
    }
    this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new THREE.Skeleton(d, void 0, c), this.matrixWorld);
}, THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh, 
THREE.SkinnedMesh.prototype.bind = function(a, b) {
    this.skeleton = a, void 0 === b && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), 
    b = this.matrixWorld), this.bindMatrix.copy(b), this.bindMatrixInverse.getInverse(b);
}, THREE.SkinnedMesh.prototype.pose = function() {
    this.skeleton.pose();
}, THREE.SkinnedMesh.prototype.normalizeSkinWeights = function() {
    if (this.geometry instanceof THREE.Geometry) for (var a = 0; a < this.geometry.skinWeights.length; a++) {
        var b = this.geometry.skinWeights[a], c = 1 / b.lengthManhattan();
        c !== 1 / 0 ? b.multiplyScalar(c) : b.set(1, 0, 0, 0);
    } else if (this.geometry instanceof THREE.BufferGeometry) for (var d = new THREE.Vector4(), e = this.geometry.attributes.skinWeight, a = 0; a < e.count; a++) {
        d.x = e.getX(a), d.y = e.getY(a), d.z = e.getZ(a), d.w = e.getW(a);
        var c = 1 / d.lengthManhattan();
        c !== 1 / 0 ? d.multiplyScalar(c) : d.set(1, 0, 0, 0), e.setXYZW(a, d.x, d.y, d.z, d.w);
    }
}, THREE.SkinnedMesh.prototype.updateMatrixWorld = function(a) {
    THREE.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unrecognized bindMode: " + this.bindMode);
}, THREE.SkinnedMesh.prototype.clone = function() {
    return new this.constructor(this.geometry, this.material, this.useVertexTexture).copy(this);
}, THREE.LOD = function() {
    THREE.Object3D.call(this), this.type = "LOD", Object.defineProperties(this, {
        levels: {
            enumerable: !0,
            value: []
        },
        objects: {
            get: function() {
                return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels;
            }
        }
    });
}, THREE.LOD.prototype = Object.create(THREE.Object3D.prototype), THREE.LOD.prototype.constructor = THREE.LOD, 
THREE.LOD.prototype.addLevel = function(a, b) {
    void 0 === b && (b = 0), b = Math.abs(b);
    for (var c = this.levels, d = 0; d < c.length && !(b < c[d].distance); d++) ;
    c.splice(d, 0, {
        distance: b,
        object: a
    }), this.add(a);
}, THREE.LOD.prototype.getObjectForDistance = function(a) {
    for (var b = this.levels, c = 1, d = b.length; d > c && !(a < b[c].distance); c++) ;
    return b[c - 1].object;
}, THREE.LOD.prototype.raycast = function() {
    var a = new THREE.Vector3();
    return function(b, c) {
        a.setFromMatrixPosition(this.matrixWorld);
        var d = b.ray.origin.distanceTo(a);
        this.getObjectForDistance(d).raycast(b, c);
    };
}(), THREE.LOD.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3();
    return function(c) {
        var d = this.levels;
        if (d.length > 1) {
            a.setFromMatrixPosition(c.matrixWorld), b.setFromMatrixPosition(this.matrixWorld);
            var e = a.distanceTo(b);
            d[0].object.visible = !0;
            for (var f = 1, g = d.length; g > f && e >= d[f].distance; f++) d[f - 1].object.visible = !1, 
            d[f].object.visible = !0;
            for (;g > f; f++) d[f].object.visible = !1;
        }
    };
}(), THREE.LOD.prototype.copy = function(a) {
    THREE.Object3D.prototype.copy.call(this, a, !1);
    for (var b = a.levels, c = 0, d = b.length; d > c; c++) {
        var e = b[c];
        this.addLevel(e.object.clone(), e.distance);
    }
    return this;
}, THREE.LOD.prototype.toJSON = function(a) {
    var b = THREE.Object3D.prototype.toJSON.call(this, a);
    b.object.levels = [];
    for (var c = this.levels, d = 0, e = c.length; e > d; d++) {
        var f = c[d];
        b.object.levels.push({
            object: f.object.uuid,
            distance: f.distance
        });
    }
    return b;
}, THREE.Sprite = function() {
    var a = new Uint16Array([ 0, 1, 2, 0, 2, 3 ]), b = new Float32Array([ -.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0 ]), c = new Float32Array([ 0, 0, 1, 0, 1, 1, 0, 1 ]), d = new THREE.BufferGeometry();
    return d.setIndex(new THREE.BufferAttribute(a, 1)), d.addAttribute("position", new THREE.BufferAttribute(b, 3)), 
    d.addAttribute("uv", new THREE.BufferAttribute(c, 2)), function(a) {
        THREE.Object3D.call(this), this.type = "Sprite", this.geometry = d, this.material = void 0 !== a ? a : new THREE.SpriteMaterial();
    };
}(), THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype), THREE.Sprite.prototype.constructor = THREE.Sprite, 
THREE.Sprite.prototype.raycast = function() {
    var a = new THREE.Vector3();
    return function(b, c) {
        a.setFromMatrixPosition(this.matrixWorld);
        var d = b.ray.distanceSqToPoint(a), e = this.scale.x * this.scale.y;
        d > e || c.push({
            distance: Math.sqrt(d),
            point: this.position,
            face: null,
            object: this
        });
    };
}(), THREE.Sprite.prototype.clone = function() {
    return new this.constructor(this.material).copy(this);
}, THREE.Particle = THREE.Sprite, THREE.LensFlare = function(a, b, c, d, e) {
    THREE.Object3D.call(this), this.lensFlares = [], this.positionScreen = new THREE.Vector3(), 
    this.customUpdateCallback = void 0, void 0 !== a && this.add(a, b, c, d, e);
}, THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype), THREE.LensFlare.prototype.constructor = THREE.LensFlare, 
THREE.LensFlare.prototype.add = function(a, b, c, d, e, f) {
    void 0 === b && (b = -1), void 0 === c && (c = 0), void 0 === f && (f = 1), void 0 === e && (e = new THREE.Color(16777215)), 
    void 0 === d && (d = THREE.NormalBlending), c = Math.min(c, Math.max(0, c)), this.lensFlares.push({
        texture: a,
        size: b,
        distance: c,
        x: 0,
        y: 0,
        z: 0,
        scale: 1,
        rotation: 0,
        opacity: f,
        color: e,
        blending: d
    });
}, THREE.LensFlare.prototype.updateLensFlares = function() {
    var a, b, c = this.lensFlares.length, d = 2 * -this.positionScreen.x, e = 2 * -this.positionScreen.y;
    for (a = 0; c > a; a++) b = this.lensFlares[a], b.x = this.positionScreen.x + d * b.distance, 
    b.y = this.positionScreen.y + e * b.distance, b.wantedRotation = b.x * Math.PI * .25, 
    b.rotation += .25 * (b.wantedRotation - b.rotation);
}, THREE.LensFlare.prototype.copy = function(a) {
    THREE.Object3D.prototype.copy.call(this, a), this.positionScreen.copy(a.positionScreen), 
    this.customUpdateCallback = a.customUpdateCallback;
    for (var b = 0, c = a.lensFlares.length; c > b; b++) this.lensFlares.push(a.lensFlares[b]);
    return this;
}, THREE.Scene = function() {
    THREE.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, 
    this.autoUpdate = !0;
}, THREE.Scene.prototype = Object.create(THREE.Object3D.prototype), THREE.Scene.prototype.constructor = THREE.Scene, 
THREE.Scene.prototype.copy = function(a, b) {
    return THREE.Object3D.prototype.copy.call(this, a, b), null !== a.fog && (this.fog = a.fog.clone()), 
    null !== a.overrideMaterial && (this.overrideMaterial = a.overrideMaterial.clone()), 
    this.autoUpdate = a.autoUpdate, this.matrixAutoUpdate = a.matrixAutoUpdate, this;
}, THREE.Fog = function(a, b, c) {
    this.name = "", this.color = new THREE.Color(a), this.near = void 0 !== b ? b : 1, 
    this.far = void 0 !== c ? c : 1e3;
}, THREE.Fog.prototype.clone = function() {
    return new THREE.Fog(this.color.getHex(), this.near, this.far);
}, THREE.FogExp2 = function(a, b) {
    this.name = "", this.color = new THREE.Color(a), this.density = void 0 !== b ? b : 25e-5;
}, THREE.FogExp2.prototype.clone = function() {
    return new THREE.FogExp2(this.color.getHex(), this.density);
}, THREE.ShaderChunk = {}, THREE.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n", 
THREE.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n", 
THREE.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n", 
THREE.ShaderChunk.aomap_fragment = "#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n", 
THREE.ShaderChunk.aomap_pars_fragment = "#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif", 
THREE.ShaderChunk.begin_vertex = "\nvec3 transformed = vec3( position );\n", THREE.ShaderChunk.beginnormal_vertex = "\nvec3 objectNormal = vec3( normal );\n", 
THREE.ShaderChunk.bsdfs = "bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n	return any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n		if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n			return distanceFalloff * maxDistanceCutoffFactor;\n#else\n			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n		}\n		return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_Smith( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n", 
THREE.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n", 
THREE.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif", 
THREE.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n", 
THREE.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif", 
THREE.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif", 
THREE.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n", 
THREE.ShaderChunk.cube_uv_reflection_fragment = "#ifdef ENVMAP_TYPE_CUBE_UV\nconst float cubeUV_textureSize = 1024.0;\nint getFaceFromDirection(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    int face = -1;\n    if( absDirection.x > absDirection.z ) {\n        if(absDirection.x > absDirection.y )\n            face = direction.x > 0.0 ? 0 : 3;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    else {\n        if(absDirection.z > absDirection.y )\n            face = direction.z > 0.0 ? 2 : 5;\n        else\n            face = direction.y > 0.0 ? 1 : 4;\n    }\n    return face;\n}\nconst float cubeUV_maxLods1 = log2(cubeUV_textureSize*0.25) - 1.0;\nconst float cubeUV_rangeClamp = exp2((6.0 - 1.0) * 2.0);\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n    float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n    float dxRoughness = dFdx(roughness);\n    float dyRoughness = dFdy(roughness);\n    vec3 dx = dFdx( vec * scale * dxRoughness );\n    vec3 dy = dFdy( vec * scale * dyRoughness );\n    float d = max( dot( dx, dx ), dot( dy, dy ) );\n    d = clamp(d, 1.0, cubeUV_rangeClamp);\n    float mipLevel = 0.5 * log2(d);\n    return vec2(floor(mipLevel), fract(mipLevel));\n}\nconst float cubeUV_maxLods2 = log2(cubeUV_textureSize*0.25) - 2.0;\nconst float cubeUV_rcpTextureSize = 1.0 / cubeUV_textureSize;\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n    mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n    float a = 16.0 * cubeUV_rcpTextureSize;\n    vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n    vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n    float powScale = exp2_packed.x * exp2_packed.y;\n    float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n    float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n    bool bRes = mipLevel == 0.0;\n    scale =  bRes && (scale < a) ? a : scale;\n    vec3 r;\n    vec2 offset;\n    int face = getFaceFromDirection(direction);\n    float rcpPowScale = 1.0 / powScale;\n    if( face == 0) {\n        r = vec3(direction.x, -direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 1) {\n        r = vec3(direction.y, direction.x, direction.z);\n        offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 2) {\n        r = vec3(direction.z, direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n    }\n    else if( face == 3) {\n        r = vec3(direction.x, direction.z, direction.y);\n        offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else if( face == 4) {\n        r = vec3(direction.y, direction.x, -direction.z);\n        offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    else {\n        r = vec3(direction.z, -direction.x, direction.y);\n        offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n        offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n    }\n    r = normalize(r);\n    float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n    vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n    vec2 base = offset + vec2( texelOffset );\n    return base + s * ( scale - 2.0 * texelOffset );\n}\nconst float cubeUV_maxLods3 = log2(cubeUV_textureSize*0.25) - 3.0;\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n    float roughnessVal = roughness* cubeUV_maxLods3;\n    float r1 = floor(roughnessVal);\n    float r2 = r1 + 1.0;\n    float t = fract(roughnessVal);\n    vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n    float s = mipInfo.y;\n    float level0 = mipInfo.x;\n    float level1 = level0 + 1.0;\n    level1 = level1 > 5.0 ? 5.0 : level1;\n    level0 += min( floor( s + 0.5 ), 5.0 );\n    vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n    vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n    vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n    vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n    vec4 result = mix(color10, color20, t);\n    return vec4(result.rgb, 1.0);\n}\n#endif\n", 
THREE.ShaderChunk.defaultnormal_vertex = "#ifdef FLIP_SIDED\n	objectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n", 
THREE.ShaderChunk.displacementmap_vertex = "#ifdef USE_DISPLACEMENTMAP\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n", 
THREE.ShaderChunk.displacementmap_pars_vertex = "#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n", 
THREE.ShaderChunk.emissivemap_fragment = "#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n", 
THREE.ShaderChunk.emissivemap_pars_fragment = "#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n", 
THREE.ShaderChunk.encodings_pars_fragment = "\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n", 
THREE.ShaderChunk.encodings_fragment = "  gl_FragColor = linearToOutputTexel( gl_FragColor );\n", 
THREE.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n", 
THREE.ShaderChunk.envmap_pars_fragment = "#if defined( USE_ENVMAP ) || defined( STANDARD )\n	uniform float reflectivity;\n	uniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n", 
THREE.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	varying vec3 vReflect;\n	uniform float refractionRatio;\n#endif\n", 
THREE.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	#ifdef ENVMAP_MODE_REFLECTION\n		vReflect = reflect( cameraToVertex, worldNormal );\n	#else\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n	#endif\n#endif\n", 
THREE.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n", 
THREE.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n	uniform vec3 fogColor;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif", 
THREE.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n", 
THREE.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif", 
THREE.ShaderChunk.lights_lambert_vertex = "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		directLight = getPointDirectLightIrradiance( pointLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		directLight = getSpotDirectLightIrradiance( spotLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directLight = getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n", 
THREE.ShaderChunk.lights_pars = "uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	IncidentLight getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n		return directLight;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	IncidentLight getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		if ( testLightInRange( lightDistance, pointLight.distance ) ) {\n			directLight.color = pointLight.color;\n			directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	IncidentLight getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( STANDARD )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n			sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n		#endif\n		envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n", 
THREE.ShaderChunk.lights_phong_fragment = "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n", 
THREE.ShaderChunk.lights_phong_pars_fragment = "#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n", 
THREE.ShaderChunk.lights_phong_pars_vertex = "#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\n", 
THREE.ShaderChunk.lights_phong_vertex = "#ifdef USE_ENVMAP\n	vWorldPosition = worldPosition.xyz;\n#endif\n", 
THREE.ShaderChunk.lights_standard_fragment = "StandardMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n", 
THREE.ShaderChunk.lights_standard_pars_fragment = "struct StandardMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n};\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct				RE_Direct_Standard\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Standard\n#define RE_IndirectSpecular		RE_IndirectSpecular_Standard\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n", 
THREE.ShaderChunk.lights_template = "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		directLight = getPointDirectLightIrradiance( pointLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		directLight = getSpotDirectLightIrradiance( spotLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		directLight = getDirectionalDirectLightIrradiance( directionalLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n	 	irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	RE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n", 
THREE.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif", 
THREE.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n", 
THREE.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif", 
THREE.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n", 
THREE.ShaderChunk.map_fragment = "#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n", 
THREE.ShaderChunk.map_pars_fragment = "#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n", 
THREE.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n", 
THREE.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n", 
THREE.ShaderChunk.metalnessmap_fragment = "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.r;\n#endif\n", 
THREE.ShaderChunk.metalnessmap_pars_fragment = "#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif", 
THREE.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n", 
THREE.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif", 
THREE.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n", 
THREE.ShaderChunk.normal_fragment = "#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#endif\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n", 
THREE.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n", 
THREE.ShaderChunk.premultiplied_alpha_fragment = "#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n", 
THREE.ShaderChunk.project_vertex = "#ifdef USE_SKINNING\n	vec4 mvPosition = modelViewMatrix * skinned;\n#else\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n", 
THREE.ShaderChunk.roughnessmap_fragment = "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.r;\n#endif\n", 
THREE.ShaderChunk.roughnessmap_pars_fragment = "#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif", 
THREE.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float unpackDepth( const in vec4 rgba_depth ) {\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		return dot( rgba_depth, bit_shift );\n	}\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return 1.0;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n", 
THREE.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n", 
THREE.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n", 
THREE.ShaderChunk.shadowmask_pars_fragment = "float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n", 
THREE.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif", 
THREE.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n", 
THREE.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n#endif\n", 
THREE.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n", 
THREE.ShaderChunk.specularmap_fragment = "float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif", 
THREE.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif", 
THREE.ShaderChunk.tonemapping_fragment = "#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n", 
THREE.ShaderChunk.tonemapping_pars_fragment = "#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n", 
THREE.ShaderChunk.uv2_pars_fragment = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif", 
THREE.ShaderChunk.uv2_pars_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif", 
THREE.ShaderChunk.uv2_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif", 
THREE.ShaderChunk.uv_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif", 
THREE.ShaderChunk.uv_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n", 
THREE.ShaderChunk.uv_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif", 
THREE.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n	#ifdef USE_SKINNING\n		vec4 worldPosition = modelMatrix * skinned;\n	#else\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n	#endif\n#endif\n", 
THREE.UniformsUtils = {
    merge: function(a) {
        for (var b = {}, c = 0; c < a.length; c++) {
            var d = this.clone(a[c]);
            for (var e in d) b[e] = d[e];
        }
        return b;
    },
    clone: function(a) {
        var b = {};
        for (var c in a) {
            b[c] = {};
            for (var d in a[c]) {
                var e = a[c][d];
                e instanceof THREE.Color || e instanceof THREE.Vector2 || e instanceof THREE.Vector3 || e instanceof THREE.Vector4 || e instanceof THREE.Matrix3 || e instanceof THREE.Matrix4 || e instanceof THREE.Texture ? b[c][d] = e.clone() : Array.isArray(e) ? b[c][d] = e.slice() : b[c][d] = e;
            }
        }
        return b;
    }
}, THREE.UniformsLib = {
    common: {
        diffuse: {
            type: "c",
            value: new THREE.Color(15658734)
        },
        opacity: {
            type: "f",
            value: 1
        },
        map: {
            type: "t",
            value: null
        },
        offsetRepeat: {
            type: "v4",
            value: new THREE.Vector4(0, 0, 1, 1)
        },
        specularMap: {
            type: "t",
            value: null
        },
        alphaMap: {
            type: "t",
            value: null
        },
        envMap: {
            type: "t",
            value: null
        },
        flipEnvMap: {
            type: "f",
            value: -1
        },
        reflectivity: {
            type: "f",
            value: 1
        },
        refractionRatio: {
            type: "f",
            value: .98
        }
    },
    aomap: {
        aoMap: {
            type: "t",
            value: null
        },
        aoMapIntensity: {
            type: "f",
            value: 1
        }
    },
    lightmap: {
        lightMap: {
            type: "t",
            value: null
        },
        lightMapIntensity: {
            type: "f",
            value: 1
        }
    },
    emissivemap: {
        emissiveMap: {
            type: "t",
            value: null
        }
    },
    bumpmap: {
        bumpMap: {
            type: "t",
            value: null
        },
        bumpScale: {
            type: "f",
            value: 1
        }
    },
    normalmap: {
        normalMap: {
            type: "t",
            value: null
        },
        normalScale: {
            type: "v2",
            value: new THREE.Vector2(1, 1)
        }
    },
    displacementmap: {
        displacementMap: {
            type: "t",
            value: null
        },
        displacementScale: {
            type: "f",
            value: 1
        },
        displacementBias: {
            type: "f",
            value: 0
        }
    },
    roughnessmap: {
        roughnessMap: {
            type: "t",
            value: null
        }
    },
    metalnessmap: {
        metalnessMap: {
            type: "t",
            value: null
        }
    },
    fog: {
        fogDensity: {
            type: "f",
            value: 25e-5
        },
        fogNear: {
            type: "f",
            value: 1
        },
        fogFar: {
            type: "f",
            value: 2e3
        },
        fogColor: {
            type: "c",
            value: new THREE.Color(16777215)
        }
    },
    lights: {
        ambientLightColor: {
            type: "fv",
            value: []
        },
        directionalLights: {
            type: "sa",
            value: [],
            properties: {
                direction: {
                    type: "v3"
                },
                color: {
                    type: "c"
                },
                shadow: {
                    type: "i"
                },
                shadowBias: {
                    type: "f"
                },
                shadowRadius: {
                    type: "f"
                },
                shadowMapSize: {
                    type: "v2"
                }
            }
        },
        directionalShadowMap: {
            type: "tv",
            value: []
        },
        directionalShadowMatrix: {
            type: "m4v",
            value: []
        },
        spotLights: {
            type: "sa",
            value: [],
            properties: {
                color: {
                    type: "c"
                },
                position: {
                    type: "v3"
                },
                direction: {
                    type: "v3"
                },
                distance: {
                    type: "f"
                },
                coneCos: {
                    type: "f"
                },
                penumbraCos: {
                    type: "f"
                },
                decay: {
                    type: "f"
                },
                shadow: {
                    type: "i"
                },
                shadowBias: {
                    type: "f"
                },
                shadowRadius: {
                    type: "f"
                },
                shadowMapSize: {
                    type: "v2"
                }
            }
        },
        spotShadowMap: {
            type: "tv",
            value: []
        },
        spotShadowMatrix: {
            type: "m4v",
            value: []
        },
        pointLights: {
            type: "sa",
            value: [],
            properties: {
                color: {
                    type: "c"
                },
                position: {
                    type: "v3"
                },
                decay: {
                    type: "f"
                },
                distance: {
                    type: "f"
                },
                shadow: {
                    type: "i"
                },
                shadowBias: {
                    type: "f"
                },
                shadowRadius: {
                    type: "f"
                },
                shadowMapSize: {
                    type: "v2"
                }
            }
        },
        pointShadowMap: {
            type: "tv",
            value: []
        },
        pointShadowMatrix: {
            type: "m4v",
            value: []
        },
        hemisphereLights: {
            type: "sa",
            value: [],
            properties: {
                direction: {
                    type: "v3"
                },
                skyColor: {
                    type: "c"
                },
                groundColor: {
                    type: "c"
                }
            }
        }
    },
    points: {
        diffuse: {
            type: "c",
            value: new THREE.Color(15658734)
        },
        opacity: {
            type: "f",
            value: 1
        },
        size: {
            type: "f",
            value: 1
        },
        scale: {
            type: "f",
            value: 1
        },
        map: {
            type: "t",
            value: null
        },
        offsetRepeat: {
            type: "v4",
            value: new THREE.Vector4(0, 0, 1, 1)
        }
    }
}, THREE.ShaderChunk.cube_frag = "uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	#include <logdepthbuf_fragment>\n}\n", 
THREE.ShaderChunk.cube_vert = "varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.depth_frag = "uniform float mNear;\nuniform float mFar;\nuniform float opacity;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}\n", 
THREE.ShaderChunk.depth_vert = "#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.depthRGBA_frag = "#include <common>\n#include <logdepthbuf_pars_fragment>\nvec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}\n", 
THREE.ShaderChunk.depthRGBA_vert = "#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.distanceRGBA_frag = "uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\nvec4 pack1K ( float depth ) {\n	depth /= 1000.0;\n	const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bitMsk;\n	return res;\n}\nfloat unpack1K ( vec4 color ) {\n	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n	return dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}\n", 
THREE.ShaderChunk.distanceRGBA_vert = "varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	vWorldPosition = worldPosition;\n}\n", 
THREE.ShaderChunk.equirect_frag = "uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <logdepthbuf_fragment>\n}\n", 
THREE.ShaderChunk.equirect_vert = "varying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.linedashed_frag = "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.linedashed_vert = "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.meshbasic_frag = "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight;\n	reflectedLight.directDiffuse = vec3( 0.0 );\n	reflectedLight.directSpecular = vec3( 0.0 );\n	reflectedLight.indirectDiffuse = diffuseColor.rgb;\n	reflectedLight.indirectSpecular = vec3( 0.0 );\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.meshbasic_vert = "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n}\n", 
THREE.ShaderChunk.meshlambert_frag = "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.meshlambert_vert = "#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n}\n", 
THREE.ShaderChunk.meshphong_frag = "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.meshphong_vert = "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <lights_phong_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_phong_vertex>\n	#include <shadowmap_vertex>\n}\n", 
THREE.ShaderChunk.meshstandard_frag = "#define STANDARD\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_standard_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_standard_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.meshstandard_vert = "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n}\n", 
THREE.ShaderChunk.normal_frag = "uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n	#include <logdepthbuf_fragment>\n}\n", 
THREE.ShaderChunk.normal_vert = "varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	vNormal = normalize( normalMatrix * normal );\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n}\n", 
THREE.ShaderChunk.points_frag = "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n", 
THREE.ShaderChunk.points_vert = "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n", 
THREE.ShaderLib = {
    basic: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.aomap, THREE.UniformsLib.fog ]),
        vertexShader: THREE.ShaderChunk.meshbasic_vert,
        fragmentShader: THREE.ShaderChunk.meshbasic_frag
    },
    lambert: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.aomap, THREE.UniformsLib.lightmap, THREE.UniformsLib.emissivemap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, {
            emissive: {
                type: "c",
                value: new THREE.Color(0)
            }
        } ]),
        vertexShader: THREE.ShaderChunk.meshlambert_vert,
        fragmentShader: THREE.ShaderChunk.meshlambert_frag
    },
    phong: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.aomap, THREE.UniformsLib.lightmap, THREE.UniformsLib.emissivemap, THREE.UniformsLib.bumpmap, THREE.UniformsLib.normalmap, THREE.UniformsLib.displacementmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, {
            emissive: {
                type: "c",
                value: new THREE.Color(0)
            },
            specular: {
                type: "c",
                value: new THREE.Color(1118481)
            },
            shininess: {
                type: "f",
                value: 30
            }
        } ]),
        vertexShader: THREE.ShaderChunk.meshphong_vert,
        fragmentShader: THREE.ShaderChunk.meshphong_frag
    },
    standard: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.aomap, THREE.UniformsLib.lightmap, THREE.UniformsLib.emissivemap, THREE.UniformsLib.bumpmap, THREE.UniformsLib.normalmap, THREE.UniformsLib.displacementmap, THREE.UniformsLib.roughnessmap, THREE.UniformsLib.metalnessmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, {
            emissive: {
                type: "c",
                value: new THREE.Color(0)
            },
            roughness: {
                type: "f",
                value: .5
            },
            metalness: {
                type: "f",
                value: 0
            },
            envMapIntensity: {
                type: "f",
                value: 1
            }
        } ]),
        vertexShader: THREE.ShaderChunk.meshstandard_vert,
        fragmentShader: THREE.ShaderChunk.meshstandard_frag
    },
    points: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.points, THREE.UniformsLib.fog ]),
        vertexShader: THREE.ShaderChunk.points_vert,
        fragmentShader: THREE.ShaderChunk.points_frag
    },
    dashed: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.fog, {
            scale: {
                type: "f",
                value: 1
            },
            dashSize: {
                type: "f",
                value: 1
            },
            totalSize: {
                type: "f",
                value: 2
            }
        } ]),
        vertexShader: THREE.ShaderChunk.linedashed_vert,
        fragmentShader: THREE.ShaderChunk.linedashed_frag
    },
    depth: {
        uniforms: {
            mNear: {
                type: "f",
                value: 1
            },
            mFar: {
                type: "f",
                value: 2e3
            },
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: THREE.ShaderChunk.depth_vert,
        fragmentShader: THREE.ShaderChunk.depth_frag
    },
    normal: {
        uniforms: {
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: THREE.ShaderChunk.normal_vert,
        fragmentShader: THREE.ShaderChunk.normal_frag
    },
    cube: {
        uniforms: {
            tCube: {
                type: "t",
                value: null
            },
            tFlip: {
                type: "f",
                value: -1
            }
        },
        vertexShader: THREE.ShaderChunk.cube_vert,
        fragmentShader: THREE.ShaderChunk.cube_frag
    },
    equirect: {
        uniforms: {
            tEquirect: {
                type: "t",
                value: null
            },
            tFlip: {
                type: "f",
                value: -1
            }
        },
        vertexShader: THREE.ShaderChunk.equirect_vert,
        fragmentShader: THREE.ShaderChunk.equirect_frag
    },
    depthRGBA: {
        uniforms: {},
        vertexShader: THREE.ShaderChunk.depthRGBA_vert,
        fragmentShader: THREE.ShaderChunk.depthRGBA_frag
    },
    distanceRGBA: {
        uniforms: {
            lightPos: {
                type: "v3",
                value: new THREE.Vector3(0, 0, 0)
            }
        },
        vertexShader: THREE.ShaderChunk.distanceRGBA_vert,
        fragmentShader: THREE.ShaderChunk.distanceRGBA_frag
    }
}, THREE.WebGLRenderer = function(a) {
    function b() {
        return null === sa ? Fa : 1;
    }
    function c(a, b, c, d) {
        ga === !0 && (a *= d, b *= d, c *= d), Ua.clearColor(a, b, c, d);
    }
    function d() {
        Ua.init(), Ua.scissor(xa.copy(Ga).multiplyScalar(Fa)), Ua.viewport(za.copy(Ia).multiplyScalar(Fa)), 
        c(Ba.r, Ba.g, Ba.b, Ca);
    }
    function e() {
        ra = null, wa = null, va = "", ua = -1, Ua.reset();
    }
    function f(a) {
        a.preventDefault(), e(), d(), Va.clear();
    }
    function g(a) {
        var b = a.target;
        b.removeEventListener("dispose", g), j(b), Na.textures--;
    }
    function h(a) {
        var b = a.target;
        b.removeEventListener("dispose", h), k(b), Na.textures--;
    }
    function i(a) {
        var b = a.target;
        b.removeEventListener("dispose", i), l(b);
    }
    function j(a) {
        var b = Va.get(a);
        if (a.image && b.__image__webglTextureCube) Pa.deleteTexture(b.__image__webglTextureCube); else {
            if (void 0 === b.__webglInit) return;
            Pa.deleteTexture(b.__webglTexture);
        }
        Va["delete"](a);
    }
    function k(a) {
        var b = Va.get(a), c = Va.get(a.texture);
        if (a && void 0 !== c.__webglTexture) {
            if (Pa.deleteTexture(c.__webglTexture), a instanceof THREE.WebGLRenderTargetCube) for (var d = 0; 6 > d; d++) Pa.deleteFramebuffer(b.__webglFramebuffer[d]), 
            Pa.deleteRenderbuffer(b.__webglDepthbuffer[d]); else Pa.deleteFramebuffer(b.__webglFramebuffer), 
            Pa.deleteRenderbuffer(b.__webglDepthbuffer);
            Va["delete"](a.texture), Va["delete"](a);
        }
    }
    function l(a) {
        m(a), Va["delete"](a);
    }
    function m(a) {
        var b = Va.get(a).program;
        a.program = void 0, void 0 !== b && Xa.releaseProgram(b);
    }
    function n(a, b, c, d) {
        var e;
        if (c instanceof THREE.InstancedBufferGeometry && (e = Sa.get("ANGLE_instanced_arrays"), 
        null === e)) return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
        void 0 === d && (d = 0), Ua.initAttributes();
        var f = c.attributes, g = b.getAttributes(), h = a.defaultAttributeValues;
        for (var i in g) {
            var j = g[i];
            if (j >= 0) {
                var k = f[i];
                if (void 0 !== k) {
                    var l = k.itemSize, m = Wa.getAttributeBuffer(k);
                    if (k instanceof THREE.InterleavedBufferAttribute) {
                        var n = k.data, o = n.stride, p = k.offset;
                        n instanceof THREE.InstancedInterleavedBuffer ? (Ua.enableAttributeAndDivisor(j, n.meshPerAttribute, e), 
                        void 0 === c.maxInstancedCount && (c.maxInstancedCount = n.meshPerAttribute * n.count)) : Ua.enableAttribute(j), 
                        Pa.bindBuffer(Pa.ARRAY_BUFFER, m), Pa.vertexAttribPointer(j, l, Pa.FLOAT, !1, o * n.array.BYTES_PER_ELEMENT, (d * o + p) * n.array.BYTES_PER_ELEMENT);
                    } else k instanceof THREE.InstancedBufferAttribute ? (Ua.enableAttributeAndDivisor(j, k.meshPerAttribute, e), 
                    void 0 === c.maxInstancedCount && (c.maxInstancedCount = k.meshPerAttribute * k.count)) : Ua.enableAttribute(j), 
                    Pa.bindBuffer(Pa.ARRAY_BUFFER, m), Pa.vertexAttribPointer(j, l, Pa.FLOAT, !1, 0, d * l * 4);
                } else if (void 0 !== h) {
                    var q = h[i];
                    if (void 0 !== q) switch (q.length) {
                      case 2:
                        Pa.vertexAttrib2fv(j, q);
                        break;

                      case 3:
                        Pa.vertexAttrib3fv(j, q);
                        break;

                      case 4:
                        Pa.vertexAttrib4fv(j, q);
                        break;

                      default:
                        Pa.vertexAttrib1fv(j, q);
                    }
                }
            }
        }
        Ua.disableUnusedAttributes();
    }
    function o(a, b) {
        return Math.abs(b[0]) - Math.abs(a[0]);
    }
    function p(a, b) {
        return a.object.renderOrder !== b.object.renderOrder ? a.object.renderOrder - b.object.renderOrder : a.material.id !== b.material.id ? a.material.id - b.material.id : a.z !== b.z ? a.z - b.z : a.id - b.id;
    }
    function q(a, b) {
        return a.object.renderOrder !== b.object.renderOrder ? a.object.renderOrder - b.object.renderOrder : a.z !== b.z ? b.z - a.z : a.id - b.id;
    }
    function r(a, b, c, d, e) {
        var f, g;
        c.transparent ? (f = la, g = ++ma) : (f = ja, g = ++ka);
        var h = f[g];
        void 0 !== h ? (h.id = a.id, h.object = a, h.geometry = b, h.material = c, h.z = La.z, 
        h.group = e) : (h = {
            id: a.id,
            object: a,
            geometry: b,
            material: c,
            z: La.z,
            group: e
        }, f.push(h));
    }
    function s(a, b) {
        if (a.visible !== !1) {
            if (a.layers.test(b.layers)) if (a instanceof THREE.Light) ia.push(a); else if (a instanceof THREE.Sprite) a.frustumCulled !== !1 && Ja.intersectsObject(a) !== !0 || oa.push(a); else if (a instanceof THREE.LensFlare) pa.push(a); else if (a instanceof THREE.ImmediateRenderObject) qa.sortObjects === !0 && (La.setFromMatrixPosition(a.matrixWorld), 
            La.applyProjection(Ka)), r(a, null, a.material, La.z, null); else if ((a instanceof THREE.Mesh || a instanceof THREE.Line || a instanceof THREE.Points) && (a instanceof THREE.SkinnedMesh && a.skeleton.update(), 
            a.frustumCulled === !1 || Ja.intersectsObject(a) === !0)) {
                var c = a.material;
                if (c.visible === !0) {
                    qa.sortObjects === !0 && (La.setFromMatrixPosition(a.matrixWorld), La.applyProjection(Ka));
                    var d = Wa.update(a);
                    if (c instanceof THREE.MultiMaterial) for (var e = d.groups, f = c.materials, g = 0, h = e.length; h > g; g++) {
                        var i = e[g], j = f[i.materialIndex];
                        j.visible === !0 && r(a, d, j, La.z, i);
                    } else r(a, d, c, La.z, null);
                }
            }
            for (var k = a.children, g = 0, h = k.length; h > g; g++) s(k[g], b);
        }
    }
    function t(a, b, c, d) {
        for (var e = 0, f = a.length; f > e; e++) {
            var g = a[e], h = g.object, i = g.geometry, j = void 0 === d ? g.material : d, k = g.group;
            if (h.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, h.matrixWorld), h.normalMatrix.getNormalMatrix(h.modelViewMatrix), 
            h instanceof THREE.ImmediateRenderObject) {
                v(j);
                var l = x(b, c, j, h);
                va = "", h.render(function(a) {
                    qa.renderBufferImmediate(a, l, j);
                });
            } else qa.renderBufferDirect(b, c, i, j, h, k);
        }
    }
    function u(a, b, c) {
        var d = Va.get(a), e = Xa.getParameters(a, Ma, b, c), f = Xa.getProgramCode(a, e), g = d.program, h = !0;
        if (void 0 === g) a.addEventListener("dispose", i); else if (g.code !== f) m(a); else {
            if (void 0 !== e.shaderID) return;
            h = !1;
        }
        if (h) {
            if (e.shaderID) {
                var j = THREE.ShaderLib[e.shaderID];
                d.__webglShader = {
                    name: a.type,
                    uniforms: THREE.UniformsUtils.clone(j.uniforms),
                    vertexShader: j.vertexShader,
                    fragmentShader: j.fragmentShader
                };
            } else d.__webglShader = {
                name: a.type,
                uniforms: a.uniforms,
                vertexShader: a.vertexShader,
                fragmentShader: a.fragmentShader
            };
            a.__webglShader = d.__webglShader, g = Xa.acquireProgram(a, e, f), d.program = g, 
            a.program = g;
        }
        var k = g.getAttributes();
        if (a.morphTargets) {
            a.numSupportedMorphTargets = 0;
            for (var l = 0; l < qa.maxMorphTargets; l++) k["morphTarget" + l] >= 0 && a.numSupportedMorphTargets++;
        }
        if (a.morphNormals) {
            a.numSupportedMorphNormals = 0;
            for (var l = 0; l < qa.maxMorphNormals; l++) k["morphNormal" + l] >= 0 && a.numSupportedMorphNormals++;
        }
        d.uniformsList = [];
        var n = d.__webglShader.uniforms, o = d.program.getUniforms();
        for (var p in n) {
            var q = o[p];
            q && d.uniformsList.push([ d.__webglShader.uniforms[p], q ]);
        }
        (a instanceof THREE.MeshPhongMaterial || a instanceof THREE.MeshLambertMaterial || a instanceof THREE.MeshStandardMaterial || a.lights) && (d.lightsHash = Ma.hash, 
        n.ambientLightColor.value = Ma.ambient, n.directionalLights.value = Ma.directional, 
        n.spotLights.value = Ma.spot, n.pointLights.value = Ma.point, n.hemisphereLights.value = Ma.hemi, 
        n.directionalShadowMap.value = Ma.directionalShadowMap, n.directionalShadowMatrix.value = Ma.directionalShadowMatrix, 
        n.spotShadowMap.value = Ma.spotShadowMap, n.spotShadowMatrix.value = Ma.spotShadowMatrix, 
        n.pointShadowMap.value = Ma.pointShadowMap, n.pointShadowMatrix.value = Ma.pointShadowMatrix), 
        d.hasDynamicUniforms = !1;
        for (var r = 0, s = d.uniformsList.length; s > r; r++) {
            var t = d.uniformsList[r][0];
            if (t.dynamic === !0) {
                d.hasDynamicUniforms = !0;
                break;
            }
        }
    }
    function v(a) {
        w(a), a.transparent === !0 ? Ua.setBlending(a.blending, a.blendEquation, a.blendSrc, a.blendDst, a.blendEquationAlpha, a.blendSrcAlpha, a.blendDstAlpha, a.premultipliedAlpha) : Ua.setBlending(THREE.NoBlending), 
        Ua.setDepthFunc(a.depthFunc), Ua.setDepthTest(a.depthTest), Ua.setDepthWrite(a.depthWrite), 
        Ua.setColorWrite(a.colorWrite), Ua.setPolygonOffset(a.polygonOffset, a.polygonOffsetFactor, a.polygonOffsetUnits);
    }
    function w(a) {
        a.side !== THREE.DoubleSide ? Ua.enable(Pa.CULL_FACE) : Ua.disable(Pa.CULL_FACE), 
        Ua.setFlipSided(a.side === THREE.BackSide);
    }
    function x(a, b, c, d) {
        Aa = 0;
        var e = Va.get(c);
        void 0 === e.program && (c.needsUpdate = !0), void 0 !== e.lightsHash && e.lightsHash !== Ma.hash && (c.needsUpdate = !0), 
        c.needsUpdate && (u(c, b, d), c.needsUpdate = !1);
        var f = !1, g = !1, h = !1, i = e.program, j = i.getUniforms(), k = e.__webglShader.uniforms;
        if (i.id !== ra && (Pa.useProgram(i.program), ra = i.id, f = !0, g = !0, h = !0), 
        c.id !== ua && (ua = c.id, g = !0), (f || a !== wa) && (Pa.uniformMatrix4fv(j.projectionMatrix, !1, a.projectionMatrix.elements), 
        Ta.logarithmicDepthBuffer && Pa.uniform1f(j.logDepthBufFC, 2 / (Math.log(a.far + 1) / Math.LN2)), 
        a !== wa && (wa = a, g = !0, h = !0), (c instanceof THREE.ShaderMaterial || c instanceof THREE.MeshPhongMaterial || c instanceof THREE.MeshStandardMaterial || c.envMap) && void 0 !== j.cameraPosition && (La.setFromMatrixPosition(a.matrixWorld), 
        Pa.uniform3f(j.cameraPosition, La.x, La.y, La.z)), (c instanceof THREE.MeshPhongMaterial || c instanceof THREE.MeshLambertMaterial || c instanceof THREE.MeshBasicMaterial || c instanceof THREE.MeshStandardMaterial || c instanceof THREE.ShaderMaterial || c.skinning) && void 0 !== j.viewMatrix && Pa.uniformMatrix4fv(j.viewMatrix, !1, a.matrixWorldInverse.elements), 
        void 0 !== j.toneMappingExposure && Pa.uniform1f(j.toneMappingExposure, qa.toneMappingExposure), 
        void 0 !== j.toneMappingWhitePoint && Pa.uniform1f(j.toneMappingWhitePoint, qa.toneMappingWhitePoint)), 
        c.skinning) if (d.bindMatrix && void 0 !== j.bindMatrix && Pa.uniformMatrix4fv(j.bindMatrix, !1, d.bindMatrix.elements), 
        d.bindMatrixInverse && void 0 !== j.bindMatrixInverse && Pa.uniformMatrix4fv(j.bindMatrixInverse, !1, d.bindMatrixInverse.elements), 
        Ta.floatVertexTextures && d.skeleton && d.skeleton.useVertexTexture) {
            if (void 0 !== j.boneTexture) {
                var l = J();
                Pa.uniform1i(j.boneTexture, l), qa.setTexture(d.skeleton.boneTexture, l);
            }
            void 0 !== j.boneTextureWidth && Pa.uniform1i(j.boneTextureWidth, d.skeleton.boneTextureWidth), 
            void 0 !== j.boneTextureHeight && Pa.uniform1i(j.boneTextureHeight, d.skeleton.boneTextureHeight);
        } else d.skeleton && d.skeleton.boneMatrices && void 0 !== j.boneGlobalMatrices && Pa.uniformMatrix4fv(j.boneGlobalMatrices, !1, d.skeleton.boneMatrices);
        return g && ((c instanceof THREE.MeshPhongMaterial || c instanceof THREE.MeshLambertMaterial || c instanceof THREE.MeshStandardMaterial || c.lights) && H(k, h), 
        b && c.fog && D(k, b), (c instanceof THREE.MeshBasicMaterial || c instanceof THREE.MeshLambertMaterial || c instanceof THREE.MeshPhongMaterial || c instanceof THREE.MeshStandardMaterial) && z(k, c), 
        c instanceof THREE.LineBasicMaterial ? A(k, c) : c instanceof THREE.LineDashedMaterial ? (A(k, c), 
        B(k, c)) : c instanceof THREE.PointsMaterial ? C(k, c) : c instanceof THREE.MeshLambertMaterial ? E(k, c) : c instanceof THREE.MeshPhongMaterial ? F(k, c) : c instanceof THREE.MeshStandardMaterial ? G(k, c) : c instanceof THREE.MeshDepthMaterial ? (k.mNear.value = a.near, 
        k.mFar.value = a.far, k.opacity.value = c.opacity) : c instanceof THREE.MeshNormalMaterial && (k.opacity.value = c.opacity), 
        L(e.uniformsList)), I(j, d), void 0 !== j.modelMatrix && Pa.uniformMatrix4fv(j.modelMatrix, !1, d.matrixWorld.elements), 
        e.hasDynamicUniforms === !0 && y(e.uniformsList, d, a), i;
    }
    function y(a, b, c) {
        for (var d = [], e = 0, f = a.length; f > e; e++) {
            var g = a[e][0], h = g.onUpdateCallback;
            void 0 !== h && (h.bind(g)(b, c), d.push(a[e]));
        }
        L(d);
    }
    function z(a, b) {
        a.opacity.value = b.opacity, a.diffuse.value = b.color, b.emissive && a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity), 
        a.map.value = b.map, a.specularMap.value = b.specularMap, a.alphaMap.value = b.alphaMap, 
        b.aoMap && (a.aoMap.value = b.aoMap, a.aoMapIntensity.value = b.aoMapIntensity);
        var c;
        if (b.map ? c = b.map : b.specularMap ? c = b.specularMap : b.displacementMap ? c = b.displacementMap : b.normalMap ? c = b.normalMap : b.bumpMap ? c = b.bumpMap : b.roughnessMap ? c = b.roughnessMap : b.metalnessMap ? c = b.metalnessMap : b.alphaMap ? c = b.alphaMap : b.emissiveMap && (c = b.emissiveMap), 
        void 0 !== c) {
            c instanceof THREE.WebGLRenderTarget && (c = c.texture);
            var d = c.offset, e = c.repeat;
            a.offsetRepeat.value.set(d.x, d.y, e.x, e.y);
        }
        a.envMap.value = b.envMap, a.flipEnvMap.value = b.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1, 
        a.reflectivity.value = b.reflectivity, a.refractionRatio.value = b.refractionRatio;
    }
    function A(a, b) {
        a.diffuse.value = b.color, a.opacity.value = b.opacity;
    }
    function B(a, b) {
        a.dashSize.value = b.dashSize, a.totalSize.value = b.dashSize + b.gapSize, a.scale.value = b.scale;
    }
    function C(a, b) {
        if (a.diffuse.value = b.color, a.opacity.value = b.opacity, a.size.value = b.size * Fa, 
        a.scale.value = aa.clientHeight / 2, a.map.value = b.map, null !== b.map) {
            var c = b.map.offset, d = b.map.repeat;
            a.offsetRepeat.value.set(c.x, c.y, d.x, d.y);
        }
    }
    function D(a, b) {
        a.fogColor.value = b.color, b instanceof THREE.Fog ? (a.fogNear.value = b.near, 
        a.fogFar.value = b.far) : b instanceof THREE.FogExp2 && (a.fogDensity.value = b.density);
    }
    function E(a, b) {
        b.lightMap && (a.lightMap.value = b.lightMap, a.lightMapIntensity.value = b.lightMapIntensity), 
        b.emissiveMap && (a.emissiveMap.value = b.emissiveMap);
    }
    function F(a, b) {
        a.specular.value = b.specular, a.shininess.value = Math.max(b.shininess, 1e-4), 
        b.lightMap && (a.lightMap.value = b.lightMap, a.lightMapIntensity.value = b.lightMapIntensity), 
        b.emissiveMap && (a.emissiveMap.value = b.emissiveMap), b.bumpMap && (a.bumpMap.value = b.bumpMap, 
        a.bumpScale.value = b.bumpScale), b.normalMap && (a.normalMap.value = b.normalMap, 
        a.normalScale.value.copy(b.normalScale)), b.displacementMap && (a.displacementMap.value = b.displacementMap, 
        a.displacementScale.value = b.displacementScale, a.displacementBias.value = b.displacementBias);
    }
    function G(a, b) {
        a.roughness.value = b.roughness, a.metalness.value = b.metalness, b.roughnessMap && (a.roughnessMap.value = b.roughnessMap), 
        b.metalnessMap && (a.metalnessMap.value = b.metalnessMap), b.lightMap && (a.lightMap.value = b.lightMap, 
        a.lightMapIntensity.value = b.lightMapIntensity), b.emissiveMap && (a.emissiveMap.value = b.emissiveMap), 
        b.bumpMap && (a.bumpMap.value = b.bumpMap, a.bumpScale.value = b.bumpScale), b.normalMap && (a.normalMap.value = b.normalMap, 
        a.normalScale.value.copy(b.normalScale)), b.displacementMap && (a.displacementMap.value = b.displacementMap, 
        a.displacementScale.value = b.displacementScale, a.displacementBias.value = b.displacementBias), 
        b.envMap && (a.envMapIntensity.value = b.envMapIntensity);
    }
    function H(a, b) {
        a.ambientLightColor.needsUpdate = b, a.directionalLights.needsUpdate = b, a.pointLights.needsUpdate = b, 
        a.spotLights.needsUpdate = b, a.hemisphereLights.needsUpdate = b;
    }
    function I(a, b) {
        Pa.uniformMatrix4fv(a.modelViewMatrix, !1, b.modelViewMatrix.elements), a.normalMatrix && Pa.uniformMatrix3fv(a.normalMatrix, !1, b.normalMatrix.elements);
    }
    function J() {
        var a = Aa;
        return a >= Ta.maxTextures && console.warn("WebGLRenderer: trying to use " + a + " texture units while this GPU supports only " + Ta.maxTextures), 
        Aa += 1, a;
    }
    function K(a, b, c, d) {
        var e, f;
        if ("1i" === b) Pa.uniform1i(c, d); else if ("1f" === b) Pa.uniform1f(c, d); else if ("2f" === b) Pa.uniform2f(c, d[0], d[1]); else if ("3f" === b) Pa.uniform3f(c, d[0], d[1], d[2]); else if ("4f" === b) Pa.uniform4f(c, d[0], d[1], d[2], d[3]); else if ("1iv" === b) Pa.uniform1iv(c, d); else if ("3iv" === b) Pa.uniform3iv(c, d); else if ("1fv" === b) Pa.uniform1fv(c, d); else if ("2fv" === b) Pa.uniform2fv(c, d); else if ("3fv" === b) Pa.uniform3fv(c, d); else if ("4fv" === b) Pa.uniform4fv(c, d); else if ("Matrix2fv" === b) Pa.uniformMatrix2fv(c, !1, d); else if ("Matrix3fv" === b) Pa.uniformMatrix3fv(c, !1, d); else if ("Matrix4fv" === b) Pa.uniformMatrix4fv(c, !1, d); else if ("i" === b) Pa.uniform1i(c, d); else if ("f" === b) Pa.uniform1f(c, d); else if ("v2" === b) Pa.uniform2f(c, d.x, d.y); else if ("v3" === b) Pa.uniform3f(c, d.x, d.y, d.z); else if ("v4" === b) Pa.uniform4f(c, d.x, d.y, d.z, d.w); else if ("c" === b) Pa.uniform3f(c, d.r, d.g, d.b); else if ("s" === b) {
            var g = a.properties;
            for (var h in g) {
                var i = g[h], j = c[h], k = d[h];
                K(i, i.type, j, k);
            }
        } else if ("sa" === b) for (var g = a.properties, l = 0, m = d.length; m > l; l++) for (var h in g) {
            var i = g[h], j = c[l][h], k = d[l][h];
            K(i, i.type, j, k);
        } else if ("iv1" === b) Pa.uniform1iv(c, d); else if ("iv" === b) Pa.uniform3iv(c, d); else if ("fv1" === b) Pa.uniform1fv(c, d); else if ("fv" === b) Pa.uniform3fv(c, d); else if ("v2v" === b) {
            void 0 === a._array && (a._array = new Float32Array(2 * d.length));
            for (var l = 0, n = 0, o = d.length; o > l; l++, n += 2) a._array[n + 0] = d[l].x, 
            a._array[n + 1] = d[l].y;
            Pa.uniform2fv(c, a._array);
        } else if ("v3v" === b) {
            void 0 === a._array && (a._array = new Float32Array(3 * d.length));
            for (var l = 0, p = 0, o = d.length; o > l; l++, p += 3) a._array[p + 0] = d[l].x, 
            a._array[p + 1] = d[l].y, a._array[p + 2] = d[l].z;
            Pa.uniform3fv(c, a._array);
        } else if ("v4v" === b) {
            void 0 === a._array && (a._array = new Float32Array(4 * d.length));
            for (var l = 0, q = 0, o = d.length; o > l; l++, q += 4) a._array[q + 0] = d[l].x, 
            a._array[q + 1] = d[l].y, a._array[q + 2] = d[l].z, a._array[q + 3] = d[l].w;
            Pa.uniform4fv(c, a._array);
        } else if ("m2" === b) Pa.uniformMatrix2fv(c, !1, d.elements); else if ("m3" === b) Pa.uniformMatrix3fv(c, !1, d.elements); else if ("m3v" === b) {
            void 0 === a._array && (a._array = new Float32Array(9 * d.length));
            for (var l = 0, o = d.length; o > l; l++) d[l].flattenToArrayOffset(a._array, 9 * l);
            Pa.uniformMatrix3fv(c, !1, a._array);
        } else if ("m4" === b) Pa.uniformMatrix4fv(c, !1, d.elements); else if ("m4v" === b) {
            void 0 === a._array && (a._array = new Float32Array(16 * d.length));
            for (var l = 0, o = d.length; o > l; l++) d[l].flattenToArrayOffset(a._array, 16 * l);
            Pa.uniformMatrix4fv(c, !1, a._array);
        } else if ("t" === b) {
            if (e = d, f = J(), Pa.uniform1i(c, f), !e) return;
            e instanceof THREE.CubeTexture || Array.isArray(e.image) && 6 === e.image.length ? T(e, f) : e instanceof THREE.WebGLRenderTargetCube ? U(e.texture, f) : e instanceof THREE.WebGLRenderTarget ? qa.setTexture(e.texture, f) : qa.setTexture(e, f);
        } else if ("tv" === b) {
            void 0 === a._array && (a._array = []);
            for (var l = 0, o = a.value.length; o > l; l++) a._array[l] = J();
            Pa.uniform1iv(c, a._array);
            for (var l = 0, o = a.value.length; o > l; l++) e = a.value[l], f = a._array[l], 
            e && (e instanceof THREE.CubeTexture || e.image instanceof Array && 6 === e.image.length ? T(e, f) : e instanceof THREE.WebGLRenderTarget ? qa.setTexture(e.texture, f) : e instanceof THREE.WebGLRenderTargetCube ? U(e.texture, f) : qa.setTexture(e, f));
        } else console.warn("THREE.WebGLRenderer: Unknown uniform type: " + b);
    }
    function L(a) {
        for (var b = 0, c = a.length; c > b; b++) {
            var d = a[b][0];
            if (d.needsUpdate !== !1) {
                var e = d.type, f = a[b][1], g = d.value;
                K(d, e, f, g);
            }
        }
    }
    function M(a, b) {
        var c, d, e, f, g, h, i = 0, j = 0, k = 0, l = b.matrixWorldInverse, m = 0, n = 0, o = 0, p = 0, q = 0;
        for (Ma.shadowsPointLight = 0, c = 0, d = a.length; d > c; c++) if (e = a[c], f = e.color, 
        g = e.intensity, h = e.distance, e instanceof THREE.AmbientLight) i += f.r * g, 
        j += f.g * g, k += f.b * g; else if (e instanceof THREE.DirectionalLight) {
            var r = Ya.get(e);
            r.color.copy(e.color).multiplyScalar(e.intensity), r.direction.setFromMatrixPosition(e.matrixWorld), 
            La.setFromMatrixPosition(e.target.matrixWorld), r.direction.sub(La), r.direction.transformDirection(l), 
            r.shadow = e.castShadow, e.castShadow && (r.shadowBias = e.shadow.bias, r.shadowRadius = e.shadow.radius, 
            r.shadowMapSize = e.shadow.mapSize, Ma.shadows[q++] = e), Ma.directionalShadowMap[m] = e.shadow.map, 
            Ma.directionalShadowMatrix[m] = e.shadow.matrix, Ma.directional[m++] = r;
        } else if (e instanceof THREE.SpotLight) {
            var r = Ya.get(e);
            r.position.setFromMatrixPosition(e.matrixWorld), r.position.applyMatrix4(l), r.color.copy(f).multiplyScalar(g), 
            r.distance = h, r.direction.setFromMatrixPosition(e.matrixWorld), La.setFromMatrixPosition(e.target.matrixWorld), 
            r.direction.sub(La), r.direction.transformDirection(l), r.coneCos = Math.cos(e.angle), 
            r.penumbraCos = Math.cos(e.angle * (1 - e.penumbra)), r.decay = 0 === e.distance ? 0 : e.decay, 
            r.shadow = e.castShadow, e.castShadow && (r.shadowBias = e.shadow.bias, r.shadowRadius = e.shadow.radius, 
            r.shadowMapSize = e.shadow.mapSize, Ma.shadows[q++] = e), Ma.spotShadowMap[o] = e.shadow.map, 
            Ma.spotShadowMatrix[o] = e.shadow.matrix, Ma.spot[o++] = r;
        } else if (e instanceof THREE.PointLight) {
            var r = Ya.get(e);
            r.position.setFromMatrixPosition(e.matrixWorld), r.position.applyMatrix4(l), r.color.copy(e.color).multiplyScalar(e.intensity), 
            r.distance = e.distance, r.decay = 0 === e.distance ? 0 : e.decay, r.shadow = e.castShadow, 
            e.castShadow && (r.shadowBias = e.shadow.bias, r.shadowRadius = e.shadow.radius, 
            r.shadowMapSize = e.shadow.mapSize, Ma.shadows[q++] = e), Ma.pointShadowMap[n] = e.shadow.map, 
            void 0 === Ma.pointShadowMatrix[n] && (Ma.pointShadowMatrix[n] = new THREE.Matrix4()), 
            La.setFromMatrixPosition(e.matrixWorld).negate(), Ma.pointShadowMatrix[n].identity().setPosition(La), 
            Ma.point[n++] = r;
        } else if (e instanceof THREE.HemisphereLight) {
            var r = Ya.get(e);
            r.direction.setFromMatrixPosition(e.matrixWorld), r.direction.transformDirection(l), 
            r.direction.normalize(), r.skyColor.copy(e.color).multiplyScalar(g), r.groundColor.copy(e.groundColor).multiplyScalar(g), 
            Ma.hemi[p++] = r;
        }
        Ma.ambient[0] = i, Ma.ambient[1] = j, Ma.ambient[2] = k, Ma.directional.length = m, 
        Ma.spot.length = o, Ma.point.length = n, Ma.hemi.length = p, Ma.shadows.length = q, 
        Ma.hash = m + "," + n + "," + o + "," + p + "," + q;
    }
    function N(a, b, c) {
        var d;
        if (c ? (Pa.texParameteri(a, Pa.TEXTURE_WRAP_S, _(b.wrapS)), Pa.texParameteri(a, Pa.TEXTURE_WRAP_T, _(b.wrapT)), 
        Pa.texParameteri(a, Pa.TEXTURE_MAG_FILTER, _(b.magFilter)), Pa.texParameteri(a, Pa.TEXTURE_MIN_FILTER, _(b.minFilter))) : (Pa.texParameteri(a, Pa.TEXTURE_WRAP_S, Pa.CLAMP_TO_EDGE), 
        Pa.texParameteri(a, Pa.TEXTURE_WRAP_T, Pa.CLAMP_TO_EDGE), b.wrapS === THREE.ClampToEdgeWrapping && b.wrapT === THREE.ClampToEdgeWrapping || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.", b), 
        Pa.texParameteri(a, Pa.TEXTURE_MAG_FILTER, $(b.magFilter)), Pa.texParameteri(a, Pa.TEXTURE_MIN_FILTER, $(b.minFilter)), 
        b.minFilter !== THREE.NearestFilter && b.minFilter !== THREE.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.", b)), 
        d = Sa.get("EXT_texture_filter_anisotropic")) {
            if (b.type === THREE.FloatType && null === Sa.get("OES_texture_float_linear")) return;
            if (b.type === THREE.HalfFloatType && null === Sa.get("OES_texture_half_float_linear")) return;
            (b.anisotropy > 1 || Va.get(b).__currentAnisotropy) && (Pa.texParameterf(a, d.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(b.anisotropy, qa.getMaxAnisotropy())), 
            Va.get(b).__currentAnisotropy = b.anisotropy);
        }
    }
    function O(a, b, c) {
        void 0 === a.__webglInit && (a.__webglInit = !0, b.addEventListener("dispose", g), 
        a.__webglTexture = Pa.createTexture(), Na.textures++), Ua.activeTexture(Pa.TEXTURE0 + c), 
        Ua.bindTexture(Pa.TEXTURE_2D, a.__webglTexture), Pa.pixelStorei(Pa.UNPACK_FLIP_Y_WEBGL, b.flipY), 
        Pa.pixelStorei(Pa.UNPACK_PREMULTIPLY_ALPHA_WEBGL, b.premultiplyAlpha), Pa.pixelStorei(Pa.UNPACK_ALIGNMENT, b.unpackAlignment);
        var d = P(b.image, Ta.maxTextureSize);
        R(b) && Q(d) === !1 && (d = S(d));
        var e = Q(d), f = _(b.format), h = _(b.type);
        N(Pa.TEXTURE_2D, b, e);
        var i, j = b.mipmaps;
        if (b instanceof THREE.DataTexture) if (j.length > 0 && e) {
            for (var k = 0, l = j.length; l > k; k++) i = j[k], Ua.texImage2D(Pa.TEXTURE_2D, k, f, i.width, i.height, 0, f, h, i.data);
            b.generateMipmaps = !1;
        } else Ua.texImage2D(Pa.TEXTURE_2D, 0, f, d.width, d.height, 0, f, h, d.data); else if (b instanceof THREE.CompressedTexture) for (var k = 0, l = j.length; l > k; k++) i = j[k], 
        b.format !== THREE.RGBAFormat && b.format !== THREE.RGBFormat ? Ua.getCompressedTextureFormats().indexOf(f) > -1 ? Ua.compressedTexImage2D(Pa.TEXTURE_2D, k, f, i.width, i.height, 0, i.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Ua.texImage2D(Pa.TEXTURE_2D, k, f, i.width, i.height, 0, f, h, i.data); else if (j.length > 0 && e) {
            for (var k = 0, l = j.length; l > k; k++) i = j[k], Ua.texImage2D(Pa.TEXTURE_2D, k, f, f, h, i);
            b.generateMipmaps = !1;
        } else Ua.texImage2D(Pa.TEXTURE_2D, 0, f, f, h, d);
        b.generateMipmaps && e && Pa.generateMipmap(Pa.TEXTURE_2D), a.__version = b.version, 
        b.onUpdate && b.onUpdate(b);
    }
    function P(a, b) {
        if (a.width > b || a.height > b) {
            var c = b / Math.max(a.width, a.height), d = document.createElement("canvas");
            d.width = Math.floor(a.width * c), d.height = Math.floor(a.height * c);
            var e = d.getContext("2d");
            return e.drawImage(a, 0, 0, a.width, a.height, 0, 0, d.width, d.height), console.warn("THREE.WebGLRenderer: image is too big (" + a.width + "x" + a.height + "). Resized to " + d.width + "x" + d.height, a), 
            d;
        }
        return a;
    }
    function Q(a) {
        return THREE.Math.isPowerOfTwo(a.width) && THREE.Math.isPowerOfTwo(a.height);
    }
    function R(a) {
        return a.wrapS !== THREE.ClampToEdgeWrapping || a.wrapT !== THREE.ClampToEdgeWrapping ? !0 : a.minFilter !== THREE.NearestFilter && a.minFilter !== THREE.LinearFilter;
    }
    function S(a) {
        if (a instanceof HTMLImageElement || a instanceof HTMLCanvasElement) {
            var b = document.createElement("canvas");
            b.width = THREE.Math.nearestPowerOfTwo(a.width), b.height = THREE.Math.nearestPowerOfTwo(a.height);
            var c = b.getContext("2d");
            return c.drawImage(a, 0, 0, b.width, b.height), console.warn("THREE.WebGLRenderer: image is not power of two (" + a.width + "x" + a.height + "). Resized to " + b.width + "x" + b.height, a), 
            b;
        }
        return a;
    }
    function T(a, b) {
        var c = Va.get(a);
        if (6 === a.image.length) if (a.version > 0 && c.__version !== a.version) {
            c.__image__webglTextureCube || (a.addEventListener("dispose", g), c.__image__webglTextureCube = Pa.createTexture(), 
            Na.textures++), Ua.activeTexture(Pa.TEXTURE0 + b), Ua.bindTexture(Pa.TEXTURE_CUBE_MAP, c.__image__webglTextureCube), 
            Pa.pixelStorei(Pa.UNPACK_FLIP_Y_WEBGL, a.flipY);
            for (var d = a instanceof THREE.CompressedTexture, e = a.image[0] instanceof THREE.DataTexture, f = [], h = 0; 6 > h; h++) !qa.autoScaleCubemaps || d || e ? f[h] = e ? a.image[h].image : a.image[h] : f[h] = P(a.image[h], Ta.maxCubemapSize);
            var i = f[0], j = Q(i), k = _(a.format), l = _(a.type);
            N(Pa.TEXTURE_CUBE_MAP, a, j);
            for (var h = 0; 6 > h; h++) if (d) for (var m, n = f[h].mipmaps, o = 0, p = n.length; p > o; o++) m = n[o], 
            a.format !== THREE.RGBAFormat && a.format !== THREE.RGBFormat ? Ua.getCompressedTextureFormats().indexOf(k) > -1 ? Ua.compressedTexImage2D(Pa.TEXTURE_CUBE_MAP_POSITIVE_X + h, o, k, m.width, m.height, 0, m.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : Ua.texImage2D(Pa.TEXTURE_CUBE_MAP_POSITIVE_X + h, o, k, m.width, m.height, 0, k, l, m.data); else e ? Ua.texImage2D(Pa.TEXTURE_CUBE_MAP_POSITIVE_X + h, 0, k, f[h].width, f[h].height, 0, k, l, f[h].data) : Ua.texImage2D(Pa.TEXTURE_CUBE_MAP_POSITIVE_X + h, 0, k, k, l, f[h]);
            a.generateMipmaps && j && Pa.generateMipmap(Pa.TEXTURE_CUBE_MAP), c.__version = a.version, 
            a.onUpdate && a.onUpdate(a);
        } else Ua.activeTexture(Pa.TEXTURE0 + b), Ua.bindTexture(Pa.TEXTURE_CUBE_MAP, c.__image__webglTextureCube);
    }
    function U(a, b) {
        Ua.activeTexture(Pa.TEXTURE0 + b), Ua.bindTexture(Pa.TEXTURE_CUBE_MAP, Va.get(a).__webglTexture);
    }
    function V(a, b, c, d) {
        var e = _(b.texture.format), f = _(b.texture.type);
        Ua.texImage2D(d, 0, e, b.width, b.height, 0, e, f, null), Pa.bindFramebuffer(Pa.FRAMEBUFFER, a), 
        Pa.framebufferTexture2D(Pa.FRAMEBUFFER, c, d, Va.get(b.texture).__webglTexture, 0), 
        Pa.bindFramebuffer(Pa.FRAMEBUFFER, null);
    }
    function W(a, b) {
        Pa.bindRenderbuffer(Pa.RENDERBUFFER, a), b.depthBuffer && !b.stencilBuffer ? (Pa.renderbufferStorage(Pa.RENDERBUFFER, Pa.DEPTH_COMPONENT16, b.width, b.height), 
        Pa.framebufferRenderbuffer(Pa.FRAMEBUFFER, Pa.DEPTH_ATTACHMENT, Pa.RENDERBUFFER, a)) : b.depthBuffer && b.stencilBuffer ? (Pa.renderbufferStorage(Pa.RENDERBUFFER, Pa.DEPTH_STENCIL, b.width, b.height), 
        Pa.framebufferRenderbuffer(Pa.FRAMEBUFFER, Pa.DEPTH_STENCIL_ATTACHMENT, Pa.RENDERBUFFER, a)) : Pa.renderbufferStorage(Pa.RENDERBUFFER, Pa.RGBA4, b.width, b.height), 
        Pa.bindRenderbuffer(Pa.RENDERBUFFER, null);
    }
    function X(a) {
        var b = Va.get(a), c = a instanceof THREE.WebGLRenderTargetCube;
        if (c) {
            b.__webglDepthbuffer = [];
            for (var d = 0; 6 > d; d++) Pa.bindFramebuffer(Pa.FRAMEBUFFER, b.__webglFramebuffer[d]), 
            b.__webglDepthbuffer[d] = Pa.createRenderbuffer(), W(b.__webglDepthbuffer[d], a);
        } else Pa.bindFramebuffer(Pa.FRAMEBUFFER, b.__webglFramebuffer), b.__webglDepthbuffer = Pa.createRenderbuffer(), 
        W(b.__webglDepthbuffer, a);
        Pa.bindFramebuffer(Pa.FRAMEBUFFER, null);
    }
    function Y(a) {
        var b = Va.get(a), c = Va.get(a.texture);
        a.addEventListener("dispose", h), c.__webglTexture = Pa.createTexture(), Na.textures++;
        var d = a instanceof THREE.WebGLRenderTargetCube, e = THREE.Math.isPowerOfTwo(a.width) && THREE.Math.isPowerOfTwo(a.height);
        if (d) {
            b.__webglFramebuffer = [];
            for (var f = 0; 6 > f; f++) b.__webglFramebuffer[f] = Pa.createFramebuffer();
        } else b.__webglFramebuffer = Pa.createFramebuffer();
        if (d) {
            Ua.bindTexture(Pa.TEXTURE_CUBE_MAP, c.__webglTexture), N(Pa.TEXTURE_CUBE_MAP, a.texture, e);
            for (var f = 0; 6 > f; f++) V(b.__webglFramebuffer[f], a, Pa.COLOR_ATTACHMENT0, Pa.TEXTURE_CUBE_MAP_POSITIVE_X + f);
            a.texture.generateMipmaps && e && Pa.generateMipmap(Pa.TEXTURE_CUBE_MAP), Ua.bindTexture(Pa.TEXTURE_CUBE_MAP, null);
        } else Ua.bindTexture(Pa.TEXTURE_2D, c.__webglTexture), N(Pa.TEXTURE_2D, a.texture, e), 
        V(b.__webglFramebuffer, a, Pa.COLOR_ATTACHMENT0, Pa.TEXTURE_2D), a.texture.generateMipmaps && e && Pa.generateMipmap(Pa.TEXTURE_2D), 
        Ua.bindTexture(Pa.TEXTURE_2D, null);
        a.depthBuffer && X(a);
    }
    function Z(a) {
        var b = a instanceof THREE.WebGLRenderTargetCube ? Pa.TEXTURE_CUBE_MAP : Pa.TEXTURE_2D, c = Va.get(a.texture).__webglTexture;
        Ua.bindTexture(b, c), Pa.generateMipmap(b), Ua.bindTexture(b, null);
    }
    function $(a) {
        return a === THREE.NearestFilter || a === THREE.NearestMipMapNearestFilter || a === THREE.NearestMipMapLinearFilter ? Pa.NEAREST : Pa.LINEAR;
    }
    function _(a) {
        var b;
        if (a === THREE.RepeatWrapping) return Pa.REPEAT;
        if (a === THREE.ClampToEdgeWrapping) return Pa.CLAMP_TO_EDGE;
        if (a === THREE.MirroredRepeatWrapping) return Pa.MIRRORED_REPEAT;
        if (a === THREE.NearestFilter) return Pa.NEAREST;
        if (a === THREE.NearestMipMapNearestFilter) return Pa.NEAREST_MIPMAP_NEAREST;
        if (a === THREE.NearestMipMapLinearFilter) return Pa.NEAREST_MIPMAP_LINEAR;
        if (a === THREE.LinearFilter) return Pa.LINEAR;
        if (a === THREE.LinearMipMapNearestFilter) return Pa.LINEAR_MIPMAP_NEAREST;
        if (a === THREE.LinearMipMapLinearFilter) return Pa.LINEAR_MIPMAP_LINEAR;
        if (a === THREE.UnsignedByteType) return Pa.UNSIGNED_BYTE;
        if (a === THREE.UnsignedShort4444Type) return Pa.UNSIGNED_SHORT_4_4_4_4;
        if (a === THREE.UnsignedShort5551Type) return Pa.UNSIGNED_SHORT_5_5_5_1;
        if (a === THREE.UnsignedShort565Type) return Pa.UNSIGNED_SHORT_5_6_5;
        if (a === THREE.ByteType) return Pa.BYTE;
        if (a === THREE.ShortType) return Pa.SHORT;
        if (a === THREE.UnsignedShortType) return Pa.UNSIGNED_SHORT;
        if (a === THREE.IntType) return Pa.INT;
        if (a === THREE.UnsignedIntType) return Pa.UNSIGNED_INT;
        if (a === THREE.FloatType) return Pa.FLOAT;
        if (b = Sa.get("OES_texture_half_float"), null !== b && a === THREE.HalfFloatType) return b.HALF_FLOAT_OES;
        if (a === THREE.AlphaFormat) return Pa.ALPHA;
        if (a === THREE.RGBFormat) return Pa.RGB;
        if (a === THREE.RGBAFormat) return Pa.RGBA;
        if (a === THREE.LuminanceFormat) return Pa.LUMINANCE;
        if (a === THREE.LuminanceAlphaFormat) return Pa.LUMINANCE_ALPHA;
        if (a === THREE.AddEquation) return Pa.FUNC_ADD;
        if (a === THREE.SubtractEquation) return Pa.FUNC_SUBTRACT;
        if (a === THREE.ReverseSubtractEquation) return Pa.FUNC_REVERSE_SUBTRACT;
        if (a === THREE.ZeroFactor) return Pa.ZERO;
        if (a === THREE.OneFactor) return Pa.ONE;
        if (a === THREE.SrcColorFactor) return Pa.SRC_COLOR;
        if (a === THREE.OneMinusSrcColorFactor) return Pa.ONE_MINUS_SRC_COLOR;
        if (a === THREE.SrcAlphaFactor) return Pa.SRC_ALPHA;
        if (a === THREE.OneMinusSrcAlphaFactor) return Pa.ONE_MINUS_SRC_ALPHA;
        if (a === THREE.DstAlphaFactor) return Pa.DST_ALPHA;
        if (a === THREE.OneMinusDstAlphaFactor) return Pa.ONE_MINUS_DST_ALPHA;
        if (a === THREE.DstColorFactor) return Pa.DST_COLOR;
        if (a === THREE.OneMinusDstColorFactor) return Pa.ONE_MINUS_DST_COLOR;
        if (a === THREE.SrcAlphaSaturateFactor) return Pa.SRC_ALPHA_SATURATE;
        if (b = Sa.get("WEBGL_compressed_texture_s3tc"), null !== b) {
            if (a === THREE.RGB_S3TC_DXT1_Format) return b.COMPRESSED_RGB_S3TC_DXT1_EXT;
            if (a === THREE.RGBA_S3TC_DXT1_Format) return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            if (a === THREE.RGBA_S3TC_DXT3_Format) return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;
            if (a === THREE.RGBA_S3TC_DXT5_Format) return b.COMPRESSED_RGBA_S3TC_DXT5_EXT;
        }
        if (b = Sa.get("WEBGL_compressed_texture_pvrtc"), null !== b) {
            if (a === THREE.RGB_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            if (a === THREE.RGB_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
            if (a === THREE.RGBA_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            if (a === THREE.RGBA_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
        }
        if (b = Sa.get("WEBGL_compressed_texture_etc1"), null !== b && a === THREE.RGB_ETC1_Format) return b.COMPRESSED_RGB_ETC1_WEBGL;
        if (b = Sa.get("EXT_blend_minmax"), null !== b) {
            if (a === THREE.MinEquation) return b.MIN_EXT;
            if (a === THREE.MaxEquation) return b.MAX_EXT;
        }
        return 0;
    }
    console.log("THREE.WebGLRenderer", THREE.REVISION), a = a || {};
    var aa = void 0 !== a.canvas ? a.canvas : document.createElement("canvas"), ba = void 0 !== a.context ? a.context : null, ca = void 0 !== a.alpha ? a.alpha : !1, da = void 0 !== a.depth ? a.depth : !0, ea = void 0 !== a.stencil ? a.stencil : !0, fa = void 0 !== a.antialias ? a.antialias : !1, ga = void 0 !== a.premultipliedAlpha ? a.premultipliedAlpha : !0, ha = void 0 !== a.preserveDrawingBuffer ? a.preserveDrawingBuffer : !1, ia = [], ja = [], ka = -1, la = [], ma = -1, na = new Float32Array(8), oa = [], pa = [];
    this.domElement = aa, this.context = null, this.autoClear = !0, this.autoClearColor = !0, 
    this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaFactor = 2, 
    this.gammaInput = !1, this.gammaOutput = !1, this.physicallyCorrectLights = !1, 
    this.toneMapping = THREE.LinearToneMapping, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, 
    this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0;
    var qa = this, ra = null, sa = null, ta = null, ua = -1, va = "", wa = null, xa = new THREE.Vector4(), ya = null, za = new THREE.Vector4(), Aa = 0, Ba = new THREE.Color(0), Ca = 0, Da = aa.width, Ea = aa.height, Fa = 1, Ga = new THREE.Vector4(0, 0, Da, Ea), Ha = !1, Ia = new THREE.Vector4(0, 0, Da, Ea), Ja = new THREE.Frustum(), Ka = new THREE.Matrix4(), La = new THREE.Vector3(), Ma = {
        hash: "",
        ambient: [ 0, 0, 0 ],
        directional: [],
        directionalShadowMap: [],
        directionalShadowMatrix: [],
        spot: [],
        spotShadowMap: [],
        spotShadowMatrix: [],
        point: [],
        pointShadowMap: [],
        pointShadowMatrix: [],
        hemi: [],
        shadows: [],
        shadowsPointLight: 0
    }, Na = {
        geometries: 0,
        textures: 0
    }, Oa = {
        calls: 0,
        vertices: 0,
        faces: 0,
        points: 0
    };
    this.info = {
        render: Oa,
        memory: Na,
        programs: null
    };
    var Pa;
    try {
        var Qa = {
            alpha: ca,
            depth: da,
            stencil: ea,
            antialias: fa,
            premultipliedAlpha: ga,
            preserveDrawingBuffer: ha
        };
        if (Pa = ba || aa.getContext("webgl", Qa) || aa.getContext("experimental-webgl", Qa), 
        null === Pa) throw null !== aa.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
        void 0 === Pa.getShaderPrecisionFormat && (Pa.getShaderPrecisionFormat = function() {
            return {
                rangeMin: 1,
                rangeMax: 1,
                precision: 1
            };
        }), aa.addEventListener("webglcontextlost", f, !1);
    } catch (Ra) {
        console.error("THREE.WebGLRenderer: " + Ra);
    }
    var Sa = new THREE.WebGLExtensions(Pa);
    Sa.get("OES_texture_float"), Sa.get("OES_texture_float_linear"), Sa.get("OES_texture_half_float"), 
    Sa.get("OES_texture_half_float_linear"), Sa.get("OES_standard_derivatives"), Sa.get("ANGLE_instanced_arrays"), 
    Sa.get("OES_element_index_uint") && (THREE.BufferGeometry.MaxIndex = 4294967296);
    var Ta = new THREE.WebGLCapabilities(Pa, Sa, a), Ua = new THREE.WebGLState(Pa, Sa, _), Va = new THREE.WebGLProperties(), Wa = new THREE.WebGLObjects(Pa, Va, this.info), Xa = new THREE.WebGLPrograms(this, Ta), Ya = new THREE.WebGLLights();
    this.info.programs = Xa.programs;
    var Za = new THREE.WebGLBufferRenderer(Pa, Sa, Oa), $a = new THREE.WebGLIndexedBufferRenderer(Pa, Sa, Oa);
    d(), this.context = Pa, this.capabilities = Ta, this.extensions = Sa, this.properties = Va, 
    this.state = Ua;
    var _a = new THREE.WebGLShadowMap(this, Ma, Wa);
    this.shadowMap = _a;
    var ab = new THREE.SpritePlugin(this, oa), bb = new THREE.LensFlarePlugin(this, pa);
    this.getContext = function() {
        return Pa;
    }, this.getContextAttributes = function() {
        return Pa.getContextAttributes();
    }, this.forceContextLoss = function() {
        Sa.get("WEBGL_lose_context").loseContext();
    }, this.getMaxAnisotropy = function() {
        var a;
        return function() {
            if (void 0 !== a) return a;
            var b = Sa.get("EXT_texture_filter_anisotropic");
            return a = null !== b ? Pa.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;
        };
    }(), this.getPrecision = function() {
        return Ta.precision;
    }, this.getPixelRatio = function() {
        return Fa;
    }, this.setPixelRatio = function(a) {
        void 0 !== a && (Fa = a, this.setSize(Ia.z, Ia.w, !1));
    }, this.getSize = function() {
        return {
            width: Da,
            height: Ea
        };
    }, this.setSize = function(a, b, c) {
        Da = a, Ea = b, aa.width = a * Fa, aa.height = b * Fa, c !== !1 && (aa.style.width = a + "px", 
        aa.style.height = b + "px"), this.setViewport(0, 0, a, b);
    }, this.setViewport = function(a, b, c, d) {
        Ua.viewport(Ia.set(a, b, c, d));
    }, this.setScissor = function(a, b, c, d) {
        Ua.scissor(Ga.set(a, b, c, d));
    }, this.setScissorTest = function(a) {
        Ua.setScissorTest(Ha = a);
    }, this.getClearColor = function() {
        return Ba;
    }, this.setClearColor = function(a, b) {
        Ba.set(a), Ca = void 0 !== b ? b : 1, c(Ba.r, Ba.g, Ba.b, Ca);
    }, this.getClearAlpha = function() {
        return Ca;
    }, this.setClearAlpha = function(a) {
        Ca = a, c(Ba.r, Ba.g, Ba.b, Ca);
    }, this.clear = function(a, b, c) {
        var d = 0;
        (void 0 === a || a) && (d |= Pa.COLOR_BUFFER_BIT), (void 0 === b || b) && (d |= Pa.DEPTH_BUFFER_BIT), 
        (void 0 === c || c) && (d |= Pa.STENCIL_BUFFER_BIT), Pa.clear(d);
    }, this.clearColor = function() {
        this.clear(!0, !1, !1);
    }, this.clearDepth = function() {
        this.clear(!1, !0, !1);
    }, this.clearStencil = function() {
        this.clear(!1, !1, !0);
    }, this.clearTarget = function(a, b, c, d) {
        this.setRenderTarget(a), this.clear(b, c, d);
    }, this.resetGLState = e, this.dispose = function() {
        aa.removeEventListener("webglcontextlost", f, !1);
    }, this.renderBufferImmediate = function(a, b, c) {
        Ua.initAttributes();
        var d = Va.get(a);
        a.hasPositions && !d.position && (d.position = Pa.createBuffer()), a.hasNormals && !d.normal && (d.normal = Pa.createBuffer()), 
        a.hasUvs && !d.uv && (d.uv = Pa.createBuffer()), a.hasColors && !d.color && (d.color = Pa.createBuffer());
        var e = b.getAttributes();
        if (a.hasPositions && (Pa.bindBuffer(Pa.ARRAY_BUFFER, d.position), Pa.bufferData(Pa.ARRAY_BUFFER, a.positionArray, Pa.DYNAMIC_DRAW), 
        Ua.enableAttribute(e.position), Pa.vertexAttribPointer(e.position, 3, Pa.FLOAT, !1, 0, 0)), 
        a.hasNormals) {
            if (Pa.bindBuffer(Pa.ARRAY_BUFFER, d.normal), "MeshPhongMaterial" !== c.type && "MeshStandardMaterial" !== c.type && c.shading === THREE.FlatShading) for (var f = 0, g = 3 * a.count; g > f; f += 9) {
                var h = a.normalArray, i = (h[f + 0] + h[f + 3] + h[f + 6]) / 3, j = (h[f + 1] + h[f + 4] + h[f + 7]) / 3, k = (h[f + 2] + h[f + 5] + h[f + 8]) / 3;
                h[f + 0] = i, h[f + 1] = j, h[f + 2] = k, h[f + 3] = i, h[f + 4] = j, h[f + 5] = k, 
                h[f + 6] = i, h[f + 7] = j, h[f + 8] = k;
            }
            Pa.bufferData(Pa.ARRAY_BUFFER, a.normalArray, Pa.DYNAMIC_DRAW), Ua.enableAttribute(e.normal), 
            Pa.vertexAttribPointer(e.normal, 3, Pa.FLOAT, !1, 0, 0);
        }
        a.hasUvs && c.map && (Pa.bindBuffer(Pa.ARRAY_BUFFER, d.uv), Pa.bufferData(Pa.ARRAY_BUFFER, a.uvArray, Pa.DYNAMIC_DRAW), 
        Ua.enableAttribute(e.uv), Pa.vertexAttribPointer(e.uv, 2, Pa.FLOAT, !1, 0, 0)), 
        a.hasColors && c.vertexColors !== THREE.NoColors && (Pa.bindBuffer(Pa.ARRAY_BUFFER, d.color), 
        Pa.bufferData(Pa.ARRAY_BUFFER, a.colorArray, Pa.DYNAMIC_DRAW), Ua.enableAttribute(e.color), 
        Pa.vertexAttribPointer(e.color, 3, Pa.FLOAT, !1, 0, 0)), Ua.disableUnusedAttributes(), 
        Pa.drawArrays(Pa.TRIANGLES, 0, a.count), a.count = 0;
    }, this.renderBufferDirect = function(a, c, d, e, f, g) {
        v(e);
        var h = x(a, c, e, f), i = !1, j = d.id + "_" + h.id + "_" + e.wireframe;
        j !== va && (va = j, i = !0);
        var k = f.morphTargetInfluences;
        if (void 0 !== k) {
            for (var l = [], m = 0, p = k.length; p > m; m++) {
                var q = k[m];
                l.push([ q, m ]);
            }
            l.sort(o), l.length > 8 && (l.length = 8);
            for (var r = d.morphAttributes, m = 0, p = l.length; p > m; m++) {
                var q = l[m];
                if (na[m] = q[0], 0 !== q[0]) {
                    var s = q[1];
                    e.morphTargets === !0 && r.position && d.addAttribute("morphTarget" + m, r.position[s]), 
                    e.morphNormals === !0 && r.normal && d.addAttribute("morphNormal" + m, r.normal[s]);
                } else e.morphTargets === !0 && d.removeAttribute("morphTarget" + m), e.morphNormals === !0 && d.removeAttribute("morphNormal" + m);
            }
            var t = h.getUniforms();
            null !== t.morphTargetInfluences && Pa.uniform1fv(t.morphTargetInfluences, na), 
            i = !0;
        }
        var s = d.index, u = d.attributes.position;
        e.wireframe === !0 && (s = Wa.getWireframeAttribute(d));
        var w;
        null !== s ? (w = $a, w.setIndex(s)) : w = Za, i && (n(e, h, d), null !== s && Pa.bindBuffer(Pa.ELEMENT_ARRAY_BUFFER, Wa.getAttributeBuffer(s)));
        var y = 0, z = 1 / 0;
        null !== s ? z = s.count : void 0 !== u && (z = u.count);
        var A = d.drawRange.start, B = d.drawRange.count, C = null !== g ? g.start : 0, D = null !== g ? g.count : 1 / 0, E = Math.max(y, A, C), F = Math.min(y + z, A + B, C + D) - 1, G = Math.max(0, F - E + 1);
        if (f instanceof THREE.Mesh) if (e.wireframe === !0) Ua.setLineWidth(e.wireframeLinewidth * b()), 
        w.setMode(Pa.LINES); else switch (f.drawMode) {
          case THREE.TrianglesDrawMode:
            w.setMode(Pa.TRIANGLES);
            break;

          case THREE.TriangleStripDrawMode:
            w.setMode(Pa.TRIANGLE_STRIP);
            break;

          case THREE.TriangleFanDrawMode:
            w.setMode(Pa.TRIANGLE_FAN);
        } else if (f instanceof THREE.Line) {
            var H = e.linewidth;
            void 0 === H && (H = 1), Ua.setLineWidth(H * b()), f instanceof THREE.LineSegments ? w.setMode(Pa.LINES) : w.setMode(Pa.LINE_STRIP);
        } else f instanceof THREE.Points && w.setMode(Pa.POINTS);
        d instanceof THREE.InstancedBufferGeometry ? d.maxInstancedCount > 0 && w.renderInstances(d, E, G) : w.render(E, G);
    }, this.render = function(a, b, c, d) {
        if (b instanceof THREE.Camera == !1) return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        var e = a.fog;
        if (va = "", ua = -1, wa = null, a.autoUpdate === !0 && a.updateMatrixWorld(), null === b.parent && b.updateMatrixWorld(), 
        b.matrixWorldInverse.getInverse(b.matrixWorld), Ka.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), 
        Ja.setFromMatrix(Ka), ia.length = 0, ka = -1, ma = -1, oa.length = 0, pa.length = 0, 
        s(a, b), ja.length = ka + 1, la.length = ma + 1, qa.sortObjects === !0 && (ja.sort(p), 
        la.sort(q)), M(ia, b), _a.render(a, b), Oa.calls = 0, Oa.vertices = 0, Oa.faces = 0, 
        Oa.points = 0, void 0 === c && (c = null), this.setRenderTarget(c), (this.autoClear || d) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), 
        a.overrideMaterial) {
            var f = a.overrideMaterial;
            t(ja, b, e, f), t(la, b, e, f);
        } else Ua.setBlending(THREE.NoBlending), t(ja, b, e), t(la, b, e);
        if (ab.render(a, b), bb.render(a, b, za), c) {
            var g = c.texture;
            g.generateMipmaps && Q(c) && g.minFilter !== THREE.NearestFilter && g.minFilter !== THREE.LinearFilter && Z(c);
        }
        Ua.setDepthTest(!0), Ua.setDepthWrite(!0), Ua.setColorWrite(!0);
    }, this.setFaceCulling = function(a, b) {
        a === THREE.CullFaceNone ? Ua.disable(Pa.CULL_FACE) : (b === THREE.FrontFaceDirectionCW ? Pa.frontFace(Pa.CW) : Pa.frontFace(Pa.CCW), 
        a === THREE.CullFaceBack ? Pa.cullFace(Pa.BACK) : a === THREE.CullFaceFront ? Pa.cullFace(Pa.FRONT) : Pa.cullFace(Pa.FRONT_AND_BACK), 
        Ua.enable(Pa.CULL_FACE));
    }, this.setTexture = function(a, b) {
        var c = Va.get(a);
        if (a.version > 0 && c.__version !== a.version) {
            var d = a.image;
            return void 0 === d ? void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined", a) : d.complete === !1 ? void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete", a) : void O(c, a, b);
        }
        Ua.activeTexture(Pa.TEXTURE0 + b), Ua.bindTexture(Pa.TEXTURE_2D, c.__webglTexture);
    }, this.getCurrentRenderTarget = function() {
        return sa;
    }, this.setRenderTarget = function(a) {
        sa = a, a && void 0 === Va.get(a).__webglFramebuffer && Y(a);
        var b, c = a instanceof THREE.WebGLRenderTargetCube;
        if (a) {
            var d = Va.get(a);
            b = c ? d.__webglFramebuffer[a.activeCubeFace] : d.__webglFramebuffer, xa.copy(a.scissor), 
            ya = a.scissorTest, za.copy(a.viewport);
        } else b = null, xa.copy(Ga).multiplyScalar(Fa), ya = Ha, za.copy(Ia).multiplyScalar(Fa);
        if (ta !== b && (Pa.bindFramebuffer(Pa.FRAMEBUFFER, b), ta = b), Ua.scissor(xa), 
        Ua.setScissorTest(ya), Ua.viewport(za), c) {
            var e = Va.get(a.texture);
            Pa.framebufferTexture2D(Pa.FRAMEBUFFER, Pa.COLOR_ATTACHMENT0, Pa.TEXTURE_CUBE_MAP_POSITIVE_X + a.activeCubeFace, e.__webglTexture, a.activeMipMapLevel);
        }
    }, this.readRenderTargetPixels = function(a, b, c, d, e, f) {
        if (a instanceof THREE.WebGLRenderTarget == !1) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        var g = Va.get(a).__webglFramebuffer;
        if (g) {
            var h = !1;
            g !== ta && (Pa.bindFramebuffer(Pa.FRAMEBUFFER, g), h = !0);
            try {
                var i = a.texture;
                if (i.format !== THREE.RGBAFormat && _(i.format) !== Pa.getParameter(Pa.IMPLEMENTATION_COLOR_READ_FORMAT)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                if (!(i.type === THREE.UnsignedByteType || _(i.type) === Pa.getParameter(Pa.IMPLEMENTATION_COLOR_READ_TYPE) || i.type === THREE.FloatType && Sa.get("WEBGL_color_buffer_float") || i.type === THREE.HalfFloatType && Sa.get("EXT_color_buffer_half_float"))) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                Pa.checkFramebufferStatus(Pa.FRAMEBUFFER) === Pa.FRAMEBUFFER_COMPLETE ? Pa.readPixels(b, c, d, e, _(i.format), _(i.type), f) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");
            } finally {
                h && Pa.bindFramebuffer(Pa.FRAMEBUFFER, ta);
            }
        }
    };
}, THREE.WebGLRenderTarget = function(a, b, c) {
    this.uuid = THREE.Math.generateUUID(), this.width = a, this.height = b, this.scissor = new THREE.Vector4(0, 0, a, b), 
    this.scissorTest = !1, this.viewport = new THREE.Vector4(0, 0, a, b), c = c || {}, 
    void 0 === c.minFilter && (c.minFilter = THREE.LinearFilter), this.texture = new THREE.Texture(void 0, void 0, c.wrapS, c.wrapT, c.magFilter, c.minFilter, c.format, c.type, c.anisotropy), 
    this.depthBuffer = void 0 !== c.depthBuffer ? c.depthBuffer : !0, this.stencilBuffer = void 0 !== c.stencilBuffer ? c.stencilBuffer : !0;
}, THREE.WebGLRenderTarget.prototype = {
    constructor: THREE.WebGLRenderTarget,
    setSize: function(a, b) {
        this.width === a && this.height === b || (this.width = a, this.height = b, this.dispose()), 
        this.viewport.set(0, 0, a, b), this.scissor.set(0, 0, a, b);
    },
    clone: function() {
        return new this.constructor().copy(this);
    },
    copy: function(a) {
        return this.width = a.width, this.height = a.height, this.viewport.copy(a.viewport), 
        this.texture = a.texture.clone(), this.depthBuffer = a.depthBuffer, this.stencilBuffer = a.stencilBuffer, 
        this;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube = function(a, b, c) {
    THREE.WebGLRenderTarget.call(this, a, b, c), this.activeCubeFace = 0, this.activeMipMapLevel = 0;
}, THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype), 
THREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube, 
THREE.WebGLBufferRenderer = function(a, b, c) {
    function d(a) {
        g = a;
    }
    function e(b, d) {
        a.drawArrays(g, b, d), c.calls++, c.vertices += d, g === a.TRIANGLES && (c.faces += d / 3);
    }
    function f(d) {
        var e = b.get("ANGLE_instanced_arrays");
        if (null === e) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
        var f = d.attributes.position, h = 0;
        f instanceof THREE.InterleavedBufferAttribute ? (h = f.data.count, e.drawArraysInstancedANGLE(g, 0, h, d.maxInstancedCount)) : (h = f.count, 
        e.drawArraysInstancedANGLE(g, 0, h, d.maxInstancedCount)), c.calls++, c.vertices += h * d.maxInstancedCount, 
        g === a.TRIANGLES && (c.faces += d.maxInstancedCount * h / 3);
    }
    var g;
    this.setMode = d, this.render = e, this.renderInstances = f;
}, THREE.WebGLIndexedBufferRenderer = function(a, b, c) {
    function d(a) {
        h = a;
    }
    function e(c) {
        c.array instanceof Uint32Array && b.get("OES_element_index_uint") ? (i = a.UNSIGNED_INT, 
        j = 4) : (i = a.UNSIGNED_SHORT, j = 2);
    }
    function f(b, d) {
        a.drawElements(h, d, i, b * j), c.calls++, c.vertices += d, h === a.TRIANGLES && (c.faces += d / 3);
    }
    function g(d, e, f) {
        var g = b.get("ANGLE_instanced_arrays");
        return null === g ? void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.") : (g.drawElementsInstancedANGLE(h, f, i, e * j, d.maxInstancedCount), 
        c.calls++, c.vertices += f * d.maxInstancedCount, void (h === a.TRIANGLES && (c.faces += d.maxInstancedCount * f / 3)));
    }
    var h, i, j;
    this.setMode = d, this.setIndex = e, this.render = f, this.renderInstances = g;
}, THREE.WebGLExtensions = function(a) {
    var b = {};
    this.get = function(c) {
        if (void 0 !== b[c]) return b[c];
        var d;
        switch (c) {
          case "EXT_texture_filter_anisotropic":
            d = a.getExtension("EXT_texture_filter_anisotropic") || a.getExtension("MOZ_EXT_texture_filter_anisotropic") || a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
            break;

          case "WEBGL_compressed_texture_s3tc":
            d = a.getExtension("WEBGL_compressed_texture_s3tc") || a.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
            break;

          case "WEBGL_compressed_texture_pvrtc":
            d = a.getExtension("WEBGL_compressed_texture_pvrtc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
            break;

          case "WEBGL_compressed_texture_etc1":
            d = a.getExtension("WEBGL_compressed_texture_etc1");
            break;

          default:
            d = a.getExtension(c);
        }
        return null === d && console.warn("THREE.WebGLRenderer: " + c + " extension not supported."), 
        b[c] = d, d;
    };
}, THREE.WebGLCapabilities = function(a, b, c) {
    function d(b) {
        if ("highp" === b) {
            if (a.getShaderPrecisionFormat(a.VERTEX_SHADER, a.HIGH_FLOAT).precision > 0 && a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.HIGH_FLOAT).precision > 0) return "highp";
            b = "mediump";
        }
        return "mediump" === b && a.getShaderPrecisionFormat(a.VERTEX_SHADER, a.MEDIUM_FLOAT).precision > 0 && a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp";
    }
    this.getMaxPrecision = d, this.precision = void 0 !== c.precision ? c.precision : "highp", 
    this.logarithmicDepthBuffer = void 0 !== c.logarithmicDepthBuffer ? c.logarithmicDepthBuffer : !1, 
    this.maxTextures = a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS), this.maxVertexTextures = a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS), 
    this.maxTextureSize = a.getParameter(a.MAX_TEXTURE_SIZE), this.maxCubemapSize = a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE), 
    this.maxAttributes = a.getParameter(a.MAX_VERTEX_ATTRIBS), this.maxVertexUniforms = a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS), 
    this.maxVaryings = a.getParameter(a.MAX_VARYING_VECTORS), this.maxFragmentUniforms = a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS), 
    this.vertexTextures = this.maxVertexTextures > 0, this.floatFragmentTextures = !!b.get("OES_texture_float"), 
    this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;
    var e = d(this.precision);
    e !== this.precision && (console.warn("THREE.WebGLRenderer:", this.precision, "not supported, using", e, "instead."), 
    this.precision = e), this.logarithmicDepthBuffer && (this.logarithmicDepthBuffer = !!b.get("EXT_frag_depth"));
}, THREE.WebGLGeometries = function(a, b, c) {
    function d(a) {
        var b = a.geometry;
        if (void 0 !== j[b.id]) return j[b.id];
        b.addEventListener("dispose", e);
        var d;
        return b instanceof THREE.BufferGeometry ? d = b : b instanceof THREE.Geometry && (void 0 === b._bufferGeometry && (b._bufferGeometry = new THREE.BufferGeometry().setFromObject(a)), 
        d = b._bufferGeometry), j[b.id] = d, c.memory.geometries++, d;
    }
    function e(a) {
        var d = a.target, f = j[d.id];
        null !== f.index && g(f.index), h(f.attributes), d.removeEventListener("dispose", e), 
        delete j[d.id];
        var i = b.get(d);
        i.wireframe && g(i.wireframe), b["delete"](d);
        var k = b.get(f);
        k.wireframe && g(k.wireframe), b["delete"](f), c.memory.geometries--;
    }
    function f(a) {
        return a instanceof THREE.InterleavedBufferAttribute ? b.get(a.data).__webglBuffer : b.get(a).__webglBuffer;
    }
    function g(b) {
        var c = f(b);
        void 0 !== c && (a.deleteBuffer(c), i(b));
    }
    function h(a) {
        for (var b in a) g(a[b]);
    }
    function i(a) {
        a instanceof THREE.InterleavedBufferAttribute ? b["delete"](a.data) : b["delete"](a);
    }
    var j = {};
    this.get = d;
}, THREE.WebGLLights = function() {
    var a = {};
    this.get = function(b) {
        if (void 0 !== a[b.id]) return a[b.id];
        var c;
        switch (b.type) {
          case "DirectionalLight":
            c = {
                direction: new THREE.Vector3(),
                color: new THREE.Color(),
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new THREE.Vector2()
            };
            break;

          case "SpotLight":
            c = {
                position: new THREE.Vector3(),
                direction: new THREE.Vector3(),
                color: new THREE.Color(),
                distance: 0,
                coneCos: 0,
                penumbraCos: 0,
                decay: 0,
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new THREE.Vector2()
            };
            break;

          case "PointLight":
            c = {
                position: new THREE.Vector3(),
                color: new THREE.Color(),
                distance: 0,
                decay: 0,
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new THREE.Vector2()
            };
            break;

          case "HemisphereLight":
            c = {
                direction: new THREE.Vector3(),
                skyColor: new THREE.Color(),
                groundColor: new THREE.Color()
            };
        }
        return a[b.id] = c, c;
    };
}, THREE.WebGLObjects = function(a, b, c) {
    function d(b) {
        var c = k.get(b);
        b.geometry instanceof THREE.Geometry && c.updateFromObject(b);
        var d = c.index, f = c.attributes;
        null !== d && e(d, a.ELEMENT_ARRAY_BUFFER);
        for (var g in f) e(f[g], a.ARRAY_BUFFER);
        var h = c.morphAttributes;
        for (var g in h) for (var i = h[g], j = 0, l = i.length; l > j; j++) e(i[j], a.ARRAY_BUFFER);
        return c;
    }
    function e(a, c) {
        var d = a instanceof THREE.InterleavedBufferAttribute ? a.data : a, e = b.get(d);
        void 0 === e.__webglBuffer ? f(e, d, c) : e.version !== d.version && g(e, d, c);
    }
    function f(b, c, d) {
        b.__webglBuffer = a.createBuffer(), a.bindBuffer(d, b.__webglBuffer);
        var e = c.dynamic ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
        a.bufferData(d, c.array, e), b.version = c.version;
    }
    function g(b, c, d) {
        a.bindBuffer(d, b.__webglBuffer), c.dynamic === !1 || -1 === c.updateRange.count ? a.bufferSubData(d, 0, c.array) : 0 === c.updateRange.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (a.bufferSubData(d, c.updateRange.offset * c.array.BYTES_PER_ELEMENT, c.array.subarray(c.updateRange.offset, c.updateRange.offset + c.updateRange.count)), 
        c.updateRange.count = 0), b.version = c.version;
    }
    function h(a) {
        return a instanceof THREE.InterleavedBufferAttribute ? b.get(a.data).__webglBuffer : b.get(a).__webglBuffer;
    }
    function i(c) {
        var d = b.get(c);
        if (void 0 !== d.wireframe) return d.wireframe;
        var f = [], g = c.index, h = c.attributes, i = h.position;
        if (null !== g) for (var k = {}, l = g.array, m = 0, n = l.length; n > m; m += 3) {
            var o = l[m + 0], p = l[m + 1], q = l[m + 2];
            j(k, o, p) && f.push(o, p), j(k, p, q) && f.push(p, q), j(k, q, o) && f.push(q, o);
        } else for (var l = h.position.array, m = 0, n = l.length / 3 - 1; n > m; m += 3) {
            var o = m + 0, p = m + 1, q = m + 2;
            f.push(o, p, p, q, q, o);
        }
        var r = i.count > 65535 ? Uint32Array : Uint16Array, s = new THREE.BufferAttribute(new r(f), 1);
        return e(s, a.ELEMENT_ARRAY_BUFFER), d.wireframe = s, s;
    }
    function j(a, b, c) {
        if (b > c) {
            var d = b;
            b = c, c = d;
        }
        var e = a[b];
        return void 0 === e ? (a[b] = [ c ], !0) : -1 === e.indexOf(c) ? (e.push(c), !0) : !1;
    }
    var k = new THREE.WebGLGeometries(a, b, c);
    this.getAttributeBuffer = h, this.getWireframeAttribute = i, this.update = d;
}, THREE.WebGLProgram = function() {
    function a(a) {
        switch (a) {
          case THREE.LinearEncoding:
            return [ "Linear", "( value )" ];

          case THREE.sRGBEncoding:
            return [ "sRGB", "( value )" ];

          case THREE.RGBEEncoding:
            return [ "RGBE", "( value )" ];

          case THREE.RGBM7Encoding:
            return [ "RGBM", "( value, 7.0 )" ];

          case THREE.RGBM16Encoding:
            return [ "RGBM", "( value, 16.0 )" ];

          case THREE.RGBDEncoding:
            return [ "RGBD", "( value, 256.0 )" ];

          case THREE.GammaEncoding:
            return [ "Gamma", "( value, float( GAMMA_FACTOR ) )" ];

          default:
            throw new Error("unsupported encoding: " + a);
        }
    }
    function b(b, c) {
        var d = a(c);
        return "vec4 " + b + "( vec4 value ) { return " + d[0] + "ToLinear" + d[1] + "; }";
    }
    function c(b, c) {
        var d = a(c);
        return "vec4 " + b + "( vec4 value ) { return LinearTo" + d[0] + d[1] + "; }";
    }
    function d(a, b) {
        var c;
        switch (b) {
          case THREE.LinearToneMapping:
            c = "Linear";
            break;

          case THREE.ReinhardToneMapping:
            c = "Reinhard";
            break;

          case THREE.Uncharted2ToneMapping:
            c = "Uncharted2";
            break;

          case THREE.CineonToneMapping:
            c = "OptimizedCineon";
            break;

          default:
            throw new Error("unsupported toneMapping: " + b);
        }
        return "vec3 " + a + "( vec3 color ) { return " + c + "ToneMapping( color ); }";
    }
    function e(a, b, c) {
        a = a || {};
        var d = [ a.derivatives || b.envMapCubeUV || b.bumpMap || b.normalMap || b.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (a.fragDepth || b.logarithmicDepthBuffer) && c.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", a.drawBuffers && c.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (a.shaderTextureLOD || b.envMap) && c.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : "" ];
        return d.filter(i).join("\n");
    }
    function f(a) {
        var b = [];
        for (var c in a) {
            var d = a[c];
            d !== !1 && b.push("#define " + c + " " + d);
        }
        return b.join("\n");
    }
    function g(a, b, c) {
        for (var d = {}, e = a.getProgramParameter(b, a.ACTIVE_UNIFORMS), f = 0; e > f; f++) {
            var g = a.getActiveUniform(b, f), h = g.name, i = a.getUniformLocation(b, h), j = n.exec(h);
            if (j) {
                var k = j[1], l = j[2], m = d[k];
                m || (m = d[k] = {}), m[l] = i;
            } else if (j = o.exec(h)) {
                var q = j[1], r = j[2], s = j[3], t = d[q];
                t || (t = d[q] = []);
                var u = t[r];
                u || (u = t[r] = {}), u[s] = i;
            } else if (j = p.exec(h)) {
                var q = j[1];
                d[q] = i;
            } else d[h] = i;
        }
        return d;
    }
    function h(a, b, c) {
        for (var d = {}, e = a.getProgramParameter(b, a.ACTIVE_ATTRIBUTES), f = 0; e > f; f++) {
            var g = a.getActiveAttrib(b, f), h = g.name;
            d[h] = a.getAttribLocation(b, h);
        }
        return d;
    }
    function i(a) {
        return "" !== a;
    }
    function j(a, b) {
        return a.replace(/NUM_DIR_LIGHTS/g, b.numDirLights).replace(/NUM_SPOT_LIGHTS/g, b.numSpotLights).replace(/NUM_POINT_LIGHTS/g, b.numPointLights).replace(/NUM_HEMI_LIGHTS/g, b.numHemiLights);
    }
    function k(a) {
        function b(a, b) {
            var c = THREE.ShaderChunk[b];
            if (void 0 === c) throw new Error("Can not resolve #include <" + b + ">");
            return k(c);
        }
        var c = /#include +<([\w\d.]+)>/g;
        return a.replace(c, b);
    }
    function l(a) {
        function b(a, b, c, d) {
            for (var e = "", f = parseInt(b); f < parseInt(c); f++) e += d.replace(/\[ i \]/g, "[ " + f + " ]");
            return e;
        }
        var c = /for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;
        return a.replace(c, b);
    }
    var m = 0, n = /^([\w\d_]+)\.([\w\d_]+)$/, o = /^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/, p = /^([\w\d_]+)\[0\]$/;
    return function(a, n, o, p) {
        var q = a.context, r = o.extensions, s = o.defines, t = o.__webglShader.vertexShader, u = o.__webglShader.fragmentShader, v = "SHADOWMAP_TYPE_BASIC";
        p.shadowMapType === THREE.PCFShadowMap ? v = "SHADOWMAP_TYPE_PCF" : p.shadowMapType === THREE.PCFSoftShadowMap && (v = "SHADOWMAP_TYPE_PCF_SOFT");
        var w = "ENVMAP_TYPE_CUBE", x = "ENVMAP_MODE_REFLECTION", y = "ENVMAP_BLENDING_MULTIPLY";
        if (p.envMap) {
            switch (o.envMap.mapping) {
              case THREE.CubeReflectionMapping:
              case THREE.CubeRefractionMapping:
                w = "ENVMAP_TYPE_CUBE";
                break;

              case THREE.CubeUVReflectionMapping:
              case THREE.CubeUVRefractionMapping:
                w = "ENVMAP_TYPE_CUBE_UV";
                break;

              case THREE.EquirectangularReflectionMapping:
              case THREE.EquirectangularRefractionMapping:
                w = "ENVMAP_TYPE_EQUIREC";
                break;

              case THREE.SphericalReflectionMapping:
                w = "ENVMAP_TYPE_SPHERE";
            }
            switch (o.envMap.mapping) {
              case THREE.CubeRefractionMapping:
              case THREE.EquirectangularRefractionMapping:
                x = "ENVMAP_MODE_REFRACTION";
            }
            switch (o.combine) {
              case THREE.MultiplyOperation:
                y = "ENVMAP_BLENDING_MULTIPLY";
                break;

              case THREE.MixOperation:
                y = "ENVMAP_BLENDING_MIX";
                break;

              case THREE.AddOperation:
                y = "ENVMAP_BLENDING_ADD";
            }
        }
        var z, A, B = a.gammaFactor > 0 ? a.gammaFactor : 1, C = e(r, p, a.extensions), D = f(s), E = q.createProgram();
        o instanceof THREE.RawShaderMaterial ? (z = "", A = "") : (z = [ "precision " + p.precision + " float;", "precision " + p.precision + " int;", "#define SHADER_NAME " + o.__webglShader.name, D, p.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + B, "#define MAX_BONES " + p.maxBones, p.map ? "#define USE_MAP" : "", p.envMap ? "#define USE_ENVMAP" : "", p.envMap ? "#define " + x : "", p.lightMap ? "#define USE_LIGHTMAP" : "", p.aoMap ? "#define USE_AOMAP" : "", p.emissiveMap ? "#define USE_EMISSIVEMAP" : "", p.bumpMap ? "#define USE_BUMPMAP" : "", p.normalMap ? "#define USE_NORMALMAP" : "", p.displacementMap && p.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", p.specularMap ? "#define USE_SPECULARMAP" : "", p.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", p.metalnessMap ? "#define USE_METALNESSMAP" : "", p.alphaMap ? "#define USE_ALPHAMAP" : "", p.vertexColors ? "#define USE_COLOR" : "", p.flatShading ? "#define FLAT_SHADED" : "", p.skinning ? "#define USE_SKINNING" : "", p.useVertexTexture ? "#define BONE_TEXTURE" : "", p.morphTargets ? "#define USE_MORPHTARGETS" : "", p.morphNormals && p.flatShading === !1 ? "#define USE_MORPHNORMALS" : "", p.doubleSided ? "#define DOUBLE_SIDED" : "", p.flipSided ? "#define FLIP_SIDED" : "", p.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", p.shadowMapEnabled ? "#define " + v : "", p.pointLightShadows > 0 ? "#define POINT_LIGHT_SHADOWS" : "", p.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", p.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", p.logarithmicDepthBuffer && a.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", "\n" ].filter(i).join("\n"), 
        A = [ C, "precision " + p.precision + " float;", "precision " + p.precision + " int;", "#define SHADER_NAME " + o.__webglShader.name, D, p.alphaTest ? "#define ALPHATEST " + p.alphaTest : "", "#define GAMMA_FACTOR " + B, p.useFog && p.fog ? "#define USE_FOG" : "", p.useFog && p.fogExp ? "#define FOG_EXP2" : "", p.map ? "#define USE_MAP" : "", p.envMap ? "#define USE_ENVMAP" : "", p.envMap ? "#define " + w : "", p.envMap ? "#define " + x : "", p.envMap ? "#define " + y : "", p.lightMap ? "#define USE_LIGHTMAP" : "", p.aoMap ? "#define USE_AOMAP" : "", p.emissiveMap ? "#define USE_EMISSIVEMAP" : "", p.bumpMap ? "#define USE_BUMPMAP" : "", p.normalMap ? "#define USE_NORMALMAP" : "", p.specularMap ? "#define USE_SPECULARMAP" : "", p.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", p.metalnessMap ? "#define USE_METALNESSMAP" : "", p.alphaMap ? "#define USE_ALPHAMAP" : "", p.vertexColors ? "#define USE_COLOR" : "", p.flatShading ? "#define FLAT_SHADED" : "", p.doubleSided ? "#define DOUBLE_SIDED" : "", p.flipSided ? "#define FLIP_SIDED" : "", p.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", p.shadowMapEnabled ? "#define " + v : "", p.pointLightShadows > 0 ? "#define POINT_LIGHT_SHADOWS" : "", p.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", p.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", p.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", p.logarithmicDepthBuffer && a.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", p.envMap && a.extensions.get("EXT_shader_texture_lod") ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", p.toneMapping !== THREE.NoToneMapping ? "#define TONE_MAPPING" : "", p.toneMapping !== THREE.NoToneMapping ? THREE.ShaderChunk.tonemapping_pars_fragment : "", p.toneMapping !== THREE.NoToneMapping ? d("toneMapping", p.toneMapping) : "", p.outputEncoding || p.mapEncoding || p.envMapEncoding || p.emissiveMapEncoding ? THREE.ShaderChunk.encodings_pars_fragment : "", p.mapEncoding ? b("mapTexelToLinear", p.mapEncoding) : "", p.envMapEncoding ? b("envMapTexelToLinear", p.envMapEncoding) : "", p.emissiveMapEncoding ? b("emissiveMapTexelToLinear", p.emissiveMapEncoding) : "", p.outputEncoding ? c("linearToOutputTexel", p.outputEncoding) : "", "\n" ].filter(i).join("\n")), 
        t = k(t, p), t = j(t, p), u = k(u, p), u = j(u, p), o instanceof THREE.ShaderMaterial == !1 && (t = l(t), 
        u = l(u));
        var F = z + t, G = A + u, H = THREE.WebGLShader(q, q.VERTEX_SHADER, F), I = THREE.WebGLShader(q, q.FRAGMENT_SHADER, G);
        q.attachShader(E, H), q.attachShader(E, I), void 0 !== o.index0AttributeName ? q.bindAttribLocation(E, 0, o.index0AttributeName) : p.morphTargets === !0 && q.bindAttribLocation(E, 0, "position"), 
        q.linkProgram(E);
        var J = q.getProgramInfoLog(E), K = q.getShaderInfoLog(H), L = q.getShaderInfoLog(I), M = !0, N = !0;
        q.getProgramParameter(E, q.LINK_STATUS) === !1 ? (M = !1, console.error("THREE.WebGLProgram: shader error: ", q.getError(), "gl.VALIDATE_STATUS", q.getProgramParameter(E, q.VALIDATE_STATUS), "gl.getProgramInfoLog", J, K, L)) : "" !== J ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", J) : "" !== K && "" !== L || (N = !1), 
        N && (this.diagnostics = {
            runnable: M,
            material: o,
            programLog: J,
            vertexShader: {
                log: K,
                prefix: z
            },
            fragmentShader: {
                log: L,
                prefix: A
            }
        }), q.deleteShader(H), q.deleteShader(I);
        var O;
        this.getUniforms = function() {
            return void 0 === O && (O = g(q, E)), O;
        };
        var P;
        return this.getAttributes = function() {
            return void 0 === P && (P = h(q, E)), P;
        }, this.destroy = function() {
            q.deleteProgram(E), this.program = void 0;
        }, Object.defineProperties(this, {
            uniforms: {
                get: function() {
                    return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."), this.getUniforms();
                }
            },
            attributes: {
                get: function() {
                    return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."), 
                    this.getAttributes();
                }
            }
        }), this.id = m++, this.code = n, this.usedTimes = 1, this.program = E, this.vertexShader = H, 
        this.fragmentShader = I, this;
    };
}(), THREE.WebGLPrograms = function(a, b) {
    function c(a) {
        if (b.floatVertexTextures && a && a.skeleton && a.skeleton.useVertexTexture) return 1024;
        var c = b.maxVertexUniforms, d = Math.floor((c - 20) / 4), e = d;
        return void 0 !== a && a instanceof THREE.SkinnedMesh && (e = Math.min(a.skeleton.bones.length, e), 
        e < a.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + a.skeleton.bones.length + ", this GPU supports just " + e + " (try OpenGL instead of ANGLE)")), 
        e;
    }
    function d(a, b) {
        var c;
        return a ? a instanceof THREE.Texture ? c = a.encoding : a instanceof THREE.WebGLRenderTarget && (c = a.texture.encoding) : c = THREE.LinearEncoding, 
        c === THREE.LinearEncoding && b && (c = THREE.GammaEncoding), c;
    }
    var e = [], f = {
        MeshDepthMaterial: "depth",
        MeshNormalMaterial: "normal",
        MeshBasicMaterial: "basic",
        MeshLambertMaterial: "lambert",
        MeshPhongMaterial: "phong",
        MeshStandardMaterial: "standard",
        LineBasicMaterial: "basic",
        LineDashedMaterial: "dashed",
        PointsMaterial: "points"
    }, g = [ "precision", "supportsVertexTextures", "map", "mapEncoding", "envMap", "envMapMode", "envMapEncoding", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "alphaMap", "combine", "vertexColors", "fog", "useFog", "fogExp", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "shadowMapEnabled", "pointLightShadows", "toneMapping", "physicallyCorrectLights", "shadowMapType", "alphaTest", "doubleSided", "flipSided" ];
    this.getParameters = function(e, g, h, i) {
        var j = f[e.type], k = c(i), l = a.getPrecision();
        null !== e.precision && (l = b.getMaxPrecision(e.precision), l !== e.precision && console.warn("THREE.WebGLProgram.getParameters:", e.precision, "not supported, using", l, "instead."));
        var m = {
            shaderID: j,
            precision: l,
            supportsVertexTextures: b.vertexTextures,
            outputEncoding: d(a.getCurrentRenderTarget(), a.gammaOutput),
            map: !!e.map,
            mapEncoding: d(e.map, a.gammaInput),
            envMap: !!e.envMap,
            envMapMode: e.envMap && e.envMap.mapping,
            envMapEncoding: d(e.envMap, a.gammaInput),
            envMapCubeUV: !!e.envMap && (e.envMap.mapping === THREE.CubeUVReflectionMapping || e.envMap.mapping === THREE.CubeUVRefractionMapping),
            lightMap: !!e.lightMap,
            aoMap: !!e.aoMap,
            emissiveMap: !!e.emissiveMap,
            emissiveMapEncoding: d(e.emissiveMap, a.gammaInput),
            bumpMap: !!e.bumpMap,
            normalMap: !!e.normalMap,
            displacementMap: !!e.displacementMap,
            roughnessMap: !!e.roughnessMap,
            metalnessMap: !!e.metalnessMap,
            specularMap: !!e.specularMap,
            alphaMap: !!e.alphaMap,
            combine: e.combine,
            vertexColors: e.vertexColors,
            fog: h,
            useFog: e.fog,
            fogExp: h instanceof THREE.FogExp2,
            flatShading: e.shading === THREE.FlatShading,
            sizeAttenuation: e.sizeAttenuation,
            logarithmicDepthBuffer: b.logarithmicDepthBuffer,
            skinning: e.skinning,
            maxBones: k,
            useVertexTexture: b.floatVertexTextures && i && i.skeleton && i.skeleton.useVertexTexture,
            morphTargets: e.morphTargets,
            morphNormals: e.morphNormals,
            maxMorphTargets: a.maxMorphTargets,
            maxMorphNormals: a.maxMorphNormals,
            numDirLights: g.directional.length,
            numPointLights: g.point.length,
            numSpotLights: g.spot.length,
            numHemiLights: g.hemi.length,
            pointLightShadows: g.shadowsPointLight,
            shadowMapEnabled: a.shadowMap.enabled && i.receiveShadow && g.shadows.length > 0,
            shadowMapType: a.shadowMap.type,
            toneMapping: a.toneMapping,
            physicallyCorrectLights: a.physicallyCorrectLights,
            premultipliedAlpha: e.premultipliedAlpha,
            alphaTest: e.alphaTest,
            doubleSided: e.side === THREE.DoubleSide,
            flipSided: e.side === THREE.BackSide
        };
        return m;
    }, this.getProgramCode = function(a, b) {
        var c = [];
        if (b.shaderID ? c.push(b.shaderID) : (c.push(a.fragmentShader), c.push(a.vertexShader)), 
        void 0 !== a.defines) for (var d in a.defines) c.push(d), c.push(a.defines[d]);
        for (var e = 0; e < g.length; e++) {
            var f = g[e];
            c.push(f), c.push(b[f]);
        }
        return c.join();
    }, this.acquireProgram = function(b, c, d) {
        for (var f, g = 0, h = e.length; h > g; g++) {
            var i = e[g];
            if (i.code === d) {
                f = i, ++f.usedTimes;
                break;
            }
        }
        return void 0 === f && (f = new THREE.WebGLProgram(a, d, b, c), e.push(f)), f;
    }, this.releaseProgram = function(a) {
        if (0 === --a.usedTimes) {
            var b = e.indexOf(a);
            e[b] = e[e.length - 1], e.pop(), a.destroy();
        }
    }, this.programs = e;
}, THREE.WebGLProperties = function() {
    var a = {};
    this.get = function(b) {
        var c = b.uuid, d = a[c];
        return void 0 === d && (d = {}, a[c] = d), d;
    }, this["delete"] = function(b) {
        delete a[b.uuid];
    }, this.clear = function() {
        a = {};
    };
}, THREE.WebGLShader = function() {
    function a(a) {
        for (var b = a.split("\n"), c = 0; c < b.length; c++) b[c] = c + 1 + ": " + b[c];
        return b.join("\n");
    }
    return function(b, c, d) {
        var e = b.createShader(c);
        return b.shaderSource(e, d), b.compileShader(e), b.getShaderParameter(e, b.COMPILE_STATUS) === !1 && console.error("THREE.WebGLShader: Shader couldn't compile."), 
        "" !== b.getShaderInfoLog(e) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", c === b.VERTEX_SHADER ? "vertex" : "fragment", b.getShaderInfoLog(e), a(d)), 
        e;
    };
}(), THREE.WebGLShadowMap = function(a, b, c) {
    function d(a, b, c, d) {
        var e = a.geometry, f = null, g = q, h = a.customDepthMaterial;
        if (c && (g = r, h = a.customDistanceMaterial), h) f = h; else {
            var i = void 0 !== e.morphTargets && e.morphTargets.length > 0 && b.morphTargets, j = a instanceof THREE.SkinnedMesh && b.skinning, k = 0;
            i && (k |= n), j && (k |= o), f = g[k];
        }
        return f.visible = b.visible, f.wireframe = b.wireframe, f.wireframeLinewidth = b.wireframeLinewidth, 
        c && void 0 !== f.uniforms.lightPos && f.uniforms.lightPos.value.copy(d), f;
    }
    function e(a, b, c) {
        if (a.visible !== !1) {
            if (a.layers.test(b.layers) && (a instanceof THREE.Mesh || a instanceof THREE.Line || a instanceof THREE.Points) && a.castShadow && (a.frustumCulled === !1 || h.intersectsObject(a) === !0)) {
                var d = a.material;
                d.visible === !0 && (a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse, a.matrixWorld), 
                m.push(a));
            }
            for (var f = a.children, g = 0, i = f.length; i > g; g++) e(f[g], b, c);
        }
    }
    for (var f = a.context, g = a.state, h = new THREE.Frustum(), i = new THREE.Matrix4(), j = new THREE.Vector2(), k = new THREE.Vector3(), l = new THREE.Vector3(), m = [], n = 1, o = 2, p = (n | o) + 1, q = new Array(p), r = new Array(p), s = [ new THREE.Vector3(1, 0, 0), new THREE.Vector3(-1, 0, 0), new THREE.Vector3(0, 0, 1), new THREE.Vector3(0, 0, -1), new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, -1, 0) ], t = [ new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, 1, 0), new THREE.Vector3(0, 0, 1), new THREE.Vector3(0, 0, -1) ], u = [ new THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4() ], v = THREE.ShaderLib.depthRGBA, w = THREE.UniformsUtils.clone(v.uniforms), x = THREE.ShaderLib.distanceRGBA, y = THREE.UniformsUtils.clone(x.uniforms), z = 0; z !== p; ++z) {
        var A = 0 !== (z & n), B = 0 !== (z & o), C = new THREE.ShaderMaterial({
            uniforms: w,
            vertexShader: v.vertexShader,
            fragmentShader: v.fragmentShader,
            morphTargets: A,
            skinning: B
        });
        q[z] = C;
        var D = new THREE.ShaderMaterial({
            defines: {
                USE_SHADOWMAP: ""
            },
            uniforms: y,
            vertexShader: x.vertexShader,
            fragmentShader: x.fragmentShader,
            morphTargets: A,
            skinning: B
        });
        r[z] = D;
    }
    var E = this;
    this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = THREE.PCFShadowMap, 
    this.cullFace = THREE.CullFaceFront, this.render = function(n, o) {
        var p, q, r = b.shadows;
        if (0 !== r.length && E.enabled !== !1 && (E.autoUpdate !== !1 || E.needsUpdate !== !1)) {
            g.clearColor(1, 1, 1, 1), g.disable(f.BLEND), g.enable(f.CULL_FACE), f.frontFace(f.CCW), 
            f.cullFace(E.cullFace === THREE.CullFaceFront ? f.FRONT : f.BACK), g.setDepthTest(!0), 
            g.setScissorTest(!1);
            for (var v = 0, w = r.length; w > v; v++) {
                var x = r[v], y = x.shadow, z = y.camera;
                if (j.copy(y.mapSize), x instanceof THREE.PointLight) {
                    p = 6, q = !0;
                    var A = j.x, B = j.y;
                    u[0].set(2 * A, B, A, B), u[1].set(0, B, A, B), u[2].set(3 * A, B, A, B), u[3].set(A, B, A, B), 
                    u[4].set(3 * A, 0, A, B), u[5].set(A, 0, A, B), j.x *= 4, j.y *= 2;
                } else p = 1, q = !1;
                if (null === y.map) {
                    var C = {
                        minFilter: THREE.NearestFilter,
                        magFilter: THREE.NearestFilter,
                        format: THREE.RGBAFormat
                    };
                    y.map = new THREE.WebGLRenderTarget(j.x, j.y, C), x instanceof THREE.SpotLight && (z.aspect = j.x / j.y), 
                    z.updateProjectionMatrix();
                }
                var D = y.map, F = y.matrix;
                l.setFromMatrixPosition(x.matrixWorld), z.position.copy(l), a.setRenderTarget(D), 
                a.clear();
                for (var G = 0; p > G; G++) {
                    if (q) {
                        k.copy(z.position), k.add(s[G]), z.up.copy(t[G]), z.lookAt(k);
                        var H = u[G];
                        g.viewport(H);
                    } else k.setFromMatrixPosition(x.target.matrixWorld), z.lookAt(k);
                    z.updateMatrixWorld(), z.matrixWorldInverse.getInverse(z.matrixWorld), F.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), 
                    F.multiply(z.projectionMatrix), F.multiply(z.matrixWorldInverse), i.multiplyMatrices(z.projectionMatrix, z.matrixWorldInverse), 
                    h.setFromMatrix(i), m.length = 0, e(n, o, z);
                    for (var I = 0, J = m.length; J > I; I++) {
                        var K = m[I], L = c.update(K), M = K.material;
                        if (M instanceof THREE.MultiMaterial) for (var N = L.groups, O = M.materials, P = 0, Q = N.length; Q > P; P++) {
                            var R = N[P], S = O[R.materialIndex];
                            if (S.visible === !0) {
                                var T = d(K, S, q, l);
                                a.renderBufferDirect(z, null, L, T, K, R);
                            }
                        } else {
                            var T = d(K, M, q, l);
                            a.renderBufferDirect(z, null, L, T, K, null);
                        }
                    }
                }
            }
            var U = a.getClearColor(), V = a.getClearAlpha();
            a.setClearColor(U, V), g.enable(f.BLEND), E.cullFace === THREE.CullFaceFront && f.cullFace(f.BACK), 
            E.needsUpdate = !1;
        }
    };
}, THREE.WebGLState = function(a, b, c) {
    var d = this, e = new THREE.Vector4(), f = new Uint8Array(16), g = new Uint8Array(16), h = new Uint8Array(16), i = {}, j = null, k = null, l = null, m = null, n = null, o = null, p = null, q = null, r = !1, s = null, t = null, u = null, v = null, w = null, x = null, y = null, z = null, A = null, B = null, C = null, D = null, E = null, F = null, G = null, H = a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS), I = void 0, J = {}, K = new THREE.Vector4(), L = null, M = null, N = new THREE.Vector4(), O = new THREE.Vector4(), P = a.createTexture();
    a.bindTexture(a.TEXTURE_2D, P), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR), 
    a.texImage2D(a.TEXTURE_2D, 0, a.RGB, 1, 1, 0, a.RGB, a.UNSIGNED_BYTE, new Uint8Array(3)), 
    this.init = function() {
        this.clearColor(0, 0, 0, 1), this.clearDepth(1), this.clearStencil(0), this.enable(a.DEPTH_TEST), 
        a.depthFunc(a.LEQUAL), a.frontFace(a.CCW), a.cullFace(a.BACK), this.enable(a.CULL_FACE), 
        this.enable(a.BLEND), a.blendEquation(a.FUNC_ADD), a.blendFunc(a.SRC_ALPHA, a.ONE_MINUS_SRC_ALPHA);
    }, this.initAttributes = function() {
        for (var a = 0, b = f.length; b > a; a++) f[a] = 0;
    }, this.enableAttribute = function(c) {
        if (f[c] = 1, 0 === g[c] && (a.enableVertexAttribArray(c), g[c] = 1), 0 !== h[c]) {
            var d = b.get("ANGLE_instanced_arrays");
            d.vertexAttribDivisorANGLE(c, 0), h[c] = 0;
        }
    }, this.enableAttributeAndDivisor = function(b, c, d) {
        f[b] = 1, 0 === g[b] && (a.enableVertexAttribArray(b), g[b] = 1), h[b] !== c && (d.vertexAttribDivisorANGLE(b, c), 
        h[b] = c);
    }, this.disableUnusedAttributes = function() {
        for (var b = 0, c = g.length; c > b; b++) g[b] !== f[b] && (a.disableVertexAttribArray(b), 
        g[b] = 0);
    }, this.enable = function(b) {
        i[b] !== !0 && (a.enable(b), i[b] = !0);
    }, this.disable = function(b) {
        i[b] !== !1 && (a.disable(b), i[b] = !1);
    }, this.getCompressedTextureFormats = function() {
        if (null === j && (j = [], b.get("WEBGL_compressed_texture_pvrtc") || b.get("WEBGL_compressed_texture_s3tc") || b.get("WEBGL_compressed_texture_etc1"))) for (var c = a.getParameter(a.COMPRESSED_TEXTURE_FORMATS), d = 0; d < c.length; d++) j.push(c[d]);
        return j;
    }, this.setBlending = function(b, d, e, f, g, h, i, j) {
        b === THREE.NoBlending ? this.disable(a.BLEND) : this.enable(a.BLEND), b === k && j === r || (b === THREE.AdditiveBlending ? j ? (a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD), 
        a.blendFuncSeparate(a.ONE, a.ONE, a.ONE, a.ONE)) : (a.blendEquation(a.FUNC_ADD), 
        a.blendFunc(a.SRC_ALPHA, a.ONE)) : b === THREE.SubtractiveBlending ? j ? (a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD), 
        a.blendFuncSeparate(a.ZERO, a.ZERO, a.ONE_MINUS_SRC_COLOR, a.ONE_MINUS_SRC_ALPHA)) : (a.blendEquation(a.FUNC_ADD), 
        a.blendFunc(a.ZERO, a.ONE_MINUS_SRC_COLOR)) : b === THREE.MultiplyBlending ? j ? (a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD), 
        a.blendFuncSeparate(a.ZERO, a.ZERO, a.SRC_COLOR, a.SRC_ALPHA)) : (a.blendEquation(a.FUNC_ADD), 
        a.blendFunc(a.ZERO, a.SRC_COLOR)) : j ? (a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD), 
        a.blendFuncSeparate(a.ONE, a.ONE_MINUS_SRC_ALPHA, a.ONE, a.ONE_MINUS_SRC_ALPHA)) : (a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD), 
        a.blendFuncSeparate(a.SRC_ALPHA, a.ONE_MINUS_SRC_ALPHA, a.ONE, a.ONE_MINUS_SRC_ALPHA)), 
        k = b, r = j), b === THREE.CustomBlending ? (g = g || d, h = h || e, i = i || f, 
        d === l && g === o || (a.blendEquationSeparate(c(d), c(g)), l = d, o = g), e === m && f === n && h === p && i === q || (a.blendFuncSeparate(c(e), c(f), c(h), c(i)), 
        m = e, n = f, p = h, q = i)) : (l = null, m = null, n = null, o = null, p = null, 
        q = null);
    }, this.setDepthFunc = function(b) {
        if (s !== b) {
            if (b) switch (b) {
              case THREE.NeverDepth:
                a.depthFunc(a.NEVER);
                break;

              case THREE.AlwaysDepth:
                a.depthFunc(a.ALWAYS);
                break;

              case THREE.LessDepth:
                a.depthFunc(a.LESS);
                break;

              case THREE.LessEqualDepth:
                a.depthFunc(a.LEQUAL);
                break;

              case THREE.EqualDepth:
                a.depthFunc(a.EQUAL);
                break;

              case THREE.GreaterEqualDepth:
                a.depthFunc(a.GEQUAL);
                break;

              case THREE.GreaterDepth:
                a.depthFunc(a.GREATER);
                break;

              case THREE.NotEqualDepth:
                a.depthFunc(a.NOTEQUAL);
                break;

              default:
                a.depthFunc(a.LEQUAL);
            } else a.depthFunc(a.LEQUAL);
            s = b;
        }
    }, this.setDepthTest = function(b) {
        b ? this.enable(a.DEPTH_TEST) : this.disable(a.DEPTH_TEST);
    }, this.setDepthWrite = function(b) {
        t !== b && (a.depthMask(b), t = b);
    }, this.setColorWrite = function(b) {
        u !== b && (a.colorMask(b, b, b, b), u = b);
    }, this.setStencilFunc = function(b, c, d) {
        w === b && x === c && y === d || (a.stencilFunc(b, c, d), w = b, x = c, y = d);
    }, this.setStencilOp = function(b, c, d) {
        z === b && A === c && B === d || (a.stencilOp(b, c, d), z = b, A = c, B = d);
    }, this.setStencilTest = function(b) {
        b ? this.enable(a.STENCIL_TEST) : this.disable(a.STENCIL_TEST);
    }, this.setStencilWrite = function(b) {
        v !== b && (a.stencilMask(b), v = b);
    }, this.setFlipSided = function(b) {
        C !== b && (b ? a.frontFace(a.CW) : a.frontFace(a.CCW), C = b);
    }, this.setLineWidth = function(b) {
        b !== D && (a.lineWidth(b), D = b);
    }, this.setPolygonOffset = function(b, c, d) {
        b ? this.enable(a.POLYGON_OFFSET_FILL) : this.disable(a.POLYGON_OFFSET_FILL), !b || E === c && F === d || (a.polygonOffset(c, d), 
        E = c, F = d);
    }, this.getScissorTest = function() {
        return G;
    }, this.setScissorTest = function(b) {
        G = b, b ? this.enable(a.SCISSOR_TEST) : this.disable(a.SCISSOR_TEST);
    }, this.activeTexture = function(b) {
        void 0 === b && (b = a.TEXTURE0 + H - 1), I !== b && (a.activeTexture(b), I = b);
    }, this.bindTexture = function(b, c) {
        void 0 === I && d.activeTexture();
        var e = J[I];
        void 0 === e && (e = {
            type: void 0,
            texture: void 0
        }, J[I] = e), e.type === b && e.texture === c || (a.bindTexture(b, c || P), e.type = b, 
        e.texture = c);
    }, this.compressedTexImage2D = function() {
        try {
            a.compressedTexImage2D.apply(a, arguments);
        } catch (b) {
            console.error(b);
        }
    }, this.texImage2D = function() {
        try {
            a.texImage2D.apply(a, arguments);
        } catch (b) {
            console.error(b);
        }
    }, this.clearColor = function(b, c, d, f) {
        e.set(b, c, d, f), K.equals(e) === !1 && (a.clearColor(b, c, d, f), K.copy(e));
    }, this.clearDepth = function(b) {
        L !== b && (a.clearDepth(b), L = b);
    }, this.clearStencil = function(b) {
        M !== b && (a.clearStencil(b), M = b);
    }, this.scissor = function(b) {
        N.equals(b) === !1 && (a.scissor(b.x, b.y, b.z, b.w), N.copy(b));
    }, this.viewport = function(b) {
        O.equals(b) === !1 && (a.viewport(b.x, b.y, b.z, b.w), O.copy(b));
    }, this.reset = function() {
        for (var b = 0; b < g.length; b++) 1 === g[b] && (a.disableVertexAttribArray(b), 
        g[b] = 0);
        i = {}, j = null, I = void 0, J = {}, k = null, u = null, t = null, v = null, C = null;
    };
}, THREE.LensFlarePlugin = function(a, b) {
    function c() {
        var a = new Float32Array([ -1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1 ]), b = new Uint16Array([ 0, 1, 2, 0, 2, 3 ]);
        e = m.createBuffer(), f = m.createBuffer(), m.bindBuffer(m.ARRAY_BUFFER, e), m.bufferData(m.ARRAY_BUFFER, a, m.STATIC_DRAW), 
        m.bindBuffer(m.ELEMENT_ARRAY_BUFFER, f), m.bufferData(m.ELEMENT_ARRAY_BUFFER, b, m.STATIC_DRAW), 
        k = m.createTexture(), l = m.createTexture(), n.bindTexture(m.TEXTURE_2D, k), m.texImage2D(m.TEXTURE_2D, 0, m.RGB, 16, 16, 0, m.RGB, m.UNSIGNED_BYTE, null), 
        m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_S, m.CLAMP_TO_EDGE), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_T, m.CLAMP_TO_EDGE), 
        m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, m.NEAREST), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, m.NEAREST), 
        n.bindTexture(m.TEXTURE_2D, l), m.texImage2D(m.TEXTURE_2D, 0, m.RGBA, 16, 16, 0, m.RGBA, m.UNSIGNED_BYTE, null), 
        m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_S, m.CLAMP_TO_EDGE), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_WRAP_T, m.CLAMP_TO_EDGE), 
        m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, m.NEAREST), m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, m.NEAREST), 
        j = m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
        var c;
        c = j ? {
            vertexShader: [ "uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if ( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}" ].join("\n"),
            fragmentShader: [ "uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if ( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if ( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}" ].join("\n")
        } : {
            vertexShader: [ "uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if ( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}" ].join("\n"),
            fragmentShader: [ "precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if ( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if ( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}" ].join("\n")
        }, g = d(c), h = {
            vertex: m.getAttribLocation(g, "position"),
            uv: m.getAttribLocation(g, "uv")
        }, i = {
            renderType: m.getUniformLocation(g, "renderType"),
            map: m.getUniformLocation(g, "map"),
            occlusionMap: m.getUniformLocation(g, "occlusionMap"),
            opacity: m.getUniformLocation(g, "opacity"),
            color: m.getUniformLocation(g, "color"),
            scale: m.getUniformLocation(g, "scale"),
            rotation: m.getUniformLocation(g, "rotation"),
            screenPosition: m.getUniformLocation(g, "screenPosition")
        };
    }
    function d(b) {
        var c = m.createProgram(), d = m.createShader(m.FRAGMENT_SHADER), e = m.createShader(m.VERTEX_SHADER), f = "precision " + a.getPrecision() + " float;\n";
        return m.shaderSource(d, f + b.fragmentShader), m.shaderSource(e, f + b.vertexShader), 
        m.compileShader(d), m.compileShader(e), m.attachShader(c, d), m.attachShader(c, e), 
        m.linkProgram(c), c;
    }
    var e, f, g, h, i, j, k, l, m = a.context, n = a.state;
    this.render = function(d, o, p) {
        if (0 !== b.length) {
            var q = new THREE.Vector3(), r = p.w / p.z, s = .5 * p.z, t = .5 * p.w, u = 16 / p.w, v = new THREE.Vector2(u * r, u), w = new THREE.Vector3(1, 1, 0), x = new THREE.Vector2(1, 1);
            void 0 === g && c(), m.useProgram(g), n.initAttributes(), n.enableAttribute(h.vertex), 
            n.enableAttribute(h.uv), n.disableUnusedAttributes(), m.uniform1i(i.occlusionMap, 0), 
            m.uniform1i(i.map, 1), m.bindBuffer(m.ARRAY_BUFFER, e), m.vertexAttribPointer(h.vertex, 2, m.FLOAT, !1, 16, 0), 
            m.vertexAttribPointer(h.uv, 2, m.FLOAT, !1, 16, 8), m.bindBuffer(m.ELEMENT_ARRAY_BUFFER, f), 
            n.disable(m.CULL_FACE), n.setDepthWrite(!1);
            for (var y = 0, z = b.length; z > y; y++) {
                u = 16 / p.w, v.set(u * r, u);
                var A = b[y];
                if (q.set(A.matrixWorld.elements[12], A.matrixWorld.elements[13], A.matrixWorld.elements[14]), 
                q.applyMatrix4(o.matrixWorldInverse), q.applyProjection(o.projectionMatrix), w.copy(q), 
                x.x = w.x * s + s, x.y = w.y * t + t, j || x.x > 0 && x.x < p.z && x.y > 0 && x.y < p.w) {
                    n.activeTexture(m.TEXTURE0), n.bindTexture(m.TEXTURE_2D, null), n.activeTexture(m.TEXTURE1), 
                    n.bindTexture(m.TEXTURE_2D, k), m.copyTexImage2D(m.TEXTURE_2D, 0, m.RGB, p.x + x.x - 8, p.y + x.y - 8, 16, 16, 0), 
                    m.uniform1i(i.renderType, 0), m.uniform2f(i.scale, v.x, v.y), m.uniform3f(i.screenPosition, w.x, w.y, w.z), 
                    n.disable(m.BLEND), n.enable(m.DEPTH_TEST), m.drawElements(m.TRIANGLES, 6, m.UNSIGNED_SHORT, 0), 
                    n.activeTexture(m.TEXTURE0), n.bindTexture(m.TEXTURE_2D, l), m.copyTexImage2D(m.TEXTURE_2D, 0, m.RGBA, p.x + x.x - 8, p.y + x.y - 8, 16, 16, 0), 
                    m.uniform1i(i.renderType, 1), n.disable(m.DEPTH_TEST), n.activeTexture(m.TEXTURE1), 
                    n.bindTexture(m.TEXTURE_2D, k), m.drawElements(m.TRIANGLES, 6, m.UNSIGNED_SHORT, 0), 
                    A.positionScreen.copy(w), A.customUpdateCallback ? A.customUpdateCallback(A) : A.updateLensFlares(), 
                    m.uniform1i(i.renderType, 2), n.enable(m.BLEND);
                    for (var B = 0, C = A.lensFlares.length; C > B; B++) {
                        var D = A.lensFlares[B];
                        D.opacity > .001 && D.scale > .001 && (w.x = D.x, w.y = D.y, w.z = D.z, u = D.size * D.scale / p.w, 
                        v.x = u * r, v.y = u, m.uniform3f(i.screenPosition, w.x, w.y, w.z), m.uniform2f(i.scale, v.x, v.y), 
                        m.uniform1f(i.rotation, D.rotation), m.uniform1f(i.opacity, D.opacity), m.uniform3f(i.color, D.color.r, D.color.g, D.color.b), 
                        n.setBlending(D.blending, D.blendEquation, D.blendSrc, D.blendDst), a.setTexture(D.texture, 1), 
                        m.drawElements(m.TRIANGLES, 6, m.UNSIGNED_SHORT, 0));
                    }
                }
            }
            n.enable(m.CULL_FACE), n.enable(m.DEPTH_TEST), n.setDepthWrite(!0), a.resetGLState();
        }
    };
}, THREE.SpritePlugin = function(a, b) {
    function c() {
        var a = new Float32Array([ -.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1 ]), b = new Uint16Array([ 0, 1, 2, 0, 2, 3 ]);
        f = l.createBuffer(), g = l.createBuffer(), l.bindBuffer(l.ARRAY_BUFFER, f), l.bufferData(l.ARRAY_BUFFER, a, l.STATIC_DRAW), 
        l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, g), l.bufferData(l.ELEMENT_ARRAY_BUFFER, b, l.STATIC_DRAW), 
        h = d(), i = {
            position: l.getAttribLocation(h, "position"),
            uv: l.getAttribLocation(h, "uv")
        }, j = {
            uvOffset: l.getUniformLocation(h, "uvOffset"),
            uvScale: l.getUniformLocation(h, "uvScale"),
            rotation: l.getUniformLocation(h, "rotation"),
            scale: l.getUniformLocation(h, "scale"),
            color: l.getUniformLocation(h, "color"),
            map: l.getUniformLocation(h, "map"),
            opacity: l.getUniformLocation(h, "opacity"),
            modelViewMatrix: l.getUniformLocation(h, "modelViewMatrix"),
            projectionMatrix: l.getUniformLocation(h, "projectionMatrix"),
            fogType: l.getUniformLocation(h, "fogType"),
            fogDensity: l.getUniformLocation(h, "fogDensity"),
            fogNear: l.getUniformLocation(h, "fogNear"),
            fogFar: l.getUniformLocation(h, "fogFar"),
            fogColor: l.getUniformLocation(h, "fogColor"),
            alphaTest: l.getUniformLocation(h, "alphaTest")
        };
        var c = document.createElement("canvas");
        c.width = 8, c.height = 8;
        var e = c.getContext("2d");
        e.fillStyle = "white", e.fillRect(0, 0, 8, 8), k = new THREE.Texture(c), k.needsUpdate = !0;
    }
    function d() {
        var b = l.createProgram(), c = l.createShader(l.VERTEX_SHADER), d = l.createShader(l.FRAGMENT_SHADER);
        return l.shaderSource(c, [ "precision " + a.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}" ].join("\n")), 
        l.shaderSource(d, [ "precision " + a.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}" ].join("\n")), 
        l.compileShader(c), l.compileShader(d), l.attachShader(b, c), l.attachShader(b, d), 
        l.linkProgram(b), b;
    }
    function e(a, b) {
        return a.renderOrder !== b.renderOrder ? a.renderOrder - b.renderOrder : a.z !== b.z ? b.z - a.z : b.id - a.id;
    }
    var f, g, h, i, j, k, l = a.context, m = a.state, n = new THREE.Vector3(), o = new THREE.Quaternion(), p = new THREE.Vector3();
    this.render = function(d, q) {
        if (0 !== b.length) {
            void 0 === h && c(), l.useProgram(h), m.initAttributes(), m.enableAttribute(i.position), 
            m.enableAttribute(i.uv), m.disableUnusedAttributes(), m.disable(l.CULL_FACE), m.enable(l.BLEND), 
            l.bindBuffer(l.ARRAY_BUFFER, f), l.vertexAttribPointer(i.position, 2, l.FLOAT, !1, 16, 0), 
            l.vertexAttribPointer(i.uv, 2, l.FLOAT, !1, 16, 8), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, g), 
            l.uniformMatrix4fv(j.projectionMatrix, !1, q.projectionMatrix.elements), m.activeTexture(l.TEXTURE0), 
            l.uniform1i(j.map, 0);
            var r = 0, s = 0, t = d.fog;
            t ? (l.uniform3f(j.fogColor, t.color.r, t.color.g, t.color.b), t instanceof THREE.Fog ? (l.uniform1f(j.fogNear, t.near), 
            l.uniform1f(j.fogFar, t.far), l.uniform1i(j.fogType, 1), r = 1, s = 1) : t instanceof THREE.FogExp2 && (l.uniform1f(j.fogDensity, t.density), 
            l.uniform1i(j.fogType, 2), r = 2, s = 2)) : (l.uniform1i(j.fogType, 0), r = 0, s = 0);
            for (var u = 0, v = b.length; v > u; u++) {
                var w = b[u];
                w.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse, w.matrixWorld), w.z = -w.modelViewMatrix.elements[14];
            }
            b.sort(e);
            for (var x = [], u = 0, v = b.length; v > u; u++) {
                var w = b[u], y = w.material;
                l.uniform1f(j.alphaTest, y.alphaTest), l.uniformMatrix4fv(j.modelViewMatrix, !1, w.modelViewMatrix.elements), 
                w.matrixWorld.decompose(n, o, p), x[0] = p.x, x[1] = p.y;
                var z = 0;
                d.fog && y.fog && (z = s), r !== z && (l.uniform1i(j.fogType, z), r = z), null !== y.map ? (l.uniform2f(j.uvOffset, y.map.offset.x, y.map.offset.y), 
                l.uniform2f(j.uvScale, y.map.repeat.x, y.map.repeat.y)) : (l.uniform2f(j.uvOffset, 0, 0), 
                l.uniform2f(j.uvScale, 1, 1)), l.uniform1f(j.opacity, y.opacity), l.uniform3f(j.color, y.color.r, y.color.g, y.color.b), 
                l.uniform1f(j.rotation, y.rotation), l.uniform2fv(j.scale, x), m.setBlending(y.blending, y.blendEquation, y.blendSrc, y.blendDst), 
                m.setDepthTest(y.depthTest), m.setDepthWrite(y.depthWrite), y.map && y.map.image && y.map.image.width ? a.setTexture(y.map, 0) : a.setTexture(k, 0), 
                l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0);
            }
            m.enable(l.CULL_FACE), a.resetGLState();
        }
    };
}, Object.defineProperties(THREE.Box2.prototype, {
    empty: {
        value: function() {
            return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."), this.isEmpty();
        }
    },
    isIntersectionBox: {
        value: function(a) {
            return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."), 
            this.intersectsBox(a);
        }
    }
}), Object.defineProperties(THREE.Box3.prototype, {
    empty: {
        value: function() {
            return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."), this.isEmpty();
        }
    },
    isIntersectionBox: {
        value: function(a) {
            return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."), 
            this.intersectsBox(a);
        }
    },
    isIntersectionSphere: {
        value: function(a) {
            return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."), 
            this.intersectsSphere(a);
        }
    }
}), Object.defineProperties(THREE.Matrix3.prototype, {
    multiplyVector3: {
        value: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), 
            a.applyMatrix3(this);
        }
    },
    multiplyVector3Array: {
        value: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), 
            this.applyToVector3Array(a);
        }
    }
}), Object.defineProperties(THREE.Matrix4.prototype, {
    extractPosition: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), 
            this.copyPosition(a);
        }
    },
    setRotationFromQuaternion: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), 
            this.makeRotationFromQuaternion(a);
        }
    },
    multiplyVector3: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), 
            a.applyProjection(this);
        }
    },
    multiplyVector4: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), 
            a.applyMatrix4(this);
        }
    },
    multiplyVector3Array: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), 
            this.applyToVector3Array(a);
        }
    },
    rotateAxis: {
        value: function(a) {
            console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), 
            a.transformDirection(this);
        }
    },
    crossVector: {
        value: function(a) {
            return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), 
            a.applyMatrix4(this);
        }
    },
    translate: {
        value: function(a) {
            console.error("THREE.Matrix4: .translate() has been removed.");
        }
    },
    rotateX: {
        value: function(a) {
            console.error("THREE.Matrix4: .rotateX() has been removed.");
        }
    },
    rotateY: {
        value: function(a) {
            console.error("THREE.Matrix4: .rotateY() has been removed.");
        }
    },
    rotateZ: {
        value: function(a) {
            console.error("THREE.Matrix4: .rotateZ() has been removed.");
        }
    },
    rotateByAxis: {
        value: function(a, b) {
            console.error("THREE.Matrix4: .rotateByAxis() has been removed.");
        }
    }
}), Object.defineProperties(THREE.Plane.prototype, {
    isIntersectionLine: {
        value: function(a) {
            return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."), 
            this.intersectsLine(a);
        }
    }
}), Object.defineProperties(THREE.Quaternion.prototype, {
    multiplyVector3: {
        value: function(a) {
            return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), 
            a.applyQuaternion(this);
        }
    }
}), Object.defineProperties(THREE.Ray.prototype, {
    isIntersectionBox: {
        value: function(a) {
            return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."), 
            this.intersectsBox(a);
        }
    },
    isIntersectionPlane: {
        value: function(a) {
            return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."), 
            this.intersectsPlane(a);
        }
    },
    isIntersectionSphere: {
        value: function(a) {
            return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."), 
            this.intersectsSphere(a);
        }
    }
}), Object.defineProperties(THREE.Vector3.prototype, {
    setEulerFromRotationMatrix: {
        value: function() {
            console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.");
        }
    },
    setEulerFromQuaternion: {
        value: function() {
            console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.");
        }
    },
    getPositionFromMatrix: {
        value: function(a) {
            return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), 
            this.setFromMatrixPosition(a);
        }
    },
    getScaleFromMatrix: {
        value: function(a) {
            return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), 
            this.setFromMatrixScale(a);
        }
    },
    getColumnFromMatrix: {
        value: function(a, b) {
            return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), 
            this.setFromMatrixColumn(a, b);
        }
    }
}), THREE.Face4 = function(a, b, c, d, e, f, g) {
    return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), 
    new THREE.Face3(a, b, c, e, f, g);
}, THREE.Vertex = function(a, b, c) {
    return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."), 
    new THREE.Vector3(a, b, c);
}, Object.defineProperties(THREE.Object3D.prototype, {
    eulerOrder: {
        get: function() {
            return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order;
        },
        set: function(a) {
            console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = a;
        }
    },
    getChildByName: {
        value: function(a) {
            return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), 
            this.getObjectByName(a);
        }
    },
    renderDepth: {
        set: function(a) {
            console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.");
        }
    },
    translate: {
        value: function(a, b) {
            return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), 
            this.translateOnAxis(b, a);
        }
    },
    useQuaternion: {
        get: function() {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");
        },
        set: function(a) {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");
        }
    }
}), Object.defineProperties(THREE, {
    PointCloud: {
        value: function(a, b) {
            return console.warn("THREE.PointCloud has been renamed to THREE.Points."), new THREE.Points(a, b);
        }
    },
    ParticleSystem: {
        value: function(a, b) {
            return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."), new THREE.Points(a, b);
        }
    }
}), Object.defineProperties(THREE.Light.prototype, {
    onlyShadow: {
        set: function(a) {
            console.warn("THREE.Light: .onlyShadow has been removed.");
        }
    },
    shadowCameraFov: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."), this.shadow.camera.fov = a;
        }
    },
    shadowCameraLeft: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."), this.shadow.camera.left = a;
        }
    },
    shadowCameraRight: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."), this.shadow.camera.right = a;
        }
    },
    shadowCameraTop: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."), this.shadow.camera.top = a;
        }
    },
    shadowCameraBottom: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."), 
            this.shadow.camera.bottom = a;
        }
    },
    shadowCameraNear: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."), this.shadow.camera.near = a;
        }
    },
    shadowCameraFar: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."), this.shadow.camera.far = a;
        }
    },
    shadowCameraVisible: {
        set: function(a) {
            console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.");
        }
    },
    shadowBias: {
        set: function(a) {
            console.warn("THREE.Light: .shadowBias is now .shadow.bias."), this.shadow.bias = a;
        }
    },
    shadowDarkness: {
        set: function(a) {
            console.warn("THREE.Light: .shadowDarkness has been removed.");
        }
    },
    shadowMapWidth: {
        set: function(a) {
            console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."), this.shadow.mapSize.width = a;
        }
    },
    shadowMapHeight: {
        set: function(a) {
            console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."), this.shadow.mapSize.height = a;
        }
    }
}), Object.defineProperties(THREE.BufferAttribute.prototype, {
    length: {
        get: function() {
            return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), 
            this.array.length;
        }
    }
}), Object.defineProperties(THREE.BufferGeometry.prototype, {
    drawcalls: {
        get: function() {
            return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), 
            this.groups;
        }
    },
    offsets: {
        get: function() {
            return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), 
            this.groups;
        }
    },
    addIndex: {
        value: function(a) {
            console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), 
            this.setIndex(a);
        }
    },
    addDrawCall: {
        value: function(a, b, c) {
            void 0 !== c && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), 
            console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(a, b);
        }
    },
    clearDrawCalls: {
        value: function() {
            console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), 
            this.clearGroups();
        }
    },
    computeTangents: {
        value: function() {
            console.warn("THREE.BufferGeometry: .computeTangents() has been removed.");
        }
    },
    computeOffsets: {
        value: function() {
            console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.");
        }
    }
}), Object.defineProperties(THREE.Material.prototype, {
    wrapAround: {
        get: function() {
            console.warn("THREE." + this.type + ": .wrapAround has been removed.");
        },
        set: function(a) {
            console.warn("THREE." + this.type + ": .wrapAround has been removed.");
        }
    },
    wrapRGB: {
        get: function() {
            return console.warn("THREE." + this.type + ": .wrapRGB has been removed."), new THREE.Color();
        }
    }
}), Object.defineProperties(THREE, {
    PointCloudMaterial: {
        value: function(a) {
            return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."), 
            new THREE.PointsMaterial(a);
        }
    },
    ParticleBasicMaterial: {
        value: function(a) {
            return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."), 
            new THREE.PointsMaterial(a);
        }
    },
    ParticleSystemMaterial: {
        value: function(a) {
            return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."), 
            new THREE.PointsMaterial(a);
        }
    }
}), Object.defineProperties(THREE.MeshPhongMaterial.prototype, {
    metal: {
        get: function() {
            return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."), 
            !1;
        },
        set: function(a) {
            console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead");
        }
    }
}), Object.defineProperties(THREE.ShaderMaterial.prototype, {
    derivatives: {
        get: function() {
            return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), 
            this.extensions.derivatives;
        },
        set: function(a) {
            console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), 
            this.extensions.derivatives = a;
        }
    }
}), Object.defineProperties(THREE.WebGLRenderer.prototype, {
    supportsFloatTextures: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), 
            this.extensions.get("OES_texture_float");
        }
    },
    supportsHalfFloatTextures: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), 
            this.extensions.get("OES_texture_half_float");
        }
    },
    supportsStandardDerivatives: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), 
            this.extensions.get("OES_standard_derivatives");
        }
    },
    supportsCompressedTextureS3TC: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), 
            this.extensions.get("WEBGL_compressed_texture_s3tc");
        }
    },
    supportsCompressedTexturePVRTC: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."), 
            this.extensions.get("WEBGL_compressed_texture_pvrtc");
        }
    },
    supportsBlendMinMax: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), 
            this.extensions.get("EXT_blend_minmax");
        }
    },
    supportsVertexTextures: {
        value: function() {
            return this.capabilities.vertexTextures;
        }
    },
    supportsInstancedArrays: {
        value: function() {
            return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), 
            this.extensions.get("ANGLE_instanced_arrays");
        }
    },
    enableScissorTest: {
        value: function(a) {
            console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."), 
            this.setScissorTest(a);
        }
    },
    initMaterial: {
        value: function() {
            console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.");
        }
    },
    addPrePlugin: {
        value: function() {
            console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.");
        }
    },
    addPostPlugin: {
        value: function() {
            console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.");
        }
    },
    updateShadowMap: {
        value: function() {
            console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.");
        }
    },
    shadowMapEnabled: {
        get: function() {
            return this.shadowMap.enabled;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), 
            this.shadowMap.enabled = a;
        }
    },
    shadowMapType: {
        get: function() {
            return this.shadowMap.type;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), this.shadowMap.type = a;
        }
    },
    shadowMapCullFace: {
        get: function() {
            return this.shadowMap.cullFace;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."), 
            this.shadowMap.cullFace = a;
        }
    }
}), Object.defineProperties(THREE.WebGLRenderTarget.prototype, {
    wrapS: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = a;
        }
    },
    wrapT: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = a;
        }
    },
    magFilter: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), 
            this.texture.magFilter;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), 
            this.texture.magFilter = a;
        }
    },
    minFilter: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), 
            this.texture.minFilter;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), 
            this.texture.minFilter = a;
        }
    },
    anisotropy: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), 
            this.texture.anisotropy;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), 
            this.texture.anisotropy = a;
        }
    },
    offset: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), 
            this.texture.offset;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = a;
        }
    },
    repeat: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), 
            this.texture.repeat;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = a;
        }
    },
    format: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), 
            this.texture.format;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = a;
        }
    },
    type: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = a;
        }
    },
    generateMipmaps: {
        get: function() {
            return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), 
            this.texture.generateMipmaps;
        },
        set: function(a) {
            console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), 
            this.texture.generateMipmaps = a;
        }
    }
}), THREE.GeometryUtils = {
    merge: function(a, b, c) {
        console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
        var d;
        b instanceof THREE.Mesh && (b.matrixAutoUpdate && b.updateMatrix(), d = b.matrix, 
        b = b.geometry), a.merge(b, d, c);
    },
    center: function(a) {
        return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), 
        a.center();
    }
}, THREE.ImageUtils = {
    crossOrigin: void 0,
    loadTexture: function(a, b, c, d) {
        console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
        var e = new THREE.TextureLoader();
        e.setCrossOrigin(this.crossOrigin);
        var f = e.load(a, c, void 0, d);
        return b && (f.mapping = b), f;
    },
    loadTextureCube: function(a, b, c, d) {
        console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
        var e = new THREE.CubeTextureLoader();
        e.setCrossOrigin(this.crossOrigin);
        var f = e.load(a, c, void 0, d);
        return b && (f.mapping = b), f;
    },
    loadCompressedTexture: function() {
        console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.");
    },
    loadCompressedTextureCube: function() {
        console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.");
    }
}, THREE.Projector = function() {
    console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), 
    this.projectVector = function(a, b) {
        console.warn("THREE.Projector: .projectVector() is now vector.project()."), a.project(b);
    }, this.unprojectVector = function(a, b) {
        console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), 
        a.unproject(b);
    }, this.pickingRay = function(a, b) {
        console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().");
    };
}, THREE.CanvasRenderer = function() {
    console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), 
    this.domElement = document.createElement("canvas"), this.clear = function() {}, 
    this.render = function() {}, this.setClearColor = function() {}, this.setSize = function() {};
}, THREE.MeshFaceMaterial = THREE.MultiMaterial, THREE.CurveUtils = {
    tangentQuadraticBezier: function(a, b, c, d) {
        return 2 * (1 - a) * (c - b) + 2 * a * (d - c);
    },
    tangentCubicBezier: function(a, b, c, d, e) {
        return -3 * b * (1 - a) * (1 - a) + 3 * c * (1 - a) * (1 - a) - 6 * a * c * (1 - a) + 6 * a * d * (1 - a) - 3 * a * a * d + 3 * a * a * e;
    },
    tangentSpline: function(a, b, c, d, e) {
        var f = 6 * a * a - 6 * a, g = 3 * a * a - 4 * a + 1, h = -6 * a * a + 6 * a, i = 3 * a * a - 2 * a;
        return f + g + h + i;
    },
    interpolate: function(a, b, c, d, e) {
        var f = .5 * (c - a), g = .5 * (d - b), h = e * e, i = e * h;
        return (2 * b - 2 * c + f + g) * i + (-3 * b + 3 * c - 2 * f - g) * h + f * e + b;
    }
}, THREE.SceneUtils = {
    createMultiMaterialObject: function(a, b) {
        for (var c = new THREE.Group(), d = 0, e = b.length; e > d; d++) c.add(new THREE.Mesh(a, b[d]));
        return c;
    },
    detach: function(a, b, c) {
        a.applyMatrix(b.matrixWorld), b.remove(a), c.add(a);
    },
    attach: function(a, b, c) {
        var d = new THREE.Matrix4();
        d.getInverse(c.matrixWorld), a.applyMatrix(d), b.remove(a), c.add(a);
    }
}, THREE.ShapeUtils = {
    area: function(a) {
        for (var b = a.length, c = 0, d = b - 1, e = 0; b > e; d = e++) c += a[d].x * a[e].y - a[e].x * a[d].y;
        return .5 * c;
    },
    triangulate: function() {
        function a(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o;
            if (h = a[f[b]].x, i = a[f[b]].y, j = a[f[c]].x, k = a[f[c]].y, l = a[f[d]].x, m = a[f[d]].y, 
            Number.EPSILON > (j - h) * (m - i) - (k - i) * (l - h)) return !1;
            var p, q, r, s, t, u, v, w, x, y, z, A, B, C, D;
            for (p = l - j, q = m - k, r = h - l, s = i - m, t = j - h, u = k - i, g = 0; e > g; g++) if (n = a[f[g]].x, 
            o = a[f[g]].y, !(n === h && o === i || n === j && o === k || n === l && o === m) && (v = n - h, 
            w = o - i, x = n - j, y = o - k, z = n - l, A = o - m, D = p * y - q * x, B = t * w - u * v, 
            C = r * A - s * z, D >= -Number.EPSILON && C >= -Number.EPSILON && B >= -Number.EPSILON)) return !1;
            return !0;
        }
        return function(b, c) {
            var d = b.length;
            if (3 > d) return null;
            var e, f, g, h = [], i = [], j = [];
            if (THREE.ShapeUtils.area(b) > 0) for (f = 0; d > f; f++) i[f] = f; else for (f = 0; d > f; f++) i[f] = d - 1 - f;
            var k = d, l = 2 * k;
            for (f = k - 1; k > 2; ) {
                if (l-- <= 0) return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"), 
                c ? j : h;
                if (e = f, e >= k && (e = 0), f = e + 1, f >= k && (f = 0), g = f + 1, g >= k && (g = 0), 
                a(b, e, f, g, k, i)) {
                    var m, n, o, p, q;
                    for (m = i[e], n = i[f], o = i[g], h.push([ b[m], b[n], b[o] ]), j.push([ i[e], i[f], i[g] ]), 
                    p = f, q = f + 1; k > q; p++, q++) i[p] = i[q];
                    k--, l = 2 * k;
                }
            }
            return c ? j : h;
        };
    }(),
    triangulateShape: function(a, b) {
        function c(a, b, c) {
            return a.x !== b.x ? a.x < b.x ? a.x <= c.x && c.x <= b.x : b.x <= c.x && c.x <= a.x : a.y < b.y ? a.y <= c.y && c.y <= b.y : b.y <= c.y && c.y <= a.y;
        }
        function d(a, b, d, e, f) {
            var g = b.x - a.x, h = b.y - a.y, i = e.x - d.x, j = e.y - d.y, k = a.x - d.x, l = a.y - d.y, m = h * i - g * j, n = h * k - g * l;
            if (Math.abs(m) > Number.EPSILON) {
                var o;
                if (m > 0) {
                    if (0 > n || n > m) return [];
                    if (o = j * k - i * l, 0 > o || o > m) return [];
                } else {
                    if (n > 0 || m > n) return [];
                    if (o = j * k - i * l, o > 0 || m > o) return [];
                }
                if (0 === o) return !f || 0 !== n && n !== m ? [ a ] : [];
                if (o === m) return !f || 0 !== n && n !== m ? [ b ] : [];
                if (0 === n) return [ d ];
                if (n === m) return [ e ];
                var p = o / m;
                return [ {
                    x: a.x + p * g,
                    y: a.y + p * h
                } ];
            }
            if (0 !== n || j * k !== i * l) return [];
            var q = 0 === g && 0 === h, r = 0 === i && 0 === j;
            if (q && r) return a.x !== d.x || a.y !== d.y ? [] : [ a ];
            if (q) return c(d, e, a) ? [ a ] : [];
            if (r) return c(a, b, d) ? [ d ] : [];
            var s, t, u, v, w, x, y, z;
            return 0 !== g ? (a.x < b.x ? (s = a, u = a.x, t = b, v = b.x) : (s = b, u = b.x, 
            t = a, v = a.x), d.x < e.x ? (w = d, y = d.x, x = e, z = e.x) : (w = e, y = e.x, 
            x = d, z = d.x)) : (a.y < b.y ? (s = a, u = a.y, t = b, v = b.y) : (s = b, u = b.y, 
            t = a, v = a.y), d.y < e.y ? (w = d, y = d.y, x = e, z = e.y) : (w = e, y = e.y, 
            x = d, z = d.y)), y >= u ? y > v ? [] : v === y ? f ? [] : [ w ] : z >= v ? [ w, t ] : [ w, x ] : u > z ? [] : u === z ? f ? [] : [ s ] : z >= v ? [ s, t ] : [ s, x ];
        }
        function e(a, b, c, d) {
            var e = b.x - a.x, f = b.y - a.y, g = c.x - a.x, h = c.y - a.y, i = d.x - a.x, j = d.y - a.y, k = e * h - f * g, l = e * j - f * i;
            if (Math.abs(k) > Number.EPSILON) {
                var m = i * h - j * g;
                return k > 0 ? l >= 0 && m >= 0 : l >= 0 || m >= 0;
            }
            return l > 0;
        }
        function f(a, b) {
            function c(a, b) {
                var c = s.length - 1, d = a - 1;
                0 > d && (d = c);
                var f = a + 1;
                f > c && (f = 0);
                var g = e(s[a], s[d], s[f], h[b]);
                if (!g) return !1;
                var i = h.length - 1, j = b - 1;
                0 > j && (j = i);
                var k = b + 1;
                return k > i && (k = 0), g = e(h[b], h[j], h[k], s[a]), !!g;
            }
            function f(a, b) {
                var c, e, f;
                for (c = 0; c < s.length; c++) if (e = c + 1, e %= s.length, f = d(a, b, s[c], s[e], !0), 
                f.length > 0) return !0;
                return !1;
            }
            function g(a, c) {
                var e, f, g, h, i;
                for (e = 0; e < t.length; e++) for (f = b[t[e]], g = 0; g < f.length; g++) if (h = g + 1, 
                h %= f.length, i = d(a, c, f[g], f[h], !0), i.length > 0) return !0;
                return !1;
            }
            for (var h, i, j, k, l, m, n, o, p, q, r, s = a.concat(), t = [], u = [], v = 0, w = b.length; w > v; v++) t.push(v);
            for (var x = 0, y = 2 * t.length; t.length > 0; ) {
                if (y--, 0 > y) {
                    console.log("Infinite Loop! Holes left:" + t.length + ", Probably Hole outside Shape!");
                    break;
                }
                for (j = x; j < s.length; j++) {
                    k = s[j], i = -1;
                    for (var v = 0; v < t.length; v++) if (m = t[v], n = k.x + ":" + k.y + ":" + m, 
                    void 0 === u[n]) {
                        h = b[m];
                        for (var z = 0; z < h.length; z++) if (l = h[z], c(j, z) && !f(k, l) && !g(k, l)) {
                            i = z, t.splice(v, 1), o = s.slice(0, j + 1), p = s.slice(j), q = h.slice(i), r = h.slice(0, i + 1), 
                            s = o.concat(q).concat(r).concat(p), x = j;
                            break;
                        }
                        if (i >= 0) break;
                        u[n] = !0;
                    }
                    if (i >= 0) break;
                }
            }
            return s;
        }
        for (var g, h, i, j, k, l, m = {}, n = a.concat(), o = 0, p = b.length; p > o; o++) Array.prototype.push.apply(n, b[o]);
        for (g = 0, h = n.length; h > g; g++) k = n[g].x + ":" + n[g].y, void 0 !== m[k] && console.warn("THREE.Shape: Duplicate point", k), 
        m[k] = g;
        var q = f(a, b), r = THREE.ShapeUtils.triangulate(q, !1);
        for (g = 0, h = r.length; h > g; g++) for (j = r[g], i = 0; 3 > i; i++) k = j[i].x + ":" + j[i].y, 
        l = m[k], void 0 !== l && (j[i] = l);
        return r.concat();
    },
    isClockWise: function(a) {
        return THREE.ShapeUtils.area(a) < 0;
    },
    b2: function() {
        function a(a, b) {
            var c = 1 - a;
            return c * c * b;
        }
        function b(a, b) {
            return 2 * (1 - a) * a * b;
        }
        function c(a, b) {
            return a * a * b;
        }
        return function(d, e, f, g) {
            return a(d, e) + b(d, f) + c(d, g);
        };
    }(),
    b3: function() {
        function a(a, b) {
            var c = 1 - a;
            return c * c * c * b;
        }
        function b(a, b) {
            var c = 1 - a;
            return 3 * c * c * a * b;
        }
        function c(a, b) {
            var c = 1 - a;
            return 3 * c * a * a * b;
        }
        function d(a, b) {
            return a * a * a * b;
        }
        return function(e, f, g, h, i) {
            return a(e, f) + b(e, g) + c(e, h) + d(e, i);
        };
    }()
}, THREE.Curve = function() {}, THREE.Curve.prototype = {
    constructor: THREE.Curve,
    getPoint: function(a) {
        return console.warn("THREE.Curve: Warning, getPoint() not implemented!"), null;
    },
    getPointAt: function(a) {
        var b = this.getUtoTmapping(a);
        return this.getPoint(b);
    },
    getPoints: function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPoint(b / a));
        return c;
    },
    getSpacedPoints: function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPointAt(b / a));
        return c;
    },
    getLength: function() {
        var a = this.getLengths();
        return a[a.length - 1];
    },
    getLengths: function(a) {
        if (a || (a = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length === a + 1 && !this.needsUpdate) return this.cacheArcLengths;
        this.needsUpdate = !1;
        var b, c, d = [], e = this.getPoint(0), f = 0;
        for (d.push(0), c = 1; a >= c; c++) b = this.getPoint(c / a), f += b.distanceTo(e), 
        d.push(f), e = b;
        return this.cacheArcLengths = d, d;
    },
    updateArcLengths: function() {
        this.needsUpdate = !0, this.getLengths();
    },
    getUtoTmapping: function(a, b) {
        var c, d = this.getLengths(), e = 0, f = d.length;
        c = b ? b : a * d[f - 1];
        for (var g, h = 0, i = f - 1; i >= h; ) if (e = Math.floor(h + (i - h) / 2), g = d[e] - c, 
        0 > g) h = e + 1; else {
            if (!(g > 0)) {
                i = e;
                break;
            }
            i = e - 1;
        }
        if (e = i, d[e] === c) {
            var j = e / (f - 1);
            return j;
        }
        var k = d[e], l = d[e + 1], m = l - k, n = (c - k) / m, j = (e + n) / (f - 1);
        return j;
    },
    getTangent: function(a) {
        var b = 1e-4, c = a - b, d = a + b;
        0 > c && (c = 0), d > 1 && (d = 1);
        var e = this.getPoint(c), f = this.getPoint(d), g = f.clone().sub(e);
        return g.normalize();
    },
    getTangentAt: function(a) {
        var b = this.getUtoTmapping(a);
        return this.getTangent(b);
    }
}, THREE.Curve.create = function(a, b) {
    return a.prototype = Object.create(THREE.Curve.prototype), a.prototype.constructor = a, 
    a.prototype.getPoint = b, a;
}, THREE.CurvePath = function() {
    this.curves = [], this.autoClose = !1;
}, THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype), THREE.CurvePath.prototype.constructor = THREE.CurvePath, 
THREE.CurvePath.prototype.add = function(a) {
    this.curves.push(a);
}, THREE.CurvePath.prototype.closePath = function() {
    var a = this.curves[0].getPoint(0), b = this.curves[this.curves.length - 1].getPoint(1);
    a.equals(b) || this.curves.push(new THREE.LineCurve(b, a));
}, THREE.CurvePath.prototype.getPoint = function(a) {
    for (var b = a * this.getLength(), c = this.getCurveLengths(), d = 0; d < c.length; ) {
        if (c[d] >= b) {
            var e = c[d] - b, f = this.curves[d], g = 1 - e / f.getLength();
            return f.getPointAt(g);
        }
        d++;
    }
    return null;
}, THREE.CurvePath.prototype.getLength = function() {
    var a = this.getCurveLengths();
    return a[a.length - 1];
}, THREE.CurvePath.prototype.getCurveLengths = function() {
    if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths;
    for (var a = [], b = 0, c = 0, d = this.curves.length; d > c; c++) b += this.curves[c].getLength(), 
    a.push(b);
    return this.cacheLengths = a, a;
}, THREE.CurvePath.prototype.createPointsGeometry = function(a) {
    var b = this.getPoints(a);
    return this.createGeometry(b);
}, THREE.CurvePath.prototype.createSpacedPointsGeometry = function(a) {
    var b = this.getSpacedPoints(a);
    return this.createGeometry(b);
}, THREE.CurvePath.prototype.createGeometry = function(a) {
    for (var b = new THREE.Geometry(), c = 0, d = a.length; d > c; c++) {
        var e = a[c];
        b.vertices.push(new THREE.Vector3(e.x, e.y, e.z || 0));
    }
    return b;
}, THREE.Font = function(a) {
    this.data = a;
}, THREE.Font.prototype = {
    constructor: THREE.Font,
    generateShapes: function(a, b, c) {
        function d(a) {
            for (var c = String(a).split(""), d = b / f.resolution, g = 0, h = [], i = 0; i < c.length; i++) {
                var j = e(c[i], d, g);
                g += j.offset, h.push(j.path);
            }
            return h;
        }
        function e(a, b, d) {
            var e = f.glyphs[a] || f.glyphs["?"];
            if (e) {
                var g, h, i, j, k, l, m, n, o, p, q, r = new THREE.Path(), s = [], t = THREE.ShapeUtils.b2, u = THREE.ShapeUtils.b3;
                if (e.o) for (var v = e._cachedOutline || (e._cachedOutline = e.o.split(" ")), w = 0, x = v.length; x > w; ) {
                    var y = v[w++];
                    switch (y) {
                      case "m":
                        g = v[w++] * b + d, h = v[w++] * b, r.moveTo(g, h);
                        break;

                      case "l":
                        g = v[w++] * b + d, h = v[w++] * b, r.lineTo(g, h);
                        break;

                      case "q":
                        if (i = v[w++] * b + d, j = v[w++] * b, m = v[w++] * b + d, n = v[w++] * b, r.quadraticCurveTo(m, n, i, j), 
                        q = s[s.length - 1]) {
                            k = q.x, l = q.y;
                            for (var z = 1; c >= z; z++) {
                                var A = z / c;
                                t(A, k, m, i), t(A, l, n, j);
                            }
                        }
                        break;

                      case "b":
                        if (i = v[w++] * b + d, j = v[w++] * b, m = v[w++] * b + d, n = v[w++] * b, o = v[w++] * b + d, 
                        p = v[w++] * b, r.bezierCurveTo(m, n, o, p, i, j), q = s[s.length - 1]) {
                            k = q.x, l = q.y;
                            for (var z = 1; c >= z; z++) {
                                var A = z / c;
                                u(A, k, m, o, i), u(A, l, n, p, j);
                            }
                        }
                    }
                }
                return {
                    offset: e.ha * b,
                    path: r
                };
            }
        }
        void 0 === b && (b = 100), void 0 === c && (c = 4);
        for (var f = this.data, g = d(a), h = [], i = 0, j = g.length; j > i; i++) Array.prototype.push.apply(h, g[i].toShapes());
        return h;
    }
}, THREE.Path = function(a) {
    THREE.CurvePath.call(this), this.actions = [], a && this.fromPoints(a);
}, THREE.Path.prototype = Object.create(THREE.CurvePath.prototype), THREE.Path.prototype.constructor = THREE.Path, 
THREE.Path.prototype.fromPoints = function(a) {
    this.moveTo(a[0].x, a[0].y);
    for (var b = 1, c = a.length; c > b; b++) this.lineTo(a[b].x, a[b].y);
}, THREE.Path.prototype.moveTo = function(a, b) {
    this.actions.push({
        action: "moveTo",
        args: [ a, b ]
    });
}, THREE.Path.prototype.lineTo = function(a, b) {
    var c = this.actions[this.actions.length - 1].args, d = c[c.length - 2], e = c[c.length - 1], f = new THREE.LineCurve(new THREE.Vector2(d, e), new THREE.Vector2(a, b));
    this.curves.push(f), this.actions.push({
        action: "lineTo",
        args: [ a, b ]
    });
}, THREE.Path.prototype.quadraticCurveTo = function(a, b, c, d) {
    var e = this.actions[this.actions.length - 1].args, f = e[e.length - 2], g = e[e.length - 1], h = new THREE.QuadraticBezierCurve(new THREE.Vector2(f, g), new THREE.Vector2(a, b), new THREE.Vector2(c, d));
    this.curves.push(h), this.actions.push({
        action: "quadraticCurveTo",
        args: [ a, b, c, d ]
    });
}, THREE.Path.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
    var g = this.actions[this.actions.length - 1].args, h = g[g.length - 2], i = g[g.length - 1], j = new THREE.CubicBezierCurve(new THREE.Vector2(h, i), new THREE.Vector2(a, b), new THREE.Vector2(c, d), new THREE.Vector2(e, f));
    this.curves.push(j), this.actions.push({
        action: "bezierCurveTo",
        args: [ a, b, c, d, e, f ]
    });
}, THREE.Path.prototype.splineThru = function(a) {
    var b = Array.prototype.slice.call(arguments), c = this.actions[this.actions.length - 1].args, d = c[c.length - 2], e = c[c.length - 1], f = [ new THREE.Vector2(d, e) ];
    Array.prototype.push.apply(f, a);
    var g = new THREE.SplineCurve(f);
    this.curves.push(g), this.actions.push({
        action: "splineThru",
        args: b
    });
}, THREE.Path.prototype.arc = function(a, b, c, d, e, f) {
    var g = this.actions[this.actions.length - 1].args, h = g[g.length - 2], i = g[g.length - 1];
    this.absarc(a + h, b + i, c, d, e, f);
}, THREE.Path.prototype.absarc = function(a, b, c, d, e, f) {
    this.absellipse(a, b, c, c, d, e, f);
}, THREE.Path.prototype.ellipse = function(a, b, c, d, e, f, g, h) {
    var i = this.actions[this.actions.length - 1].args, j = i[i.length - 2], k = i[i.length - 1];
    this.absellipse(a + j, b + k, c, d, e, f, g, h);
}, THREE.Path.prototype.absellipse = function(a, b, c, d, e, f, g, h) {
    var i = [ a, b, c, d, e, f, g, h || 0 ], j = new THREE.EllipseCurve(a, b, c, d, e, f, g, h);
    this.curves.push(j);
    var k = j.getPoint(1);
    i.push(k.x), i.push(k.y), this.actions.push({
        action: "ellipse",
        args: i
    });
}, THREE.Path.prototype.getSpacedPoints = function(a) {
    a || (a = 40);
    for (var b = [], c = 0; a > c; c++) b.push(this.getPoint(c / a));
    return this.autoClose && b.push(b[0]), b;
}, THREE.Path.prototype.getPoints = function(a) {
    a = a || 12;
    for (var b, c, d, e, f, g, h, i, j, k, l, m = THREE.ShapeUtils.b2, n = THREE.ShapeUtils.b3, o = [], p = 0, q = this.actions.length; q > p; p++) {
        var r = this.actions[p], s = r.action, t = r.args;
        switch (s) {
          case "moveTo":
            o.push(new THREE.Vector2(t[0], t[1]));
            break;

          case "lineTo":
            o.push(new THREE.Vector2(t[0], t[1]));
            break;

          case "quadraticCurveTo":
            b = t[2], c = t[3], f = t[0], g = t[1], o.length > 0 ? (j = o[o.length - 1], h = j.x, 
            i = j.y) : (j = this.actions[p - 1].args, h = j[j.length - 2], i = j[j.length - 1]);
            for (var u = 1; a >= u; u++) {
                var v = u / a;
                k = m(v, h, f, b), l = m(v, i, g, c), o.push(new THREE.Vector2(k, l));
            }
            break;

          case "bezierCurveTo":
            b = t[4], c = t[5], f = t[0], g = t[1], d = t[2], e = t[3], o.length > 0 ? (j = o[o.length - 1], 
            h = j.x, i = j.y) : (j = this.actions[p - 1].args, h = j[j.length - 2], i = j[j.length - 1]);
            for (var u = 1; a >= u; u++) {
                var v = u / a;
                k = n(v, h, f, d, b), l = n(v, i, g, e, c), o.push(new THREE.Vector2(k, l));
            }
            break;

          case "splineThru":
            j = this.actions[p - 1].args;
            var w = new THREE.Vector2(j[j.length - 2], j[j.length - 1]), x = [ w ], y = a * t[0].length;
            x = x.concat(t[0]);
            for (var z = new THREE.SplineCurve(x), u = 1; y >= u; u++) o.push(z.getPointAt(u / y));
            break;

          case "arc":
            for (var A, B = t[0], C = t[1], D = t[2], E = t[3], F = t[4], G = !!t[5], H = F - E, I = 2 * a, u = 1; I >= u; u++) {
                var v = u / I;
                G || (v = 1 - v), A = E + v * H, k = B + D * Math.cos(A), l = C + D * Math.sin(A), 
                o.push(new THREE.Vector2(k, l));
            }
            break;

          case "ellipse":
            var A, J, K, B = t[0], C = t[1], L = t[2], M = t[3], E = t[4], F = t[5], G = !!t[6], N = t[7], H = F - E, I = 2 * a;
            0 !== N && (J = Math.cos(N), K = Math.sin(N));
            for (var u = 1; I >= u; u++) {
                var v = u / I;
                if (G || (v = 1 - v), A = E + v * H, k = B + L * Math.cos(A), l = C + M * Math.sin(A), 
                0 !== N) {
                    var O = k, P = l;
                    k = (O - B) * J - (P - C) * K + B, l = (O - B) * K + (P - C) * J + C;
                }
                o.push(new THREE.Vector2(k, l));
            }
        }
    }
    var Q = o[o.length - 1];
    return Math.abs(Q.x - o[0].x) < Number.EPSILON && Math.abs(Q.y - o[0].y) < Number.EPSILON && o.splice(o.length - 1, 1), 
    this.autoClose && o.push(o[0]), o;
}, THREE.Path.prototype.toShapes = function(a, b) {
    function c(a) {
        for (var b = [], c = new THREE.Path(), d = 0, e = a.length; e > d; d++) {
            var f = a[d], g = f.args, h = f.action;
            "moveTo" === h && 0 !== c.actions.length && (b.push(c), c = new THREE.Path()), c[h].apply(c, g);
        }
        return 0 !== c.actions.length && b.push(c), b;
    }
    function d(a) {
        for (var b = [], c = 0, d = a.length; d > c; c++) {
            var e = a[c], f = new THREE.Shape();
            f.actions = e.actions, f.curves = e.curves, b.push(f);
        }
        return b;
    }
    function e(a, b) {
        for (var c = b.length, d = !1, e = c - 1, f = 0; c > f; e = f++) {
            var g = b[e], h = b[f], i = h.x - g.x, j = h.y - g.y;
            if (Math.abs(j) > Number.EPSILON) {
                if (0 > j && (g = b[f], i = -i, h = b[e], j = -j), a.y < g.y || a.y > h.y) continue;
                if (a.y === g.y) {
                    if (a.x === g.x) return !0;
                } else {
                    var k = j * (a.x - g.x) - i * (a.y - g.y);
                    if (0 === k) return !0;
                    if (0 > k) continue;
                    d = !d;
                }
            } else {
                if (a.y !== g.y) continue;
                if (h.x <= a.x && a.x <= g.x || g.x <= a.x && a.x <= h.x) return !0;
            }
        }
        return d;
    }
    var f = THREE.ShapeUtils.isClockWise, g = c(this.actions);
    if (0 === g.length) return [];
    if (b === !0) return d(g);
    var h, i, j, k = [];
    if (1 === g.length) return i = g[0], j = new THREE.Shape(), j.actions = i.actions, 
    j.curves = i.curves, k.push(j), k;
    var l = !f(g[0].getPoints());
    l = a ? !l : l;
    var m, n = [], o = [], p = [], q = 0;
    o[q] = void 0, p[q] = [];
    for (var r = 0, s = g.length; s > r; r++) i = g[r], m = i.getPoints(), h = f(m), 
    h = a ? !h : h, h ? (!l && o[q] && q++, o[q] = {
        s: new THREE.Shape(),
        p: m
    }, o[q].s.actions = i.actions, o[q].s.curves = i.curves, l && q++, p[q] = []) : p[q].push({
        h: i,
        p: m[0]
    });
    if (!o[0]) return d(g);
    if (o.length > 1) {
        for (var t = !1, u = [], v = 0, w = o.length; w > v; v++) n[v] = [];
        for (var v = 0, w = o.length; w > v; v++) for (var x = p[v], y = 0; y < x.length; y++) {
            for (var z = x[y], A = !0, B = 0; B < o.length; B++) e(z.p, o[B].p) && (v !== B && u.push({
                froms: v,
                tos: B,
                hole: y
            }), A ? (A = !1, n[B].push(z)) : t = !0);
            A && n[v].push(z);
        }
        u.length > 0 && (t || (p = n));
    }
    for (var C, r = 0, D = o.length; D > r; r++) {
        j = o[r].s, k.push(j), C = p[r];
        for (var E = 0, F = C.length; F > E; E++) j.holes.push(C[E].h);
    }
    return k;
}, THREE.Shape = function() {
    THREE.Path.apply(this, arguments), this.holes = [];
}, THREE.Shape.prototype = Object.create(THREE.Path.prototype), THREE.Shape.prototype.constructor = THREE.Shape, 
THREE.Shape.prototype.extrude = function(a) {
    return new THREE.ExtrudeGeometry(this, a);
}, THREE.Shape.prototype.makeGeometry = function(a) {
    return new THREE.ShapeGeometry(this, a);
}, THREE.Shape.prototype.getPointsHoles = function(a) {
    for (var b = [], c = 0, d = this.holes.length; d > c; c++) b[c] = this.holes[c].getPoints(a);
    return b;
}, THREE.Shape.prototype.extractAllPoints = function(a) {
    return {
        shape: this.getPoints(a),
        holes: this.getPointsHoles(a)
    };
}, THREE.Shape.prototype.extractPoints = function(a) {
    return this.extractAllPoints(a);
}, THREE.LineCurve = function(a, b) {
    this.v1 = a, this.v2 = b;
}, THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.LineCurve.prototype.constructor = THREE.LineCurve, 
THREE.LineCurve.prototype.getPoint = function(a) {
    var b = this.v2.clone().sub(this.v1);
    return b.multiplyScalar(a).add(this.v1), b;
}, THREE.LineCurve.prototype.getPointAt = function(a) {
    return this.getPoint(a);
}, THREE.LineCurve.prototype.getTangent = function(a) {
    var b = this.v2.clone().sub(this.v1);
    return b.normalize();
}, THREE.QuadraticBezierCurve = function(a, b, c) {
    this.v0 = a, this.v1 = b, this.v2 = c;
}, THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype), 
THREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve, THREE.QuadraticBezierCurve.prototype.getPoint = function(a) {
    var b = THREE.ShapeUtils.b2;
    return new THREE.Vector2(b(a, this.v0.x, this.v1.x, this.v2.x), b(a, this.v0.y, this.v1.y, this.v2.y));
}, THREE.QuadraticBezierCurve.prototype.getTangent = function(a) {
    var b = THREE.CurveUtils.tangentQuadraticBezier;
    return new THREE.Vector2(b(a, this.v0.x, this.v1.x, this.v2.x), b(a, this.v0.y, this.v1.y, this.v2.y)).normalize();
}, THREE.CubicBezierCurve = function(a, b, c, d) {
    this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d;
}, THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve, 
THREE.CubicBezierCurve.prototype.getPoint = function(a) {
    var b = THREE.ShapeUtils.b3;
    return new THREE.Vector2(b(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), b(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y));
}, THREE.CubicBezierCurve.prototype.getTangent = function(a) {
    var b = THREE.CurveUtils.tangentCubicBezier;
    return new THREE.Vector2(b(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), b(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y)).normalize();
}, THREE.SplineCurve = function(a) {
    this.points = void 0 == a ? [] : a;
}, THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.SplineCurve.prototype.constructor = THREE.SplineCurve, 
THREE.SplineCurve.prototype.getPoint = function(a) {
    var b = this.points, c = (b.length - 1) * a, d = Math.floor(c), e = c - d, f = b[0 === d ? d : d - 1], g = b[d], h = b[d > b.length - 2 ? b.length - 1 : d + 1], i = b[d > b.length - 3 ? b.length - 1 : d + 2], j = THREE.CurveUtils.interpolate;
    return new THREE.Vector2(j(f.x, g.x, h.x, i.x, e), j(f.y, g.y, h.y, i.y, e));
}, THREE.EllipseCurve = function(a, b, c, d, e, f, g, h) {
    this.aX = a, this.aY = b, this.xRadius = c, this.yRadius = d, this.aStartAngle = e, 
    this.aEndAngle = f, this.aClockwise = g, this.aRotation = h || 0;
}, THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype), THREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve, 
THREE.EllipseCurve.prototype.getPoint = function(a) {
    var b = this.aEndAngle - this.aStartAngle;
    0 > b && (b += 2 * Math.PI), b > 2 * Math.PI && (b -= 2 * Math.PI);
    var c;
    c = this.aClockwise === !0 ? this.aEndAngle + (1 - a) * (2 * Math.PI - b) : this.aStartAngle + a * b;
    var d = this.aX + this.xRadius * Math.cos(c), e = this.aY + this.yRadius * Math.sin(c);
    if (0 !== this.aRotation) {
        var f = Math.cos(this.aRotation), g = Math.sin(this.aRotation), h = d, i = e;
        d = (h - this.aX) * f - (i - this.aY) * g + this.aX, e = (h - this.aX) * g + (i - this.aY) * f + this.aY;
    }
    return new THREE.Vector2(d, e);
}, THREE.ArcCurve = function(a, b, c, d, e, f) {
    THREE.EllipseCurve.call(this, a, b, c, c, d, e, f);
}, THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype), THREE.ArcCurve.prototype.constructor = THREE.ArcCurve, 
THREE.LineCurve3 = THREE.Curve.create(function(a, b) {
    this.v1 = a, this.v2 = b;
}, function(a) {
    var b = new THREE.Vector3();
    return b.subVectors(this.v2, this.v1), b.multiplyScalar(a), b.add(this.v1), b;
}), THREE.QuadraticBezierCurve3 = THREE.Curve.create(function(a, b, c) {
    this.v0 = a, this.v1 = b, this.v2 = c;
}, function(a) {
    var b = THREE.ShapeUtils.b2;
    return new THREE.Vector3(b(a, this.v0.x, this.v1.x, this.v2.x), b(a, this.v0.y, this.v1.y, this.v2.y), b(a, this.v0.z, this.v1.z, this.v2.z));
}), THREE.CubicBezierCurve3 = THREE.Curve.create(function(a, b, c, d) {
    this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d;
}, function(a) {
    var b = THREE.ShapeUtils.b3;
    return new THREE.Vector3(b(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), b(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), b(a, this.v0.z, this.v1.z, this.v2.z, this.v3.z));
}), THREE.SplineCurve3 = THREE.Curve.create(function(a) {
    console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"), 
    this.points = void 0 == a ? [] : a;
}, function(a) {
    var b = this.points, c = (b.length - 1) * a, d = Math.floor(c), e = c - d, f = b[0 == d ? d : d - 1], g = b[d], h = b[d > b.length - 2 ? b.length - 1 : d + 1], i = b[d > b.length - 3 ? b.length - 1 : d + 2], j = THREE.CurveUtils.interpolate;
    return new THREE.Vector3(j(f.x, g.x, h.x, i.x, e), j(f.y, g.y, h.y, i.y, e), j(f.z, g.z, h.z, i.z, e));
}), THREE.CatmullRomCurve3 = function() {
    function a() {}
    var b = new THREE.Vector3(), c = new a(), d = new a(), e = new a();
    return a.prototype.init = function(a, b, c, d) {
        this.c0 = a, this.c1 = c, this.c2 = -3 * a + 3 * b - 2 * c - d, this.c3 = 2 * a - 2 * b + c + d;
    }, a.prototype.initNonuniformCatmullRom = function(a, b, c, d, e, f, g) {
        var h = (b - a) / e - (c - a) / (e + f) + (c - b) / f, i = (c - b) / f - (d - b) / (f + g) + (d - c) / g;
        h *= f, i *= f, this.init(b, c, h, i);
    }, a.prototype.initCatmullRom = function(a, b, c, d, e) {
        this.init(b, c, e * (c - a), e * (d - b));
    }, a.prototype.calc = function(a) {
        var b = a * a, c = b * a;
        return this.c0 + this.c1 * a + this.c2 * b + this.c3 * c;
    }, THREE.Curve.create(function(a) {
        this.points = a || [], this.closed = !1;
    }, function(a) {
        var f, g, h, i, j = this.points;
        i = j.length, 2 > i && console.log("duh, you need at least 2 points"), f = (i - (this.closed ? 0 : 1)) * a, 
        g = Math.floor(f), h = f - g, this.closed ? g += g > 0 ? 0 : (Math.floor(Math.abs(g) / j.length) + 1) * j.length : 0 === h && g === i - 1 && (g = i - 2, 
        h = 1);
        var k, l, m, n;
        if (this.closed || g > 0 ? k = j[(g - 1) % i] : (b.subVectors(j[0], j[1]).add(j[0]), 
        k = b), l = j[g % i], m = j[(g + 1) % i], this.closed || i > g + 2 ? n = j[(g + 2) % i] : (b.subVectors(j[i - 1], j[i - 2]).add(j[i - 1]), 
        n = b), void 0 === this.type || "centripetal" === this.type || "chordal" === this.type) {
            var o = "chordal" === this.type ? .5 : .25, p = Math.pow(k.distanceToSquared(l), o), q = Math.pow(l.distanceToSquared(m), o), r = Math.pow(m.distanceToSquared(n), o);
            1e-4 > q && (q = 1), 1e-4 > p && (p = q), 1e-4 > r && (r = q), c.initNonuniformCatmullRom(k.x, l.x, m.x, n.x, p, q, r), 
            d.initNonuniformCatmullRom(k.y, l.y, m.y, n.y, p, q, r), e.initNonuniformCatmullRom(k.z, l.z, m.z, n.z, p, q, r);
        } else if ("catmullrom" === this.type) {
            var s = void 0 !== this.tension ? this.tension : .5;
            c.initCatmullRom(k.x, l.x, m.x, n.x, s), d.initCatmullRom(k.y, l.y, m.y, n.y, s), 
            e.initCatmullRom(k.z, l.z, m.z, n.z, s);
        }
        var t = new THREE.Vector3(c.calc(h), d.calc(h), e.calc(h));
        return t;
    });
}(), THREE.ClosedSplineCurve3 = function(a) {
    console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."), 
    THREE.CatmullRomCurve3.call(this, a), this.type = "catmullrom", this.closed = !0;
}, THREE.ClosedSplineCurve3.prototype = Object.create(THREE.CatmullRomCurve3.prototype), 
THREE.BoxGeometry = function(a, b, c, d, e, f) {
    THREE.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
        width: a,
        height: b,
        depth: c,
        widthSegments: d,
        heightSegments: e,
        depthSegments: f
    }, this.fromBufferGeometry(new THREE.BoxBufferGeometry(a, b, c, d, e, f)), this.mergeVertices();
}, THREE.BoxGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry, 
THREE.CubeGeometry = THREE.BoxGeometry, THREE.BoxBufferGeometry = function(a, b, c, d, e, f) {
    function g(a, b, c) {
        var d = 0;
        return d += a * b * 2, d += a * c * 2, d += c * b * 2, 4 * d;
    }
    function h(a, b, c, d, e, f, g, h, j, k, u) {
        for (var v = f / j, w = g / k, x = f / 2, y = g / 2, z = h / 2, A = j + 1, B = k + 1, C = 0, D = 0, E = new THREE.Vector3(), F = 0; B > F; F++) for (var G = F * w - y, H = 0; A > H; H++) {
            var I = H * v - x;
            E[a] = I * d, E[b] = G * e, E[c] = z, m[p] = E.x, m[p + 1] = E.y, m[p + 2] = E.z, 
            E[a] = 0, E[b] = 0, E[c] = h > 0 ? 1 : -1, n[p] = E.x, n[p + 1] = E.y, n[p + 2] = E.z, 
            o[q] = H / j, o[q + 1] = 1 - F / k, p += 3, q += 2, C += 1;
        }
        for (F = 0; k > F; F++) for (H = 0; j > H; H++) {
            var J = s + H + A * F, K = s + H + A * (F + 1), L = s + (H + 1) + A * (F + 1), M = s + (H + 1) + A * F;
            l[r] = J, l[r + 1] = K, l[r + 2] = M, l[r + 3] = K, l[r + 4] = L, l[r + 5] = M, 
            r += 6, D += 6;
        }
        i.addGroup(t, D, u), t += D, s += C;
    }
    THREE.BufferGeometry.call(this), this.type = "BoxBufferGeometry", this.parameters = {
        width: a,
        height: b,
        depth: c,
        widthSegments: d,
        heightSegments: e,
        depthSegments: f
    };
    var i = this;
    d = Math.floor(d) || 1, e = Math.floor(e) || 1, f = Math.floor(f) || 1;
    var j = g(d, e, f), k = j / 4 * 6, l = new (k > 65535 ? Uint32Array : Uint16Array)(k), m = new Float32Array(3 * j), n = new Float32Array(3 * j), o = new Float32Array(2 * j), p = 0, q = 0, r = 0, s = 0, t = 0;
    h("z", "y", "x", -1, -1, c, b, a, f, e, 0), h("z", "y", "x", 1, -1, c, b, -a, f, e, 1), 
    h("x", "z", "y", 1, 1, a, c, b, d, f, 2), h("x", "z", "y", 1, -1, a, c, -b, d, f, 3), 
    h("x", "y", "z", 1, -1, a, b, c, d, e, 4), h("x", "y", "z", -1, -1, a, b, -c, d, e, 5), 
    this.setIndex(new THREE.BufferAttribute(l, 1)), this.addAttribute("position", new THREE.BufferAttribute(m, 3)), 
    this.addAttribute("normal", new THREE.BufferAttribute(n, 3)), this.addAttribute("uv", new THREE.BufferAttribute(o, 2));
}, THREE.BoxBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.BoxBufferGeometry.prototype.constructor = THREE.BoxBufferGeometry, THREE.CircleGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
        radius: a,
        segments: b,
        thetaStart: c,
        thetaLength: d
    }, this.fromBufferGeometry(new THREE.CircleBufferGeometry(a, b, c, d));
}, THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry, 
THREE.CircleBufferGeometry = function(a, b, c, d) {
    THREE.BufferGeometry.call(this), this.type = "CircleBufferGeometry", this.parameters = {
        radius: a,
        segments: b,
        thetaStart: c,
        thetaLength: d
    }, a = a || 50, b = void 0 !== b ? Math.max(3, b) : 8, c = void 0 !== c ? c : 0, 
    d = void 0 !== d ? d : 2 * Math.PI;
    var e = b + 2, f = new Float32Array(3 * e), g = new Float32Array(3 * e), h = new Float32Array(2 * e);
    g[2] = 1, h[0] = .5, h[1] = .5;
    for (var i = 0, j = 3, k = 2; b >= i; i++, j += 3, k += 2) {
        var l = c + i / b * d;
        f[j] = a * Math.cos(l), f[j + 1] = a * Math.sin(l), g[j + 2] = 1, h[k] = (f[j] / a + 1) / 2, 
        h[k + 1] = (f[j + 1] / a + 1) / 2;
    }
    for (var m = [], j = 1; b >= j; j++) m.push(j, j + 1, 0);
    this.setIndex(new THREE.BufferAttribute(new Uint16Array(m), 1)), this.addAttribute("position", new THREE.BufferAttribute(f, 3)), 
    this.addAttribute("normal", new THREE.BufferAttribute(g, 3)), this.addAttribute("uv", new THREE.BufferAttribute(h, 2)), 
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), a);
}, THREE.CircleBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry, THREE.CylinderBufferGeometry = function(a, b, c, d, e, f, g, h) {
    function i() {
        var a = (d + 1) * (e + 1);
        return f === !1 && (a += 2 * (d + 1) + 2 * d), a;
    }
    function j() {
        var a = d * e * 2 * 3;
        return f === !1 && (a += 2 * d * 3), a;
    }
    function k() {
        var f, i, j = new THREE.Vector3(), k = new THREE.Vector3(), l = (b - a) / c;
        for (i = 0; e >= i; i++) {
            var m = [], n = i / e, w = n * (b - a) + a;
            for (f = 0; d >= f; f++) {
                var x = f / d;
                k.x = w * Math.sin(x * h + g), k.y = -n * c + v, k.z = w * Math.cos(x * h + g), 
                p.setXYZ(s, k.x, k.y, k.z), j.copy(k), (0 === a && 0 === i || 0 === b && i === e) && (j.x = Math.sin(x * h + g), 
                j.z = Math.cos(x * h + g)), j.setY(Math.sqrt(j.x * j.x + j.z * j.z) * l).normalize(), 
                q.setXYZ(s, j.x, j.y, j.z), r.setXY(s, x, 1 - n), m.push(s), s++;
            }
            u.push(m);
        }
        for (f = 0; d > f; f++) for (i = 0; e > i; i++) {
            var y = u[i][f], z = u[i + 1][f], A = u[i + 1][f + 1], B = u[i][f + 1];
            o.setX(t, y), t++, o.setX(t, z), t++, o.setX(t, B), t++, o.setX(t, z), t++, o.setX(t, A), 
            t++, o.setX(t, B), t++;
        }
    }
    function l(c) {
        var e, f, i, j = new THREE.Vector2(), k = new THREE.Vector3(), l = c === !0 ? a : b, m = c === !0 ? 1 : -1;
        for (f = s, e = 1; d >= e; e++) p.setXYZ(s, 0, v * m, 0), q.setXYZ(s, 0, m, 0), 
        c === !0 ? (j.x = e / d, j.y = 0) : (j.x = (e - 1) / d, j.y = 1), r.setXY(s, j.x, j.y), 
        s++;
        for (i = s, e = 0; d >= e; e++) {
            var n = e / d;
            k.x = l * Math.sin(n * h + g), k.y = v * m, k.z = l * Math.cos(n * h + g), p.setXYZ(s, k.x, k.y, k.z), 
            q.setXYZ(s, 0, m, 0), r.setXY(s, n, c === !0 ? 1 : 0), s++;
        }
        for (e = 0; d > e; e++) {
            var u = f + e, w = i + e;
            c === !0 ? (o.setX(t, w), t++, o.setX(t, w + 1), t++, o.setX(t, u), t++) : (o.setX(t, w + 1), 
            t++, o.setX(t, w), t++, o.setX(t, u), t++);
        }
    }
    THREE.BufferGeometry.call(this), this.type = "CylinderBufferGeometry", this.parameters = {
        radiusTop: a,
        radiusBottom: b,
        height: c,
        radialSegments: d,
        heightSegments: e,
        openEnded: f,
        thetaStart: g,
        thetaLength: h
    }, a = void 0 !== a ? a : 20, b = void 0 !== b ? b : 20, c = void 0 !== c ? c : 100, 
    d = Math.floor(d) || 8, e = Math.floor(e) || 1, f = void 0 !== f ? f : !1, g = void 0 !== g ? g : 0, 
    h = void 0 !== h ? h : 2 * Math.PI;
    var m = i(), n = j(), o = new THREE.BufferAttribute(new (n > 65535 ? Uint32Array : Uint16Array)(n), 1), p = new THREE.BufferAttribute(new Float32Array(3 * m), 3), q = new THREE.BufferAttribute(new Float32Array(3 * m), 3), r = new THREE.BufferAttribute(new Float32Array(2 * m), 2), s = 0, t = 0, u = [], v = c / 2;
    k(), f === !1 && (a > 0 && l(!0), b > 0 && l(!1)), this.setIndex(o), this.addAttribute("position", p), 
    this.addAttribute("normal", q), this.addAttribute("uv", r);
}, THREE.CylinderBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.CylinderBufferGeometry.prototype.constructor = THREE.CylinderBufferGeometry, 
THREE.CylinderGeometry = function(a, b, c, d, e, f, g, h) {
    THREE.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
        radiusTop: a,
        radiusBottom: b,
        height: c,
        radialSegments: d,
        heightSegments: e,
        openEnded: f,
        thetaStart: g,
        thetaLength: h
    }, this.fromBufferGeometry(new THREE.CylinderBufferGeometry(a, b, c, d, e, f, g, h)), 
    this.mergeVertices();
}, THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry, 
THREE.EdgesGeometry = function(a, b) {
    function c(a, b) {
        return a - b;
    }
    THREE.BufferGeometry.call(this), b = void 0 !== b ? b : 1;
    var d, e = Math.cos(THREE.Math.degToRad(b)), f = [ 0, 0 ], g = {}, h = [ "a", "b", "c" ];
    a instanceof THREE.BufferGeometry ? (d = new THREE.Geometry(), d.fromBufferGeometry(a)) : d = a.clone(), 
    d.mergeVertices(), d.computeFaceNormals();
    for (var i = d.vertices, j = d.faces, k = 0, l = j.length; l > k; k++) for (var m = j[k], n = 0; 3 > n; n++) {
        f[0] = m[h[n]], f[1] = m[h[(n + 1) % 3]], f.sort(c);
        var o = f.toString();
        void 0 === g[o] ? g[o] = {
            vert1: f[0],
            vert2: f[1],
            face1: k,
            face2: void 0
        } : g[o].face2 = k;
    }
    var p = [];
    for (var o in g) {
        var q = g[o];
        if (void 0 === q.face2 || j[q.face1].normal.dot(j[q.face2].normal) <= e) {
            var r = i[q.vert1];
            p.push(r.x), p.push(r.y), p.push(r.z), r = i[q.vert2], p.push(r.x), p.push(r.y), 
            p.push(r.z);
        }
    }
    this.addAttribute("position", new THREE.BufferAttribute(new Float32Array(p), 3));
}, THREE.EdgesGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry, THREE.ExtrudeGeometry = function(a, b) {
    return "undefined" == typeof a ? void (a = []) : (THREE.Geometry.call(this), this.type = "ExtrudeGeometry", 
    a = Array.isArray(a) ? a : [ a ], this.addShapeList(a, b), void this.computeFaceNormals());
}, THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry, 
THREE.ExtrudeGeometry.prototype.addShapeList = function(a, b) {
    for (var c = a.length, d = 0; c > d; d++) {
        var e = a[d];
        this.addShape(e, b);
    }
}, THREE.ExtrudeGeometry.prototype.addShape = function(a, b) {
    function c(a, b, c) {
        return b || console.error("THREE.ExtrudeGeometry: vec does not exist"), b.clone().multiplyScalar(c).add(a);
    }
    function d(a, b, c) {
        var d, e, f = 1, g = a.x - b.x, h = a.y - b.y, i = c.x - a.x, j = c.y - a.y, k = g * g + h * h, l = g * j - h * i;
        if (Math.abs(l) > Number.EPSILON) {
            var m = Math.sqrt(k), n = Math.sqrt(i * i + j * j), o = b.x - h / m, p = b.y + g / m, q = c.x - j / n, r = c.y + i / n, s = ((q - o) * j - (r - p) * i) / (g * j - h * i);
            d = o + g * s - a.x, e = p + h * s - a.y;
            var t = d * d + e * e;
            if (2 >= t) return new THREE.Vector2(d, e);
            f = Math.sqrt(t / 2);
        } else {
            var u = !1;
            g > Number.EPSILON ? i > Number.EPSILON && (u = !0) : g < -Number.EPSILON ? i < -Number.EPSILON && (u = !0) : Math.sign(h) === Math.sign(j) && (u = !0), 
            u ? (d = -h, e = g, f = Math.sqrt(k)) : (d = g, e = h, f = Math.sqrt(k / 2));
        }
        return new THREE.Vector2(d / f, e / f);
    }
    function e() {
        if (t) {
            var a = 0, b = Q * a;
            for (T = 0; R > T; T++) P = I[T], i(P[2] + b, P[1] + b, P[0] + b);
            for (a = v + 2 * s, b = Q * a, T = 0; R > T; T++) P = I[T], i(P[0] + b, P[1] + b, P[2] + b);
        } else {
            for (T = 0; R > T; T++) P = I[T], i(P[2], P[1], P[0]);
            for (T = 0; R > T; T++) P = I[T], i(P[0] + Q * v, P[1] + Q * v, P[2] + Q * v);
        }
    }
    function f() {
        var a = 0;
        for (g(J, a), a += J.length, A = 0, B = G.length; B > A; A++) z = G[A], g(z, a), 
        a += z.length;
    }
    function g(a, b) {
        var c, d;
        for (T = a.length; --T >= 0; ) {
            c = T, d = T - 1, 0 > d && (d = a.length - 1);
            var e = 0, f = v + 2 * s;
            for (e = 0; f > e; e++) {
                var g = Q * e, h = Q * (e + 1), i = b + c + g, k = b + d + g, l = b + d + h, m = b + c + h;
                j(i, k, l, m, a, e, f, c, d);
            }
        }
    }
    function h(a, b, c) {
        C.vertices.push(new THREE.Vector3(a, b, c));
    }
    function i(a, b, c) {
        a += D, b += D, c += D, C.faces.push(new THREE.Face3(a, b, c, null, null, 0));
        var d = y.generateTopUV(C, a, b, c);
        C.faceVertexUvs[0].push(d);
    }
    function j(a, b, c, d, e, f, g, h, i) {
        a += D, b += D, c += D, d += D, C.faces.push(new THREE.Face3(a, b, d, null, null, 1)), 
        C.faces.push(new THREE.Face3(b, c, d, null, null, 1));
        var j = y.generateSideWallUV(C, a, b, c, d);
        C.faceVertexUvs[0].push([ j[0], j[1], j[3] ]), C.faceVertexUvs[0].push([ j[1], j[2], j[3] ]);
    }
    var k, l, m, n, o, p = void 0 !== b.amount ? b.amount : 100, q = void 0 !== b.bevelThickness ? b.bevelThickness : 6, r = void 0 !== b.bevelSize ? b.bevelSize : q - 2, s = void 0 !== b.bevelSegments ? b.bevelSegments : 3, t = void 0 !== b.bevelEnabled ? b.bevelEnabled : !0, u = void 0 !== b.curveSegments ? b.curveSegments : 12, v = void 0 !== b.steps ? b.steps : 1, w = b.extrudePath, x = !1, y = void 0 !== b.UVGenerator ? b.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;
    w && (k = w.getSpacedPoints(v), x = !0, t = !1, l = void 0 !== b.frames ? b.frames : new THREE.TubeGeometry.FrenetFrames(w, v, !1), 
    m = new THREE.Vector3(), n = new THREE.Vector3(), o = new THREE.Vector3()), t || (s = 0, 
    q = 0, r = 0);
    var z, A, B, C = this, D = this.vertices.length, E = a.extractPoints(u), F = E.shape, G = E.holes, H = !THREE.ShapeUtils.isClockWise(F);
    if (H) {
        for (F = F.reverse(), A = 0, B = G.length; B > A; A++) z = G[A], THREE.ShapeUtils.isClockWise(z) && (G[A] = z.reverse());
        H = !1;
    }
    var I = THREE.ShapeUtils.triangulateShape(F, G), J = F;
    for (A = 0, B = G.length; B > A; A++) z = G[A], F = F.concat(z);
    for (var K, L, M, N, O, P, Q = F.length, R = I.length, S = [], T = 0, U = J.length, V = U - 1, W = T + 1; U > T; T++, 
    V++, W++) V === U && (V = 0), W === U && (W = 0), S[T] = d(J[T], J[V], J[W]);
    var X, Y = [], Z = S.concat();
    for (A = 0, B = G.length; B > A; A++) {
        for (z = G[A], X = [], T = 0, U = z.length, V = U - 1, W = T + 1; U > T; T++, V++, 
        W++) V === U && (V = 0), W === U && (W = 0), X[T] = d(z[T], z[V], z[W]);
        Y.push(X), Z = Z.concat(X);
    }
    for (K = 0; s > K; K++) {
        for (M = K / s, N = q * (1 - M), L = r * Math.sin(M * Math.PI / 2), T = 0, U = J.length; U > T; T++) O = c(J[T], S[T], L), 
        h(O.x, O.y, -N);
        for (A = 0, B = G.length; B > A; A++) for (z = G[A], X = Y[A], T = 0, U = z.length; U > T; T++) O = c(z[T], X[T], L), 
        h(O.x, O.y, -N);
    }
    for (L = r, T = 0; Q > T; T++) O = t ? c(F[T], Z[T], L) : F[T], x ? (n.copy(l.normals[0]).multiplyScalar(O.x), 
    m.copy(l.binormals[0]).multiplyScalar(O.y), o.copy(k[0]).add(n).add(m), h(o.x, o.y, o.z)) : h(O.x, O.y, 0);
    var $;
    for ($ = 1; v >= $; $++) for (T = 0; Q > T; T++) O = t ? c(F[T], Z[T], L) : F[T], 
    x ? (n.copy(l.normals[$]).multiplyScalar(O.x), m.copy(l.binormals[$]).multiplyScalar(O.y), 
    o.copy(k[$]).add(n).add(m), h(o.x, o.y, o.z)) : h(O.x, O.y, p / v * $);
    for (K = s - 1; K >= 0; K--) {
        for (M = K / s, N = q * (1 - M), L = r * Math.sin(M * Math.PI / 2), T = 0, U = J.length; U > T; T++) O = c(J[T], S[T], L), 
        h(O.x, O.y, p + N);
        for (A = 0, B = G.length; B > A; A++) for (z = G[A], X = Y[A], T = 0, U = z.length; U > T; T++) O = c(z[T], X[T], L), 
        x ? h(O.x, O.y + k[v - 1].y, k[v - 1].x + N) : h(O.x, O.y, p + N);
    }
    e(), f();
}, THREE.ExtrudeGeometry.WorldUVGenerator = {
    generateTopUV: function(a, b, c, d) {
        var e = a.vertices, f = e[b], g = e[c], h = e[d];
        return [ new THREE.Vector2(f.x, f.y), new THREE.Vector2(g.x, g.y), new THREE.Vector2(h.x, h.y) ];
    },
    generateSideWallUV: function(a, b, c, d, e) {
        var f = a.vertices, g = f[b], h = f[c], i = f[d], j = f[e];
        return Math.abs(g.y - h.y) < .01 ? [ new THREE.Vector2(g.x, 1 - g.z), new THREE.Vector2(h.x, 1 - h.z), new THREE.Vector2(i.x, 1 - i.z), new THREE.Vector2(j.x, 1 - j.z) ] : [ new THREE.Vector2(g.y, 1 - g.z), new THREE.Vector2(h.y, 1 - h.z), new THREE.Vector2(i.y, 1 - i.z), new THREE.Vector2(j.y, 1 - j.z) ];
    }
}, THREE.ShapeGeometry = function(a, b) {
    THREE.Geometry.call(this), this.type = "ShapeGeometry", Array.isArray(a) === !1 && (a = [ a ]), 
    this.addShapeList(a, b), this.computeFaceNormals();
}, THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry, 
THREE.ShapeGeometry.prototype.addShapeList = function(a, b) {
    for (var c = 0, d = a.length; d > c; c++) this.addShape(a[c], b);
    return this;
}, THREE.ShapeGeometry.prototype.addShape = function(a, b) {
    void 0 === b && (b = {});
    var c, d, e, f = void 0 !== b.curveSegments ? b.curveSegments : 12, g = b.material, h = void 0 === b.UVGenerator ? THREE.ExtrudeGeometry.WorldUVGenerator : b.UVGenerator, i = this.vertices.length, j = a.extractPoints(f), k = j.shape, l = j.holes, m = !THREE.ShapeUtils.isClockWise(k);
    if (m) {
        for (k = k.reverse(), c = 0, d = l.length; d > c; c++) e = l[c], THREE.ShapeUtils.isClockWise(e) && (l[c] = e.reverse());
        m = !1;
    }
    var n = THREE.ShapeUtils.triangulateShape(k, l);
    for (c = 0, d = l.length; d > c; c++) e = l[c], k = k.concat(e);
    var o, p, q = k.length, r = n.length;
    for (c = 0; q > c; c++) o = k[c], this.vertices.push(new THREE.Vector3(o.x, o.y, 0));
    for (c = 0; r > c; c++) {
        p = n[c];
        var s = p[0] + i, t = p[1] + i, u = p[2] + i;
        this.faces.push(new THREE.Face3(s, t, u, null, null, g)), this.faceVertexUvs[0].push(h.generateTopUV(this, s, t, u));
    }
}, THREE.LatheBufferGeometry = function(a, b, c, d) {
    THREE.BufferGeometry.call(this), this.type = "LatheBufferGeometry", this.parameters = {
        points: a,
        segments: b,
        phiStart: c,
        phiLength: d
    }, b = Math.floor(b) || 12, c = c || 0, d = d || 2 * Math.PI, d = THREE.Math.clamp(d, 0, 2 * Math.PI);
    var e, f, g, h = (b + 1) * a.length, i = b * a.length * 2 * 3, j = new THREE.BufferAttribute(new (i > 65535 ? Uint32Array : Uint16Array)(i), 1), k = new THREE.BufferAttribute(new Float32Array(3 * h), 3), l = new THREE.BufferAttribute(new Float32Array(2 * h), 2), m = 0, n = 0, o = (1 / (a.length - 1), 
    1 / b), p = new THREE.Vector3(), q = new THREE.Vector2();
    for (f = 0; b >= f; f++) {
        var r = c + f * o * d, s = Math.sin(r), t = Math.cos(r);
        for (g = 0; g <= a.length - 1; g++) p.x = a[g].x * s, p.y = a[g].y, p.z = a[g].x * t, 
        k.setXYZ(m, p.x, p.y, p.z), q.x = f / b, q.y = g / (a.length - 1), l.setXY(m, q.x, q.y), 
        m++;
    }
    for (f = 0; b > f; f++) for (g = 0; g < a.length - 1; g++) {
        e = g + f * a.length;
        var u = e, v = e + a.length, w = e + a.length + 1, x = e + 1;
        j.setX(n, u), n++, j.setX(n, v), n++, j.setX(n, x), n++, j.setX(n, v), n++, j.setX(n, w), 
        n++, j.setX(n, x), n++;
    }
    if (this.setIndex(j), this.addAttribute("position", k), this.addAttribute("uv", l), 
    this.computeVertexNormals(), d === 2 * Math.PI) {
        var y = this.attributes.normal.array, z = new THREE.Vector3(), A = new THREE.Vector3(), B = new THREE.Vector3();
        for (e = b * a.length * 3, f = 0, g = 0; f < a.length; f++, g += 3) z.x = y[g + 0], 
        z.y = y[g + 1], z.z = y[g + 2], A.x = y[e + g + 0], A.y = y[e + g + 1], A.z = y[e + g + 2], 
        B.addVectors(z, A).normalize(), y[g + 0] = y[e + g + 0] = B.x, y[g + 1] = y[e + g + 1] = B.y, 
        y[g + 2] = y[e + g + 2] = B.z;
    }
}, THREE.LatheBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.LatheBufferGeometry.prototype.constructor = THREE.LatheBufferGeometry, THREE.LatheGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
        points: a,
        segments: b,
        phiStart: c,
        phiLength: d
    }, this.fromBufferGeometry(new THREE.LatheBufferGeometry(a, b, c, d)), this.mergeVertices();
}, THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry, 
THREE.PlaneGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
        width: a,
        height: b,
        widthSegments: c,
        heightSegments: d
    }, this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a, b, c, d));
}, THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry, 
THREE.PlaneBufferGeometry = function(a, b, c, d) {
    THREE.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
        width: a,
        height: b,
        widthSegments: c,
        heightSegments: d
    };
    for (var e = a / 2, f = b / 2, g = Math.floor(c) || 1, h = Math.floor(d) || 1, i = g + 1, j = h + 1, k = a / g, l = b / h, m = new Float32Array(i * j * 3), n = new Float32Array(i * j * 3), o = new Float32Array(i * j * 2), p = 0, q = 0, r = 0; j > r; r++) for (var s = r * l - f, t = 0; i > t; t++) {
        var u = t * k - e;
        m[p] = u, m[p + 1] = -s, n[p + 2] = 1, o[q] = t / g, o[q + 1] = 1 - r / h, p += 3, 
        q += 2;
    }
    p = 0;
    for (var v = new (m.length / 3 > 65535 ? Uint32Array : Uint16Array)(g * h * 6), r = 0; h > r; r++) for (var t = 0; g > t; t++) {
        var w = t + i * r, x = t + i * (r + 1), y = t + 1 + i * (r + 1), z = t + 1 + i * r;
        v[p] = w, v[p + 1] = x, v[p + 2] = z, v[p + 3] = x, v[p + 4] = y, v[p + 5] = z, 
        p += 6;
    }
    this.setIndex(new THREE.BufferAttribute(v, 1)), this.addAttribute("position", new THREE.BufferAttribute(m, 3)), 
    this.addAttribute("normal", new THREE.BufferAttribute(n, 3)), this.addAttribute("uv", new THREE.BufferAttribute(o, 2));
}, THREE.PlaneBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry, THREE.RingBufferGeometry = function(a, b, c, d, e, f) {
    THREE.BufferGeometry.call(this), this.type = "RingBufferGeometry", this.parameters = {
        innerRadius: a,
        outerRadius: b,
        thetaSegments: c,
        phiSegments: d,
        thetaStart: e,
        thetaLength: f
    }, a = a || 20, b = b || 50, e = void 0 !== e ? e : 0, f = void 0 !== f ? f : 2 * Math.PI, 
    c = void 0 !== c ? Math.max(3, c) : 8, d = void 0 !== d ? Math.max(1, d) : 1;
    var g, h, i, j = (c + 1) * (d + 1), k = c * d * 2 * 3, l = new THREE.BufferAttribute(new (k > 65535 ? Uint32Array : Uint16Array)(k), 1), m = new THREE.BufferAttribute(new Float32Array(3 * j), 3), n = new THREE.BufferAttribute(new Float32Array(3 * j), 3), o = new THREE.BufferAttribute(new Float32Array(2 * j), 2), p = 0, q = 0, r = a, s = (b - a) / d, t = new THREE.Vector3(), u = new THREE.Vector2();
    for (h = 0; d >= h; h++) {
        for (i = 0; c >= i; i++) g = e + i / c * f, t.x = r * Math.cos(g), t.y = r * Math.sin(g), 
        m.setXYZ(p, t.x, t.y, t.z), n.setXYZ(p, 0, 0, 1), u.x = (t.x / b + 1) / 2, u.y = (t.y / b + 1) / 2, 
        o.setXY(p, u.x, u.y), p++;
        r += s;
    }
    for (h = 0; d > h; h++) {
        var v = h * (c + 1);
        for (i = 0; c > i; i++) {
            g = i + v;
            var w = g, x = g + c + 1, y = g + c + 2, z = g + 1;
            l.setX(q, w), q++, l.setX(q, x), q++, l.setX(q, y), q++, l.setX(q, w), q++, l.setX(q, y), 
            q++, l.setX(q, z), q++;
        }
    }
    this.setIndex(l), this.addAttribute("position", m), this.addAttribute("normal", n), 
    this.addAttribute("uv", o);
}, THREE.RingBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.RingBufferGeometry.prototype.constructor = THREE.RingBufferGeometry, THREE.RingGeometry = function(a, b, c, d, e, f) {
    THREE.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
        innerRadius: a,
        outerRadius: b,
        thetaSegments: c,
        phiSegments: d,
        thetaStart: e,
        thetaLength: f
    }, this.fromBufferGeometry(new THREE.RingBufferGeometry(a, b, c, d, e, f));
}, THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.RingGeometry.prototype.constructor = THREE.RingGeometry, 
THREE.SphereGeometry = function(a, b, c, d, e, f, g) {
    THREE.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
        radius: a,
        widthSegments: b,
        heightSegments: c,
        phiStart: d,
        phiLength: e,
        thetaStart: f,
        thetaLength: g
    }, this.fromBufferGeometry(new THREE.SphereBufferGeometry(a, b, c, d, e, f, g));
}, THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry, 
THREE.SphereBufferGeometry = function(a, b, c, d, e, f, g) {
    THREE.BufferGeometry.call(this), this.type = "SphereBufferGeometry", this.parameters = {
        radius: a,
        widthSegments: b,
        heightSegments: c,
        phiStart: d,
        phiLength: e,
        thetaStart: f,
        thetaLength: g
    }, a = a || 50, b = Math.max(3, Math.floor(b) || 8), c = Math.max(2, Math.floor(c) || 6), 
    d = void 0 !== d ? d : 0, e = void 0 !== e ? e : 2 * Math.PI, f = void 0 !== f ? f : 0, 
    g = void 0 !== g ? g : Math.PI;
    for (var h = f + g, i = (b + 1) * (c + 1), j = new THREE.BufferAttribute(new Float32Array(3 * i), 3), k = new THREE.BufferAttribute(new Float32Array(3 * i), 3), l = new THREE.BufferAttribute(new Float32Array(2 * i), 2), m = 0, n = [], o = new THREE.Vector3(), p = 0; c >= p; p++) {
        for (var q = [], r = p / c, s = 0; b >= s; s++) {
            var t = s / b, u = -a * Math.cos(d + t * e) * Math.sin(f + r * g), v = a * Math.cos(f + r * g), w = a * Math.sin(d + t * e) * Math.sin(f + r * g);
            o.set(u, v, w).normalize(), j.setXYZ(m, u, v, w), k.setXYZ(m, o.x, o.y, o.z), l.setXY(m, t, 1 - r), 
            q.push(m), m++;
        }
        n.push(q);
    }
    for (var x = [], p = 0; c > p; p++) for (var s = 0; b > s; s++) {
        var y = n[p][s + 1], z = n[p][s], A = n[p + 1][s], B = n[p + 1][s + 1];
        (0 !== p || f > 0) && x.push(y, z, B), (p !== c - 1 || h < Math.PI) && x.push(z, A, B);
    }
    this.setIndex(new (j.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute)(x, 1)), 
    this.addAttribute("position", j), this.addAttribute("normal", k), this.addAttribute("uv", l), 
    this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), a);
}, THREE.SphereBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry, THREE.TextGeometry = function(a, b) {
    b = b || {};
    var c = b.font;
    if (c instanceof THREE.Font == !1) return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."), 
    new THREE.Geometry();
    var d = c.generateShapes(a, b.size, b.curveSegments);
    b.amount = void 0 !== b.height ? b.height : 50, void 0 === b.bevelThickness && (b.bevelThickness = 10), 
    void 0 === b.bevelSize && (b.bevelSize = 8), void 0 === b.bevelEnabled && (b.bevelEnabled = !1), 
    THREE.ExtrudeGeometry.call(this, d, b), this.type = "TextGeometry";
}, THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype), 
THREE.TextGeometry.prototype.constructor = THREE.TextGeometry, THREE.TorusBufferGeometry = function(a, b, c, d, e) {
    THREE.BufferGeometry.call(this), this.type = "TorusBufferGeometry", this.parameters = {
        radius: a,
        tube: b,
        radialSegments: c,
        tubularSegments: d,
        arc: e
    }, a = a || 100, b = b || 40, c = Math.floor(c) || 8, d = Math.floor(d) || 6, e = e || 2 * Math.PI;
    var f, g, h = (c + 1) * (d + 1), i = c * d * 2 * 3, j = new (i > 65535 ? Uint32Array : Uint16Array)(i), k = new Float32Array(3 * h), l = new Float32Array(3 * h), m = new Float32Array(2 * h), n = 0, o = 0, p = 0, q = new THREE.Vector3(), r = new THREE.Vector3(), s = new THREE.Vector3();
    for (f = 0; c >= f; f++) for (g = 0; d >= g; g++) {
        var t = g / d * e, u = f / c * Math.PI * 2;
        r.x = (a + b * Math.cos(u)) * Math.cos(t), r.y = (a + b * Math.cos(u)) * Math.sin(t), 
        r.z = b * Math.sin(u), k[n] = r.x, k[n + 1] = r.y, k[n + 2] = r.z, q.x = a * Math.cos(t), 
        q.y = a * Math.sin(t), s.subVectors(r, q).normalize(), l[n] = s.x, l[n + 1] = s.y, 
        l[n + 2] = s.z, m[o] = g / d, m[o + 1] = f / c, n += 3, o += 2;
    }
    for (f = 1; c >= f; f++) for (g = 1; d >= g; g++) {
        var v = (d + 1) * f + g - 1, w = (d + 1) * (f - 1) + g - 1, x = (d + 1) * (f - 1) + g, y = (d + 1) * f + g;
        j[p] = v, j[p + 1] = w, j[p + 2] = y, j[p + 3] = w, j[p + 4] = x, j[p + 5] = y, 
        p += 6;
    }
    this.setIndex(new THREE.BufferAttribute(j, 1)), this.addAttribute("position", new THREE.BufferAttribute(k, 3)), 
    this.addAttribute("normal", new THREE.BufferAttribute(l, 3)), this.addAttribute("uv", new THREE.BufferAttribute(m, 2));
}, THREE.TorusBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.TorusBufferGeometry.prototype.constructor = THREE.TorusBufferGeometry, THREE.TorusGeometry = function(a, b, c, d, e) {
    THREE.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
        radius: a,
        tube: b,
        radialSegments: c,
        tubularSegments: d,
        arc: e
    }, this.fromBufferGeometry(new THREE.TorusBufferGeometry(a, b, c, d, e));
}, THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry, 
THREE.TorusKnotBufferGeometry = function(a, b, c, d, e, f) {
    function g(a, b, c, d, e) {
        var f = Math.cos(a), g = Math.sin(a), h = c / b * a, i = Math.cos(h);
        e.x = d * (2 + i) * .5 * f, e.y = d * (2 + i) * g * .5, e.z = d * Math.sin(h) * .5;
    }
    THREE.BufferGeometry.call(this), this.type = "TorusKnotBufferGeometry", this.parameters = {
        radius: a,
        tube: b,
        tubularSegments: c,
        radialSegments: d,
        p: e,
        q: f
    }, a = a || 100, b = b || 40, c = Math.floor(c) || 64, d = Math.floor(d) || 8, e = e || 2, 
    f = f || 3;
    var h, i, j = (d + 1) * (c + 1), k = d * c * 2 * 3, l = new THREE.BufferAttribute(new (k > 65535 ? Uint32Array : Uint16Array)(k), 1), m = new THREE.BufferAttribute(new Float32Array(3 * j), 3), n = new THREE.BufferAttribute(new Float32Array(3 * j), 3), o = new THREE.BufferAttribute(new Float32Array(2 * j), 2), p = 0, q = 0, r = new THREE.Vector3(), s = new THREE.Vector3(), t = new THREE.Vector2(), u = new THREE.Vector3(), v = new THREE.Vector3(), w = new THREE.Vector3(), x = new THREE.Vector3(), y = new THREE.Vector3();
    for (h = 0; c >= h; ++h) {
        var z = h / c * e * Math.PI * 2;
        for (g(z, e, f, a, u), g(z + .01, e, f, a, v), x.subVectors(v, u), y.addVectors(v, u), 
        w.crossVectors(x, y), y.crossVectors(w, x), w.normalize(), y.normalize(), i = 0; d >= i; ++i) {
            var A = i / d * Math.PI * 2, B = -b * Math.cos(A), C = b * Math.sin(A);
            r.x = u.x + (B * y.x + C * w.x), r.y = u.y + (B * y.y + C * w.y), r.z = u.z + (B * y.z + C * w.z), 
            m.setXYZ(p, r.x, r.y, r.z), s.subVectors(r, u).normalize(), n.setXYZ(p, s.x, s.y, s.z), 
            t.x = h / c, t.y = i / d, o.setXY(p, t.x, t.y), p++;
        }
    }
    for (i = 1; c >= i; i++) for (h = 1; d >= h; h++) {
        var D = (d + 1) * (i - 1) + (h - 1), E = (d + 1) * i + (h - 1), F = (d + 1) * i + h, G = (d + 1) * (i - 1) + h;
        l.setX(q, D), q++, l.setX(q, E), q++, l.setX(q, G), q++, l.setX(q, E), q++, l.setX(q, F), 
        q++, l.setX(q, G), q++;
    }
    this.setIndex(l), this.addAttribute("position", m), this.addAttribute("normal", n), 
    this.addAttribute("uv", o);
}, THREE.TorusKnotBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.TorusKnotBufferGeometry.prototype.constructor = THREE.TorusKnotBufferGeometry, 
THREE.TorusKnotGeometry = function(a, b, c, d, e, f, g) {
    THREE.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
        radius: a,
        tube: b,
        tubularSegments: c,
        radialSegments: d,
        p: e,
        q: f
    }, void 0 !== g && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."), 
    this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(a, b, c, d, e, f)), this.mergeVertices();
}, THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry, THREE.TubeGeometry = function(a, b, c, d, e, f) {
    function g(a, b, c) {
        return D.vertices.push(new THREE.Vector3(a, b, c)) - 1;
    }
    THREE.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
        path: a,
        segments: b,
        radius: c,
        radialSegments: d,
        closed: e,
        taper: f
    }, b = b || 64, c = c || 1, d = d || 8, e = e || !1, f = f || THREE.TubeGeometry.NoTaper;
    var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C = [], D = this, E = b + 1, F = new THREE.Vector3(), G = new THREE.TubeGeometry.FrenetFrames(a, b, e), H = G.tangents, I = G.normals, J = G.binormals;
    for (this.tangents = H, this.normals = I, this.binormals = J, q = 0; E > q; q++) for (C[q] = [], 
    k = q / (E - 1), p = a.getPointAt(k), h = H[q], i = I[q], j = J[q], m = c * f(k), 
    r = 0; d > r; r++) l = r / d * 2 * Math.PI, n = -m * Math.cos(l), o = m * Math.sin(l), 
    F.copy(p), F.x += n * i.x + o * j.x, F.y += n * i.y + o * j.y, F.z += n * i.z + o * j.z, 
    C[q][r] = g(F.x, F.y, F.z);
    for (q = 0; b > q; q++) for (r = 0; d > r; r++) s = e ? (q + 1) % b : q + 1, t = (r + 1) % d, 
    u = C[q][r], v = C[s][r], w = C[s][t], x = C[q][t], y = new THREE.Vector2(q / b, r / d), 
    z = new THREE.Vector2((q + 1) / b, r / d), A = new THREE.Vector2((q + 1) / b, (r + 1) / d), 
    B = new THREE.Vector2(q / b, (r + 1) / d), this.faces.push(new THREE.Face3(u, v, x)), 
    this.faceVertexUvs[0].push([ y, z, B ]), this.faces.push(new THREE.Face3(v, w, x)), 
    this.faceVertexUvs[0].push([ z.clone(), A, B.clone() ]);
    this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry, 
THREE.TubeGeometry.NoTaper = function(a) {
    return 1;
}, THREE.TubeGeometry.SinusoidalTaper = function(a) {
    return Math.sin(Math.PI * a);
}, THREE.TubeGeometry.FrenetFrames = function(a, b, c) {
    function d() {
        n[0] = new THREE.Vector3(), o[0] = new THREE.Vector3(), f = Number.MAX_VALUE, g = Math.abs(m[0].x), 
        h = Math.abs(m[0].y), i = Math.abs(m[0].z), f >= g && (f = g, l.set(1, 0, 0)), f >= h && (f = h, 
        l.set(0, 1, 0)), f >= i && l.set(0, 0, 1), p.crossVectors(m[0], l).normalize(), 
        n[0].crossVectors(m[0], p), o[0].crossVectors(m[0], n[0]);
    }
    var e, f, g, h, i, j, k, l = new THREE.Vector3(), m = [], n = [], o = [], p = new THREE.Vector3(), q = new THREE.Matrix4(), r = b + 1;
    for (this.tangents = m, this.normals = n, this.binormals = o, j = 0; r > j; j++) k = j / (r - 1), 
    m[j] = a.getTangentAt(k), m[j].normalize();
    for (d(), j = 1; r > j; j++) n[j] = n[j - 1].clone(), o[j] = o[j - 1].clone(), p.crossVectors(m[j - 1], m[j]), 
    p.length() > Number.EPSILON && (p.normalize(), e = Math.acos(THREE.Math.clamp(m[j - 1].dot(m[j]), -1, 1)), 
    n[j].applyMatrix4(q.makeRotationAxis(p, e))), o[j].crossVectors(m[j], n[j]);
    if (c) for (e = Math.acos(THREE.Math.clamp(n[0].dot(n[r - 1]), -1, 1)), e /= r - 1, 
    m[0].dot(p.crossVectors(n[0], n[r - 1])) > 0 && (e = -e), j = 1; r > j; j++) n[j].applyMatrix4(q.makeRotationAxis(m[j], e * j)), 
    o[j].crossVectors(m[j], n[j]);
}, THREE.PolyhedronGeometry = function(a, b, c, d) {
    function e(a) {
        var b = a.normalize().clone();
        b.index = k.vertices.push(b) - 1;
        var c = h(a) / 2 / Math.PI + .5, d = i(a) / Math.PI + .5;
        return b.uv = new THREE.Vector2(c, 1 - d), b;
    }
    function f(a, b, c, d) {
        var e = new THREE.Face3(a.index, b.index, c.index, [ a.clone(), b.clone(), c.clone() ], void 0, d);
        k.faces.push(e), t.copy(a).add(b).add(c).divideScalar(3);
        var f = h(t);
        k.faceVertexUvs[0].push([ j(a.uv, a, f), j(b.uv, b, f), j(c.uv, c, f) ]);
    }
    function g(a, b) {
        for (var c = Math.pow(2, b), d = e(k.vertices[a.a]), g = e(k.vertices[a.b]), h = e(k.vertices[a.c]), i = [], j = a.materialIndex, l = 0; c >= l; l++) {
            i[l] = [];
            for (var m = e(d.clone().lerp(h, l / c)), n = e(g.clone().lerp(h, l / c)), o = c - l, p = 0; o >= p; p++) 0 === p && l === c ? i[l][p] = m : i[l][p] = e(m.clone().lerp(n, p / o));
        }
        for (var l = 0; c > l; l++) for (var p = 0; 2 * (c - l) - 1 > p; p++) {
            var q = Math.floor(p / 2);
            p % 2 === 0 ? f(i[l][q + 1], i[l + 1][q], i[l][q], j) : f(i[l][q + 1], i[l + 1][q + 1], i[l + 1][q], j);
        }
    }
    function h(a) {
        return Math.atan2(a.z, -a.x);
    }
    function i(a) {
        return Math.atan2(-a.y, Math.sqrt(a.x * a.x + a.z * a.z));
    }
    function j(a, b, c) {
        return 0 > c && 1 === a.x && (a = new THREE.Vector2(a.x - 1, a.y)), 0 === b.x && 0 === b.z && (a = new THREE.Vector2(c / 2 / Math.PI + .5, a.y)), 
        a.clone();
    }
    THREE.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
        vertices: a,
        indices: b,
        radius: c,
        detail: d
    }, c = c || 1, d = d || 0;
    for (var k = this, l = 0, m = a.length; m > l; l += 3) e(new THREE.Vector3(a[l], a[l + 1], a[l + 2]));
    for (var n = this.vertices, o = [], l = 0, p = 0, m = b.length; m > l; l += 3, p++) {
        var q = n[b[l]], r = n[b[l + 1]], s = n[b[l + 2]];
        o[p] = new THREE.Face3(q.index, r.index, s.index, [ q.clone(), r.clone(), s.clone() ], void 0, p);
    }
    for (var t = new THREE.Vector3(), l = 0, m = o.length; m > l; l++) g(o[l], d);
    for (var l = 0, m = this.faceVertexUvs[0].length; m > l; l++) {
        var u = this.faceVertexUvs[0][l], v = u[0].x, w = u[1].x, x = u[2].x, y = Math.max(v, w, x), z = Math.min(v, w, x);
        y > .9 && .1 > z && (.2 > v && (u[0].x += 1), .2 > w && (u[1].x += 1), .2 > x && (u[2].x += 1));
    }
    for (var l = 0, m = this.vertices.length; m > l; l++) this.vertices[l].multiplyScalar(c);
    this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), c);
}, THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry, THREE.DodecahedronGeometry = function(a, b) {
    var c = (1 + Math.sqrt(5)) / 2, d = 1 / c, e = [ -1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, 0, -c, 0, -d, c, 0, -d, -c, 0, d, c, 0, d ], f = [ 3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9 ];
    THREE.PolyhedronGeometry.call(this, e, f, a, b), this.type = "DodecahedronGeometry", 
    this.parameters = {
        radius: a,
        detail: b
    };
}, THREE.DodecahedronGeometry.prototype = Object.create(THREE.PolyhedronGeometry.prototype), 
THREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry, THREE.IcosahedronGeometry = function(a, b) {
    var c = (1 + Math.sqrt(5)) / 2, d = [ -1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, 0, 0, -1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, c, 0, -1, c, 0, 1, -c, 0, -1, -c, 0, 1 ], e = [ 0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1 ];
    THREE.PolyhedronGeometry.call(this, d, e, a, b), this.type = "IcosahedronGeometry", 
    this.parameters = {
        radius: a,
        detail: b
    };
}, THREE.IcosahedronGeometry.prototype = Object.create(THREE.PolyhedronGeometry.prototype), 
THREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry, THREE.OctahedronGeometry = function(a, b) {
    var c = [ 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1 ], d = [ 0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2 ];
    THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "OctahedronGeometry", 
    this.parameters = {
        radius: a,
        detail: b
    };
}, THREE.OctahedronGeometry.prototype = Object.create(THREE.PolyhedronGeometry.prototype), 
THREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry, THREE.TetrahedronGeometry = function(a, b) {
    var c = [ 1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1 ], d = [ 2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1 ];
    THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "TetrahedronGeometry", 
    this.parameters = {
        radius: a,
        detail: b
    };
}, THREE.TetrahedronGeometry.prototype = Object.create(THREE.PolyhedronGeometry.prototype), 
THREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry, THREE.ParametricGeometry = function(a, b, c) {
    THREE.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
        func: a,
        slices: b,
        stacks: c
    };
    var d, e, f, g, h, i = this.vertices, j = this.faces, k = this.faceVertexUvs[0], l = b + 1;
    for (d = 0; c >= d; d++) for (h = d / c, e = 0; b >= e; e++) g = e / b, f = a(g, h), 
    i.push(f);
    var m, n, o, p, q, r, s, t;
    for (d = 0; c > d; d++) for (e = 0; b > e; e++) m = d * l + e, n = d * l + e + 1, 
    o = (d + 1) * l + e + 1, p = (d + 1) * l + e, q = new THREE.Vector2(e / b, d / c), 
    r = new THREE.Vector2((e + 1) / b, d / c), s = new THREE.Vector2((e + 1) / b, (d + 1) / c), 
    t = new THREE.Vector2(e / b, (d + 1) / c), j.push(new THREE.Face3(m, n, p)), k.push([ q, r, t ]), 
    j.push(new THREE.Face3(n, o, p)), k.push([ r.clone(), s, t.clone() ]);
    this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry, THREE.WireframeGeometry = function(a) {
    function b(a, b) {
        return a - b;
    }
    THREE.BufferGeometry.call(this);
    var c = [ 0, 0 ], d = {}, e = [ "a", "b", "c" ];
    if (a instanceof THREE.Geometry) {
        for (var f = a.vertices, g = a.faces, h = 0, i = new Uint32Array(6 * g.length), j = 0, k = g.length; k > j; j++) for (var l = g[j], m = 0; 3 > m; m++) {
            c[0] = l[e[m]], c[1] = l[e[(m + 1) % 3]], c.sort(b);
            var n = c.toString();
            void 0 === d[n] && (i[2 * h] = c[0], i[2 * h + 1] = c[1], d[n] = !0, h++);
        }
        for (var o = new Float32Array(2 * h * 3), j = 0, k = h; k > j; j++) for (var m = 0; 2 > m; m++) {
            var p = f[i[2 * j + m]], q = 6 * j + 3 * m;
            o[q + 0] = p.x, o[q + 1] = p.y, o[q + 2] = p.z;
        }
        this.addAttribute("position", new THREE.BufferAttribute(o, 3));
    } else if (a instanceof THREE.BufferGeometry) if (null !== a.index) {
        var r = a.index.array, f = a.attributes.position, s = a.groups, h = 0;
        0 === s.length && a.addGroup(0, r.length);
        for (var i = new Uint32Array(2 * r.length), t = 0, u = s.length; u > t; ++t) for (var v = s[t], w = v.start, x = v.count, j = w, y = w + x; y > j; j += 3) for (var m = 0; 3 > m; m++) {
            c[0] = r[j + m], c[1] = r[j + (m + 1) % 3], c.sort(b);
            var n = c.toString();
            void 0 === d[n] && (i[2 * h] = c[0], i[2 * h + 1] = c[1], d[n] = !0, h++);
        }
        for (var o = new Float32Array(2 * h * 3), j = 0, k = h; k > j; j++) for (var m = 0; 2 > m; m++) {
            var q = 6 * j + 3 * m, z = i[2 * j + m];
            o[q + 0] = f.getX(z), o[q + 1] = f.getY(z), o[q + 2] = f.getZ(z);
        }
        this.addAttribute("position", new THREE.BufferAttribute(o, 3));
    } else {
        for (var f = a.attributes.position.array, h = f.length / 3, A = h / 3, o = new Float32Array(2 * h * 3), j = 0, k = A; k > j; j++) for (var m = 0; 3 > m; m++) {
            var q = 18 * j + 6 * m, B = 9 * j + 3 * m;
            o[q + 0] = f[B], o[q + 1] = f[B + 1], o[q + 2] = f[B + 2];
            var z = 9 * j + 3 * ((m + 1) % 3);
            o[q + 3] = f[z], o[q + 4] = f[z + 1], o[q + 5] = f[z + 2];
        }
        this.addAttribute("position", new THREE.BufferAttribute(o, 3));
    }
}, THREE.WireframeGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), 
THREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry, THREE.AxisHelper = function(a) {
    a = a || 1;
    var b = new Float32Array([ 0, 0, 0, a, 0, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 0, a ]), c = new Float32Array([ 1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1 ]), d = new THREE.BufferGeometry();
    d.addAttribute("position", new THREE.BufferAttribute(b, 3)), d.addAttribute("color", new THREE.BufferAttribute(c, 3));
    var e = new THREE.LineBasicMaterial({
        vertexColors: THREE.VertexColors
    });
    THREE.LineSegments.call(this, d, e);
}, THREE.AxisHelper.prototype = Object.create(THREE.LineSegments.prototype), THREE.AxisHelper.prototype.constructor = THREE.AxisHelper, 
THREE.ArrowHelper = function() {
    var a = new THREE.Geometry();
    a.vertices.push(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 1, 0));
    var b = new THREE.CylinderGeometry(0, .5, 1, 5, 1);
    return b.translate(0, -.5, 0), function(c, d, e, f, g, h) {
        THREE.Object3D.call(this), void 0 === f && (f = 16776960), void 0 === e && (e = 1), 
        void 0 === g && (g = .2 * e), void 0 === h && (h = .2 * g), this.position.copy(d), 
        this.line = new THREE.Line(a, new THREE.LineBasicMaterial({
            color: f
        })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new THREE.Mesh(b, new THREE.MeshBasicMaterial({
            color: f
        })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(c), 
        this.setLength(e, g, h);
    };
}(), THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper, 
THREE.ArrowHelper.prototype.setDirection = function() {
    var a, b = new THREE.Vector3();
    return function(c) {
        c.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : c.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (b.set(c.z, 0, -c.x).normalize(), 
        a = Math.acos(c.y), this.quaternion.setFromAxisAngle(b, a));
    };
}(), THREE.ArrowHelper.prototype.setLength = function(a, b, c) {
    void 0 === b && (b = .2 * a), void 0 === c && (c = .2 * b), this.line.scale.set(1, Math.max(0, a - b), 1), 
    this.line.updateMatrix(), this.cone.scale.set(c, b, c), this.cone.position.y = a, 
    this.cone.updateMatrix();
}, THREE.ArrowHelper.prototype.setColor = function(a) {
    this.line.material.color.set(a), this.cone.material.color.set(a);
}, THREE.BoxHelper = function(a) {
    var b = new Uint16Array([ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ]), c = new Float32Array(24), d = new THREE.BufferGeometry();
    d.setIndex(new THREE.BufferAttribute(b, 1)), d.addAttribute("position", new THREE.BufferAttribute(c, 3)), 
    THREE.LineSegments.call(this, d, new THREE.LineBasicMaterial({
        color: 16776960
    })), void 0 !== a && this.update(a);
}, THREE.BoxHelper.prototype = Object.create(THREE.LineSegments.prototype), THREE.BoxHelper.prototype.constructor = THREE.BoxHelper, 
THREE.BoxHelper.prototype.update = function() {
    var a = new THREE.Box3();
    return function(b) {
        if (a.setFromObject(b), !a.isEmpty()) {
            var c = a.min, d = a.max, e = this.geometry.attributes.position, f = e.array;
            f[0] = d.x, f[1] = d.y, f[2] = d.z, f[3] = c.x, f[4] = d.y, f[5] = d.z, f[6] = c.x, 
            f[7] = c.y, f[8] = d.z, f[9] = d.x, f[10] = c.y, f[11] = d.z, f[12] = d.x, f[13] = d.y, 
            f[14] = c.z, f[15] = c.x, f[16] = d.y, f[17] = c.z, f[18] = c.x, f[19] = c.y, f[20] = c.z, 
            f[21] = d.x, f[22] = c.y, f[23] = c.z, e.needsUpdate = !0, this.geometry.computeBoundingSphere();
        }
    };
}(), THREE.BoundingBoxHelper = function(a, b) {
    var c = void 0 !== b ? b : 8947848;
    this.object = a, this.box = new THREE.Box3(), THREE.Mesh.call(this, new THREE.BoxGeometry(1, 1, 1), new THREE.MeshBasicMaterial({
        color: c,
        wireframe: !0
    }));
}, THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper, 
THREE.BoundingBoxHelper.prototype.update = function() {
    this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position);
}, THREE.CameraHelper = function(a) {
    function b(a, b, d) {
        c(a, d), c(b, d);
    }
    function c(a, b) {
        d.vertices.push(new THREE.Vector3()), d.colors.push(new THREE.Color(b)), void 0 === f[a] && (f[a] = []), 
        f[a].push(d.vertices.length - 1);
    }
    var d = new THREE.Geometry(), e = new THREE.LineBasicMaterial({
        color: 16777215,
        vertexColors: THREE.FaceColors
    }), f = {}, g = 16755200, h = 16711680, i = 43775, j = 16777215, k = 3355443;
    b("n1", "n2", g), b("n2", "n4", g), b("n4", "n3", g), b("n3", "n1", g), b("f1", "f2", g), 
    b("f2", "f4", g), b("f4", "f3", g), b("f3", "f1", g), b("n1", "f1", g), b("n2", "f2", g), 
    b("n3", "f3", g), b("n4", "f4", g), b("p", "n1", h), b("p", "n2", h), b("p", "n3", h), 
    b("p", "n4", h), b("u1", "u2", i), b("u2", "u3", i), b("u3", "u1", i), b("c", "t", j), 
    b("p", "c", k), b("cn1", "cn2", k), b("cn3", "cn4", k), b("cf1", "cf2", k), b("cf3", "cf4", k), 
    THREE.LineSegments.call(this, d, e), this.camera = a, this.camera.updateProjectionMatrix(), 
    this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = f, this.update();
}, THREE.CameraHelper.prototype = Object.create(THREE.LineSegments.prototype), THREE.CameraHelper.prototype.constructor = THREE.CameraHelper, 
THREE.CameraHelper.prototype.update = function() {
    function a(a, f, g, h) {
        d.set(f, g, h).unproject(e);
        var i = c[a];
        if (void 0 !== i) for (var j = 0, k = i.length; k > j; j++) b.vertices[i[j]].copy(d);
    }
    var b, c, d = new THREE.Vector3(), e = new THREE.Camera();
    return function() {
        b = this.geometry, c = this.pointMap;
        var d = 1, f = 1;
        e.projectionMatrix.copy(this.camera.projectionMatrix), a("c", 0, 0, -1), a("t", 0, 0, 1), 
        a("n1", -d, -f, -1), a("n2", d, -f, -1), a("n3", -d, f, -1), a("n4", d, f, -1), 
        a("f1", -d, -f, 1), a("f2", d, -f, 1), a("f3", -d, f, 1), a("f4", d, f, 1), a("u1", .7 * d, 1.1 * f, -1), 
        a("u2", .7 * -d, 1.1 * f, -1), a("u3", 0, 2 * f, -1), a("cf1", -d, 0, 1), a("cf2", d, 0, 1), 
        a("cf3", 0, -f, 1), a("cf4", 0, f, 1), a("cn1", -d, 0, -1), a("cn2", d, 0, -1), 
        a("cn3", 0, -f, -1), a("cn4", 0, f, -1), b.verticesNeedUpdate = !0;
    };
}(), THREE.DirectionalLightHelper = function(a, b) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, 
    this.matrixAutoUpdate = !1, b = b || 1;
    var c = new THREE.Geometry();
    c.vertices.push(new THREE.Vector3(-b, b, 0), new THREE.Vector3(b, b, 0), new THREE.Vector3(b, -b, 0), new THREE.Vector3(-b, -b, 0), new THREE.Vector3(-b, b, 0));
    var d = new THREE.LineBasicMaterial({
        fog: !1
    });
    d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new THREE.Line(c, d), 
    this.add(this.lightPlane), c = new THREE.Geometry(), c.vertices.push(new THREE.Vector3(), new THREE.Vector3()), 
    d = new THREE.LineBasicMaterial({
        fog: !1
    }), d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new THREE.Line(c, d), 
    this.add(this.targetLine), this.update();
}, THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype), 
THREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper, 
THREE.DirectionalLightHelper.prototype.dispose = function() {
    this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), 
    this.targetLine.material.dispose();
}, THREE.DirectionalLightHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
    return function() {
        a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), 
        c.subVectors(b, a), this.lightPlane.lookAt(c), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), 
        this.targetLine.geometry.vertices[1].copy(c), this.targetLine.geometry.verticesNeedUpdate = !0, 
        this.targetLine.material.color.copy(this.lightPlane.material.color);
    };
}(), THREE.EdgesHelper = function(a, b, c) {
    var d = void 0 !== b ? b : 16777215;
    THREE.LineSegments.call(this, new THREE.EdgesGeometry(a.geometry, c), new THREE.LineBasicMaterial({
        color: d
    })), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1;
}, THREE.EdgesHelper.prototype = Object.create(THREE.LineSegments.prototype), THREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper, 
THREE.FaceNormalsHelper = function(a, b, c, d) {
    this.object = a, this.size = void 0 !== b ? b : 1;
    var e = void 0 !== c ? c : 16776960, f = void 0 !== d ? d : 1, g = 0, h = this.object.geometry;
    h instanceof THREE.Geometry ? g = h.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");
    var i = new THREE.BufferGeometry(), j = new THREE.Float32Attribute(2 * g * 3, 3);
    i.addAttribute("position", j), THREE.LineSegments.call(this, i, new THREE.LineBasicMaterial({
        color: e,
        linewidth: f
    })), this.matrixAutoUpdate = !1, this.update();
}, THREE.FaceNormalsHelper.prototype = Object.create(THREE.LineSegments.prototype), 
THREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper, THREE.FaceNormalsHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Matrix3();
    return function() {
        this.object.updateMatrixWorld(!0), c.getNormalMatrix(this.object.matrixWorld);
        for (var d = this.object.matrixWorld, e = this.geometry.attributes.position, f = this.object.geometry, g = f.vertices, h = f.faces, i = 0, j = 0, k = h.length; k > j; j++) {
            var l = h[j], m = l.normal;
            a.copy(g[l.a]).add(g[l.b]).add(g[l.c]).divideScalar(3).applyMatrix4(d), b.copy(m).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a), 
            e.setXYZ(i, a.x, a.y, a.z), i += 1, e.setXYZ(i, b.x, b.y, b.z), i += 1;
        }
        return e.needsUpdate = !0, this;
    };
}(), THREE.GridHelper = function(a, b) {
    var c = new THREE.Geometry(), d = new THREE.LineBasicMaterial({
        vertexColors: THREE.VertexColors
    });
    this.color1 = new THREE.Color(4473924), this.color2 = new THREE.Color(8947848);
    for (var e = -a; a >= e; e += b) {
        c.vertices.push(new THREE.Vector3(-a, 0, e), new THREE.Vector3(a, 0, e), new THREE.Vector3(e, 0, -a), new THREE.Vector3(e, 0, a));
        var f = 0 === e ? this.color1 : this.color2;
        c.colors.push(f, f, f, f);
    }
    THREE.LineSegments.call(this, c, d);
}, THREE.GridHelper.prototype = Object.create(THREE.LineSegments.prototype), THREE.GridHelper.prototype.constructor = THREE.GridHelper, 
THREE.GridHelper.prototype.setColors = function(a, b) {
    this.color1.set(a), this.color2.set(b), this.geometry.colorsNeedUpdate = !0;
}, THREE.HemisphereLightHelper = function(a, b) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, 
    this.matrixAutoUpdate = !1, this.colors = [ new THREE.Color(), new THREE.Color() ];
    var c = new THREE.SphereGeometry(b, 4, 2);
    c.rotateX(-Math.PI / 2);
    for (var d = 0, e = 8; e > d; d++) c.faces[d].color = this.colors[4 > d ? 0 : 1];
    var f = new THREE.MeshBasicMaterial({
        vertexColors: THREE.FaceColors,
        wireframe: !0
    });
    this.lightSphere = new THREE.Mesh(c, f), this.add(this.lightSphere), this.update();
}, THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype), 
THREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper, 
THREE.HemisphereLightHelper.prototype.dispose = function() {
    this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose();
}, THREE.HemisphereLightHelper.prototype.update = function() {
    var a = new THREE.Vector3();
    return function() {
        this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), 
        this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()), 
        this.lightSphere.geometry.colorsNeedUpdate = !0;
    };
}(), THREE.PointLightHelper = function(a, b) {
    this.light = a, this.light.updateMatrixWorld();
    var c = new THREE.SphereGeometry(b, 4, 2), d = new THREE.MeshBasicMaterial({
        wireframe: !0,
        fog: !1
    });
    d.color.copy(this.light.color).multiplyScalar(this.light.intensity), THREE.Mesh.call(this, c, d), 
    this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1;
}, THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper, 
THREE.PointLightHelper.prototype.dispose = function() {
    this.geometry.dispose(), this.material.dispose();
}, THREE.PointLightHelper.prototype.update = function() {
    this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
}, THREE.SkeletonHelper = function(a) {
    this.bones = this.getBoneList(a);
    for (var b = new THREE.Geometry(), c = 0; c < this.bones.length; c++) {
        var d = this.bones[c];
        d.parent instanceof THREE.Bone && (b.vertices.push(new THREE.Vector3()), b.vertices.push(new THREE.Vector3()), 
        b.colors.push(new THREE.Color(0, 0, 1)), b.colors.push(new THREE.Color(0, 1, 0)));
    }
    b.dynamic = !0;
    var e = new THREE.LineBasicMaterial({
        vertexColors: THREE.VertexColors,
        depthTest: !1,
        depthWrite: !1,
        transparent: !0
    });
    THREE.LineSegments.call(this, b, e), this.root = a, this.matrix = a.matrixWorld, 
    this.matrixAutoUpdate = !1, this.update();
}, THREE.SkeletonHelper.prototype = Object.create(THREE.LineSegments.prototype), 
THREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper, THREE.SkeletonHelper.prototype.getBoneList = function(a) {
    var b = [];
    a instanceof THREE.Bone && b.push(a);
    for (var c = 0; c < a.children.length; c++) b.push.apply(b, this.getBoneList(a.children[c]));
    return b;
}, THREE.SkeletonHelper.prototype.update = function() {
    for (var a = this.geometry, b = new THREE.Matrix4().getInverse(this.root.matrixWorld), c = new THREE.Matrix4(), d = 0, e = 0; e < this.bones.length; e++) {
        var f = this.bones[e];
        f.parent instanceof THREE.Bone && (c.multiplyMatrices(b, f.matrixWorld), a.vertices[d].setFromMatrixPosition(c), 
        c.multiplyMatrices(b, f.parent.matrixWorld), a.vertices[d + 1].setFromMatrixPosition(c), 
        d += 2);
    }
    a.verticesNeedUpdate = !0, a.computeBoundingSphere();
}, THREE.SpotLightHelper = function(a) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, 
    this.matrixAutoUpdate = !1;
    var b = new THREE.CylinderGeometry(0, 1, 1, 8, 1, !0);
    b.translate(0, -.5, 0), b.rotateX(-Math.PI / 2);
    var c = new THREE.MeshBasicMaterial({
        wireframe: !0,
        fog: !1
    });
    this.cone = new THREE.Mesh(b, c), this.add(this.cone), this.update();
}, THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper, 
THREE.SpotLightHelper.prototype.dispose = function() {
    this.cone.geometry.dispose(), this.cone.material.dispose();
}, THREE.SpotLightHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3();
    return function() {
        var c = this.light.distance ? this.light.distance : 1e4, d = c * Math.tan(this.light.angle);
        this.cone.scale.set(d, d, c), a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), 
        this.cone.lookAt(b.sub(a)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
    };
}(), THREE.VertexNormalsHelper = function(a, b, c, d) {
    this.object = a, this.size = void 0 !== b ? b : 1;
    var e = void 0 !== c ? c : 16711680, f = void 0 !== d ? d : 1, g = 0, h = this.object.geometry;
    h instanceof THREE.Geometry ? g = 3 * h.faces.length : h instanceof THREE.BufferGeometry && (g = h.attributes.normal.count);
    var i = new THREE.BufferGeometry(), j = new THREE.Float32Attribute(2 * g * 3, 3);
    i.addAttribute("position", j), THREE.LineSegments.call(this, i, new THREE.LineBasicMaterial({
        color: e,
        linewidth: f
    })), this.matrixAutoUpdate = !1, this.update();
}, THREE.VertexNormalsHelper.prototype = Object.create(THREE.LineSegments.prototype), 
THREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper, THREE.VertexNormalsHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Matrix3();
    return function() {
        var d = [ "a", "b", "c" ];
        this.object.updateMatrixWorld(!0), c.getNormalMatrix(this.object.matrixWorld);
        var e = this.object.matrixWorld, f = this.geometry.attributes.position, g = this.object.geometry;
        if (g instanceof THREE.Geometry) for (var h = g.vertices, i = g.faces, j = 0, k = 0, l = i.length; l > k; k++) for (var m = i[k], n = 0, o = m.vertexNormals.length; o > n; n++) {
            var p = h[m[d[n]]], q = m.vertexNormals[n];
            a.copy(p).applyMatrix4(e), b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a), 
            f.setXYZ(j, a.x, a.y, a.z), j += 1, f.setXYZ(j, b.x, b.y, b.z), j += 1;
        } else if (g instanceof THREE.BufferGeometry) for (var r = g.attributes.position, s = g.attributes.normal, j = 0, n = 0, o = r.count; o > n; n++) a.set(r.getX(n), r.getY(n), r.getZ(n)).applyMatrix4(e), 
        b.set(s.getX(n), s.getY(n), s.getZ(n)), b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a), 
        f.setXYZ(j, a.x, a.y, a.z), j += 1, f.setXYZ(j, b.x, b.y, b.z), j += 1;
        return f.needsUpdate = !0, this;
    };
}(), THREE.WireframeHelper = function(a, b) {
    var c = void 0 !== b ? b : 16777215;
    THREE.LineSegments.call(this, new THREE.WireframeGeometry(a.geometry), new THREE.LineBasicMaterial({
        color: c
    })), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1;
}, THREE.WireframeHelper.prototype = Object.create(THREE.LineSegments.prototype), 
THREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper, THREE.ImmediateRenderObject = function(a) {
    THREE.Object3D.call(this), this.material = a, this.render = function(a) {};
}, THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype), 
THREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject, 
THREE.MorphBlendMesh = function(a, b) {
    THREE.Mesh.call(this, a, b), this.animationsMap = {}, this.animationsList = [];
    var c = this.geometry.morphTargets.length, d = "__default", e = 0, f = c - 1, g = c / 1;
    this.createAnimation(d, e, f, g), this.setAnimationWeight(d, 1);
}, THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh, 
THREE.MorphBlendMesh.prototype.createAnimation = function(a, b, c, d) {
    var e = {
        start: b,
        end: c,
        length: c - b + 1,
        fps: d,
        duration: (c - b) / d,
        lastFrame: 0,
        currentFrame: 0,
        active: !1,
        time: 0,
        direction: 1,
        weight: 1,
        directionBackwards: !1,
        mirroredLoop: !1
    };
    this.animationsMap[a] = e, this.animationsList.push(e);
}, THREE.MorphBlendMesh.prototype.autoCreateAnimations = function(a) {
    for (var b, c = /([a-z]+)_?(\d+)/i, d = {}, e = this.geometry, f = 0, g = e.morphTargets.length; g > f; f++) {
        var h = e.morphTargets[f], i = h.name.match(c);
        if (i && i.length > 1) {
            var j = i[1];
            d[j] || (d[j] = {
                start: 1 / 0,
                end: -(1 / 0)
            });
            var k = d[j];
            f < k.start && (k.start = f), f > k.end && (k.end = f), b || (b = j);
        }
    }
    for (var j in d) {
        var k = d[j];
        this.createAnimation(j, k.start, k.end, a);
    }
    this.firstAnimation = b;
}, THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function(a) {
    var b = this.animationsMap[a];
    b && (b.direction = 1, b.directionBackwards = !1);
}, THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(a) {
    var b = this.animationsMap[a];
    b && (b.direction = -1, b.directionBackwards = !0);
}, THREE.MorphBlendMesh.prototype.setAnimationFPS = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.fps = b, c.duration = (c.end - c.start) / c.fps);
}, THREE.MorphBlendMesh.prototype.setAnimationDuration = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.duration = b, c.fps = (c.end - c.start) / c.duration);
}, THREE.MorphBlendMesh.prototype.setAnimationWeight = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.weight = b);
}, THREE.MorphBlendMesh.prototype.setAnimationTime = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.time = b);
}, THREE.MorphBlendMesh.prototype.getAnimationTime = function(a) {
    var b = 0, c = this.animationsMap[a];
    return c && (b = c.time), b;
}, THREE.MorphBlendMesh.prototype.getAnimationDuration = function(a) {
    var b = -1, c = this.animationsMap[a];
    return c && (b = c.duration), b;
}, THREE.MorphBlendMesh.prototype.playAnimation = function(a) {
    var b = this.animationsMap[a];
    b ? (b.time = 0, b.active = !0) : console.warn("THREE.MorphBlendMesh: animation[" + a + "] undefined in .playAnimation()");
}, THREE.MorphBlendMesh.prototype.stopAnimation = function(a) {
    var b = this.animationsMap[a];
    b && (b.active = !1);
}, THREE.MorphBlendMesh.prototype.update = function(a) {
    for (var b = 0, c = this.animationsList.length; c > b; b++) {
        var d = this.animationsList[b];
        if (d.active) {
            var e = d.duration / d.length;
            d.time += d.direction * a, d.mirroredLoop ? (d.time > d.duration || d.time < 0) && (d.direction *= -1, 
            d.time > d.duration && (d.time = d.duration, d.directionBackwards = !0), d.time < 0 && (d.time = 0, 
            d.directionBackwards = !1)) : (d.time = d.time % d.duration, d.time < 0 && (d.time += d.duration));
            var f = d.start + THREE.Math.clamp(Math.floor(d.time / e), 0, d.length - 1), g = d.weight;
            f !== d.currentFrame && (this.morphTargetInfluences[d.lastFrame] = 0, this.morphTargetInfluences[d.currentFrame] = 1 * g, 
            this.morphTargetInfluences[f] = 0, d.lastFrame = d.currentFrame, d.currentFrame = f);
            var h = d.time % e / e;
            d.directionBackwards && (h = 1 - h), d.currentFrame !== d.lastFrame ? (this.morphTargetInfluences[d.currentFrame] = h * g, 
            this.morphTargetInfluences[d.lastFrame] = (1 - h) * g) : this.morphTargetInfluences[d.currentFrame] = g;
        }
    }
}, AuthenticationManager.prototype.login = function(a, b, c) {
    var d = this, e = function(b, e) {
        d.onSuccess.notify({
            user: a,
            roles: e.roles,
            token: e.token,
            url: c
        });
    }, f = function(a, b) {
        EXI.setError("Permission denied"), BUI.showError("Your credentials are invalid");
    };
    EXI.getDataAdapter({
        onSuccess: e,
        onError: f,
        url: c,
        username: a
    }).proposal.authentication.authenticate(a, b, c);
}, Exi.prototype.appendDataAdapterParameters = function(a) {
    null == a && (a = {});
    var b = EXI.credentialManager.getConnections();
    return b.length > 0 && (a.url = b[0].url, a.token = b[0].token, a.proposal = b[0].proposal), 
    a;
}, Exi.prototype.getDataAdapter = function(a) {
    return new DataAdapterFactory(this.appendDataAdapterParameters(a));
}, Exi.prototype.setAnonymousMenu = function() {
    this.mainMenu = this.anonymousMenu, Ext.getCmp("mainMenu").removeAll(), Ext.getCmp("mainMenu").add(EXI.mainMenu.getPanel());
}, Exi.prototype.setUserMenu = function() {
    this.mainMenu = this.userMenu, Ext.getCmp("mainMenu").removeAll(), Ext.getCmp("mainMenu").add(EXI.mainMenu.getPanel());
}, Exi.prototype.loadSelected = function(a) {}, Exi.prototype.addMainPanel = function(a) {
    this.keepTabs || Ext.getCmp("main_panel").removeAll(), Ext.getCmp("main_panel").add(a.getPanel()), 
    Ext.getCmp("main_panel").setActiveTab(Ext.getCmp("main_panel").items.length - 1);
}, Exi.prototype.getSelectedDataCollections = function() {
    for (var a = [], b = 0; b < this.experimentListView.length; b++) a = a.concat(this.experimentListView[b].getSelected());
    return a;
}, Exi.prototype.addNavigationPanel = function(a) {
    Ext.getCmp("navigation").add(a.getPanel()), null != Ext.getCmp("navigation") && Ext.getCmp("navigation").expand();
}, Exi.prototype.clearNavigationPanel = function() {
    Ext.getCmp("navigation").removeAll();
}, Exi.prototype.clearMainPanel = function() {
    Ext.getCmp("main_panel").removeAll();
}, Exi.prototype.setLoadingNavigationPanel = function(a) {
    Ext.getCmp("navigation").setLoading(a);
}, Exi.prototype.setLoadingMainPanel = function(a) {
    Ext.getCmp("main_panel").setLoading(a);
}, Exi.prototype.setError = function(a) {
    this.mainStatusBar.showError(a);
}, Exi.prototype.setLoading = function(a) {
    null == a || 1 == a ? this.mainStatusBar.showBusy() : this.mainStatusBar.showReady();
}, Exi.prototype.getHeader = function(a) {
    return '<img class="titleImage" src="images/logo_EMBL.png"><span class="title">Extended ISPyB</span>';
}, Exi.prototype.show = function() {
    var a = this;
    Ext.application({
        name: "ExiSAXS",
        launch: function() {
            Ext.create("Ext.container.Viewport", {
                layout: "border",
                items: [ {
                    region: "north",
                    xtype: "component",
                    padding: 10,
                    height: 75,
                    html: a.getHeader(),
                    cls: a.headerCssClass
                }, {
                    region: "north",
                    cls: "toolbarPanel",
                    id: "mainMenu",
                    xtype: "panel",
                    width: 400,
                    items: a.mainMenu.getPanel()
                }, {
                    xtype: "panel",
                    id: "navigation",
                    region: "west",
                    width: 250,
                    split: !1,
                    title: "Browse by",
                    cls: "navigation",
                    collapsible: !0,
                    collapsed: !0
                }, {
                    region: "center",
                    id: "main_panel",
                    xtype: "tabpanel",
                    cls: "navigation",
                    plain: !0,
                    items: []
                }, {
                    region: "south",
                    xtype: "panel",
                    cls: "statusBar",
                    bbar: a.mainStatusBar.getBar()
                } ],
                listeners: {
                    afterrender: function(b, c) {
                        a.mainMenu.populateCredentialsMenu(), a.onAfterRender.notify(), 0 == a.credentialManager.getCredentials() ? a.setAnonymousMenu() : (a.setUserMenu(), 
                        a.mainMenu.populateCredentialsMenu());
                    }
                }
            });
        }
    });
}, ExiMX.prototype.loadSelected = Exi.prototype.loadSelected, ExiMX.prototype.addMainPanel = Exi.prototype.addMainPanel, 
ExiMX.prototype.getSelectedDataCollections = Exi.prototype.getSelectedDataCollections, 
ExiMX.prototype.addNavigationPanel = Exi.prototype.addNavigationPanel, ExiMX.prototype.clearNavigationPanel = Exi.prototype.clearNavigationPanel, 
ExiMX.prototype.clearMainPanel = Exi.prototype.clearMainPanel, ExiMX.prototype.setLoadingNavigationPanel = Exi.prototype.setLoadingNavigationPanel, 
ExiMX.prototype.setLoadingMainPanel = Exi.prototype.setLoadingMainPanel, ExiMX.prototype.setError = Exi.prototype.setError, 
ExiMX.prototype.setLoading = Exi.prototype.setLoading, ExiMX.prototype.setLoadingMainPanel = Exi.prototype.setLoadingMainPanel, 
ExiMX.prototype.show = Exi.prototype.show, ExiMX.prototype.setAnonymousMenu = Exi.prototype.setAnonymousMenu, 
ExiMX.prototype.setUserMenu = Exi.prototype.setUserMenu, ExiMX.prototype.appendDataAdapterParameters = Exi.prototype.appendDataAdapterParameters, 
ExiMX.prototype.getHeader = function() {
    return '<img class="titleImage" src="../images/logo_EMBL.png"><span class="title">ExiMX</span><span class="subtitle">Extended ISPyB for MX<sub style="font-size:10px;color:orange">BETA</sub></span>';
}, ExiMX.prototype.getDataAdapter = function(a) {
    return new MxDataAdapterFactory(this.appendDataAdapterParameters(a));
}, ExiSAXS.prototype.loadSelected = Exi.prototype.loadSelected, ExiSAXS.prototype.addMainPanel = Exi.prototype.addMainPanel, 
ExiSAXS.prototype.getSelectedDataCollections = Exi.prototype.getSelectedDataCollections, 
ExiSAXS.prototype.addNavigationPanel = Exi.prototype.addNavigationPanel, ExiSAXS.prototype.clearNavigationPanel = Exi.prototype.clearNavigationPanel, 
ExiSAXS.prototype.clearMainPanel = Exi.prototype.clearMainPanel, ExiSAXS.prototype.setLoadingNavigationPanel = Exi.prototype.setLoadingNavigationPanel, 
ExiSAXS.prototype.setLoadingMainPanel = Exi.prototype.setLoadingMainPanel, ExiSAXS.prototype.setError = Exi.prototype.setError, 
ExiSAXS.prototype.setLoading = Exi.prototype.setLoading, ExiSAXS.prototype.setLoadingMainPanel = Exi.prototype.setLoadingMainPanel, 
ExiSAXS.prototype.show = Exi.prototype.show, ExiSAXS.prototype.setAnonymousMenu = Exi.prototype.setAnonymousMenu, 
ExiSAXS.prototype.setUserMenu = Exi.prototype.setUserMenu, ExiSAXS.prototype.appendDataAdapterParameters = Exi.prototype.appendDataAdapterParameters, 
ExiSAXS.prototype.getHeader = function() {
    return '<img class="titleImage" src="../images/logo_EMBL.png"><span class="title">ExiSAXS</span><span class="subtitle">Extended ISPyB for SAXS<sub style="font-size:10px;color:orange">BETA</sub></span>';
}, ExiSAXS.prototype.getDataAdapter = function(a) {
    return new SaxsDataAdapterFactory(this.appendDataAdapterParameters(a));
}, MainStatusBar.prototype.getBar = function() {
    return this.statusBar = Ext.create("Ext.ux.StatusBar", {
        id: "main-status-bar",
        text: "Ready",
        iconCls: "accept",
        busyIconCls: "busy",
        busyText: "Connecting to servers...",
        cls: "statusBar",
        statusAlign: "right"
    }), this.statusBar;
}, MainStatusBar.prototype.showBusy = function() {
    this.statusBar.showBusy();
}, MainStatusBar.prototype.showError = function(a) {
    this.statusBar.clearStatus(), this.statusBar.setStatus({
        text: a,
        iconCls: "error"
    });
}, MainStatusBar.prototype.showReady = function() {
    this.statusBar.clearStatus(), this.statusBar.setStatus({
        text: "Ready",
        iconCls: "accept"
    });
}, MainMenu.prototype.getMenuItems = function() {
    return [];
}, MainMenu.prototype.getHomeItem = function() {
    return {
        text: this._convertToHTMLWhiteSpan("Home"),
        cls: "ExiSAXSMenuToolBar",
        icon: "../images/icon/rsz_ic_home_black_24dp.png",
        handler: function() {
            if (null != EXI.credentialManager.getCredentials()) if (EXI.credentialManager.getCredentials().length > 0) {
                var a = EXI.credentialManager.getCredentials()[0].username, b = EXI.credentialManager.getCredentialByUserName(EXI.credentialManager.getCredentials()[0].username);
                b.isManager() ? location.hash = "/welcome/manager/" + a + "/main" : location.hash = "/welcome/user/" + a + "/main";
            } else BUI.showError("You should sign up"); else BUI.showError("You should sign up");
        }
    };
}, MainMenu.prototype.getShipmentItem = function() {
    function a(a, b) {
        "Shipments" == a.text && (location.hash = "/proposal/shipping/nav"), "Manage shipping addresses" == a.text && (location.hash = "/proposal/addresses/nav"), 
        "Shipment List" == a.text && (location.hash = "/proposal/shipping/nav");
    }
    function b() {
        function a(a, b) {
            "Stock Solutions" == a.text && (location.hash = "/saxs/stocksolution/nav");
        }
        return Ext.create("Ext.menu.Menu", {
            items: [ {
                text: "Stock Solutions",
                icon: "../images/icon/testtube.png",
                handler: a
            } ]
        });
    }
    return {
        text: this._convertToHTMLWhiteSpan("Shipment"),
        cls: "ExiSAXSMenuToolBar",
        menu: Ext.create("Ext.menu.Menu", {
            items: [ {
                text: "BioSAXS",
                icon: "../images/icon/macromolecule.png",
                menu: b()
            }, {
                text: "Manage shipping addresses",
                icon: "../images/icon/contacts.png",
                handler: a
            }, {
                text: "Shipments",
                icon: "../images/icon/shipping.png",
                handler: a
            } ]
        })
    };
}, MainMenu.prototype.getHelpMenu = function() {
    function a(a, b) {
        "ISPyB Web services API Map" == a.text && window.open("/exi/documentation/ispyb-api-ws/print.html"), 
        "Job list" == a.text && (location.hash = "/tool/list");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Developer",
            checked: !1,
            group: "theme",
            menu: {
                items: [ {
                    text: "ISPyB Web services API Map",
                    handler: a
                }, {
                    text: "How to retrieve data from ISPyB?",
                    handler: a
                }, {
                    text: "EXI Router",
                    handler: a
                }, {
                    text: "EXI List Views Objects",
                    handler: a
                }, {
                    text: "EXI Main View Objects",
                    handler: a
                } ]
            }
        }, "-", {
            text: "About",
            checked: !1,
            group: "theme",
            handler: a
        } ]
    });
}, MainMenu.prototype.getAddCredentialMenu = function() {
    return null != EXI.credentialManager.getCredentials() && EXI.credentialManager.getCredentials().length > 0 ? {
        icon: "../images/icon/rsz_1ic_input_black_24dp.png",
        height: 30,
        text: "Add",
        handler: function() {
            window.location.href = "#/login";
        }
    } : void 0;
}, MainMenu.prototype.populateCredentialsMenu = function() {
    this.credentialsMenu.removeAll();
    var a = "";
    if (null != EXI.credentialManager.getCredentials()) for (var b = 0; b < EXI.credentialManager.getCredentials().length; b++) if (a = EXI.credentialManager.getCredentials()[b].username, 
    EXI.credentialManager.getCredentials()[b].activeProposals.length > 0) for (var c = 0; c < EXI.credentialManager.getCredentials()[b].activeProposals.length; c++) a = EXI.credentialManager.getCredentials()[b].activeProposals[c] + "@" + EXI.credentialManager.getCredentials()[b].username, 
    this.credentialsMenu.add({
        text: a,
        icon: "../images/icon/rsz_esrflogo80.gif",
        disabled: !0
    }); else this.credentialsMenu.add({
        text: a,
        icon: "../images/icon/rsz_esrflogo80.gif",
        disabled: !0
    });
    EXI.credentialManager.getCredentials().length > 0 ? (Ext.getCmp(this.loginButtonId).setText("<span style='color:white'>Log out <span style='font-weight:bold;'>" + a + " </span> </span>"), 
    Ext.getCmp(this.loginButtonId).setIcon("../images/rsz_logout.png")) : (Ext.getCmp(this.loginButtonId).setText("<span style='color:white'>Sign In</span>"), 
    Ext.getCmp(this.loginButtonId).setIcon("../images/rsz_login.png"));
}, MainMenu.prototype._convertToHTMLWhiteSpan = function(a) {
    return '<span style="color:white">' + a + "</span>";
}, MainMenu.prototype.isLoggedIn = function() {
    return EXI.credentialManager.getCredentials().length > 0;
}, MainMenu.prototype.getLoginButton = function() {
    var a = "../images/rsz_login.png", b = this._convertToHTMLWhiteSpan("Sign In");
    return EXI.credentialManager.getCredentials().length > 0 && (a = "../images/rsz_logout.png", 
    b = this._convertToHTMLWhiteSpan("log out")), {
        xtype: "splitbutton",
        id: this.loginButtonId,
        text: b,
        cls: "button_log_out",
        icon: a,
        menu: this.credentialsMenu,
        handler: function() {
            0 == EXI.credentialManager.getCredentials().length ? location.hash = "/login" : location.hash = "/logout";
        }
    };
}, MainMenu.prototype.getPanel = function() {
    var a = this;
    this.credentialsMenu = new Ext.menu.Menu({
        id: a.id + "menu",
        items: [ a.getAddCredentialMenu() ]
    });
    var b = this.getMenuItems();
    return b.push("->"), b.push(this.getLoginButton()), this.tb = Ext.create("Ext.toolbar.Toolbar", {
        cls: this.cssClass,
        listeners: {
            afterrender: function(a, b) {}
        },
        items: b
    }), this.tb;
}, MXMainMenu.prototype.populateCredentialsMenu = MainMenu.prototype.populateCredentialsMenu, 
MXMainMenu.prototype.init = MainMenu.prototype.init, MXMainMenu.prototype.getPanel = MainMenu.prototype.getPanel, 
MXMainMenu.prototype._convertToHTMLWhiteSpan = MainMenu.prototype._convertToHTMLWhiteSpan, 
MXMainMenu.prototype.getAddCredentialMenu = MainMenu.prototype.getAddCredentialMenu, 
MXMainMenu.prototype.getLoginButton = MainMenu.prototype.getLoginButton, MXMainMenu.prototype.setText = MainMenu.prototype.setText, 
MXMainMenu.prototype.getHomeItem = MainMenu.prototype.getHomeItem, MXMainMenu.prototype.getHelpMenu = MainMenu.prototype.getHelpMenu, 
MXMainMenu.prototype.getShipmentItem = MainMenu.prototype.getShipmentItem, MXMainMenu.prototype.getMenuItems = function() {
    return [ this.getHomeItem(), this.getShipmentItem(), {
        text: this._convertToHTMLWhiteSpan("Prepare Experiment"),
        cls: "ExiSAXSMenuToolBar",
        menu: this.getPrepareExperimentMenu()
    }, {
        text: this._convertToHTMLWhiteSpan("Data Explorer"),
        cls: "ExiSAXSMenuToolBar",
        menu: this.getDataExplorerMenu()
    }, {
        text: this._convertToHTMLWhiteSpan("Offline Data Analysis"),
        cls: "ExiSAXSMenuToolBar",
        menu: this.getOnlineDataAnalisysMenu()
    }, {
        text: this._convertToHTMLWhiteSpan("Help"),
        cls: "ExiSAXSMenuToolBar",
        menu: this.getHelpMenu()
    }, "->", {
        xtype: "textfield",
        name: "field1",
        value: "",
        emptyText: "search by protein acronym",
        listeners: {
            specialkey: function(a, b) {
                b.getKey() == b.ENTER && (location.hash = "/mx/datacollection/protein_acronym/" + a.getValue() + "/main");
            }
        }
    } ];
}, MXMainMenu.prototype.getOnlineDataAnalisysMenu = function() {
    function a(a, b) {
        "Dimple" == a.text && (location.hash = "/tool/dimple/main"), "Job list" == a.text && (location.hash = "/tool/list");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Dimple",
            checked: !1,
            group: "theme",
            handler: a
        }, "-", {
            text: "Job list",
            checked: !1,
            group: "theme",
            handler: a
        } ]
    });
}, MXMainMenu.prototype.getPrepareExperimentMenu = function() {
    function a(a, b) {
        "My Crystals" == a.text && (location.hash = "/crystal/nav"), "My Proteins" == a.text && (location.hash = "/protein/nav"), 
        "Puck" == a.text && (location.hash = "/puck/nav");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "My Crystals",
            icon: "../images/icon/macromolecule.png",
            handler: a
        }, {
            text: "My Proteins",
            icon: "../images/icon/testtube.png",
            handler: a
        }, {
            text: "Puck",
            icon: "../images/icon/testtube.png",
            handler: a
        } ]
    });
}, MXMainMenu.prototype.getDataExplorerMenu = function() {
    function a(a, b) {
        "Sessions" == a.text && (location.hash = "/session/nav"), "Experiments" == a.text && (location.hash = "/experiment/nav");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Sessions",
            icon: "../images/icon/sessions.png",
            handler: a
        } ]
    });
}, SAXSMainMenu.prototype.populateCredentialsMenu = MainMenu.prototype.populateCredentialsMenu, 
SAXSMainMenu.prototype.init = MainMenu.prototype.init, SAXSMainMenu.prototype.getPanel = MainMenu.prototype.getPanel, 
SAXSMainMenu.prototype._convertToHTMLWhiteSpan = MainMenu.prototype._convertToHTMLWhiteSpan, 
SAXSMainMenu.prototype.getAddCredentialMenu = MainMenu.prototype.getAddCredentialMenu, 
SAXSMainMenu.prototype.getLoginButton = MainMenu.prototype.getLoginButton, SAXSMainMenu.prototype.setText = MainMenu.prototype.setText, 
SAXSMainMenu.prototype.getHelpMenu = MainMenu.prototype.getHelpMenu, SAXSMainMenu.prototype.getHomeItem = MainMenu.prototype.getHomeItem, 
SAXSMainMenu.prototype.getShipmentItem = MainMenu.prototype.getShipmentItem, SAXSMainMenu.prototype.getMenuItems = function() {
    return [ this.getHomeItem(), this.getShipmentItem(), {
        text: this._convertToHTMLWhiteSpan("Prepare Experiment"),
        cls: "ExiSAXSMenuToolBar",
        hidden: this.isHidden,
        menu: this.getPreparationMenu()
    }, {
        text: this._convertToHTMLWhiteSpan("Data Explorer"),
        cls: "ExiSAXSMenuToolBar",
        hidden: this.isHidden,
        menu: this.getDataExplorerMenu()
    }, {
        text: this._convertToHTMLWhiteSpan("Help"),
        cls: "ExiSAXSMenuToolBar",
        menu: this.getHelpMenu()
    }, "->", {
        xtype: "textfield",
        name: "field1",
        emptyText: "search macromolecule",
        hidden: this.isHidden,
        listeners: {
            specialkey: function(a, b) {
                b.getKey() == b.ENTER && (location.hash = "/datacollection/macromoleculeAcronym/" + a.getValue() + "/main");
            }
        }
    } ];
}, SAXSMainMenu.prototype.getPreparationMenu = function() {
    function a(a, b) {
        "Macromolecules" == a.text && (location.hash = "/saxs/macromolecule/nav"), "Buffers" == a.text && (location.hash = "/saxs/buffer/nav"), 
        "Sample Tracking" == a.text && (location.hash = "/saxs/shipping/nav"), "My Experiments" == a.text && (location.hash = "/saxs/template/nav");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Macromolecules",
            icon: "../images/icon/macromolecule.png",
            handler: a
        }, {
            text: "Buffers",
            icon: "../images/icon/buffer.jpg",
            handler: a
        }, "-", {
            text: "My Experiments",
            icon: "../images/icon/edit.png",
            handler: a
        } ]
    });
}, SAXSMainMenu.prototype.getDataExplorerMenu = function() {
    function a(a, b) {
        "Sessions" == a.text && (location.hash = "/proposal/session/nav"), "Experiments" == a.text && (location.hash = "/experiment/nav");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Sessions",
            icon: "../images/icon/sessions.png",
            handler: a
        } ]
    });
}, SAXSMainMenu.prototype.getDataReductionMenu = function() {
    function a(a, c) {
        "Sessions" == a.text && b.onSessionClicked.notify(), "Subtraction" == a.text && (location.hash = "/tool/subtraction/main"), 
        "Experiments" == a.text && b.onExperimentClicked.notify();
    }
    var b = this;
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: '<span class="menuCategoryItem">SEC</span>'
        }, "-", {
            text: "Background Test"
        }, {
            text: "Baseline Checker"
        }, {
            text: "Frame Merge"
        }, "-", {
            text: '<span class="menuCategoryItem">INDIVIDUAL CONCENTRATION</span>'
        }, "-", {
            text: "Subtraction",
            checked: !1,
            group: "theme",
            checkHandler: a
        }, {
            text: "Average"
        }, "-", {
            text: '<span class="menuCategoryItem">COMBINING</span>'
        }, "-", {
            text: "Merging tool"
        } ]
    });
}, SAXSMainMenu.prototype.getOnlineDataAnalisysMenu = function() {
    function a(a, b) {
        "Structure Validation" == a.text && (location.hash = "/tool/crysol/main"), "Job list" == a.text && (location.hash = "/tool/list");
    }
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Structure Validation",
            checked: !1,
            group: "theme",
            handler: a
        }, "-", {
            text: "Job list",
            checked: !1,
            group: "theme",
            handler: a
        } ]
    });
}, ExiController.prototype.loadNavigationPanel = function(a) {
    EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0);
    var b = function(b, c) {
        EXI.addNavigationPanel(a), a.load(c), EXI.setLoadingNavigationPanel(!1);
    }, c = function(a, b) {
        EXI.setLoadingNavigationPanel(!1);
    };
    return EXI.getDataAdapter({
        onSuccess: b,
        onError: c
    });
}, ExiController.prototype.init = function() {
    function a() {}
    function b() {}
    Path.map("#/").to(function() {
        location.hash = "/welcome";
    }).enter(a), Path.map("#/login").to(function() {
        EXI.authenticationForm.show();
    }).enter(a), Path.map("#/welcome").to(function() {
        EXI.addMainPanel(new WelcomeMainView());
    }).enter(a), Path.map("#/welcome/user/:user/main").to(function() {
        var a = this.params.user, b = new UserWelcomeMainView();
        EXI.addMainPanel(b), b.load(a);
    }).enter(a), Path.map("#/welcome/manager/:user/main").to(function() {
        var a = this.params.user, b = new ManagerWelcomeMainView();
        EXI.addMainPanel(b), b.load(a);
    }).enter(a), Path.map("#/logout").to(function() {
        EXI.credentialManager.logout(), EXI.proposalManager.clear();
    }).enter(a), Path.root("#/"), Path.rescue(b);
}, LabContactExiController.prototype.loadNavigationPanel = ExiController.prototype.loadNavigationPanel, 
LabContactExiController.prototype.setPageBackground = function() {}, LabContactExiController.prototype.notFound = function() {}, 
LabContactExiController.prototype.init = function() {
    function a(a) {
        return b.loadNavigationPanel(a);
    }
    var b = this, c = null, d = null;
    Path.map("#/proposal/addresses/nav").to(function() {
        EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), c = new AddressListView(), 
        c.onSelect.attach(function(a, b) {
            location.hash = "/proposal/address/" + b[0].labContactId + "/main";
        }), EXI.addNavigationPanel(c), d = a(c), d.proposal.labcontacts.getLabContacts(), 
        EXI.addMainPanel(new AddressWelcomeMainView());
    }).enter(this.setPageBackground), Path.map("#/proposal/address/:lacontactId/main").to(function() {
        var a = new AddressMainView();
        EXI.addMainPanel(a), a.load(this.params.lacontactId);
    }).enter(this.setPageBackground);
}, MXExiController.prototype.routeNavigation = function() {
    var a;
    Path.map("#/:navigation/nav").to(function() {
        if ("session" == this.params.navigation && (EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), 
        a = new SessionListView(), a.onSelect.attach(function(a, b) {
            location.hash = "/mx/datacollection/session/" + b[0].sessionId + "/main";
        }), EXI.addNavigationPanel(a), a.load(EXI.proposalManager.getSessions()), EXI.setLoadingNavigationPanel(!1)), 
        "crystal" == this.params.navigation) {
            EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), a = new CrystalListView(), 
            a.onSelect.attach(function(a, b) {
                location.hash = "/mx/crystal/" + b[0].crystalId + "/main";
            }), EXI.addNavigationPanel(a);
            var b = function(b, c) {
                a.load(c), EXI.setLoadingNavigationPanel(!1);
            };
            EXI.getDataAdapter({
                onSuccess: b
            }).mx.crystal.getCrystalsByProposalId();
        }
        if ("puck" == this.params.navigation) {
            EXI.addMainPanel(new PuckWelcomeMainView()), EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), 
            a = new PuckListView(), a.onSelect.attach(function(a, b) {
                location.hash = "/mx/puck/" + b[0].Container_containerId + "/main";
            }), EXI.addNavigationPanel(a);
            var c = function(b, c) {
                a.load(c), EXI.setLoadingNavigationPanel(!1);
            };
            EXI.getDataAdapter({
                onSuccess: c
            }).proposal.proposal.getDewarByProposalId();
        }
        if ("protein" == this.params.navigation) {
            EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), a = new ProteinListView(), 
            a.onSelect.attach(function(a, b) {}), EXI.addNavigationPanel(a);
            var d = function(b, c) {
                console.log(c), a.load(c), EXI.setLoadingNavigationPanel(!1);
            };
            EXI.getDataAdapter({
                onSuccess: d
            }).mx.protein.getProteinByProposalId();
        }
    }).enter(this.setPageBackground), Path.map("#/autoprocintegration/datacollection/:datacollectionId/main").to(function() {
        var a = new AutoProcIntegrationMainView();
        EXI.addMainPanel(a), a.load(this.params.datacollectionId), a.onSelect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.append(b);
        }), a.onDeselect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.remove(b);
        });
    }).enter(this.setPageBackground), Path.map("#/mx/workflow/step/:workflowStepIdList/main").to(function() {
        var a = new WorkflowStepMainView();
        EXI.addMainPanel(a);
        var b = function(b, c) {
            a.load(JSON.parse(c));
        };
        EXI.getDataAdapter({
            onSuccess: b
        }).mx.workflowStepDataAdapter.getWorkflowstepByIdList(this.params.workflowStepIdList);
    }).enter(this.setPageBackground), Path.map("#/mx/datacollection/protein_acronym/:acronmys/main").to(function() {
        var a = new DataCollectionMxMainView();
        EXI.addMainPanel(a);
        var b = function(b, c) {
            a.load(c);
        };
        EXI.getDataAdapter({
            onSuccess: b
        }).mx.dataCollection.getByAcronymList(this.params.acronmys);
    }).enter(this.setPageBackground), Path.map("#/mx/datacollection/session/:sessionId/main").to(function() {
        var a = new DataCollectionMxMainView();
        EXI.addMainPanel(a), EXI.setLoadingMainPanel(!0);
        var b = function(b, c) {
            a.load(c), EXI.setLoadingMainPanel(!1);
        };
        EXI.getDataAdapter({
            onSuccess: b
        }).mx.dataCollection.getDataCollectionViewBySessionId(this.params.sessionId);
    }).enter(this.setPageBackground), Path.map("#/mx/crystal/:crystalId/main").to(function() {
        var a = new CrystalMainView();
        EXI.addMainPanel(a), EXI.setLoadingMainPanel(!0);
        var b = function(b, c) {
            a.load(c), EXI.setLoadingMainPanel(!1);
        };
        EXI.getDataAdapter({
            onSuccess: b
        }).mx.crystal.getCrystalById(this.params.crystalId);
    }).enter(this.setPageBackground), Path.map("#/mx/puck/:containerId/main").to(function() {
        EXI.setLoadingMainPanel(!0);
        var a = function(a, b) {
            try {
                var c = new PuckMainView();
                EXI.addMainPanel(c), c.load(b);
            } catch (d) {
                EXI.setError(d.message);
            }
            EXI.setLoadingMainPanel(!1);
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).proposal.shipping.getContainerById(this.params.containerId, this.params.containerId, this.params.containerId);
    }).enter(this.setPageBackground), Path.map("#/mx/puck/add").to(function() {
        var a = new PuckMainView();
        EXI.addMainPanel(a);
        var b = {
            containerId: "",
            code: null,
            containerType: "Puck",
            capacity: 16,
            beamlineLocation: null,
            sampleChangerLocation: null,
            containerStatus: null,
            timeStamp: "Jan 15, 2016 2:29:39 PM",
            sampleVOs: []
        };
        a.load(b);
    }).enter(this.setPageBackground), Path.map("#/mx/datacollection/:dataCollectionId/image/:imageId/main").to(function() {
        var a = new ImageMainView();
        EXI.addMainPanel(a), a.load(this.params.imageId, this.params.dataCollectionId);
    }).enter(this.setPageBackground), Path.map("#/mx/image/:imageId/main").to(function() {
        var a = new ImageMainView();
        EXI.addMainPanel(a), a.load(this.params.imageId);
    }).enter(this.setPageBackground);
}, MXExiController.prototype.setPageBackground = function() {}, MXExiController.prototype.notFound = function() {}, 
MXExiController.prototype.init = function() {
    function a() {
        b.notFound();
    }
    var b = this;
    this.routeNavigation(), Path.rescue(a);
}, OfflineExiController.prototype.setPageBackground = function() {}, OfflineExiController.prototype.notFound = function() {}, 
OfflineExiController.prototype.init = function() {
    function a() {
        b.notFound();
    }
    var b = this;
    Path.map("#/tool/dimple/main").to(function() {
        var a = new DimpleMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/tool/crysol/main").to(function() {
        var a = new CrysolMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/tool/subtraction/main").to(function() {
        var a = new SubtractionMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/tool/list").to(function() {
        var a = null, b = new RunListView();
        b.onSelect.attach(function(b, c) {
            var d = c[0].internalId, e = a.internalId;
            "Dimple" == c[0].tool ? location.hash = "/project/" + e + "/dimple/" + d + "/main" : location.hash = "/project/" + e + "/run/" + d + "/main";
        }), EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0);
        var c = function(c, d) {
            a = d[0], EXI.addNavigationPanel(b), b.load(d[0].runs.reverse()), EXI.setLoadingNavigationPanel(!1);
        }, d = function(a, b) {
            EXI.setLoadingNavigationPanel(!1);
        };
        EXI.getDataAdapter({
            onSuccess: c,
            onError: d
        }).exi.offline.getProject();
    }).enter(this.setPageBackground), Path.map("#/project/:projectId/run/:runId/main").to(function() {
        var a = this.params.projectId, b = this.params.runId, c = function(a, c) {
            for (var d = 0; d < c.length; d++) if (c[d].internalId == b) {
                var e = new RunMainView();
                EXI.addMainPanel(e), e.load(c[d]);
            }
        }, d = function(a) {
            BUI.showError("There was an error");
        };
        EXI.getDataAdapter({
            onSuccess: c,
            onError: d
        }).exi.offline.getRuns(a);
    }).enter(this.setPageBackground), Path.map("#/project/:projectId/dimple/:runId/main").to(function() {
        var a = this.params.projectId, b = this.params.runId, c = function(a, c) {
            for (var d = 0; d < c.length; d++) if (c[d].internalId == b) {
                var e = new DimpleRunMainView();
                EXI.addMainPanel(e), e.load(c[d]);
            }
        }, d = function(a) {
            BUI.showError("There was an error");
        };
        EXI.getDataAdapter({
            onSuccess: c,
            onError: d
        }).exi.offline.getRuns(a);
    }).enter(this.setPageBackground), Path.rescue(a);
}, ProposalExiController.prototype.loadNavigationPanel = ExiController.prototype.loadNavigationPanel, 
ProposalExiController.prototype.setPageBackground = function() {}, ProposalExiController.prototype.notFound = function() {}, 
ProposalExiController.prototype.init = function() {
    function a(a) {
        return b.loadNavigationPanel(a);
    }
    var b = this, c = null, d = null;
    Path.map("#/proposal/session/nav").to(function() {
        c = new SessionListView(), c.onSelect.attach(function(a, b) {
            "SAXS" == EXI.credentialManager.getTechniqueByBeamline(b[0].beamlineName) ? location.hash = "/session/nav/" + b[0].sessionId + "/session" : location.hash = "/mx/datacollection/session/" + b[0].sessionId + "/main";
        }), d = a(c), d.proposal.session.getSessions();
    }).enter(this.setPageBackground), Path.map("#/proposal/address/:lacontactId/main").to(function() {
        var a = new AddressMainView();
        EXI.addMainPanel(a), a.load(this.params.lacontactId);
    }).enter(this.setPageBackground), Path.map("#/puck/:containerId/main").to(function() {
        var a = new PuckMainView();
        EXI.addMainPanel(a), a.load(this.params.containerId);
    }).enter(this.setPageBackground);
}, SAXSExiController.prototype.loadNavigationPanel = ExiController.prototype.loadNavigationPanel, 
SAXSExiController.prototype.routeNavigation = function() {
    function a(a) {
        return b.loadNavigationPanel(a);
    }
    var b = this;
    Path.map("#/saxs/:navigation/nav").to(function() {
        var b = null;
        if ("buffer" == this.params.navigation && (EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), 
        b = new BufferListView(), b.onSelect.attach(function(a, b) {
            location.hash = "/buffer/" + b[0].bufferId + "/main";
        }), EXI.addNavigationPanel(b), b.load(EXI.proposalManager.getBuffers()), EXI.setLoadingNavigationPanel(!1), 
        EXI.addMainPanel(new BufferWelcomeMainView())), "stocksolution" == this.params.navigation && (EXI.clearNavigationPanel(), 
        EXI.setLoadingNavigationPanel(!0), b = new StockSolutionListView(), b.onSelect.attach(function(a, b) {
            location.hash = "/stocksolution/" + b[0].stockSolutionId + "/main";
        }), EXI.addNavigationPanel(b), b.load(EXI.proposalManager.getStockSolutions()), 
        EXI.setLoadingNavigationPanel(!1), EXI.addMainPanel(new StockSolutionWelcomeMainView())), 
        "macromolecule" == this.params.navigation && (EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), 
        b = new MacromoleculeListView(), b.onSelect.attach(function(a, b) {
            location.hash = "/macromolecule/" + b[0].macromoleculeId + "/main";
        }), EXI.addNavigationPanel(b), b.load(EXI.proposalManager.getMacromolecules()), 
        EXI.setLoadingNavigationPanel(!1), EXI.addMainPanel(new MacromoleculeWelcomeMainView())), 
        "template" == this.params.navigation) {
            EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0), b = new TemplateListView(), 
            b.onSelect.attach(function(a, b) {
                location.hash = "/experiment/templateId/" + b[0].experimentId + "/main";
            });
            var c = a(b);
            c.saxs.experiment.getByExperimentByKey("experimentType", "TEMPLATE"), EXI.addMainPanel(new ExperimentWelcomeMainView());
        }
    }).enter(this.setPageBackground), Path.map("#/session/nav/:sessionId/session").to(function() {
        var b = new ExperimentListView();
        b.onSelect.attach(function(a, b) {
            "HPLC" == b[0].experimentType && (location.hash = "/experiment/hplc/" + b[0].experimentId + "/main"), 
            "STATIC" != b[0].experimentType && "CALIBRATION" != b[0].experimentType || (location.hash = "/experiment/experimentId/" + b[0].experimentId + "/main"), 
            "TEMPLATE" == b[0].experimentType && (location.hash = "/experiment/templateId/" + b[0].experimentId + "/main");
        }), a(b).saxs.experiment.getExperimentsBySessionId(this.params.sessionId);
    }).enter(this.setPageBackground);
}, SAXSExiController.prototype.setPageBackground = function() {}, SAXSExiController.prototype.notFound = function() {}, 
SAXSExiController.prototype.routeExperiment = function() {
    Path.map("#/experiment/experimentId/:experimentId/main").to(function() {
        var a = new ExperimentMainView();
        EXI.addMainPanel(a), a.load(this.params.experimentId), a.onSelect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.append(b);
        }), a.onDeselect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.remove(b);
        });
    }).enter(this.setPageBackground), Path.map("#/experiment/hplc/:experimentId/main").to(function() {
        var a = new HPLCMainView();
        EXI.addMainPanel(a), a.load(this.params.experimentId), a.onSelect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.append(b);
        }), a.onDeselect.attach(function(a, b) {
            EXI.localExtorage.selectedSubtractionsManager.remove(b);
        });
    }).enter(this.setPageBackground), Path.map("#/experiment/:key/:value/main").to(function() {
        EXI.setLoadingMainPanel();
        var a = function(a, b) {
            if (EXI.setLoadingMainPanel(!1), null != b && b.length > 0) {
                var c = null;
                "STATIC" == b[0].experimentType && (c = new ExperimentMainView()), "HPLC" == b[0].experimentType && (c = new HPLCMainView()), 
                "TEMPLATE" == b[0].experimentType && (c = new TemplateMainView()), EXI.addMainPanel(c), 
                c.load(b), c.onSelect.attach(function(a, b) {
                    EXI.localExtorage.selectedSubtractionsManager.append(b);
                }), c.onDeselect.attach(function(a, b) {
                    EXI.localExtorage.selectedSubtractionsManager.remove(b);
                });
            }
        };
        "experimentId" == this.params.key || "templateId" == this.params.key ? EXI.getDataAdapter({
            onSuccess: a
        }).saxs.experiment.getByExperimentId([ this.params.value ]) : EXI.getDataAdapter({
            onSuccess: a
        }).saxs.experiment.getByExperimentByKey(this.params.key, this.params.value);
    }).enter(this.setPageBackground);
}, SAXSExiController.prototype.routeDataCollection = function() {
    Path.map("#/datacollection/macromoleculeAcronym/:value/main").to(function() {
        EXI.setLoadingMainPanel("Searching " + this.params.value + "...");
        var a = function(a, b) {
            if (null != b) if (b.length > 0) {
                var c = new DataCollectionMainView();
                EXI.addMainPanel(c), c.load(b), c.onSelect.attach(function(a, b) {
                    EXI.localExtorage.selectedSubtractionsManager.append(b);
                }), c.onDeselect.attach(function(a, b) {
                    EXI.localExtorage.selectedSubtractionsManager.remove(b);
                });
                var d = new DataCollectionListView();
                d.onSelect.attach(function(a, b) {
                    c.filter(b[0].macromoleculeId, b[0].bufferAcronym);
                }), EXI.addNavigationPanel(d), d.load(b), EXI.setLoadingNavigationPanel(!1);
            } else BUI.showWarning("No macromolecule has been found"); else BUI.showWarning("No data to display");
            EXI.setLoadingMainPanel(!1);
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).saxs.dataCollection.getDataCollectionsByKey(this.params.key, this.params.value);
    }).enter(this.setPageBackground), Path.map("#/saxs/datacollection/:key/:value/main").to(function() {
        EXI.setLoadingMainPanel();
        var a = function(a, b) {
            var c = new DataCollectionMainView();
            EXI.addMainPanel(c), c.load(b), EXI.setLoadingMainPanel(!1), c.onSelect.attach(function(a, b) {
                EXI.localExtorage.selectedSubtractionsManager.append(b);
            }), c.onDeselect.attach(function(a, b) {
                EXI.localExtorage.selectedSubtractionsManager.remove(b);
            });
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).saxs.dataCollection.getDataCollectionsByKey(this.params.key, this.params.value);
    }).enter(this.setPageBackground), Path.map("#/saxs/datacollection/:key/:value/primaryviewer").to(function() {
        var a = function(a, b) {
            var c = new PrimaryDataMainView();
            EXI.addMainPanel(c), c.load(b);
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).saxs.dataCollection.getDataCollectionsByKey(this.params.key, this.params.value);
    }).enter(this.setPageBackground), Path.map("#/saxs/datacollection/:key/:value/merge").to(function() {
        var a = function(a, b) {
            var c = new MergeMainView();
            EXI.addMainPanel(c), c.load(b);
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).saxs.dataCollection.getDataCollectionsByKey(this.params.key, this.params.value);
    }).enter(this.setPageBackground);
}, SAXSExiController.prototype.routePrepare = function() {
    Path.map("#/buffer/:bufferId/main").to(function() {
        var a = new BufferMainView();
        EXI.addMainPanel(a), a.load(this.params.bufferId);
    }).enter(this.setPageBackground), Path.map("#/buffer/add").to(function() {
        var a = new BufferMainView();
        EXI.addMainPanel(a);
    }).enter(this.setPageBackground), Path.map("#/macromolecule/:macromoleculeId/main").to(function() {
        var a = new MacromoleculeMainView();
        EXI.addMainPanel(a), a.load(this.params.macromoleculeId);
    }).enter(this.setPageBackground), Path.map("#/macromolecule/add").to(function() {
        var a = new MacromoleculeMainView();
        EXI.addMainPanel(a);
    }).enter(this.setPageBackground), Path.map("#/stocksolution/:stocksolutionId/main").to(function() {
        var a = new StockSolutionMainView();
        EXI.addMainPanel(a), a.load(this.params.stocksolutionId);
    }).enter(this.setPageBackground), Path.map("#/stocksolution/add").to(function() {
        var a = new StockSolutionMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/prepare/stocksolution/main").to(function() {
        var a = new StockSolutionMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/prepare/templates/main").to(function() {
        var a = new ExperimentDesignerMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/prepare/shipmentpreparation").to(function() {
        var a = new ShipmentPreparationMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground), Path.map("#/prepare/designer").to(function() {
        var a = new DesignerMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground);
}, SAXSExiController.prototype.init = function() {
    function a() {
        b.notFound();
    }
    var b = this;
    this.routeNavigation(), this.routeExperiment(), this.routeDataCollection(), this.routePrepare(), 
    Path.map("#/project/:projectId/run/:runId/main").to(function() {
        var a = this.params.projectId, b = this.params.runId, c = function(a, c) {
            for (var d = 0; d < c.length; d++) if (c[d].internalId == b) {
                var e = new RunMainView();
                EXI.addMainPanel(e), e.load(c[d]);
            }
        }, d = function(a, b) {};
        EXI.getDataAdapter({
            onSuccess: c,
            onError: d
        }).exi.offline.getRuns(a);
    }).enter(this.setPageBackground), Path.rescue(a);
}, ShippingExiController.prototype.loadNavigationPanel = ExiController.prototype.loadNavigationPanel, 
ShippingExiController.prototype.setPageBackground = function() {}, ShippingExiController.prototype.notFound = function() {}, 
ShippingExiController.prototype.loadShipmentsNavigationPanel = function(a) {
    EXI.clearNavigationPanel(), EXI.setLoadingNavigationPanel(!0);
    var b = function(b, c) {
        c = BUI.groupBy(c, function(a) {
            return a.Shipping_shippingId;
        });
        for (var d = [], e = 0; e < c.length; e++) d.push(c[e][0]);
        d.sort(function(a, b) {
            return b.Shipping_shippingId - a.Shipping_shippingId;
        }), EXI.addNavigationPanel(a), a.load(d), EXI.setLoadingNavigationPanel(!1);
    }, c = function(a, b) {
        EXI.setLoadingNavigationPanel(!1);
    };
    return EXI.getDataAdapter({
        onSuccess: b,
        onError: c
    });
}, ShippingExiController.prototype.init = function() {
    function a() {
        var a = new ShippingListView();
        a.onSelect.attach(function(a, b) {
            location.hash = "/shipping/" + b[0].Shipping_shippingId + "/main";
        }), c = b.loadShipmentsNavigationPanel(a), c.proposal.shipping.getShippings();
    }
    var b = this, c = null;
    Path.map("#/proposal/shipping/nav?nomain").to(function() {
        a();
    }), Path.map("#/proposal/shipping/nav").to(function() {
        a(), EXI.addMainPanel(new ShippingWelcomeMainView());
    }), Path.map("#/shipping/:shippingId/main").to(function() {
        var a = new ShippingMainView();
        EXI.addMainPanel(a), a.load(this.params.shippingId);
    }).enter(this.setPageBackground), Path.map("#/shipping/main").to(function() {
        var a = new ShippingMainView();
        EXI.addMainPanel(a), a.load();
    }).enter(this.setPageBackground);
}, Credential.prototype.isManager = function() {
    return this._checkRole("manager");
}, Credential.prototype.isLocalContact = function() {
    return this._checkRole("localcontact");
}, Credential.prototype._checkRole = function(a) {
    return -1 != JSON.stringify(this.roles).toLowerCase().indexOf(a);
}, CredentialManager.prototype.addCredential = function(a, b, c, d, e, f) {
    var g = new Credential(a, b, c, d, e, [], f);
    null == localStorage.getItem("credentials") && localStorage.setItem("credentials", "[]");
    var h = this.getCredentials();
    h.push(g), localStorage.setItem("credentials", JSON.stringify(h)), this.onLogin.notify(g);
}, CredentialManager.prototype.getCredentials = function() {
    var a = [];
    return null != JSON.parse(localStorage.getItem("credentials")) && (a = JSON.parse(localStorage.getItem("credentials"))), 
    a;
}, CredentialManager.prototype.getTechniqueByBeamline = function(a) {
    for (var b = this.getConnections(), c = 0; c < b.length; c++) {
        if (-1 != JSON.stringify(b[c].beamlines.MX).toUpperCase().indexOf(a.toUpperCase())) return "MX";
        if (-1 != JSON.stringify(b[c].beamlines.SAXS).toUpperCase().indexOf(a.toUpperCase())) return "SAXS";
    }
    return "UNKNOW";
}, CredentialManager.prototype.getBeamlines = function() {
    for (var a = this.getConnections(), b = [], c = 0; c < a.length; c++) $.merge(b, a[c].beamlines.MX), 
    $.merge(b, a[c].beamlines.SAXS);
    return b;
}, CredentialManager.prototype.getConnections = function() {
    for (var a = this.getCredentials(), b = [], c = 0; c < a.length; c++) if (a[c].activeProposals.length > 0) for (var d = 0; d < a[c].activeProposals.length; d++) b.push({
        username: a[c].username,
        url: a[c].url,
        exiUrl: a[c].exiUrl,
        token: a[c].token,
        beamlines: a[c].properties.beamlines,
        proposal: a[c].activeProposals[d]
    }); else b.push({
        username: a[c].username,
        url: a[c].url,
        exiUrl: a[c].exiUrl,
        token: a[c].token,
        beamlines: a[c].properties.beamlines,
        proposal: null
    });
    return b;
}, CredentialManager.prototype.getCredentialByUserName = function(a, b, c, d) {
    for (var e = this.getCredentials(), f = 0; f < e.length; f++) if (e[f].username == a) return new Credential(e[f].username, e[f].roles, e[f].token, e[f].url, e[f].activeProposals);
}, CredentialManager.prototype.logout = function(a, b, c, d) {
    localStorage.removeItem("credentials"), this.onLogout.notify();
}, CredentialManager.prototype.setActiveProposal = function(a, b) {
    for (var c = this.getCredentials(), d = 0; d < c.length; d++) c[d].username.toLowerCase() == a.toLowerCase() && (c[d].activeProposals = [ b ], 
    localStorage.setItem("credentials", JSON.stringify(c)), localStorage.removeItem("sessions"), 
    this.onActiveProposalChanged.notify());
}, BUI = {
    interval: 4e4,
    rainbow: function(a, b) {
        var c, d, e, f = b / a, g = ~~(6 * f), h = 6 * f - g, i = 1 - h;
        switch (g % 6) {
          case 0:
            c = 1, d = h, e = 0;
            break;

          case 1:
            c = i, d = 1, e = 0;
            break;

          case 2:
            c = 0, d = 1, e = h;
            break;

          case 3:
            c = 0, d = i, e = 1;
            break;

          case 4:
            c = h, d = 0, e = 1;
            break;

          case 5:
            c = 1, d = 0, e = i;
        }
        var j = "#" + ("00" + (~~(255 * c)).toString(16)).slice(-2) + ("00" + (~~(255 * d)).toString(16)).slice(-2) + ("00" + (~~(255 * e)).toString(16)).slice(-2);
        return j;
    },
    groupBy: function(a, b) {
        var c = {};
        return a.forEach(function(a) {
            var d = JSON.stringify(b(a));
            c[d] = c[d] || [], c[d].push(a);
        }), Object.keys(c).map(function(a) {
            return c[a];
        });
    },
    getFileNameByPath: function(a) {
        if (null != a) {
            var b = a.split("/");
            if (b.length > 0) return b[b.length - 1];
        }
        return "Not file";
    },
    getUpdateInterval: function() {
        return this.interval = this.interval + 2e3, this.interval;
    },
    getRadiationDamageThreshold: function() {
        return .7;
    },
    getQualityThreshold: function() {
        return .7;
    },
    getCreateShipmentURL: function() {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=create_shipment";
    },
    getCreateShipmentList: function() {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=list_shipment";
    },
    getShippingURL: function(a) {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=shipment&shippingId=" + a;
    },
    getMacromoleculeResultsURLByMultipleSearch: function(a) {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=macromolecule&search=" + JSON.stringify(a).replace(new RegExp('"', "g"), "'");
    },
    getMacromoleculeResultsURL: function(a) {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=macromolecule&macromoleculeId=" + a;
    },
    getMacromoleculeBufferResultsURL: function(a, b) {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=macromolecule&bufferId=" + b + "&macromoleculeId=" + a;
    },
    getMacromoleculeHeader: function(a) {
        function b(a) {
            if (null != a) {
                var b = BUI.createFormLabel("Name :", BIOSAXS.proposal.getMacromoleculeById(a).name, 75, 400);
                return b += BUI.createFormLabel("Acronym :", BIOSAXS.proposal.getMacromoleculeById(a).acronym, 75, 400), 
                null != BIOSAXS.proposal.getMacromoleculeById(a).comments && (b += BUI.createFormLabel("Comments :", BIOSAXS.proposal.getMacromoleculeById(a).comments, 75, 400)), 
                b;
            }
        }
        return Ext.create("Ext.container.Container", {
            frame: !1,
            layout: "hbox",
            title: "Macromolecule",
            bodyPadding: "5",
            width: 890,
            margin: "0 0 10 0",
            height: 100,
            style: {
                borderColor: "#BDBDBD",
                borderStyle: "solid",
                borderWidth: "1px"
            },
            fieldDefaults: {
                msgTarget: "side",
                labelWidth: 100
            },
            items: [ {
                margin: "10 0 0 10",
                width: 475,
                border: 0,
                html: b(a)
            }, {
                margin: "10 0 0 10",
                width: 475,
                border: 0,
                html: BUI.getZipHTMLByMacromoleculeId(a)
            } ]
        });
    },
    getZipHTMLByMacromoleculeId: function(a) {
        if (null != a) {
            var b = BIOSAXS.proposal.getMacromoleculeById(a).acronym;
            return "<div><a style='color:blue;' href='/ispyb/user/dataadapter.do?reqCode=getZipFileByMacromoleculeId&fileName=" + b + "&macromoleculeId=" + a + "'><img src='../images/download.png' /> Download</a></div>";
        }
    },
    getZipHTMLByExperimentId: function(a, b) {
        return null == b && (b = "experiment"), "<div><a style='color:blue;' href='/ispyb/user/dataadapter.do?reqCode=getZipFileByExperimentId&fileName=" + b + "&experimentId=" + a + "'><img src='../images/download.png' /> Download</a></div>";
    },
    getZipURLByAverageId: function(a, b) {
        return null == b && (b = "experiment"), "/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&f&mergeIdsList=" + a + "&fileName=" + b;
    },
    getZipURLBySubtractionId: function(a, b) {
        return null == b && (b = "experiment"), "/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&f&subtractionIdList=" + a + "&fileName=" + b;
    },
    getZipHTMLByFrameRangeId: function(a, b, c) {
        return "<div><a style='color:blue;' href='/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&f&experimentId=" + a + "&start=" + Number(b) + "&end=" + Number(c) + "'><img src='../images/download.png' /> Download</a></div>";
    },
    getZipFrameHPLCUrl: function(a, b, c) {
        return "/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&f&experimentId=" + a + "&start=" + Number(b) + "&end=" + Number(c);
    },
    getQueueUrl: function() {
        return "/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByProposalId";
    },
    getQueueUrlByExperiment: function(a) {
        return "/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByExperimentId&f&experimentId=" + a;
    },
    getStandardDeviation: function(a) {
        for (var b = 0, c = 0, d = null, e = [], f = 0; f < a.length; f++) {
            var g = a[f];
            null != g && (isNaN(g) || (c += 1, b += Number(g), e.push(Number(g))));
        }
        d = c > 0 ? b / c : b;
        var h = 0;
        for (f = 0; f < e.length; f++) h += Math.pow(e[f] - d, 2);
        var i = Math.sqrt(h / c);
        return {
            std: i,
            sum: b,
            avg: d,
            validNumber: c,
            totalNumber: a.length,
            values: a
        };
    },
    getHTMLTableForFrameAveraged: function(a, b, c, d, e, f, g, h, i) {
        function j(a, b) {
            return "<td style='font:normal 9px tahoma,arial,verdana,sans-serif;color:black'>(" + a + " of " + b + ")</td>";
        }
        function k(a, b) {
            return .5 > a / b ? "#FA5858" : a / b >= .5 && .8 > a / b ? "#FF9900" : "white";
        }
        function l(a, b, c, d) {
            return "<tr style='background-color:" + k(c, d) + ";height:12px;padding:1px;'><td style=' width:10px; height:10px;'> " + BUI.getRectangleColorDIV(a, 10, 10) + "</td> <td style='padding:5px;'> " + b + "</td>" + j(c, d) + "</tr>";
        }
        var m = "<table style='margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;'>";
        return null != a && null != c && (color = BIOSAXS.proposal.bufferColors[g], m += l(color, a, c, f)), 
        null != b && null != d && (null == i ? color = BIOSAXS.proposal.macromoleculeColors[h] : color = i, 
        m += l(color, b, d, f)), null != a && null != e && (color = BIOSAXS.proposal.bufferColors[g], 
        m += l(color, a, e, f)), m + "</table>";
    },
    isWebGLEnabled: function(a) {
        if (window.WebGLRenderingContext) {
            var b = document.createElement("canvas");
            names = [ "webgl", "experimental-webgl", "moz-webgl", "webkit-3d" ], context = !1;
            for (var c = 0; 4 > c; c++) try {
                if (context = b.getContext(names[c]), context && "function" == typeof context.getParameter) return a ? {
                    name: names[c],
                    gl: context
                } : !0;
            } catch (d) {}
            return !1;
        }
        return !1;
    },
    getHTMLTableForPrefixes: function(a, b, c) {
        function d(a) {
            file = a;
            try {
                file = a.split("/")[a.split("/").length - 1];
            } catch (b) {
                file = "NA";
            }
            return "<tr><td  style='height:12px;padding:5px;'>" + file + "</td></tr>";
        }
        var e = "<table style='margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;'>";
        return null != a && (e += d(a)), null != b && (e += d(b)), null != c && (e += d(c)), 
        e + "</table>";
    },
    getBaseURL: function() {
        return "/ispyb/user/dataadapter.do";
    },
    getPrintcomponentURL: function(a) {
        return "/ispyb/user/viewDewarAction.do?reqCode=generateLabels&dewarId=" + a;
    },
    getPDBVisualizerURL: function(a, b, c) {
        return "/ispyb/user/viewProjectList.do?reqCode=display&menu=PDBVisualizer&modelId=" + a + "&experimentId=" + c + "&subtractionId=" + b;
    },
    getURL: function() {
        return this.getBaseURL() + "?reqCode=getImage";
    },
    getAbinitioImageURL: function() {
        return this.getBaseURL() + "?reqCode=getAbinitioImage";
    },
    getNSDImageURL: function(a) {
        return BUI.getAbinitioImageURL() + "&type=NSD&modelListId=" + a;
    },
    getCHI2ImageURL: function(a) {
        return BUI.getAbinitioImageURL() + "&type=CHI2&modelListId=" + a;
    },
    getModelFile: function(a, b, c) {
        return this.getBaseURL() + "?reqCode=getModelFile&type=" + a + "&modelId=" + b + "&format=" + c;
    },
    getPdbURL: function() {
        return this.getBaseURL() + "?reqCode=getPdbFiles";
    },
    getStvArray: function(a, b) {
        return a = Number(a), b = Number(b), [ a - b, a, a + b ];
    },
    getPointArrayForDygraph: function(a, b, c) {
        return [ a, BUI.getStvArray(b, c) ];
    },
    createDIV: function(a, b, c, d) {
        var e = document.createElement("div"), f = document.createElement("span");
        return null != c && f.setAttribute("class", c), null != d ? f.setAttribute("style", "float:left;width:" + b + "px;height:18px;background-color:" + d) : f.setAttribute("style", "float:left;width:" + b + "px;height:18px;"), 
        f.appendChild(document.createTextNode(a)), e.appendChild(f), e;
    },
    createFormLabel: function(a, b, c, d, e) {
        var f = document.createElement("div");
        return f.appendChild(BUI.createDIV(a, c, "bLabel", e)), f.appendChild(BUI.createDIV(b, d, "btext", e)), 
        f.innerHTML;
    },
    createTextArea: function(a, b, c, d, e) {
        var f = document.createElement("div");
        f.appendChild(BUI.createDIV(a, c, "bLabel"));
        var g = document.createElement("textarea");
        return g.setAttribute("rows", d), g.setAttribute("cols", e), g.appendChild(document.createTextNode(b)), 
        f.appendChild(g), f.innerHTML;
    },
    showBetaWarning: function() {
        alert("ISPyB for Biosaxs version Beta has not this functionality enabled");
    },
    formatValuesErrorUnitsScientificFormat: function(a, b, c, d) {
        var e = 14, f = 2, g = 10, h = !1;
        if (null != d && (null != d.fontSize && (e = d.fontSize), null != d.decimals && (f = d.decimals), 
        null != d.errorFontSize && (g = d.errorFontSize), null != d.lineBreak && (h = d.lineBreak)), 
        "" == a) return "";
        if (null == b) return "<span style='font-size:" + e + "px'>" + Number(a).toFixed(f) + "</span>";
        var i = "<span style='font-size:" + e + "px'>" + Number(a).toFixed(f) + "<span style='font-size:" + g + "px;color:gray'>  " + c + "</span></span>";
        return h && (i += "<br/>"), i + "<span style='font-size:" + g + "px'> &#177; " + Number(Number(b).toFixed(3)).toExponential() + "</span></span>";
    },
    formatValuesErrorUnits: function(a, b, c, d) {
        var e = 16, f = 2, g = 10, h = !0;
        if (null != d && (null != d.fontSize && (e = d.fontSize), null != d.decimals && (f = d.decimals), 
        null != d.errorFontSize && (g = d.errorFontSize), null != d.lineBreak && (h = d.lineBreak)), 
        "" == a) return "";
        if (null == b) return "<span style='font-size:" + e + "px'>" + Number(a).toFixed(f) + "</span>";
        var i = "<span style='font-size:" + e + "px'>" + Number(a).toFixed(f) + "<span style='font-size:" + g + "px;color:gray'>  " + c + "</span></span>";
        return h && (i += "<br/>"), i + "<span style='font-size:" + g + "px'> &#177; " + Number(Number(b).toFixed(8)).toExponential() + "</span></span>";
    },
    formatValuesUnits: function(a, b, c) {
        var d = 12, e = 2, f = 10;
        return null != c && (null != c.fontSize && (d = c.fontSize), null != c.decimals && (e = c.decimals), 
        null != c.unitsFontSize && (f = c.unitsFontSize)), "" == a ? "" : null == b ? "<span style='font-size:" + d + "px'>" + Number(a).toFixed(e) + "</span>" : "<span style='font-size:" + d + "px'>" + Number(a).toFixed(e) + " </span><span style='font-size:" + f + "px;color:gray'>  " + b + "</span></span>";
    },
    getGreenButton: function(a, b) {
        var c = 70, d = 20;
        return null != b && (null != b.width && (c = b.width), null != b.height && (d = b.height)), 
        '<input type="button" name="btn" style= "font-size:9px;width:' + c + "px; height:" + d + 'px" class="btn-green" value="' + a + '"/>';
    },
    getBlueButton: function(a, b) {
        var c = 70, d = 20;
        return null != b && (null != b.width && (c = b.width), null != b.height && (d = b.height)), 
        '<input type="button" name="btn" style= "font-size:9px;width:' + c + "px; height:" + d + 'px" class="btn-blue" value="' + a + '"/>';
    },
    getSubmitGreenButton: function(a) {
        return '<input type="submit" type="button" name="btn" class="btn-green" value="' + a + '"/>';
    },
    getRedButton: function(a) {
        return '<input type="button"  name="btn" class="btn-red" value="' + a + '" />';
    },
    getRectangleColorDIV: function(a, b, c) {
        return '<div style="border: 1px solid gray;background-color: ' + a + "; height:" + b + "px;width:" + c + 'px" ></div>';
    },
    openBufferWindow: function(a) {
        var b = new BufferWindow();
        b.draw(tabs.experiment.getBufferById(a), tabs.experiment);
    },
    safetyRenderer: function(a, b, c) {
        var d = a;
        return "YELLOW" == a && (d = "#E9AB17"), '<span style="color:' + d + ';">' + a + "</span>";
    },
    getSampleColor: function() {
        return "#CB181D";
    },
    getLightSampleColor: function() {
        return "#FCBBA1";
    },
    getBufferColor: function() {
        return "#6A51A3";
    },
    getLightBufferColor: function() {
        return "#BCBDDC";
    },
    formatConcentration: function(a) {
        return null != a ? "<span style='font-size:16px'>" + Number(a).toFixed(2) + "</span><span style='font-size:9px'> mg/ml </span>" : a;
    },
    formatVolume: function(a, b) {
        return Number(a.data.volumeToLoad) > Number(a.data.volume) ? "<span style='color:red;font-weight:bold;'>" + b + "</span><span style='font-size:9;color:red;'> ï¿½l</span>" : Number(a.data.volumeToLoad) == Number(a.data.volume) ? "<span style='color:orange;font-weight:bold;'>" + b + "</span><span style='font-size:9;color:orange;'> ï¿½l</span>" : "<span>" + b + "</span><span style='font-size:9'> ï¿½l</span>";
    },
    getProposal: function() {
        return new Proposal();
    },
    getSampleNameRenderer: function(a, b, c) {
        var d = c.data;
        return null == c.raw.macromolecule3VO ? '<span style="color:blue;">' + d.code + "</span>" : '<span style="color:green;">' + d.code + "</span>";
    },
    getSafetyLevels: function() {
        var a = [];
        return a.push({
            safetyLevelId: "",
            name: "UNKNOWN"
        }), a.push({
            safetyLevelId: 1,
            name: "GREEN"
        }), a.push({
            safetyLevelId: 2,
            name: "YELLOW"
        }), a.push({
            safetyLevelId: 3,
            name: "RED"
        }), a;
    },
    getErrorColor: function() {
        return "#F6CED8";
    },
    getWarningColor: function() {
        return "#F5DA81";
    },
    getValidColor: function() {
        return "#E0F8E0";
    },
    getSamplePlateLetters: function() {
        return [ "A", "B", "C", "D", "E", "F", "G", "H" ];
    },
    getSamplePositionHTML: function(a, b) {
        var c = "", d = "", e = "", f = this.getSamplePlateLetters();
        if (null != a.sampleplateposition3VO) {
            var g = b.getSamplePlateById(a.sampleplateposition3VO.samplePlateId);
            if (null != g) {
                c = g.slotPositionColumn, d = a.sampleplateposition3VO.rowNumber, e = a.sampleplateposition3VO.columnNumber;
                var h = "<span style='font-weight:italic'>Plate: </span><span style='font-weight:bold'>" + c + "</span>-<span style='font-weight:bold'>" + f[d - 1] + "</span><span style='font-weight:bold'>" + e + "</span>";
                return h;
            }
        }
        return "";
    },
    getSafetyLabelName: function(a) {
        for (var b = BUI.getSafetyLevels(), c = 0; c < b.length; c++) if (b[c].safetyLevelId == a) return b[c].name;
        return "UNKNOWN";
    },
    id: function() {
        for (var a = "", b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", c = 0; 5 > c; c++) a += b.charAt(Math.floor(Math.random() * b.length));
        return "ExiSAXS" + a;
    },
    showWarning: function(a) {
        Ext.Msg.show({
            title: "Warning",
            msg: a,
            icon: Ext.Msg.WARNING,
            animEl: "elId"
        });
    },
    showError: function(a) {
        Ext.Msg.show({
            title: "Warning",
            msg: a,
            icon: Ext.Msg.ERROR,
            animEl: "elId"
        });
    },
    getTipHTML: function(a) {
        return "<div  class='panelMacro' ><table class='tipMacro'><colgroup span='1'><col span='1' width='24'><col span='1'></colgroup><tbody><tr><td colspan='1' rowspan='1' valign='top'></td><td colspan='1' rowspan='1'><b>Tip</b><br clear='none'>" + a + "</td></tr></tbody></table></div>";
    },
    getWarningHTML: function(a) {
        return "<div class='panelMacro' ><table class='warningMacro'><colgroup span='1'><col span='1' width='24'><col span='1'></colgroup><tbody><tr><td colspan='1' rowspan='1' valign='top'></td><td colspan='1' rowspan='1'><b>Warning</b><br clear='none'>" + a + "</td></tr></tbody></table></div>";
    },
    getErrorHTML: function(a) {
        return "<div class='panelMacro' ><table class='errorMacro'><colgroup span='1'><col span='1' width='24'><col span='1'></colgroup><tbody><tr><td colspan='1' rowspan='1' valign='top'><img align='middle' src='https://cwiki.apache.org/confluence/images/emoticons/forbidden.gif' width='16' height='16' alt='' border='0'></td><td colspan='1' rowspan='1'><b>Error</b><br clear='none'>" + a + "</td></tr></tbody></table></div>";
    },
    getProgessBar: function(a, b) {
        var c = "#0a0";
        c = "#99CC00", a > 100 && (c = "yellow", a = 100), isNaN(a) && (c = "white", a = 0);
        var d = a + "%";
        return null != b && (d = b), "<div class='meter-wrap'><div class='meter-value' style='background-color: " + c + " ; width: " + a + "%;'><div class='meter-text'>" + d + "</div></div></div>";
    },
    getFileName: function(a) {
        return null != a ? a.split("/")[a.split("/").length - 1] : "";
    }
};

var BIOSAXS_COMBOMANAGER = {
    getComboProposal: function(a) {
        var b = null, c = 400, d = "proposalIdCombo";
        null != a && (null != a.labelWidth && (b = a.labelWidth), null != a.width && (c = a.width), 
        null != a.id && (d = a.id));
        var e = Ext.create("Ext.data.Store", {
            fields: [ "code", "number", "title", "proposalId", "proposal" ],
            data: EXI.proposalManager.getProposals()
        });
        return Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Proposal",
            id: d,
            width: c,
            store: e,
            labelWidth: b,
            queryMode: "local",
            displayField: "proposal",
            valueField: "proposalId"
        });
    },
    getComboMacromoleculeByMacromolecules: function(a, b) {
        var c = 150, d = "0 0 5 0", e = 300;
        null != b && (null != b.labelWidth && (c = b.labelWidth), null != b.margin && (d = b.margin), 
        null != b.width && (e = b.width));
        var f = Ext.create("Ext.data.Store", {
            fields: [ "macromoleculeId", "acronym" ],
            data: a,
            sorters: [ "acronym" ]
        });
        return Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Macromolecules",
            labelWidth: c,
            width: e,
            margin: d,
            store: f,
            editable: !1,
            queryMode: "local",
            displayField: "acronym",
            valueField: "macromoleculeId"
        });
    },
    getComboBuffers: function(a, b) {
        var c = 150, d = "0 0 5 0", e = 300, f = "Buffer";
        null != b && (null != b.labelWidth && (c = b.labelWidth), null != b.margin && (d = b.margin), 
        null != b.width && (e = b.width), null != b.noLabel && (f = null));
        var g = Ext.create("Ext.data.Store", {
            fields: [ "bufferId", "acronym" ],
            data: a,
            sorters: [ "acronym" ]
        });
        return Ext.create("Ext.form.ComboBox", {
            fieldLabel: f,
            labelWidth: c,
            width: e,
            margin: d,
            editable: !1,
            store: g,
            queryMode: "local",
            displayField: "acronym",
            valueField: "bufferId"
        });
    },
    getComboSessions: function(a, b) {
        var c = 150, d = "0 0 5 0", e = 300;
        null != b && (null != b.labelWidth && (c = b.labelWidth), null != b.margin && (d = b.margin), 
        null != b.width && (e = b.width));
        for (var f = 0; f < a.length; f++) a[f].startDateFormatted = moment(a[f].startDate).format("DD/MM/YYYY"), 
        a[f].sorter = moment(a[f].startDate).format("YYYYMMDD");
        var g = Ext.create("Ext.data.Store", {
            fields: [ "sessionId", "startDateFormatted", "beamlineName", "startDate", "endDate", "beamlineOperator" ],
            data: a,
            sorters: [ "sorter" ]
        });
        return Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Session",
            labelWidth: c,
            width: e,
            margin: d,
            store: g,
            queryMode: "local",
            valueField: "sessionId",
            tpl: Ext.create("Ext.XTemplate", '<tpl for=".">', '<div class="x-boundlist-item">{startDateFormatted}<span style="font-weight:bold"> {beamlineName}</span></div>', "</tpl>"),
            displayTpl: Ext.create("Ext.XTemplate", '<tpl for=".">', "{startDateFormatted} {beamlineName}", "</tpl>")
        });
    },
    getComboStorageTemperature: function(a) {
        var b = 200, c = 500;
        null != a && (null != a.labelWidth && (b = a.labelWidth), null != a.width && (c = a.width));
        var d = Ext.create("Ext.data.Store", {
            fields: [ "value", "name" ],
            data: [ {
                value: "N/A",
                name: "N/A"
            }, {
                value: "-80",
                name: "-80"
            }, {
                value: "-20",
                name: "-20"
            }, {
                value: "+4",
                name: "+4"
            }, {
                value: "Room Temperature",
                name: "Room Temperature"
            } ]
        });
        return this.storageLocationComboBox = Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Storage Condition",
            store: d,
            queryMode: "local",
            labelWidth: b,
            width: c,
            displayField: "name",
            valueField: "value",
            value: "Not set"
        }), this.storageLocationComboBox;
    },
    getComboPuckType: function(a) {
        var b = 200, c = 500, d = null;
        null != a && (null != a.labelWidth && (b = a.labelWidth), null != a.width && (c = a.width), 
        null != a.margin && (d = a.margin));
        var e = Ext.create("Ext.data.Store", {
            fields: [ "value", "name" ],
            data: [ {
                value: 10,
                name: "SPINE"
            }, {
                value: 16,
                name: "UNIPUCK"
            }, {
                value: 96,
                name: "PLATE"
            } ]
        });
        return this.storageLocationComboBox = Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Type",
            store: e,
            queryMode: "local",
            labelWidth: b,
            width: c,
            margin: d,
            displayField: "name",
            valueField: "value",
            value: "Not set"
        }), this.storageLocationComboBox;
    }
}, MX_COMBOMANAGER = {
    getComboProteins: function(a, b) {
        var c = 150, d = "10 10 10 40", e = 300;
        null != b && (null != b.labelWidth && (c = b.labelWidth), null != b.margin && (d = b.margin), 
        null != b.width && (e = b.width));
        var f = Ext.create("Ext.data.Store", {
            fields: [ "name", "acronym" ],
            data: a,
            sorters: [ "acronym" ]
        });
        return Ext.create("Ext.form.ComboBox", {
            fieldLabel: "Proteins",
            labelWidth: c,
            width: e,
            margin: d,
            store: f,
            editable: !1,
            queryMode: "local",
            displayField: "acronym",
            valueField: "proteinId"
        });
    }
};

DygraphWidget.prototype.dblclick = function(a, b, c) {
    b.widget.dblclick.notify({
        x: b.lastx_
    });
}, DygraphWidget.prototype._createHTLMWrapper = function(a, b, c) {
    if (null != document.getElementById(this.targetId)) {
        document.getElementById(this.targetId).innerHTML = "";
        var d = document.createElement("table"), e = document.createElement("tr"), f = document.createElement("td");
        this.canvasDiv = document.createElement("div"), this.canvasDiv.setAttribute("id", "dygraph_canvas_" + this.id), 
        this.canvasDiv.setAttribute("style", "width:" + this.width + "px;height:" + this.height + "px"), 
        f.appendChild(this.canvasDiv), this.legendDiv = document.createElement("div"), e.appendChild(f), 
        d.appendChild(e), document.getElementById(this.targetId).appendChild(d);
    }
}, DygraphWidget.prototype.draw = function(a, b, c) {
    var d = this;
    this._createHTLMWrapper(a, b, c), this.dygraph = new Dygraph(this.canvasDiv, a, {
        labels: c,
        labelsDiv: this.legendDiv,
        labelsSeparateLines: !0,
        highlightCircleSize: 3,
        strokeWidth: 1,
        customBars: this.customBars,
        colors: b,
        xlabel: this.xlabel,
        ylabel: this.ylabel,
        showRangeSelector: this.showRangeSelector,
        rangeSelectorPlotStrokeColor: "rgba(50,50,50,0.3)",
        rangeSelectorPlotFillColor: "rgba(50,50,50,0.1)",
        labelsDivStyles: this.labelsDivStyles,
        interactionModel: this.interactionModel,
        underlayCallback: function(a, b, c) {
            if (null != d.ranges) for (var e in d.ranges) {
                var f = c.toDomCoords(d.ranges[e].start, -20), g = c.toDomCoords(d.ranges[e].end, 20), h = f[0], i = g[0];
                a.fillStyle = d.ranges[e].color, a.fillRect(h, b.y, i - h, b.h);
            }
        }
    });
}, StdDevDyGraph.prototype.dblclick = DygraphWidget.prototype.dblclick, StdDevDyGraph.prototype._createHTLMWrapper = DygraphWidget.prototype._createHTLMWrapper, 
StdDevDyGraph.prototype.draw = DygraphWidget.prototype.draw, StdDevDyGraph.prototype.input = function() {
    return {
        data: [ [ 1, [ 2, 3, 3.5 ], [ 4, 4.2, 5 ] ], [ 2, [ 5, 5.5, 5.7 ], [ 4, 4.2, 5 ] ] ],
        colors: [ "blue", "red" ],
        labels: [ "", "data1", "data2" ]
    };
}, StdDevDyGraph.prototype.test = function(a) {
    var b = new StdDevDyGraph(a, {
        width: 500,
        height: 400,
        xlabel: "xLabel",
        showRangeSelector: !1
    });
    b.draw(b.input().data, b.input().colors, b.input().labels);
}, Event.prototype = {
    attach: function(a) {
        this._listeners.push(a);
    },
    notify: function(a) {
        for (var b = 0; b < this._listeners.length; b++) this._listeners[b](this._sender, a);
    }
}, ProgressBar.prototype.getPanel = function(a, b) {
    var c = parseFloat(a) / parseFloat(b) * 100, d = "#337ab7";
    return 100 == c && (d = "green"), 50 > c && (d = "orange"), "<div class='progress'><div class='progress-bar' role='progressbar' aria-valuenow='10' aria-valuemin='0' aria-valuemax='100' style='background-color:" + d + ";width:" + c + "%'></div></div>";
}, String.prototype.format = function(a) {
    var b = this;
    return b.replace(String.prototype.format.regex, function(b) {
        var c, d = parseInt(b.substring(1, b.length - 1));
        return c = d >= 0 ? a[d] : -1 === d ? "{" : -2 === d ? "}" : "";
    });
}, String.prototype.format.regex = new RegExp("{-?[0-9]+}", "g"), AbinitioForm.prototype._renderPDB = function(a) {
    try {
        for (var b = [], c = 0; c < a.length; c++) b.push({
            modelId: a[c],
            color: "0xFF6600",
            opacity: .8
        });
        this.viewer.refresh(b);
    } catch (d) {
        console.log(d);
    }
}, AbinitioForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        width: this.width,
        cls: "border-grid",
        layout: "hbox",
        height: this.height,
        margin: 5,
        border: 1,
        defaultType: "textfield",
        items: [ {
            xtype: "container",
            layout: "vbox",
            items: [ this.abinitioGrid.getPanel() ]
        }, {
            xtype: "container",
            layout: "vbox",
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 300,
                margin: "10 0 0 0",
                width: 500,
                items: [ this.curvePlotter.getPanel() ]
            }, this.viewer.getPanel() ]
        } ]
    }), this.panel;
}, AbinitioForm.prototype.load = function(a) {
    this.subtractions = a, this.abinitioGrid.refresh(a);
}, AddressForm.prototype.getAddress = function() {
    return null == this.address && (this.address = {}), this.address.billingReference = Ext.getCmp(this.id + "billingReference").getValue(), 
    this.address.cardName = Ext.getCmp(this.id + "cardName").getValue(), this.address.courierAccount = Ext.getCmp(this.id + "courierAccount").getValue(), 
    this.address.defaultCourrierCompany = Ext.getCmp(this.id + "courrierCompany").getValue(), 
    this.address.dewarAvgCustomsValue = Ext.getCmp(this.id + "dewarAvgCustomsValue").getValue(), 
    this.address.dewarAvgTransportValue = Ext.getCmp(this.id + "dewarAvgTransportValue").getValue(), 
    null == this.address.personVO && (this.address.personVO = {}), this.address.personVO.emailAddress = Ext.getCmp(this.id + "emailAddress").getValue(), 
    this.address.personVO.familyName = Ext.getCmp(this.id + "familyName").getValue(), 
    this.address.personVO.givenName = Ext.getCmp(this.id + "name").getValue(), this.address.personVO.faxNumber = Ext.getCmp(this.id + "faxNumber").getValue(), 
    this.address.personVO.phoneNumber = Ext.getCmp(this.id + "phoneNumber").getValue(), 
    this.address;
}, AddressForm.prototype._loadPerson = function(a, b, c, d, e) {
    Ext.getCmp(this.id + "emailAddress").setValue(c), Ext.getCmp(this.id + "familyName").setValue(b), 
    Ext.getCmp(this.id + "name").setValue(a), Ext.getCmp(this.id + "faxNumber").setValue(d), 
    Ext.getCmp(this.id + "phoneNumber").setValue(e);
}, AddressForm.prototype.load = function(a) {
    this.address = a, null != a && (Ext.getCmp(this.id + "cardName").setValue(a.cardName), 
    Ext.getCmp(this.id + "courrierCompany").setValue(a.defaultCourrierCompany), Ext.getCmp(this.id + "dewarAvgCustomsValue").setValue(a.dewarAvgCustomsValue), 
    Ext.getCmp(this.id + "dewarAvgTransportValue").setValue(a.dewarAvgTransportValue), 
    Ext.getCmp(this.id + "courierAccount").setValue(a.courierAccount), Ext.getCmp(this.id + "billingReference").setValue(a.billingReference), 
    null != a.personVO && this._loadPerson(a.personVO.givenName, a.personVO.familyName, a.personVO.emailAddress, a.personVO.faxNumber, a.personVO.phoneNumber));
}, AddressForm.prototype.getPersonPanel = function() {
    return this.personPanel = Ext.create("Ext.panel.Panel", {
        layout: "vbox",
        margin: "10",
        items: [ {
            padding: 10,
            xtype: "container",
            layout: "hbox",
            border: !1,
            items: [ {
                xtype: "requiredtextfield",
                id: this.id + "name",
                fieldLabel: "Name",
                labelWidth: 75,
                margin: "0 0 0 10",
                disabled: !0,
                width: 200
            }, {
                xtype: "requiredtextfield",
                id: this.id + "familyName",
                fieldLabel: "Surname",
                labelWidth: 75,
                disabled: !0,
                margin: "0 0 0 10",
                width: 200
            }, {
                xtype: "requiredtextfield",
                id: this.id + "emailAddress",
                fieldLabel: "Email",
                labelWidth: 75,
                margin: "0 0 0 10",
                width: 300
            }, {
                id: this.id + "phoneNumber",
                fieldLabel: "Phone",
                xtype: "textfield",
                labelWidth: 75,
                margin: "0 0 0 10",
                width: 220
            }, {
                id: this.id + "faxNumber",
                fieldLabel: "Fax",
                xtype: "textfield",
                labelWidth: 75,
                margin: "0 0 0 10",
                width: 220
            } ]
        }, {
            padding: 10,
            xtype: "container",
            layout: "hbox",
            border: !1,
            items: [ {
                xtype: "requiredtextfield",
                id: this.id + "cardName",
                fieldLabel: "Card Name",
                name: "CardName",
                labelWidth: 150,
                margin: "0 0 0 10",
                width: 300
            }, {
                xtype: "requiredtextfield",
                id: this.id + "courierAccount",
                fieldLabel: "Courier Account",
                margin: "0 0 0 30",
                labelWidth: 150,
                width: 300
            }, {
                xtype: "requiredtextfield",
                id: this.id + "courrierCompany",
                fieldLabel: "Courier Company",
                margin: "0 0 0 30",
                labelWidth: 150,
                width: 300
            } ]
        }, {
            padding: 10,
            xtype: "container",
            layout: "hbox",
            border: !1,
            items: [ {
                id: this.id + "dewarAvgCustomsValue",
                fieldLabel: "Average Custom Value",
                xtype: "numberfield",
                margin: "0 0 0 10",
                minValue: 0,
                maxValue: 15,
                labelWidth: 150,
                width: 300
            }, {
                id: this.id + "dewarAvgTransportValue",
                fieldLabel: "Average Transport Value",
                xtype: "numberfield",
                margin: "0 0 0 30",
                minValue: 0,
                maxValue: 15,
                labelWidth: 150,
                width: 300
            }, {
                id: this.id + "billingReference",
                xtype: "textfield",
                fieldLabel: "Billing Reference",
                margin: "0 0 0 30",
                xtype: "textfield",
                labelWidth: 150,
                width: 300
            } ]
        } ]
    }), this.personPanel;
}, AddressForm.prototype.getPackagePanel = function() {
    return this.packagePanel = Ext.create("Ext.panel.Panel", {
        layout: "hbox",
        items: [ {
            padding: 10,
            xtype: "container",
            layout: "vbox",
            border: !1,
            items: [ {
                xtype: "container",
                layout: "hbox",
                items: []
            }, {
                xtype: "container",
                layout: "hbox",
                margin: "10 0 0 0",
                items: []
            } ]
        } ]
    }), this.packagePanel;
}, AddressForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        hidden: this.isHidden,
        layout: "vbox",
        title: "Shipping Address Card",
        cls: "border-grid",
        buttons: this.getToolBar(),
        icon: "../images/icon/ic_email_black_24dp.png",
        items: [ this.getPersonPanel() ]
    }), this.panel;
}, AddressForm.prototype.save = function() {
    var a = this;
    a.panel.setLoading();
    var b = function(b) {
        a.panel.setLoading(!1), EXI.getDataAdapter().proposal.proposal.update();
    };
    EXI.getDataAdapter({
        onSuccess: b
    }).proposal.labcontacts.saveLabContact(a.getAddress());
}, AddressForm.prototype.getToolBar = function() {
    var a = this;
    return [ {
        text: "Save",
        hidden: a.isSaveButtonHidden,
        width: 100,
        handler: function() {
            a.save();
        }
    } ];
}, AuthenticationForm.prototype.show = function() {
    this.window = Ext.create("Ext.window.Window", {
        title: 'Authentication <span style="FONT-SIZE:9PX;color:red;">[INTRANET ONLY]</span>',
        height: 250,
        width: 400,
        modal: !0,
        layout: "fit",
        items: [ this.getPanel() ]
    }), this.window.show();
}, AuthenticationForm.prototype.getPanel = function() {
    var a = this, b = Ext.create("Ext.data.Store", {
        fields: [ "name", "url", "exiUrl" ],
        data: ExtISPyB.sites
    });
    return Ext.create("Ext.form.Panel", {
        bodyPadding: 5,
        width: 350,
        layout: "anchor",
        defaults: {
            anchor: "90%"
        },
        defaultType: "textfield",
        items: [ {
            fieldLabel: "User",
            name: "user",
            margin: "10 0 0 10",
            allowBlank: !1
        }, {
            fieldLabel: "Password",
            margin: "10 0 0 10",
            name: "password",
            allowBlank: !1,
            inputType: "password"
        }, {
            xtype: "combo",
            fieldLabel: "Choose site",
            name: "site",
            store: b,
            allowBlank: !1,
            valueField: "url",
            displayField: "name",
            margin: "10 0 0 10"
        } ],
        buttons: [ {
            text: "Login",
            formBind: !0,
            disabled: !0,
            handler: function() {
                for (var b = this.up("form").getForm(), c = null, d = 0; d < ExtISPyB.sites.length; d++) ExtISPyB.sites[d].url == b.getFieldValues().site && (c = ExtISPyB.sites[d]);
                a.onAuthenticate.notify({
                    user: b.getFieldValues().user,
                    password: b.getFieldValues().password,
                    site: b.getFieldValues().site,
                    exiUrl: c.exiUrl,
                    properties: c
                });
            }
        } ]
    });
}, BufferForm.prototype.getBuffer = function() {
    return null == this.buffer && (this.buffer = {}), this.buffer.name = Ext.getCmp(this.id + "buffer_name").getValue(), 
    this.buffer.acronym = Ext.getCmp(this.id + "buffer_acronym").getValue(), this.buffer.comments = Ext.getCmp(this.id + "buffer_comments").getValue(), 
    this.buffer.ph = Ext.getCmp(this.id + "buffer_ph").getValue(), this.buffer.composition = Ext.getCmp(this.id + "buffer_composition").getValue(), 
    this.buffer.proposalId = Ext.getCmp(this.id + "proposalIdCombo").getValue(), this.buffer;
}, BufferForm.prototype.load = function(a) {
    this.buffer = a, null != a && (Ext.getCmp(this.id + "buffer_name").setValue(this.buffer.name), 
    Ext.getCmp(this.id + "buffer_acronym").setValue(this.buffer.acronym), Ext.getCmp(this.id + "buffer_comments").setValue(this.buffer.comments), 
    Ext.getCmp(this.id + "buffer_ph").setValue(this.buffer.ph), Ext.getCmp(this.id + "buffer_composition").setValue(this.buffer.composition)), 
    null != this.buffer && null != this.buffer.proposalId && (Ext.getCmp(this.id + "proposalIdCombo").setValue(this.buffer.proposalId), 
    Ext.getCmp(this.id + "proposalIdCombo").disable());
}, BufferForm.prototype._getTopPanel = function() {
    return {
        xtype: "container",
        layout: "hbox",
        border: 0,
        margin: "40 0 0 0",
        frame: !0,
        items: [ {
            xtype: "container",
            layout: "hbox",
            items: [ {
                xtype: "container",
                flex: 1,
                border: !1,
                layout: "anchor",
                items: [ {
                    xtype: "requiredtextfield",
                    id: this.id + "buffer_name",
                    fieldLabel: "Name",
                    name: "name",
                    width: 300
                }, {
                    xtype: "requiredtextfield",
                    id: this.id + "buffer_acronym",
                    fieldLabel: "Acronym",
                    maskRe: /[a-zA-Z0-9]+/,
                    name: "acronym",
                    width: 300
                } ]
            } ]
        }, {
            xtype: "container",
            flex: 1,
            layout: "anchor",
            defaultType: "textfield",
            margin: "0 0 0 10",
            items: [ {
                id: this.id + "buffer_ph",
                fieldLabel: "pH",
                name: "ph",
                xtype: "numberfield",
                width: 300,
                minValue: 0,
                maxValue: 15
            }, {
                fieldLabel: "Composition",
                id: this.id + "buffer_composition",
                name: "composition",
                width: 300
            } ]
        } ]
    };
}, BufferForm.prototype.getToolBar = function() {
    var a = this;
    return [ {
        text: "Save",
        width: 100,
        handler: function() {
            a.panel.setLoading();
            var b = function(b) {
                a.panel.setLoading(!1), EXI.getDataAdapter().proposal.proposal.update();
            };
            EXI.getDataAdapter({
                onSuccess: b
            }).saxs.buffer.saveBuffer(a.getBuffer());
        }
    } ];
}, BufferForm.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "vbox",
        buttons: this.getToolBar(),
        cls: "border-grid",
        layout: "vbox",
        items: [ {
            xtype: "container",
            margin: "10 0 0 20",
            layout: "vbox",
            items: [ BIOSAXS_COMBOMANAGER.getComboProposal({
                id: a.id + "proposalIdCombo",
                labelWidth: 100
            }), this._getTopPanel(), {
                id: this.id + "buffer_comments",
                xtype: "textareafield",
                name: "comments",
                fieldLabel: "Comments",
                width: 600,
                height: 80
            } ]
        } ]
    }), this.panel;
}, CaseForm.prototype.fillStores = function() {
    var a = this;
    this.panel.setLoading("Loading Labcontacts from database");
    var b = BUI.getProposal();
    b.onDataRetrieved.attach(function(b, c) {
        a.labContactForSendingStore.loadData(c, !1), a.labContactForReturnStore.loadData(c, !1), 
        a.panel.setLoading(!1);
    }), b.getLabContactsByProposalId();
}, CaseForm.prototype.refresh = function(a) {
    this.setDewar(a);
}, CaseForm.prototype.getDewar = function() {
    return this.dewar.code = Ext.getCmp(this.id + "dewar_code").getValue(), this.dewar.comments = Ext.getCmp(this.id + "dewar_comments").getValue(), 
    this.dewar.transportValue = Ext.getCmp(this.id + "dewar_transportValue").getValue(), 
    this.dewar.storageLocation = this.storageLocationComboBox.getValue(), this.dewar;
}, CaseForm.prototype.setDewar = function(a) {
    this.dewar = a, null == this.dewar && (this.dewar = {}, this.dewar.code = "", this.dewar.transportValue = "", 
    this.dewar.storageLocation = "", this.dewar.comments = ""), Ext.getCmp(this.id + "dewar_code").setValue(this.dewar.code), 
    Ext.getCmp(this.id + "dewar_comments").setValue(this.dewar.comments), Ext.getCmp(this.id + "dewar_transportValue").setValue(this.dewar.transportValue), 
    this.storageLocationComboBox.setValue(this.dewar.storageLocation);
}, CaseForm.prototype.getStorageLocationCombo = function() {
    return this.storageLocationComboBox = BIOSAXS_COMBOMANAGER.getComboStorageTemperature(), 
    this.storageLocationComboBox;
}, CaseForm.prototype.getPanel = function(a) {
    return this.panel = Ext.create("Ext.form.Panel", {
        width: this.width - 10,
        padding: 10,
        height: 320,
        items: [ {
            xtype: "container",
            margin: "2 2 2 2",
            collapsible: !1,
            defaultType: "textfield",
            layout: "anchor",
            items: [ {
                xtype: "container",
                layout: "vbox",
                items: [ {
                    xtype: "requiredtextfield",
                    fieldLabel: "Name",
                    allowBlank: !1,
                    name: "code",
                    id: this.id + "dewar_code",
                    labelWidth: 200,
                    width: 500
                } ]
            }, this.getStorageLocationCombo(), {
                xtype: "numberfield",
                width: 500,
                labelWidth: 200,
                margin: "10 0 0 0",
                fieldLabel: "Transport Value",
                id: this.id + "dewar_transportValue"
            }, {
                xtype: "textareafield",
                name: "comments",
                fieldLabel: "Comments",
                labelWidth: 200,
                width: 500,
                margin: "10 0 0 0",
                height: 100,
                id: this.id + "dewar_comments"
            } ]
        } ]
    }), this.refresh(a), this.panel;
}, CrystalForm.prototype.getCrystal = function() {
    return this.crystal.acronym = Ext.getCmp(this.id + "buffer_acronym").getValue(), 
    this.crystal;
}, CrystalForm.prototype.getCrystalsForAcronym = function() {
    return EXI.proposalManager.getCrystals(this.crystal.proteinVO.acronym);
}, CrystalForm.prototype.getSpaceGroupGrid = function() {
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "spaceGroup", "crystalId" ],
        data: []
    }), this.grid = Ext.create("Ext.grid.Panel", {
        store: this.store,
        title: "Space Group",
        cls: "border-grid",
        margin: "20 0 0 40",
        columns: [ {
            text: "Name",
            dataIndex: "spaceGroup",
            flex: 1
        }, {
            text: "Name",
            dataIndex: "crystalId",
            flex: 1
        } ],
        height: 200,
        width: 400
    }), this.grid.on("selectionchange", function(a, b) {
        console.log(b);
    }), this.grid;
}, CrystalForm.prototype.load = function(a) {
    this.crystal = a, this.store.loadData(this.getCrystalsForAcronym()), null != a && (Ext.getCmp(this.id + "acronym").setValue(this.crystal.proteinVO.acronym), 
    Ext.getCmp(this.id + "spaceGroup").setValue(this.crystal.spaceGroup));
}, CrystalForm.prototype.getProteinCombo = function() {
    return this.proteinCombo = MX_COMBOMANAGER.getComboProteins(EXI.proposalManager.getProteins(), {
        labelWidth: 100,
        margin: "0 0 10 40",
        width: 300
    }), this.proteinCombo;
}, CrystalForm.prototype.getToolBar = function() {
    return [ {
        text: "Save",
        width: 100,
        handler: function() {
            alert("save");
        }
    } ];
}, CrystalForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "vbox",
        height: this.height,
        buttons: this.getToolBar(),
        cls: "border-grid",
        items: [ {
            xtype: "requiredtextfield",
            id: this.id + "acronym",
            fieldLabel: "Acronym",
            margin: "10 10 20 40",
            maskRe: /[a-zA-Z0-9]+/,
            name: "acronym",
            width: 300
        }, {
            xtype: "requiredtextfield",
            id: this.id + "spaceGroup",
            fieldLabel: "Space Group",
            margin: "10 10 20 40",
            maskRe: /[a-zA-Z0-9]+/,
            name: "spaceGroup",
            width: 300
        }, this.getProteinCombo(), this.getSpaceGroupGrid() ]
    }), this.panel;
}, DataReductionForm.prototype._parseSelectedItemsToIds = function(a) {
    var b = [];
    if (null != a) for (var c = 0; c < a.length; c++) b.push(a[c].id);
    return b;
}, DataReductionForm.prototype.onSelectionChanged = function(a, b) {
    null != b && ("Frames" == a && (this.selectedItems.frames = b, this.selectedItems.subtractions = []), 
    "Averages" == a && (this.selectedItems.averages = b), "Subtractions" == a && (this.selectedItems.frames = [], 
    this.selectedItems.subtractions = b)), this.plotWidget.refresh(this._parseSelectedItemsToIds(this.selectedItems.frames), this._parseSelectedItemsToIds(this.selectedItems.subtractions));
}, DataReductionForm.prototype._getFramesExtPanel = function(a, b, c) {
    var d = this, e = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        mode: "MULTI",
        listeners: {
            selectionchange: function(a, c) {
                for (var e = [], f = 0; f < c.length; f++) e.push(c[f].data);
                d.onSelectionChanged(b, e);
            }
        }
    });
    return Ext.create("Ext.grid.Panel", {
        store: a,
        margin: 10,
        height: c,
        width: 200,
        selModel: e,
        columns: [ {
            text: b,
            dataIndex: "fileName",
            flex: 1
        } ],
        viewConfig: {}
    });
}, DataReductionForm.prototype._getFramesPanel = function() {
    var a = [ "fileName", "type", "id" ];
    this.framesStore = Ext.create("Ext.data.Store", {
        fields: a,
        sorters: "fileName"
    }), this.averagesStore = Ext.create("Ext.data.Store", {
        fields: a
    }), this.subtractionStore = Ext.create("Ext.data.Store", {
        fields: a
    });
    var b = this._getFramesExtPanel(this.framesStore, "Frames", 375), c = (this._getFramesExtPanel(this.averagesStore, "Averages", 125), 
    this._getFramesExtPanel(this.subtractionStore, "Subtractions", 75));
    return {
        xtype: "container",
        layout: "vbox",
        items: [ b, c ]
    };
}, DataReductionForm.prototype._getImageContainer = function(a, b) {
    var c = "<div id='" + this.id + "_" + a + "'>" + a + "</div>";
    return {
        xtype: "container",
        layout: "vbox",
        items: [ {
            html: c,
            margin: "5 0 0 0",
            height: 95,
            width: 100
        }, {
            xtype: "label",
            forId: "myFieldId",
            text: b,
            margin: "5 0 0 0",
            cls: "inline-help"
        } ]
    };
}, DataReductionForm.prototype._getItems = function() {
    return [ {
        xtype: "container",
        layout: "hbox",
        items: [ this._getFramesPanel(), this.plotWidget.getPanel(), {
            xtype: "panel",
            width: 110,
            frame: !0,
            margin: "10 5 5 5",
            border: 0,
            layout: "vbox",
            items: [ this._getImageContainer("scattering", "Scattering"), this._getImageContainer("guinier", "Guinier Region"), this._getImageContainer("kratky", "Kratky Plot"), this._getImageContainer("gnom", "P(r) distribution") ]
        } ]
    } ];
}, DataReductionForm.prototype._getButtons = function() {
    return [];
}, DataReductionForm.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.form.Panel", {
        width: this.width,
        height: this.height,
        border: 0,
        items: this._getItems(),
        buttons: this._getButtons(),
        listeners: {
            afterrender: function() {
                a._populate();
            }
        }
    }), this.panel;
}, DataReductionForm.prototype._populate = function() {}, DataReductionForm.prototype.refresh = function(a) {
    if (null != a) for (var b = 0; b < a.length; b++) {
        var c = a[b], d = [ {
            fileName: BUI.getFileName(c.bufferAverageFilePath),
            type: "bufferAvg",
            id: c.subtractionId
        }, {
            fileName: BUI.getFileName(c.sampleAverageFilePath),
            type: "sampleAvg",
            id: c.subtractionId
        } ];
        this.averagesStore.loadData(d, !0), this.subtractionStore.loadData([ {
            fileName: BUI.getFileName(c.substractedFilePath),
            type: "SUBTRACTION",
            id: c.subtractionId
        } ], !0);
        var e = [];
        if (null != c.bufferOneDimensionalFiles && null != c.bufferOneDimensionalFiles.frametolist3VOs) for (var f = 0; f < c.bufferOneDimensionalFiles.frametolist3VOs.length; f++) {
            var g = c.bufferOneDimensionalFiles.frametolist3VOs[f];
            null != g.frame3VO && e.push({
                fileName: BUI.getFileName(g.frame3VO.filePath),
                type: "BUFFER",
                id: g.frame3VO.frameId
            });
        }
        if (null != c.sampleOneDimensionalFiles && null != c.sampleOneDimensionalFiles.frametolist3VOs) for (var f = 0; f < c.sampleOneDimensionalFiles.frametolist3VOs.length; f++) {
            var g = c.sampleOneDimensionalFiles.frametolist3VOs[f];
            null != g.frame3VO && e.push({
                fileName: BUI.getFileName(g.frame3VO.filePath),
                type: "SAMPLE",
                id: g.frame3VO.frameId
            });
        }
        this.framesStore.loadData(e, !0), this._displayImage("scattering", c.subtractionId), 
        this._displayImage("kratky", c.subtractionId), this._displayImage("guinier", c.subtractionId), 
        this._displayImage("gnom", c.subtractionId);
    }
}, DataReductionForm.prototype._displayImage = function(a, b) {
    var c = new DataAdapter().getImage(b, a);
    console.log(c);
    var d = "OnClick= window.open('" + c + "')";
    document.getElementById(this.id + "_" + a).innerHTML = "<img src=" + c + '   height="90" width="90" ' + d + ">";
}, DataReductionForm.prototype.input = function() {
    return {};
}, DataReductionForm.prototype.test = function(a) {
    var b = new DataReductionForm(), c = b.getPanel();
    c.render(a);
}, ExperimentHeaderForm.prototype.load = function(a) {
    this.experiment = a, Ext.getCmp(this.id + "name").setValue(a.name), document.getElementById(this.id + "date").innerHTML = "Created on " + a.creationDate, 
    Ext.getCmp(this.id + "comments").setValue(a.json.comments);
}, ExperimentHeaderForm.prototype.getToolBar = function() {
    var a = this;
    return [ {
        text: "Save",
        width: 100,
        handler: function() {
            a.panel.setLoading();
            var b = function(b) {
                a.panel.setLoading(!1);
            };
            EXI.getDataAdapter({
                onSuccess: b
            }).saxs.experiment.saveExperiment(a.experiment.experimentId, Ext.getCmp(a.id + "name").getValue(), Ext.getCmp(a.id + "comments").getValue());
        }
    }, "->", Ext.create("Ext.button.Split", {
        text: "Download",
        menu: new Ext.menu.Menu({
            items: [ {
                text: "For BsxCube on bm29",
                handler: function() {
                    window.open(EXI.getDataAdapter().saxs.template.getTemplateSourceFile(a.experiment.experimentId, "bsxcube"));
                }
            }, {
                text: "For Becquerel on p12",
                handler: function() {
                    window.open(EXI.getDataAdapter().saxs.template.getTemplateSourceFile(a.experiment.experimentId, "becquerel"));
                }
            } ]
        })
    }) ];
}, ExperimentHeaderForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "vbox",
        buttons: this.getToolBar(),
        cls: "border-grid",
        items: [ {
            xtype: "container",
            margin: "10 0 0 20",
            layout: "hbox",
            items: [ {
                xtype: "container",
                layout: "vbox",
                items: [ {
                    xtype: "textfield",
                    fieldLabel: "Name",
                    id: this.id + "name"
                }, {
                    margin: "0 0 0 100",
                    html: "<div style='color:gray;' id='" + this.id + "date';></div>"
                } ]
            }, {
                xtype: "textarea",
                fieldLabel: "Comments",
                margin: "0 0 10 20",
                width: 600,
                height: 80,
                id: this.id + "comments"
            } ]
        } ]
    }), this.panel;
}, AssemblyForm.prototype._getItems = function() {
    return [ {
        xtype: "label",
        forId: "myFieldId",
        text: "List of previously defined macromolecules present in the assembly. This information will be used for additional cross-checks where possible",
        margin: "15 0 20 10",
        cls: "inline-help"
    }, this.molarityGrid.getPanel() ];
}, AssemblyForm.prototype._getButtons = function() {
    return [];
}, AssemblyForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.form.Panel", {
        width: this.width,
        height: this.height,
        margin: 10,
        border: 0,
        defaultType: "textfield",
        items: this._getItems(),
        buttons: this._getButtons()
    }), this.panel;
}, AssemblyForm.prototype.refresh = function(a) {
    this.macromolecule = a, this.molarityGrid.refresh(a);
}, AssemblyForm.prototype.input = function() {
    return {};
}, AssemblyForm.prototype.test = function(a) {
    var b = new AssemblyForm(), c = b.getPanel();
    c.render(a);
}, MacromoleculeForm.prototype._getFieldTextWithHelp = function(a, b, c, d) {
    return Ext.create("Ext.container.Container", {
        items: [ {
            xtype: a,
            fieldLabel: b,
            name: c,
            id: this.id + c
        }, {
            xtype: "label",
            forId: "myFieldId",
            text: d,
            margin: "5 0 0 105",
            cls: "inline-help"
        } ]
    });
}, MacromoleculeForm.prototype._getNumericWithHelp = function(a, b, c, d) {
    return Ext.create("Ext.container.Container", {
        margin: "0 0 0 10",
        items: [ {
            xtype: a,
            fieldLabel: b,
            name: c,
            id: this.id + c,
            decimalPrecision: 6,
            width: 220
        }, {
            xtype: "label",
            forId: "myFieldId",
            text: d,
            margin: "5 0 0 10",
            cls: "inline-help"
        } ]
    });
}, MacromoleculeForm.prototype._getButtons = function() {
    var a = this;
    return [ {
        text: "Save",
        handler: function() {
            a._save();
        }
    } ];
}, MacromoleculeForm.prototype._persist = function(a, b, c, d, e, f, g, h) {
    var i = Ext.getCmp("proposalIdCombo").getValue();
    if (null == i) return void BUI.showError("Please select a proposal");
    if (null == a && null != EXI.proposalManager.getMacromoleculeByAcronym(b)) return void BUI.showError("Duplicated acronym");
    null == a ? (this.macromolecule = {}, this.macromolecule.macromoleculeId = null) : this.macromolecule.macromoleculeId = a, 
    this.macromolecule.acronym = b, this.macromolecule.name = c, this.macromolecule.molecularMass = d, 
    this.macromolecule.extintionCoefficient = e, this.macromolecule.comments = f, this.macromolecule.symmetry = Ext.getCmp(this.id + "comboSym").getValue(), 
    this.macromolecule.refractiveIndex = g, this.macromolecule.solventViscosity = h, 
    this.macromolecule.proposalId = i;
    var j = this, k = function(a, b) {
        var c = function(a, b) {
            j.panel.setLoading(!1), j.onSave.notify(), j.onClose.notify();
        };
        j.panel.setLoading("Updading proposal information"), EXI.getDataAdapter({
            onSuccess: c
        }).proposal.proposal.update();
    };
    this.panel.setLoading("Saving Macromolecule"), EXI.getDataAdapter({
        onSuccess: k
    }).saxs.macromolecule.saveMacromolecule(this.macromolecule);
}, MacromoleculeForm.prototype._save = function() {
    var a = this._getField("acronym"), b = this._getField("name"), c = this._getField("molecularMass"), d = this._getField("extintionCoefficient"), e = this._getField("comments"), f = this._getField("refractiveIndex"), g = this._getField("solventViscosity");
    return "" == b ? void BUI.showError("Name field is mandatory") : "" == a ? void BUI.showError("Acroynm field is mandatory") : void (null != this.macromolecule ? null == this.macromolecule.macromoleculeId ? this._persist(null, a, b, c, d, e, f, g) : this._persist(this.macromolecule.macromoleculeId, a, b, c, d, e, f, g) : this._persist(null, a, b, c, d, e, f, g));
}, MacromoleculeForm.prototype._getItems = function() {
    var a = Ext.create("Ext.data.Store", {
        fields: [ "s" ],
        data: this._getSymmetries()
    });
    return this.symmetryComboBox = Ext.create("Ext.form.ComboBox", {
        fieldLabel: "Symmetry",
        store: a,
        id: this.id + "comboSym",
        queryMode: "local",
        displayField: "s",
        valueField: "s",
        value: "P1",
        margin: "0 0 0 30",
        width: 220
    }), [ BIOSAXS_COMBOMANAGER.getComboProposal({
        labelWidth: 100
    }), this._getFieldTextWithHelp("requiredtextfield", "Name", "name", "Long name. i.e: Bovine serum albumin"), this._getFieldTextWithHelp("requiredtextfield", "Acronym", "acronym", "Acronym will be used in the files and analisys. i.e: BSA"), this._getFieldTextWithHelp("textfield", "Mol. Mass (Da)", "molecularMass", "Atomic mass estimation measured in Da"), {
        xtype: "container",
        layout: "hbox",
        margin: "10 0 0 0",
        items: [ this._getNumericWithHelp("numberfield", "Extinction coef.", "extintionCoefficient", ""), this.symmetryComboBox ]
    }, {
        xtype: "container",
        layout: "hbox",
        margin: "5 0 0 0",
        items: [ this._getNumericWithHelp("numberfield", "Refractive Index", "refractiveIndex", "How radiation propagates through the medium"), this._getNumericWithHelp("numberfield", "Solvent Viscosity", "solventViscosity", "") ]
    }, {
        id: this.id + "comments",
        xtype: "textareafield",
        name: "comments",
        margin: "35 0 0 10",
        fieldLabel: "Comments",
        width: this.width - 100,
        height: 100
    } ];
}, MacromoleculeForm.prototype._getSymmetries = function() {
    return [ {
        s: "P1"
    }, {
        s: "P2"
    }, {
        s: "P3"
    }, {
        s: "P4"
    }, {
        s: "P5"
    }, {
        s: "P6"
    }, {
        s: "P32"
    }, {
        s: "P42"
    }, {
        s: "P52"
    }, {
        s: "P62"
    }, {
        s: "P222"
    } ];
}, MacromoleculeForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "hbox",
        buttons: this._getButtons(),
        cls: "border-grid",
        items: [ {
            xtype: "container",
            margin: "20 0 0 20",
            layout: "vbox",
            items: this._getItems()
        } ]
    }), this.panel;
}, MacromoleculeForm.prototype._populateField = function(a, b) {
    null != b && Ext.getCmp(this.id + a).setValue(b);
}, MacromoleculeForm.prototype._getField = function(a) {
    return Ext.getCmp(this.id + a).getValue();
}, MacromoleculeForm.prototype.load = function(a) {
    this.macromolecule = a, null != a && (this._populateField("name", a.name), this._populateField("acronym", a.acronym), 
    this._populateField("extintionCoefficient", a.extintionCoefficient), this._populateField("molecularMass", a.molecularMass), 
    this._populateField("comments", a.comments), this._populateField("refractiveIndex", a.refractiveIndex), 
    this._populateField("solventViscosity", a.solventViscosity), null != a.symmetry && Ext.getCmp(this.id + "comboSym").setValue(a.symmetry), 
    null != this.macromolecule.proposalId && (Ext.getCmp("proposalIdCombo").setValue(this.macromolecule.proposalId), 
    Ext.getCmp("proposalIdCombo").disable()));
}, MacromoleculeForm.prototype.input = function() {
    return {};
}, MacromoleculeForm.prototype.test = function(a) {
    var b = new MacromoleculeForm();
    b.onClose.attach(function(a) {
        alert("Click on close");
    });
    var c = b.getPanel();
    c.render(a);
}, MolarityForm.prototype._getNumericWithHelp = function(a, b, c, d) {
    return Ext.create("Ext.container.Container", {
        margin: "10 0 0 10",
        items: [ {
            xtype: a,
            fieldLabel: b,
            name: c,
            id: this.id + c,
            decimalPrecision: 6
        }, {
            xtype: "label",
            forId: "myFieldId",
            text: d,
            margin: "5 0 0 105",
            cls: "inline-help"
        } ]
    });
}, MolarityForm.prototype._getItems = function() {
    return this.macromoleculeCombo = BIOSAXS_COMBOMANAGER.getComboMacromoleculeByMacromolecules(this.getMacromuleculesCandidates(this.macromolecule), {
        width: 250,
        labelWidth: 100,
        margin: 10
    }), [ {
        xtype: "container",
        flex: 1,
        margin: "10 0 0 10",
        border: 0,
        layout: "anchor",
        defaultType: "requiredtext",
        items: [ this.macromoleculeCombo, this._getNumericWithHelp("textfield", "Ratio", "ratio", "Number in assymmetric units") ]
    } ];
}, MolarityForm.prototype._persist = function() {
    var a = this, b = this.macromoleculeCombo.getValue(), c = Ext.getCmp(this.id + "ratio").getValue(), d = "Not used yet", e = new BiosaxsDataAdapter();
    this.panel.setLoading("Saving"), e.onSuccess.attach(function(b, c) {
        a.onSave.notify();
    }), e.saveStoichiometry(this.macromolecule.macromoleculeId, b, c, d);
}, MolarityForm.prototype._getButtons = function() {
    function a() {
        b.onClose.notify();
    }
    var b = this;
    return [ {
        text: "Save",
        handler: function() {
            b._persist();
        }
    }, {
        text: "Cancel",
        handler: function() {
            a();
        }
    } ];
}, MolarityForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.form.Panel", {
        height: this.height,
        margin: 2,
        border: 1,
        defaultType: "requiredtext",
        items: this._getItems(),
        buttons: this._getButtons()
    }), this.panel;
}, MolarityForm.prototype.getMacromuleculesCandidates = function(a) {
    var b = [];
    if (BIOSAXS.proposal.macromolecules) for (var c = 0; c < BIOSAXS.proposal.macromolecules.length; c++) {
        var d = BIOSAXS.proposal.macromolecules[c];
        null != this.macromolecule && d.macromoleculeId != this.macromolecule.macromoleculeId && b.push(d);
    }
    return b;
}, MolarityForm.prototype.refresh = function(a) {
    this.macromolecule = a;
}, MolarityForm.prototype.input = function() {
    return {};
}, MolarityForm.prototype.test = function(a) {
    var b = new MolarityForm(), c = b.getPanel();
    c.render(a);
}, RigidBodyModelingForm.prototype.openUploadManager = function(a) {
    var b = this, c = new UploaderWidget(a);
    c.onUploaded.attach(function(a) {
        b.panel.setLoading(), EXI.proposalManager.get(!0), b.load(EXI.proposalManager.getMacromoleculeById(b.macromolecule.macromoleculeId)), 
        b.panel.setLoading(!1);
    }), c.show();
}, RigidBodyModelingForm.prototype._getItems = function() {
    var a = this;
    return [ {
        xtype: "label",
        forId: "myFieldId",
        text: "Information for model fit, mixture analysis and rigid body modeling",
        margin: "15 0 20 10",
        cls: "inline-help"
    }, this.rigidBodyGrid.getPanel(), {
        xtype: "label",
        forId: "myFieldId",
        text: "Distance restraints may be imposed on the model using contacts conditions file (OPTIONAL)",
        margin: "25 0 5 10",
        cls: "inline-help"
    }, {
        xtype: "container",
        layout: "hbox",
        items: [ {
            xtype: "container",
            border: !1,
            layout: "hbox",
            items: [ {
                xtype: "label",
                forId: "myFieldId",
                text: "Contact Description File: (Optional)",
                width: 150,
                margin: "10 0 0 10"
            }, {
                id: this.id + "contactsDescriptionFilePath",
                xtype: "textfield",
                hideLabel: !0,
                margin: "10 0 0 0",
                width: 400
            }, {
                text: "Upload",
                xtype: "button",
                margin: "10 0 0 10",
                width: 80,
                handler: function() {
                    a.openUploadManager(EXI.getDataAdapter().saxs.macromolecule.getContactDescriptionUploadFileURL(a.macromolecule.macromoleculeId));
                }
            }, {
                text: "Remove",
                id: a.id + "_remove",
                xtype: "button",
                margin: "10 0 0 10",
                width: 80,
                handler: function() {
                    a.panel.setLoading(!0);
                    var b = function() {
                        EXI.proposalManager.get(!0), a.load(EXI.proposalManager.getMacromoleculeById(a.macromolecule.macromoleculeId)), 
                        a.panel.setLoading(!1);
                    };
                    EXI.getDataAdapter({
                        onSuccess: b
                    }).saxs.macromolecule.removeContactDescriptionFile(a.macromolecule.macromoleculeId);
                }
            } ]
        } ]
    }, {
        xtype: "panel",
        html: "<span class='inline-help' >Go to <a target='_blank' href='http://www.embl-hamburg.de/biosaxs/manuals/sasrefcvmx.html#input-format'>SASREF manual</a> for further information</span>",
        margin: "10 0 0 160",
        border: 0
    } ];
}, RigidBodyModelingForm.prototype._update = function(a, b, c) {
    var d = this;
    BIOSAXS.proposal.onInitialized.attach(function() {
        null != BIOSAXS.proposal && (d.refresh(BIOSAXS.proposal.getMacromoleculeById(d.macromolecule.macromoleculeId)), 
        d.panel.setLoading(!1));
    }), this.panel.setLoading(), BIOSAXS.proposal.init();
}, RigidBodyModelingForm.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.form.Panel", {
        width: this.width,
        height: this.height,
        cls: "border-grid",
        defaultType: "textfield",
        items: this._getItems(),
        padding: 20,
        listeners: {
            afterrender: function() {
                a._populate();
            }
        }
    }), this.panel;
}, RigidBodyModelingForm.prototype._populate = function() {
    null != this.macromolecule && null != Ext.getCmp(this.id + "contactsDescriptionFilePath") && (null != this.macromolecule.contactsDescriptionFilePath ? (Ext.getCmp(this.id + "contactsDescriptionFilePath").setValue(this.macromolecule.contactsDescriptionFilePath), 
    Ext.getCmp(this.id + "_remove").enable()) : (Ext.getCmp(this.id + "_remove").disable(), 
    Ext.getCmp(this.id + "contactsDescriptionFilePath").setValue("")));
}, RigidBodyModelingForm.prototype.load = function(a) {
    this.macromolecule = a, this.rigidBodyGrid.load(a), this._populate();
}, RigidBodyModelingForm.prototype.input = function() {
    return {};
}, RigidBodyModelingForm.prototype.test = function(a) {
    var b = new RigidBodyModelingForm(), c = b.getPanel();
    c.render(a);
}, ParcelForm.prototype.render = function() {
    var a = this.dewar;
    this.panel.removeAll(), console.log(a);
    var b = "";
    debugger;
    if (dust.render("parcelformsummary", a, function(a, c) {
        b = c;
    }), this.panel.insert({
        xtype: "container",
        width: 200,
        border: 1,
        padding: 20,
        items: [ {
            html: b
        } ]
    }), null != a && null != a.containerVOs) {
        a.containerVOs.sort(function(a, b) {
            return a.containerId - b.containerId;
        });
        for (var c = 0; c < a.containerVOs.length; c++) {
            var d = a.containerVOs[c], e = new PuckLayout({
                height: 200
            });
            this.panel.insert(e.getPanel()), e.load(d);
        }
    }
}, ParcelForm.prototype.load = function(a) {
    this.dewar = a;
    try {
        this.render();
    } catch (b) {
        console.log(b);
    }
}, ParcelForm.prototype.addPuckToDewar = function() {
    var a = this, b = function(b, c) {
        a.dewar.containerVOs.push(c), a.load(a.dewar);
    };
    EXI.getDataAdapter({
        onSuccess: b
    }).proposal.shipping.addPuck(this.dewar.dewarId, this.dewar.dewarId);
}, ParcelForm.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(this.code), b.push(this.status), b.push(this.storageCondition), b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/edit.png",
        text: "Edit",
        disabled: !1,
        handler: function(b, c) {
            var d = new CaseForm(), e = Ext.create("Ext.window.Window", {
                title: "Parcel",
                height: 450,
                width: 600,
                modal: !0,
                layout: "fit",
                items: [ d.getPanel(a.dewar) ],
                listeners: {
                    afterrender: function(b, c) {
                        null != a.puck && a.render(a.puck);
                    }
                },
                buttons: [ {
                    text: "Save",
                    handler: function() {
                        a.onSavedClick.notify(d.getDewar()), e.close();
                    }
                }, {
                    text: "Cancel",
                    handler: function() {
                        e.close();
                    }
                } ]
            });
            e.show();
        }
    })), b.push(Ext.create("Ext.Action", {
        icon: "../images/print.png",
        text: "Print Labels",
        disabled: !1,
        handler: function(b, c) {
            var d = a.dewar.dewarId, e = EXI.getDataAdapter().proposal.shipping.getDewarLabelURL(d, d);
            location.href = e;
        }
    })), b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/add.png",
        text: "Add puck",
        disabled: !1,
        handler: function(b, c) {
            a.addPuckToDewar();
        }
    })), b;
}, ParcelForm.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "hbox",
        cls: "border-grid",
        margin: 10,
        height: this.height,
        autoScroll: !0,
        items: [],
        listeners: {
            afterrender: function(b, c) {
                a.render();
            }
        },
        toolbar: [ {
            text: "Save",
            handler: function() {
                new DataAdapter();
                a.panel.setLoading();
                var b = caseForm.getDewar(), c = function(b, c) {
                    a.load(c), window.close(), a.panel.setLoading(!1);
                };
                b.sessionId = b.firstExperimentId, b.shippingId = a.shipment.shippingId, EXI.getDataAdapter({
                    onSuccess: c
                }).proposal.dewar.saveDewar(a.shipment.shippingId, b);
            }
        }, {
            text: "Cancel",
            handler: function() {
                window.close();
            }
        } ]
    }), this.panel.addDocked({
        id: a.id + "tbar",
        height: 45,
        xtype: "toolbar",
        items: a._getTopButtons(),
        cls: "exi-top-bar"
    }), this.panel;
}, PuckForm.prototype.load = function(a, b) {
    this.puck = a, null != a && (Ext.getCmp(this.id + "puck_name").setValue(this.puck.code), 
    this.capacityCombo.setValue(this.puck.capacity)), this.containerSpreadSheet.load(a), 
    this.loadPlateLayout(a);
}, PuckForm.prototype.loadPlateLayout = function(a) {
    try {
        this.puckLayout.load(a), this.puckLayout.render(a);
    } catch (b) {
        console.log(b);
    }
}, PuckForm.prototype.getToolBar = function() {
    var a = this;
    return [ {
        text: "Remove",
        width: 100,
        height: 30,
        cls: "btn-red",
        handler: function() {
            function b(b) {
                "yes" == b && (a.removePuck(), alert("Removed"));
            }
            Ext.MessageBox.show({
                title: "Remove",
                msg: "Removing a puck from this parcel will remove also its content. <br />Are you sure you want to continue?",
                buttons: Ext.MessageBox.YESNO,
                fn: b,
                animateTarget: "mb4",
                icon: Ext.MessageBox.QUESTION
            });
        }
    }, "->", {
        text: "Save",
        width: 100,
        height: 30,
        handler: function() {
            a.save();
        }
    } ];
}, PuckForm.prototype.removePuck = function() {
    this.panel.setLoading();
    var a = function(a, b) {}, b = this.puck.containerId;
    EXI.getDataAdapter({
        onSuccess: a
    }).proposal.shipping.removeContainerById(b, b, b);
}, PuckForm.prototype.save = function() {
    var a = this;
    this.panel.setLoading("Saving Puck");
    var b = this.containerSpreadSheet.getPuck();
    b.code = Ext.getCmp(a.id + "puck_name").getValue(), b.capacity = a.capacityCombo.getValue();
    var c = function(b, c) {
        a.panel.setLoading(!1), a.load(c), a.onSaved.notify();
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).proposal.shipping.saveContainer(this.puck.containerId, this.puck.containerId, this.puck.containerId, b);
}, PuckForm.prototype.containerTypeChanged = function(a) {
    this.puck.capacity = a;
    var b = this.containerSpreadSheet.spreadSheet.getData();
    if (b.length < a) for (var c = b.length; a >= c; c++) b.push([ c ]); else b = b.slice(0, a);
    this.containerSpreadSheet.spreadSheet.loadData(b), this.loadPlateLayout(this.puck);
}, PuckForm.prototype.getPanel = function() {
    var a = this, b = BIOSAXS_COMBOMANAGER.getComboPuckType({
        margin: "10 0 10 20",
        labelWidth: 100,
        width: 300
    });
    return b.on("select", function(b, c) {
        var d = c[0].data.value;
        a.containerTypeChanged(d);
    }), this.capacityCombo = b, this.panel = Ext.create("Ext.panel.Panel", {
        buttons: this.getToolBar(),
        items: [ {
            xtype: "container",
            margin: "12 0 2 20",
            layout: "hbox",
            items: [ this.puckLayout.getPanel(), {
                xtype: "container",
                margin: "12 0 2 50",
                layout: "vbox",
                items: [ {
                    xtype: "requiredtextfield",
                    id: this.id + "puck_name",
                    fieldLabel: "Name",
                    name: "name",
                    width: 300,
                    margin: "0 0 0 20",
                    labelWidth: 100
                }, this.capacityCombo ]
            } ]
        }, this.containerSpreadSheet.getPanel() ]
    }), this.panel;
}, ShipmentForm.prototype.fillStores = function() {
    this.panel.setLoading("Loading Labcontacts from database");
    var a = EXI.proposalManager.getLabcontacts();
    this.labContactForSendingStore.loadData(a, !1), a.sort(function(a, b) {
        return a.cardName < b.cardName ? -1 : a.cardName > b.cardName ? 1 : 0;
    }), $.extend(a, [ {
        cardName: "Same as for shipping to beamline",
        labContactId: -1
    }, {
        cardName: "No return requested",
        labContactId: 0
    } ]), this.labContactForReturnStore.loadData(a, !1), this.labContactsReturnCombo.setValue(-1), 
    this.panel.setLoading(!1), null != this.shipment && this.setShipment(this.shipment);
}, ShipmentForm.prototype.draw = function(a) {
    this.getPanel().render(a);
}, ShipmentForm.prototype.load = function(a) {
    this.shipment = a;
    var b = this;
    if (Ext.getCmp(b.id + "shippingName").setValue(a.shippingName), Ext.getCmp(b.id + "comments").setValue(a.comments), 
    null != a.sendingLabContactVO && this.labContactsSendingCombo.setValue(a.sendingLabContactVO.labContactId), 
    null == a.returnLabContactVO ? this.labContactsReturnCombo.setValue(0) : a.returnLabContactVO.labContactId == a.sendingLabContactVO.labContactId ? this.labContactsReturnCombo.setValue(-1) : this.labContactsReturnCombo.setValue(a.returnLabContactVO.labContactId), 
    null != a.sessions && a.sessions.length > 0) {
        var c = a.sessions[0];
        this.sessionComboBox.setValue(c.sessionId);
    }
}, ShipmentForm.prototype._saveShipment = function() {
    var a = this, b = null;
    null != this.shipment && (b = this.shipment.shippingId);
    var c = this.labContactsSendingCombo.getValue(), d = this.labContactsReturnCombo.getValue();
    if (null == c) return void BUI.showError("User contact information for shipping to beamline is mandatory");
    0 == this.labContactsReturnCombo.getValue() && (d = 0), -1 == this.labContactsReturnCombo.getValue() && (d = -1);
    var e = EXI.proposalManager.getLabcontactById(c), f = {
        shippingId: b,
        name: Ext.getCmp(a.id + "shippingName").getValue(),
        status: "Not set",
        sendingLabContactId: c,
        returnLabContactId: d,
        returnCourier: d,
        courierAccount: e.courierAccount,
        billingReference: e.billingReference,
        dewarAvgCustomsValue: e.dewarAvgCustomsValue,
        dewarAvgTransportValue: e.dewarAvgTransportValue,
        comments: Ext.getCmp(a.id + "comments").getValue(),
        sessionId: this.sessionComboBox.getValue()
    }, g = function(b, c) {
        location.hash = "#/shipping/" + c.shippingId + "/main", a.panel.setLoading(!1), 
        a.onSaved.notify(c);
    };
    return "" == f.name ? void BUI.showError("Name field is mandatory") : null == f.sendingLabContactId ? void BUI.showError("Lab contact for sending field is mandatory") : (this.panel.setLoading(), 
    void EXI.getDataAdapter({
        onSuccess: g
    }).proposal.shipping.saveShipment(f));
}, ShipmentForm.prototype.getPanel = function() {
    var a = this, b = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>', c = [];
    return a.creationMode ? c.push({
        text: "Create",
        scope: this,
        handler: function() {
            a._saveShipment();
        }
    }) : c.push({
        text: "Save",
        scope: this,
        handler: function() {
            a._saveShipment();
        }
    }), this.labContactForSendingStore = Ext.create("Ext.data.Store", {
        fields: [ "cardName", "labContactId" ],
        sorters: "cardName"
    }), this.labContactForReturnStore = Ext.create("Ext.data.Store", {
        fields: [ "cardName", "labContactId" ]
    }), this.labContactsSendingCombo = Ext.create("Ext.form.ComboBox", {
        id: a.id + "shipmentform_sendingLabContactId",
        fieldLabel: "User contact information for shipping to beamline",
        afterLabelTextTpl: b,
        store: this.labContactForSendingStore,
        queryMode: "local",
        labelWidth: 350,
        width: 600,
        margin: "10 0 0 10",
        displayField: "cardName",
        valueField: "labContactId"
    }), this.labContactsReturnCombo = Ext.create("Ext.form.ComboBox", {
        id: a.id + "returnLabContactId",
        fieldLabel: "User contact information for return to home institute",
        afterLabelTextTpl: b,
        store: this.labContactForReturnStore,
        queryMode: "local",
        margin: "10 0 0 10",
        labelWidth: 350,
        width: 600,
        displayField: "cardName",
        valueField: "labContactId"
    }), this.sessionComboBox = BIOSAXS_COMBOMANAGER.getComboSessions(EXI.proposalManager.getSessions(), {
        margin: "10 0 0 10",
        width: 400,
        labelWidth: 100
    }), null == this.panel && (this.panel = Ext.create("Ext.form.Panel", {
        bodyPadding: 5,
        cls: "border-grid",
        buttons: c,
        items: [ {
            xtype: "requiredtextfield",
            fieldLabel: "Name",
            allowBlank: !1,
            labelWidth: 100,
            width: 400,
            margin: "10 20 0 10",
            name: "shippingName",
            id: a.id + "shippingName",
            value: ""
        }, this.sessionComboBox, {
            xtype: "textareafield",
            name: "comments",
            id: a.id + "comments",
            fieldLabel: "Comments",
            value: "",
            labelWidth: 100,
            margin: "10 20 0 10",
            width: 500
        }, this.labContactsSendingCombo, this.labContactsReturnCombo ]
    })), this.fillStores(), this.panel;
}, StockSolutionForm.prototype._getButtons = function() {
    var a = this;
    return [ {
        text: "Save",
        handler: function() {
            var b = function(b, c) {
                a.panel.setLoading(!1), a.onSaved.notify();
            };
            return null == a.getStockSolution().bufferId ? void BUI.showError("Buffer field is mandatory") : "" == a.getStockSolution().name ? void BUI.showError("Acronym field is mandatory") : "" == a.getStockSolution().concentration ? void BUI.showError("Concentration field is mandatory") : "" == a.getStockSolution().volume ? void BUI.showError("Volume field is mandatory") : (a.panel.setLoading("ISPyB: saving stock solution"), 
            void EXI.getDataAdapter({
                onSuccess: b
            }).saxs.stockSolution.saveStockSolution(a.getStockSolution()));
        }
    } ];
}, StockSolutionForm.prototype.getStockSolution = function() {
    return null == this.stockSolution ? {
        concentration: Ext.getCmp(this.id + "stockSolution_concentration").getValue(),
        storageTemperature: this.storageLocationComboBox.getValue(),
        volume: Ext.getCmp(this.id + "stockSolution_volume").getValue(),
        comments: Ext.getCmp(this.id + "stockSolution_comments").getValue(),
        name: Ext.getCmp(this.id + "stockSolution_name").getValue(),
        bufferId: this.bufferCombo.getValue(),
        macromoleculeId: this.macromoleculeCombo.getValue(),
        proposalId: Ext.getCmp("proposalIdCombo").getValue()
    } : (this.stockSolution.concentration = Ext.getCmp(this.id + "stockSolution_concentration").getValue(), 
    this.stockSolution.storageTemperature = this.storageLocationComboBox.getValue(), 
    this.stockSolution.volume = Ext.getCmp(this.id + "stockSolution_volume").getValue(), 
    this.stockSolution.comments = Ext.getCmp(this.id + "stockSolution_comments").getValue(), 
    this.stockSolution.name = Ext.getCmp(this.id + "stockSolution_name").getValue(), 
    this.stockSolution.proposalId = Ext.getCmp("proposalIdCombo").getValue(), this.stockSolution.bufferId = this.bufferCombo.getValue(), 
    null != this.macromoleculeCombo.getValue() ? this.stockSolution.macromoleculeId = this.macromoleculeCombo.getValue() : this.stockSolution.macromolecule3VO = null, 
    this.stockSolution);
}, StockSolutionForm.prototype.load = function(a) {
    this.stockSolution = a, null != a && (null != a.macromoleculeId && this.macromoleculeCombo.setValue(a.macromoleculeId), 
    this.bufferCombo.setValue(a.bufferId), Ext.getCmp(this.id + "stockSolution_concentration").setValue(this.stockSolution.concentration), 
    this.storageLocationComboBox.setValue(this.stockSolution.storageTemperature), Ext.getCmp(this.id + "stockSolution_volume").setValue(this.stockSolution.volume), 
    Ext.getCmp(this.id + "stockSolution_name").setValue(this.stockSolution.name), Ext.getCmp(this.id + "stockSolution_comments").setValue(this.stockSolution.comments), 
    null != a && null != a.proposalId && (Ext.getCmp("proposalIdCombo").setValue(a.proposalId), 
    Ext.getCmp("proposalIdCombo").disable()));
}, StockSolutionForm.prototype.getBufferCombo = function() {
    return this.bufferCombo = BIOSAXS_COMBOMANAGER.getComboBuffers(EXI.proposalManager.getBuffers(), {
        labelWidth: 150,
        margin: "0 0 10 0",
        width: 400
    }), this.bufferCombo;
}, StockSolutionForm.prototype.getMacromoleculeCombo = function() {
    return this.macromoleculeCombo = BIOSAXS_COMBOMANAGER.getComboMacromoleculeByMacromolecules(EXI.proposalManager.getMacromolecules(), {
        labelWidth: 150,
        margin: "0 0 10 0",
        width: 400
    }), this.macromoleculeCombo;
}, StockSolutionForm.prototype.refresh = function() {}, StockSolutionForm.prototype._getTopPanel = function() {
    return this.storageLocationComboBox = BIOSAXS_COMBOMANAGER.getComboStorageTemperature({
        labelWidth: 150,
        width: 400
    }), {
        xtype: "container",
        layout: "hbox",
        border: 0,
        buttons: this._getButtons(),
        items: [ {
            xtype: "container",
            layout: "hbox",
            items: [ {
                xtype: "container",
                flex: 1,
                border: !1,
                layout: "anchor",
                defaultType: "textfield",
                items: [ BIOSAXS_COMBOMANAGER.getComboProposal({
                    labelWidth: 150,
                    width: 400
                }), this.getMacromoleculeCombo(), this.getBufferCombo(), {
                    xtype: "requiredtextfield",
                    id: this.id + "stockSolution_name",
                    fieldLabel: "Acronym",
                    labelWidth: 150,
                    width: 400
                }, {
                    xtype: "requiredtextfield",
                    id: this.id + "stockSolution_concentration",
                    fieldLabel: "Conc. (mg/ml)",
                    labelWidth: 150,
                    width: 400
                }, this.storageLocationComboBox, {
                    xtype: "requiredtextfield",
                    id: this.id + "stockSolution_volume",
                    fieldLabel: "Volume (&#181l)",
                    labelWidth: 150,
                    width: 400
                } ]
            } ]
        } ]
    };
}, StockSolutionForm.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        padding: 0,
        buttons: this._getButtons(),
        cls: "border-grid",
        items: [ {
            xtype: "container",
            padding: 20,
            items: [ this._getTopPanel(), {
                id: this.id + "stockSolution_comments",
                xtype: "textareafield",
                name: "comments",
                fieldLabel: "Comments",
                labelWidth: 150,
                width: "100%",
                height: 100
            } ]
        } ]
    }), this.panel;
}, StockSolutionForm.prototype.input = function() {
    return {
        stock: {
            stockSolutionId: 6,
            proposalId: 3124,
            macromoleculeId: 5933,
            bufferId: 811,
            instructionSet3VO: null,
            boxId: 305861,
            storageTemperature: "20",
            volume: "300",
            concentration: "1.2",
            comments: "Buffer EDTA with A",
            name: "A_EDTA_1.2",
            samples: [],
            buffer: "EDTA",
            macromolecule: "A"
        },
        proposal: new MeasurementGrid().input().proposal
    };
}, StockSolutionForm.prototype.test = function(a) {
    var b = new StockSolutionForm();
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(new Shipment(b.input().stock));
    c.render(a);
}, GrayScalePlot.prototype.getText = function() {
    return "Click on two points to calculate the intensity";
}, GrayScalePlot.prototype.getPanel = function() {
    return "<div id=" + this.id + " style='text-align:center;width:" + this.width + "px;height:" + this.height + "px;'>" + this.getText() + "</div>";
}, GrayScalePlot.prototype.reset = function() {
    document.getElementById(this.id).innerHTML = this.getText();
}, GrayScalePlot.prototype.load = function(a) {
    if (null != a && null != a.length) {
        for (var b = document.getElementById(this.id), c = [], d = 0; d < a.length; d++) c.push([ d, 255 - a[d].luminance ]);
        try {
            new Dygraph(b, c, {
                title: "Intensity"
            });
        } catch (e) {}
    }
}, AbinitioGrid.prototype.refresh = function(a) {
    this.store.loadData(this._prepareData(a));
}, AbinitioGrid.prototype._prepareData = function(a) {
    for (var b = [], c = 0; c < a.length; c++) for (var d = a[c], e = 0; e < d.substractionToAbInitioModel3VOs.length; e++) {
        var f = d.substractionToAbInitioModel3VOs[e].abinitiomodel3VO;
        if (null != f.averagedModel && (b.push(f.averagedModel), b[b.length - 1].type = "Reference"), 
        null != f.shapeDeterminationModel && (b.push(f.shapeDeterminationModel), b[b.length - 1].type = "Refined"), 
        null != f.modelList3VO && null != f.modelList3VO.modeltolist3VOs) for (var g = 0; g < f.modelList3VO.modeltolist3VOs.length; g++) b.push(f.modelList3VO.modeltolist3VOs[g].model3VO), 
        b[b.length - 1].type = "Model";
    }
    return b;
}, AbinitioGrid.prototype.getPanel = function() {
    var a = this, b = [ "modelId", "type", "chiSqrt", "dmax", "firFile", "logFile", "fitFile", "pdbFile", "rfactor", "rg", "volume" ];
    Ext.define("AbinitioModel", {
        extend: "Ext.data.Model",
        fields: b
    }), this.store = Ext.create("Ext.data.Store", {
        model: "AbinitioModel",
        autoload: !0,
        groupField: "type"
    });
    var c = Ext.create("Ext.grid.feature.Grouping", {
        groupHeaderTpl: '{name} ({rows.length} model{[values.rows.length > 1 ? "s" : ""]})',
        startCollapsed: !1,
        collapsible: !0
    }), d = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        listeners: {
            selectionchange: function(b, c) {
                c.length > 0 && a.onSelected.notify([ c[0].data ]);
            }
        }
    });
    return this.grid = Ext.create("Ext.grid.Panel", {
        collapsible: !1,
        resizable: !0,
        selModel: d,
        features: [ c ],
        autoscroll: !0,
        multiSelect: !0,
        store: this.store,
        cls: "border-grid",
        height: this.height,
        width: this.width,
        margin: 10,
        columns: [ {
            text: "Type",
            dataindex: "type",
            hidden: !0,
            renderer: function(a, b, c) {
                return c.data.type;
            },
            flex: 1
        }, {
            text: "ModelId",
            dataindex: "modelId",
            hidden: !0,
            renderer: function(a, b, c) {
                return c.data.modelId;
            },
            flex: 1
        }, {
            text: "chiSqrt",
            dataindex: "chiSqrt",
            renderer: function(a, b, c) {
                return null != c.data.dmax ? BUI.formatValuesUnits(c.data.chiSqrt, "", 12, this.decimals) : void 0;
            },
            flex: 1
        }, {
            text: "Dmax",
            dataindex: "dmax",
            renderer: function(a, b, c) {
                return null != c.data.dmax ? BUI.formatValuesUnits(c.data.dmax, "nm", 12, this.decimals) : void 0;
            },
            flex: 1
        }, {
            text: "rFactor",
            dataindex: "rfactor",
            hidden: !0,
            renderer: function(a, b, c) {
                return null != c.data.rfactor ? c.data.rfactor : void 0;
            },
            flex: 1
        }, {
            text: "Rg",
            dataindex: "rg",
            renderer: function(a, b, c) {
                return null != c.data.rg ? BUI.formatValuesUnits(c.data.rg, "nm", 12, this.decimals) : void 0;
            },
            flex: 1
        }, {
            text: "Volume",
            dataindex: "volume",
            renderer: function(a, b, c) {
                return null != c.data.volume ? BUI.formatValuesUnits(c.data.volume, "") + "<span style='font-size:8px;color:gray;'> nm<sub>3</sub></span>" : void 0;
            },
            flex: 1
        }, {
            text: "PDB",
            dataindex: "pdbFile",
            renderer: function(a, b, c) {
                return null != c.data.pdbFile ? c.data.pdbFile.split("/")[c.data.pdbFile.split("/").length - 1] : void 0;
            },
            flex: 1
        }, {
            text: "Fir",
            dataindex: "firFile",
            renderer: function(a, b, c) {
                return null != c.data.firFile ? c.data.firFile.split("/")[c.data.firFile.split("/").length - 1] : void 0;
            },
            flex: 1
        }, {
            text: "LOG",
            dataindex: "logFile",
            hidden: !0,
            renderer: function(a, b, c) {
                return null != c.data.logFile ? c.data.logFile.split("/")[c.data.logFile.split("/").length - 1] : void 0;
            },
            flex: 1
        } ],
        viewConfig: {
            enableTextSelection: !0,
            preserveScrollOnRefresh: !0,
            stripeRows: !0,
            listeners: {}
        }
    }), this.grid;
}, AprioriRigidBodyGrid.prototype._getColumns = function() {}, AprioriRigidBodyGrid.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/add.png",
        text: "Add",
        disabled: !1,
        handler: function(b, c) {
            a.onAddButtonClicked.notify();
        }
    })), b;
}, AprioriRigidBodyGrid.prototype.load = function(a) {
    this.macromolecule = a, null != a && this.pdbStore.loadData(a.structure3VOs);
}, AprioriRigidBodyGrid.prototype._prepareData = function() {
    for (var a = [], b = 0; b < this.features.length; b++) a.push(this.features[b]);
    return a;
}, AprioriRigidBodyGrid.prototype._updateProposalInformation = function() {
    EXI.proposalManager.get(!0), this.load(EXI.proposalManager.getMacromoleculeById(this.macromolecule.macromoleculeId)), 
    this.panel.setLoading(!1);
}, AprioriRigidBodyGrid.prototype._getPlugins = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.grid.plugin.RowEditing", {
        clicksToEdit: 1,
        listeners: {
            validateedit: function(b, c) {
                var d = c.newValues.multiplicity, e = c.newValues.symmetry, f = c.record.data.macromoleculeId, g = c.record.data.structureId;
                a.panel.setLoading();
                var h = function() {
                    a._updateProposalInformation();
                }, i = function(b) {
                    BUI.showError("Ops, there was a problem"), a._updateProposalInformation();
                };
                a.panel.setLoading(), EXI.getDataAdapter({
                    onSuccess: h,
                    onError: i
                }).saxs.macromolecule.saveStructure(f, g, d, e);
            }
        }
    })), b;
}, AprioriRigidBodyGrid.prototype.getPanel = function() {
    var a = this;
    return this.pdbStore = Ext.create("Ext.data.Store", {
        fields: [ "filePath", "structureId", "structureType", "symmetry", "structureId", "name", "multiplicity" ],
        groupField: "structureType",
        sorters: {
            property: "structureId",
            direction: "DESC"
        }
    }), this.panel = Ext.create("Ext.grid.Panel", {
        margin: "15 10 0 10",
        height: this.height,
        store: this.pdbStore,
        plugins: a._getPlugins(),
        cls: "border-grid",
        tbar: [ {
            text: "Add Modeling Option (PDB)",
            icon: "../images/icon/add.png",
            handler: function() {
                a.onUploadFile.notify("PDB", "Upload PDB File");
            }
        } ],
        columns: [ {
            text: "structureId",
            flex: .2,
            hidden: !0,
            dataIndex: "structureId",
            sortable: !0
        }, {
            text: "File",
            flex: 1,
            dataIndex: "filePath",
            sortable: !0,
            hidden: !0
        }, {
            text: "PDB",
            flex: .4,
            dataIndex: "name",
            sortable: !0
        }, {
            text: "Symmetry",
            flex: .2,
            dataIndex: "symmetry",
            sortable: !0,
            editor: {
                xtype: "combobox",
                typeAhead: !0,
                triggerAction: "all",
                selectOnTab: !0,
                store: [ [ "P1", "P1" ], [ "P2", "P2" ], [ "P3", "P3" ], [ "P4", "P4" ], [ "P5", "P5" ], [ "P6", "P6" ], [ "P32", "P32" ], [ "P42", "P42" ], [ "P52", "P52" ], [ "P62", "P62" ], [ "P222", "P222" ] ]
            }
        }, {
            text: "Multiplicity",
            flex: .2,
            dataIndex: "multiplicity",
            sortable: !0,
            editor: {
                xtype: "textfield"
            }
        }, {
            text: "Subunit",
            flex: .2,
            dataIndex: "isSubunit",
            sortable: !0,
            hidden: !0
        }, {
            text: "Type",
            flex: .2,
            dataIndex: "structureType",
            sortable: !0,
            hidden: !0
        }, {
            xtype: "actioncolumn",
            flex: .1,
            text: "Remove",
            editor: {
                xtype: "textfield"
            },
            items: [ {
                icon: "../images/icon/ic_delete_black_24dp.png",
                tooltip: "Remove",
                handler: function(b, c, d) {
                    function e(b) {
                        if ("yes" == b) {
                            var c = function() {
                                a._updateProposalInformation();
                            }, d = function() {
                                BUI.showWarning("ISPyB could not remove this structure. Have it been already used?"), 
                                a._updateProposalInformation();
                            };
                            a.panel.setLoading(), EXI.getDataAdapter({
                                onSuccess: c,
                                onError: d
                            }).saxs.macromolecule.removeStructure(h, g);
                        }
                    }
                    var f = b.getStore().getAt(c), g = f.data.structureId, h = f.data.macromoleculeId;
                    Ext.MessageBox.show({
                        title: "Warning",
                        fn: e,
                        msg: "You are removing a PDB structure option. <br />Sure?",
                        buttons: Ext.MessageBox.YESNO,
                        icon: Ext.MessageBox.QUESTION
                    });
                }
            } ]
        } ],
        listeners: {
            beforeedit: function(a, b, c) {
                return "actioncolumn" != b.column.xtype;
            }
        }
    }), this.panel;
}, BufferGrid.prototype._edit = function(a) {
    function b() {
        return [ {
            text: "Save",
            handler: function() {
                var a = function(a) {
                    var b = function(a, b) {
                        c.window.close(), c.onUpdated.notify(), c.panel.setLoading(!1);
                    };
                    c.panel.setLoading("Updading proposal information"), EXI.getDataAdapter({
                        onSuccess: b
                    }).proposal.proposal.update();
                };
                return "" == c.bufferForm.getBuffer().name ? void BUI.showWarning("Name field is mandatory") : "" == c.bufferForm.getBuffer().acronym ? void BUI.showWarning("Acronym field is mandatory") : "" == c.bufferForm.getBuffer().proposalId || null == c.bufferForm.getBuffer().proposalId ? void BUI.showWarning("Proposal field is mandatory") : void EXI.getDataAdapter({
                    onSuccess: a
                }).saxs.buffer.saveBuffer(c.bufferForm.getBuffer());
            }
        }, {
            text: "Cancel",
            handler: function() {
                c.window.close();
            }
        } ];
    }
    var c = this;
    this.bufferForm = new BufferForm({
        height: 400,
        width: 700
    }), this.window = Ext.create("Ext.window.Window", {
        title: "Edit buffer",
        layout: "fit",
        items: this.bufferForm.getPanel(),
        buttons: b()
    }).show(), this.bufferForm.load(this.getBufferById(a));
}, BufferGrid.prototype.getBufferById = function(a) {
    for (var b = 0; b < this.buffers.length; b++) if (this.buffers[b].bufferId == a) return this.buffers[b];
    return {};
}, BufferGrid.prototype.load = function(a) {
    this.buffers = a, this.proposalKey = {}, this.proposalColor = {};
    for (var b = 0; b < a.length; b++) {
        var c = EXI.proposalManager.getProposalById(a[b].proposalId);
        a[b].proposal = c.code + c.number;
    }
    this.store.loadData(a, !1);
}, BufferGrid.prototype._getTbar = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        text: "Add",
        icon: "images/icon/add.png",
        disabled: !1,
        handler: function(b, c) {
            a._edit();
        }
    })), b;
}, BufferGrid.prototype.getPanel = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "proposal", "bufferId", "acronym", "name", "composition", "comments", "ph" ]
    }), this.store.sort("acronym");
    var b = "Ext.grid.Panel";
    return 1 == this.searchBar && (b = "Ext.ux.LiveSearchGridPanel"), this.panel = Ext.create(b, {
        title: "Buffers",
        collapsible: this.collapsible,
        collapsed: this.collapsed,
        store: this.store,
        height: this.height,
        width: this.width,
        columns: [ {
            text: "Proposal",
            dataIndex: "proposal",
            flex: 1
        }, {
            text: "Acronym",
            dataIndex: "acronym",
            flex: 2
        }, {
            text: "Name",
            dataIndex: "name",
            flex: 2,
            hidden: !1
        }, {
            text: "pH",
            dataIndex: "ph",
            flex: 2
        }, {
            text: "Composition",
            dataIndex: "composition",
            flex: 2,
            hidden: !1
        }, {
            text: "Comments",
            dataIndex: "comments",
            flex: 4,
            hidden: !1
        }, {
            xtype: "actioncolumn",
            width: 40,
            text: "Edit",
            items: [ {
                icon: "images/icon/edit.png",
                tooltip: "Edit",
                handler: function(b, c, d) {
                    var e = b.getStore().getAt(c);
                    a._edit(e.get("bufferId"));
                }
            } ]
        } ],
        flex: 1,
        viewConfig: {
            stripeRows: !0,
            listeners: {
                celldblclick: function(b, c, d, e, f, g, h, i) {
                    a._edit(e.data.bufferId);
                }
            }
        }
    }), this.tbar && this.panel.addDocked({
        xtype: "toolbar",
        cls: "toolBarGrid",
        height: 48,
        items: this._getTbar()
    }), this.panel;
}, BufferGrid.prototype.input = function() {
    return new MacromoleculeGrid().input();
}, BufferGrid.prototype.test = function(a) {
    var b = new BufferGrid({
        width: 800,
        height: 350,
        collapsed: !1,
        tbar: !0
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(BIOSAXS.proposal.macromolecules);
    c.render(a);
}, CaseGrid.prototype._getHTMLTable = function(a) {
    for (var b = "<table style='font-size:14px;color:gray;'>", c = 0; c < a.length; c++) b += "<tr>", 
    b += "<td>", b += a[c].key, b += "</td>", b += "<td style='font-weight:bold;color:black;'>", 
    b += a[c].value, b += "</td>", b += "</tr>";
    return b + "</table>";
}, CaseGrid.prototype._getHTMLButton = function(a, b) {
    return '<input id="' + a + ' "type="button" name="btn" style="font-size:9px;width:90px; height:40px" class="btn-component" value="' + b + '" >';
}, CaseGrid.prototype._getUnpackStockSolutionButton = function(a, b) {
    return '<input id="' + a + '"type="button" name="stockSolution" style="font-size:9px;width:90px; height:40px" class="btn-component-remove" value="' + b + '" >';
}, CaseGrid.prototype._getRemoveContainerButton = function(a, b) {
    return '<input id="' + a + '"type="button" name="puck" style="font-size:9px;width:90px; height:40px" class="btn-component-remove" value="' + b + '" >';
}, CaseGrid.prototype._getEditPuckButton = function(a, b, c) {
    return '<input id="' + a + "_" + b + '"type="button" name="edit" style="font-size:9px;width:90px; height:40px" class="btn-component-puck-edit" value="' + c + '" >';
}, CaseGrid.prototype._getPrintParcelButton = function(a, b) {
    return '<input id="' + a + ' "type="button" name="printLabels" style="font-size:9px;width:90px; height:40px" class="btn-component-print-parcel" value="' + b + '" >';
}, CaseGrid.prototype._getEditParcelButton = function(a, b) {
    return '<input id="' + a + ' "type="button" name="editParcel" style="font-size:9px;width:90px; height:40px" class="btn-component-edit-parcel" value="' + b + '" >';
}, CaseGrid.prototype._getRemoveParcelButton = function(a, b) {
    return '<input id="' + a + ' "type="button" name="removeParcel" style="font-size:9px;width:90px; height:40px" class="btn-component-remove" value="' + b + '" >';
}, CaseGrid.prototype._getComponentRowHTML = function(a, b, c, d, e) {
    var f = "";
    return f += "<tr  class='tr-component'>", f += "<td>", f += this._getEditPuckButton(b, Number(e), "Edit"), 
    f += "</td>", f += "<td>", f += b, f += "</td>", f += "<td>", f += c, f += "</td>", 
    f += "<td>", f += d, f += "</td>", "Stock Solution" == b && (f += "<td>", f += this._getUnpackStockSolutionButton(Number(e), "Unpack"), 
    f += "</td>"), "Puck" == b && (f += "<td>", f += this._getRemoveContainerButton(Number(e), "Remove"), 
    f += "</td>"), f += "</tr>";
}, CaseGrid.prototype._getComponentHTML = function(a, b) {
    var c = "";
    if (b.length > 0) {
        c = "<table  class='table-component'><tr><th class='th-component'></th><th class='th-component'>Type</th><th class='th-component'>Code</th><th class='th-component'>Capacity</th><th></th></tr>";
        for (var d = 0; d < b.length; d++) {
            var e = "../images/BasketView_24x24_01.png";
            "Puck" == b[d].type && (c += this._getComponentRowHTML(e, b[d].type, b[d].code, b[d].sampleCount + "/" + b[d].capacity, b[d].id)), 
            "Stock Solution" == b[d].type && (e = "../images/SampleHolderView_24x24_01.png", 
            c += this._getComponentRowHTML(e, b[d].type, b[d].code, b[d].capacity, b[d].id));
        }
        c += "</table>";
    } else c += "<br /><br /><span class='parcel-empty-msg'>This parcel is empty</span>";
    return 0 == b.length && (c = this._getHTMLButton(a, "Add Solution") + this._getHTMLButton(a, "Add Puck") + c), 
    b.length > 0 && (c = "Puck" == b[0].type ? this._getHTMLButton(a, "Add Puck") + c : this._getHTMLButton(a, "Add Solution") + c), 
    '<div  class="header-component-table" >Components</div><div  style="margin:0px 0px 0px 0px !important;width:610px;">' + c + "</div>";
}, CaseGrid.prototype._getParcelHTML = function(a) {
    var b = "<table  class='table-component'><tr><th class='th-component'>Code</th><th class='th-component'>Status</th><th class='th-component'>Store Location</th><th class='th-component'>Comments</th></tr>", c = a.Dewar_storageLocation, d = a.Dewar_code, e = a.Dewar_status, f = a.Dewar_comments;
    return null == d && (d = "<span style='color:orange'>Not set</span>"), null == e && (e = "<span style='color:orange'>Unknown</span>"), 
    null == c && (c = "<span style='color:orange'>Not set</span>"), null == f && (f = ""), 
    b = b + "<tr class='tr-component'><td>" + d + "</td><td>" + e + "</td><td>" + c + "</td><td>" + f + "</td></tr></table>", 
    b = this._getEditParcelButton(a.Dewar_dewarId, "Edit") + this._getPrintParcelButton(a.Dewar_dewarId, "Print Labels") + this._getRemoveParcelButton(a.Dewar_dewarId, "Remove") + b, 
    '<div  class="header-component-table" >Parcel</div><div  style="margin:0px 0px 0px 0px !important;width:610px;">' + b + "</div>";
}, CaseGrid.prototype._getColumns = function() {
    var a = this, b = [ {
        header: "General",
        dataIndex: "type",
        name: "type",
        type: "string",
        flex: .5,
        renderer: function(b, c, d) {
            var e = JSON.parse(d.data.serialized);
            return a._getParcelHTML(e[0]);
        }
    }, {
        header: "Content",
        dataIndex: "Dewar_comments",
        name: "type",
        type: "string",
        flex: .5,
        renderer: function(b, c, d) {
            var e = JSON.parse(d.data.serialized), f = e[0].Dewar_dewarId, g = [];
            if (null != e && e.length > 0) for (var h = 0; h < e.length; h++) if ("Puck" == e[h].Container_containerType) {
                var i = "";
                null != e[h].Container_code && (i = e[h].Container_code), g.push({
                    type: e[h].Container_containerType,
                    code: i,
                    capacity: e[h].Container_capacity,
                    sampleCount: e[h].sampleCount,
                    id: e[h].Container_containerId
                });
            }
            for (var j = EXI.proposalManager.getStockSolutionsByDewarId(f), h = 0; h < j.length; h++) g.push({
                type: "Stock Solution",
                code: j[h].name,
                capacity: j[h].volume + "ml",
                sampleCount: "",
                id: j[h].stockSolutionId
            });
            return a._getComponentHTML(f, g);
        }
    } ];
    return b;
}, CaseGrid.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/add.png",
        text: "Add",
        disabled: !1,
        handler: function(b, c) {
            a.edit();
        }
    })), b;
}, CaseGrid.prototype.groupBy = function(a, b) {
    var c = {};
    return a.forEach(function(a) {
        var d = JSON.stringify(b(a));
        c[d] = c[d] || [], c[d].push(a);
    }), Object.keys(c).map(function(a) {
        return c[a];
    });
}, CaseGrid.prototype.load = function(a) {
    function b(a, b) {
        for (var d = c.groupBy(b, function(a) {
            return [ a.Dewar_dewarId ];
        }), e = [], f = 0; f < d.length; f++) e.push({
            serialized: JSON.stringify(d[f])
        });
        c.store.loadData(e);
    }
    var c = this;
    this.shipment = a, this.dewars = a.dewarVOs, this.dewars.length > 0 && EXI.getDataAdapter({
        onSuccess: b
    }).proposal.shipping.getDewarsByShipmentId(a.shippingId);
}, CaseGrid.prototype.edit = function(a) {
    var b = this, c = new CaseForm(), d = Ext.create("Ext.window.Window", {
        title: "Parcel",
        height: 360,
        width: 600,
        modal: !0,
        layout: "fit",
        items: [ c.getPanel(a) ],
        buttons: [ {
            text: "Save",
            handler: function() {
                new DataAdapter();
                b.panel.setLoading();
                var a = c.getDewar(), e = function(a, c) {
                    b.load(c), d.close(), b.panel.setLoading(!1);
                };
                a.sessionId = a.firstExperimentId, a.shippingId = b.shipment.shippingId, EXI.getDataAdapter({
                    onSuccess: e
                }).proposal.dewar.saveDewar(b.shipment.shippingId, a);
            }
        }, {
            text: "Cancel",
            handler: function() {
                d.close();
            }
        } ]
    });
    d.show();
}, CaseGrid.prototype._getStoreFields = function() {
    return [ {
        name: "serialized",
        type: "string"
    } ];
}, CaseGrid.prototype.getDewarById = function(a) {
    for (var b = this, c = 0; c < b.dewars.length; c++) if (b.dewars[c].dewarId == a) return b.dewars[c];
}, CaseGrid.prototype.saveStockSolution = function(a) {
    var b = this;
    this.panel.setLoading();
    var c = function() {
        var a = function() {
            b.panel.setLoading(!1), b.load(b.shipment);
        };
        EXI.getDataAdapter({
            onSuccess: a
        }).proposal.proposal.update();
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.stockSolution.saveStockSolution(a);
}, CaseGrid.prototype.addPuckToDewar = function(a) {
    var b = this;
    this.panel.setLoading();
    var c = function() {
        b.load(b.shipment), b.panel.setLoading(!1);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).proposal.shipping.addPuck(this.shipment.shippingId, Number(a));
}, CaseGrid.prototype.removePuck = function(a) {
    var b = this;
    this.panel.setLoading();
    var c = function(a, c) {
        b.load(b.shipment), b.panel.setLoading(!1);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).proposal.shipping.removeContainerById(b.shipment.shippingId, a, a);
}, CaseGrid.prototype.openStockSolutionWindow = function(a) {
    var b = this, c = new StockSolutionGrid({
        btnAddVisible: !1,
        btnEditVisible: !1,
        btnRemoveVisible: !1,
        btnAddExisting: !1,
        isPackedVisible: !1,
        multiselect: !0
    }), d = Ext.create("Ext.window.Window", {
        height: 400,
        width: 700,
        items: [ c.getPanel() ],
        buttons: [ {
            text: "Pack",
            handler: function() {
                d.close(), c.selectedStockSolutions[0].boxId = a, b.saveStockSolution(c.selectedStockSolutions[0]);
            }
        }, {
            text: "Cancel",
            handler: function() {
                d.close();
            }
        } ]
    }).show();
    c.load(EXI.proposalManager.getUnpackedStockSolutions());
}, CaseGrid.prototype.getPanel = function() {
    var a = this;
    return this.store = Ext.create("Ext.data.Store", {
        fields: this._getStoreFields(),
        data: [],
        autoload: !0
    }), this.panel = Ext.create("Ext.grid.Panel", {
        style: {
            padding: 15
        },
        cls: "border-grid",
        height: 800,
        deferEmptyText: !1,
        emptyText: "No data",
        store: this.store,
        columns: this._getColumns(),
        disableSelection: !0,
        viewConfig: {
            stripeRows: !0,
            enableTextSelection: !0,
            preserveScrollOnRefresh: !0,
            stripeRows: !0,
            rowLines: !0,
            listeners: {
                celldblclick: function(b, c, d, e, f, g, h, i) {
                    a.edit(a.getDewarById(JSON.parse(e.data.serialized)[0].Dewar_dewarId));
                },
                cellclick: function(b, c, d, e, f, g, h, i) {
                    function j(b) {
                        "yes" == b && a.removePuck(s);
                    }
                    if ("printLabels" == h.target.name) {
                        var k = h.target.id.trim(), l = EXI.getDataAdapter().proposal.shipping.getDewarLabelURL(a.shipment.shippingId, k);
                        return console.log(k), void (location.href = l);
                    }
                    if ("removeParcel" == h.target.name) return void BUI.showWarning("Not implemented yet");
                    if ("editParcel" == h.target.name) return void a.edit(a.getDewarById(parseInt(h.target.id.trim())));
                    if ("edit" == h.target.name) {
                        if (-1 != h.target.id.indexOf("Stock Solution")) {
                            var m = h.target.id.split("_")[1];
                            location.hash = "/stocksolution/" + m + "/main";
                        }
                        if (-1 != h.target.id.indexOf("Puck")) {
                            var n = h.target.id.split("_")[1], o = new PuckForm({
                                width: Ext.getBody().getWidth() - 150
                            });
                            o.onSaved.attach(function(b, c) {
                                a.load(a.shipment), p.close();
                            });
                            var p = Ext.create("Ext.window.Window", {
                                title: "Edit Puck",
                                height: 700,
                                width: Ext.getBody().getWidth() - 100,
                                modal: !0,
                                resizable: !0,
                                layout: "fit",
                                items: o.getPanel()
                            }).show();
                            if (null != n) {
                                var q = function(a, b) {
                                    o.load(b);
                                };
                                EXI.getDataAdapter({
                                    onSuccess: q
                                }).proposal.shipping.getContainerById(n, n, n);
                            }
                        }
                    }
                    if ("Add Solution" == h.target.defaultValue && a.openStockSolutionWindow(h.target.id), 
                    "Add Puck" == h.target.defaultValue && a.addPuckToDewar(h.target.id), "Unpack" == h.target.defaultValue && "stockSolution" == h.target.name) {
                        var r = EXI.proposalManager.getStockSolutionById(h.target.id);
                        r.boxId = null, a.saveStockSolution(r);
                    }
                    if ("Remove" == h.target.defaultValue) {
                        var s = Number(h.target.id);
                        "puck" == h.target.name && Ext.MessageBox.show({
                            title: "Save Changes?",
                            msg: "Removing a puck from this parcel will remove also its content. <br />Are you sure you want to continue?",
                            buttons: Ext.MessageBox.YESNOCANCEL,
                            fn: j,
                            animateTarget: "mb4",
                            icon: Ext.MessageBox.QUESTION
                        });
                    }
                }
            }
        },
        selModel: {
            mode: "SINGLE"
        }
    }), this.panel.addDocked({
        height: 45,
        xtype: "toolbar",
        items: a._getTopButtons(),
        cls: "exi-top-bar"
    }), this.panel;
}, ExperimentGrid.prototype._getFilterTypes = function() {
    return [];
}, ExperimentGrid.prototype._prepareData = function(a) {
    var b = [], c = 0;
    a.sort(function(a, b) {
        return b.experimentId - a.experimentId;
    });
    for (var d = 0; d < a.length; d++) {
        var e = a[d];
        this.dates[moment(e.creationDate).format("YYYYMMDD")] = moment(e.creationDate).format("MMM Do YY"), 
        null != this.filtered && e.experimentType != this.filtered || !(c < this.limit || null == this.limit) || null != this.sessionIdFilter && null == this.date && (null != this.date || this.sessionIdFilter != e.sessionId) || (b.push({
            experimentId: e.experimentId,
            status: e.status,
            dataAcquisitionFilePath: e.dataAcquisitionFilePath,
            type: e.experimentType,
            name: e.name,
            macromolecules_names: e.macromolecules,
            percentageAnalysed: {
                value: e.dataCollectionDoneCount / e.dataCollectionCount * 100,
                text: e.dataCollectionDoneCount + " of " + e.dataCollectionCount
            },
            percentageCollected: {
                value: e.measurementDoneCount / e.measurementCount * 100,
                text: e.measurementDoneCount + " of " + e.measurementCount
            },
            percentageMerged: {
                value: e.measurementAveragedCount / e.measurementCount * 100,
                text: e.measurementAveragedCount + " of " + e.measurementCount
            },
            date: moment(e.creationDate).format("YYYYMMDD"),
            time: moment(e.creationDate).format("YYYYMMDDHHmmss"),
            creationDate: e.creationDate
        }), c++);
    }
    return b;
}, ExperimentGrid.prototype.getPanel = function(a) {
    return this.features = a, this._renderGrid(a);
}, ExperimentGrid.prototype.refresh = function(a) {
    this.experiments = a;
    for (var b = [], c = 0; c < a.length; c++) "TEMPLATE" != a[c].experimentType && b.push(a[c]);
    this.parsedData = this._prepareData(b);
    for (var d = {}, e = [], c = 0; c < this.experiments.length; c++) {
        var f = moment(this.experiments[c].creationDate).format("MMM Do YYYY");
        null == d[f] && (e.push({
            date: f,
            value: moment(this.experiments[c].creationDate)
        }), d[f] = !0);
    }
    this.storeDate.loadData(e, !1), this.store.loadData(this.parsedData, !1), null != this.date && this._filterByDate(this.date);
}, ExperimentGrid.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/calendar_icon.png",
        text: "Show Calendar",
        disabled: !1,
        handler: function(b, c) {
            var d = Ext.create("Ext.window.Window", {
                title: "Calendar",
                width: 600,
                height: 600,
                modal: !0,
                closable: !0,
                layout: {
                    type: "vbox",
                    align: "stretch"
                },
                items: [ {
                    xtype: "label",
                    html: "Click on a data acquisition to select:",
                    margin: "5 5 5 5"
                }, {
                    html: '<div id="calendar" style="height:450px;overflow-y: scroll;"></div>',
                    margin: "5 5 5 5"
                } ]
            }).show(), e = new CalendarWidget({
                height: 450
            }), f = a.limit;
            a.limit = null, a.sessionIdFilter = null, e.loadData(a._prepareData(a.experiments)), 
            a.limit = f, e.draw("calendar"), e.onClick.attach(function(b, c) {
                c = moment(c, "YYYY-MM-DD"), a._filterByDate(c), d.close();
            });
        }
    })), this.storeDate = Ext.create("Ext.data.ArrayStore", {
        fields: [ "date", "value" ],
        data: []
    }), this.dateMenu = Ext.create("Ext.form.field.ComboBox", {
        hideLabel: !0,
        store: this.storeDate,
        displayField: "date",
        typeAhead: !0,
        queryMode: "local",
        margin: "0 0 0 30",
        triggerAction: "all",
        emptyText: "Select a date...",
        selectOnFocus: !0,
        width: 135,
        listeners: {
            scope: this,
            select: function(b, c, d) {
                a.limit = null, a._filterByDate(moment(c[0].raw.value, "YYYY-MM-DD"));
            }
        }
    }), b.push(this.dateMenu), b.push("->"), null != a.filtered ? b.push({
        html: "<span>Experiment Type: " + a.filtered + "</span>"
    }) : b.push({
        html: "<span>Experiment Type: ALL</span>"
    }), b;
}, ExperimentGrid.prototype._filterByDate = function(a) {
    for (var b = [], c = 0; c < this.experiments.length; c++) {
        var d = this.experiments[c];
        if (null != d.creationDate) {
            var e = moment(d.creationDate);
            e.year() == a.year() && e.month() == a.month() && e.date() == a.date() && b.push(d);
        }
    }
    var f = this._prepareData(b);
    this.store.loadData(f), this.date = a;
}, ExperimentGrid.prototype._removeExperimentById = function(a) {
    var b = this, c = new BiosaxsDataAdapter();
    c.onSuccess.attach(function(a, c) {
        b.grid.setLoading(!1), document.getElementById(BIOSAXS.targetId).innerHTML = "", 
        BIOSAXS.start(BIOSAXS.targetId);
    }), this.grid.setLoading("Removing experiment "), c.removeExperimentById(a);
}, ExperimentGrid.prototype._renderGrid = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "name" ],
        autoload: !0,
        data: [],
        remoteSort: !1,
        sorters: this.sorters
    });
    var b = Ext.create("Ext.grid.feature.Grouping", {
        groupHeaderTpl: Ext.create("Ext.XTemplate", "<div style='background:#0ca3d2; color:white; float:left; margin:6px 8px 0 0; padding:5px 8px;'>{name:this.formatName}</div>", {
            formatName: function(b) {
                return a.dates[b];
            }
        }),
        hideGroupedHeader: !0,
        startCollapsed: !1
    });
    this.features = [], this.grouping && this.features.push(b), this.grid = Ext.create(this.gridType, {
        hideHeaders: this.hideHeaders,
        resizable: !0,
        title: this.title,
        width: this.width,
        minHeight: this.minHeight,
        height: this.height,
        features: this.features,
        store: this.store,
        columns: this._getColumns(),
        selModel: {
            mode: "SINGLE"
        },
        viewConfig: {
            stripeRows: !0,
            getRowClass: function(a, b, c, d) {
                return "TEMPLATE" == a.raw.type ? "template-color-row" : "CALIBRATION" == a.raw.type && "FINISHED" == a.raw.status ? "blue-row" : void 0;
            },
            listeners: {
                itemdblclick: function(b, c, d, e) {
                    a._editExperiment(c.raw.experimentId);
                },
                cellclick: function(b, c, d, e, f, g, h, i) {
                    b.getGridColumns()[d].getId() == a.id + "GO" && a._editExperiment(e.raw.experimentId), 
                    b.getGridColumns()[d].getId() == a.id + "REMOVE" && a._removeExperimentById(e.raw.experimentId);
                }
            }
        }
    });
    var c = a._getTopButtons();
    return this.tbar && (this.grid.addDocked({
        xtype: "toolbar",
        height: 48,
        items: c
    }), this.grid.getSelectionModel().on({
        selectionchange: function(a, b) {
            if (b.length) for (var d = 0; d < c.length; d++) c[d].enable && c[d].enable(); else for (var d = 0; d < c.length; d++) 0 == c[d].alwaysEnabled && c[d].disable && c[d].disable();
        }
    })), this.grid;
}, ExperimentGrid.prototype._getColumns = function() {
    var a = this;
    return [ {
        text: "experimentId",
        dataIndex: "experimentId",
        name: "experimentId",
        type: "string",
        hidden: !0
    }, {
        xtype: "rownumberer",
        width: 40
    }, {
        text: "Name",
        dataIndex: "name",
        name: "name",
        type: "string",
        flex: 1
    }, {
        text: "Type",
        dataIndex: "type",
        name: "type",
        type: "string",
        flex: 1,
        renderer: function(a) {
            return "CALIBRATION" == a ? "<span style='color:blue;'>" + a + "</span>" : a;
        }
    }, {
        text: "Macromolecules",
        name: "macromolecules_names",
        dataIndex: "macromolecules_names",
        flex: 1,
        renderer: function(a) {
            return null != a ? " <span style='font-weight:bold'>" + a + "</span>" : " <span style='font-style:italic;color:gray;'>Information not available</span>";
        }
    }, {
        text: "Buffers",
        dataIndex: "buffer_names",
        name: "buffer_names",
        flex: 1,
        hidden: !0,
        renderer: function(a) {
            return "Buffer/s: <span style='font-weight:bold'>" + a + "</span>";
        }
    }, {
        text: "Status",
        dataIndex: "status",
        name: "status",
        type: "string",
        flex: 1,
        renderer: function(a, b, c) {
            return "TEMPLATE" == c.raw.type ? "READY" : "ABORTED" == c.raw.status ? "<span style='color:red;'>" + a + "</span>" : "<span style='color:green;'>" + a + "</span>";
        }
    }, {
        text: "Download",
        dataIndex: "creationDate",
        name: "creationDate",
        renderer: function(a, b, c) {
            if (null != c) {
                if ("HPLC" == c.raw.type) return;
                return BUI.getZipHTMLByExperimentId(c.raw.experimentId, c.raw.name);
            }
        },
        width: 100
    }, {
        header: "Measurements",
        dataIndex: "percentageCollected",
        name: "percentageCollected",
        type: "string",
        renderer: function(a, b, c) {
            return "TEMPLATE" != c.raw.type && "HPLC" != c.raw.type ? "<table><tr><td>" + BUI.getProgessBar(c.raw.percentageCollected.value, c.raw.percentageCollected.text) + "</td></table>" : void 0;
        },
        width: 100
    }, {
        header: "Averaged",
        dataIndex: "percentageMerged",
        name: "percentageMerged",
        type: "string",
        renderer: function(a, b, c) {
            return "TEMPLATE" != c.raw.type && "HPLC" != c.raw.type ? "<table><tr><td>" + BUI.getProgessBar(c.raw.percentageMerged.value, c.raw.percentageMerged.text) + "</td></table>" : void 0;
        },
        width: 100
    }, {
        header: "Subtractions",
        dataIndex: "percentageAnalysed",
        name: "percentageAnalysed",
        type: "string",
        renderer: function(a, b, c) {
            return "TEMPLATE" != c.raw.type && "HPLC" != c.raw.type ? "<table><tr><td>" + BUI.getProgessBar(c.raw.percentageAnalysed.value, c.raw.percentageAnalysed.text) + "</td></table>" : void 0;
        },
        width: 100
    }, {
        text: "time",
        dataIndex: "time",
        name: "time",
        hidden: !0,
        renderer: function(a) {
            return a;
        },
        width: 100
    }, {
        text: "Date",
        dataIndex: "date",
        name: "date",
        renderer: function(a) {
            return a;
        },
        width: 100
    }, {
        text: "Time",
        dataIndex: "creationDate",
        name: "creationDate",
        renderer: function(a) {
            return moment(a).format(" HH:mm:ss");
        },
        width: 100
    }, {
        id: a.id + "GO",
        width: 80,
        sortable: !1,
        renderer: function(a, b, c, d, e, f) {
            return BUI.getGreenButton("GO");
        }
    } ];
}, ExperimentGrid.prototype._editExperiment = function(a) {
    null != Ext.urlDecode(window.location.href).sessionId ? location.href = "viewProjectList.do?reqCode=display&experimentId=" + a + "&sessionId=" + Ext.urlDecode(window.location.href).sessionId : location.href = "viewProjectList.do?reqCode=display&experimentId=" + a;
}, ExperimentGrid.prototype.input = function() {
    var a = DATADOC.getExperimentList_10();
    return {
        experiments: a,
        proposal: new MeasurementGrid().input().proposal
    };
}, ExperimentGrid.prototype.test = function(a) {
    var b = new ExperimentGrid({
        height: 350,
        minHeight: 350,
        width: 1e3
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(b.input().experiments);
    b.refresh(b.input().experiments), c.render(a);
}, FrameSelectorGrid.prototype.loadData = function(a, b) {
    function c(a) {
        function b(a) {
            for (var b = 0; b < e.measurements.length; b++) if (e.measurements[b].measurementId == a) return null != e.measurements[b].macromoleculeId ? e.measurements[b].macromoleculeAcronym + ":  " + e.measurements[b].concentration + "mg/ml" : "";
        }
        var c = "";
        a.measurementtodatacollection3VOs.sort(function(a, b) {
            return a.dataCollectionOrder - b.dataCollectionOrder;
        });
        for (var d = 0; d < a.measurementtodatacollection3VOs.length; d++) c = c + " " + b(a.measurementtodatacollection3VOs[d].measurementId);
        return c;
    }
    function d(a) {
        function b(a) {
            var b = [];
            if (a.frametolist3VOs) for (var c = 0; c < a.frametolist3VOs.length; c++) b.push({
                text: a.frametolist3VOs[c].frame3VO.filePath,
                type: "Frame",
                frameId: a.frametolist3VOs[c].frame3VO.frameId,
                leaf: !0
            });
            return b;
        }
        var c = [];
        if (null != a && null != a.substraction3VOs && (a.substraction3VOs.sort(function(a, b) {
            return a.subtractionId - b.subtractionId;
        }), a.substraction3VOs.length > 0)) {
            var d = a.substraction3VOs[a.substraction3VOs.length - 1];
            c.push({
                text: d.substractedFilePath,
                subtractionId: d.subtractionId,
                type: "Subtraction",
                leaf: !0
            }), c.push({
                text: d.sampleAverageFilePath,
                subtractionId: d.subtractionId,
                type: "SampleAverage",
                leaf: !0
            }), c.push({
                text: d.bufferAverageFilePath,
                subtractionId: d.subtractionId,
                type: "BufferAverage",
                leaf: !0
            }), null != d.sampleOneDimensionalFiles && c.push({
                text: "Sample",
                leaf: !1,
                type: "Sample",
                children: b(d.sampleOneDimensionalFiles, "Sample")
            }), null != d.bufferOneDimensionalFiles && c.push({
                text: "Buffer",
                leaf: !1,
                type: "Buffer",
                children: b(d.bufferOneDimensionalFiles, "Buffer")
            });
        }
        return c;
    }
    for (var e = this, f = [], g = 0; g < b.length; g++) f.push({
        text: c(b[g]),
        leaf: !1,
        children: d(b[g])
    });
    e.treePanel.setRootNode({
        expanded: !0,
        children: f
    });
}, FrameSelectorGrid.prototype.load = function(a) {
    var b = this;
    this.measurements = a, this.subtractionIds = [];
    var c = [];
    if (null != this.measurements) for (var d = 0; d < this.measurements.length; d++) null != this.measurements[d].dataCollectionId && (c.push(this.measurements[d].dataCollectionId), 
    this.subtractionIds.push(this.measurements[d].subtractionId));
    this.subtractionIds = $.unique(this.subtractionIds);
    var e = function(a, c) {
        null != c && b.loadData(b.measurements, c);
    };
    EXI.getDataAdapter({
        onSuccess: e
    }).saxs.dataCollection.getDataCollectionsByIdList(c);
}, FrameSelectorGrid.prototype.getPanel = function() {
    var a = this;
    this.store = Ext.create("Ext.data.TreeStore", {
        proxy: {
            type: "memory"
        },
        columns: [ {
            xtype: "treecolumn",
            text: "Text",
            dataIndex: "text"
        } ]
    });
    var b = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        mode: "multi",
        listeners: {
            selectionchange: function(b, c) {
                var d = [], e = [], f = [], g = [];
                if (null != c) {
                    for (var h = 0; h < c.length; h++) c[h].data.type && ("Frame" == c[h].data.type && d.push(c[h].data.frameId), 
                    "SampleAverage" == c[h].data.type && e.push(c[h].data.subtractionId), "BufferAverage" == c[h].data.type && f.push(c[h].data.subtractionId), 
                    "Subtraction" == c[h].data.type && g.push(c[h].data.subtractionId));
                    a.onSelectionChange.notify({
                        frame: d,
                        average: [],
                        sampleaverage: e,
                        bufferaverage: f,
                        subtracted: g
                    });
                }
            }
        }
    });
    return this.treePanel = Ext.create("Ext.tree.Panel", {
        title: "Data Collections",
        selModel: b,
        store: this.store,
        rootVisible: !1,
        buttons: [ {
            text: "Download",
            xtype: "button",
            handler: function(b) {
                window.open(EXI.getDataAdapter().saxs.subtraction.getZip(a.subtractionIds.toString()));
            }
        } ],
        columns: [ {
            xtype: "treecolumn",
            dataIndex: "text",
            flex: 1,
            renderer: function(a, b, c) {
                return c.data.leaf && -1 != c.data.text.lastIndexOf("/") ? c.data.text.substr(c.data.text.lastIndexOf("/") + 1) : c.data.text;
            }
        } ]
    }), this.treePanel;
}, MacromoleculeGrid.prototype.edit = function(a) {
    var b = this, c = new MacromoleculeWindow();
    c.onSave.attach(function(a) {
        b.store.loadData(EXI.proposalManager.getMacromolecules());
    }), c.draw(a);
}, MacromoleculeGrid.prototype.getTbar = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "images/icon/add.png",
        text: "Add",
        disabled: !1,
        handler: function(b, c) {
            a.edit();
        }
    })), b.push("->"), b.push(Ext.create("Ext.Action", {
        icon: "images/icon/refresh.png",
        text: "Update From SMIS",
        tooltip: "Retrieve all the macromolecules of your proposal from SMIS database",
        disabled: !1,
        handler: function(b, c) {
            a.grid.setLoading("Connecting to SMIS");
            var d = new BiosaxsDataAdapter();
            d.onSuccess.attach(function(b, c) {
                BIOSAXS.proposal.setMacromolecules(c.macromolecules), a.refresh(BIOSAXS.proposal.macromolecules), 
                a.grid.setLoading(!1);
            }), d.onError.attach(function(b, c) {
                a.grid.setLoading(!1);
            }), d.updateDataBaseFromSMIS();
        }
    })), b;
}, MacromoleculeGrid.prototype.deselectAll = function() {
    this.grid.getSelectionModel().deselectAll();
}, MacromoleculeGrid.prototype.selectById = function(a) {
    this.grid.getSelectionModel().deselectAll();
    for (var b = 0; b < this.grid.getStore().data.items.length; b++) {
        var c = this.grid.getStore().data.items[b].raw;
        c.macromoleculeId == a && this.grid.getSelectionModel().select(b);
    }
}, MacromoleculeGrid.prototype.load = function(a) {
    this.store.loadData(a, !1);
}, MacromoleculeGrid.prototype.getColumns = function() {
    var a = this, b = [ {
        text: "Acronym",
        dataIndex: "acronym",
        id: this.id + "acronym",
        flex: 1,
        renderer: function(b, c, d, e, f, g) {
            return null != a.cssFontStyle ? "<span style='" + a.cssFontStyle + "'>" + b + "</span>" : b;
        }
    }, {
        text: "Name",
        dataIndex: "name",
        id: this.id + "name",
        flex: 1,
        hidden: !1
    }, {
        text: "Comments",
        dataIndex: "comments",
        id: this.id + "comments",
        flex: 1,
        hidden: !1
    } ];
    return this.btnEditVisible && b.push({
        xtype: "actioncolumn",
        width: 40,
        text: "Edit",
        items: [ {
            icon: "images/icon/edit.png",
            tooltip: "Edit",
            handler: function(b, c, d) {
                var e = b.getStore().getAt(c);
                a.edit(EXI.proposalManager.getMacromoleculeById(e.get("macromoleculeId")));
            }
        } ]
    }), this.btnRemoveVisible && b.push({
        id: a.id + "buttonRemoveMacromolecule",
        width: 85,
        sortable: !1,
        renderer: function(b, c, d, e, f, g) {
            return a.btnRemoveVisible ? BUI.getRedButton("REMOVE") : null;
        }
    }), b;
}, MacromoleculeGrid.prototype._prepareData = function(a) {
    return a;
}, MacromoleculeGrid.prototype.getPanel = function(a) {
    var b = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "macromoleculeId", "name", "acronym", "comments" ],
        data: b._prepareData(a)
    }), this.store.sort("acronym");
    var c = "Ext.grid.Panel";
    1 == this.searchBar && (c = "Ext.ux.LiveSearchGridPanel");
    var d = null;
    return this.multiselect && (d = Ext.create("Ext.selection.CheckboxModel", {
        multiSelect: this.multiselect,
        listeners: {
            selectionchange: function(a, c) {
                for (var d = [], e = 0; e < c.length; e++) d.push(c[e].raw);
                b.onSelected.notify(d);
            }
        }
    })), this.grid = Ext.create(c, {
        id: this.id,
        title: "Macromolecules",
        collapsible: this.collapsible,
        collapsed: this.collapsed,
        store: this.store,
        height: this.height,
        maxHeight: this.maxHeight,
        selModel: d,
        allowDeselect: !0,
        columns: this.getColumns(),
        width: this.width,
        viewConfig: {
            stripeRows: !0,
            listeners: {
                celldblclick: function(a, c, d, e, f, g, h, i) {
                    b.edit(EXI.proposalManager.getMacromoleculeById(e.data.macromoleculeId));
                },
                cellclick: function(a, c, d, e, f, g, h, i) {
                    a.getGridColumns()[d].getId() == b.id + "buttonEditMacromolecule" && b.edit(EXI.proposalManager.getMacromoleculeById(e.data.macromoleculeId)), 
                    a.getGridColumns()[d].getId() == b.id + "buttonRemoveMacromolecule" && BUI.showBetaWarning();
                }
            }
        }
    }), this.tbar && this.grid.addDocked({
        xtype: "toolbar",
        height: 50,
        items: this.getTbar()
    }), this.grid;
}, MacromoleculeGrid.prototype.input = function() {
    return {
        proposal: DATADOC.getProposal_10()
    };
}, MacromoleculeGrid.prototype.test = function(a) {
    var b = new MacromoleculeGrid({
        width: 800,
        height: 350,
        collapsed: !1,
        tbar: !0
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(BIOSAXS.proposal.macromolecules);
    c.render(a);
}, MeasurementGrid.prototype.edit = function(a) {
    var b = new MacromoleculeWindow();
    b.onSave.attach(function(a) {}), b.draw(a);
}, MeasurementGrid.prototype.deselectAll = function() {
    this.grid.getSelectionModel().deselectAll();
}, MeasurementGrid.prototype.selectById = function(a) {
    this.grid.getSelectionModel().deselectAll();
    for (var b = 0; b < this.grid.getStore().data.items.length; b++) {
        var c = this.grid.getStore().data.items[b].raw;
        c.macromoleculeId == a && this.grid.getSelectionModel().select(b);
    }
}, MeasurementGrid.prototype.load = function(a) {
    this.store.loadData(a, !1);
}, MeasurementGrid.prototype.loadExperiment = function(a) {
    this.experimentList = new ExperimentList([ a ]);
    var b = this._prepareData(this.experimentList.getMeasurements(), this.experimentList);
    this.load(b);
}, MeasurementGrid.prototype._prepareData = function(a, b) {
    for (var c = [], d = 0; d < a.length; d++) {
        var e = a[d], f = b.getSampleById(e.specimenId), g = EXI.proposalManager.getBufferById(f.bufferId);
        if (e.buffer_acronym = g.acronym, e.bufferId = g.bufferId, e.volume = f.volume, 
        null != f.macromolecule3VO && (e.acronym = f.macromolecule3VO.acronym, e.macromoleculeId = f.macromolecule3VO.macromoleculeId), 
        e.concentration = f.concentration, null != e.run3VO) {
            e.energy = e.run3VO.energy, e.expExposureTemperature = e.run3VO.exposureTemperature, 
            e.storageTemperature = e.run3VO.storageTemperature, e.timePerFrame = e.run3VO.timePerFrame, 
            e.radiationAbsolute = e.run3VO.radiationAbsolute, e.radiationRelative = e.run3VO.radiationRelative, 
            e.status = "DONE";
            try {
                null != e.run3VO.timeStart && "" != e.run3VO.timeStart && (e.miliseconds = moment(e.run3VO.timeStart).format("X"));
            } catch (h) {
                console.log(h);
            }
        }
        if (b.getDataCollectionByMeasurementId(e.measurementId).length > 0) for (var i = b.getDataCollectionByMeasurementId(e.measurementId)[0].measurementtodatacollection3VOs, j = 0; j < i.length; j++) if (1 == i[j].dataCollectionOrder) {
            var k = b.getSampleById(b.getMeasurementById(i[j].measurementId).specimenId);
            null != k.sampleplateposition3VO && (e.bufferSampleplateposition3VO = k.sampleplateposition3VO, 
            e.bufferSampleplate = b.getSamplePlateById(k.sampleplateposition3VO.samplePlateId));
        }
        this.collapsed ? null != f.macromolecule3VO && c.push(e) : c.push(e);
    }
    return c;
}, MeasurementGrid.prototype._getEditor = function(a) {
    return null != this.editor && null != this.editor[a] ? this.editor[a] : null;
}, MeasurementGrid.prototype.getColumns = function() {
    var a = this, b = [ {
        text: "Order",
        dataIndex: "priority",
        flex: .3,
        hidden: a.isPriorityColumnHidden,
        sortable: !0,
        hidden: !0
    }, {
        text: "Run Number",
        dataIndex: "code",
        flex: .5,
        hidden: !0,
        sortable: !0
    }, {
        text: "Specimen",
        columns: [ {
            text: "",
            dataIndex: "macromoleculeId",
            flex: 1,
            hidden: !0,
            sortable: !0
        }, {
            text: "Macromolecule",
            dataIndex: "acronym",
            flex: 1,
            sortable: !0
        }, {
            text: "Conc. ",
            dataIndex: "concentration",
            flex: 1,
            sortable: !0
        }, {
            text: "",
            dataIndex: "bufferId",
            flex: 1,
            hidden: !0,
            sortable: !0
        }, {
            text: "Buffer",
            dataIndex: "buffer_acronym",
            flex: 1,
            renderer: function(a, b, c) {
                return null != c.data.bufferSampleplateposition3VO ? EXI.proposalManager.getBufferById(c.data.bufferId).acronym + "<span style='font-style:oblique;'> Plate: [" + c.data.bufferSampleplate.slotPositionColumn + ", " + BUI.getSamplePlateLetters()[c.data.bufferSampleplateposition3VO.rowNumber - 1] + "-" + c.data.bufferSampleplateposition3VO.columnNumber + "]</span>" : a;
            },
            sortable: !0
        }, {
            text: "Position",
            flex: 1,
            hidden: !0
        } ]
    }, {
        text: "Parameters",
        columns: [ {
            text: "Ex. Flow. time (s)",
            dataIndex: "extraFlowTime",
            flex: 1,
            hidden: !0
        }, {
            text: "Exp. Temp.",
            dataIndex: "exposureTemperature",
            flex: 1,
            sortable: !0,
            editor: this._getEditor("exposureTemperature")
        }, {
            text: "Vol. Load",
            dataIndex: "volumeToLoad",
            flex: .5,
            hidden: !1,
            editor: this._getEditor("volumeToLoad")
        }, {
            text: "Volume in Well",
            dataIndex: "volume",
            hidden: !0,
            editor: this._getEditor("volume"),
            flex: 1
        }, {
            text: "Trans.",
            dataIndex: "transmission",
            flex: 1,
            editor: this._getEditor("transmission")
        }, {
            text: "Wait T.",
            dataIndex: "waitTime",
            editor: this._getEditor("waitTime"),
            flex: .5
        }, {
            text: "Flow",
            dataIndex: "flow",
            editor: this._getEditor("flow"),
            flex: .3
        }, {
            text: "Viscosity",
            dataIndex: "viscosity",
            tooltip: 'The viscosity of a fluid is a measure of its resistance to gradual deformation by shear stress or tensile stress. For liquids, it corresponds to the informal notion of "thickness"',
            editor: this._getEditor("viscosity"),
            flex: .5
        } ]
    }, {
        text: "Status",
        dataIndex: "status",
        flex: 1,
        hidden: a.isStatusColumnHidden,
        renderer: function(a, b, c) {
            return null != a ? "<span style='font-weight: bold;'>" + a + "</span>" : void 0;
        }
    }, {
        text: "Time",
        dataIndex: "time",
        flex: 1,
        hidden: a.isTimeColumnHidden
    }, {
        text: "Energy",
        dataIndex: "energy",
        flex: 1,
        hidden: !0
    }, {
        text: "Real Exp. Temp.(C)",
        flex: 1,
        dataIndex: "expExposureTemperature",
        hidden: !0
    }, {
        text: "Storage Temp.(C)",
        flex: 1,
        dataIndex: "storageTemperature",
        hidden: !0
    }, {
        text: "Time/Frame (s)",
        flex: 1,
        dataIndex: "timePerFrame",
        hidden: !0
    }, {
        text: "Radiation Relative",
        dataIndex: "radiationRelative",
        flex: 1,
        hidden: !0
    }, {
        text: "Radiation Absolute",
        dataIndex: "radiationAbsolute",
        flex: 1,
        hidden: !0
    }, {
        text: "Comments",
        dataIndex: "comments",
        flex: 1,
        hidden: !0,
        editor: this._getEditor("comments")
    }, {
        id: a.id + "buttonRemoveSample",
        text: "",
        hidden: !a.removeBtnEnabled,
        flex: 1,
        renderer: function(b, c, d, e, f, g) {
            return null != d.data.macromoleculeId && a.removeBtnEnabled ? BUI.getRedButton("REMOVE") : void 0;
        }
    } ];
    return b;
}, MeasurementGrid.prototype._getPlugins = function() {
    var a = this, b = [];
    return this.updateRowEnabled && b.push(Ext.create("Ext.grid.plugin.RowEditing", {
        clicksToEdit: 1,
        listeners: {
            validateedit: function(b, c) {
                for (var d in a.editor) c.record.data[d] = c.newValues[d];
                c.record.data.comments = c.newValues.comments;
                var e = function(b, c) {
                    a.onMeasurementChanged.notify(c), a.grid.setLoading(!1);
                };
                a.grid.setLoading(), EXI.getDataAdapter({
                    onSuccess: e
                }).saxs.measurement.saveMeasurement(c.record.data);
            }
        }
    })), b;
}, MeasurementGrid.prototype.getPanel = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "macromoleculeId", "name", "acronym", "comments" ],
        data: [],
        sorters: this.sorter
    }), this.multiselect && (this.selModel = Ext.create("Ext.selection.CheckboxModel", {
        multiSelect: this.multiselect,
        listeners: {
            selectionchange: function(b, c) {
                for (var d = [], e = 0; e < c.length; e++) d.push(c[e].raw);
                a.onSelected.notify(d);
            }
        }
    }));
    var b = (Ext.create("Ext.grid.plugin.RowEditing", {
        clicksToEdit: 1,
        autoCancel: !0
    }), {});
    try {
        b = Ext.create("Ext.ux.StatusBar", {
            id: a.id + "basic-statusbar",
            defaultText: "Ready",
            text: "Ready",
            iconCls: "x-status-valid",
            items: []
        });
    } catch (c) {
        console.log("bbar error");
    }
    return this.grid = Ext.create("Ext.grid.Panel", {
        id: this.id,
        title: this.title,
        plugins: this._getPlugins(),
        margin: this.margin,
        store: this.store,
        height: this.height,
        maxHeight: this.maxHeight,
        columns: this.getColumns(),
        bbar: b,
        tbar: this._getMenu(),
        cls: "border-grid",
        viewConfig: {
            stripeRows: !0,
            getRowClass: function(a, b, c, d) {
                return "DONE" == a.data.status ? "green-row" : void 0;
            },
            listeners: {
                celldblclick: function(a, b, c, d, e, f, g, h) {},
                cellclick: function(b, c, d, e, f, g, h, i) {
                    if (-1 != c.innerHTML.indexOf("REMOVE") && (b.getStore().removeAt(g), null != e.data.measurementId)) {
                        b.setLoading("ISPyB: Removing measurement");
                        var j = function(c, d) {
                            b.setLoading(!1);
                            var e = function(b, c) {
                                a.onRemoved.notify(c), a._showStatusBarReady("Ready");
                            };
                            EXI.getDataAdapter({
                                onSuccess: e
                            }).saxs.experiment.getExperimentById(a.experimentList.experiments[0].experimentId, "MEDIUM"), 
                            a._showStatusBarBusy("ISPyB: Removing Unused Specimens");
                        };
                        EXI.getDataAdapter({
                            onSuccess: j
                        }).saxs.measurement.removeMeasurement(e.data);
                    }
                }
            }
        }
    }), this.grid;
}, MeasurementGrid.prototype._showStatusBarReady = function(a) {
    var b = Ext.getCmp(this.id + "basic-statusbar");
    b.setStatus({
        text: a,
        iconCls: "x-status-valid",
        clear: !1
    });
}, MeasurementGrid.prototype._showStatusBarBusy = function(a) {
    var b = Ext.getCmp(this.id + "basic-statusbar");
    b.setStatus({
        text: a,
        iconCls: "x-status-busy",
        clear: !1
    });
}, MeasurementGrid.prototype._openAddMeasurementWindow = function(a, b) {
    var c = this, d = new WizardWidget({
        windowMode: !0,
        width: 1200
    });
    d.onFinished.attach(function(a, b) {
        c.grid.setLoading(), d.window.close();
        var e = function(a, b) {
            c.onExperimentChanged.notify(b), c.grid.setLoading(!1);
        };
        d.current.setLoading("ISPyB: Adding measurements"), EXI.getDataAdapter({
            onSuccess: e
        }).saxs.template.saveTemplate(b.name, b.comments, b.data, c.experimentList.experiments[0].experimentId);
    }), d.draw(null, new MeasurementCreatorStepWizardForm(EXI.proposalManager.getMacromolecules(), EXI.proposalManager.getBuffers(), {
        noNext: !0
    }));
}, MeasurementGrid.prototype._getMenu = function() {
    var a = this;
    if (this.tbar) {
        var b = [];
        if (a.addBtnEnable && b.push({
            icon: "../images/icon/add.png",
            text: "Add",
            handler: function() {
                a._openAddMeasurementWindow();
            }
        }), a.sortingBtnEnable) {
            var c = Ext.create("Ext.button.Split", {
                text: "Sort by",
                icon: "../images/icon/sort.png",
                handler: function() {},
                menu: new Ext.menu.Menu({
                    items: [ {
                        text: "First Created First Measured",
                        handler: function() {
                            a._sortBy("FIFO");
                        }
                    }, "-", {
                        text: "Default",
                        handler: function() {
                            a._sortBy("DEFAULT");
                        }
                    } ]
                })
            });
            b.push(c);
        }
        a.collapseBtnEnable && b.push({
            text: "Collapse buffers",
            enableToggle: !0,
            scope: this,
            toggleHandler: function(a, b) {
                this.collapsed = b, this.grid.getStore().loadData(this._prepareData(this.measurements, this.experiments), !1);
            },
            pressed: this.collapsed
        });
        var d = Ext.create("Ext.toolbar.Toolbar", {
            cls: "exi-top-bar",
            height: 45,
            items: b
        });
        return d;
    }
    return null;
}, MeasurementGrid.prototype._sortBy = function(a) {
    var b = this, c = (new DataAdapter(), function(a, c) {
        b.onExperimentChanged.notify(c), b.grid.setLoading(!1);
    });
    b.grid.setLoading("Sorting"), EXI.getDataAdapter({
        onSuccess: c
    }).saxs.measurement.sortMeasurements(this.experimentList.experiments[0].experimentId, a);
}, MolarityGrid.prototype._getColumns = function() {
    return [ {
        text: "Subunit",
        columns: [ {
            text: "Acronym",
            width: 100,
            hidden: !1,
            dataIndex: "acronym",
            sortable: !0
        }, {
            text: "Name",
            width: 125,
            hidden: !1,
            dataIndex: "name",
            sortable: !0
        }, {
            text: "MM Est.",
            width: 100,
            dataIndex: "molecularMass",
            sortable: !0,
            renderer: function(a, b, c) {
                return BUI.formatValuesUnits(c.data.molecularMass, "Da", 10, 2);
            }
        } ]
    }, {
        text: "Ratio",
        width: 100,
        dataIndex: "ratio",
        tooltip: "Number of times the subunit is present in the macromolecule",
        sortable: !0
    }, {
        id: this.id + "MOLARITY_REMOVE",
        flex: .1,
        sortable: !1,
        renderer: function(a, b, c, d, e, f) {
            return BUI.getRedButton("REMOVE");
        }
    } ];
}, MolarityGrid.prototype._openMolarityWindow = function() {
    this.molarityWindow = Ext.create("Ext.window.Window", {
        title: "Molarity",
        height: 220,
        width: 500,
        modal: !0,
        items: [ this.molarityForm.getPanel() ]
    }).show();
}, MolarityGrid.prototype._getButtons = function() {
    var a = this;
    return [ {
        text: "Add subunit",
        icon: "../images/add.png",
        handler: function() {
            a._openMolarityWindow();
        }
    } ];
}, MolarityGrid.prototype.updateProposal = function() {
    var a = this;
    this.panel.setLoading(), BIOSAXS.proposal.onInitialized.attach(function() {
        if (null != BIOSAXS.proposal) for (var b = BIOSAXS.proposal.macromolecules, c = 0; c < b.length; c++) b[c].macromoleculeId == a.macromolecule.macromoleculeId && (a.refresh(b[c]), 
        a.panel.setLoading(!1));
    }), BIOSAXS.proposal.init();
}, MolarityGrid.prototype.getPanel = function() {
    var a = this;
    return this.molarityStore = Ext.create("Ext.data.Store", {
        fields: [ "acronym", "ratio", "comments", "stoichiometryId", "name", "molecularMass" ],
        sorters: {
            property: "ratio",
            direction: "DESC"
        }
    }), this.panel = Ext.create("Ext.grid.Panel", {
        store: this.molarityStore,
        height: this.height,
        padding: 5,
        columns: this._getColumns(),
        listeners: {
            cellclick: function(b, c, d, e, f, g, h, i) {
                if (b.getGridColumns()[d].getId() == a.id + "MOLARITY_REMOVE") {
                    var j = new BiosaxsDataAdapter();
                    j.onSuccess.attach(function(b) {
                        a.updateProposal();
                    }), j.removeStoichiometry(e.data.stoichiometryId), a.panel.setLoading("Removing Structure");
                }
            }
        },
        tbar: this._getButtons()
    }), this.panel;
}, MolarityGrid.prototype._prepareData = function(a) {
    var b = [];
    if (null != a.stoichiometry) for (var c = 0; c < a.stoichiometry.length; c++) {
        var d = BIOSAXS.proposal.getMacromoleculeById(a.stoichiometry[c].macromoleculeId);
        b.push({
            ratio: a.stoichiometry[c].ratio,
            acronym: d.acronym,
            comments: d.comments,
            molecularMass: d.molecularMass,
            stoichiometryId: a.stoichiometry[c].stoichiometryId,
            name: d.name
        });
    }
    return b;
}, MolarityGrid.prototype.refresh = function(a) {
    null != a && (this.molarityStore.loadData(this._prepareData(a)), this.molarityForm.refresh(a), 
    this.macromolecule = a);
}, MolarityGrid.prototype.input = function() {
    return {
        proposal: DATADOC.getProposal_10(),
        dewars: DATADOC.getDewars_10()
    };
}, MolarityGrid.prototype.test = function(a) {
    var b = new b({
        height: 150
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(b.input().dewars);
    c.render(a);
}, ParcelGrid.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/add.png",
        text: "Add New Parcel",
        disabled: !1,
        handler: function(b, c) {
            a.edit();
        }
    })), b;
}, ParcelGrid.prototype.load = function(a) {
    var b = this;
    this.shipment = a, this.dewars = a.dewarVOs, this.parcelForms = [], this.panel.removeAll(), 
    this.dewars.sort(function(a, b) {
        return a.dewarId - b.dewarId;
    });
    for (var c in this.dewars) {
        var d = new ParcelForm({
            height: 340
        });
        this.panel.insert(d.getPanel()), d.load(this.dewars[c]), d.onSavedClick.attach(function(a, c) {
            new DataAdapter();
            b.panel.setLoading();
            var d = function(a, c) {
                window.close(), b.panel.setLoading(!1);
            };
            c.sessionId = c.firstExperimentId, c.shippingId = b.shipment.shippingId, EXI.getDataAdapter({
                onSuccess: d
            }).proposal.dewar.saveDewar(b.shipment.shippingId, c);
        }), this.parcelForms.push(d);
    }
}, ParcelGrid.prototype.edit = function(a) {
    var b = this, c = new CaseForm(), d = Ext.create("Ext.window.Window", {
        title: "Parcel",
        height: 450,
        width: 600,
        modal: !0,
        layout: "fit",
        items: [ c.getPanel(a) ],
        listeners: {
            afterrender: function(a, c) {
                null != b.puck && b.render(b.puck);
            }
        },
        buttons: [ {
            text: "Save",
            handler: function() {
                new DataAdapter();
                b.panel.setLoading();
                var a = c.getDewar(), e = function(a, c) {
                    b.load(c), b.panel.setLoading(!1), d.close();
                };
                a.sessionId = a.firstExperimentId, a.shippingId = b.shipment.shippingId, EXI.getDataAdapter({
                    onSuccess: e
                }).proposal.dewar.saveDewar(b.shipment.shippingId, a);
            }
        }, {
            text: "Cancel",
            handler: function() {
                d.close();
            }
        } ]
    });
    d.show();
}, ParcelGrid.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        cls: "border-grid",
        height: 800,
        autoScroll: !0
    }), this.panel.addDocked({
        height: 45,
        xtype: "toolbar",
        items: a._getTopButtons(),
        cls: "exi-top-bar"
    }), this.panel;
}, ProposalGrid.prototype.load = function(a) {
    this.data = a, this.store.loadData(a, !1);
}, ProposalGrid.prototype.getFilter = function(a) {
    return [ {
        property: "Proposal_proposalNumber",
        value: a,
        anyMacth: !0
    } ];
}, ProposalGrid.prototype.filter = function(a) {}, ProposalGrid.prototype._getTbar = function() {
    var a = this, b = [];
    return b.push({
        xtype: "textfield",
        name: "field1",
        emptyText: "search by number",
        hidden: this.isHidden,
        listeners: {
            change: function(b, c) {
                var d = b.getValue();
                "" != d ? a.store.filter(a.getFilter(b.getValue())) : (a.store.clearFilter(!0), 
                a.load(a.data));
            }
        }
    }), b;
}, ProposalGrid.prototype.getPanel = function() {
    var a = this;
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "Proposal_proposalId", "Proposal_title", "Proposal_proposalCode", "Proposal_proposalNumber", "Proposal_proposalType" ]
    }), this.store.sort([ "Proposal_proposalCode", "Proposal_proposalNumber" ]), this.panel = Ext.create("Ext.grid.Panel", {
        title: "Proposals",
        store: this.store,
        tbar: this._getTbar(),
        layout: "fit",
        cls: "border-grid",
        height: this.height,
        margin: this.margin,
        emptyText: "No proposals",
        columns: [ {
            text: "Proposal",
            dataIndex: "Proposal_code",
            width: 125,
            renderer: function(a, b, c) {
                return "<a href='#'>" + c.data.Proposal_proposalCode + c.data.Proposal_proposalNumber + "</a>";
            }
        }, {
            text: "Code",
            dataIndex: "Proposal_number",
            width: 75,
            hidden: !0
        }, {
            text: "Number",
            dataIndex: "number",
            width: 75,
            hidden: !0
        }, {
            text: "Title",
            dataIndex: "Proposal_title",
            flex: 1
        } ],
        flex: 1,
        viewConfig: {
            stripeRows: !0,
            listeners: {
                cellclick: function(b, c, d, e, f, g, h, i) {
                    a.onSelected.notify(e.data);
                }
            }
        }
    }), this.tbar && this.panel.addDocked({
        xtype: "toolbar",
        cls: "toolBarGrid",
        height: 48,
        items: this._getTbar()
    }), this.panel;
}, QueueGrid.prototype.getSorters = function() {
    return {};
}, QueueGrid.prototype.getSelected = function() {
    return this.selected;
}, QueueGrid.prototype.getSelectedData = function() {
    for (var a = this.panel.getSelectionModel().selected.items, b = [], c = 0; c < a.length; c++) b.push(a[c].data);
    return b;
}, QueueGrid.prototype.getFields = function() {
    return [ "experimentId", "subtractionId", "macromoleculeAcronym", "priorityLevelId", "code", "exposureTemperature", "concentration" ];
}, QueueGrid.prototype.getRunHTML = function(a) {
    var b = a.data.dataCollectionId, c = document.createElement("table");
    if (null != this.key[b]) {
        this.key[b].sort(function(a, b) {
            return b.measurementId - a.measurementId;
        });
        for (i in this.key[b]) {
            var d = this.key[b][i], e = document.createElement("tr"), f = document.createElement("td");
            null != d.measurementCode ? null == d.macromoleculeId ? (f.setAttribute("style", "padding-top:1px;width:130px;color:gray;"), 
            f.appendChild(document.createTextNode("# " + d.measurementCode))) : (f.setAttribute("style", "padding-top:1px;width:130px;font-weight:bold;"), 
            f.appendChild(document.createTextNode("# " + d.measurementCode))) : f.appendChild(document.createTextNode(" - ")), 
            e.appendChild(f), c.appendChild(e);
        }
    }
    return "<table>" + c.innerHTML + "</table>";
}, QueueGrid.prototype.getPercentage = function(a, b) {
    var c = document.createElement("td"), d = "green";
    return null == a && (a = "NA", d = "orange"), null == b && (b = "NA", d = "orange"), 
    "NA" != a & "NA" != b && (a / b >= .3 && (d = "orange"), a / b > .7 && (d = "#BCF5A9"), 
    .3 > a / b && (d = "red")), c.appendChild(document.createTextNode(a + " / " + b)), 
    c.setAttribute("style", "background-color:" + d + ";"), c;
}, QueueGrid.prototype.getFramesHTML = function(a) {
    var b = a.data.dataCollectionId, c = document.createElement("table");
    if (null != this.key[b]) {
        this.key[b].sort(function(a, b) {
            return b.measurementId - a.measurementId;
        });
        for (i in this.key[b]) {
            var d = this.key[b][i], e = document.createElement("tr"), f = document.createElement("td");
            null == d.macromoleculeId ? (f.setAttribute("style", "width:130px;color:gray;"), 
            f.appendChild(document.createTextNode(d.bufferAcronym))) : (f.setAttribute("style", "width:130px;font-weight:bold;"), 
            f.appendChild(document.createTextNode(d.macromoleculeAcronym))), e.appendChild(f), 
            e.appendChild(this.getPercentage(d.framesMerge, d.framesCount));
            var f = document.createElement("td"), g = document.createElement("a");
            null == d.macromoleculeId ? g.setAttribute("href", BUI.getZipURLByAverageId(d.mergeId, d.measurementCode)) : g.setAttribute("href", BUI.getZipURLBySubtractionId(d.subtractionId, d.measurementCode)), 
            e.appendChild(f), c.appendChild(e);
        }
    }
    return "<table>" + c.innerHTML + "</table>";
}, QueueGrid.prototype.getHTMLTable = function(a) {
    for (var b = "", c = 0; c < a.length; c++) b = b + "<tr><td class='key_subgrid'>" + a[c].key + "</td><td class='value_subgrid'>" + a[c].value + "</td></tr>";
    return "<table>" + b + "</table>";
}, QueueGrid.prototype.getImage = function(a, b) {
    if (null != a.data.macromoleculeId && null != a.data.subtractionId) {
        var c = EXI.getDataAdapter().saxs.subtraction.getImage(a.data.subtractionId, b);
        return "<img src=" + c + '   height="70" width="70" >';
    }
}, QueueGrid.prototype.getColumns = function() {
    var a = this;
    return [ {
        header: "dataCollectionId",
        name: "dataCollectionId",
        dataIndex: "dataCollectionId",
        flex: 1,
        hidden: !0
    }, {
        header: "Exp. Id",
        name: "experimentId",
        dataIndex: "experimentId",
        flex: 1,
        hidden: !0
    }, {
        header: "Exp. Name",
        name: "name",
        dataIndex: "name",
        flex: 1,
        hidden: !0
    }, {
        header: "MeasurementId",
        name: "measurementId",
        dataIndex: "measurementId",
        hidden: !0,
        flex: 1,
        renderer: function(a, b, c) {
            return c.raw.measurementId;
        }
    }, {
        header: "Date",
        name: "date",
        flex: 1,
        dataIndex: "runCreationDate",
        hidden: !0
    }, {
        header: "Run",
        flex: .2,
        name: "runNumber",
        dataIndex: "measurementCode",
        renderer: function(b, c, d) {
            return a.getRunHTML(d);
        }
    }, {
        header: "Frames (Average/Total)",
        dataIndex: "macromoleculeId",
        name: "macromoleculeAcronym",
        flex: 1,
        hidden: !1,
        renderer: function(b, c, d) {
            return a.getFramesHTML(d);
        }
    }, {
        text: "Scattering",
        dataIndex: "subtractionId",
        width: 110,
        name: "subtractionId",
        renderer: function(b, c, d) {
            return a.getImage(d, "scattering");
        }
    }, {
        header: "Macromolecule",
        name: "macromoleculeAcronym",
        dataIndex: "macromoleculeAcronym",
        flex: 1,
        hidden: !0
    }, {
        header: "Concentration",
        name: "concentration",
        flex: .5,
        dataIndex: "concentration",
        hidden: !1,
        renderer: function(a, b, c) {
            return 0 != c.data.concentration ? BUI.formatValuesUnits(c.data.concentration, "mg/ml", 7, this.decimals) : void 0;
        }
    }, {
        header: "Exp. Temp.",
        name: "bufferAcronym",
        dataIndex: "bufferAcronym",
        flex: .5,
        renderer: function(a, b, c) {
            return BUI.formatValuesUnits(c.data.exposureTemperature, "C", 10, this.decimals);
        }
    }, {
        text: "Kratky.",
        dataIndex: "subtractionId",
        hidden: !0,
        flex: 1,
        name: "subtractionId",
        renderer: function(b, c, d) {
            return a.getImage(d, "kratky");
        }
    }, {
        text: "P(r).",
        hidden: !0,
        flex: 1,
        dataIndex: "subtractionId",
        type: "string",
        renderer: function(b, c, d) {
            return a.getImage(d, "density");
        }
    }, {
        text: "Guinier.",
        hidden: !0,
        flex: 1,
        dataIndex: "subtractionId",
        type: "string",
        renderer: function(b, c, d) {
            return a.getImage(d, "guinier");
        }
    }, {
        text: "Guinier",
        name: "Guinier",
        flex: .8,
        dataIndex: "subtractionId",
        renderer: function(b, c, d) {
            if (null != d.data.macromoleculeId && null != d.data.subtractionId) {
                var e = [];
                return null != d.data.rg ? e.push({
                    key: "Rg",
                    value: BUI.formatValuesUnits(d.data.rg, "nm", 12, this.decimals)
                }) : e.push({
                    key: "Rg",
                    value: "<span class='notavailablefield'>NA</span>"
                }), null != d.data.rg ? e.push({
                    key: "Points",
                    value: "<span>" + d.data.firstPointUsed + " - " + d.data.lastPointUsed + " (" + (d.data.lastPointUsed - d.data.firstPointUsed) + ")</span>"
                }) : e.push({
                    key: "Points",
                    value: "<span class='notavailablefield'>NA</span>"
                }), null != d.data.I0 ? e.push({
                    key: "I0",
                    value: BUI.formatValuesErrorUnitsScientificFormat(d.data.I0, d.data.I0Stdev, "")
                }) : e.push({
                    key: "I0",
                    value: "<span class='notavailablefield'>NA</span>"
                }), a.getHTMLTable(e);
            }
        }
    }, {
        text: "Gnom",
        name: "Gnom",
        flex: .7,
        dataIndex: "subtractionId",
        renderer: function(b, c, d) {
            if (null != d.data.macromoleculeId && null != d.data.subtractionId) {
                var e = [];
                return null != d.data.rgGnom ? e.push({
                    key: "Rg",
                    value: BUI.formatValuesUnits(d.data.rgGnom, "nm")
                }) : e.push({
                    key: "Rg",
                    value: "<span class='notavailablefield'>NA</span>"
                }), null != d.data.rgGnom ? e.push({
                    key: "Total",
                    value: BUI.formatValuesUnits(d.data.total, "")
                }) : e.push({
                    key: "Total",
                    value: "<span class='notavailablefield'>NA</span>"
                }), null != d.data.dmax ? e.push({
                    key: "D<sub>max</sub>",
                    value: BUI.formatValuesUnits(d.data.dmax, "") + "<span style='font-size:8px;color:gray;'> nm</span>"
                }) : e.push({
                    key: "D<sub>max</sub>",
                    value: "<span class='notavailablefield'>NA</span>"
                }), a.getHTMLTable(e);
            }
        }
    }, {
        text: "Porod",
        name: "Porod",
        flex: 1,
        dataIndex: "subtractionId",
        renderer: function(b, c, d) {
            if (null != d.data.macromoleculeId && null != d.data.subtractionId) {
                var e = [];
                return null != d.data.volumePorod ? e.push({
                    key: "Volume",
                    value: BUI.formatValuesUnits(d.data.volumePorod, "") + "<span style='font-size:8px;color:gray;'> nm<sub>3</sub></span>"
                }) : e.push({
                    key: "Volume",
                    value: "<span class='notavailablefield'>NA</span>"
                }), null != d.data.volumePorod ? e.push({
                    key: "MM Vol. est.",
                    value: Number(d.data.volumePorod / 2).toFixed(1) + " - " + Number(d.data.volumePorod / 1.5).toFixed(1) + "<span style='font-size:8px;color:gray;'>kD</span>"
                }) : e.push({
                    key: "MM Vol. est.",
                    value: "<span class='notavailablefield'>NA</span>"
                }), a.getHTMLTable(e);
            }
        }
    }, {
        text: "Advanced",
        hidden: !1,
        id: this.id + "buttonAction",
        dataIndex: "subtrationId",
        flex: 1,
        renderer: function(a, b, c) {
            var d = "<table><tr><td style='padding-bottom: 1px;'>" + BUI.getGreenButton("Data Reduction", {
                width: 90,
                height: 15
            }) + "</td></tr>";
            return d = c.data.abinitioCount > 0 ? d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getGreenButton("Abinitio", {
                width: 90,
                height: 15
            }) + "</td></tr>" : d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getBlueButton("Abinitio", {
                width: 90,
                height: 15
            }) + "</td></tr>", d = c.data.fitCount > 0 ? d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getGreenButton("Fit", {
                width: 90,
                height: 15
            }) + "</td></tr>" : d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getBlueButton("Fit", {
                width: 90,
                height: 15
            }) + "</td></tr>", d = c.data.superposisitionCount > 0 ? d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getGreenButton("Superposition", {
                width: 90,
                height: 15
            }) + "</td></tr>" : d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getBlueButton("Superposition", {
                width: 90,
                height: 15
            }) + "</td></tr>", d = c.data.rigidbodyCount > 0 ? d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getGreenButton("Rigid Body", {
                width: 90,
                height: 15
            }) + "</td></tr>" : d + "<tr><td style='padding-bottom: 1px;'>" + BUI.getBlueButton("Rigid Body", {
                width: 90,
                height: 15
            }) + "</td></tr>", d + "</table>";
        }
    } ];
}, QueueGrid.prototype.load = function(a) {
    null != a ? (this.key = {}, this.store.loadData(a, !0)) : this.store.load();
}, QueueGrid.prototype.getPanel = function() {
    var a = this;
    Ext.define("Queue", {
        extend: "Ext.data.Model",
        fields: [ "name", "date", "volumePorod", "runCreationDate", "measurementCode", "macromoleculeAcronym", "bufferAcronym", "I0", "I0Stdev", "acronym", "averageFilePath", "bufferAverageFilePath", "bufferId", "bufferOnedimensionalFiles", "code", "comments", "composition", "concentration", "creationDate", "creationTime", "dataAcquisitionFilePath", "dataCollectionId", "discardedFrameNameList", "dmax", "experimentId", "experimentType", "exposureTemperature", "extintionCoefficient", "extraFlowTime", "firstPointUsed", "flow", "frameListId", "framesCount", "framesMerge", "gnomFilePath", "gnomFilePathOutput", "guinierFilePath", "isagregated", "kratkyFilePath", "lastPointUsed", {
            name: "macromoleculeId",
            id: "macromoleculeId"
        }, {
            name: "measurementId",
            type: "int"
        }, "mergeId", "molecularMass", "name", "pH", "priorityLevelId", "proposalId", "quality", "rg", "rgGnom", "rgGuinier", "rgStdev", "runId", "safetyLevelId", "sampleAverageFilePath", "sampleOneDimensionalFiles", "samplePlatePositionId", "scatteringFilePath", "sequence", "sessionId", "sourceFilePath", "specimenId", "status", "stockSolutionId", "substractedFilePath", "subtractionId", "total", "transmission", "viscosity", "volume", "volumeToLoad", "waitTime", "reference", "refined", "fitCount", "superposisitionCount", "rigidbodyCount", "abinitioCount" ]
    }), this.store = Ext.create("Ext.data.Store", {
        model: "Queue",
        data: [],
        filters: this.filters,
        listeners: {
            beforeload: function() {
                return a.key = {}, !0;
            },
            load: function(a, b) {}
        },
        proxy: {
            type: "memory",
            reader: {
                type: "json"
            }
        }
    });
    var b = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        mode: this.selectionMode,
        listeners: {
            selectionchange: function(b, c) {
                a.selected = a.getSelectedData(), a.onSelectionChange.notify(a.selected);
            },
            select: function(b, c) {
                a.onSelect.notify(c.data);
            },
            deselect: function(b, c) {
                a.onDeselect.notify(c.data);
            }
        }
    });
    return this.panel = Ext.create("Ext.grid.Panel", {
        title: this.title,
        border: !0,
        cls: "defaultGridPanel",
        maxHeight: this.maxHeight,
        overflow: "auto",
        margin: 5,
        store: this.store,
        columns: this.getColumns(),
        allowDeselect: !0,
        selModel: b,
        collapsible: this.collapsible,
        collapsed: this.collapsed,
        viewConfig: {
            enableTextSelection: !0,
            preserveScrollOnRefresh: !0,
            stripeRows: !0,
            rowLines: !0,
            listeners: {
                cellclick: function(b, c, d, e, f, g, h, i) {
                    "Data Reduction" == h.target.defaultValue && (location.hash = "/saxs/datacollection/dataCollectionId/" + e.data.dataCollectionId + "/primaryviewer"), 
                    "Abinitio" == h.target.defaultValue && a.onAbinitioButtonClicked(e.raw), "Fit" == h.target.defaultValue && a.onFitButtonClicked(e.raw), 
                    "Superposition" == h.target.defaultValue && a.onSuperpositionButtonClicked(e.raw), 
                    "Rigid Body" == h.target.defaultValue && a.onRigidBodyButtonClicked(e.raw);
                }
            }
        }
    }), this.panel;
}, QueueGrid.prototype.onDataReductionButtonClicked = function(a) {
    var b = new DataAdapter(), c = new DataReductionForm({});
    Ext.create("Ext.window.Window", {
        title: "Data Reduction",
        height: 540,
        width: 1e3,
        modal: !0,
        items: [ c.getPanel() ]
    }).show(), c.panel.setLoading(), b.onSuccess.attach(function(a, b) {
        c.refresh(b), c.panel.setLoading(!1);
    }), b.getSubtractionsBySubtractionIdList([ a.subtractionId ]);
}, RigidModelGrid.prototype.refresh = function(a) {
    var b = [];
    if (null != a && a.length > 0) for (j in a) {
        var c = a[j];
        if (null != c.rigidBodyModeling3VOs) for (i in c.rigidBodyModeling3VOs) b.push(c.rigidBodyModeling3VOs[i]);
    }
    this.store.loadData(b);
}, RigidModelGrid.prototype.getPanel = function() {
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "symmetry", "subtractionId", "subUnitConfigFilePath", "rigidBodyModelingId", "rigidBodyModelFilePath", "logFilePath", "fitFilePath", "curveConfigFilePath", "crossCorrConfigFilePath", "contactDescriptionFilePath" ],
        data: []
    }), this.store.sort([ {
        property: "name",
        direction: "ASC"
    } ]), this.panel = Ext.create("Ext.grid.Panel", {
        store: this.store,
        width: this.width,
        height: this.height,
        margin: 10,
        deferredRender: !1,
        columns: [ {
            text: "RBM",
            dataIndex: "rigidBodyModelFilePath",
            hidden: !1,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Sub Unit Conf.",
            dataIndex: "subUnitConfigFilePath",
            hidden: !0,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Log",
            dataIndex: "logFilePath",
            hidden: !0,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Fit",
            dataIndex: "fitFilePath",
            hidden: !1,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Curve Conf.",
            dataIndex: "curveConfigFilePath",
            hidden: !1,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Cross Corr.",
            dataIndex: "crossCorrConfigFilePath",
            hidden: !1,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        }, {
            text: "Contact Desc.",
            dataIndex: "contactDescriptionFilePath",
            hidden: !0,
            flex: 1,
            renderer: function(a) {
                return BUI.getFileName(a);
            }
        } ],
        viewConfig: {
            enableTextSelection: !0,
            preserveScrollOnRefresh: !0
        },
        listeners: {
            cellclick: function(a, b, c, d, e, f, g, h) {},
            afterrender: function() {}
        }
    }), this.panel;
}, SessionGrid.prototype.load = function(a) {
    this.store.loadData(a, !0);
}, SessionGrid.prototype.goToSession = function(a) {
    "SAXS" == EXI.credentialManager.getTechniqueByBeamline(a.beamlineName) ? location.hash = "/session/nav/" + a.sessionId + "/session" : location.hash = "/mx/datacollection/session/" + a.sessionId + "/main";
}, SessionGrid.prototype.getPanel = function() {
    var a = this;
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "startDate", "beamlineName", "beamlineOperator", "diff" ],
        emptyText: "No sessions",
        data: []
    }), this.panel = Ext.create("Ext.grid.Panel", {
        title: this.title,
        store: this.store,
        layout: "fit",
        icon: "../images/icon/sessions.png",
        cls: "border-grid",
        height: this.height,
        margin: this.margin,
        emptyText: "No sessions",
        columns: [ {
            text: "Beamline",
            dataIndex: "beamlineName",
            width: 100
        }, {
            text: "Date",
            dataIndex: "startDate",
            width: 150,
            renderer: function(a, b, c) {
                return moment(c.data.startDate).format("lll");
            }
        }, {
            text: "Local Contact",
            dataIndex: "beamlineOperator",
            width: 200
        }, {
            text: "Proposal",
            dataIndex: "beamlineName",
            flex: .1,
            renderer: function(a, b, c) {
                return c.data.proposalVO.code + c.data.proposalVO.number;
            }
        }, {
            text: "Title",
            dataIndex: "beamlineName",
            flex: 1,
            renderer: function(a, b, c) {
                return c.data.proposalVO.title;
            }
        } ],
        viewConfig: {
            stripeRows: !0,
            getRowClass: function(a, b, c, d) {
                if (null != a.data.beamlineName) {
                    if ("SAXS" == EXI.credentialManager.getTechniqueByBeamline(a.data.beamlineName)) return b % 2 == 0 ? "saxs-grid-row-light" : "saxs-grid-row-dark";
                    if ("MX" == EXI.credentialManager.getTechniqueByBeamline(a.data.beamlineName)) return b % 2 == 0 ? "mx-grid-row-light" : "mx-grid-row-dark";
                }
                return "warning-grid-row";
            },
            listeners: {
                cellclick: function(b, c, d, e, f, g, h, i) {
                    a.onSelected.notify(e.data);
                },
                itemdblclick: function(b, c, d, e, f, g) {
                    a.goToSession(c.data);
                }
            }
        }
    }), this.tbar && this.panel.addDocked({
        xtype: "toolbar",
        cls: "toolBarGrid",
        height: 48,
        items: this._getTbar()
    }), this.panel;
}, SpecimenGrid.prototype._prepareData = function(a) {
    for (var b = [], c = a.getSamples(), d = 0; d < c.length; d++) {
        var e = c[d];
        null != e.macromolecule3VO && (e.macromolecule = e.macromolecule3VO.acronym, e.exposureTemperature = [], 
        e.macromoleculeId = e.macromolecule3VO.macromoleculeId), null != e.sampleplateposition3VO ? null != e.sampleplateposition3VO.samplePlateId && (e.samplePlateId = e.sampleplateposition3VO.samplePlateId, 
        e.rowNumber = e.sampleplateposition3VO.rowNumber, e.columnNumber = e.sampleplateposition3VO.columnNumber, 
        null != a.getSamplePlateById(e.sampleplateposition3VO.samplePlateId).plategroup3VO && (e.plateGroupName = a.getSamplePlateById(e.sampleplateposition3VO.samplePlateId).plategroup3VO.name, 
        e.samplePlateName = a.getSamplePlateById(e.sampleplateposition3VO.samplePlateId).name + "  [" + e.plateGroupName + "]", 
        e.slotPositionColumn = a.getSamplePlateById(e.sampleplateposition3VO.samplePlateId).slotPositionColumn)) : e.samplePlateName = "Unallocated Specimens", 
        e.groupIndex = e.bufferId + e.macromoleculeId;
        var f = EXI.proposalManager.getMacromoleculeById(e.macromoleculeId);
        e.acronym = "Buffers", null != f && (e.acronym = EXI.proposalManager.getMacromoleculeById(e.macromoleculeId).acronym), 
        e.buffer = a.getBufferById(e.bufferId), e.volumeToLoad = a.getVolumeToLoadBySampleId(e.sampleId), 
        b.push(e);
    }
    return b;
}, SpecimenGrid.prototype.deselectAll = function() {
    this.grid.getSelectionModel().deselectAll();
}, SpecimenGrid.prototype.selectById = function(a) {
    this.grid.getSelectionModel().deselectAll();
    for (var b = 0; b < this.grid.getStore().data.items.length; b++) {
        var c = this.grid.getStore().data.items[b].data;
        c.specimenId == a && this.grid.getSelectionModel().select(b);
    }
}, SpecimenGrid.prototype.getStore = function() {
    return this.store;
}, SpecimenGrid.prototype.getPlugins = function() {
    var a = this, b = [];
    return this.updateRowEnabled && b.push(Ext.create("Ext.grid.plugin.RowEditing", {
        clicksToEdit: 1,
        listeners: {
            validateedit: function(b, c) {
                var d = [];
                if (c.newValues.bufferId != c.record.data.bufferId) {
                    var e = [];
                    if (null == c.record.data.macromoleculeId) e = e.concat(a.experiment.getDataCollectionsBySpecimenId(c.record.data.specimenId)); else for (var f = a.experiment.getDataCollectionsBySpecimenId(c.record.data.specimenId), g = 0; g < f.length; g++) {
                        var h = f[g];
                        if (null != h) for (var i = 0; i < h.measurementtodatacollection3VOs.length; i++) {
                            var j = h.measurementtodatacollection3VOs[i];
                            1 == j.dataCollectionOrder && (e = e.concat(a.experiment.getDataCollectionsBySpecimenId(a.experiment.getMeasurementById(j.measurementId).specimenId)));
                        }
                    }
                    var g = null;
                    for (g = 0; g < e.length; g++) {
                        var k = e[g], l = a.experiment.getSpecimenByDataCollectionId(k.dataCollectionId);
                        d = d.concat(l);
                    }
                    for (g = 0; g < d.length; g++) {
                        var m = d[g], n = a.experiment.getSpecimenById(m.specimenId);
                        n.bufferId = c.newValues.bufferId, new DataAdapter().saveSpecimen(n, a.experiment);
                    }
                }
                if (c.record.data.concentration = c.newValues.concentration, c.record.data.volume = c.newValues.volume, 
                null != c.record.data.sampleplateposition3VO) {
                    var o = a.experiment.getSamplePlateBySlotPositionColumn(c.newValues.slotPositionColumn);
                    null != o && (c.record.data.sampleplateposition3VO = {
                        columnNumber: c.newValues.columnNumber,
                        rowNumber: c.newValues.rowNumber,
                        samplePlateId: o.samplePlateId
                    });
                } else if (null != c.newValues.slotPositionColumn) {
                    var o = a.experiment.getSamplePlateBySlotPositionColumn(c.newValues.slotPositionColumn);
                    null != o && (c.record.data.sampleplateposition3VO = {
                        columnNumber: c.newValues.columnNumber,
                        rowNumber: c.newValues.rowNumber,
                        samplePlateId: o.samplePlateId
                    });
                }
                var p = c.record.data.macromoleculeId, q = function(b, c) {
                    debugger;
                    null != p && (c.macromolecule3VO = EXI.proposalManager.getMacromoleculeById(p)), 
                    a.onSpecimenChanged.notify(c), a.grid.setLoading(!1);
                };
                a.grid.setLoading(), EXI.getDataAdapter({
                    onSuccess: q
                }).saxs.specimen.saveSpecimen(c.record.data);
            }
        }
    })), b;
}, SpecimenGrid.prototype._getRowCombo = function() {
    for (var a = [], b = 1; 8 >= b; b++) a.push({
        rowNumber: b,
        name: BUI.getSamplePlateLetters()[b - 1]
    });
    var c = Ext.create("Ext.data.Store", {
        fields: [ "rowNumber", "name" ],
        data: a
    });
    return Ext.create("Ext.form.ComboBox", {
        store: c,
        queryMode: "local",
        displayField: "name",
        valueField: "rowNumber"
    });
}, SpecimenGrid.prototype._getColumnCombo = function() {
    for (var a = [], b = 1; 12 >= b; b++) a.push({
        columnNumber: b
    });
    var c = Ext.create("Ext.data.Store", {
        fields: [ "columnNumber" ],
        data: a
    });
    return Ext.create("Ext.form.ComboBox", {
        store: c,
        queryMode: "local",
        displayField: "columnNumber",
        valueField: "columnNumber"
    });
}, SpecimenGrid.prototype._getSlotColumBombo = function() {
    if (this.experiment) {
        for (var a = this.experiment.getSamplePlates().length, b = [], c = 1; a >= c; c++) b.push({
            slotPositionColumn: c
        });
        var d = Ext.create("Ext.data.Store", {
            fields: [ "slotPositionColumn" ],
            data: b
        });
        return Ext.create("Ext.form.ComboBox", {
            store: d,
            queryMode: "local",
            displayField: "slotPositionColumn",
            valueField: "slotPositionColumn"
        });
    }
}, SpecimenGrid.prototype.getPanelByExperiment = function(a) {
    this.experiment = a;
    var b = this._prepareData(a);
    return this.getPanel(b);
}, SpecimenGrid.prototype.refresh = function(a) {
    this.experiment = a;
    var b = this._prepareData(a);
    this.store.loadData(b);
}, SpecimenGrid.prototype.getPanel = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "buffer", "bufferId", "code", "macromolecule", "acronym", "macromoleculeId", "concentration", "volume", "samplePlateId", "slotPositionColumn", "rowNumber", "columnNumber", "groupIndex" ],
        data: [],
        groupField: "acronym"
    }), this.store.sort([ {
        property: "concentration",
        direction: "ASC"
    }, {
        property: "buffer",
        direction: "ASC"
    } ]);
    var b = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        listeners: {
            select: function(b, c, d, e) {
                a.onSelected.notify([ c.data ]);
            }
        }
    }), c = [];
    return this.grouped && c.push({
        ftype: "grouping",
        groupHeaderTpl: "{name}",
        hideGroupedHeader: !1,
        startCollapsed: !1,
        id: "myGroupedStore"
    }), this.grid = Ext.create("Ext.grid.Panel", {
        title: this.title,
        height: this.height,
        width: this.width,
        selModel: b,
        store: this.store,
        features: c,
        margin: this.margin,
        plugins: this.getPlugins(),
        cls: "border-grid",
        columns: [ {
            text: "",
            dataIndex: "macromolecule",
            width: 20,
            renderer: function(b, c, d) {
                var e = null;
                return e = null != d.data.macromolecule3VO ? d.data.macromolecule3VO.macromoleculeId : d.data.macromoleculeId, 
                null != e ? BUI.getRectangleColorDIV(a.experiment.macromoleculeColors[e], 10, 10) : void 0;
            }
        }, {
            text: "Macromolecule",
            dataIndex: "macromolecule",
            width: 100
        }, {
            text: "",
            dataIndex: "buffer",
            width: 20,
            renderer: function(b, c, d) {
                var e = "black";
                return null != d.data.bufferId ? (null != a.experiment.getDataCollectionsBySpecimenId(d.data.specimenId)[0] && (e = a.experiment.getSpecimenColorByBufferId(a.experiment.getMeasurementById(a.experiment.getDataCollectionsBySpecimenId(d.data.specimenId)[0].measurementtodatacollection3VOs[0].measurementId).specimenId)), 
                BUI.getRectangleColorDIV(e, 10, 10)) : void 0;
            }
        }, {
            text: "Buffer",
            dataIndex: "bufferId",
            width: 140,
            editor: BIOSAXS_COMBOMANAGER.getComboBuffers(EXI.proposalManager.getBuffers(), {
                noLabel: !0,
                width: 300
            }),
            renderer: function(a, b, c) {
                return null != c.data.bufferId ? EXI.proposalManager.getBufferById(a).acronym : void 0;
            }
        }, {
            text: "Conc.",
            dataIndex: "concentration",
            width: 100,
            editor: {
                allowBlank: !1
            },
            renderer: function(a, b, c) {
                return isNaN(a) ? (b.tdCls = "yellow-cell", a) : 0 != a ? BUI.formatValuesUnits(a, "mg/ml", {
                    fontSize: 16,
                    decimals: 3,
                    unitsFontSize: this.unitsFontSize
                }) : void 0;
            }
        }, {
            text: "Vol. Well",
            dataIndex: "volume",
            width: 70,
            editor: {
                allowBlank: !0
            },
            renderer: function(a, b, c) {
                return BUI.formatValuesUnits(c.data.volume, "&#181l", {
                    fontSize: 12,
                    decimals: 2,
                    unitsFontSize: this.unitsFontSize
                });
            }
        }, {
            text: "Position",
            hidden: !0,
            flex: 1,
            renderer: function(b, c, d) {
                return BUI.getSamplePositionHTML(d.data, a.experiment);
            }
        }, {
            text: "samplePlateId",
            dataIndex: "samplePlateId",
            hidden: !0
        }, {
            text: "Plate",
            hidden: this.isPositionColumnHidden,
            dataIndex: "slotPositionColumn",
            editor: a._getSlotColumBombo(),
            flex: 1,
            renderer: function(a, b, c) {
                return null != a & "" != a ? a : void (b.tdCls = "yellow-cell");
            }
        }, {
            text: "Row",
            hidden: this.isPositionColumnHidden,
            dataIndex: "rowNumber",
            editor: this._getRowCombo(),
            flex: 1,
            renderer: function(a, b, c) {
                return null != a && "" != a ? BUI.getSamplePlateLetters()[a - 1] : void (b.tdCls = "yellow-cell");
            }
        }, {
            text: "Well",
            hidden: this.isPositionColumnHidden,
            dataIndex: "columnNumber",
            editor: this._getColumnCombo(),
            flex: 1,
            renderer: function(a, b, c) {
                return null != a && "" != a ? a : void (b.tdCls = "yellow-cell");
            }
        }, {
            id: a.id + "buttonEditSample",
            text: "Edit",
            width: 80,
            sortable: !1,
            hidden: !a.editEnabled,
            renderer: function(b, c, d, e, f, g) {
                return a.editEnabled ? BUI.getGreenButton("EDIT") : void 0;
            }
        }, {
            id: a.id + "buttonRemoveSample",
            text: "",
            hidden: !a.removeBtnEnabled,
            width: 100,
            sortable: !1,
            renderer: function(b, c, d, e, f, g) {
                return a.removeBtnEnabled ? BUI.getRedButton("REMOVE") : void 0;
            }
        } ],
        viewConfig: {
            preserveScrollOnRefresh: !0,
            stripeRows: !0,
            getRowClass: function(b) {
                var c = a.experiment.getSampleByPosition(b.data.samplePlateId, b.data.rowNumber, b.data.columnNumber);
                return c.length > 1 ? "red-row" : void 0;
            },
            listeners: {
                selectionchange: function(b, c) {
                    a.onClick.notify(record.data);
                },
                cellclick: function(b, c, d, e, f) {
                    b.getGridColumns()[d].getId() == a.id + "buttonEditSample", b.getGridColumns()[d].getId() == a.id + "buttonRemoveSample" && (b.getStore().removeAt(rowIndex), 
                    a.onRemoved.notify());
                }
            }
        }
    }), this.grid;
}, SpecimenGrid.prototype.input = function() {
    return {
        experiment: DATADOC.getExperiment_10(),
        proposal: DATADOC.getProposal_10()
    };
}, SpecimenGrid.prototype.test = function(a) {
    var b = new SpecimenGrid({
        height: 400,
        maxHeight: 400,
        width: 1e3
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = new Experiment(b.input().experiment), d = b.getPanelByExperiment(c);
    d.render(a);
}, StockSolutionGrid.prototype._getColumns = function() {
    var a = this, b = [ {
        header: "Proposal",
        dataIndex: "proposal",
        name: "proposalId",
        flex: 1,
        hidden: !1
    }, {
        header: "Macromolecule",
        dataIndex: "macromolecule",
        id: a.id + "macromolecule",
        type: "string",
        renderer: function(a, b, c) {
            return null != a ? '<span style="color:blue;">' + a + "</span>" : void 0;
        },
        hidden: !1,
        flex: 1
    }, {
        header: "Buffer",
        dataIndex: "buffer",
        name: "buffer",
        hidden: !1,
        renderer: function(a, b, c) {
            return '<span style="color:green;">' + a + "</span>";
        },
        type: "string",
        flex: 1
    }, {
        header: "Acronym",
        dataIndex: "name",
        name: "name",
        flex: 1,
        hidden: !0
    }, {
        header: "Storage Temp. (C)",
        dataIndex: "storageTemperature",
        name: "storageTemperature",
        flex: 1,
        hidden: !1
    }, {
        header: "Volume (&#181l)",
        name: "volume",
        dataIndex: "volume",
        flex: 1,
        hidden: !1
    }, {
        header: "Concentration (mg/ml)",
        dataIndex: "concentration",
        name: "concentration",
        name: "concentration",
        flex: 1
    }, {
        header: "Packed",
        dataIndex: "comments",
        id: a.id + "box",
        type: "string",
        width: 50,
        hidden: !this.isPackedVisible,
        renderer: function(a, b, c) {
            return null != c.raw.boxId ? "<div style='cursor: pointer;'><img height='15px' src='../images/plane.gif'></div>" : void 0;
        }
    }, {
        header: "Comments",
        dataIndex: "comments",
        type: "string",
        flex: 1
    } ];
    return this.btnEditVisible && b.push({
        xtype: "actioncolumn",
        width: 40,
        text: "Edit",
        items: [ {
            icon: "../images/icon/edit.png",
            tooltip: "Edit",
            handler: function(b, c, d) {
                var e = b.getStore().getAt(c);
                a.edit(e.get("stockSolutionId"));
            }
        } ]
    }), this.btnRemoveVisible && b.push({
        id: a.id + "buttonRemove",
        width: 85,
        sortable: !1,
        renderer: function(b, c, d, e, f, g) {
            return a.btnRemoveVisible ? BUI.getRedButton("REMOVE") : void 0;
        }
    }), this.btnUnpackVisible && b.push({
        xtype: "actioncolumn",
        width: 40,
        text: "Unpack",
        items: [ {
            icon: "../images/icon/ic_highlight_remove_black_24dp.png",
            tooltip: "Unpack",
            handler: function(b, c, d) {
                var e = b.getStore().getAt(c).data;
                a.unpack(e);
            }
        } ]
    }), b;
}, StockSolutionGrid.prototype._getTopButtons = function() {
    var a = this, b = [];
    return this.btnAddVisible && b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/add.png",
        text: "Add",
        tooltip: "Will create a new stock solution",
        disabled: !1,
        alwaysEnabled: !0,
        handler: function(b, c) {
            a.edit();
        }
    })), this.btnAddExisting && b.push(Ext.create("Ext.Action", {
        icon: "images/icon/add.png",
        text: "Add Existing",
        tooltip: "Allows to select upacked stock solutions",
        disabled: !1,
        alwaysEnabled: !0,
        handler: function(b, c) {
            var d = new StockSolutionGrid({
                btnAddVisible: !1,
                btnEditVisible: !1,
                btnRemoveVisible: !1,
                btnAddExisting: !1,
                isPackedVisible: !1,
                multiselect: !0
            }), e = Ext.create("Ext.window.Window", {
                title: "Select",
                height: 800,
                width: 900,
                layout: "fit",
                items: [ d.getPanel() ],
                buttons: [ {
                    text: "Pack",
                    handler: function() {
                        d.selectedStockSolutions.length > 0 && a.onPack.notify(d.selectedStockSolutions[0]), 
                        e.close();
                    }
                }, {
                    text: "Cancel",
                    handler: function() {
                        e.close();
                    }
                } ]
            }).show();
            d.load(EXI.proposalManager.getUnpackedStockSolutions());
        }
    })), b;
}, StockSolutionGrid.prototype.load = function(a) {
    for (var b = [], c = 0; c < a.length; c++) {
        var d = a[c];
        null != EXI.proposalManager.getBufferById(d.bufferId) && (d.buffer = EXI.proposalManager.getBufferById(d.bufferId).acronym), 
        d.proposal = EXI.proposalManager.getProposalById(d.proposalId).code + EXI.proposalManager.getProposalById(d.proposalId).number, 
        null != EXI.proposalManager.getMacromoleculeById(d.macromoleculeId) && (d.macromolecule = EXI.proposalManager.getMacromoleculeById(d.macromoleculeId).acronym), 
        b.push(d);
    }
    this.store.loadData(b, !1);
}, StockSolutionGrid.prototype.getPanel = function() {
    return this._renderGrid();
}, StockSolutionGrid.prototype.edit = function(a) {
    var b = this, c = new StockSolutionWindow();
    c.onSaved.attach(function(a, c) {
        b.onSaved.notify(c);
    }), c.draw(EXI.proposalManager.getStockSolutionById(a));
}, StockSolutionGrid.prototype.unpack = function(a) {
    this.onUnpack.notify(a);
}, StockSolutionGrid.prototype._renderGrid = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "proposalId", "name", "stockSolutionId", "macromolecule", "buffer", "storageTemperature", "volume", "concentration", "buffer", "comments" ],
        autoload: !0
    });
    var b = ({
        ftype: "filters",
        local: !0,
        filters: this.filters
    }, null);
    b = this.multiselect ? Ext.create("Ext.selection.CheckboxModel", {
        mode: "SINGLE",
        listeners: {
            selectionchange: function(b, c) {
                a.selectedStockSolutions = [];
                for (var d = 0; d < c.length; d++) a.selectedStockSolutions.push(c[d].data);
            }
        }
    }) : {
        mode: "SINGLE"
    }, this.store.sort("stockSolutionId", "desc"), this.grid = Ext.create("Ext.grid.Panel", {
        margin: 10,
        cls: "defaultGridPanel",
        title: this.title,
        selModel: b,
        store: this.store,
        columns: this._getColumns(),
        viewConfig: {
            stripeRows: !0,
            listeners: {
                itemdblclick: function(b, c, d, e) {
                    a.edit(c.data.stockSolutionId);
                },
                cellclick: function(b, c, d, e, f, g, h, i) {
                    var j = null;
                    b.getGridColumns()[d].getId() == a.id + "box" && (window.location = BUI.getShippingURL(BIOSAXS.proposal.getShipmentByDewarId(e.raw.boxId).shippingId)), 
                    b.getGridColumns()[d].getId() == a.id + "buttonRemove" && (a.grid.setLoading("ISPyB: Removing stock solution"), 
                    j = new BiosaxsDataAdapter(), j.onSuccess.attach(function(b) {
                        a.onProposalChanged.notify(), a.grid.setLoading(!1);
                    }), j.onError.attach(function(b) {
                        a.onProposalChanged.notify(), a.grid.setLoading(!1);
                    }), j.removeStockSolution(e.data.stockSolutionId));
                }
            }
        }
    });
    var c = a._getTopButtons(), d = null;
    return this.grid.getSelectionModel().on({
        selectionchange: function(a, b) {
            if (b.length) for (d = 0; d < c.length; d++) c[d].enable && c[d].enable(); else for (d = 0; d < c.length; d++) 0 == c[d].alwaysEnabled && c[d].disable && c[d].disable();
        }
    }), this.grid;
}, TemplateGrid.prototype.getTbar = function() {
    var a = [];
    return a.push(Ext.create("Ext.Action", {
        icon: "images/icon/add.png",
        text: "Add",
        disabled: !1,
        handler: function(a, b) {
            var c = new WizardWidget({
                windowMode: !0,
                width: 1200
            });
            c.onFinished.attach(function(a, b) {
                var d = new DataAdapter();
                d.onSuccess.attach(function(a, b) {
                    c.window.close(), location.hash = "/experiment/experimentId/" + b.experimentId + "/main";
                }), c.current.setLoading(), d.saveTemplate(b.name, "comments", b.data);
            });
            var d = new ProposalUpdater();
            d.onSuccess.attach(function(a, b) {
                c.draw(this.targetId, new MeasurementCreatorStepWizardForm(ProposalManager.getMacromolecules(), ProposalManager.getBuffers()));
            }), d.get();
        }
    })), a;
}, TemplateGrid.prototype.deselectAll = function() {
    this.grid.getSelectionModel().deselectAll();
}, TemplateGrid.prototype.selectById = function(a) {
    this.grid.getSelectionModel().deselectAll();
    for (var b = 0; b < this.grid.getStore().data.items.length; b++) {
        var c = this.grid.getStore().data.items[b].raw;
        c.macromoleculeId == a && this.grid.getSelectionModel().select(b);
    }
}, TemplateGrid.prototype.load = function(a) {
    this.store.loadData(a, !1);
}, TemplateGrid.prototype.getColumns = function() {
    var a = this, b = [ {
        text: "Name",
        dataIndex: "name",
        id: this.id + "name",
        flex: 1,
        hidden: !1
    }, {
        xtype: "actioncolumn",
        width: 40,
        text: "Edit",
        items: [ {
            icon: "images/icon/edit.png",
            tooltip: "Edit",
            handler: function(a, b, c) {
                location.hash = "/experiment/experimentId/" + a.getStore().getAt(b).get("experimentId") + "/main";
            }
        } ]
    }, {
        id: a.id + "REMOVE",
        width: 100,
        sortable: !1,
        renderer: function(a, b, c, d, e, f) {
            return BUI.getRedButton("REMOVE");
        }
    } ];
    return this.btnRemoveVisible && b.push({
        id: a.id + "buttonRemoveMacromolecule",
        width: 85,
        sortable: !1,
        renderer: function(b, c, d, e, f, g) {
            return a.btnRemoveVisible ? BUI.getRedButton("REMOVE") : null;
        }
    }), b;
}, TemplateGrid.prototype._prepareData = function(a) {
    return a;
}, TemplateGrid.prototype.getPanel = function() {
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "name", "comments" ],
        data: [],
        sorters: [ {
            property: "experimentId",
            direction: "desc"
        } ]
    }), this.grid = Ext.create("Ext.grid.Panel", {
        id: this.id,
        title: "My Experiments",
        store: this.store,
        height: this.height,
        maxHeight: this.maxHeight,
        columns: this.getColumns(),
        width: this.width,
        viewConfig: {
            stripeRows: !0,
            listeners: {
                celldblclick: function(a, b, c, d, e, f, g, h) {
                    location.hash = "/experiment/experimentId/" + d.data.experimentId + "/main";
                },
                cellclick: function(a, b, c, d, e, f, g, h) {}
            }
        }
    }), this.grid.addDocked({
        xtype: "toolbar",
        height: 50,
        items: this.getTbar()
    }), this.grid;
}, TemplateGrid.prototype.input = function() {
    return {
        proposal: DATADOC.getProposal_10()
    };
}, TemplateGrid.prototype.test = function(a) {
    var b = new b({
        width: 800,
        height: 350,
        collapsed: !1,
        tbar: !0
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = b.getPanel(BIOSAXS.proposal.macromolecules);
    c.render(a);
}, VolumeGrid.prototype.load = function(a) {
    this.experiment = a, this.store.loadData(this._prepareData(a));
}, VolumeGrid.prototype.getPanel = function(a, b) {
    var c = this;
    this.store = Ext.create("Ext.data.Store", {
        fields: [ "name", "volume", "macromoleculeId", "bufferId" ]
    }), this.store.sort([ {
        property: "name",
        direction: "ASC"
    } ]);
    var d = Ext.create("Ext.grid.Panel", {
        title: "Sample Requirements and existing stock solutions",
        cls: "border-grid",
        height: 400,
        maxHeight: 400,
        width: 900,
        store: this.store,
        margin: "10 0 50 10",
        viewConfig: {
            stripeRows: !0,
            listeners: {
                cellclick: function(a, b, d, e, f, g, h, i) {
                    if (a.getGridColumns()[d].getId() == c.id + "buttonCreate") {
                        var j = new StockSolutionWindow();
                        j.onSaved.attach(function(a) {});
                        var k = "ST";
                        null != e.data.macromoleculeId && (k = k + "_" + EXI.proposalManager.getMacromoleculeById(e.data.macromoleculeId).acronym), 
                        null != e.data.bufferId && (k = k + "_" + EXI.proposalManager.getBufferById(e.data.bufferId).acronym), 
                        j.draw({
                            concentration: e.data.concentration,
                            macromoleculeId: e.data.macromoleculeId,
                            bufferId: e.data.bufferId,
                            name: k,
                            volume: e.data.volume
                        });
                    }
                    if (a.getGridColumns()[d].getId() == c.id + "buttonStockSolutions") {
                        var l = new StockSolutionGrid({
                            btnAddVisible: !1,
                            btnEditVisible: !1,
                            btnRemoveVisible: !1,
                            btnAddExisting: !1,
                            isPackedVisible: !0,
                            multiselect: !1
                        }), m = Ext.create("Ext.window.Window", {
                            title: "Stock solutions by specimen",
                            height: 400,
                            width: 800,
                            layout: "fit",
                            items: [ l.getPanel() ],
                            buttons: [ {
                                text: "Close",
                                handler: function() {
                                    m.close();
                                }
                            } ]
                        }).show();
                        l.refresh(EXI.proposalManager.getStockSolutionsBySpecimen(e.data.macromoleculeId, e.data.bufferId));
                    }
                }
            }
        },
        columns: [ {
            text: "Specimen",
            dataIndex: "name",
            flex: .5
        }, {
            text: "Estimated Volume",
            dataIndex: "volume",
            tooltip: "Estimation of the maximum volume needed for making this experiment",
            flex: .5,
            editor: {
                allowBlank: !0
            },
            renderer: function(a, b, c) {
                return BUI.formatValuesUnits(c.data.volume, "&#181l", {
                    fontSize: 16,
                    decimals: 2,
                    unitsFontSize: this.unitsFontSize
                });
            }
        }, {
            text: "Stock Solution",
            flex: .5,
            tooltip: "Stock Solutions containing this specimen in this proposal",
            renderer: function(a, b, c, d, e, f) {
                var g = c.data.macromoleculeId, h = c.data.bufferId, i = EXI.proposalManager.getStockSolutionsBySpecimen(g, h);
                return i.length > 0 ? "<div><span style='font-size:18px'>" + i.length + "</span> x<img height='15px' src='images/icon/testtube.png'></div>" : void 0;
            }
        }, {
            id: c.id + "buttonCreate",
            text: "",
            hidden: !0,
            tooltip: "Create a new stock solution for shipping",
            width: 170,
            sortable: !1,
            renderer: function(a, b, c, d, e, f) {
                return BUI.getGreenButton("CREATE STOCK SOLUTION", {
                    width: 160
                });
            }
        } ]
    });
    return d;
}, VolumeGrid.prototype._prepareData = function(a) {
    for (var b = {}, c = 0; c < a.getSamples().length; c++) {
        var d = a.getSamples()[c], e = "";
        null == d.macromoleculeId && (e = a.getBufferById(d.bufferId).acronym, null == b[e] && (b[e] = {
            macromoleculeId: d.macromoleculeId,
            name: e,
            bufferId: d.bufferId,
            volume: 0
        }), b[e].volume = Number(d.volume) + Number(b[e].volume)), null == d.macromolecule3VO && null == d.macromoleculeId || (macromoleculeId = d.macromoleculeId, 
        null == d.macromoleculeId && (d.macromoleculeId = d.macromolecule3VO.macromoleculeId), 
        e = EXI.proposalManager.getMacromoleculeById(d.macromoleculeId).acronym + " + " + a.getBufferById(d.bufferId).acronym, 
        null == b[e] && (b[e] = {
            macromoleculeId: d.macromoleculeId,
            name: e,
            bufferId: d.bufferId,
            volume: 0
        }), b[e].volume = Number(d.volume) + Number(b[e].volume));
    }
    var f = [];
    for (var g in b) f.push(b[g]);
    return f;
}, VolumeGrid.prototype.refresh = function(a) {
    this.experiment = a, this.macromoleculeGrid.getStore().loadData(this._prepareData(this.experiment), !1);
}, VolumeGrid.prototype.render = function() {
    return this.macromoleculeGrid = this.getPanel([], "Estimation of required Volume"), 
    {
        xtype: "container",
        layout: "vbox",
        margin: "0, 0, 0, 5",
        items: [ {
            xtype: "container",
            layout: "hbox",
            margin: "0, 0, 0, 0",
            items: [ this.macromoleculeGrid ]
        } ]
    };
}, VolumeGrid.prototype.input = function(a) {
    return {
        experiment: DATADOC.getExperiment_10()
    };
}, VolumeGrid.prototype.test = function(a) {
    var b = new VolumeGrid();
    BIOSAXS.proposal = new Proposal(new MeasurementGrid().input().proposal);
    var c = b.getPanel(new Experiment(new VolumeGrid().input().experiment));
    Ext.create("Ext.panel.Panel", {
        height: 500,
        width: 1e3,
        renderTo: a,
        items: [ c ]
    });
}, HPLCGraph.prototype.getMenu = function() {
    function a(a, c) {
        c ? b.plots[a.param] = !0 : delete b.plots[a.param], b.reloadData(this.hplcData);
    }
    for (var b = this, c = [], d = 0; d < this.hplcData.length; d++) if (0 != this.hplcData[d].showOnMenu) {
        var e = this.hplcData[d].param, f = "style='padding:0 0px 0 5px;'";
        c.push({
            text: "<table><tr><td>" + BUI.getRectangleColorDIV(this.hplcData[d].color, 10, 10) + "</td><td " + f + "> " + this.hplcData[d].label + "</td></tr></table>",
            id: b.id + e,
            param: e,
            enableToggle: !0,
            scope: this,
            toggleHandler: a,
            pressed: null != b.plots[e]
        });
    }
    return c.push("-"), c.push({
        text: "Scale",
        enableToggle: !0,
        scope: this,
        pressed: this.scaled,
        icon: "../images/icon_graph.png",
        toggleHandler: function(a, c) {
            b.scaled = c, b.reloadData(this.hplcData);
        }
    }), c.push("->"), c.push({
        text: "Save",
        scope: this,
        icon: "images/icon/ic_get_app_black_24dp.png",
        handler: function(a, b) {
            var c = document.createElement("img");
            c.style.display = "block", c.style.width = "200px", c.style.height = "200px", c.setAttribute("src", Dygraph.Export.asCanvas(this.dygraphObject.dygraph).toDataURL()), 
            window.open(Dygraph.Export.asCanvas(this.dygraphObject.dygraph).toDataURL(), "Image", "");
        }
    }), c;
}, HPLCGraph.prototype.scaledData = function(a) {
    for (var b = 0; b < a.length; b++) {
        var c = this.getMaxAndMinValue(a[b]);
        a[b] = this.divideValuesByMax(a[b], c.max), this.ranges[a[b].label] = c;
    }
    return a;
}, HPLCGraph.prototype.divideValuesByMax = function(a, b) {
    for (var c = 0; c < a.data.length; c++) 0 != b && (a.data[c] = Number(a.data[c]) / b, 
    a.std[c] = Number(a.std[c]) / b);
    return a;
}, HPLCGraph.prototype.getMaxAndMinValue = function(a) {
    for (var b = 0, c = a.data[0], d = 0; d < a.data.length; d++) Number(a.data[d]) > b && (b = Number(a.data[d])), 
    Number(a.std[d]) > b && (b = Number(a.std[d])), Number(a.data[d]) < c && (c = Number(a.data[d]));
    return {
        max: Number(b),
        min: Number(c)
    };
}, HPLCGraph.prototype.getPoint = function(a, b) {
    var c = parseFloat(a.data[b]), d = parseFloat(a.std[b]);
    return null == a.fdata ? [ c - d, c, c + d ] : null != a.fstd ? [ a.fstd(c - d), a.fdata(c), a.fstd(c + d) ] : [ a.fdata(c) - d, a.fdata(c), a.fdata(c) + d ];
}, HPLCGraph.prototype.reloadData = function(a) {
    this.panel.setLoading(!1), this.hplcData = a;
    var b = a;
    this.scaled && (b = this.scaledData(JSON.parse(JSON.stringify(a))));
    for (var c = {}, d = [], e = 0, f = 0; f < b[0].data.length - 1; f++) {
        var g = [];
        for (e = 0; e < b.length; e++) null != this.plots ? null != this.plots[b[e].param] && (g.push(this.getPoint(b[e], f)), 
        c[b[e].param] = g.length - 1) : g.push([ b[e].data[f] - b[e].std[f], b[e].data[f], b[e].data[f] + b[e].std[f] ]);
        d.push([]);
        var h = f;
        for (null != this.xParam && (h = parseFloat(b[this.xParam].data[f])), d[d.length - 1].push(h), 
        e = 0; e < b.length; e++) null != this.plots ? null != this.plots[b[e].param] && d[d.length - 1].push(g[c[b[e].param]]) : d[d.length - 1].push(g[e]);
    }
    var i = [], j = [ "" ];
    for (e = 0; e < b.length; e++) null != this.plots ? null != this.plots[b[e].param] && (i.push(b[e].color), 
    j.push(b[e].label)) : d[d.length - 1].push(g[e]);
    this._renderDygraph(d, i, j);
}, HPLCGraph.prototype._renderDygraph = function(a, b, c) {
    var d = this;
    Ext.getCmp(this.id).setWidth(this.panel.getWidth()), this.dygraphObject = new StdDevDyGraph(this.id, {
        width: this.panel.getWidth() - 20,
        height: this.height - 10,
        xlabel: this.xlabel,
        showRangeSelector: this.showRangeSelector,
        interactionModel: this.interactionModel,
        scaled: this.scaled
    }), this.dygraphObject.draw(a, b, c);
    var d = this;
    this.dygraphObject.onZoomX.attach(function(a, b) {
        try {
            d.onZoomX.notify(b);
        } catch (c) {}
    }), this.dygraphObject.onResetZoom.attach(function(a, b) {
        try {
            d.onResetZoom.notify(b);
        } catch (c) {}
    }), this.dygraphObject.dblclick.attach(function(a, b) {
        try {
            d.dblclick.notify(b);
        } catch (c) {}
    });
}, HPLCGraph.prototype.loadData = function(a) {
    var b = this;
    this.reloadData(a), this.panel.addDocked({
        cls: "hplcMenu",
        xtype: "toolbar",
        items: this.getMenu()
    }), 1 == this.bbar && this.panel.addDocked({
        border: 1,
        xtype: "toolbar",
        dock: "bottom",
        cls: "hplcMenu",
        items: [ {
            xtype: "numberfield",
            id: "main_field_start",
            fieldLabel: "Range from",
            width: 200,
            labelWidth: 100,
            value: 0,
            minValue: 0
        }, {
            xtype: "numberfield",
            id: "main_field_end",
            fieldLabel: "to",
            width: 130,
            labelWidth: 30,
            value: 0,
            minValue: 0
        }, {
            xtype: "button",
            text: "Go",
            handler: function() {
                var a = parseFloat(Ext.getCmp("main_field_start").getValue()), c = parseFloat(Ext.getCmp("main_field_end").getValue());
                if (0 > a && (a = 0), 0 > c && (c = 0), a > c) {
                    var d = c;
                    c = a, a = d;
                }
                b.dygraphObject.dygraph.updateOptions({
                    isZoomedIgnoreProgrammaticZoom: !0,
                    dateWindow: [ a, c ]
                });
            }
        }, "->", {
            xtype: "button",
            text: "Clear Selection",
            handler: function() {
                b.onClearSelection.notify();
            }
        } ]
    });
}, HPLCGraph.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        padding: this.plotPanelPadding,
        items: [ {
            html: "",
            id: this.id,
            flex: 1,
            height: this.height
        } ]
    }), this.panel.on("afterrender", function(a) {
        document.getElementById(this.id).setAttribute("style", "border: 1px solid #000000; height:" + (a.getHeight() - 1) + "px;width:" + (a.getWidth() - 50) + "px;");
    }), this.panel;
}, HPLCGraph.prototype.input = function() {
    return DATADOC.getHPLCData();
}, HPLCGraph.prototype.getDataByFrameNumber = function(a) {
    var b = {};
    b.frameNumber = a;
    for (var c in this.hplcData) b[this.hplcData[c].label] = this.hplcData[c].data[a];
    return b;
}, HPLCGraph.prototype.test = function(a) {
    var b = new HPLCGraph({
        title: "I0",
        width: 800,
        height: 400,
        plots: {
            I0: !0,
            Rg: !0,
            Mass: !0
        },
        xlabel: "HPLC Frames",
        scaled: this.scaled,
        interactionModel: {
            dblclick: function(a, b, c) {}
        }
    });
    b.getPanel().render(a), b.loadData(b.input());
}, MergesHPLCGraph.prototype.scaledData = HPLCGraph.prototype.scaledData, MergesHPLCGraph.prototype.divideValuesByMax = HPLCGraph.prototype.divideValuesByMax, 
MergesHPLCGraph.prototype.getMaxAndMinValue = HPLCGraph.prototype.getMaxAndMinValue, 
MergesHPLCGraph.prototype.getPoint = HPLCGraph.prototype.getPoint, MergesHPLCGraph.prototype.reloadData = HPLCGraph.prototype.reloadData, 
MergesHPLCGraph.prototype._renderDygraph = HPLCGraph.prototype._renderDygraph, MergesHPLCGraph.prototype.loadData = HPLCGraph.prototype.loadData, 
MergesHPLCGraph.prototype.getPanel = HPLCGraph.prototype.getPanel, MergesHPLCGraph.prototype.getDataByFrameNumber = HPLCGraph.prototype.getDataByFrameNumber, 
MergesHPLCGraph.prototype.setPeaks = function(a) {
    this.peaks = a, this.peakKeys = [], this.colorPeak = {};
    var b = 1;
    for (var c in this.peaks) if (this.peaks.hasOwnProperty(c)) {
        var d = this.peakColors[b % this.peakColors.length];
        b += 1, this.peakKeys.push(c), this.colorPeak[c] = d;
    }
    this.peakKeys.sort();
}, MergesHPLCGraph.prototype.getMenu = function() {
    function a(a, c) {
        c ? b.plots[a.param] = !0 : delete b.plots[a.param], b.reloadData(b.hplcData);
    }
    var b = this, c = [];
    if (null != this.peaks) {
        for (var d = [], e = 0; e < this.peakKeys.length; e++) {
            var f = this.colorPeak[this.peakKeys[e]];
            d.push({
                text: "<span style='color:" + f + "; font-weight:bold;'>Peak #" + e + " " + this.peakKeys[e].replace("- ", " to #").replace(".0", "").replace(".0", "") + "</span>",
                peakid: this.peakKeys[e],
                checked: !1,
                checkHandler: function(b, c) {
                    var d = new Object();
                    d.param = b.peakid, a(d, c);
                }
            });
        }
        var g = Ext.create("Ext.menu.Menu", {
            id: "mainMenu",
            style: {
                overflow: "visible"
            },
            items: d
        }), h = Ext.create("Ext.toolbar.Toolbar");
        h.add({
            text: "Peaks Avg.",
            menu: g
        }), c.push(h);
    }
    for (var e = 0; e < this.hplcData.length; e++) if (0 != this.hplcData[e].showOnMenu) {
        var i = this.hplcData[e].param, j = "style='padding:0 0px 0 5px;'";
        c.push({
            text: "<table><tr><td>" + BUI.getRectangleColorDIV(this.hplcData[e].color, 10, 10) + "</td><td " + j + "> " + this.hplcData[e].label + "</td></tr></table>",
            id: b.id + i,
            param: i,
            enableToggle: !0,
            scope: this,
            margin: 5,
            toggleHandler: a,
            pressed: null != b.plots[i]
        });
    }
    return c.push("->"), c.push({
        text: "Save",
        scope: this,
        icon: "images/icon/ic_get_app_black_24dp.png",
        handler: function(a, b) {
            var c = document.createElement("img");
            c.style.display = "block", c.style.width = "200px", c.style.height = "200px", c.setAttribute("src", Dygraph.Export.asCanvas(this.dygraphObject.dygraph).toDataURL()), 
            window.open(Dygraph.Export.asCanvas(this.dygraphObject.dygraph).toDataURL(), "Image", "");
        }
    }), c;
}, MergesHPLCGraph.prototype.input = function() {
    return DATADOC.getScatteringHPLCFrameData();
}, MergesHPLCGraph.prototype.test = function(a) {
    var b = new MergesHPLCGraph({
        title: "Scattering",
        width: this.plotWidth,
        height: 500,
        showRangeSelector: !1,
        xParam: 0,
        xlabel: "scattering_I",
        plots: {
            scattering_I: !0,
            subtracted_I: !0,
            buffer_I: !0
        }
    });
    b.getPanel().render(a), b.loadData(b.input());
}, ImageResolutionViewer.prototype.getImagePanel = function() {
    return {
        xtype: "container",
        layout: "vbox",
        items: [ {
            html: '<div style="height:' + (this.canvasHeight + 45) + 'px;background-color: white;position:relative">			<div style="height : ' + this.canvasHeight / this.zoomRatio + "px; width : " + this.canvasWidth / this.zoomRatio + 'px; background-color :white;position:relative;  z-index: 31; right: -10px; top : 40px">' + this.image.getPanel() + '</div> 			<div style=" position:relative;  z-index: 2;  right: 0px; top : -' + this.canvasWidth / this.zoomRatio + 'px">' + this.zoomImage.getPanel() + "</div> 			</div>",
            margin: "-15 0 0 5"
        } ]
    };
}, ImageResolutionViewer.prototype.getPanel = function() {
    return {
        xtype: "container",
        layout: "hbox",
        margin: 10,
        items: [ {
            xtype: "container",
            layout: "vbox",
            width: 600,
            items: [ {
                html: "<div class='key_subgrid'>Double on the thumbnail to zoom IN</div>",
                margin: "5 0 0 20"
            }, {
                html: "<div class='key_subgrid'>Right-click to zoom OUT</div>",
                margin: "5 0 0 20"
            }, this.getImagePanel(), {
                html: this.zoomGrayScalePlot.getPanel(),
                margin: "5 0 0 5"
            }, {
                html: '<div style="width:800px; height:200px;" id="calc"></div>',
                margin: "0 0 0 20"
            } ]
        } ]
    };
}, ImageResolutionViewer.prototype.getSpanTag = function(a) {
    return "<span id=" + this.id + a + "></span>";
}, ImageResolutionViewer.prototype.setSpanTag = function(a, b) {
    document.getElementById(this.id + a).innerHTML = b;
}, ImageResolutionViewer.prototype.displayTable = function(a, b, c, d, e, f, g, h, i, j) {
    document.getElementById("calc").innerHTML = this.makeHTMLTable("Coordinates", null, [ "local coor", "Real Coor", "color", "luminance", "waveLength", "detectorDistance", "Sensitive Center", "Local Center", "real Center", "Real Distance", "Local Distance", "resolution" ], [ [ this.getSpanTag("coordinates"), this.getSpanTag("realcoordinates"), this.getSpanTag("color"), this.getSpanTag("luminance"), this.getSpanTag("wavelength"), this.getSpanTag("detectordistance"), this.getSpanTag("centerbeam"), this.getSpanTag("localcenterbeam"), this.getSpanTag("realcenterbeam"), this.getSpanTag("distance"), this.getSpanTag("localdistance"), this.getSpanTag("resolution") ] ], {
        width: this.canvasWidth
    });
}, ImageResolutionViewer.prototype.getLocalCoordinates = function(a, b, c, d) {
    var e = a * this.canvasWidth / c, f = b * this.canvasHeight / d;
    return {
        x: Math.floor(e),
        y: Math.floor(f)
    };
}, ImageResolutionViewer.prototype.load = function(a, b, c, d, e, f) {
    this.detectorResolution = f, this.waveLength = b, this.detectorDistance = c, this.xBeam = d, 
    this.yBeam = e, this.localCenter = this.getLocalCoordinates(d, e, f.sensitiveArea.x, f.sensitiveArea.y), 
    this.image.load(a), this.zoomImage.center = this.localCenter, this.zoomImage.load(a);
}, ImageViewer.prototype.getCanvas = function(a) {
    return document.getElementById(this.id);
}, ImageViewer.prototype.getContext = function(a) {
    return this.getCanvas().getContext("2d");
}, ImageViewer.prototype.getPanel = function() {
    return '<canvas style="border: 1px solid gray;" id="' + this.id + '" width="' + this.width + '" height="' + this.height + '"></canvas>';
}, ImageViewer.prototype.clear = function() {
    this.getContext().clearRect(0, 0, this.getCanvas().width, this.getCanvas().height);
}, ImageViewer.prototype.findPosition = function(a) {
    var b = 0, c = 0;
    if (a.offsetParent) {
        do b += a.offsetLeft, c += a.offsetTop; while (a = a.offsetParent);
        return {
            x: b,
            y: c
        };
    }
}, ImageViewer.prototype.rgbToHex = function(a, b, c) {
    if (a > 255 || b > 255 || c > 255) throw "Invalid color component";
    return (a << 16 | b << 8 | c).toString(16);
}, ImageViewer.prototype.getMatrix = function() {
    for (var a = [], b = 0; b < this.width; b++) {
        a[b] = new Array(Math.floor(this.height));
        for (var c = 0; c < this.height; c++) a[b][c] = this.getColorLuminance(b, c);
    }
    return a;
}, ImageViewer.prototype.getCoordinatesInfo = function(a, b) {
    var c = this.findPosition(a), d = b.pageX - c.x, e = b.pageY - c.y, f = this.getContext("2d").getImageData(d, e, 1, 1).data, g = "#" + ("000000" + this.rgbToHex(f[0], f[1], f[2])).slice(-6);
    return {
        x: d / this.zoom - this.offsetX,
        y: e / this.zoom - this.offsetY,
        localX: d,
        localY: e,
        offsetX: this.offsetX,
        offsetY: this.offsetY,
        zoom: this.zoom,
        color: g
    };
}, ImageViewer.prototype.getColorLuminance = function(a, b) {
    var c = this.getContext("2d").getImageData((this.offsetX + a) * this.zoom, b * this.zoom, 1, 1).data;
    return Math.floor(.2126 * c[0] + .7152 * c[1] + .0722 * c[2]);
}, ImageViewer.prototype.getAllPoints = function(a, b, c, d) {
    if (a > c) {
        var e = a, f = b;
        a = c, c = e, b = d, d = f;
    }
    for (var g = [], h = (d - b) / (c - a), i = c - a, j = 0; i > j; j++) {
        var k = a + j, l = b + h * j;
        g.push({
            x: k,
            y: l
        });
    }
    return g;
}, ImageViewer.prototype.drawLine = function(a, b, c, d, e) {
    this.drawPoints(this.getAllPoints(a, b, c, d), e);
}, ImageViewer.prototype.drawPoints = function(a, b) {
    var c = this;
    this.clear(), this.reload(function() {
        for (var d = c.getContext(), e = 0; e < a.length; e++) {
            var f = (a[e].x + c.offsetX) * c.zoom, g = a[e].y * c.zoom;
            d.beginPath(), d.arc(f, g, 1, 0, 2 * Math.PI, !1), d.fillStyle = b, d.fill(), d.lineWidth = 1, 
            d.strokeStyle = b, d.stroke();
        }
    });
}, ImageViewer.prototype.drawPoint = function(a, b, c) {
    var d = this;
    this.clear(), a = (d.offsetX + a) * d.zoom, b *= d.zoom, this.reload(function() {
        var e = d.getContext();
        e.beginPath(), e.arc(a, b, 2, 0, 2 * Math.PI, !1), e.fillStyle = c, e.fill(), e.lineWidth = 1, 
        e.strokeStyle = c, e.stroke();
    });
}, ImageViewer.prototype.drawCross = function(a, b, c, d) {
    var e = this.getContext();
    e.strokeStyle = d, e.beginPath(), e.moveTo(a, b - 10), e.lineTo(a, b + 10), e.stroke(), 
    e.moveTo(a - 10, b), e.lineTo(a + 10, b), e.stroke();
}, ImageViewer.prototype.drawCenterBeam = function(a) {
    var b = this.center.x * this.zoom + this.offsetX, c = this.center.y * this.zoom + this.offsetY;
    this.drawCross(b, c, 10, "#990099");
}, ImageViewer.prototype.reload = function(a) {
    var b = this, c = new Image();
    c.crossOrigin = "Anonymous", c.src = this.url, this.clear(), c.onload = function() {
        var d = b.getContext();
        d.drawImage(c, b.offsetX, b.offsetY, b.width * b.zoom, b.height * b.zoom), a(), 
        null != b.center && b.drawCenterBeam();
    };
}, ImageViewer.prototype.luminance = function(a) {
    var b = this;
    if (b.selectedPoints.push({
        x: a.x,
        y: a.y + this.offsetY
    }), 2 == b.selectedPoints.length) {
        console.log(b.selectedPoints);
        for (var c = b.getAllPoints(b.selectedPoints[0].x, b.selectedPoints[0].y, b.selectedPoints[1].x, b.selectedPoints[1].y), d = [], e = 0; e < c.length; e++) d.push({
            luminance: b.getColorLuminance(c[e].x, c[e].y),
            x: c[e].x,
            y: c[e].y
        });
        b.drawLine(b.selectedPoints[0].x, b.selectedPoints[0].y, b.selectedPoints[1].x, b.selectedPoints[1].y, "#ACFA58"), 
        b.onLuminanceCalculated.notify(d);
    }
    1 == b.selectedPoints.length && b.drawPoint(b.selectedPoints[0].x, b.selectedPoints[0].y, "#ACFA58");
}, ImageViewer.prototype.redraw = function(a, b, c) {
    this.zoom = a, this.offsetX = b, this.offsetY = c, this.reload(function() {});
}, ImageViewer.prototype.applyZoomOnPoint = function(a, b) {
    this.zoom = 5;
    var c = a.localX * this.zoom, d = a.localY * this.zoom, e = -(c - a.x), f = -(d - a.y), g = e - (a.x - a.localX), h = f - (a.y - a.localY);
    this.redraw(this.zoom, g, h);
}, ImageViewer.prototype.load = function(a) {
    var b = this;
    null == this.url && ($("#" + b.id).mousemove(function(a) {
        if (b.onMouseOver.notify(b.getCoordinatesInfo(this, a)), b._isDragging) {
            var c = b.findPosition(this), d = a.pageX - c.x;
            a.pageY - c.y;
            b.offsetX = b.offsetX + (d - b._draggingPoint.x), b.reload(function() {});
        }
    }), $("#" + b.id).click(function(a) {
        b.onMouseClick.notify(b.getCoordinatesInfo(this, a)), b.allowLuminance && (b.selectedPoints.length < 2 ? b.luminance(b.getCoordinatesInfo(this, a)) : (b.selectedPoints = [], 
        b.redraw(b.zoom, b.offsetX, b.offsetY), b.onLuminanceReset.notify()));
    }), $("#" + b.id).dblclick(function(a) {
        b.onDblClick.notify(b.getCoordinatesInfo(this, a));
    }), $("#" + b.id).mouseup(function(a) {
        var c = b._isDragging;
        b._isDragging = !1, c || console.log("dragging"), b.onMouseUp.notify(b.getCoordinatesInfo(this, a));
    }), $("#" + b.id).mousedown(function(a) {
        if (2 == a.button) document.oncontextmenu = function() {
            return !1;
        }, b.onMouseRightDown.notify(b.getCoordinatesInfo(this, a)); else {
            b._isDragging = !0;
            var c = b.findPosition(this);
            b._draggingPoint = {
                x: a.pageX - c.x,
                y: a.pageY - c.y
            }, b.onMouseDown.notify(b.getCoordinatesInfo(this, a));
        }
    })), this.url = a;
    var c = new Image();
    c.crossOrigin = "Anonymous", c.src = a, this.clear(), c.onload = function() {
        var a = b.getContext();
        a.drawImage(c, b.offsetX, b.offsetY, b.width * b.zoom, b.height * b.zoom), null != b.center && b.drawCenterBeam(), 
        b.onRendered.notify();
    };
}, AutoProcIntegrationAttachmentGrid.prototype.load = function(a) {
    for (var b = [], c = 0; c < a.details.autoProcProgAttachmentsWebBeans.length; c++) {
        var d = a.details.autoProcProgAttachmentsWebBeans[c];
        null != a.details.autoProcProgAttachmentsWebBeans[c].ispybAutoProcAttachment && (d.fileName = a.details.autoProcProgAttachmentsWebBeans[c].ispybAutoProcAttachment.fileName, 
        d.step = a.details.autoProcProgAttachmentsWebBeans[c].ispybAutoProcAttachment.step, 
        d.category = a.details.autoProcProgAttachmentsWebBeans[c].ispybAutoProcAttachment.fileCategory, 
        d.description = a.details.autoProcProgAttachmentsWebBeans[c].ispybAutoProcAttachment.description, 
        d.autoProcProgramAttachmentId = a.details.autoProcProgAttachmentsWebBeans[c].autoProcProgramAttachmentId), 
        b.push(d);
    }
    this.store.loadData(b, !1);
}, AutoProcIntegrationAttachmentGrid.prototype.selectRowByAutoProcIntegrationId = function(a) {
    this.panel.getSelectionModel().select(this.store.find("autoProcIntegrationId", a));
}, AutoProcIntegrationAttachmentGrid.prototype.getPanel = function() {
    this.store = Ext.create("Ext.data.Store", {
        groupField: "category",
        fields: [ "fileName", "step", "category", "description", "autoProcProgramAttachmentId" ]
    });
    var a = Ext.create("Ext.grid.feature.Grouping", {});
    return this.panel = Ext.create("Ext.grid.Panel", {
        title: "Auto-Processing Files",
        store: this.store,
        cls: "border-grid",
        margin: this.margin,
        features: [ a ],
        overflow: "auto",
        maxHeight: this.maxHeight,
        minHeight: this.maxHeight,
        columns: [ {
            text: "fileName",
            dataIndex: "fileName",
            flex: 1,
            renderer: function(a, b, c, d, e) {
                return -1 != c.data.fileName.indexOf("XSCALE") ? "<span style='color:green; font-weight: bold;'>" + c.data.fileName + "</span>" : c.data.fileName;
            }
        }, {
            text: "autoProcProgramAttachmentId",
            dataIndex: "autoProcProgramAttachmentId",
            hidden: !0,
            flex: .5
        }, {
            text: "step",
            dataIndex: "step",
            flex: .2
        }, {
            text: "category",
            dataIndex: "category",
            flex: .3
        }, {
            text: "description",
            dataIndex: "description",
            flex: 1
        }, {
            xtype: "actioncolumn",
            flex: .3,
            text: "Download",
            items: [ {
                icon: "../images/icon/ic_get_app_black_24dp.png",
                tooltip: "Download",
                handler: function(a, b, c) {
                    console.log(a.store.getAt(b).data.autoProcProgramAttachmentId), window.open(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getDownloadAttachmentUrl(a.store.getAt(b).data.autoProcProgramAttachmentId));
                }
            } ]
        } ],
        flex: 1,
        viewConfig: {
            stripeRows: !0,
            listeners: {}
        }
    }), this.panel;
}, AutoProcIntegrationGrid.prototype.load = function(a) {
    for (var b = [], c = 0; c < a.length; c++) {
        var d = a[c].autoproc;
        d.anomalous = a[c].autointegration.anomalous, d.autoProcIntegrationId = a[c].autointegration.autoProcIntegrationId, 
        d.processingPrograms = a[c].autoprocprogram.processingPrograms, b.push(d);
    }
    this.store.loadData(b, !1);
}, AutoProcIntegrationGrid.prototype.selectRowByAutoProcIntegrationId = function(a) {
    this.preventSelection = !0, this.panel.getSelectionModel().select(this.store.find("autoProcIntegrationId", a));
}, AutoProcIntegrationGrid.prototype.getPanel = function() {
    var a = this;
    this.store = Ext.create("Ext.data.Store", {
        groupField: "anomalous",
        sorters: "spaceGroup",
        fields: [ "autoProcId", "refinedCellA", "autoProcIntegrationId", "refinedCellAlpha", "refinedCellB", "refinedCellBeta", "refinedCellC", "refinedCellGamma", "anomalous", "processingPrograms", "spaceGroup" ]
    });
    var b = Ext.create("Ext.grid.feature.Grouping", {}), c = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        mode: "multi",
        listeners: {
            selectionchange: function(b, c) {
                var d = [];
                if (null != c) {
                    for (var e = 0; e < c.length; e++) d.push(c[e].data);
                    a.preventSelection ? a.preventSelection = !1 : a.onSelected.notify(d);
                }
            }
        }
    });
    return this.panel = Ext.create("Ext.grid.Panel", {
        title: "Auto-Processing Integration",
        store: this.store,
        selModel: c,
        cls: "border-grid",
        maxHeight: this.maxHeight,
        minHeight: this.maxHeight,
        features: [ b ],
        columns: [ {
            text: "id",
            dataIndex: "autoProcId",
            flex: 1,
            hidden: !0
        }, {
            text: "Method",
            dataIndex: "processingPrograms",
            flex: 1
        }, {
            text: "anomalous",
            dataIndex: "anomalous",
            flex: 1,
            hidden: !0
        }, {
            text: "spaceGroup",
            dataIndex: "spaceGroup",
            flex: 1
        }, {
            text: "cell a",
            dataIndex: "refinedCellA",
            flex: 1
        }, {
            text: "cell b",
            dataIndex: "refinedCellB",
            flex: 1
        }, {
            text: "cell c",
            dataIndex: "refinedCellC",
            flex: 1
        }, {
            text: "cell alpha",
            dataIndex: "refinedCellAlpha",
            flex: 1
        }, {
            text: "cell beta",
            dataIndex: "refinedCellBeta",
            flex: 1
        }, {
            text: "cell gamma",
            dataIndex: "refinedCellGamma",
            flex: 1
        }, {
            text: "Anomalous",
            dataIndex: "AutoProcIntegration_anomalous",
            flex: 1,
            hidden: !0
        } ],
        flex: 1,
        viewConfig: {
            stripeRows: !0,
            listeners: {}
        }
    }), this.panel;
}, CustomSectionDataCollection.prototype.getMeshScan = function(a) {
    var b = [], c = [], d = [];
    if (null != a.WorkflowStep_workflowStepType) {
        b = a.WorkflowStep_workflowStepType.split(","), c = a.WorkflowStep_status.split(","), 
        d = a.WorkflowStep_workflowStepId.split(",");
        for (var e = 0; e < b.length; e++) {
            var f = {
                status: c[e],
                name: b[e],
                workflowStepId: d[e],
                img: EXI.getDataAdapter().mx.workflowStepDataAdapter.getImageByWorkflowStepId(d[e])
            };
            if ("Mesh" == f.name) return f;
        }
    }
}, CustomSectionDataCollection.prototype.getHTML = function(a) {
    var b = "", c = [];
    try {
        var d = this.getMeshScan(a);
        null != d && c.push({
            img: EXI.getDataAdapter().mx.workflowStepDataAdapter.getImageByWorkflowStepId(d.workflowStepId),
            title: d.name
        });
    } catch (e) {
        b += "There was an error parsing the mesh";
    }
    try {
        null != a.DataCollection_bestWilsonPlotPath && c.push({
            img: EXI.getDataAdapter().mx.dataCollection.getWilsonPlot(a.DataCollection_dataCollectionId),
            title: "Wilson"
        });
    } catch (e) {
        b += "There was an error parsing the wilson";
    }
    return dust.render("customsectiondatacollection", c, function(a, c) {
        b += c;
    }), b;
}, DataCollectionGroupFactory.prototype.load = function(a) {
    this.dataCollectionPanel.load(a);
}, DataCollectionGroupFactory.prototype.getPanel = function(a) {
    return this.dataCollectionPanel.getPanel();
}, GenericDataCollectionPanel.prototype.load = function(a) {}, GenericDataCollectionPanel.prototype.getColumns = function() {
    return [];
}, GenericDataCollectionPanel.prototype.getPanel = function(a) {
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "dataCollectionGroup" ]
    }), this.panel = Ext.create("Ext.grid.Panel", {
        border: 1,
        store: this.store,
        columns: this.getColumns(),
        features: [ {
            id: "dataCollectionGroup",
            ftype: "groupingsummary",
            groupHeaderTpl: "{dataCollectionGroup}",
            hideGroupedHeader: !0,
            enableGroupingMenu: !1
        } ],
        viewConfig: {
            enableTextSelection: !0
        }
    }), this.panel;
}, GenericDataCollectionPanel.prototype._getHTMLZoomImage = function(a, b, c) {
    var d = "#/mx/datacollection/" + b + "/image/" + c + "/main";
    return "<a href=" + d + '><img class="lazy"  data-src=' + a + " src=" + a + "></a>";
}, GenericDataCollectionPanel.prototype._getHTMLImage = function(a) {
    return '<img class="smalllazy" onclick="myFunction()"  data-src=' + a + " src=" + a + ">";
}, GenericDataCollectionPanel.prototype.getHTMLTable = function(a) {
    for (var b = document.createElement("table"), c = 0; c < a.length; c++) {
        var d = document.createElement("tr"), e = document.createElement("td");
        e.appendChild(document.createTextNode(a[c].key)), null == a[c].value && e.setAttribute("class", "summary_datacollection_null_parameter"), 
        null != a[c].value && e.setAttribute("class", "summary_datacollection_parameter_name");
        var f = document.createElement("td");
        null != a[c].value && (f.appendChild(document.createTextNode(a[c].value)), f.setAttribute("class", "summary_datacollection_parameter"));
        var g = document.createElement("td");
        null != a[c].units && (g.appendChild(document.createTextNode(a[c].units)), g.setAttribute("class", "summary_datacollection_parameter")), 
        d.appendChild(e), d.appendChild(f), d.appendChild(g), b.appendChild(d);
    }
    return "<table>" + b.innerHTML + "</table>";
}, GenericDataCollectionPanel.prototype.getColumns = function() {
    var a = this, b = [ {
        header: "",
        dataIndex: "DataCollection_imagePrefix",
        width: 310,
        renderer: function(b, c, d) {
            return console.log(EXI.getDataAdapter().mx.dataCollection.getThumbNailById(d.data.lastImageId)), 
            a._getHTMLZoomImage(EXI.getDataAdapter().mx.dataCollection.getThumbNailById(d.data.lastImageId), d.data.DataCollection_dataCollectionId, d.data.lastImageId);
        }
    }, {
        header: "DataCollection",
        dataIndex: "dataCollectionGroup",
        name: "dataCollectionGroup",
        flex: 1,
        renderer: function(b, c, d) {
            return a.getHTMLTable([ {
                key: "Workflow",
                value: d.data.Workflow_workflowType
            }, {
                key: "Type ",
                value: d.data.DataCollectionGroup_experimentType
            }, {
                key: "Sample Name",
                value: d.data.BLSample_name
            }, {
                key: "Protein",
                value: d.data.Protein_acronym
            }, {
                key: "Images",
                value: d.data.DataCollection_numberOfImages
            }, {
                key: "Prefix",
                value: d.data.DataCollection_imagePrefix
            }, {
                key: "Start",
                value: d.data.DataCollectionGroup_startTime
            } ]);
        }
    }, {
        header: "Acquisition",
        dataIndex: "dataCollectionGroup",
        name: "dataCollectionGroup",
        flex: 1,
        renderer: function(b, c, d) {
            return a.getHTMLTable([ {
                key: "Resolution",
                value: d.data.DataCollection_resolution,
                units: "Å"
            }, {
                key: "Wavelength",
                value: d.data.DataCollection_wavelength
            }, {
                key: "Flux ",
                value: Number(d.data.DataCollection_flux).toExponential(),
                units: "ph/sec"
            }, {
                key: "Flux End",
                value: Number(d.data.DataCollection_flux_end).toExponential(),
                units: "ph/sec"
            }, {
                key: "Φ",
                value: d.data.DataCollection_phiStart
            }, {
                key: "Κ",
                value: d.data.DataCollection_kappaStart
            }, {
                key: "Ω",
                value: d.data.DataCollection_omegaStart
            }, {
                key: "Total Exp. Time",
                value: d.data.DataCollection_numberOfImages * d.data.DataCollection_exposureTime,
                units: "s"
            } ]);
        }
    }, {
        header: "Online Data Analysis",
        dataIndex: "dataCollectionGroup",
        name: "dataCollectionGroup",
        flex: 1,
        renderer: function(a, b, c) {
            return new ResultSectionDataCollection().getHTML(c.data);
        }
    }, {
        header: "Workflow",
        dataIndex: "dataCollectionGroup",
        name: "dataCollectionGroup",
        flex: 1,
        renderer: function(a, b, c) {
            return new WorkflowSectionDataCollection().getHTML(c.data);
        }
    }, {
        header: "",
        dataIndex: "dataCollectionGroup",
        name: "dataCollectionGroup",
        width: 160,
        renderer: function(a, b, c) {
            return new CustomSectionDataCollection().getHTML(c.data);
        }
    }, {
        header: "Crystal Snapshot",
        dataIndex: "DataCollection_imagePrefix",
        width: 310,
        renderer: function(b, c, d) {
            var e = "<table>", f = a._getHTMLImage(EXI.getDataAdapter().mx.dataCollection.getCrystalSnapshotByDataCollectionId(d.data.DataCollection_dataCollectionId, 1)), g = a._getHTMLImage(EXI.getDataAdapter().mx.dataCollection.getCrystalSnapshotByDataCollectionId(d.data.DataCollection_dataCollectionId, 2)), h = a._getHTMLImage(EXI.getDataAdapter().mx.dataCollection.getCrystalSnapshotByDataCollectionId(d.data.DataCollection_dataCollectionId, 3)), i = a._getHTMLImage(EXI.getDataAdapter().mx.dataCollection.getCrystalSnapshotByDataCollectionId(d.data.DataCollection_dataCollectionId, 4));
            return e = e + "<tr><td>" + f + "</td><td>" + g + "</td><tr>", e = e + "<tr><td>" + h + "</td><td>" + i + "</td><tr>", 
            e + "</table>";
        }
    } ];
    return b;
}, GenericDataCollectionPanel.prototype.load = function(a) {
    a.reverse(), this.store.loadData(a);
}, ResultSectionDataCollection.prototype.getIconTable = function(a) {
    for (var b = document.createElement("table"), c = 0; c < a.length; c++) {
        var d = document.createElement("tr"), e = document.createElement("td"), f = document.createElement("div");
        e.setAttribute("class", a[c].iconClass), e.appendChild(f);
        var g = document.createElement("td");
        if (null != a[c].value) {
            var h = document.createElement("span");
            h.innerHTML = a[c].value, g.appendChild(h), g.setAttribute("class", "summary_highlighted_datacollection_parameter");
        }
        d.appendChild(e), d.appendChild(g), b.appendChild(d);
    }
    return "<table>" + b.innerHTML + "</table>";
}, ResultSectionDataCollection.prototype._parseAutoprocResults = function(a, b) {
    var c = {};
    if (null != a) {
        a = a.split(","), b = b.split(",");
        for (var d = 0; d < a.length; d++) {
            var e = a[d].trim();
            null == c[e] && (c[e] = {}, c[e].run = 0, c[e].success = 0), c[e].run = c[e].run + 1, 
            c[e].success = c[e].success + 1;
        }
    }
    return c;
}, ResultSectionDataCollection.prototype.getAutoprocessingHTML = function(a) {
    var b = this._parseAutoprocResults(a.processingPrograms, a.processingStatus), c = [], d = "summary_datacollection_noFound";
    for (var e in b) {
        var f = e;
        result = b[e], null != result.run && (d = result.run > 0 ? "summary_datacollection_success" : "summary_datacollection_failed"), 
        c.push({
            iconClass: d,
            value: "<a class='result-autoprocessing-anchor' href='#/autoprocintegration/datacollection/" + a.DataCollection_dataCollectionId + "/main'>" + f.toUpperCase() + "</a>",
            runCount: result.run
        });
    }
    return 0 == c.length && c.push({
        iconClass: "summary_datacollection_noFound",
        value: "No autoprocessing"
    }), this.getIconTable(c);
}, ResultSectionDataCollection.prototype.getHTMLTable = function(a) {
    for (var b = document.createElement("table"), c = 0; c < a.length; c++) {
        var d = document.createElement("tr"), e = document.createElement("td");
        e.appendChild(document.createTextNode(a[c].key)), null == a[c].value && e.setAttribute("class", "summary_datacollection_null_parameter"), 
        null != a[c].value && e.setAttribute("class", "summary_datacollection_parameter_name");
        var f = document.createElement("td");
        null != a[c].value && (f.appendChild(document.createTextNode(a[c].value)), f.setAttribute("class", "summary_datacollection_parameter"));
        var g = document.createElement("td");
        null != a[c].units && (g.appendChild(document.createTextNode(a[c].units)), g.setAttribute("class", "summary_datacollection_parameter")), 
        d.appendChild(e), d.appendChild(f), d.appendChild(g), b.appendChild(d);
    }
    return "<table>" + b.innerHTML + "</table>";
}, ResultSectionDataCollection.prototype.getScreeningHTML = function(a) {
    var b = "";
    return null == a.Screening_screeningId ? this.getIconTable([ {
        iconClass: "summary_datacollection_noFound",
        value: "No Indexing"
    }, {
        iconClass: "summary_datacollection_noFound",
        value: "No Strategy"
    } ]) : (a.ScreeningOutput_indexingSuccess ? (b += this.getIconTable([ {
        iconClass: "summary_datacollection_success",
        value: "Indexing"
    } ]), b += this.getHTMLTable([ {
        key: "Mosaicity",
        value: a.ScreeningOutput_mosaicity,
        units: "º"
    } ])) : b += this.getIconTable([ {
        iconClass: "summary_datacollection_failed",
        value: "Indexing"
    } ]), a.ScreeningOutput_strategySuccess ? (b += this.getIconTable([ {
        iconClass: "summary_datacollection_success",
        value: "Strategy"
    } ]), b += this.getHTMLTable([ {
        key: "Ranking Resolution",
        value: a.ScreeningOutput_rankingResolution,
        units: "Å"
    } ])) : b += this.getIconTable([ {
        iconClass: "summary_datacollection_failed",
        value: "Strategy"
    } ]), a.ScreeningOutputLattice_spaceGroup && (b += this.getHTMLTable([ {
        key: "Space Group",
        value: a.ScreeningOutputLattice_spaceGroup
    }, {
        key: "Unit cell",
        value: ""
    }, {
        key: "a,b,c",
        value: a.ScreeningOutputLattice_unitCell_a + ", " + a.ScreeningOutputLattice_unitCell_b + ", " + a.ScreeningOutputLattice_unitCell_c
    }, {
        key: "α β γ",
        value: a.ScreeningOutputLattice_unitCell_alpha + ", " + a.ScreeningOutputLattice_unitCell_beta + ", " + a.ScreeningOutputLattice_unitCell_gamma
    } ])), b);
}, ResultSectionDataCollection.prototype._getAutoprocResults = function(a) {
    var b = a.processingPrograms, c = a.processingStatus, d = {};
    if (null != b) {
        b = b.split(","), c = c.split(",");
        for (var e = 0; e < b.length; e++) {
            var f = b[e].trim();
            null == d[f] && (d[f] = {}, d[f].run = 0, d[f].success = 0), d[f].run = d[f].run + 1, 
            1 == c[e] && (d[f].success = d[f].success + 1);
        }
    }
    var g = [];
    for (var h in d) {
        var c = "Failure";
        d[h].success > 0 && (c = "Success"), g.push({
            name: h,
            count: d[h].run,
            success: d[h].success > 0,
            status: c,
            url: "#/autoprocintegration/datacollection/" + a.DataCollection_dataCollectionId + "/main"
        });
    }
    return g;
}, ResultSectionDataCollection.prototype.getHTML = function(a) {
    var b = this.getAutoprocessingHTML(a);
    return b += "<br />", b += this.getScreeningHTML(a), b += "<br />", b += this.getPhasingHTML(a);
}, ResultSectionDataCollection.prototype.getPhasingHTML = function(a) {
    var b = "";
    if (null != a) {
        if (null != a.Phasing_phasingStepType) {
            for (var c = a.Phasing_phasingStepType.split(","), d = [], e = 0; e < c.length; e++) d.push({
                iconClass: "summary_datacollection_success",
                value: c[e]
            });
            b += this.getIconTable(d);
        } else b += this.getIconTable([ {
            iconClass: "summary_datacollection_noFound",
            value: "Phasing"
        } ]);
        null != a.Phasing_spaceGroup && (b += this.getHTMLTable([ {
            key: "Space Groups",
            value: a.Phasing_spaceGroup
        } ]));
    }
    return b;
}, WorkflowSectionDataCollection.prototype.parseWorkflow = function(a) {
    var b = [], c = [], d = [];
    if (null != a.WorkflowStep_workflowStepType) {
        b = a.WorkflowStep_workflowStepType.split(","), c = a.WorkflowStep_status.split(","), 
        d = a.WorkflowStep_workflowStepId.split(",");
        for (var e = null, f = [], g = 0; g < b.length; g++) {
            var h = {
                status: c[g],
                name: b[g],
                workflowStepId: d[g],
                workflowStepIds: d,
                img: EXI.getDataAdapter().mx.workflowStepDataAdapter.getImageByWorkflowStepId(d[g])
            };
            e != b[g] ? f.push([ h ]) : f[f.length - 1].push(h), e = b[g];
        }
    }
    return f;
}, WorkflowSectionDataCollection.prototype.getWorkflowStepHTML = function(a) {
    var b = [], c = "";
    return a.WorkflowStep_workflowStepType && (b = this.parseWorkflow(a)), dust.render("workflowstepsection", b, function(a, b) {
        c = b;
    }), c = c + "<br /><a  href='#/mx/workflow/step/" + a.WorkflowStep_workflowStepId + "/main'>See all</a>";
}, WorkflowSectionDataCollection.prototype.getHTML = function(a) {
    var b = this.getWorkflowStepHTML(a);
    return b;
}, DataCollectionMxGrid.prototype.setArgs = function(a) {
    null != a && (null != a.height && (this.height = a.height), null != a.contextPath && (this.contextPath = a.contextPath), 
    null != a.title && (this.title = a.title), null != a.listOfCrystalClass && (this.listOfCrystalClass = a.listOfCrystalClass), 
    null != a.contextPath && (this.contextPath = a.contextPath), null != a.displayLastCollect && (this.displayLastCollect = a.displayLastCollect), 
    null != a.isManager && (this.isManager = a.isManager), null != a.pagingMode && (this.pagingMode = a.pagingMode), 
    null != a.isIndustrial && (this.isIndustrial = a.isIndustrial), null != a.groupFieldDefault && (this.groupFieldDefault = a.groupFieldDefault), 
    null != a.iSigmaCutoff && (this.iSigmaCutoff = a.iSigmaCutoff), null != a.rMergeCutoff && (this.rMergeCutoff = a.rMergeCutoff));
}, DataCollectionMxGrid.prototype._sort = function() {
    this.store.sort("startTime", "DESC");
}, DataCollectionMxGrid.prototype.getGrid = function(a) {
    return this.features = a, this.renderGrid(a);
}, DataCollectionMxGrid.prototype.refresh = function(a) {
    this.features = a.dataCollectionList, this.store.loadData(this.features, !1), this.title = "Last " + this.features.length + " DataCollections", 
    this.grid.setTitle(this.title);
}, DataCollectionMxGrid.prototype.getPanel = function() {
    this.features = [];
    var a = this;
    if (this.features && this.features.length > 0) {
        this.minDCId = this.features[0].dataCollectionId, this.maxDCId = this.features[0].dataCollectionId;
        for (var b = this.features.length, c = 0; b > c; c++) {
            var d = this.features[c].dataCollectionId;
            d > this.maxDCId && (this.maxDCId = d), d < this.minDCId && (this.minDCId = d);
        }
    }
    var e = this._getColumns();
    this.pagingMode ? this.store = Ext.create("Ext.data.Store", {
        model: "DataCollectionModel",
        autoload: !1,
        pageSize: this.pageSize,
        proxy: {
            type: "pagingmemory",
            data: this.features,
            reader: {
                type: "array"
            }
        }
    }) : a.groupFieldDefault ? this.store = Ext.create("Ext.data.Store", {
        model: "DataCollectionModel",
        autoload: !1,
        groupField: a.groupFieldDefault
    }) : this.store = Ext.create("Ext.data.Store", {
        model: "DataCollectionModel",
        autoload: !1
    });
    var f = null, g = "Pagination";
    this.pagingMode && (g = "Remove pagination", f = Ext.create("Ext.PagingToolbar", {
        store: this.store,
        pageSize: this.pageSize,
        displayInfo: !0,
        displayMsg: "Displaying dataCollections {0} - {1} of {2}",
        emptyMsg: "No dataCollection to display",
        listeners: {
            afterrender: function() {
                for (var a = Ext.query("button[data-qtip=Refresh]"), b = 0; b < a.length; b++) a[b].style.display = "none";
            }
        }
    })), this.store.loadData(this.features, !1), this.displayLastCollect ? this.title = "Last " + this.features.length + " DataCollections" : this.title = this.features.length + " DataCollections";
    var h = Ext.create("Ext.grid.plugin.CellEditing", {
        clicksToEdit: 1
    });
    a.groupingFeature = Ext.create("Ext.grid.feature.Grouping", {
        groupHeaderTpl: '{columnName}: {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})',
        hideGroupedHeader: !0,
        startCollapsed: !1,
        id: "dataCollectionGrouping"
    });
    var i = [], j = (i.length, Ext.create("Ext.form.field.ComboBox", {
        displayField: "name",
        width: 100,
        labelWidth: 10,
        queryMode: "local",
        typeAhead: !0,
        forceSelection: !0,
        value: "EDNA",
        listeners: {
            change: function(b, c, d) {
                a.changeRank();
            }
        }
    })), k = [];
    return this.displayLastCollect || (k.push({
        text: "Save",
        tooltip: "Save dataCollections: comments and skip status",
        icon: "../images/save.gif",
        handler: function() {
            a.onSaveButtonClicked.notify({});
        }
    }), k.push({
        text: "Experiment Parameters",
        tooltip: "Expand or Collapse Experiment Parameter",
        icon: "../images/Info_16x16_01.png",
        handler: function() {
            a.hideAndShowExperimentParameter();
        }
    }), k.push({
        text: "Rank",
        tooltip: "Start Sample Ranking",
        handler: function() {
            a.startRank();
        }
    }, j)), this.displayLastCollect && k.push({
        text: g,
        handler: function() {
            a.onPagingMode.notify();
        }
    }), k.push("->"), k.push({
        text: "Expand All",
        handler: function() {
            var b = a.groupingFeature.view.getEl().query(".x-grid-group-body");
            Ext.each(b, function(b) {
                a.groupingFeature.expand(Ext.get(b));
            });
        }
    }, {
        text: "Collapse All",
        handler: function() {
            var b = a.groupingFeature.view.getEl().query(".x-grid-group-body");
            Ext.each(b, function(b) {
                a.groupingFeature.collapse(Ext.get(b));
            });
        }
    }), k.push({
        text: "Clear Grouping",
        iconCls: "icon-clear-group",
        handler: function() {
            a.groupingFeature.disable();
        }
    }), this.grid = Ext.create("Ext.grid.Panel", {
        style: {
            padding: 0
        },
        width: "100%",
        height: "100%",
        model: "DataCollectionModel",
        store: this.store,
        resizable: !0,
        columns: e,
        title: this.title,
        viewConfig: {
            stripeRows: !0,
            enableTextSelection: !0
        },
        selModel: {
            mode: "SINGLE"
        },
        plugins: [ h ],
        features: [ a.groupingFeature ],
        tbar: k,
        bbar: f
    }), this.pagingMode && this.store.load(), this.grid;
}, DataCollectionMxGrid.prototype._getIndex = function(a) {
    for (var b = this.grid.columns, c = b.length, d = 0; c > d; d++) if (b[d].dataIndex == a) return d;
    return -1;
}, DataCollectionMxGrid.prototype._hideCol = function() {
    if (!this.displayLastCollect) {
        var a = this._getIndex("experimentParameters");
        -1 != a && this.grid.columns[a].setVisible(this.hideCol);
        var b = this._getIndex("wavelength"), c = this._getIndex("resolution");
        if (-1 != b && -1 != c) for (var d = c - b + 1, e = 0; d > e; e++) this.grid.columns[b + e].setVisible(!this.hideCol);
    }
}, DataCollectionMxGrid.prototype._getColumns = function() {
    function a(a, b, c) {
        var d = Ext.Date.format(a, "H:i:s"), e = Ext.Date.format(a, "d-m-Y");
        return d + "<br />" + e;
    }
    function b(a, b, c) {
        return '<div style="white-space:normal !important;word-wrap: break-word"><a href="' + r.contextPath + "/user/viewResults.do?reqCode=display&dataCollectionId=" + c.getId() + '">' + a + "</a></div>";
    }
    function c(a, b, c) {
        return c.data.pdbFileName && "" !== c.data.pdbFileName ? (b.tdAttr = 'data-qtip="pdb file uploaded:' + c.data.pdbFileName + '"', 
        "<img src='../images/attach.png' border='0'  />" + a) : a;
    }
    function d(a, b, c) {
        return a ? a.toFixed(2) : "";
    }
    function e(a, b, c) {
        return a ? a.toFixed(3) : "";
    }
    function f(a, b, c, d, e, f, g, h) {
        var i = "";
        return i += "<TABLE cellSpacing=2 cellPadding=0 width=100% border=0>", i += "<TR><TD valign=middle><img src='" + a + "' border=0/></TD><TD class='smallText_black' nowrap>" + b + "</TD></TR>", 
        i += "<TR><TD valign=middle><img src='" + c + "' border=0/></TD><TD class='smallText_black' nowrap>" + d + "</TD></TR>", 
        i += "<TR><TD valign=middle><img src='" + e + "' border=0/></TD><TD class='smallText_black' nowrap>" + f + "</TD></TR>", 
        i += "<TR><TD valign=middle><img src='" + g + "' border=0/></TD><TD class='smallText_black' nowrap>" + h + "</TD></TR>", 
        i += "</TABLE>";
    }
    function g(a, b, c) {
        var d = "../images/Sphere_White_12.png", e = "../images/Sphere_White_12.png", g = "../images/Sphere_White_12.png", h = "../images/Sphere_White_12.png", i = "", j = "", k = "", l = "";
        c.data.hasSnapshot && c.data.hasSnapshot ? (d = "../images/Sphere_Green_12.png", 
        i = "This collection has a crystal snapshot.") : (d = "../images/Sphere_White_12.png", 
        i = "This collection has no crystal snapshot."), c.data.runStatus && (j = c.data.runStatus, 
        e = -1 != c.data.runStatus.search("successful") ? "../images/Sphere_Green_12.png" : -1 != c.data.runStatus.search("failed") ? "../images/Sphere_Red_12.png" : -1 != c.data.runStatus.search("Running") ? "../images/Sphere_Orange_12.png" : "../images/Sphere_Yelow_12.png"), 
        c.data.screeningOutput ? c.data.screeningOutput.indexingSuccess && c.data.screeningOutput.strategySuccess ? 1 == c.data.screeningOutput.indexingSuccess ? 1 == c.data.screeningOutput.strategySuccess ? (g = "../images/Sphere_Green_12.png", 
        k = "Indexing is successful.") : (g = "../images/Sphere_Orange_12.png", k = "Indexing is successful but no strategy.") : (g = "../images/Sphere_Red_12.png", 
        k = "Indexing failed.") : (g = "../images/Sphere_Yelow_12.png", k = "Indexing status unknown.") : (g = "../images/Sphere_White_12.png", 
        k = "Indexing has not been launched."), c.data.autoprocessingStatus ? "Successful" == c.data.autoprocessingStatus ? (h = "../images/Sphere_Green_12.png", 
        l = "Autoprocessing: " + c.data.autoprocessingStep + " Successful") : "Launched" == c.data.autoprocessingStatus ? (h = "../images/Sphere_Orange_12.png", 
        l = "Autoprocessing: " + c.data.autoprocessingStep + " Launched") : "Failed" == c.data.autoprocessingStatus && (h = "../images/Sphere_Red_12.png", 
        l = "Autoprocessing: " + c.data.autoprocessingStep + " Failed") : (h = "../images/Sphere_White_12.png", 
        l = "Autoprocessing status unknown.");
        var m = f(d, i, e, j, g, k, h, l);
        return b.tdAttr = 'data-qtip="' + m + '"', "<img src='" + d + "' border=0><img src='" + e + "' border=0><img src='" + g + "' border=0><img src='" + h + "' border=0>";
    }
    function h(a, b, c) {
        if (c.data.autoProcStatisticsOverall && c.data.autoProcStatisticsOuter && c.data.autoProcStatisticsInner) {
            var d = c.data.autoProcStatisticsInner.completeness, e = c.data.autoProcStatisticsOuter.completeness, f = c.data.autoProcStatisticsOverall.completeness, g = -61, h = 122, i = h / 2 / 100, j = i * d, k = g + j, l = 85 > d ? 4 : 1, m = i * e, n = g + m, o = 85 > e ? 4 : 1, p = i * f, q = g + p, r = 85 > f ? 4 : 1, s = "";
            return 0 === d && 0 === e && 0 === f || (s += '<img " src="../images/percentImage_small.png" title="' + d + '% (inner)" alt="' + d + '% (inner)" class="percentImage' + l + '" style="background-position: ' + k + 'px 0pt; "/><br/>', 
            s += '<img  src="../images/percentImage_small.png" title="' + e + '% (outer)" alt="' + e + '% (outer)" class="percentImage' + o + '" style="background-position: ' + n + 'px 0pt; "/><br/>', 
            s += '<img  src="../images/percentImage_small.png" title="' + f + '% (overall)" alt="' + f + '% (overall)" class="percentImage' + r + '" style="background-position: ' + q + 'px 0pt; "/><br/>'), 
            s;
        }
        return "";
    }
    function i(a, b, c) {
        if (c.data.autoProcStatisticsOverall && c.data.autoProcStatisticsOuter && c.data.autoProcStatisticsInner) {
            var d = (c.data.autoProcStatisticsInner.resolutionLimitLow ? c.data.autoProcStatisticsInner.resolutionLimitLow : "") + " - " + (c.data.autoProcStatisticsInner.resolutionLimitHigh ? c.data.autoProcStatisticsInner.resolutionLimitHigh : "") + "<br />";
            return d += (c.data.autoProcStatisticsOuter.resolutionLimitLow ? c.data.autoProcStatisticsOuter.resolutionLimitLow : "") + " - " + (c.data.autoProcStatisticsOuter.resolutionLimitHigh ? c.data.autoProcStatisticsOuter.resolutionLimitHigh : "") + "<br />", 
            d += (c.data.autoProcStatisticsOverall.resolutionLimitLow ? c.data.autoProcStatisticsOverall.resolutionLimitLow : "") + " - " + (c.data.autoProcStatisticsOverall.resolutionLimitHigh ? c.data.autoProcStatisticsOverall.resolutionLimitHigh : "") + "<br />";
        }
        return c.data.screeningOutput ? Number(c.data.screeningOutput.rankingResolution).toFixed(2) : "";
    }
    function j(a, b, c) {
        if (c.data.autoProcStatisticsOverall && c.data.autoProcStatisticsOuter && c.data.autoProcStatisticsInner) {
            var d = (c.data.autoProcStatisticsInner.rmerge ? Number(c.data.autoProcStatisticsInner.rmerge).toFixed(1) : "") + "<br />";
            return d += (c.data.autoProcStatisticsOuter.rmerge ? Number(c.data.autoProcStatisticsOuter.rmerge).toFixed(1) : "") + "<br />", 
            d += (c.data.autoProcStatisticsOverall.rmerge ? Number(c.data.autoProcStatisticsOverall.rmerge).toFixed(1) : "") + "<br />";
        }
        return "";
    }
    function k(a, b, c) {
        var d = 2;
        if (c.data.autoProc) {
            var e = c.data.autoProc.refinedCellA ? Number(c.data.autoProc.refinedCellA).toFixed(d) + ", " : "";
            return e += c.data.autoProc.refinedCellB ? Number(c.data.autoProc.refinedCellB).toFixed(d) + ", " : "", 
            e += c.data.autoProc.refinedCellC ? Number(c.data.autoProc.refinedCellC).toFixed(d) + "<br />" : "", 
            e += c.data.autoProc.refinedCellAlpha ? Number(c.data.autoProc.refinedCellAlpha).toFixed(d) + ", " : "", 
            e += c.data.autoProc.refinedCellBeta ? Number(c.data.autoProc.refinedCellBeta).toFixed(d) + ", " : "", 
            e += c.data.autoProc.refinedCellGamma ? Number(c.data.autoProc.refinedCellGamma).toFixed(d) : "";
        }
        if (c.data.lattice) {
            var f = c.data.lattice.unitCell_a ? Number(c.data.lattice.unitCell_a).toFixed(d) + ", " : "";
            return f += c.data.lattice.unitCell_b ? Number(c.data.lattice.unitCell_b).toFixed(d) + ", " : "", 
            f += c.data.lattice.unitCell_c ? Number(c.data.lattice.unitCell_c).toFixed(d) + "<br />" : "", 
            f += c.data.lattice.unitCell_alpha ? Number(c.data.lattice.unitCell_alpha).toFixed(d) + ", " : "", 
            f += c.data.lattice.unitCell_beta ? Number(c.data.lattice.unitCell_beta).toFixed(d) + ", " : "", 
            f += c.data.lattice.unitCell_gamma ? Number(c.data.lattice.unitCell_gamma).toFixed(d) : "";
        }
        return "";
    }
    function l(a, b, c) {
        return c.data.autoProc ? c.data.autoProc.spaceGroup : c.data.lattice ? c.data.lattice.spaceGroup : "";
    }
    function m(a) {
        return a ? '<div style="white-space:normal !important;">' + a + "</div>" : "";
    }
    function n(a, b, c) {
        var d = "../images/Info_16x16_01.png", e = "";
        return e += "Wavelength: " + (c.data.wavelength ? c.data.wavelength.toFixed(3) : ""), 
        e += "<br/>", e += "Transmission: " + (c.data.transmission ? c.data.transmission.toFixed(3) : ""), 
        e += "<br/>", e += "ex. Time: " + (c.data.exposureTime ? c.data.exposureTime.toFixed(2) : ""), 
        e += "<br/>", e += "PhiStart: " + (c.data.axisStart ? c.data.axisStart.toFixed(2) : ""), 
        e += "<br/>", e += "PhiRange: " + (c.data.axisRange ? c.data.axisRange.toFixed(2) : ""), 
        e += "<br/>", e += "Detector Resolution: " + (c.data.resolution ? c.data.resolution.toFixed(2) : ""), 
        b.tdAttr = 'data-qtip="' + e + '"', "<img src='" + d + "' border=0>";
    }
    function o(a, b, c) {
        var d = !1, e = !1;
        c.data.screeningOutput ? c.data.screeningOutput.indexingSuccess && c.data.screeningOutput.strategySuccess && 1 == c.data.screeningOutput.indexingSuccess && (d = !0) : c.data.autoProc && (e = !0);
        var f = "";
        return d && (f += "<input checked='" + d + "' name='rankIdList[" + c.data.dataCollectionId + "]' value='on' type='checkbox'>", 
        f += "<img  src='../images/checkbox_grey.png' id='rankIdImage[" + c.data.dataCollectionId + "]' style='display:none'>"), 
        e && (f += "<input checked='" + e + "' name='rankIdAutoProcList[" + c.data.dataCollectionId + "]' value='on' type='checkbox' style='display:none'>", 
        f += "<img  src='../images/checkbox_grey.png' id='rankIdAutoProcImage[" + c.data.dataCollectionId + "]' style='display:none'>"), 
        d || e ? f : "<img src='../images/checkbox_grey.png' border=0>";
    }
    function p(a, b, c) {
        var d = "<input " + (a ? "checked='checked'" : "") + " property='skipIdList[" + c.data.dataCollectionId + "]'  value='1' type='checkbox'>";
        return d;
    }
    function q(a, b, c, d, e, f) {
        return c.get("hasAutoProcAttachment") ? void 0 : "x-hide-display";
    }
    var r = this, s = [];
    return this.displayLastCollect && s.push({
        text: "Beamline<br/>Name",
        dataIndex: "beamLineName",
        flex: .08,
        id: "beamLineName"
    }), this.isManager && s.push({
        text: "Proposal",
        dataIndex: "proposal",
        flex: .1,
        id: "proposal"
    }), this.isManager && s.push({
        text: "User",
        dataIndex: "login",
        flex: .1,
        id: "login"
    }), s.push({
        text: "Image<br/>Prefix",
        dataIndex: "imagePrefix",
        width: 70,
        renderer: b
    }, {
        text: "Run<br/>No",
        dataIndex: "dataCollectionNumber",
        flex: .02
    }, {
        text: "#<br/>images",
        dataIndex: "numberOfImages",
        flex: .05
    }), this.displayLastCollect || (s.push({
        text: "Exp.<br/>Param.<br/>",
        dataIndex: "experimentParameters",
        flex: .05,
        renderer: n
    }), s.push({
        text: "Wavelenth",
        dataIndex: "wavelength",
        flex: .07,
        renderer: e
    }, {
        text: "Transm.",
        dataIndex: "transmission",
        flex: .07,
        renderer: e
    }), this.isIndustrial && s.push({
        text: "Distance",
        dataIndex: "detectorDistance",
        flex: .05,
        renderer: d
    }), s.push({
        text: "Ex.<br>Time",
        dataIndex: "exposureTime",
        flex: .05,
        renderer: d
    }, {
        text: "Phi<br>start",
        dataIndex: "axisStart",
        flex: .05,
        renderer: d
    }, {
        text: "Phi<br>range",
        dataIndex: "axisRange",
        flex: .05,
        renderer: d
    }), this.isIndustrial && s.push({
        text: "Xbeam",
        dataIndex: "xbeam",
        flex: .05,
        renderer: d
    }, {
        text: "Ybeam",
        dataIndex: "ybeam",
        flex: .05,
        renderer: d
    }), s.push({
        text: "Detector<br/>Resolution",
        dataIndex: "resolution",
        flex: .07,
        renderer: d
    })), s.push({
        text: "Status",
        dataIndex: "status",
        flex: .05,
        renderer: g
    }, {
        text: "Space<br/>Group",
        dataIndex: "autoProc",
        width: 70,
        renderer: l
    }, {
        text: "Completeness",
        dataIndex: "completeness",
        width: 70,
        renderer: h
    }, {
        text: "Resolution",
        dataIndex: "resolution",
        width: 80,
        renderer: i
    }, {
        text: "Rsymm<br/><small><i>Inner<br/>Outer<br/>Overall</i></small>",
        dataIndex: "autoProcStatisticsOverall",
        width: 40,
        renderer: j
    }, {
        text: "Unit_cell<br/><small><i>a, b, c<br/>alpha, beta, gamma</i></small>",
        dataIndex: "autoProcStatisticsInner",
        width: 120,
        renderer: k
    }, {
        text: "Exp.<br/>Type",
        dataIndex: "experimentType",
        flex: .05
    }, {
        text: "Protein<br>Acronym",
        dataIndex: "proteinAcronym",
        flex: .05,
        renderer: c
    }, {
        text: "Start<br/>time",
        dataIndex: "startTime",
        width: 75,
        renderer: a
    }), this.displayLastCollect || s.push({
        header: "Sample<br/>Ranking",
        dataIndex: "dataCollectionId",
        flex: .05,
        renderer: o
    }), this.isIndustrial || s.push({
        xtype: "checkcolumn",
        header: "Skip",
        dataIndex: "skipForReport",
        flex: .04,
        renderer: p
    }), this.displayLastCollect || this.isIndustrial ? s.push({
        text: "Comments",
        dataIndex: "comments",
        flex: .2,
        renderer: m
    }) : s.push({
        text: "Comments",
        dataIndex: "comments",
        flex: .2,
        editor: {
            xtype: "textfield",
            allowBlank: !0
        },
        renderer: m
    }), s.push({
        xtype: "actioncolumn",
        width: 50,
        header: "Download<br>autoproc<br>files",
        items: [ {
            icon: "../images/download.png",
            tooltip: "Download autoproc",
            getClass: q,
            handler: function(a, b, c) {
                r.downloadAutoproc(r.store.getAt(b).data.dataCollectionId);
            }
        } ],
        sortable: !1
    }), s;
}, DataCollectionMxGrid.prototype.viewDataCollection = function(a) {
    document.location.href = this.contextPath + "/menuSelected.do?leftMenuId=-1&topMenuId=16&targetUrl=/user/viewDataCollection.do?reqCode=displayForDataCollectionGroup&dataCollectionGroupId=" + a;
}, DataCollectionMxGrid.prototype.getPagingMode = function() {
    return this.pagingMode;
}, DataCollectionMxGrid.prototype.hideAndShowExperimentParameter = function() {
    this.hideCol = !this.hideCol, this._hideCol();
}, DataCollectionMxGrid.prototype.getListDataCollection = function() {
    var a = Ext.encode(Ext.pluck(this.store.data.items, "data"));
    return a;
}, DataCollectionMxGrid.prototype.changeRank = function() {
    this.rankEDNA = !this.rankEDNA, this.setRankValue();
}, DataCollectionMxGrid.prototype.setRankValue = function() {
    for (var a = this.minDCId; a <= this.maxDCId; a++) {
        var b = document.getElementsByName("rankIdList[" + a + "]");
        null != b && null != b.item(0) && (this.rankEDNA ? b.item(0).style.display = "" : b.item(0).style.display = "none");
        var c = document.getElementsByName("rankIdAutoProcList[" + a + "]");
        null != c && null != c.item(0) && (this.rankEDNA ? c.item(0).style.display = "none" : c.item(0).style.display = "");
        var d = document.getElementById("rankIdImage[" + a + "]");
        null != d && (this.rankEDNA ? d.style.display = "none" : d.style.display = "");
        var e = document.getElementById("rankIdAutoProcImage[" + a + "]");
        null != e && (this.rankEDNA ? e.style.display = "" : e.style.display = "none");
    }
}, DataCollectionMxGrid.prototype.startRank = function() {
    this.rankEDNA ? this.onRankButtonClicked.notify({}) : this.onRankAutoProcButtonClicked.notify({});
}, DataCollectionMxGrid.prototype.getListDataCollectionRank = function() {
    for (var a = [], b = this.minDCId; b <= this.maxDCId; b++) {
        var c = document.getElementsByName("rankIdList[" + b + "]");
        null != c && null != c.item(0) && a.push(b);
    }
    return a;
}, DataCollectionMxGrid.prototype.getListDataCollectionRankAutoProc = function() {
    for (var a = [], b = this.minDCId; b <= this.maxDCId; b++) {
        var c = document.getElementsByName("rankIdAutoProcList[" + b + "]");
        null != c && null != c.item(0) && a.push(b);
    }
    return a;
}, DataCollectionMxGrid.prototype.getListDataCollectionSkip = function() {
    for (var a = [], b = this.minDCId; b <= this.maxDCId; b++) {
        var c = document.getElementsByName("skipIdList[" + b + "]");
        null != c && null != c.item(0) && 0 == c.item(0) && a.push(b);
    }
    return a;
}, DataCollectionMxGrid.prototype.downloadAutoproc = function(a) {
    var b = this.rMergeCutoff, c = this.iSigmaCutoff;
    document.location.href = this.contextPath + "/menuSelected.do?leftMenuId=-1&topMenuId=16&targetUrl=/user/viewDataCollection.do?reqCode=download&dataCollectionId=" + a + "&rmerge=" + b + "&isigma=" + c + "&anomalous=false";
}, DataCollectionSummaryGrid.prototype.parse = function(a) {
    return a = BUI.groupBy(a, function(a) {
        return [ a.DataCollectionGroup_dataCollectionGroupId ];
    });
}, DataCollectionSummaryGrid.prototype.load = function(a) {
    this.dataCollectionGroupFactory.load(a);
}, DataCollectionSummaryGrid.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        title: "Data Collections",
        items: [ this.dataCollectionGroupFactory.getPanel() ]
    }), this.panel;
}, PhasingGrid.prototype.load = function(a) {
    this.store.loadData(a, !1);
}, PhasingGrid.prototype.getPanel = function() {
    return this.store = Ext.create("Ext.data.Store", {
        fields: [ "phasingAnalysisId", "name", "highRes", "lowRes", "method", "enantiomorph", "solventContent", "bravaisLattice", "hP", "mxUsed", "spaceGroupName", "spaceGroupNumber", "spaceGroupShortName" ]
    }), this.panel = Ext.create("Ext.grid.Panel", {
        title: "Auto-Processing Integration",
        store: this.store,
        margin: this.margin,
        cls: "border-grid",
        maxHeight: this.maxHeight,
        minHeight: this.maxHeight,
        columns: [ {
            text: "phasingAnalysisId",
            dataIndex: "phasingAnalysisId",
            flex: 1
        }, {
            text: "name",
            dataIndex: "name",
            flex: 1
        }, {
            text: "bravaisLattice",
            dataIndex: "bravaisLattice",
            flex: 1
        }, {
            text: "hP",
            dataIndex: "hP",
            flex: 1
        }, {
            text: "mxUsed",
            dataIndex: "mxUsed",
            flex: 1
        }, {
            text: "spaceGroupName",
            dataIndex: "spaceGroupName",
            flex: 1
        }, {
            text: "spaceGroupNumber",
            dataIndex: "spaceGroupNumber",
            flex: 1
        }, {
            text: "spaceGroupShortName",
            dataIndex: "spaceGroupShortName",
            flex: 1
        }, {
            text: "lowRes",
            dataIndex: "lowRes",
            flex: 1
        }, {
            text: "lowRes",
            dataIndex: "lowRes",
            flex: 1
        }, {
            text: "highRes",
            dataIndex: "highRes",
            flex: 1
        }, {
            text: "enantiomorph",
            dataIndex: "enantiomorph",
            flex: 1
        }, {
            text: "solventContent",
            dataIndex: "solventContent",
            flex: 1
        } ],
        flex: 1,
        viewConfig: {
            stripeRows: !0,
            listeners: {}
        }
    }), this.panel;
}, PDBViewer.prototype.getTitle = function() {
    return "<div style='width:" + this.width + "px; height:20px; font-weight:bold;background-color: #E6E6E6;color:black'>" + this.title + "</div>";
}, PDBViewer.prototype.getTextAreaId = function() {
    return this.id + "_src";
}, PDBViewer.prototype.getCanvas = function() {
    var a = "width:" + this.width + "px; height: " + this.height + "px;display: none;", b = "<textarea id='" + this.getTextAreaId() + "'; style='" + a + "' ></textarea>", c = "width: " + this.width + "px; height: " + this.height + "px; background-color: black;";
    return b + "<div id='" + this.id + "'; style='" + c + "' ></div>";
}, PDBViewer.prototype.getDownload = function(a, b) {
    var c = BUI.getPdbURL() + "&type=" + a + "&abInitioModelId=" + b;
    return html = "<a href=" + c + ' style="color:blue;font-weight:bold;"  height="80" width="80" >Download</a><br /><br />', 
    "<div style='width:" + this.width + "px; height:20px; font-weight:bold;background-color: #336699;color:white'>" + html + "</div>";
}, PDBViewer.prototype.getBar = function() {
    return "<div style='width:" + this.width + "px; height:20px; font-weight:bold;background-color: #336699;color:white'></div>";
}, PDBViewer.prototype.refresh = function(a) {
    var b = this;
    if (BUI.isWebGLEnabled()) {
        this.models = a, b.panel.setLoading("Rendering");
        var c = function(a, c) {
            null != c.models && null != c.models[0] && (document.getElementById(b.getTextAreaId()).innerHTML = c.models[0].XYZ, 
            null == b.glMol ? b.glMol = new GLmol(b.id) : b.glMol.loadMolecule()), b.panel.setLoading(!1);
        };
        EXI.getDataAdapter({
            onSuccess: c
        }).saxs.model.getPDB(a, []);
    } else this.webGLNotAvailable();
}, PDBViewer.prototype.getOpacity = function(a) {
    return "Invisible" == a ? "0" : "Minimum" == a ? "0.2" : "Medium" == a ? "0.5" : "High" == a ? "0.7" : "1";
}, PDBViewer.prototype.getMenu = function(a) {
    function b(b, d, e) {
        if (d) {
            var f = null;
            if ("Opacity" == b.group) for (f = 0; f < c.models.length; f++) {
                var g = c.getOpacity(b.text);
                a.opacity = g;
            }
            if ("Radius" == b.group) for (f = 0; f < c.models.length; f++) {
                var h = c.getOpacity(b.text);
                a.radius = h;
            }
            c.refresh(c.models);
        }
    }
    var c = this;
    return Ext.create("Ext.menu.Menu", {
        items: [ {
            text: "Opacity",
            menu: {
                items: [ {
                    text: "Invisible",
                    checked: !1,
                    group: "Opacity",
                    checkHandler: b
                }, {
                    text: "Minimum",
                    checked: !1,
                    group: "Opacity",
                    checkHandler: b
                }, {
                    text: "Medium",
                    checked: !1,
                    group: "Opacity",
                    checkHandler: b
                }, {
                    text: "High",
                    checked: !1,
                    group: "Opacity",
                    checkHandler: b
                }, {
                    text: "Opaque",
                    checked: !1,
                    group: "Opacity",
                    checkHandler: b
                } ]
            }
        } ]
    });
}, PDBViewer.prototype.getTbar = function() {
    for (var a = this, b = Ext.create("Ext.toolbar.Toolbar"), c = [], d = 0; d < this.models.length; d++) {
        b.add({
            text: this.models[d].title,
            menu: this.getMenu(this.models[d])
        });
        var e = "#" + this.models[d].color.replace("0x", "");
        c.push({
            html: "<table><tr><td width='15px'>" + BUI.getRectangleColorDIV(e, 10, 10) + "</td><td>" + this.models[d].title + "</td></table>"
        });
    }
    return b.add({
        xtype: "numberfield",
        labelWidth: 50,
        width: 120,
        fieldLabel: "Radius",
        value: 3,
        maxValue: 10,
        step: .2,
        minValue: .1,
        listeners: {
            change: function(b) {
                for (var c = b.getValue(), d = 0; d < a.models.length; d++) a.models[d].radius = c;
                a.refresh(a.models);
            }
        }
    }), b.add("->"), b.add(c), b;
}, PDBViewer.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: this.margin,
        border: 0,
        layout: {
            type: "vbox"
        },
        width: this.width - 4,
        height: this.height + 30,
        items: [ {
            html: this.getCanvas()
        } ],
        listeners: {
            afterRender: function() {}
        }
    }), this.panel.setLoading("Rendering"), this.panel;
}, PDBViewer.prototype.webGLNotAvailable = function() {
    document.getElementById(_this.id).innerHTML = BUI.getWarningHTML("Your browser doesn't support WebGL"), 
    document.getElementById(_this.id).innerHTML = document.getElementById(_this.id).innerHTML + "<br />", 
    document.getElementById(_this.id).innerHTML = document.getElementById(_this.id).innerHTML + BUI.getTipHTML("<a href='http://www.browserleaks.com/webgl#howto-enable-disable-webgl'>How to enable WebGL</a>"), 
    document.getElementById(_this.id).innerHTML = document.getElementById(_this.id).innerHTML + "<br />", 
    document.getElementById(_this.id).innerHTML = document.getElementById(_this.id).innerHTML + BUI.getTipHTML("<a href='http://caniuse.com/webgl'>Can I use WebGL?</a>");
}, PDBViewer.prototype.draw = function(a) {
    this.models = a;
    var b = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: 2,
        layout: {
            type: "vbox"
        },
        tbar: this.getTbar(),
        width: this.width - 4,
        height: this.height + 30,
        items: [ {
            html: this.getCanvas()
        } ],
        listeners: {
            afterRender: function() {
                b.refresh(a);
            }
        }
    }), this.panel.setLoading("Rendering"), this.panel;
}, SuperpositionPDBViewer.prototype.draw = PDBViewer.prototype.draw, SuperpositionPDBViewer.prototype.getBar = PDBViewer.prototype.getBar, 
SuperpositionPDBViewer.prototype.getCanvas = PDBViewer.prototype.getCanvas, SuperpositionPDBViewer.prototype.getDownload = PDBViewer.prototype.getDownload, 
SuperpositionPDBViewer.prototype.getMenu = PDBViewer.prototype.getMenu, SuperpositionPDBViewer.prototype.getOpacity = PDBViewer.prototype.getOpacity, 
SuperpositionPDBViewer.prototype.getPanel = PDBViewer.prototype.getPanel, SuperpositionPDBViewer.prototype.getTbar = PDBViewer.prototype.getTbar, 
SuperpositionPDBViewer.prototype.getTextAreaId = PDBViewer.prototype.getTextAreaId, 
SuperpositionPDBViewer.prototype.getTitle = PDBViewer.prototype.getTitle, SuperpositionPDBViewer.prototype.refresh = PDBViewer.prototype.refresh, 
SuperpositionPDBViewer.prototype.webGLNotAvailable = PDBViewer.prototype.webGLNotAvailable, 
SuperpositionPDBViewer.prototype.refresh = function(a) {
    var b = this;
    if (BUI.isWebGLEnabled()) {
        this.models = a;
        var c = new BiosaxsDataAdapter();
        b.panel.setLoading("Rendering"), c.onSuccess.attach(function(a, c) {
            document.getElementById(b.getTextAreaId()).innerHTML = c.XYZ, null == b.glMol ? b.glMol = new GLmol(b.id) : b.glMol.loadMolecule(), 
            b.panel.setLoading(!1);
        }), c.onError.attach(function(a, c) {
            b.panel.setLoading("Not available");
        }), c.getAbinitioPDBContentBySuperpositionList(a);
    } else this.webGLNotAvailable();
}, AlignedSuperpositionPDBViewer.prototype.draw = PDBViewer.prototype.draw, AlignedSuperpositionPDBViewer.prototype.getBar = PDBViewer.prototype.getBar, 
AlignedSuperpositionPDBViewer.prototype.getCanvas = PDBViewer.prototype.getCanvas, 
AlignedSuperpositionPDBViewer.prototype.getDownload = PDBViewer.prototype.getDownload, 
AlignedSuperpositionPDBViewer.prototype.getMenu = PDBViewer.prototype.getMenu, AlignedSuperpositionPDBViewer.prototype.getOpacity = PDBViewer.prototype.getOpacity, 
AlignedSuperpositionPDBViewer.prototype.getPanel = PDBViewer.prototype.getPanel, 
AlignedSuperpositionPDBViewer.prototype.getTbar = PDBViewer.prototype.getTbar, AlignedSuperpositionPDBViewer.prototype.getTextAreaId = PDBViewer.prototype.getTextAreaId, 
AlignedSuperpositionPDBViewer.prototype.getTitle = PDBViewer.prototype.getTitle, 
AlignedSuperpositionPDBViewer.prototype.refresh = PDBViewer.prototype.refresh, AlignedSuperpositionPDBViewer.prototype.webGLNotAvailable = PDBViewer.prototype.webGLNotAvailable, 
AlignedSuperpositionPDBViewer.prototype.refresh = function(a) {
    var b = this;
    if (BUI.isWebGLEnabled()) {
        this.models = a, b.panel.setLoading("Rendering PDB");
        var c = new BiosaxsDataAdapter();
        c.onError.attach(function(a, b) {
            console.log(a);
        }), c.onSuccess.attach(function(c, d) {
            var e = d.superpositions[0][a[0]];
            document.getElementById(b.id).innerHTML = "", b.glMol = new GLmol(b.id, !1, !1, e.apriori.data), 
            b.glMol.addSuperpositionXYZ(e.aligned.XYZ, "0xFFFFFF", .3, 1);
            var f = b.glMol.getView();
            b.glMol.setView(f), b.panel.setLoading(!1);
        }), null != a && 0 != a.length && c.getDataPDB([], a);
    } else this.webGLNotAvailable();
}, StructurePDBViewer.prototype.draw = PDBViewer.prototype.draw, StructurePDBViewer.prototype.getBar = PDBViewer.prototype.getBar, 
StructurePDBViewer.prototype.getCanvas = PDBViewer.prototype.getCanvas, StructurePDBViewer.prototype.getDownload = PDBViewer.prototype.getDownload, 
StructurePDBViewer.prototype.getMenu = PDBViewer.prototype.getMenu, StructurePDBViewer.prototype.getOpacity = PDBViewer.prototype.getOpacity, 
StructurePDBViewer.prototype.getPanel = PDBViewer.prototype.getPanel, StructurePDBViewer.prototype.getTbar = PDBViewer.prototype.getTbar, 
StructurePDBViewer.prototype.getTextAreaId = PDBViewer.prototype.getTextAreaId, 
StructurePDBViewer.prototype.getTitle = PDBViewer.prototype.getTitle, StructurePDBViewer.prototype.refresh = PDBViewer.prototype.refresh, 
StructurePDBViewer.prototype.webGLNotAvailable = PDBViewer.prototype.webGLNotAvailable, 
StructurePDBViewer.prototype.refresh = function(a) {
    var b = this;
    if (BUI.isWebGLEnabled()) {
        this.models = a, b.panel.setLoading("Rendering");
        var c = new BiosaxsDataAdapter();
        c.onSuccess.attach(function(a, c) {
            document.getElementById(b.getTextAreaId()).innerHTML = c;
            new GLmol(b.id);
            b.panel.setLoading(!1);
        }), c.onError.attach(function(a, c) {
            b.panel.setLoading("Not available");
        }), c.getDataPDB(models, []);
    } else this.webGLNotAvailable();
}, SpineLayout.prototype.render = function(a, b) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var c = SVG.createSVGCanvas(document.getElementById(a), [ [ "width", this.width ], [ "height", this.height ] ]), d = 10, e = this.width / 2, f = this.width / 2, g = this.width / 2 - this.width / 8;
    this.renderContainer(c, e, f, e - 4);
    for (var h = [], i = [], j = 0; d > j; j++) h[j] = e + g * Math.cos(2 * Math.PI * j / d), 
    i[j] = f + g * Math.sin(2 * Math.PI * j / d), this.renderEmptyWell(c, h[j], i[j], j + 1);
    for (var k = 0; k < b.sampleVOs.length; k++) {
        var l = Number(b.sampleVOs[k].location) - 1;
        this.renderWell(c, h[l], i[l], b.sampleVOs[k].location);
    }
}, SpineLayout.prototype.load = function(a) {
    this.puck = a;
    try {
        this.renderAsSpine(a);
    } catch (b) {
        console.log(b);
    }
}, SpineLayout.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: 10,
        items: [ {
            html: '<div style="width:' + (this.width + 2) + "px;height:" + (this.height + 2) + 'px;" id=' + this.id + "></div>"
        } ],
        listeners: {
            afterrender: function(b, c) {
                a.render();
            }
        }
    }), this.panel;
}, SpineLayout.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/edit.png",
        text: "Edit",
        disabled: !1,
        handler: function(b, c) {
            var d = (a.puck.containerId, new PuckForm({
                width: 910
            }));
            d.onSaved.attach(function(b, c) {
                a.load(a.shipment), e.close();
            });
            var e = Ext.create("Ext.window.Window", {
                title: "Edit Puck",
                height: 705,
                modal: !0,
                resizable: !0,
                layout: "fit",
                items: d.getPanel()
            }).show();
            d.load(a.puck);
        }
    })), b;
}, UnipuckLayout.prototype.renderContainer = function(a, b, c, d) {
    function e() {
        j.attr({
            fill: "#D8D8D8",
            stroke: "#000",
            strokeWidth: 1
        });
    }
    function f() {
        j.attr({
            fill: "#585858",
            stroke: "#000",
            strokeWidth: 1,
            cursor: "pointer"
        });
    }
    function g() {
        location.hash = "#/mx/puck/" + h.puck.containerId + "/main";
    }
    var h = this, i = Snap(a), j = i.circle(b, c, b - 4);
    return j.attr({
        fill: "#585858",
        stroke: "#000",
        strokeWidth: 1
    }), j.mouseover(e), j.mouseout(f), j.click(g), j;
}, UnipuckLayout.prototype.render = function(a, b) {
    this.puck = b, document.getElementById(a).innerHTML = "", document.getElementById(a).setAttribute("width", this.width), 
    document.getElementById(a).setAttribute("height", this.height);
    for (var c = SVG.createSVGCanvas(document.getElementById(a), [ [ "width", this.width ], [ "height", this.height ] ]), d = Snap(c), e = this.width / 2 - 2, f = this.width / 2 - 2, g = this.width / 2 - this.width / 8 - 5, h = this.renderContainer(c, e, f, e - 4), i = [], j = [], k = 0; 12 > k; k++) steps = 11, 
    i[k] = e + g * Math.cos(2 * Math.PI * k / steps), j[k] = f + g * Math.sin(2 * Math.PI * k / steps);
    for (var k = 11; 16 > k; k++) steps = 5, g = this.width / 2 - this.width / 3, i[k] = e + g * Math.cos(2 * Math.PI * k / steps), 
    j[k] = f + g * Math.sin(2 * Math.PI * k / steps);
    this.plateSVG = d.group(h), this.transpose = [ 16, 15, 14, 13, 12, 1, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2 ];
    for (var k = 0; 16 > k; k++) {
        var l = this.transpose[k] - 1;
        this.plateSVG.add(this.renderEmptyWell(c, i[l], j[l], k + 1));
    }
    for (var m = 0; m < b.sampleVOs.length; m++) {
        var l = this.transpose[Number(b.sampleVOs[m].location) - 1] - 1;
        this.plateSVG.add(this.renderWell(c, i[l], j[l], b.sampleVOs[m].location));
    }
    this.plateSVG.add(this.drawDecorators(c, e, f)), this.plateSVG.transform("r-90");
}, UnipuckLayout.prototype.drawDecorators = function(a, b, c, d) {
    var e = Snap(a), d = this.width / 12, f = e.circle(b, c, d / 2.5);
    f.attr({
        fill: "#FFFFFF",
        stroke: "#FFF",
        strokeWidth: 1
    });
    var g = e.circle(b + d / 3, c + d / 3, d / 6);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#FFF",
        strokeWidth: 1
    });
    var h = e.circle(b + d / 3, c - d / 3, d / 6);
    h.attr({
        fill: "#FFFFFF",
        stroke: "#FFF",
        strokeWidth: 1
    });
    var i = e.circle(b, c + this.width / 2 - d / 2.5, d / 2.5);
    i.attr({
        fill: "#FFFFFF",
        stroke: "#FFF",
        strokeWidth: 1
    });
    var j = e.circle(b, c + this.width / 4, d / 2.5);
    return j.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    }), e.group(f, g, h);
}, UnipuckLayout.prototype.load = function(a) {
    this.puck = a;
    try {
        this.render(a);
    } catch (b) {
        console.log(b);
    }
}, UnipuckLayout.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: 10,
        items: [ {
            html: '<div style="width:' + (this.width + 2) + "px;height:" + (this.height + 2) + 'px;" id=' + this.id + "></div>"
        } ],
        listeners: {
            afterrender: function(b, c) {
                a.render();
            }
        }
    }), this.panel;
}, UnipuckLayout.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/edit.png",
        text: "Edit",
        disabled: !1,
        handler: function(b, c) {
            var d = (a.puck.containerId, new PuckForm({
                width: 910
            }));
            d.onSaved.attach(function(b, c) {
                a.load(a.shipment), e.close();
            });
            var e = Ext.create("Ext.window.Window", {
                title: "Edit Puck",
                height: 705,
                modal: !0,
                resizable: !0,
                layout: "fit",
                items: d.getPanel()
            }).show();
            d.load(a.puck);
        }
    })), b;
}, UnipuckLayout.prototype.renderWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FA5882",
        stroke: "#000",
        strokeWidth: 1
    });
    var h = e.text(b - f / 2 + 3, c + f / 2 - 5, d);
    return h.transform("r90"), e.group(g, h);
}, UnipuckLayout.prototype.renderEmptyPlateWell = function(a, b, c, d) {
    var e = Snap(a), f = (this.width - 40) / 12, g = e.rect(b, c, f, f);
    return g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    }), e.group(g);
}, UnipuckLayout.prototype.renderEmptyWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    });
    var h = e.text(b - f / 2 + 3, c + f / 2 - 5, d);
    return h.transform("r90"), e.group(g, h);
}, PuckLayout.prototype.renderAsSpine = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]), c = 10, d = this.width / 2, e = this.width / 2, f = this.width / 2 - this.width / 8;
    this.renderContainer(b, d, e, d - 4);
    for (var g = [], h = [], i = 0; c > i; i++) g[i] = d + f * Math.cos(2 * Math.PI * i / c), 
    h[i] = e + f * Math.sin(2 * Math.PI * i / c), this.renderEmptyWell(b, g[i], h[i], i + 1);
    for (var j = 0; j < a.sampleVOs.length; j++) {
        var k = Number(a.sampleVOs[j].location) - 1;
        this.renderWell(b, g[k], h[k], a.sampleVOs[j].location);
    }
}, PuckLayout.prototype.renderEmptyPlateWell = function(a, b, c, d) {
    var e = Snap(a), f = (this.width - 40) / 12, g = e.rect(b, c, f, f);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    });
}, PuckLayout.prototype.renderEmptyWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    }), e.text(b - f / 2, c + f / 2, d);
}, PuckLayout.prototype.renderPlateContainer = function(a, b, c) {
    function d() {
        i.attr({
            fill: "#D8D8D8",
            stroke: "#000",
            strokeWidth: 1
        });
    }
    function e() {
        i.attr({
            fill: "#585858",
            stroke: "#000",
            strokeWidth: 1,
            cursor: "pointer"
        });
    }
    function f() {
        location.hash = "#/mx/puck/" + g.puck.containerId + "/main";
    }
    var g = this, h = Snap(a), i = h.rect(0, 0, b, c);
    i.attr({
        fill: "#585858",
        stroke: "#000",
        strokeWidth: 1
    }), i.mouseover(d), i.mouseout(e), i.click(f);
}, PuckLayout.prototype.renderContainer = function(a, b, c, d) {
    function e() {
        j.attr({
            fill: "#D8D8D8",
            stroke: "#000",
            strokeWidth: 1
        });
    }
    function f() {
        j.attr({
            fill: "#585858",
            stroke: "#000",
            strokeWidth: 1,
            cursor: "pointer"
        });
    }
    function g() {
        location.hash = "#/mx/puck/" + h.puck.containerId + "/main";
    }
    var h = this, i = Snap(a), j = i.circle(b, c, b - 4);
    j.attr({
        fill: "#585858",
        stroke: "#000",
        strokeWidth: 1
    }), j.mouseover(e), j.mouseout(f), j.click(g);
}, PuckLayout.prototype.renderPlateWell = function(a, b, c, d) {
    var e = Snap(a), f = (this.width - 40) / 12, g = e.rect(b, c, f, f);
    g.attr({
        fill: "#FA5882",
        stroke: "#000",
        strokeWidth: 1
    });
}, PuckLayout.prototype.renderWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FA5882",
        stroke: "#000",
        strokeWidth: 1
    }), e.text(b - f / 2, c + f / 2, d);
}, PuckLayout.prototype.renderAsPlate = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]);
    Snap(b);
    this.renderPlateContainer(b, this.width, this.height);
    for (var c = [], d = this.height / 12, e = this.width / 8, f = 0; 8 > f; f++) for (var g = 0; 12 > g; g++) c.push([ 2 + g * d, 2 + f * e ]);
    for (var g = 0; g < c.length; g++) this.renderEmptyPlateWell(b, c[g][0], c[g][1], g + 1);
    for (var f = 0; f < a.sampleVOs.length; f++) {
        var h = Number(a.sampleVOs[f].location) - 1;
        this.renderPlateWell(b, c[h][0], c[h][1], a.sampleVOs[f].location);
    }
}, PuckLayout.prototype.renderAsUnipuck = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]), c = (Snap(b), 
    this.width / 2 - 2), d = this.width / 2 - 2, e = this.width / 2 - this.width / 8 - 5;
    this.renderContainer(b, c, d, c - 4);
    for (var f = [], g = [], h = 0; 11 > h; h++) steps = 10, f[h] = c + e * Math.cos(2 * Math.PI * h / steps), 
    g[h] = d + e * Math.sin(2 * Math.PI * h / steps);
    for (var h = 10; 16 > h; h++) steps = 6, e = this.width / 2 - this.width / 3, f[h] = c + e * Math.cos(2 * Math.PI * h / steps), 
    g[h] = d + e * Math.sin(2 * Math.PI * h / steps);
    for (var h = 0; 16 > h; h++) this.renderEmptyWell(b, f[h], g[h], h + 1);
    for (var i = 0; i < a.sampleVOs.length; i++) {
        var j = Number(a.sampleVOs[i].location) - 1;
        this.renderWell(b, f[j], g[j], a.sampleVOs[i].location);
    }
}, PuckLayout.prototype.load = function(a) {
    this.puck = a;
    try {
        this.render(a);
    } catch (b) {
        console.log(b);
    }
}, PuckLayout.prototype.render = function(a) {
    null != this.puck && (16 == this.puck.capacity && this.renderAsUnipuck(this.puck), 
    10 == this.puck.capacity && this.renderAsSpine(this.puck), 96 == this.puck.capacity && this.renderAsPlate(this.puck));
}, PuckLayout.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: 10,
        items: [ {
            html: '<div style="width:' + (this.width + 2) + "px;height:" + (this.height + 2) + 'px;" id=' + this.id + "></div>"
        } ],
        listeners: {
            afterrender: function(b, c) {
                a.render();
            }
        }
    }), this.panel;
}, PuckLayout.prototype._getTopButtons = function() {
    var a = this, b = [];
    return b.push(Ext.create("Ext.Action", {
        icon: "../images/icon/edit.png",
        text: "Edit",
        disabled: !1,
        handler: function(b, c) {
            var d = (a.puck.containerId, new PuckForm({
                width: 910
            }));
            d.onSaved.attach(function(b, c) {
                a.load(a.shipment), e.close();
            });
            var e = Ext.create("Ext.window.Window", {
                title: "Edit Puck",
                height: 705,
                modal: !0,
                resizable: !0,
                layout: "fit",
                items: d.getPanel()
            }).show();
            d.load(a.puck);
        }
    })), b;
}, PuckLayout.prototype.renderAsSpine = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]), c = 10, d = this.width / 2, e = this.width / 2, f = this.width / 2 - this.width / 8;
    this.renderContainer(b, d, e, d - 4);
    for (var g = [], h = [], i = 0; c > i; i++) g[i] = d + f * Math.cos(2 * Math.PI * i / c), 
    h[i] = e + f * Math.sin(2 * Math.PI * i / c), this.renderEmptyWell(b, g[i], h[i], i + 1);
    for (var j = 0; j < a.sampleVOs.length; j++) {
        var k = Number(a.sampleVOs[j].location) - 1;
        this.renderWell(b, g[k], h[k], a.sampleVOs[j].location);
    }
}, PuckLayout.prototype.renderEmptyPlateWell = function(a, b, c, d) {
    var e = Snap(a), f = (this.width - 40) / 12, g = e.rect(b, c, f, f);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    });
}, PuckLayout.prototype.renderEmptyWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FFFFFF",
        stroke: "#000",
        strokeWidth: 1
    }), e.text(b - f / 2, c + f / 2, d);
}, PuckLayout.prototype.renderPlateContainer = function(a, b, c) {
    function d() {
        i.attr({
            fill: "#D8D8D8",
            stroke: "#000",
            strokeWidth: 1
        });
    }
    function e() {
        i.attr({
            fill: "#585858",
            stroke: "#000",
            strokeWidth: 1,
            cursor: "pointer"
        });
    }
    function f() {
        location.hash = "#/mx/puck/" + g.puck.containerId + "/main";
    }
    var g = this, h = Snap(a), i = h.rect(0, 0, b, c);
    i.attr({
        fill: "#585858",
        stroke: "#000",
        strokeWidth: 1
    }), i.mouseover(d), i.mouseout(e), i.click(f);
}, PuckLayout.prototype.renderContainer = function(a, b, c, d) {
    function e() {
        j.attr({
            fill: "#D8D8D8",
            stroke: "#000",
            strokeWidth: 1
        });
    }
    function f() {
        j.attr({
            fill: "#585858",
            stroke: "#000",
            strokeWidth: 1,
            cursor: "pointer"
        });
    }
    function g() {
        location.hash = "#/mx/puck/" + h.puck.containerId + "/main";
    }
    var h = this, i = Snap(a), j = i.circle(b, c, b - 4);
    j.attr({
        fill: "#585858",
        stroke: "#000",
        strokeWidth: 1
    }), j.mouseover(e), j.mouseout(f), j.click(g);
}, PuckLayout.prototype.renderPlateWell = function(a, b, c, d) {
    var e = Snap(a), f = (this.width - 40) / 12, g = e.rect(b, c, f, f);
    g.attr({
        fill: "#FA5882",
        stroke: "#000",
        strokeWidth: 1
    });
}, PuckLayout.prototype.renderWell = function(a, b, c, d) {
    var e = Snap(a), f = this.width / 12, g = e.circle(b, c, f);
    g.attr({
        fill: "#FA5882",
        stroke: "#000",
        strokeWidth: 1
    }), e.text(b - f / 2, c + f / 2, d);
}, PuckLayout.prototype.renderAsPlate = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]);
    Snap(b);
    this.renderPlateContainer(b, this.width, this.height);
    for (var c = [], d = this.height / 12, e = this.width / 8, f = 0; 8 > f; f++) for (var g = 0; 12 > g; g++) c.push([ 2 + g * d, 2 + f * e ]);
    for (var g = 0; g < c.length; g++) this.renderEmptyPlateWell(b, c[g][0], c[g][1], g + 1);
    for (var f = 0; f < a.sampleVOs.length; f++) {
        var h = Number(a.sampleVOs[f].location) - 1;
        this.renderPlateWell(b, c[h][0], c[h][1], a.sampleVOs[f].location);
    }
}, PuckLayout.prototype.renderAsUnipuck = function(a) {
    document.getElementById(this.id).innerHTML = "", document.getElementById(this.id).setAttribute("width", this.width), 
    document.getElementById(this.id).setAttribute("height", this.height);
    var b = SVG.createSVGCanvas(document.getElementById(this.id), [ [ "width", this.width ], [ "height", this.height ] ]), c = (Snap(b), 
    this.width / 2 - 2), d = this.width / 2 - 2, e = this.width / 2 - this.width / 8 - 5;
    this.renderContainer(b, c, d, c - 4);
    for (var f = [], g = [], h = 0; 11 > h; h++) steps = 10, f[h] = c + e * Math.cos(2 * Math.PI * h / steps), 
    g[h] = d + e * Math.sin(2 * Math.PI * h / steps);
    for (var h = 10; 16 > h; h++) steps = 6, e = this.width / 2 - this.width / 3, f[h] = c + e * Math.cos(2 * Math.PI * h / steps), 
    g[h] = d + e * Math.sin(2 * Math.PI * h / steps);
    for (var h = 0; 16 > h; h++) this.renderEmptyWell(b, f[h], g[h], h + 1);
    for (var i = 0; i < a.sampleVOs.length; i++) {
        var j = Number(a.sampleVOs[i].location) - 1;
        this.renderWell(b, f[j], g[j], a.sampleVOs[i].location);
    }
}, PuckLayout.prototype.load = function(a) {
    this.puck = a;
    try {
        this.render(a);
    } catch (b) {
        console.log(b);
    }
}, PuckLayout.prototype.render = function(a) {
    null != this.puck && (16 == this.puck.capacity && new UnipuckLayout({
        width: this.width
    }).render(this.id, this.puck), 10 == this.puck.capacity && this.renderAsSpine(this.puck), 
    96 == this.puck.capacity && this.renderAsPlate(this.puck));
}, PuckLayout.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        margin: 10,
        items: [ {
            html: '<div style="width:' + (this.width + 2) + "px;height:" + (this.height + 2) + 'px;" id=' + this.id + "></div>"
        } ],
        listeners: {
            afterrender: function(b, c) {
                a.render();
            }
        }
    }), this.panel.addDocked({
        height: 45,
        xtype: "toolbar",
        dock: "bottom",
        items: a._getTopButtons()
    }), this.panel;
}, PuckLayout.prototype._getTopButtons = function() {
    var a = [];
    return a.push(Ext.create("Ext.Action", {
        icon: "../images/icon/edit.png",
        text: "Edit",
        disabled: !1,
        handler: function(a, b) {
            alert("Not implemented yet");
        }
    })), a.push(Ext.create("Ext.Action", {
        icon: "../images/icon/ic_highlight_remove_black_24dp.png",
        text: "Remove",
        disabled: !1,
        handler: function(a, b) {
            alert("Not implemented yet");
        }
    })), a;
}, CurvePlotter.prototype.getPanel = function() {
    return this.plotPanel = Ext.create("Ext.container.Container", {
        layout: {
            type: "hbox"
        },
        flex: .7,
        margin: this.margin,
        items: [ {
            html: '<div id="' + this.targetId + '"></div>',
            id: this.id
        } ]
    }), this.plotPanel.on("afterrender", function() {}), this.plotPanel.on("resize", function() {}), 
    this.plotPanel;
}, CurvePlotter.prototype.getPointCount = function() {
    return this.dygraph.rawData_.length;
}, CurvePlotter.prototype.getColors = function() {
    return this.dygraph.getColors();
}, CurvePlotter.prototype.getLabels = function() {
    return this.dygraph.getLabels();
}, CurvePlotter.prototype.render = function(a) {
    var b = this;
    if (null != document.getElementById(this.targetId)) {
        document.getElementById(this.targetId).innerHTML = "", this.width = this.plotPanel.getWidth(), 
        this.height = this.plotPanel.getHeight(), document.getElementById(this.targetId).setAttribute("style", "border: 1px solid #000000; height:" + (this.plotPanel.getHeight() - 1) + "px;width:" + (this.plotPanel.getWidth() - 2) + "px;"), 
        Ext.getCmp(this.id).setHeight(this.plotPanel.getHeight()), Ext.getCmp(this.id).setWidth(this.plotPanel.getWidth()), 
        this.dygraph = new Dygraph(document.getElementById(this.targetId), a, {
            title: this.title,
            titleHeight: 20,
            legend: this.legend,
            labelsSeparateLines: !0,
            errorBars: !0,
            connectSeparatedPoints: !0,
            pointClickCallback: function(a, c) {
                b.onPointClickCallback.notify(c.name);
            }
        });
        var b = this;
        this.dygraph.ready(function() {
            b.onRendered.notify();
        });
    }
}, CurvePlotter.prototype.loadMerge = function(a, b, c, d) {
    this.render(EXI.getDataAdapter().saxs.hplc.getFramesMergeURL(a, b, c, d));
}, CurvePlotter.prototype.loadHPLCFrame = function(a, b) {
    this.render(EXI.getDataAdapter().saxs.hplc.getHPLCFramesScatteringURL(a, b));
}, CurvePlotter.prototype.loadUrl = function(a) {
    this.render(a);
}, CurvePlotter.prototype.load = function(a) {
    this.render(EXI.getDataAdapter().saxs.frame.getFramesURL(a.frame, a.average, a.subtracted, a.sampleaverage, a.bufferaverage));
}, AutoProcIntegrationCurvePlotter.prototype.getPanel = CurvePlotter.prototype.getPanel, 
AutoProcIntegrationCurvePlotter.prototype.getPointCount = CurvePlotter.prototype.getPointCount, 
AutoProcIntegrationCurvePlotter.prototype.getLabels = CurvePlotter.prototype.getLabels, 
AutoProcIntegrationCurvePlotter.prototype.render = CurvePlotter.prototype.render, 
AutoProcIntegrationCurvePlotter.prototype.loadUrl = CurvePlotter.prototype.loadUrl, 
AutoProcIntegrationCurvePlotter.prototype.getPanel = function() {
    return this.plotPanel = Ext.create("Ext.panel.Panel", {
        layout: {
            type: "fit"
        },
        height: this.height,
        margin: this.margin,
        items: [ {
            html: '<div id="' + this.targetId + '"></div>',
            id: this.id
        } ]
    }), this.plotPanel.on("afterrender", function() {}), this.plotPanel.on("resize", function() {}), 
    this.plotPanel;
}, DataSet.prototype.loadFromJSON = function(a) {
    null != a && this.validate(a) && (this.json = a);
}, DataSet.prototype.toJSON = function(a) {
    return this.json;
}, DataSet.prototype.validate = function(a) {
    return !0;
};

var DOM = {};

DOM.createNewElement = function(a, b, c) {
    for (var d = document.createElement(a), e = 0; e < c.length; e++) d.setAttribute(c[e][0], c[e][1]);
    return b.appendChild(d), d;
}, DOM.createTextNode = function(a, b) {
    var c = document.createTextNode(a);
    return b.appendChild(c), c;
}, DOM.removeChilds = function(a) {
    for (var b = document.getElementById(a); b.childNodes.length > 0; ) b.removeChild(b.childNodes[0]);
}, DOM.select = function(a) {
    return document.getElementById(a);
}, GraphCanvas.prototype.showLabels = function(a) {
    this.args.labeled = a, this.removeLabels(), a && this.renderLabels();
}, GraphCanvas.prototype.getSelectedVertices = function() {
    return this.args.selectedVertices;
}, GraphCanvas.prototype.getSelectedEdges = function() {
    var a = [];
    for (var b in this.args.isEdgeSelected) a.push(b);
    return a;
}, GraphCanvas.prototype.createSVGDom = function(a, b, c, d, e) {
    var f = document.getElementById(a);
    return this._svg = SVG.createSVGCanvas(f, [ [ "style", "background-color:" + e + ";" ], [ "id", b ], [ "dragx", 0 ], [ "dragy", 0 ], [ "height", this.getFormatter().getHeight() ], [ "width", this.getFormatter().getWidth() ] ]), 
    this._svg;
}, GraphCanvas.prototype.isMultipleSelectionEnabled = function() {
    return this.args.multipleSelectionEnabled;
}, GraphCanvas.prototype.setMultipleSelection = function(a) {
    this.args.multipleSelectionEnabled = a, this.args.draggingCanvasEnabled = !a;
}, GraphCanvas.prototype.setSelecting = function(a) {
    this.selecting = a;
}, GraphCanvas.prototype.setLinking = function(a) {
    this.args.linkEnabled = a, this.selecting = !a, this.dragging = !a;
}, GraphCanvas.prototype.setDraggingCanvas = function(a) {
    this.args.draggingCanvasEnabled = a, this.args.multipleSelectionEnabled = !a;
}, GraphCanvas.prototype.isDraggingCanvasEnabled = function() {
    return this.args.draggingCanvasEnabled;
}, GraphCanvas.prototype.getScale = function() {
    return this.getFormatter().getZoomScale();
}, GraphCanvas.prototype.setScale = function(a) {
    var b = document.getElementById(this.args.idGraph);
    b.setAttribute("transform", b.getAttribute("transform").replace("scale(" + this.getScale() + ")", "scale(" + a + ")")), 
    this.getFormatter().setZoomScale(a);
}, GraphCanvas.prototype.zoomIn = function() {
    this.setScale(this.getScale() + this.getFormatter().getZoomScaleStepFactor());
}, GraphCanvas.prototype.zoomOut = function() {
    this.setScale(this.getScale() - this.getFormatter().getZoomScaleStepFactor());
}, GraphCanvas.prototype.getSVGCoordenates = function(a) {
    var b = this._svg.createSVGPoint();
    b.x = a.clientX, b.y = a.clientY;
    var c = this._svg.getScreenCTM(document.documentElement);
    return b = b.matrixTransform(c.inverse());
}, GraphCanvas.prototype.mouseClick = function(a) {
    if (0 == a.button) {
        if (!this.args.interactive) return;
        this.isVertex(a.target) && this.clickNode(this.getVertexIdFromSVGId(a.target.id)), 
        this.dragging && (this.dragging = !1);
    }
}, GraphCanvas.prototype.mouseMove = function(a) {
    if (this.selecting) {
        this.clearLabels();
        var b = this.getSVGCoordenates(a).x - this.selectorX, c = this.getSVGCoordenates(a).y - this.selectorY;
        b > 0 && c > 0 && this.displaySelection(this.selectorX, this.selectorY, b, c), b > 0 && 0 > c && this.displaySelection(this.selectorX, this.getSVGCoordenates(a).y, b, Math.abs(c)), 
        0 > b && 0 > c && this.displaySelection(this.getSVGCoordenates(a).x, this.getSVGCoordenates(a).y, Math.abs(b), Math.abs(c)), 
        0 > b && c > 0 && this.displaySelection(this.selectorX + b, this.selectorY, Math.abs(b), Math.abs(c));
        var d = (parseFloat(this.selectorSVGNode.getAttribute("x")) - DOM.select(this.id).getAttribute("dragx")) / this.getFormatter().getWidth(), e = (parseFloat(this.selectorSVGNode.getAttribute("y")) - DOM.select(this.id).getAttribute("dragy")) / this.getFormatter().getHeight(), f = d + parseFloat(this.selectorSVGNode.getAttribute("width") / this.getFormatter().getWidth()), g = e + parseFloat(this.selectorSVGNode.getAttribute("height") / this.getFormatter().getHeight());
        this.deselectNodes(this.getLayout());
        for (var h = this.getLayout().getVerticesByArea(d / this.getFormatter().getZoomScale(), e / this.getFormatter().getZoomScale(), f / this.getFormatter().getZoomScale(), g / this.getFormatter().getZoomScale()), i = 0; i < h.length; i++) this.selectNode(h[i].getId()), 
        this.renderLabel(h[i].getId());
    }
    var j = null;
    this.args.linking && (j = this.getSVGCoordenates(a), null != this.linkSVGNode && (this.linkSVGNode.setAttribute("x2", j.x - 2), 
    this.linkSVGNode.setAttribute("y2", j.y - 2))), this.dragging && (j = this.getSVGCoordenates(a), 
    j.x -= this.nMouseOffsetX, j.y -= this.nMouseOffsetY, this.desplazamientoX = this.getSVGCoordenates(a).x - this.dragStartX, 
    this.desplazamientoY = this.getSVGCoordenates(a).y - this.dragStartY, null != this.draggingElement && (this.isNodeCanvas(this.draggingElement) ? (j = this.getSVGCoordenates(a), 
    j.x = this.desplazamientoX, j.y = this.desplazamientoY, this.draggingElement.setAttribute("dragx", j.x), 
    this.draggingElement.setAttribute("dragy", j.y), this.draggingElement = document.getElementById(this.args.idGraph), 
    this.draggingElement.setAttribute("transform", "translate(" + j.x + "," + j.y + "), scale(" + this.getScale() + ")"), 
    DOM.select(this.id).setAttribute("dragx", j.x), DOM.select(this.id).setAttribute("dragy", j.y), 
    null != this.NodeSVGbackgroundImage && (this.NodeSVGbackgroundImage.setAttribute("dragx", j.x), 
    this.NodeSVGbackgroundImage.setAttribute("dragy", j.y))) : this.isVertex(this.draggingElement) ? (this.selectNode(this.getVertexIdFromSVGId(this.draggingElement.id)), 
    this.desplazamientoX = this.desplazamientoX / this.getFormatter().getZoomScale(), 
    this.desplazamientoY = this.desplazamientoY / this.getFormatter().getZoomScale(), 
    this.moveSelectedNodes(this.desplazamientoX, this.desplazamientoY), this.dragStartX = this.getSVGCoordenates(a).x, 
    this.dragStartY = this.getSVGCoordenates(a).y) : this.isNodeBackground(this.draggingElement) ? (this.draggingElement.setAttribute("dragx", j.x), 
    this.draggingElement.setAttribute("dragy", j.y), this.draggingElement = document.getElementById(this.args.idGraph), 
    this.draggingElement.setAttribute("transform", "translate(" + j.x + "," + j.y + "), scale(" + this.getScale() + ")")) : this.draggingElement.setAttribute("transform", "translate(" + j.x + "," + j.y + ")")));
}, GraphCanvas.prototype.moveSelectedNodes = function(a, b) {
    for (var c = 0; c < this.getSelectedVertices().length; c++) {
        var d = this.getSelectedVertices()[c], e = this.getSVGNodeId(d), f = parseFloat(DOM.select(e).getAttribute("dragx")) + parseFloat(a), g = parseFloat(DOM.select(e).getAttribute("dragy")) + parseFloat(b);
        this._movingNode(DOM.select(e), f, g);
    }
}, GraphCanvas.prototype.mouseDown = function(a) {
    if (0 == event.button) {
        if (!this.args.interactive) return;
        var b = this.getSVGCoordenates(a);
        if ((this.isNodeCanvas(a.target) || this.isNodeBackground(a.target)) && (this.deselectNodes(), 
        this.deselectEdges(), this.onCanvasClicked.notify()), this.args.linkEnabled) return void (this.args.linking ? (this.linkNodeTarget = this.getVertexIdFromSVGId(a.target.id), 
        this.args.linking = !1, this.args.linkEnabled = !1, this.isVertex(a.target) && this.getDataset().addEdge(this.linkNodeSource + "_" + this.linkNodeTarget, this.linkNodeSource, this.linkNodeTarget, {}), 
        this.linkSVGNode.parentNode.removeChild(this.linkSVGNode)) : (this.args.linking = !0, 
        this.isVertex(a.target) && (this.linkStartX = b.x, this.linkStartY = b.y, this.linkSVGNode = SVG.drawLine(b.x, b.y, b.x, b.y, this._svg, {
            stroke: "#FF0000"
        }), this.linkNodeSource = this.getVertexIdFromSVGId(a.target.id))));
        (this.isVertex(a.target) || this.isNodeCanvas(a.target) || this.isNodeBackground(a.target)) && this._startDragging(a), 
        this.isEdge(a.target) && this.selectEdge(this.getEdgeIdFromSVGId(a.target.getAttribute("id"))), 
        this.args.multipleSelectionEnabled && (this.dragging || (this.setSelecting(!0), 
        this.selectorX = b.x, this.selectorY = b.y, this.displaySelection(b.x, b.y, 1, 1)));
    }
    1 == event.button && (this.setLinking(!1), this.setMultipleSelection(!1), this.selecting = !1, 
    (this.isVertex(a.target) || this.isNodeCanvas(a.target) || this.isNodeBackground(a.target)) && this._startDragging(a));
}, GraphCanvas.prototype.mouseUp = function(a) {
    if (this.args.interactive) {
        if (this.dragging && (this._stopDragging(a), this.isVertex(a.target))) {
            var b = this.getVertexIdFromSVGId(a.target.id);
            this.getDataset().getVertexById(b).getEdges().length >= this.args.maxNumberEdgesMoving && this.moveEdge(b);
        }
        if (this.selecting) {
            this.setSelecting(!1);
            for (var c = (parseFloat(this.selectorSVGNode.getAttribute("x")) - DOM.select(this.id).getAttribute("dragx")) / this.getFormatter().getWidth(), d = (parseFloat(this.selectorSVGNode.getAttribute("y")) - DOM.select(this.id).getAttribute("dragy")) / this.getFormatter().getHeight(), e = c + parseFloat(this.selectorSVGNode.getAttribute("width") / this.formatter.getWidth()), f = d + parseFloat(this.selectorSVGNode.getAttribute("height") / this.formatter.getHeight()), g = this.getLayout().getVerticesByArea(c / this.getFormatter().getZoomScale, d / this.getFormatter().getZoomScale, e / this.getFormatter().getZoomScale, f / this.getFormatter().getZoomScale), h = 0; h < g.length; h++) this.selectNode(g[h].getId());
            null != this.selectorSVGNode && this._svg.removeChild(this.selectorSVGNode), this.args.labeled && (this.clearLabels(), 
            this.renderLabels()), this.selectorSVGNode = null;
        }
    }
}, GraphCanvas.prototype.displaySelection = function(a, b, c, d) {
    null != this.selectorSVGNode ? (this.selectorSVGNode.setAttribute("x", a), this.selectorSVGNode.setAttribute("y", b), 
    this.selectorSVGNode.setAttribute("width", c), this.selectorSVGNode.setAttribute("height", d)) : this.selectorSVGNode = SVG.drawRectangle(a, b, c, d, this._svg, {
        fill: "red",
        stroke: "black",
        opacity: "0.2",
        "stroke-opacity": "1"
    });
}, GraphCanvas.prototype._startDragging = function(a) {
    if (this.isDraggingCanvasEnabled() || this.isNodeCanvas(a.target) && (this.draggingElement = null), 
    this.isVertex(a.target) || this.isNodeBackground(a.target) && this.isDraggingCanvasEnabled() || this.isNodeCanvas(a.target) && this.isDraggingCanvasEnabled()) {
        this.clearLabels(), this.draggingElement = a.target, this.dragging = !0;
        var b = this.getSVGCoordenates(a);
        this.nMouseOffsetX = b.x - parseInt(a.target.getAttribute("dragx")), this.nMouseOffsetY = b.y - parseInt(a.target.getAttribute("dragy")), 
        this.isVertex(a.target) ? (this.dragStartX = parseInt(this.draggingElement.getAttribute("dragx")) * this.getFormatter().getZoomScale() + parseFloat(DOM.select(this.id).getAttribute("dragx")), 
        this.dragStartY = parseInt(this.draggingElement.getAttribute("dragy")) * this.getFormatter().getZoomScale() + parseFloat(DOM.select(this.id).getAttribute("dragy"))) : (this.dragStartX = b.x - parseInt(this.draggingElement.getAttribute("dragx")), 
        this.dragStartY = b.y - parseInt(this.draggingElement.getAttribute("dragy")));
    }
}, GraphCanvas.prototype._stopDragging = function(a) {
    this.nMouseOffsetX = 0, this.nMouseOffsetX = 0, this.dragging = !1, this.draggingElement = null, 
    this.renderLabels(), this.setLinking(!1), this.setMultipleSelection(!0), this.selecting = !1;
}, GraphCanvas.prototype.moveEdge = function(a) {
    for (var b = this.getLayout().getNodeById(a).x * this.getFormatter().getWidth(), c = this.getLayout().getNodeById(a).y * this.getFormatter().getHeight(), d = 0; d < this.getDataset().getVertexById(a).getEdgesOut().length; d++) {
        var e = this.getDataset().getVertexById(a).getEdgesOut()[d].getId(), f = this.getSVGEdgeId(e), g = this.getFormatter().getEdgeById(e);
        g instanceof LineEdgeGraphFormatter && (DOM.select(f + "_shadow").setAttribute("x2", b), 
        DOM.select(f + "_shadow").setAttribute("y2", c), DOM.select(f).setAttribute("x2", b), 
        DOM.select(f).setAttribute("y2", c)), (g instanceof DirectedLineEdgeGraphFormatter || g instanceof OdirectedLineEdgeGraphFormatter || g instanceof OdotDirectedLineEdgeGraphFormatter || g instanceof DotDirectedLineEdgeGraphFormatter || g instanceof CutDirectedLineEdgeGraphFormatter) && (this.removeEdge(e), 
        this.renderEdge(e));
    }
    for (var d = 0; d < this.getDataset().getVertexById(a).getEdgesIn().length; d++) {
        var e = this.getDataset().getVertexById(a).getEdgesIn()[d].getId(), f = this.getSVGEdgeId(e), g = this.getFormatter().getEdgeById(e);
        if (g instanceof LineEdgeGraphFormatter && (DOM.select(f).setAttribute("x1", b), 
        DOM.select(f).setAttribute("y1", c), DOM.select(f + "_shadow").setAttribute("x1", b), 
        DOM.select(f + "_shadow").setAttribute("y1", c)), (g instanceof DirectedLineEdgeGraphFormatter || g instanceof OdirectedLineEdgeGraphFormatter || g instanceof OdotDirectedLineEdgeGraphFormatter || g instanceof DotDirectedLineEdgeGraphFormatter || g instanceof CutDirectedLineEdgeGraphFormatter) && (this.removeEdge(e), 
        this.renderEdge(e)), g instanceof BezierEdgeGraphFormatter) {
            var h = this.getFormatter().getVertexById(a).getDefault().getSize() * this.getFormatter().getNodesMaxSize(), i = this.calculateCoordenatesBezier(h, b, c);
            DOM.select(f).setAttribute("d", i);
        }
    }
}, GraphCanvas.prototype.moveNode = function(a) {
    var b = this.getLayout().getNodeById(a).x * this.getFormatter().getWidth(), c = this.getLayout().getNodeById(a).y * this.getFormatter().getHeight(), d = DOM.select(this.getSVGNodeId(a));
    d.setAttribute("dragx", b), d.setAttribute("dragy", c), d.setAttribute("transform", "translate(" + b + "," + c + ")"), 
    this.getDataset().getVertexById(a).getEdges().length < this.args.maxNumberEdgesMoving && this.moveEdge(a);
}, GraphCanvas.prototype._movingNode = function(a, b, c) {
    var d = this.getVertexIdFromSVGId(a.getAttribute("id"));
    this.getLayout().getNodeById(d).setCoordinates(b / this.getFormatter().getWidth(), c / this.getFormatter().getHeight()), 
    this.desplazamientoX = 0, this.desplazamientoY = 0, this.removeLabel(d), this.renderLabel(d);
}, GraphCanvas.prototype.init = function() {
    this._svg = this.createSVGDom(this.targetID, this.id, this.getFormatter().getWidth(), this.getFormatter().getHeight(), this.getFormatter().getBackgroundColor()), 
    this.GraphGroup = SVG.drawGroup(this._svg, [ [ "id", this.args.idGraph ], [ "transform", "translate(0,0), scale(1)" ] ]), 
    this.GraphBackground = SVG.drawGroup(this.GraphGroup, [ [ "id", this.args.idBackground ] ]), 
    this.GraphEdgeGroup = SVG.drawGroup(this.GraphGroup, [ [ "id", this.args.idEdgesGraph ] ]), 
    this.GraphNodeGroup = SVG.drawGroup(this.GraphGroup, [ [ "id", this.args.idNodesGraph ] ]), 
    this.GraphLabelGroup = SVG.drawGroup(this.GraphGroup, [ [ "id", this.args.idLabelGraph ] ]), 
    null != this.getFormatter().getBackgroundImage() && "" != this.getFormatter().getBackgroundImage() && this.setBackgroundImage(this.getFormatter().getBackgroundImage());
    var a = this;
    this._svg.addEventListener("click", function(b) {
        a.mouseClick(b);
    }, !1), this._svg.addEventListener("mousemove", function(b) {
        a.mouseMove(b, a);
    }, !1), this._svg.addEventListener("mousedown", function(b) {
        a.mouseDown(b, a);
    }, !1), this._svg.addEventListener("mouseup", function(b) {
        a.mouseUp(b, a);
    }, !1);
}, GraphCanvas.prototype.setBackgroundImage = function() {
    null != this.NodeSVGbackgroundImage && this.NodeSVGbackgroundImage.parentNode.removeChild(this.NodeSVGbackgroundImage), 
    $("#" + this.targetID).svg(), $("#" + this.targetID).svg("get"), $("#" + this.targetID).svg("get")._svg = document.getElementById(this.id);
    var a = $("#" + this.targetID).svg("get");
    this.NodeSVGbackgroundImage = a.image(0, 0, this.getFormatter().getWidth(), this.getFormatter().getHeight(), this.getFormatter().getBackgroundImage()), 
    this.NodeSVGbackgroundImage.setAttribute("id", this.args.idBackgroundNode), this.NodeSVGbackgroundImage.setAttribute("x", 0), 
    this.NodeSVGbackgroundImage.setAttribute("y", 0), this.NodeSVGbackgroundImage.setAttribute("dragx", 0), 
    this.NodeSVGbackgroundImage.setAttribute("dragy", 0), null != this.getFormatter().args.backgroundImageHeight && this.NodeSVGbackgroundImage.setAttribute("height", this.getFormatter().args.backgroundImageHeight), 
    null != this.getFormatter().args.backgroundImageWidth && this.NodeSVGbackgroundImage.setAttribute("width", this.getFormatter().args.backgroundImageWidth), 
    null != this.getFormatter().args.backgroundImageX && this.NodeSVGbackgroundImage.setAttribute("x", this.getFormatter().args.backgroundImageX), 
    null != this.getFormatter().args.backgroundImageY && this.NodeSVGbackgroundImage.setAttribute("y", this.getFormatter().args.backgroundImageY), 
    this.GraphBackground.appendChild(this.NodeSVGbackgroundImage), this.NodeSVGbackgroundImage.removeAttribute("href"), 
    this.NodeSVGbackgroundImage.setAttribute("xlink:href", this.getFormatter().getBackgroundImage());
}, GraphCanvas.prototype.removeBackgroundImage = function() {
    null != this.NodeSVGbackgroundImage && this.NodeSVGbackgroundImage.parentNode.removeChild(this.NodeSVGbackgroundImage);
}, GraphCanvas.prototype._setBackgroundColor = function(a) {
    var b = [ [ "fill", a ] ];
    SVG.drawRectangle(0, 0, this.getFormatter().getWidth(), this.getFormatter().getHeight(), this.GraphBackground, b);
}, GraphCanvas.prototype.toJSON = function() {
    var a = {};
    return a.dataset = {}, a.formatter = {}, a.layout = {}, a.dataset = this.getDataset().toJSON(), 
    a.formatter = this.getFormatter().toJSON(), a.layout = this.getLayout().toJSON(), 
    a;
}, GraphCanvas.prototype.toHTML = function() {
    var a = this._svg.parentElement.innerHTML, b = a.indexOf("<svg"), c = a.indexOf("</svg>") + 6;
    return a.substr(b, c);
}, GraphCanvas.prototype.draw = function(a, b, c) {
    this.setDataset(a), this.setFormatter(b), this.setLayout(c);
    var d = this;
    this.getFormatter().changed.attach(function(a, b) {
        d.removeNode(b.getId()), d.renderNode(b.getId()), d.args.labeled && (d.removeLabel(b.getId()), 
        d.renderLabel(b.getId()));
    }), this.getFormatter().edgeChanged.attach(function(a, b) {
        d.removeEdge(b.getId()), d.renderEdge(b.getId());
    }), this.getFormatter().resized.attach(function(a, b) {
        d.resize(d.getFormatter().getWidth(), d.getFormatter().getHeight());
    }), this.getFormatter().backgroundImageChanged.attach(function(a, b) {
        d.setBackgroundImage(d.getFormatter().getBackgroundImage());
    }), this.getFormatter().backgroundColorChanged.attach(function(a, b) {
        d._setBackgroundColor(d.getFormatter().getBackgroundColor());
    }), this.getLayout().changed.attach(function(a, b) {
        d.moveNode(b.getId()), d.moveEdge(b.getId()), d.args.labeled && (d.removeLabel(b.getId()), 
        d.renderLabel(b.getId()));
    }), this.getDataset().newVertex.attach(function(a, b) {
        d.renderNode(b.getId()), d.args.labeled && d.renderLabel(b.getId());
    }), this.getDataset().newEdge.attach(function(a, b) {
        d.renderEdge(b.getId());
    }), this.getDataset().vertexDeleted.attach(function(a, b) {
        d.removeNode(b.getId()), d.args.labeled && d.removeLabel(b.getId());
    }), this.getDataset().edgeDeleted.attach(function(a, b) {
        d.removeEdge(b.getId());
    }), this.getDataset().vertexNameChanged.attach(function(a, b) {
        d.args.labeled && (d.removeLabel(b.item.getId()), d.removeLabel(b.item.getId()), 
        d.renderLabel(b.item.getId()));
    }), this.init(), this.render();
}, GraphCanvas.prototype.render = function() {
    for (var a in this.getDataset().getVertices()) this.renderNode(a);
    this.renderLabels(), this.renderEdges();
}, GraphCanvas.prototype.renderLabels = function() {
    if (this.args.labeled) for (var a in this.getDataset().getVertices()) this.renderLabel(a);
}, GraphCanvas.prototype.removeLabels = function() {
    for (var a in this.getDataset().getVertices()) this.removeLabel(a);
}, GraphCanvas.prototype.isNodeCanvas = function(a) {
    return a.id == this.args.idGraph || a.id == this.id;
}, GraphCanvas.prototype.isNodeBackground = function(a) {
    return a.id == this.args.idBackgroundNode;
}, GraphCanvas.prototype.isVertex = function(a) {
    return null != a.getAttribute("id") && -1 != a.getAttribute("id").indexOf("_v_");
}, GraphCanvas.prototype.isLabel = function(a) {
    return null != a.getAttribute("id") && -1 != a.getAttribute("id").indexOf("_l_");
}, GraphCanvas.prototype.isEdge = function(a) {
    return null != a.getAttribute("id") && -1 != a.getAttribute("id").indexOf("_e_");
}, GraphCanvas.prototype.resize = function(a, b) {
    null != this.NodeSVGbackgroundImage && (this.NodeSVGbackgroundImage.setAttribute("width", a), 
    this.NodeSVGbackgroundImage.setAttribute("height", b)), this._svg.setAttribute("width", a), 
    this._svg.setAttribute("height", b), this.clearCanvas(), this.render();
}, GraphCanvas.prototype.clearCanvas = function() {
    DOM.removeChilds(this.GraphEdgeGroup.getAttribute("id")), DOM.removeChilds(this.GraphNodeGroup.getAttribute("id")), 
    this.clearLabels();
}, GraphCanvas.prototype.clearLabels = function() {
    DOM.removeChilds(this.GraphLabelGroup.getAttribute("id"));
}, GraphCanvas.prototype.getSVGNodeId = function(a) {
    return this.id + "_v_" + a;
}, GraphCanvas.prototype.getSVGEdgeId = function(a) {
    return this.id + "_e_" + a;
}, GraphCanvas.prototype.getSVGArrowEdgeId = function(a) {
    return this.id + "_arrow_" + a;
}, GraphCanvas.prototype.getSVGLabelId = function(a) {
    return this.id + "_l_" + a;
}, GraphCanvas.prototype.blinkVertexById = function(a) {
    $("#" + this.getSVGNodeId(a)).fadeIn().fadeOut().fadeIn().fadeOut().fadeIn().fadeOut();
}, GraphCanvas.prototype.getVertexIdFromSVGId = function(a) {
    return a.replace(this.id, "").replace("_v_", "");
}, GraphCanvas.prototype.getEdgeIdFromSVGId = function(a) {
    return a.replace(this.id, "").replace("_e_", "");
}, GraphCanvas.prototype.getVertexById = function(a) {
    return document.getElementById(this.getSVGNodeId(a));
}, GraphCanvas.prototype.renderNodes = function() {
    for (var a in this.getDataset().getVertices()) this.renderNode(a);
}, GraphCanvas.prototype.overNode = function(a) {
    if (this.args.interactive && null == this.args.isVertexSelected[a]) {
        var b = this.getFormatter().getVertexById(a).getOver();
        b.args.cursor = "pointer", this.changeVertexFormat(a, b);
    }
}, GraphCanvas.prototype.outNode = function(a) {
    this.args.interactive && null == this.args.isVertexSelected[a] && this.changeVertexFormat(a, this.getFormatter().getVertexById(a).getDefault());
}, GraphCanvas.prototype.overLabel = function(a) {
    this.overNode(a);
}, GraphCanvas.prototype.outLabel = function(a) {
    this.outNode(a);
}, GraphCanvas.prototype.clickNode = function(a) {
    this.args.interactive && (null == this.args.isVertexSelected[a] ? this.selectNode(a) : this.deselectNode(a));
}, GraphCanvas.prototype.selectNode = function(a) {
    for (var b = 0; b < this.args.selectedVertices.length; b++) {
        var c = this.getFormatter().getVertexById(a).getSelected();
        c.opacity = .2, this.changeVertexFormat(a, this.getFormatter().getVertexById(a).getSelected());
    }
    if (null == this.args.isVertexSelected[a]) {
        var c = this.getFormatter().getVertexById(a).getSelected();
        c.opacity = 1, this.changeVertexFormat(a, this.getFormatter().getVertexById(a).getSelected()), 
        this.args.selectedVertices.push(a), this.args.isVertexSelected[a] = this.args.selectedVertices.length - 1, 
        this.onVertexSelect.notify(a);
    }
}, GraphCanvas.prototype.selectAllEdges = function() {
    this.deselectNodes(), this.deselectEdges();
    for (var a in this.getDataset().edges) this.selectEdge(a);
}, GraphCanvas.prototype.selectAllNodes = function() {
    this.deselectNodes(), this.deselectEdges();
    for (var a in this.getDataset().vertices) this.selectNode(a);
}, GraphCanvas.prototype.selectAll = function() {
    this.deselectNodes(), this.deselectEdges();
    for (var a in this.getDataset().vertices) this.selectNode(a);
    for (var b in this.getDataset().edges) this.selectEdge(b);
}, GraphCanvas.prototype.selectEdge = function(a) {
    null == this.args.isEdgeSelected[a] && (this.changeEdgeFormat(a, this.getFormatter().getEdgeById(a).getSelected()), 
    this.args.isEdgeSelected[a] = !0, this.onEdgeSelect.notify(a));
}, GraphCanvas.prototype.selectEdges = function(a) {
    for (var b = 0; b < a.length; b++) this.selectEdge(a[b]);
}, GraphCanvas.prototype.deselectNode = function(a) {
    if (null != this.args.isVertexSelected[a]) {
        this.changeVertexFormat(a, this.getFormatter().getVertexById(a).getDefault()), this.args.selectedVertices.splice(this.args.isVertexSelected[a], 1);
        var b = this.args.isVertexSelected[a];
        delete this.args.isVertexSelected[a];
        for (var c in this.args.isVertexSelected) this.args.isVertexSelected[c] > b && (this.args.isVertexSelected[c] = this.args.isVertexSelected[c] - 1);
    }
}, GraphCanvas.prototype.deselectNodes = function() {
    for (var a = JSON.parse(JSON.stringify(this.getSelectedVertices())), b = 0; b < a.length; b++) this.deselectNode(a[b]);
}, GraphCanvas.prototype.selectNodes = function(a) {
    for (var b = 0; b < a.length; b++) this.selectNode(a[b]);
}, GraphCanvas.prototype.changeVertexFormat = function(a, b) {
    var c = DOM.select(this.getSVGNodeId(a));
    if (null != c) {
        var d = b.toJSON();
        for (var e in d) c.setAttribute(e, d[e]);
        if (this.getFormatter().getVertexById(a) instanceof CircleVertexGraphFormatter) {
            var f = "translate(" + c.getAttribute("dragx") + "," + c.getAttribute("dragy") + "), scale(" + b.getSize() + ")";
            c.setAttribute("transform", f);
        }
    }
}, GraphCanvas.prototype.renderLabel = function(a) {
    var b = (Math.ceil(this.getLayout().getNodeById(a).x * this.getFormatter().getWidth()), 
    Math.ceil(this.getLayout().getNodeById(a).y * this.getFormatter().getHeight()), 
    JSON.parse(JSON.stringify(this.getFormatter().getVertexById(a).getDefault().toJSON().title)));
    b.id = this.getSVGLabelId(this.getDataset().getVertexById(a).getId()), b.dx = -1 * (this.getDataset().getVertexById(a).getName().length * b["font-size"]) / 4 - 4, 
    b.dy = parseFloat(this.getFormatter().getVertexById(a).getDefault().getSize()) + parseFloat(b["font-size"]) + parseFloat(this.getFormatter().getVertexById(a).getDefault().getStrokeWidth()) - 4, 
    b.dragx = Math.ceil(this.getLayout().getNodeById(a).x * this.getFormatter().getWidth());
    var c = parseFloat(this.getFormatter().getVertexById(a).getDefault().getSize()) + Math.ceil(this.getLayout().getNodeById(a).y * this.getFormatter().getHeight());
    b.dragy = c, b.transform = "translate(" + b.dragx + "," + b.dragy + ")";
    var d = SVG.drawText(0, 0, this.getDataset().getVertexById(a).getName(), this.GraphLabelGroup, b);
    this.svgLabels[a] = d;
    var e = this;
    null != d && (d.addEventListener("mouseover", function() {
        e.overLabel(a);
    }, !1), d.addEventListener("mouseout", function() {
        e.outLabel(a);
    }, !1));
}, GraphCanvas.prototype.removeLabel = function(a) {
    null != DOM.select(this.getSVGLabelId(a)) && DOM.select(this.getSVGLabelId(a)).parentNode.removeChild(DOM.select(this.getSVGLabelId(a)));
}, GraphCanvas.prototype.renderNode = function(a) {
    var b = JSON.parse(JSON.stringify(this.getFormatter().getVertexById(a).getDefault().toJSON()));
    b.dragx = Math.ceil(this.getLayout().getNodeById(a).x * this.getFormatter().getWidth()), 
    b.dragy = Math.ceil(this.getLayout().getNodeById(a).y * this.getFormatter().getHeight()), 
    b.transform = "translate(" + b.dragx + "," + b.dragy + ")", b.id = this.getSVGNodeId(a), 
    this.circleDefaultRadius = this.getFormatter().getVertexById(a).getDefault().getSize();
    var c;
    this.getFormatter().getVertexById(a) instanceof CircleVertexGraphFormatter && (c = SVG.drawCircle(0, 0, this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    this.getFormatter().getVertexById(a) instanceof SquareVertexGraphFormatter && (c = SVG.drawRectangle(0 - this.circleDefaultRadius, 0 - this.circleDefaultRadius, 2 * this.circleDefaultRadius, 2 * this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    this.getFormatter().getVertexById(a) instanceof EllipseVertexGraphFormatter && (c = SVG.drawEllipse(0, 0, 1.5 * this.circleDefaultRadius, this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    this.getFormatter().getVertexById(a) instanceof RectangleVertexGraphFormatter && (c = SVG.drawRectangle(0 - 1.5 * this.circleDefaultRadius, 0 - this.circleDefaultRadius, 2 * this.circleDefaultRadius * 1.5, 2 * this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    this.getFormatter().getVertexById(a) instanceof RoundedVertexGraphFormatter && (b.ry = 2, 
    b.rx = 2, c = SVG.drawRectangle(0 - 1.5 * this.circleDefaultRadius, 0 - this.circleDefaultRadius, 2 * this.circleDefaultRadius * 1.5, 2 * this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    this.getFormatter().getVertexById(a) instanceof OctagonVertexGraphFormatter && (b.ry = 2, 
    b.rx = 2, c = SVG.drawRectangle(0 - 1.5 * this.circleDefaultRadius, 0 - this.circleDefaultRadius, 2 * this.circleDefaultRadius * 1.5, 2 * this.circleDefaultRadius, this.GraphNodeGroup, b)), 
    c.internalId = a;
    var d = this;
    null != c && (c.addEventListener("mouseover", function() {
        d.onVertexOver.notify(a), d.overNode(a);
    }, !1), c.addEventListener("mouseout", function() {
        d.onVertexOut.notify(a), d.outNode(a);
    }, !1), c.addEventListener("mouseup", function() {
        d.onVertexUp.notify(a);
    }, !1));
}, GraphCanvas.prototype.removeNode = function(a) {
    DOM.select(this.getSVGNodeId(a)).parentNode.removeChild(DOM.select(this.getSVGNodeId(a))), 
    this.args.labeled && this.removeLabel(a);
}, GraphCanvas.prototype.removeSelected = function() {
    this.removeSelectedEdges(), this.removeSelectedNode();
}, GraphCanvas.prototype.removeSelectedNode = function() {
    var a = JSON.parse(JSON.stringify(this.getSelectedVertices()));
    this.deselectNodes();
    for (var b = a.sort(function(a, b) {
        return a - b;
    }), c = 0; c < b.length; c++) null != this.getDataset().getVertexById(b[c]) && this.getDataset().getVertexById(b[c]).remove();
}, GraphCanvas.prototype.removeEdge = function(a) {
    null != DOM.select(this.getSVGEdgeId(a)) && DOM.select(this.getSVGEdgeId(a)).parentNode.removeChild(DOM.select(this.getSVGEdgeId(a))), 
    null != DOM.select(this.getSVGEdgeId(a) + "_shadow") && DOM.select(this.getSVGEdgeId(a) + "_shadow").parentNode.removeChild(DOM.select(this.getSVGEdgeId(a) + "_shadow")), 
    null != DOM.select(this.getSVGArrowEdgeId(a)) && DOM.select(this.getSVGArrowEdgeId(a)).parentNode.removeChild(DOM.select(this.getSVGArrowEdgeId(a)));
}, GraphCanvas.prototype.overEdge = function(a) {
    if (this.args.interactive && !this.dragging && !this.selecting && null == this.args.isEdgeSelected[a]) {
        var b = this.getFormatter().getEdgeById(a).getOver();
        b.args.cursor = "pointer", this.changeEdgeFormat(a, b);
    }
}, GraphCanvas.prototype.outEdge = function(a) {
    this.args.interactive && null == this.args.isEdgeSelected[a] && this.changeEdgeFormat(a, this.getFormatter().getEdgeById(a).getDefault());
}, GraphCanvas.prototype.changeEdgeFormat = function(a, b) {
    var c = DOM.select(this.getSVGEdgeId(a) + "_shadow");
    if (null != c) {
        var d = b.toJSON();
        for (var e in d) c.setAttribute(e, d[e]);
    }
}, GraphCanvas.prototype.deselectEdge = function(a) {
    if (null != this.args.isEdgeSelected[a]) {
        this.changeEdgeFormat(a, this.getFormatter().getEdgeById(a).getDefault());
        this.args.isEdgeSelected[a];
        delete this.args.isEdgeSelected[a];
    }
}, GraphCanvas.prototype.deselectEdges = function() {
    for (var a = JSON.parse(JSON.stringify(this.getSelectedEdges())), b = 0; b < a.length; b++) this.deselectEdge(a[b]);
}, GraphCanvas.prototype.removeSelectedEdges = function() {
    var a = JSON.parse(JSON.stringify(this.getSelectedEdges()));
    this.deselectEdges();
    for (var b = 0; b < a.length; b++) null != this.getDataset().getEdgeById(a[b]) && this.getDataset().getEdgeById(a[b]).remove();
}, GraphCanvas.prototype.renderEdge = function(a) {
    var b = this.getFormatter().getEdgeById(a).getDefault().toJSON(), c = this.getDataset().getEdgeById(a), d = this.getVertexById(c.getNodeTarget().getId()), e = this.getVertexById(c.getNodeSource().getId());
    b.id = this.getSVGEdgeId(c.getId()) + "_shadow";
    var f = null;
    if (this.getFormatter().getEdgeById(a) instanceof LineEdgeGraphFormatter) {
        var g = e.getAttribute("dragx"), h = e.getAttribute("dragy"), i = d.getAttribute("dragx"), j = d.getAttribute("dragy");
        SVG.drawLine(g, h, i, j, this.GraphEdgeGroup, b);
        var k = {};
        k.id = this.getSVGEdgeId(c.getId()), k["stroke-opacity"] = 0, k["stroke-width"] = 4, 
        k.stroke = "black", f = SVG.drawLine(e.getAttribute("dragx"), e.getAttribute("dragy"), d.getAttribute("dragx"), d.getAttribute("dragy"), this.GraphEdgeGroup, k);
    }
    if (this.getFormatter().getEdgeById(a) instanceof BezierEdgeGraphFormatter) {
        var l = c.getNodeTarget().getId(), m = this.formatter.getVertexById(l).getDefault().getSize() * this.getFormatter().getNodesMaxSize();
        b.fill = "none", b.id = this.getSVGEdgeId(a);
        var n = this.calculateCoordenatesBezier(m, e.getAttribute("dragx"), e.getAttribute("dragy"));
        f = SVG.drawPath(n, this.GraphEdgeGroup, b);
    }
    if (this.getFormatter().getEdgeById(a) instanceof DirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof CutDirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof DotDirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof OdotDirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof OdirectedLineEdgeGraphFormatter) {
        var g = e.getAttribute("dragx"), h = e.getAttribute("dragy"), i = d.getAttribute("dragx"), j = d.getAttribute("dragy"), o = parseFloat(this.getFormatter().getVertexById(this.getDataset().getEdgeById(a).getNodeTarget().getId()).getDefault().getSize() * this.circleDefaultRadius), p = this._calculateEdgePointerPosition(g, h, i, j, o);
        i = p.x, j = p.y, SVG.drawLine(g, h, i, j, this.GraphEdgeGroup, b);
        var k = {};
        k.id = this.getSVGEdgeId(c.getId()), k["stroke-opacity"] = 0, k["stroke-width"] = 4, 
        k.stroke = "black", f = SVG.drawLine(g, h, i, j, this.GraphEdgeGroup, k);
    }
    if (this.getFormatter().getEdgeById(a) instanceof DirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof OdirectedLineEdgeGraphFormatter) {
        var g = e.getAttribute("dragx"), h = e.getAttribute("dragy"), i = d.getAttribute("dragx"), j = d.getAttribute("dragy"), p = this._calculateEdgePointerPosition(g, h, i, j, o);
        i = p.x, j = p.y;
        var q = Geometry.toDegree(p.angle) + 90;
        this.arrowDefaultSize = this.getFormatter().getEdgeById(a).getArrowSize();
        var r, n = "-" + this.arrowDefaultSize + ",0 0,-" + 2 * parseFloat(this.arrowDefaultSize) + " " + this.arrowDefaultSize + ",0";
        r = this.getFormatter().getEdgeById(a) instanceof DirectedLineEdgeGraphFormatter ? [ [ "fill", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "stroke", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "id", this.getSVGArrowEdgeId(a) ] ] : [ [ "fill", "#FFFFFF" ], [ "stroke", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "id", this.getSVGArrowEdgeId(a) ] ];
        var s = SVG.drawPoligon(n, this.GraphEdgeGroup, r);
        s.setAttribute("transform", " translate(" + i + ", " + j + "), rotate(" + q + ")");
    }
    if (this.getFormatter().getEdgeById(a) instanceof CutDirectedLineEdgeGraphFormatter) {
        var g = e.getAttribute("dragx"), h = e.getAttribute("dragy"), i = d.getAttribute("dragx"), j = d.getAttribute("dragy"), p = this._calculateEdgePointerPosition(g, h, i, j, o);
        i = p.x, j = p.y;
        var q = Geometry.toDegree(p.angle) + 90, n = "-4,0 4,0 4,-2 -4,-2", s = SVG.drawPoligon(n, this.GraphEdgeGroup, [ [ "fill", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "stroke", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "id", this.getSVGArrowEdgeId(a) ] ]);
        s.setAttribute("transform", " translate(" + i + ", " + j + "), rotate(" + q + ")");
    }
    if (this.getFormatter().getEdgeById(a) instanceof DotDirectedLineEdgeGraphFormatter || this.getFormatter().getEdgeById(a) instanceof OdotDirectedLineEdgeGraphFormatter) {
        var g = e.getAttribute("dragx"), h = e.getAttribute("dragy"), i = d.getAttribute("dragx"), j = d.getAttribute("dragy"), p = this._calculateEdgePointerPosition(g, h, i, j, o);
        i = p.x, j = p.y;
        var q = Geometry.toDegree(p.angle) + 90, r = [];
        r = this.getFormatter().getEdgeById(a) instanceof OdotDirectedLineEdgeGraphFormatter ? [ [ "fill", "#FFFFFF" ], [ "stroke", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "id", this.getSVGArrowEdgeId(a) ] ] : [ [ "fill", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "stroke", this.getFormatter().getEdgeById(a).getDefault().getStroke() ], [ "id", this.getSVGArrowEdgeId(a) ] ];
        var s = SVG.drawCircle(0, 0, 4, this.GraphEdgeGroup, r);
        s.setAttribute("transform", " translate(" + i + ", " + j + "), rotate(" + q + ")");
    }
    var t = this;
    null != f && this.getDataset().getEdgesCount() < this.args.maxNumberEdgesFiringEvents && (f.addEventListener("mouseover", function() {
        t.overEdge(a);
    }, !1), f.addEventListener("mouseout", function() {
        t.outEdge(a);
    }, !1));
}, GraphCanvas.prototype._calculateEdgePointerPosition = function(a, b, c, d, e) {
    var f = Geometry.getAngleBetweenTwoPoints(a, b, c, d);
    if (0 > c - a) {
        var g = Geometry.getAdjacentSideOfRectangleRight(f, e);
        c = parseFloat(c) + parseFloat(g), arrowX = parseFloat(c) + parseFloat(g) + this.arrowDefaultSize / 2;
    } else {
        var g = Geometry.getAdjacentSideOfRectangleRight(f, e);
        c = parseFloat(c) - parseFloat(g), arrowX = parseFloat(c) - parseFloat(g) - this.arrowDefaultSize / 2;
    }
    if (d - b > 0) {
        var h = Geometry.getOppositeSideOfRectangleRight(f, e);
        d = parseFloat(d) - parseFloat(h), arrowY = parseFloat(d) - parseFloat(h) - this.arrowDefaultSize / 2;
    } else {
        var h = Geometry.getOppositeSideOfRectangleRight(f, e);
        d = parseFloat(d) + parseFloat(h), arrowY = parseFloat(d) + parseFloat(h) - this.arrowDefaultSize / 2;
    }
    return {
        x: arrowX,
        y: arrowY,
        angle: f
    };
}, GraphCanvas.prototype.calculateCoordenatesBezier = function(a, b, c) {
    var d = b - a / 2, e = c - a / 2, f = parseFloat(b) + parseFloat(a / 2), g = c - a / 2, h = (f - d) / 2 + d, i = c - 2 * a, j = "M" + d + "," + e + " T" + h + "," + i + " " + f + "," + g;
    return j;
}, GraphCanvas.prototype.renderEdges = function() {
    for (var a in this.getDataset().getEdges()) this.renderEdge(this.getDataset().getEdgeById(a).getId());
}, GraphCanvas.prototype.getLastSelectedNode = function() {
    var a = null;
    if (this.getSelectedVertices().length > 0) {
        var b = this.getSelectedVertices()[this.getSelectedVertices().length - 1];
        a = this.getDataset().getVertexById(b);
    }
    return a;
}, GraphCanvas.prototype.setDataset = function(a) {
    this.dataset = a;
}, GraphCanvas.prototype.setFormatter = function(a) {
    this.formatter = a;
}, GraphCanvas.prototype.setLayout = function(a) {
    this.layout = a;
}, GraphCanvas.prototype.getDataset = function() {
    return this.dataset;
}, GraphCanvas.prototype.getFormatter = function() {
    return this.formatter;
}, GraphCanvas.prototype.getLayout = function() {
    return this.layout;
}, GraphCanvas.prototype.addVertex = function(a, b) {
    this.getDataset().addNode(a, b);
}, GraphCanvas.prototype.removeVertex = function(a) {
    this.getDataset().getVertexById(a).remove();
}, GraphCanvas.prototype.addEdge = function(a, b, c, d) {
    this.getDataset().addEdge(a, b, c, d);
}, GraphCanvas.prototype.getWidth = function() {
    return this.getFormatter().getWidth();
}, GraphCanvas.prototype.getHeight = function() {
    return this.getFormatter().getHeight();
}, GraphCanvas.prototype.getBackgroundImage = function() {
    return this.getFormatter().getBackgroundImage();
}, GraphCanvas.prototype.getBackgroundColor = function() {
    return this.getFormatter().getBackgroundColor();
}, GraphCanvas.prototype.setBackgroundColor = function() {
    this.getFormatter().setBackgroundColor(value);
}, GraphCanvas.prototype.setVertexSize = function(a, b) {
    this.getFormatter().getVertexById(a).getDefault().setSize(b);
}, GraphCanvas.prototype.getVertexSize = function(a) {
    return this.getFormatter().getVertexById(a).getDefault().getSize();
}, GraphCanvas.prototype.setVertexStroke = function(a, b) {
    this.getFormatter().getVertexById(a).getDefault().setStroke(b);
}, GraphCanvas.prototype.getVertexStroke = function(a) {
    return this.getFormatter().getVertexById(a).getDefault().getStroke();
}, GraphCanvas.prototype.setVertexStrokeOpacity = function(a, b) {
    this.getFormatter().getVertexById(a).getDefault().setStrokeOpacity(b);
}, GraphCanvas.prototype.getVertexStrokeOpacity = function(a) {
    return this.getFormatter().getVertexById(a).getDefault().getStrokeOpacity();
}, GraphCanvas.prototype.setVertexOpacity = function(a, b) {
    this.getFormatter().getVertexById(a).getDefault().setOpacity(b);
}, GraphCanvas.prototype.getVertexOpacity = function(a) {
    return this.getFormatter().getVertexById(a).getDefault().getOpacity();
}, GraphCanvas.prototype.setVertexFill = function(a, b) {
    this.getFormatter().getVertexById(a).getDefault().setFill(b);
}, GraphCanvas.prototype.getVertexFill = function(a) {
    return this.getFormatter().getVertexById(a).getDefault().getFill();
}, GraphCanvas.prototype.setEdgeSize = function(a, b) {
    this.getFormatter().getEdgeById(a).getDefault().setSize(b);
}, GraphCanvas.prototype.getEdgeSize = function(a) {
    return this.getFormatter().getEdgeById(a).getDefault().getSize();
}, GraphCanvas.prototype.setEdgeStroke = function(a, b) {
    this.getFormatter().getEdgeById(a).getDefault().setStroke(b);
}, GraphCanvas.prototype.getEdgeStroke = function(a) {
    return this.getFormatter().getEdgeById(a).getDefault().getStroke();
}, GraphCanvas.prototype.setEdgeStrokeOpacity = function(a, b) {
    this.getFormatter().getEdgeById(a).getDefault().setStrokeOpacity(b);
}, GraphCanvas.prototype.getEdgeStrokeOpacity = function(a) {
    return this.getFormatter().getEdgeById(a).getDefault().getStrokeOpacity();
}, GraphCanvas.prototype.setEdgeFill = function(a, b) {
    this.getFormatter().getEdgeById(a).getDefault().setFill(b);
}, GraphCanvas.prototype.getEdgeFill = function(a) {
    return this.getFormatter().getEdgeById(a).getDefault().getFill();
}, GraphCanvas.prototype.setCoordinates = function(a, b, c) {
    return this.getLayout().getEdgeById(a).setCoordinates(b, c);
}, GraphDataset.prototype.loadFromJSON = DataSet.prototype.loadFromJSON, GraphDataset.prototype.toJSON = DataSet.prototype.toJSON, 
GraphDataset.prototype.validate = DataSet.prototype.validate, GraphDataset.prototype.getMaxClass = function() {
    var a = 0;
    for (var b in this.vertices) this.vertices[b].getEdgesCount() > a && (a = this.vertices[b].getEdgesCount());
    return a;
}, GraphDataset.prototype.getMinClass = function() {
    var a = Math.min();
    for (var b in this.vertices) this.vertices[b].getEdgesCount() < a && (a = this.vertices[b].getEdgesCount());
    return a;
}, GraphDataset.prototype.getVertexByName = function(a) {
    var b = new Array();
    for (var c in this.verticesIndex[a]) {
        var d = this.getVertexById(this.verticesIndex[a][c]);
        return b.push(d), d;
    }
    return 1 >= b ? this.getVertexById(this.verticesIndex[a]) : b;
}, GraphDataset.prototype.getVertexById = function(a) {
    return this.vertices[a];
}, GraphDataset.prototype.toSIF = function() {
    var a = new SifFileDataAdapter();
    return a.toSIF(this);
}, GraphDataset.prototype.toSIFID = function() {
    var a = new SifFileDataAdapter();
    return a.toSIFID(this);
}, GraphDataset.prototype.toDOT = function() {
    var a = new DotFileDataAdapter();
    return a.toDOT(this);
}, GraphDataset.prototype.toDOTID = function() {
    var a = new DotFileDataAdapter();
    return a.toDOTID(this);
}, GraphDataset.prototype._addNode = function(a, b) {
    return new Vertex(this._getVerticesCount() - 1, a, b);
}, GraphDataset.prototype.addNode = function(a, b) {
    this.json.vertices.push(a), this._addVerticesIndex(a, this._getVerticesCount() - 1);
    var c = this._addNode(a, b);
    this.vertices[this._getVerticesCount() - 1] = c, this._setNodeEvents(c), this.newVertex.notify(c);
}, GraphDataset.prototype._addVerticesIndex = function(a, b) {
    null == this.verticesIndex[a] && (this.verticesIndex[a] = new Array()), this.verticesIndex[a].push(b);
}, GraphDataset.prototype.addEdge = function(a, b, c, d) {
    this.json.edges.push(a);
    var e = this.getVertexById(b), f = this.getVertexById(c), g = this.getEdgesCount() - 1;
    this.edges[g] = new Edge(g, a, e, f, d), this.json.relations.push({
        index: g,
        sourceIndex: b,
        targetIndex: c,
        args: d
    }), e.addEdge(this.edges[g]), f.addEdge(this.edges[g]), this._setEdgeEvents(this.edges[g]), 
    this.newEdge.notify(this.edges[g]);
}, GraphDataset.prototype.getVertices = function() {
    return this.vertices;
}, GraphDataset.prototype.getEdges = function() {
    return this.edges;
}, GraphDataset.prototype.getEdgeById = function(a) {
    return this.edges[a];
}, GraphDataset.prototype._getVerticesCount = function() {
    return this.json.vertices.length;
}, GraphDataset.prototype.getVerticesCount = function() {
    var a = 0;
    for (var b in this.getVertices()) a++;
    return a;
}, GraphDataset.prototype.getEdgesCount = function() {
    return this.json.edges.length;
}, GraphDataset.prototype.init = function() {
    this.edges = new Object(), this.vertices = new Object();
}, GraphDataset.prototype._setNodeEvents = function(a) {
    var b = this;
    a.deleted.attach(function(a, c) {
        b._removeNode(c);
    }), a.nameChanged.attach(function(a, c) {
        for (var d = c.item, e = d.name, f = b.verticesIndex[c.previousName], g = 0; g < f.length; g++) f[g] == d.id && f.splice(g, 1);
        0 == f.length && delete b.verticesIndex[c.previousName], b._addVerticesIndex(e, d.id), 
        b.json.vertices[d.id] = e, b.vertexNameChanged.notify(c);
    });
}, GraphDataset.prototype._setEdgeEvents = function(a) {
    var b = this;
    a.nameChanged.attach(function(a, c) {
        b.edgeNameChanged.notify(c);
    }), a.deleted.attach(function(a, c) {
        b._removeEdge(c);
    });
}, GraphDataset.prototype._connectVerticesByName = function(a, b) {
    var c = this.getVertexByName(a), d = this.getVertexByName(b);
    null != c && null != d ? this.addEdge(c.getName() + "_" + d.getName(), c.getId(), d.getId(), {}) : (null == c && console.log("No encontrado: " + a), 
    null == d && console.log("No encontrado: " + b));
}, GraphDataset.prototype.loadFromJSON = function(a) {
    var a = a;
    this.init(), this.json = new Object(), this.json.vertices = new Array(), this.json.edges = new Array(), 
    this.json.relations = new Array();
    for (var b = 0; b < a.nodes.length; b++) if (null != a.nodes[b]) {
        var c = a.nodes[b];
        this.addNode(c);
    } else this.json.vertices.push(null);
    for (var b = 0; b < a.edges.length; b++) if (null != a.edges[b]) {
        if (null != a.relations[b]) {
            var c = a.edges[b];
            this.addEdge(c, a.relations[b].sourceIndex, a.relations[b].targetIndex, a.relations[b].args);
        }
    } else this.json.edges.push(null), this.json.relations.push(null);
}, GraphDataset.prototype.prettyPrint = function() {
    for (var a in this.vertices) {
        console.log(this.vertices[a].getName());
        for (var b = 0; b < this.vertices[a].getEdgesIn().length; b++) console.log("          --> " + this.vertices[a].getEdgesIn()[b].getNodeTarget().getName());
    }
}, GraphDataset.prototype._removeEdge = function(a) {
    this.json.edges[a.getId()] = null, this.json.relations[a.getId()] = null, delete this.edges[a.getId()], 
    this.edgeDeleted.notify(a);
}, GraphDataset.prototype._removeNode = function(a) {
    this.json.vertices[a.getId()] = null, delete this.vertices[a.getId()], this.vertexDeleted.notify(a);
}, GraphDataset.prototype.toJSON = function() {
    var a = new Object();
    new Array();
    return a.nodes = this.json.vertices, a.edges = this.json.edges, a.relations = this.json.relations, 
    a;
}, GraphDataset.prototype.clone = function() {
    var a = new GraphDataset();
    return a.loadFromJSON(this.toJSON()), a;
}, GraphItem.prototype.getName = function() {
    return this.name;
}, GraphItem.prototype.getId = function() {
    return this.id;
}, GraphItem.prototype.setName = function(a) {
    var b = this.getName();
    this.name = a, this.nameChanged.notify({
        item: this,
        previousName: b
    });
}, ItemGraphFormatter.prototype.getType = function() {
    return this.args.type;
}, ItemGraphFormatter.prototype.toJSON = function() {
    var a = this.args;
    return a.defaultFormat = this.getDefault().toJSON(), a.over = this.getOver().toJSON(), 
    a.selected = this.getSelected().toJSON(), a.dragging = this.getDragging().toJSON(), 
    a.id = this.id, a;
}, ItemGraphFormatter.prototype.loadFromJSON = function(a) {
    this.args = a, this.defaultFormat = new ItemFormat(a.defaultFormat), this.over = new ItemFormat(a.over), 
    this.selected = new ItemFormat(a.selected), this.dragging = new ItemFormat(a.dragging), 
    this._setEvents();
}, ItemGraphFormatter.prototype._setEvents = function() {
    var a = this;
    this.defaultFormat.changed.attach(function(b, c) {
        a.over.setSize(a.defaultFormat.getSize()), a.selected.setSize(a.defaultFormat.getSize()), 
        a.dragging.setSize(a.defaultFormat.getSize()), a.stateChanged.notify(a);
    }), this.selected.changed.attach(function(b, c) {
        a.stateChanged.notify(a);
    }), this.over.changed.attach(function(b, c) {
        a.stateChanged.notify(a);
    }), this.dragging.changed.attach(function(b, c) {
        a.stateChanged.notify(a);
    });
}, ItemGraphFormatter.prototype.getId = function() {
    return this.id;
}, ItemGraphFormatter.prototype.getDefault = function() {
    return this.defaultFormat;
}, ItemGraphFormatter.prototype.getSelected = function() {
    return this.selected;
}, ItemGraphFormatter.prototype.getOver = function() {
    return this.over;
}, ItemGraphFormatter.prototype.getDragging = function() {
    return this.dragging;
}, ItemFormat.prototype._fixColor = function(a) {
    var b = a;
    return -1 != a.indexOf("green") && (b = "#04B431"), -1 != a.indexOf("blue") && (b = "#045FB4"), 
    -1 != a.indexOf("red") && (b = "#DF0101"), -1 != a.indexOf("black") && (b = "#000000"), 
    -1 != a.indexOf("white") && (b = "#FFFFFF"), -1 == a.indexOf("#") && (b = "#" + a), 
    b;
}, ItemFormat.prototype.toJSON = function() {
    return null != this.args.strokeOpacity && (this.args["stroke-opacity"] = this.args.strokeOpacity, 
    delete this.args.strokeOpacity), null != this.args.title.fontColor ? this.args.title["font-color"] = this.args.title.fontColor : this.args.title["font-color"] = this.args.fontColor, 
    null != this.args.title.fontSize ? this.args.title["font-size"] = this.args.title.fontSize : this.args.title["font-size"] = this.args.fontSize, 
    this.args;
}, ItemFormat.prototype.getAttribute = function(a) {
    return this.args[a];
}, ItemFormat.prototype.setVisible = function(a) {
    this.args.visible != a && (this.args.visible = a, this.changed.notify(this));
}, ItemFormat.prototype.getVisible = function() {
    return this.args.visible;
}, ItemFormat.prototype.setHidden = function(a) {
    this.args.hidden != a && (this.args.hidden = a, this.changed.notify(this));
}, ItemFormat.prototype.getHidden = function() {
    return this.args.hidden;
}, ItemFormat.prototype.setStroke = function(a) {
    this.args.stroke != a && (this.args.stroke = a, this.changed.notify(this));
}, ItemFormat.prototype.getStroke = function() {
    return this.args.stroke;
}, ItemFormat.prototype.setStrokeOpacity = function(a) {
    this.args.strokeOpacity != a && (this.args.strokeOpacity = a, this.changed.notify(this));
}, ItemFormat.prototype.getStrokeOpacity = function() {
    return this.args["stroke-opacity"];
}, ItemFormat.prototype.setStrokeWidth = function(a) {
    this.args["stroke-width"] != a && (this.args["stroke-width"] = a, this.changed.notify(this));
}, ItemFormat.prototype.getFillOpacity = function() {
    return this.args["fill-opacity"];
}, ItemFormat.prototype.setfillOpacity = function(a) {
    this.args["fill-opacity"] != a && (this.args["fill-opacity"] = a, this.changed.notify(this));
}, ItemFormat.prototype.getStrokeWidth = function() {
    return this.args["stroke-width"];
}, ItemFormat.prototype.setFill = function(a) {
    this.args.fill != a && (this.args.fill = a, this.changed.notify(this));
}, ItemFormat.prototype.getFill = function() {
    return this.args.fill;
}, ItemFormat.prototype.setSize = function(a) {
    this.args.size != a && (this.args.size = a, this.changed.notify(this));
}, ItemFormat.prototype.getSize = function() {
    return this.args.size;
}, ItemFormat.prototype.setOpacity = function(a) {
    this.args.opacity != a && (this.args.opacity = a, this.changed.notify(this));
}, ItemFormat.prototype.getOpacity = function() {
    return this.args.opacity;
}, ItemFormat.prototype.getArrowSize = function() {
    return this.args.arrowSize;
}, ItemFormat.prototype.setArrowSize = function(a) {
    this.args.arrowSize != a && (this.args.arrowSize = a, this.changed.notify(this));
}, ItemFormat.prototype.getFontSize = function() {
    return this.args.title.fontSize;
}, ItemFormat.prototype.setFontSize = function(a) {
    this.args.title.fontSize != a && (this.args.title.fontSize = a, this.changed.notify(this));
}, LayoutDataset.prototype.loadFromJSON = function(a, b) {
    var c = this;
    this.vertices = new Object(), this.dataset = a;
    for (var d in b) this.vertices[d] = new NodeLayout(d, b[d].x, b[d].y), this.vertices[d].changed.attach(function(a, b) {
        c.changed.notify(b);
    });
    this._attachDatasetEvents();
}, LayoutDataset.prototype.toJSON = function() {
    var a = new Object();
    for (var b in this.vertices) a[b] = new Object(), a[b].x = this.vertices[b].x, a[b].y = this.vertices[b].y;
    return a.dataset = new Object(), a.dataset = this.dataset.toJSON(), a;
}, LayoutDataset.prototype.dataBind = function(a) {
    this.dataset = a, this._attachDatasetEvents(), this._calculateLayout();
}, LayoutDataset.prototype._removeVertex = function(a) {
    delete this.vertices[a];
}, LayoutDataset.prototype._attachDatasetEvents = function() {
    var a = this;
    this.dataset.vertexDeleted.attach(function(b, c) {
        a._removeVertex(c.getId());
    }), this.dataset.newVertex.attach(function(b, c) {
        a.vertices[c.getId()] = new NodeLayout(c.getId(), .5, .5), a.vertices[c.getId()].changed.attach(function(b, c) {
            a.changed.notify(c);
        });
    });
}, LayoutDataset.prototype.getType = function() {
    return this.args.type;
}, LayoutDataset.prototype._calculateLayoutVertices = function(a, b) {
    if ("CIRCLE" == a) {
        for (var c = .4, d = .5, e = .5, f = new Array(), g = 0; b > g; g++) x = d + c * Math.sin(2 * g * Math.PI / b), 
        y = e + c * Math.cos(2 * g * Math.PI / b), f.push({
            x: x,
            y: y
        });
        return f;
    }
}, LayoutDataset.prototype._calculateLayout = function() {
    var a = this;
    if ("RANDOM" == this.getType()) for (var b in this.dataset.getVertices()) null == this.vertices[b] && (this.vertices[b] = new NodeLayout(b, 0, 0)), 
    this.vertices[b].setCoordinates(Math.random(), Math.random()), this.vertices[b].changed.attach(function(b, c) {
        a.changed.notify(c);
    });
    if ("CIRCLE" == this.getType()) {
        var c = this.dataset._getVerticesCount(), d = this._calculateLayoutVertices(this.getType(), c), e = 0;
        for (var b in this.dataset.getVertices()) null == this.vertices[b] && (this.vertices[b] = new NodeLayout(b, 0, 0)), 
        this.vertices[b].setCoordinates(d[e].x, d[e].y), e++, this.vertices[b].changed.attach(function(b, c) {
            a.changed.notify(c);
        });
    }
    if ("SQUARE" == this.getType()) {
        for (var c = this.dataset._getVerticesCount(), f = .1, g = .9, h = .1, i = Math.sqrt(c), j = (g - f) / i, d = new Array(), k = 0; i > k; k++) for (var l = 0; i > l; l++) x = k * j + f, 
        y = l * j + h, d.push({
            x: x,
            y: y
        });
        var e = 0;
        for (var b in this.dataset.getVertices()) null == this.vertices[b] && (this.vertices[b] = new NodeLayout(b, 0, 0)), 
        this.vertices[b].setCoordinates(d[e].x, d[e].y), e++, this.vertices[b].changed.attach(function(b, c) {
            a.changed.notify(c);
        });
    }
}, LayoutDataset.prototype.getNodeById = function(a) {
    return this.vertices[a];
}, LayoutDataset.prototype.getVerticesByArea = function(a, b, c, d) {
    var e = new Array();
    for (var f in this.dataset.getVertices()) this.vertices[f].x >= a && this.vertices[f].x <= c && this.vertices[f].y >= b && this.vertices[f].y <= d && e.push(this.vertices[f]);
    return e;
}, LayoutDataset.prototype.getLayout = function(a) {
    if ("CIRCLE" == a) return this.args.type = "CIRCLE", void this._calculateLayout();
    if ("SQUARE" == a) return this.args.type = "SQUARE", void this._calculateLayout();
    if ("RANDOM" == a) return this.args.type = "RANDOM", void this._calculateLayout();
    var b = this.dataset.toDOTID(), c = "http://bioinfo.cipf.es/utils/ws/rest/network/layout/" + a + ".coords", d = this;
    $.ajax({
        async: !0,
        type: "POST",
        url: c,
        dataType: "text",
        data: {
            dot: b
        },
        cache: !1,
        success: function(a) {
            var b = JSON.parse(a);
            for (var c in b) d.vertices[c].setCoordinates(b[c].x, b[c].y);
        }
    });
}, NodeLayout.prototype.getId = function(a) {
    return this.id;
}, NodeLayout.prototype.setCoordinates = function(a, b) {
    this.x = a, this.y = b, this.changed.notify(this);
}, NetworkDataSetFormatter.prototype.loadFromJSON = function(a, b) {
    this.args = new Object(), this.vertices = new Object(), this.args = b, this._setDataset(a);
    for (var c in b.vertices) this.addVertex(c, b.vertices[c]);
    for (var d in b.edges) this.addEdge(d, b.edges[d]);
}, NetworkDataSetFormatter.prototype.toJSON = function() {
    var a = new Object();
    a = JSON.parse(JSON.stringify(this.args)), a.vertices = new Object(), a.edges = new Object();
    for (var b in this.vertices) a.vertices[b] = this.getVertexById(b).toJSON();
    for (var c in this.edges) a.edges[c] = this.getEdgeById(c).toJSON();
    return a;
}, NetworkDataSetFormatter.prototype._getNodeSize = function(a) {
    if (this.isVerticesBalanced()) {
        var b = this.maxClass - this.minClass;
        0 == b && (b = 1);
        var c = this.dataset.getVertexById(a).getEdges().length;
        return c * this.args.nodesMaxSize / b + this.args.nodesMinSize;
    }
    return this.getVertexById(a).getDefault().getSize();
}, NetworkDataSetFormatter.prototype._recalculateSize = function() {
    if (this.isVerticesBalanced()) {
        this.maxClass = this.dataset.getMaxClass(), this.minClass = this.dataset.getMinClass();
        for (var a in this.vertices) {
            var b = this._getNodeSize(a);
            this.vertices[a].getDefault().setSize(b), this.vertices[a].getSelected().setSize(b), 
            this.vertices[a].getOver().setSize(b);
        }
    }
}, NetworkDataSetFormatter.prototype.addVertex = function(a, b) {
    null == b ? this.vertices[a] = new CircleVertexGraphFormatter(a, this.args.vertexFormatProperties.defaultFormat, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging) : (null == b.type && (this.vertices[a] = new CircleVertexGraphFormatter(a, this.args.vertexFormatProperties.defaultFormat, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "SquareVertexGraphFormatter" != b.type && "SquareVertexNetworkFormatter" != b.type || (this.vertices[a] = new SquareVertexGraphFormatter(a), 
    this.vertices[a].loadFromJSON(b)), "CircleVertexGraphFormatter" != b.type && "CircleVertexNetworkFormatter" != b.type || (this.vertices[a] = new CircleVertexGraphFormatter(a), 
    this.vertices[a].loadFromJSON(b)), "EllipseVertexGraphFormatter" != b.type && "EllipseVertexNetworkFormatter" != b.type || (this.vertices[a] = new EllipseVertexGraphFormatter(a), 
    this.vertices[a].loadFromJSON(b)), "RectangleVertexGraphFormatter" != b.type && "RectangleVertexNetworkFormatter" != b.type || (this.vertices[a] = new RectangleVertexGraphFormatter(a), 
    this.vertices[a].loadFromJSON(b)), "RoundedVertexGraphFormatter" != b.type && "RoundedVertexNetworkFormatter" != b.type || (this.vertices[a] = new RoundedVertexGraphFormatter(a), 
    this.vertices[a].loadFromJSON(b)));
    var c = this;
    this.vertices[a].stateChanged.attach(function(a, b) {
        c.changed.notify(b);
    });
    var d = this._getNodeSize(a);
    this.vertices[a].defaultFormat.args.size = d, this.vertices[a].selected.args.size = d, 
    this.vertices[a].over.args.size = d;
}, NetworkDataSetFormatter.prototype.addEdge = function(a, b) {
    null == b ? this.dataset.getEdgeById(a).getNodeSource().getId() == this.dataset.getEdgeById(a).getNodeTarget().getId() ? this.edges[a] = new BezierEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging) : this.edges[a] = new DirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging) : (null == b.type && (this.edges[a] = new LineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "LineEdgeGraphFormatter" != b.type && "LineEdgeNetworkFormatter" != b.type || (this.edges[a] = new LineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "DirectedLineEdgeGraphFormatter" != b.type && "DirectedLineEdgeNetworkFormatter" != b.type || (this.edges[a] = new DirectedLineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "BezierEdgeGraphFormatter" != b.type && "BezierEdgeNetworkFormatter" != b.type || (this.edges[a] = new BezierEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "CutDirectedLineEdgeGraphFormatter" != b.type && "CutDirectedLineEdgeNetworkFormatter" != b.type || (this.edges[a] = new CutDirectedLineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "DotDirectedLineEdgeGraphFormatter" != b.type && "DotDirectedLineEdgeNetworkFormatter" != b.type || (this.edges[a] = new DotDirectedLineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "OdotDirectedLineEdgeGraphFormatter" != b.type && "OdotDirectedLineEdgeNetworkFormatter" != b.type || (this.edges[a] = new OdotDirectedLineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)), "OdirectedLineEdgeGraphFormatter" != b.type && "OdirectedLineEdgeNetworkFormatter" != b.type || (this.edges[a] = new OdirectedLineEdgeGraphFormatter(a), 
    this.edges[a].loadFromJSON(b)));
    var c = this;
    this.edges[a].stateChanged.attach(function(a, b) {
        c.edgeChanged.notify(b);
    }), this._recalculateSize();
}, NetworkDataSetFormatter.prototype._setDataset = function(a) {
    this.dataset = a, this.maxClass = a.getMaxClass(), this.minClass = a.getMinClass(), 
    this._attachDatasetEvents();
}, NetworkDataSetFormatter.prototype.changeEdgeType = function(a, b) {
    "LineEdgeGraphFormatter" != b && "LineEdgeNetworkFormatter" != b || (this.edges[a] = new LineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "DirectedLineEdgeGraphFormatter" != b && "DirectedLineEdgeNetworkFormatter" != b || (this.edges[a] = new DirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "CutDirectedLineEdgeGraphFormatter" != b && "CutDirectedLineEdgeNetworkFormatter" != b || (this.edges[a] = new CutDirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "DotDirectedLineEdgeGraphFormatter" != b && "DotDirectedLineEdgeNetworkFormatter" != b || (this.edges[a] = new DotDirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "OdotDirectedLineEdgeGraphFormatter" != b && "OdotDirectedLineEdgeNetworkFormatter" != b || (this.edges[a] = new OdotDirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging)), 
    "OdirectedLineEdgeGraphFormatter" != b && "OdirectedLineEdgeNetworkFormatter" != b || (this.edges[a] = new OdirectedLineEdgeGraphFormatter(a, this.args.defaultEdgeProperties.defaultFormat, this.args.defaultEdgeProperties.selected, this.args.defaultEdgeProperties.over, this.args.defaultEdgeProperties.dragging));
    var c = this;
    this.edges[a].stateChanged.attach(function(a, b) {
        c.edgeChanged.notify(b);
    }), c.edgeChanged.notify(this.edges[a]);
}, NetworkDataSetFormatter.prototype.changeNodeType = function(a, b) {
    var c = JSON.parse(JSON.stringify(this.vertices[a].getDefault())), c = (JSON.parse(JSON.stringify(this.vertices[a].getSelected())), 
    JSON.parse(JSON.stringify(this.vertices[a].getDefault()))), c = JSON.parse(JSON.stringify(this.vertices[a].getDefault()));
    "SquareVertexGraphFormatter" != b && "SquareVertexNetworkFormatter" != b || (this.vertices[a] = new SquareVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "CircleVertexGraphFormatter" != b && "CircleVertexNetworkFormatter" != b || (this.vertices[a] = new CircleVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "EllipseVertexGraphFormatter" != b && "EllipseVertexNetworkFormatter" != b || (this.vertices[a] = new EllipseVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "RectangleVertexGraphFormatter" != b && "RectangleVertexNetworkFormatter" != b || (this.vertices[a] = new RectangleVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "RoundedVertexGraphFormatter" != b && "RoundedVertexNetworkFormatter" != b || (this.vertices[a] = new RoundedVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging)), 
    "OctagonVertexGraphFormatter" != b && "OctagonVertexNetworkhFormatter" != b || (this.vertices[a] = new OctagonVertexGraphFormatter(a, c, this.args.vertexFormatProperties.selected, this.args.vertexFormatProperties.over, this.args.vertexFormatProperties.dragging));
    var d = this;
    this.vertices[a].stateChanged.attach(function(a, b) {
        d.changed.notify(b);
    }), d.changed.notify(this.vertices[a]);
}, NetworkDataSetFormatter.prototype.dataBind = function(a) {
    this._setDataset(a);
    for (var b in this.dataset.getVertices()) this.addVertex(b);
    for (var c in this.dataset.getEdges()) this.addEdge(c);
}, NetworkDataSetFormatter.prototype._removeEdge = function(a) {
    delete this.edges[a];
}, NetworkDataSetFormatter.prototype._removeVertex = function(a) {
    delete this.vertices[a];
}, NetworkDataSetFormatter.prototype._attachDatasetEvents = function(a) {
    var b = this;
    this.dataset.vertexDeleted.attach(function(a, c) {
        b._removeVertex(c.getId());
    }), this.dataset.edgeDeleted.attach(function(a, c) {
        b._removeEdge(c.getId());
    }), this.dataset.newVertex.attach(function(a, c) {
        b.addVertex(c.getId());
    }), this.dataset.newEdge.attach(function(a, c) {
        b.addEdge(c.getId());
    });
}, NetworkDataSetFormatter.prototype.getVertexById = function(a) {
    return this.vertices[a];
}, NetworkDataSetFormatter.prototype.getEdgeById = function(a) {
    return this.edges[a];
}, NetworkDataSetFormatter.prototype.makeLabelsBigger = function() {
    for (var a in this.vertices) {
        var b = this.vertices[a].getDefault().getFontSize() + 2;
        this.vertices[a].getDefault().setFontSize(b);
    }
}, NetworkDataSetFormatter.prototype.makeLabelsSmaller = function() {
    for (var a in this.vertices) {
        var b = this.vertices[a].getDefault().getFontSize() - 2;
        this.vertices[a].getDefault().setFontSize(b);
    }
}, NetworkDataSetFormatter.prototype.resize = function(a, b) {
    this.args.width = a, this.args.height = b, this.resized.notify();
}, NetworkDataSetFormatter.prototype.getZoomScaleStepFactor = function() {
    return this.args.zoomScaleStepFactor;
}, NetworkDataSetFormatter.prototype.setZoomScaleStepFactor = function(a) {
    this.args.zoomScaleStepFactor = a;
}, NetworkDataSetFormatter.prototype.getZoomScale = function() {
    return this.args.zoomScale;
}, NetworkDataSetFormatter.prototype.setZoomScale = function(a) {
    this.args.zoomScale = a;
}, NetworkDataSetFormatter.prototype.getNodesMaxSize = function() {
    return this.args.nodesMaxSize;
}, NetworkDataSetFormatter.prototype.getNodesMinSize = function() {
    return this.args.nodesMinSize;
}, NetworkDataSetFormatter.prototype.isVerticesBalanced = function() {
    return this.args.balanceNodes;
}, NetworkDataSetFormatter.prototype.getWidth = function() {
    return this.args.width;
}, NetworkDataSetFormatter.prototype.getHeight = function() {
    return this.args.height;
}, NetworkDataSetFormatter.prototype.getBackgroundImage = function() {
    return this.args.backgroundImage;
}, NetworkDataSetFormatter.prototype.setBackgroundImage = function(a) {
    this.args.backgroundImage = a, this.backgroundImageChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getBackgroundImageWidth = function() {
    return this.args.backgroundImageWidth;
}, NetworkDataSetFormatter.prototype.setBackgroundImageWidth = function(a) {
    this.args.backgroundImageWidth = a, this.backgroundImageChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getBackgroundImageHeight = function() {
    return this.args.backgroundImageHeight;
}, NetworkDataSetFormatter.prototype.setBackgroundImageHeight = function(a) {
    this.args.backgroundImageHeight = a, this.backgroundImageChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getBackgroundImageX = function() {
    return this.args.backgroundImageX;
}, NetworkDataSetFormatter.prototype.setBackgroundImageX = function(a) {
    this.args.backgroundImageX = a, this.backgroundImageChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getBackgroundImageY = function() {
    return this.args.backgroundImageX;
}, NetworkDataSetFormatter.prototype.setBackgroundImageY = function(a) {
    this.args.backgroundImageY = a, this.backgroundImageChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getBackgroundColor = function() {
    return this.args.backgroundColor;
}, NetworkDataSetFormatter.prototype.setBackgroundColor = function(a) {
    this.args.backgroundColor = a, this.backgroundColorChanged.notify(this);
}, NetworkDataSetFormatter.prototype.getWidth = function() {
    return this.args.width;
}, NetworkDataSetFormatter.prototype.setWidth = function(a) {
    this.args.width = a;
}, NetworkDataSetFormatter.prototype.getHeight = function() {
    return this.args.height;
}, NetworkDataSetFormatter.prototype.setHeight = function(a) {
    this.args.height = a;
}, NetworkWidget.prototype.draw = function(a, b, c) {
    this.graphCanvas = new GraphCanvas(this.id, document.getElementById(this.targetId), {
        labeled: this.label,
        multipleSelectionEnabled: !1,
        draggingCanvasEnabled: !1
    }), this.graphCanvas.draw(a, b, c);
    var d = this;
    this.graphCanvas.onVertexOver.attach(function(a, b) {
        d.onVertexOver.notify(b);
    }), this.graphCanvas.onVertexOut.attach(function(a, b) {
        d.onVertexOut.notify(b);
    });
}, NetworkWidget.prototype.selectVertexByName = function(a) {
    var b = this.getDataset().getVertexByName(a);
    if (null != b) for (var c in b) if (b.hasOwnProperty(c)) {
        var d = b[c].getId();
        this.selectVertexById(d);
    }
}, NetworkWidget.prototype.selectVerticesByName = function(a) {
    for (var b = 0; b < a.length; b++) this.selectVertexByName(a[b]);
}, NetworkWidget.prototype.selectVertexById = function(a) {
    this.graphCanvas.selectNode(a), this.blinkVertexById(a);
}, NetworkWidget.prototype.selectVerticesById = function(a) {
    for (var b = 0; b < a.length; b++) this.selectVertexById(a[b]);
}, NetworkWidget.prototype.selectNeighbourhood = function() {
    this.selectEdgesFromVertices(), this.selectAdjacent();
}, NetworkWidget.prototype.deselectNodes = function() {
    this.graphCanvas.deselectNodes();
}, NetworkWidget.prototype.selectAllNodes = function() {
    this.getGraphCanvas().selectAllNodes();
}, NetworkWidget.prototype.selectAll = function() {
    this.getGraphCanvas().selectAll();
}, NetworkWidget.prototype.selectAllEdges = function() {
    this.getGraphCanvas().selectAllEdges();
}, NetworkWidget.prototype.setScale = function(a) {
    this.graphCanvas.setScale(a);
}, NetworkWidget.prototype.getScale = function() {
    return this.graphCanvas.getScale(value);
}, NetworkWidget.prototype.selectAdjacent = function() {
    for (var a = this.getGraphCanvas().getSelectedVertices(), b = [], c = 0; c < a.length; c++) b = b.concat(this.getGraphCanvas().getDataset().getVertexById(a[c]).getEdges());
    var d = [];
    for (c = 0; c < b.length; c++) d.push(b[c].getNodeSource().getId()), d.push(b[c].getNodeTarget().getId());
    this.selectVerticesById(d);
}, NetworkWidget.prototype.selectEdgesFromVertices = function() {
    for (var a = this.getGraphCanvas().getSelectedVertices(), b = [], c = 0; c < a.length; c++) b = b.concat(this.getGraphCanvas().getDataset().getVertexById(a[c]).getEdges());
    var d = [];
    for (c = 0; c < b.length; c++) d.push(b[c].getId());
    this.getGraphCanvas().selectEdges(d);
}, NetworkWidget.prototype.blinkVertexById = function(a) {
    this.graphCanvas.blinkVertexById(a);
}, NetworkWidget.prototype.selectConnectedComponent = function() {
    var a = this.getConnectedComponent();
    this.selectVerticesById(a.nodes), this.graphCanvas.selectEdges(a.edges);
}, NetworkWidget.prototype.getConnectedComponent = function() {
    for (var a = {}, b = {}, c = [], d = [], e = this.getGraphCanvas().getSelectedVertices(), f = 0; f < e.length; f++) this.visitNode(e[f], a, b, c, d);
    return {
        nodes: c,
        edges: d
    };
}, NetworkWidget.prototype.visitNode = function(a, b, c, d, e) {
    b[a] = !0, d.push(a);
    for (var f = this.getDataset().getVertexById(a).getEdges(), g = 0; g < f.length; g++) {
        var h = f[g], i = h.getId();
        if (null == c[i]) {
            c[i] = !0, e.push(i);
            var j = h.getNodeTarget().getId();
            null == b[j] && this.visitNode(j, b, c, d, e);
            var k = h.getNodeSource().getId();
            null == b[k] && this.visitNode(k, b, c, d, e);
        }
    }
}, NetworkWidget.prototype.collapse = function() {
    for (var a = this.getGraphCanvas().getSelectedVertices(), b = -(1 / 0), c = 1 / 0, d = -(1 / 0), e = 1 / 0, f = 0; f < a.length; f++) {
        var g = this.getGraphCanvas().getLayout().getNodeById(a[f]);
        b < g.x && (b = g.x), c > g.x && (c = g.x), d < g.y && (d = g.y), e > g.y && (e = g.y);
    }
    var h = b - c, i = d - e, j = (c - b) / 4, k = a.length, l = [];
    for (f = 0; f < a.length; f++) x = h + j * Math.sin(2 * f * Math.PI / k), y = i + j * Math.cos(2 * f * Math.PI / k), 
    l.push({
        x: x,
        y: y
    });
    for (f = 0; f < a.length; f++) this.getGraphCanvas().getLayout().getNodeById(a[f]).setCoordinates(l[f].x, l[f].y);
}, NetworkWidget.prototype.setVerticesFontSize = function(a) {
    for (var b in this.getDataset().getVertices()) this.getDataset().getVertices().hasOwnProperty(b) && this.getFormatter().getVertexById(b).getDefault().setFontSize(a);
}, NetworkWidget.prototype.getFormatter = function() {
    return this.getGraphCanvas().getFormatter();
}, NetworkWidget.prototype.getLayout = function() {
    return this.getGraphCanvas().getLayout();
}, NetworkWidget.prototype.getDataset = function() {
    return this.getGraphCanvas().getDataset();
}, NetworkWidget.prototype.getGraphCanvas = function() {
    return this.graphCanvas;
};

var SVG = {
    svgns: "http://www.w3.org/2000/svg",
    xlinkns: "http://www.w3.org/1999/xlink",
    createSVGCanvas: function(a, b) {
        b.push([ "xmlns", SVG.svgns ], [ "xmlns:xlink", "http://www.w3.org/1999/xlink" ]);
        var c = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        return this._setProperties(c, b), a.appendChild(c), c;
    },
    createRectangle: function(a, b, c, d, e) {
        var f = document.createElementNS(this.svgns, "rect");
        return f.setAttribute("x", a), f.setAttribute("y", b), f.setAttribute("width", c), 
        f.setAttribute("height", d), SVG._setProperties(f, e), f;
    },
    drawImage64: function(a, b, c, d, e, f, g) {
        var h = SVG.createImage64(a, b, c, d, e, g);
        return f.appendChild(h), h;
    },
    createImage64: function(a, b, c, d, e, f) {
        var g = document.createElementNS(this.svgns, "image");
        return g.setAttribute("x", a), g.setAttribute("y", b), g.setAttribute("width", c), 
        g.setAttribute("height", d), g.setAttribute("xlink:href", e), SVG._setProperties(g, f), 
        g;
    },
    createLine: function(a, b, c, d, e) {
        var f = document.createElementNS(this.svgns, "line");
        return f.setAttribute("x1", a), f.setAttribute("y1", b), f.setAttribute("x2", c), 
        f.setAttribute("y2", d), SVG._setProperties(f, e), f;
    },
    createClip: function(a, b, c) {
        var d = document.createElementNS(this.svgns, "clipPath");
        return d.setAttribute("id", a), d.appendChild(b), d;
    },
    drawClip: function(a, b, c) {
        var d = SVG.createClip(a, b);
        return c.appendChild(d), d;
    },
    drawRectangle: function(a, b, c, d, e, f) {
        try {
            var g = SVG.createRectangle(a, b, c, d, f);
            e.appendChild(g);
        } catch (h) {
            console.log("-------------------- "), console.log("Error on drawRectangle " + h), 
            console.log(f), console.log("-------------------- ");
        }
        return g;
    },
    createEllipse: function(a, b, c, d, e) {
        var f = document.createElementNS(this.svgns, "ellipse");
        return f.setAttribute("cx", a), f.setAttribute("cy", b), f.setAttribute("rx", c), 
        f.setAttribute("ry", d), SVG._setProperties(f, e), f;
    },
    drawEllipse: function(a, b, c, d, e, f) {
        var g = SVG.createEllipse(a, b, c, d, f);
        return e.appendChild(g), g;
    },
    drawImage: function(a, b, c, d) {
        var e = document.createElementNS(this.svgns, "image");
        e.setAttribute("x", a), e.setAttribute("y", b), c.appendChild(e), SVG._setProperties(e, d);
    },
    drawLine: function(a, b, c, d, e, f) {
        try {
            var g = SVG.createLine(a, b, c, d, f);
            e.appendChild(g);
        } catch (h) {}
        return g;
    },
    drawPath: function(a, b, c) {
        var d = SVG.createPath(a, c);
        return b.appendChild(d), d;
    },
    createPoligon: function(a, b) {
        var c = document.createElementNS(this.svgns, "polygon");
        return c.setAttribute("points", a), SVG._setProperties(c, b), c;
    },
    drawPoligon: function(a, b, c) {
        var d = SVG.createPoligon(a, c);
        return b.appendChild(d), d;
    },
    createPath: function(a, b) {
        var c = document.createElementNS(this.svgns, "path");
        return c.setAttribute("d", a), SVG._setProperties(c, b), c;
    },
    drawCircle: function(a, b, c, d, e) {
        var f = document.createElementNS(this.svgns, "circle");
        return f.setAttribute("cx", a), f.setAttribute("cy", b), f.setAttribute("r", c), 
        d.appendChild(f), e.cursor = "pointer", this._setProperties(f, e), f;
    },
    _setProperties: function(a, b) {
        if (b instanceof Array) for (var c = 0; c < b.length; c++) a.setAttribute(b[c][0], b[c][1]); else for (var d in b) a.setAttribute(d, b[d]);
    },
    createText: function(a, b, c, d) {
        var e = document.createElementNS(this.svgns, "text");
        e.setAttributeNS(null, "x", a), e.setAttributeNS(null, "y", b);
        var f = document.createTextNode(c);
        return e.appendChild(f), this._setProperties(e, d), e;
    },
    drawText: function(a, b, c, d, e) {
        var c = SVG.createText(a, b, c, e);
        return d.appendChild(c), c;
    },
    drawGroup: function(a, b) {
        var c = SVG.createGroup(b);
        return a.appendChild(c), c;
    },
    createGroup: function(a) {
        var b = document.createElementNS(this.svgns, "g");
        return this._setProperties(b, a), b;
    }
}, CanvasToSVG = {
    convert: function(a, b, c, d, e, f) {
        for (var g = this._convert(a, b, c, d, e), h = 0; h < f.length; h++) g.setAttribute(f[h][0], f[h][1]);
    },
    _convert: function(a, b, c, d, e) {
        var f = "http://www.w3.org/2000/svg", g = "http://www.w3.org/1999/xlink", h = a.toDataURL(), i = document.createElementNS(f, "image");
        return i.setAttribute("id", e), i.setAttributeNS(g, "xlink:href", h), i.setAttribute("x", c ? c : 0), 
        i.setAttribute("y", d ? d : 0), i.setAttribute("width", a.width), i.setAttribute("height", a.height), 
        i.imageData = h, b.appendChild(i), i;
    },
    importSVG: function(a, b) {
        svg_xml = a;
        var c = b.getContext("2d"), d = new Image();
        d.src = "data:image/svg+xml;base64," + btoa(svg_xml), c.drawImage(d, 0, 0);
    }
};

Vertex.prototype.getName = GraphItem.prototype.getName, Vertex.prototype.setName = GraphItem.prototype.setName, 
Vertex.prototype.getId = GraphItem.prototype.getId, Vertex.prototype.getEdges = function() {
    return this.edgesIn.concat(this.edgesOut);
}, Vertex.prototype.getEdgesCount = function() {
    return this.getEdges().length;
}, Vertex.prototype.getEdgesIn = function() {
    return this.edgesIn;
}, Vertex.prototype.getEdgesOut = function() {
    return this.edgesOut;
}, Vertex.prototype.addEdge = function(a) {
    a.getNodeSource().getId() == this.id ? this.edgesIn.push(a) : this.edgesOut.push(a);
}, Vertex.prototype.removeEdge = function(a) {
    for (var b = 0; b < this.getEdgesIn().length; b++) {
        var c = this.edgesIn[b];
        c.getId() == a.getId() && this.edgesIn.splice(b, 1);
    }
    for (var b = 0; b < this.getEdgesOut().length; b++) {
        var c = this.edgesOut[b];
        c.getId() == a.getId() && this.edgesOut.splice(b, 1);
    }
}, Vertex.prototype.remove = function() {
    for (var a = this.getEdges(), b = 0; b < a.length; b++) {
        var c = a[b];
        c.remove();
    }
    this.deleted.notify(this);
}, VertexGraphFormatter.prototype.getDefault = ItemGraphFormatter.prototype.getDefault, 
VertexGraphFormatter.prototype.getSelected = ItemGraphFormatter.prototype.getSelected, 
VertexGraphFormatter.prototype.getOver = ItemGraphFormatter.prototype.getOver, VertexGraphFormatter.prototype.getDragging = ItemGraphFormatter.prototype.getDragging, 
VertexGraphFormatter.prototype.getId = ItemGraphFormatter.prototype.getId, VertexGraphFormatter.prototype.toJSON = ItemGraphFormatter.prototype.toJSON, 
VertexGraphFormatter.prototype.loadFromJSON = ItemGraphFormatter.prototype.loadFromJSON, 
VertexGraphFormatter.prototype._setEvents = ItemGraphFormatter.prototype._setEvents, 
CircleVertexGraphFormatter.prototype.getDefault = VertexGraphFormatter.prototype.getDefault, 
CircleVertexGraphFormatter.prototype.getSelected = VertexGraphFormatter.prototype.getSelected, 
CircleVertexGraphFormatter.prototype.getOver = VertexGraphFormatter.prototype.getOver, 
CircleVertexGraphFormatter.prototype.getDragging = VertexGraphFormatter.prototype.getDragging, 
CircleVertexGraphFormatter.prototype.getId = VertexGraphFormatter.prototype.getId, 
CircleVertexGraphFormatter.prototype.toJSON = VertexGraphFormatter.prototype.toJSON, 
CircleVertexGraphFormatter.prototype.loadFromJSON = VertexGraphFormatter.prototype.loadFromJSON, 
CircleVertexGraphFormatter.prototype._setEvents = VertexGraphFormatter.prototype._setEvents, 
SquareVertexGraphFormatter.prototype.getDefault = VertexGraphFormatter.prototype.getDefault, 
SquareVertexGraphFormatter.prototype.getSelected = VertexGraphFormatter.prototype.getSelected, 
SquareVertexGraphFormatter.prototype.getOver = VertexGraphFormatter.prototype.getOver, 
SquareVertexGraphFormatter.prototype.getDragging = VertexGraphFormatter.prototype.getDragging, 
SquareVertexGraphFormatter.prototype.getId = VertexGraphFormatter.prototype.getId, 
SquareVertexGraphFormatter.prototype.toJSON = VertexGraphFormatter.prototype.toJSON, 
SquareVertexGraphFormatter.prototype.loadFromJSON = VertexGraphFormatter.prototype.loadFromJSON, 
SquareVertexGraphFormatter.prototype._setEvents = VertexGraphFormatter.prototype._setEvents, 
EllipseVertexGraphFormatter.prototype.getDefault = VertexGraphFormatter.prototype.getDefault, 
EllipseVertexGraphFormatter.prototype.getSelected = VertexGraphFormatter.prototype.getSelected, 
EllipseVertexGraphFormatter.prototype.getOver = VertexGraphFormatter.prototype.getOver, 
EllipseVertexGraphFormatter.prototype.getDragging = VertexGraphFormatter.prototype.getDragging, 
EllipseVertexGraphFormatter.prototype.getId = VertexGraphFormatter.prototype.getId, 
EllipseVertexGraphFormatter.prototype.toJSON = VertexGraphFormatter.prototype.toJSON, 
EllipseVertexGraphFormatter.prototype.loadFromJSON = VertexGraphFormatter.prototype.loadFromJSON, 
EllipseVertexGraphFormatter.prototype._setEvents = VertexGraphFormatter.prototype._setEvents, 
RectangleVertexGraphFormatter.prototype.getDefault = ItemGraphFormatter.prototype.getDefault, 
RectangleVertexGraphFormatter.prototype.getSelected = ItemGraphFormatter.prototype.getSelected, 
RectangleVertexGraphFormatter.prototype.getOver = ItemGraphFormatter.prototype.getOver, 
RectangleVertexGraphFormatter.prototype.getDragging = ItemGraphFormatter.prototype.getDragging, 
RectangleVertexGraphFormatter.prototype.getId = ItemGraphFormatter.prototype.getId, 
RectangleVertexGraphFormatter.prototype.toJSON = ItemGraphFormatter.prototype.toJSON, 
RectangleVertexGraphFormatter.prototype.loadFromJSON = ItemGraphFormatter.prototype.loadFromJSON, 
RectangleVertexGraphFormatter.prototype._setEvents = ItemGraphFormatter.prototype._setEvents, 
RoundedVertexGraphFormatter.prototype.getDefault = ItemGraphFormatter.prototype.getDefault, 
RoundedVertexGraphFormatter.prototype.getSelected = ItemGraphFormatter.prototype.getSelected, 
RoundedVertexGraphFormatter.prototype.getOver = ItemGraphFormatter.prototype.getOver, 
RoundedVertexGraphFormatter.prototype.getDragging = ItemGraphFormatter.prototype.getDragging, 
RoundedVertexGraphFormatter.prototype.getId = ItemGraphFormatter.prototype.getId, 
RoundedVertexGraphFormatter.prototype.toJSON = ItemGraphFormatter.prototype.toJSON, 
RoundedVertexGraphFormatter.prototype.loadFromJSON = ItemGraphFormatter.prototype.loadFromJSON, 
RoundedVertexGraphFormatter.prototype._setEvents = ItemGraphFormatter.prototype._setEvents, 
OctagonVertexGraphFormatter.prototype.getDefault = ItemGraphFormatter.prototype.getDefault, 
OctagonVertexGraphFormatter.prototype.getSelected = ItemGraphFormatter.prototype.getSelected, 
OctagonVertexGraphFormatter.prototype.getOver = ItemGraphFormatter.prototype.getOver, 
OctagonVertexGraphFormatter.prototype.getDragging = ItemGraphFormatter.prototype.getDragging, 
OctagonVertexGraphFormatter.prototype.getId = ItemGraphFormatter.prototype.getId, 
OctagonVertexGraphFormatter.prototype.toJSON = ItemGraphFormatter.prototype.toJSON, 
OctagonVertexGraphFormatter.prototype.loadFromJSON = ItemGraphFormatter.prototype.loadFromJSON, 
OctagonVertexGraphFormatter.prototype._setEvents = ItemGraphFormatter.prototype._setEvents, 
SamplePlateGroupWidget.prototype.drawPlate = function(a, b, c) {
    var d = this, e = new SamplePlateWidget({
        width: this.width / 3 - 5,
        height: this.heightPlates + 10,
        nodeSize: this.nodeSize,
        fontSize: 0,
        strokeWidth: 1.5
    });
    this.isVerticalLayout() && (e.width = this.width - 15, e.height = this.heightPlates - 10), 
    e.draw(a, b, c), e.onVertexUp.attach(function(a, b) {
        d.onClick.notify({
            samplePlate: b.samplePlate,
            row: b.row,
            column: b.column
        });
    }), this.samplePlateWidgets.push(e);
}, SamplePlateGroupWidget.prototype.drawPlates = function(a) {
    if (a) for (var b = a.getPlateGroups(), c = 0; c < b.length; c++) for (var d = b[c].plateGroupId, e = a.getPlatesByPlateGroupId(d), f = 0; f < e.length; f++) {
        var g = this.id + "_" + e[f].samplePlateId;
        null != document.getElementById(g) && this.drawPlate(a, e[f], g);
    }
}, SamplePlateGroupWidget.prototype.getDimensions = function(a) {
    var b = 0, c = 0;
    if (null != a) for (var d = 0; d < a.length; d++) {
        var e = a[d].slotPositionRow;
        null != e && (e = parseFloat(e), e > b && (b = e));
        var f = a[d].slotPositionColumn;
        null != f && (f = parseFloat(f), f > c && (c = f));
    }
    return {
        maxSlotPositionRow: parseFloat(b),
        maxSlotPositionColumn: parseFloat(c)
    };
}, SamplePlateGroupWidget.prototype.isVerticalLayout = function() {
    return !0;
}, SamplePlateGroupWidget.prototype.getPlateBySlotPosition = function(a, b, c) {
    if (null != a) for (var d = 0; d < a.length; d++) if (a[d].slotPositionRow == b && a[d].slotPositionColumn == c) return a[d];
    return null;
}, SamplePlateGroupWidget.prototype.getPlatesContainer = function(a) {
    var b = [];
    null != a && (b = a.getPlateGroups());
    var c = document.createElement("div"), d = document.createElement("table");
    d.setAttribute("width", this.width - 30 + "px"), d.setAttribute("height", this.heightPlates + "px");
    for (var e = 0; e < b.length; e++) for (var f = b[e].plateGroupId, g = a.getPlatesByPlateGroupId(f), h = this.getDimensions(g), i = 1; i <= h.maxSlotPositionRow; i++) for (var j = 1; j <= h.maxSlotPositionColumn; j++) {
        var k = document.createElement("tr"), l = this.getPlateBySlotPosition(g, i, j), m = document.createElement("td");
        m.setAttribute("id", this.id + "_" + l.samplePlateId), m.setAttribute("style", "background-color:#E6E6E6;border-width:1px;border-style:solid;");
        var n = document.createElement("div");
        n.setAttribute("class", "menu-title");
        var o = document.createTextNode(l.platetype3VO.name);
        n.appendChild(o), m.appendChild(n), k.appendChild(m), d.appendChild(k);
    }
    return c.appendChild(d), c.innerHTML;
}, SamplePlateGroupWidget.prototype.selectSpecimens = function(a) {
    for (var b = 0; b < this.samplePlateWidgets.length; b++) this.samplePlateWidgets[b].clearSelection();
    for (var b = 0; b < a.length; b++) this.selectSpecimen(a[b]);
}, SamplePlateGroupWidget.prototype.selectSpecimen = function(a) {
    if (null != a.sampleplateposition3VO) for (var b = 0; b < this.samplePlateWidgets.length; b++) if (this.samplePlateWidgets[b].samplePlate.samplePlateId == a.sampleplateposition3VO.samplePlateId) return void this.samplePlateWidgets[b].selectSpecimen(a);
}, SamplePlateGroupWidget.prototype._refreshBbar = function() {
    null != this.panel && (this.panel.removeDocked(Ext.getCmp(this.id + "bbar")), this.panel.addDocked(this.getBbar()));
}, SamplePlateGroupWidget.prototype.refresh = function(a) {
    this.experiment = a, this.samplePlateWidgets = [], null != document.getElementById(this.id + "_container") && (document.getElementById(this.id + "_container").innerHTML = "", 
    document.getElementById(this.id + "_container").innerHTML = this.getPlatesContainer(a), 
    this.drawPlates(a)), this._refreshBbar();
}, SamplePlateGroupWidget.prototype._getAutoFillButton = function() {
    function a() {}
    function b(a) {
        if ("yes" == a) {
            var b = e.samplePlateId, c = new BiosaxsDataAdapter();
            d.panel.setLoading("ISPyB: Saving Plate"), c.onSuccess.attach(function(a, b) {
                d.onExperimentChanged.notify(b), d.panel.setLoading(!1);
            }), c.onError.attach(function(a) {
                alert("error"), d.panel.setLoading(!1);
            }), c.autoFillPlate(b, d.experiment.experimentId);
        }
    }
    function c(a) {
        e = a, Ext.MessageBox.confirm("Confirm", 'Are you sure you want to fill "' + d.experiment.getSamplePlateById(e.samplePlateId).platetype3VO.name + '" plate?', b);
    }
    var d = this, e = null, f = [];
    if (f.push('<b class="menu-title">Select a plate:</b>'), this.experiment) {
        var g = this.experiment.getSamplePlates();
        g.sort(function(a, b) {
            return a.slotPositionColumn - b.slotPositionColumn;
        });
        for (var h = 0; h < g.length; h++) f.push({
            samplePlateId: g[h].samplePlateId,
            text: h + 1 + ".- <b> " + g[h].platetype3VO.name + "</b>",
            handler: c
        });
    }
    return Ext.create("Ext.button.Split", {
        text: "Auto Fill",
        handler: a,
        tooltip: {
            text: "This will fill, if there is place, the specimens in the plate",
            title: "Auto Fill"
        },
        menu: {
            items: f
        }
    });
}, SamplePlateGroupWidget.prototype._getZoomButton = function() {
    function a(a) {
        Ext.create("Ext.window.Window", {
            title: b.experiment.getSamplePlateById(a.samplePlateId).platetype3VO.name,
            height: 600,
            width: 900,
            layout: "fit",
            modal: !0,
            listeners: {
                afterrender: function() {
                    var c = new SamplePlateWidget({
                        width: 880,
                        height: 560,
                        nodeSize: 4,
                        fontSize: 0,
                        strokeWidth: 1.5,
                        showLabels: !0,
                        backgroundColor: "#FFFFFF"
                    });
                    c.draw(b.experiment, b.experiment.getSamplePlateById(a.samplePlateId), "plateZoom");
                }
            },
            items: [ {
                html: '<div id="plateZoom" style="background-color:red"></div>',
                padding: 5
            } ]
        }).show();
    }
    var b = this, c = [];
    if (this.experiment) {
        var d = this.experiment.getSamplePlates();
        d.sort(function(a, b) {
            return a.slotPositionColumn - b.slotPositionColumn;
        }), c.push('<b class="menu-title">Select a plate:</b>');
        for (var e = 0; e < d.length; e++) c.push({
            samplePlateId: d[e].samplePlateId,
            text: e + 1 + ".- <b> " + d[e].platetype3VO.name + "</b>",
            handler: a
        });
    }
    return Ext.create("Ext.button.Split", {
        text: "Zoom In",
        tooltip: {
            text: "This will show a plate bigger",
            title: "Zoom In Action"
        },
        menu: {
            items: c
        }
    });
}, SamplePlateGroupWidget.prototype._getEmptyButton = function() {
    function a() {}
    function b(a) {
        if ("yes" == a) {
            var b = e.samplePlateId, c = new BiosaxsDataAdapter();
            d.panel.setLoading("ISPyB: Saving Plate"), c.onSuccess.attach(function(a, b) {
                d.onExperimentChanged.notify(b), d.panel.setLoading(!1);
            }), c.onError.attach(function(a) {
                alert("error"), d.panel.setLoading(!1);
            }), c.emptyPlate(b, d.experiment.experimentId);
        }
    }
    function c(a) {
        e = a, Ext.MessageBox.confirm("Confirm", 'Are you sure you want to empty "' + d.experiment.getSamplePlateById(e.samplePlateId).platetype3VO.name + '" plate?', b);
    }
    var d = this, e = null, f = [];
    if (this.experiment) {
        var g = this.experiment.getSamplePlates();
        g.sort(function(a, b) {
            return a.slotPositionColumn - b.slotPositionColumn;
        }), f.push('<b class="menu-title">Select a plate:</b>');
        for (var h = 0; h < g.length; h++) f.push({
            samplePlateId: g[h].samplePlateId,
            text: h + 1 + ".- <b> " + g[h].platetype3VO.name + "</b>",
            handler: c
        });
    }
    return Ext.create("Ext.button.Split", {
        text: "Empty",
        handler: a,
        tooltip: {
            text: "This will empty the specimen of a plate. It will NOT remove the specimen but will removed their position",
            title: "Empty Action"
        },
        menu: {
            items: f
        }
    });
}, SamplePlateGroupWidget.prototype._getPlateTypes = function() {
    function a() {}
    function b(a) {
        if ("yes" == a) {
            var b = e.samplePlateId, c = e.plateTypeId, f = BIOSAXS.proposal.getPlateTypeById(c), g = d.experiment.getSamplePlateById(b);
            g.platetype3VO = f;
            var b = e.samplePlateId, h = new BiosaxsDataAdapter();
            d.panel.setLoading("ISPyB: Saving Plate"), h.onSuccess.attach(function(a, b) {
                d.onExperimentChanged.notify(b), d.panel.setLoading(!1);
            }), h.onError.attach(function(a) {
                alert("error"), d.panel.setLoading(!1);
            }), h.savePlates([ g ], d.experiment.experimentId);
        }
    }
    function c(a) {
        e = a;
        var c = a.samplePlateId, f = a.plateTypeId;
        d.experiment.getSamplePlateById(c).platetype3VO.plateTypeId != f && Ext.MessageBox.confirm("Confirm", 'Are you sure you want to change the type of "' + d.experiment.getSamplePlateById(e.samplePlateId).platetype3VO.name + '" plate?', b);
    }
    var d = this, e = null, f = [];
    f.push('<b class="menu-title">Select an EMPTY plate:</b>');
    var g = [];
    null != this.experiment && (g = this.experiment.getSamplePlates()), g.sort(function(a, b) {
        return a.slotPositionColumn - b.slotPositionColumn;
    });
    for (var h = ProposalManager.getPlateTypes(), i = 0; i < g.length; i++) {
        for (var j = g[i], k = [], l = 0; l < h.length; l++) k.push({
            text: h[l].name,
            plateTypeId: h[l].plateTypeId,
            samplePlateId: j.samplePlateId,
            checked: j.platetype3VO.plateTypeId == h[l].plateTypeId,
            group: "theme" + j.samplePlateId,
            checkHandler: c
        });
        f.push({
            text: i + 1 + ".- <b> " + j.platetype3VO.name + "</b>",
            disabled: d.experiment.getSpecimensBySamplePlateId(j.samplePlateId).length > 0,
            menu: {
                items: k
            }
        });
    }
    return Ext.create("Ext.button.Split", {
        text: "Plate Types",
        handler: a,
        tooltip: {
            text: "This will change the type of a plate.",
            title: "Change plate type"
        },
        menu: {
            items: f
        }
    });
}, SamplePlateGroupWidget.prototype.getBbar = function(a) {
    var b = this;
    return this.bbar ? Ext.create("Ext.toolbar.Toolbar", {
        id: b.id + "bbar",
        dock: "bottom",
        items: [ this._getPlateTypes(), "-", this._getAutoFillButton(), this._getEmptyButton(), "-", this._getZoomButton() ]
    }) : null;
}, SamplePlateGroupWidget.prototype.getPanel = function() {
    var a = this, b = this.id + "_container";
    return this.panel = Ext.create("Ext.panel.Panel", {
        title: this.title,
        bbar: this.getBbar(),
        height: this.height,
        width: this.width,
        border: this.border,
        items: [ {
            border: 0,
            height: this.height,
            id: b,
            html: "<div id='" + b + "'></div>"
        } ]
    }), this.panel.on("afterrender", function() {
        document.getElementById(b).innerHTML = a.getPlatesContainer(a.experiment), a.drawPlates(a.experiment), 
        a._refreshBbar();
    }), this.panel;
}, SamplePlateWidget.prototype.clear = function(a, b, c) {
    null != document.getElementById(this.targetId) && (document.getElementById(this.targetId).innerHTML = "");
}, SamplePlateWidget.prototype.draw = function(a, b, c, d) {
    var e = this;
    if (this.windowContainerId = d, Ext.isIE6 || Ext.isIE7 || Ext.isIE8) return void (document.getElementById(c).innerHTML = BUI.getWarningHTML(this.notSupportedMessage));
    this.onVertexUp = new Event(this), this.samplePlate = b, this.experiment = a, this.targetId = c;
    var f = this.samplePlate.platetype3VO.rowCount, g = this.samplePlate.platetype3VO.columnCount;
    this.network = new NetworkWidget({
        targetId: c
    });
    var h = new GraphDataset(), i = new NetworkDataSetFormatter({
        defaultFormat: {
            type: "LineEdgeNetworkFormatter",
            "fill-opacity": 1,
            fill: this.wellColor,
            "stroke-width": this.strokeWidth,
            "stroke-opacity": 1,
            stroke: "#000000",
            size: this.nodeSize,
            title: {
                fontSize: this.fontSize,
                fill: "#000000"
            }
        }
    }, null, {
        labeled: !1,
        height: this.height,
        width: this.width,
        right: this.width,
        backgroundColor: this.backgroundColor,
        balanceNodes: !1,
        nodesMaxSize: 12,
        nodesMinSize: 2
    });
    i.dataBind(h);
    var j = new LayoutDataset();
    j.dataBind(h), this.network.draw(h, i, j);
    for (var k = 1; f >= k; k++) for (var l = 1; g >= l; l++) this.network.getDataset().addNode("", {
        row: k,
        column: l
    }), " 4 x ( 8 + 3 ) Block" == this.samplePlate.platetype3VO.name && (9 > l ? this.network.getFormatter().vertices[this.network.getDataset().getVerticesCount() - 1].getDefault().setSize(.8 * this.nodeSize) : this.network.getFormatter().vertices[this.network.getDataset().getVerticesCount() - 1].getDefault().setSize(1.4 * this.nodeSize));
    this.network.graphCanvas.onVertexUp.attach(function(a, b) {
        e.onVertexUp.notify({
            samplePlate: e.samplePlate,
            row: e.network.getDataset().getVertexById(b).args.row,
            column: e.network.getDataset().getVertexById(b).args.column
        });
    }), this.network.graphCanvas.onVertexOver.attach(function(a, b) {}), this.relayout(this.network, f, g), 
    this.fillSimulator(this.experiment.getSamples()), this.showBorderLabels && this.drawBorders();
}, SamplePlateWidget.prototype.drawBorders = function() {
    var a = {}, b = {}, c = [], d = [], e = this.network.graphCanvas.getLayout().vertices;
    for (var f in e) {
        var g = e[f].x;
        null == a[g] && (a[g] = !0, c.push(g));
        var h = e[f].y;
        null == b[h] && (b[h] = !0, d.push(h));
    }
    for (var i = BUI.getSamplePlateLetters(), j = 1; j <= c.length; j++) SVG.drawText(c[j - 1] * this.network.graphCanvas.getWidth() - 5, this.network.graphCanvas.getHeight(), j, this.network.graphCanvas._svg, [ [ "font-size", this.legendFontSize + "px" ], [ "font-weight", "bold" ], [ "fill", "black" ] ]);
    for (var j = 1; j <= d.length; j++) SVG.drawText(5, d[j - 1] * this.network.graphCanvas.getHeight() + 5, i[j - 1], this.network.graphCanvas._svg, [ [ "font-size", this.legendFontSize + "px" ], [ "font-weight", "bold" ], [ "fill", "black" ] ]);
}, SamplePlateWidget.prototype.addOkIcon = function(a, b, c, d) {
    var e = this.network.graphCanvas._svg, c = c + "_marked";
    null == this.markedSpecimenId[c] && (SVG.drawRectangle(a - 10, b - 10, 22, 22, e, [ [ "id", c ], [ "fill", "gray" ], [ "stroke-opacity", "0.5" ], [ "fill-opacity", "0.2" ], [ "stroke", "black" ] ]), 
    this.markedSpecimenId[c] = !0);
}, SamplePlateWidget.prototype.selectSpecimen = function(a) {
    var b = this.getVertexByPosition(a.sampleplateposition3VO.rowNumber, a.sampleplateposition3VO.columnNumber), c = this.network.getLayout().vertices[b.id].x * this.width, d = this.network.getLayout().vertices[b.id].y * this.height, e = this.network.graphCanvas._svg;
    this.selectedSVGNodes.push(SVG.drawRectangle(c - 9, d - 9, 20, 20, e, [ [ "fill", "red" ], [ "fill-opacity", "0" ], [ "stroke", "blue" ], [ "stroke-width", "2" ] ]));
}, SamplePlateWidget.prototype.clearSelection = function() {
    for (var a = this.network.graphCanvas._svg, b = 0; b < this.selectedSVGNodes.length; b++) a.removeChild(this.selectedSVGNodes[b]);
    this.selectedSVGNodes = [];
}, SamplePlateWidget.prototype.getVertexByPosition = function(a, b) {
    var c = this.network.getDataset().getVertices();
    for (var d in c) if (c[d].args.row == a && c[d].args.column == b) return c[d];
    return null;
}, SamplePlateWidget.prototype.showLabel = function(a, b, c) {
    if (null != c) {
        var d = this.getVertexByPosition(a, b);
        0 != this.fontSize && (null != c.macromolecule3VO ? this.showFullName ? d.setName(c.code) : d.setName(c.macromolecule3VO.acronym) : this.showFullName ? d.setName(c.code) : d.setName(c.macromolecule3VO.acronym));
    }
}, SamplePlateWidget.prototype.getNodeIdBySpecimenId = function(a) {
    this.ids[a];
}, SamplePlateWidget.prototype.markSpecimenAsOk = function(a, b, c, d) {
    if (null != a.measurements) for (var e = 0; e < a.measurements.length; e++) null != a.measurements[e].merge3VOs && a.measurements[e].merge3VOs.length > 0 && this.addOkIcon(b * this.network.graphCanvas.getWidth(), c * this.network.graphCanvas.getHeight(), d, a);
}, SamplePlateWidget.prototype.getSpecimenBufferColorFromSampleSpecimenId = function(a) {
    var b = this.experiment.getDataCollectionsBySpecimenId(a);
    if (b.length > 0) for (var c = b[0], d = 0; d < c.measurementtodatacollection3VOs.length; d++) {
        var e = c.measurementtodatacollection3VOs[d];
        if (1 == e.dataCollectionOrder) {
            var f = this.experiment.getMeasurementById(e.measurementId);
            return null != f ? this.experiment.getSpecimenColorByBufferId(f.specimenId) : "pink";
        }
    }
    return "orange";
}, SamplePlateWidget.prototype.fillWell = function(a, b, c) {
    if (null != c) {
        var d = this.getVertexByPosition(a, b);
        if (null == d) return void console.log(a + ", " + b + " not found");
        var e = this.network.getGraphCanvas().getSVGNodeId(d.id);
        this.showLabel(a, b, c), this.ids[c.specimenId] = d.id;
        var f = this.network.getLayout().vertices[d.id].x, g = this.network.getLayout().vertices[d.id].y;
        if (this.markSpecimenAsOk(c, f, g, e), null == c.macromolecule3VO) {
            var h = this.experiment.getSpecimenColorByBufferId(c.specimenId);
            this.network.getFormatter().getVertexById(d.id).getDefault().setFill(h), this.network.getFormatter().getVertexById(d.id).getDefault().setStroke("blue"), 
            this.network.getFormatter().getVertexById(d.id).getDefault().setStrokeWidth(2);
        } else this.network.getFormatter().getVertexById(d.id).getDefault().setFill(this.experiment.macromoleculeColors[c.macromolecule3VO.macromoleculeId]), 
        this.network.getFormatter().getVertexById(d.id).getDefault().setStroke("black"), 
        this.network.getFormatter().getVertexById(d.id).getDefault().setStrokeWidth(1);
        if (this.showLabels) {
            if (f = this.network.getLayout().vertices[d.id].x, g = this.network.getLayout().vertices[d.id].y, 
            null != c.macromolecule3VO) {
                var i = c.macromolecule3VO.acronym;
                i.length > 10 && (i = i.slice(0, 10) + "..."), SVG.drawText(f * this.network.graphCanvas.getWidth() - this.nodeSize - 10, g * this.network.graphCanvas.getHeight() + 3 * this.nodeSize + 20, i, this.network.graphCanvas._svg, [ [ "font-size", "xx-small" ], [ "fill", "black" ] ]), 
                SVG.drawText(f * this.network.graphCanvas.getWidth() - this.nodeSize - 10, g * this.network.graphCanvas.getHeight() + 3 * this.nodeSize + 35, Number(c.concentration).toFixed(2) + " mg/ml", this.network.graphCanvas._svg, [ [ "font-size", "xx-small" ], [ "fill", "black" ] ]);
            }
            var j = this.experiment.getBufferById(c.bufferId).acronym;
            j.length > 10 && (j = j.slice(0, 10) + "..."), SVG.drawText(f * this.network.graphCanvas.getWidth() - this.nodeSize - 10, g * this.network.graphCanvas.getHeight() + 3 * this.nodeSize + 5, this.experiment.getBufferById(c.bufferId).acronym, this.network.graphCanvas._svg, [ [ "font-size", "xx-small" ], [ "fill", "blue" ] ]);
        }
        if (this.showTooltip) var e = this.network.getGraphCanvas().getSVGNodeId(d.id);
    }
}, SamplePlateWidget.prototype._getToolTipContent = function(a) {
    var b = "<table style='font-size:11px;'>";
    return b = b + "<TR><TD>Specimen </TD><TD style='color:black; font-weight:bold;'>" + a.code + "</TD></TR>", 
    b += "<TR style='height:20px'><TD></TD><TD style='color:black; font-weight:bold;'></TD></TR>", 
    b = b + "<TR><TD>Buffer: </TD><TD style='color:blue; font-weight:bold;'>" + this.experiment.getBufferById(a.bufferId).name + "</TD></TR>", 
    null != a.macromolecule3VO && (b = b + "<TR><TD>Macromolecule: </TD><TD  style='color:green; font-weight:bold;'>" + a.macromolecule3VO.acronym + "</TD></TR>", 
    b = b + "<TR><TD>Concentration: </TD><TD >" + a.concentration + "</TD></TR>"), b = b + "<TR><TD>Volume: </TD><TD>" + a.volume + "</TD></TR>", 
    null != a.viscosity && (b = b + "<TR><TD>Viscosity: </TD><TD>" + a.viscosity + "</TD></TR>"), 
    b += "</table>";
}, SamplePlateWidget.prototype.fillSimulator = function(a) {
    for (var b = 0; b < a.length; b++) {
        var c = a[b];
        if (null != c.sampleplateposition3VO && c.sampleplateposition3VO.samplePlateId == this.samplePlate.samplePlateId) {
            var d = c.sampleplateposition3VO;
            this.fillWell(d.rowNumber, d.columnNumber, c);
        }
    }
}, SamplePlateWidget.prototype.relayout = function(a, b, c) {
    "REC" == this.samplePlate.platetype3VO.shape && this.squareRelayout(a, b, c), "CIR" == this.samplePlate.platetype3VO.shape && this.circleRelayout(a, b, c);
}, SamplePlateWidget.prototype.squareRelayout = function(a, b, c) {
    for (var d = (a.getDataset()._getVerticesCount(), .07), e = .9, f = .075, g = .95, h = (e - d) / (b - 1), i = (g - f) / (c - 1), j = [], k = 0; b > k; k++) for (var l = 0; c > l; l++) y = k * h + d, 
    x = l * i + f, j.push({
        x: x,
        y: y
    });
    var m = 0;
    for (var n in a.getDataset().getVertices()) null == a.getLayout().vertices[n] && (this.vertices[n] = new NodeLayout(n, 0, 0)), 
    a.getLayout().vertices[n].setCoordinates(j[m].x, j[m].y), m++, a.getLayout().vertices[n].changed.attach(function(a, b) {
        _this.changed.notify(b);
    });
}, SamplePlateWidget.prototype.circleRelayout = function(a, b, c) {
    a.getLayout().getLayout("CIRCLE");
}, SpecimenWidget.prototype.getContainerLayoutConfiguration = function(a) {
    this.samplePlateGroupWidget.getDimensions(a.getSamplePlates());
    return {
        layout: "hbox",
        samplePlateGroupWidth: 1 * this.width / 3 - 10,
        samplePlateGroupHeight: this.height - 10,
        specimenGridWidth: 2 * this.width / 3,
        specimenGridHeight: this.height - 10
    };
}, SpecimenWidget.prototype.refresh = function(a) {
    this.experiment = a, this.panel.removeAll();
    var b = this.getContainerLayoutConfiguration(a);
    this.specimenGrid.width = b.specimenGridWidth, this.specimenGrid.height = b.specimenGridHeight, 
    this.samplePlateGroupWidget.width = b.samplePlateGroupWidth, this.samplePlateGroupWidget.height = b.samplePlateGroupHeight, 
    "hbox" == b.layout && (this.specimenGrid.margin = "0 0 0 5", this.specimenGrid.width = this.specimenGrid.width - 5);
    var c = Ext.create("Ext.container.Container", {
        layout: b.layout,
        height: this.height,
        width: this.width,
        padding: "2px",
        items: []
    });
    "vbox" == b.layout ? (c.insert(this.specimenGrid.getPanel()), c.insert(this.samplePlateGroupWidget.getPanel())) : (c.insert(this.samplePlateGroupWidget.getPanel()), 
    c.insert(this.specimenGrid.getPanel())), this.panel.insert(c), this.specimenGrid.refresh(a), 
    this.samplePlateGroupWidget.refresh(a);
}, SpecimenWidget.prototype.getPanel = function() {
    return this.panel = Ext.create("Ext.container.Container", {
        layout: "vbox",
        height: this.height,
        border: 0,
        margin: 5,
        width: this.width,
        items: []
    }), this.panel;
}, SpecimenWidget.prototype.input = function() {
    return {
        experiment: DATADOC.getExperiment_10(),
        proposal: DATADOC.getProposal_10()
    };
}, SpecimenWidget.prototype.test = function(a) {
    var b = new SpecimenWidget({
        height: 500,
        width: 1e3
    });
    BIOSAXS.proposal = new Proposal(b.input().proposal);
    var c = new Experiment(b.input().experiment), d = b.getPanel();
    d.render(a), b.refresh(c);
}, ContainerSpreadSheet.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "vbox",
        height: this.height + 50,
        items: [ {
            html: '<div  style="overflow: auto;overflow-y: hidden; border:1px solid gray;background-color:white;height:500px;width:' + (a.width - 20) + 'px"; id="' + this.id + '_samples"; ></div>',
            margin: "20 0 20 10",
            height: this.height,
            width: this.width,
            autoScroll: !0,
            resizable: !0
        } ]
    }), this.panel;
}, ContainerSpreadSheet.prototype.getSamplesData = function(a) {
    function b(a, b) {
        for (var c = 0; c < a.length; c++) if (a[c].location == Number(b)) return a[c];
    }
    function c(a) {
        return a ? void 0 : "";
    }
    var d = a.sampleVOs, e = [];
    d.sort(function(a, b) {
        return Number(a.location) - Number(b.location);
    });
    for (var f = 0; f < a.capacity; f++) {
        var g = b(d, f + 1);
        if (null != g) {
            var h = g.crystalVO, i = h.proteinVO, j = g.diffractionPlanVO;
            null == j && (j = {}), e.push([ f + 1, i.acronym, g.name, h.spaceGroup, j.experimentKind, g.code, c(j.observedResolution), j.requiredResolution, j.preferredBeamDiameter, j.numberOfPositions, j.radiationSensitivity, j.requiredMultiplicity, j.requiredCompleteness, h.cellA, h.cellB, h.cellC, h.cellAlpha, h.cellBeta, h.cellGamma, g.smiles, g.comments ]);
        } else e.push([ f + 1 ]);
    }
    return e;
}, ContainerSpreadSheet.prototype.getSpaceGroups = function() {
    return [ "P1", "P2", "P21", "C2", "P222", "P2221", "P21212", "P212121", "C222", "C2221", "F222", "I222", "I212121", "P4", "P41", "P42", "P43", "P422", "P4212", "P4122", "P41212", "P4222", "P42212", "P4322", "P43212", "I4", "I41", "I422", "I4122", "P3", "P31", "P32", "P31", "P321", "P3112", "P3121", "P3212", "P3221", "P6", "P61", "P65", "P62", "P64", "P63", "P622", "P6122", "P6522", "P6222", "P6422", "P6322", "R3", "R32", "P23", "P213", "P432", "P4232", "P4332", "P4132", "F23", "F432", "F4132", "I23", "I213", "I432", "I4132", "UNKNOWN" ];
}, ContainerSpreadSheet.prototype.getAcronyms = function() {
    for (var a = EXI.proposalManager.getProteins(), b = [], c = 0; c < a.length; c++) b.push(a[c].acronym);
    return b;
}, ContainerSpreadSheet.prototype.getHeader = function() {
    return [ {
        text: "#",
        id: "position",
        column: {
            width: 20
        }
    }, {
        text: "Protein <br />Acronym",
        id: "Protein Acronym",
        column: {
            width: 60,
            type: "dropdown",
            source: this.getAcronyms()
        }
    }, {
        text: "Sample<br /> Name",
        id: "Sample Name",
        column: {
            width: 50
        }
    }, {
        text: "Space<br /> Group",
        id: "Space Group",
        column: {
            width: 60,
            type: "dropdown",
            source: this.getSpaceGroups()
        }
    }, {
        text: "Exp.<br /> Type",
        id: "Experiment Type",
        column: {
            width: 90,
            type: "dropdown",
            source: [ "Default", "MXPressE", "MXPressO", "MXPressI", "MXPressE_SAD", "MXScore", "MXPressM" ]
        }
    }, {
        text: "Pin <br />BarCode",
        id: "Pin BarCode",
        column: {
            width: 45
        }
    }, {
        text: "Pre-observed <br />resolution",
        id: "Pre-observed resolution",
        column: {
            width: 45
        }
    }, {
        text: "Needed<br /> resolution",
        id: "Needed resolution",
        column: {
            width: 45
        }
    }, {
        text: "Pref. <br />Diameter",
        id: "Pref. Diameter",
        column: {
            width: 45
        }
    }, {
        text: "Number Of<br /> positions",
        id: "Number Of positions",
        column: {
            width: 45
        }
    }, {
        text: "Radiation<br /> Sensitivity",
        id: "Radiation Sensitivity",
        column: {
            width: 60
        }
    }, {
        text: "Required<br /> multiplicity",
        id: "Required multiplicity",
        column: {
            width: 60
        }
    }, {
        text: "Required<br /> Completeness",
        id: "Required Completeness",
        column: {
            width: 60
        }
    }, {
        text: "A",
        id: "Unit cell A",
        column: {
            width: 30
        }
    }, {
        text: "B",
        id: "Unit cell B",
        column: {
            width: 30
        }
    }, {
        text: "C",
        id: "Unit cell C",
        column: {
            width: 30
        }
    }, {
        text: "&#945;",
        id: "Unit cell Alpha",
        column: {
            width: 30
        }
    }, {
        text: "&#946;",
        id: "Unit cell Beta",
        column: {
            width: 30
        }
    }, {
        text: "&#947;",
        id: "Unit cell Gamma",
        column: {
            width: 30
        }
    }, {
        text: "Smiles",
        id: "Required Completeness",
        column: {
            width: 45
        }
    }, {
        text: "Comments",
        id: "Comments",
        column: {
            width: 45
        }
    } ];
}, ContainerSpreadSheet.prototype.getHeaderWidth = function() {
    for (var a = this.getHeader(), b = [], c = 0; c < a.length; c++) b.push(a[c].column["with"]);
    return b;
}, ContainerSpreadSheet.prototype.getHeaderId = function() {
    for (var a = this.getHeader(), b = [], c = 0; c < a.length; c++) b.push(a[c].id);
    return b;
}, ContainerSpreadSheet.prototype.getHeaderText = function() {
    for (var a = this.getHeader(), b = [], c = 0; c < a.length; c++) b.push(a[c].text);
    return b;
}, ContainerSpreadSheet.prototype.getColumns = function() {
    for (var a = [], b = 0; b < this.getHeader().length; b++) a.push(this.getHeader()[b].column);
    return a;
}, ContainerSpreadSheet.prototype.getPuck = function() {
    var a = JSON.parse(JSON.stringify(this.puck)), b = this.parseTableData();
    a.sampleVOs = [];
    for (var c = 0; c < b.length; c++) {
        var d = {};
        d.name = b[c]["Sample Name"], d.smiles = b[c].Smiles, d.location = b[c].location, 
        d.comments = b[c].Comments, null == d.crystalVO && (d.crystalVO = {}, d.crystalVO.proteinVO = EXI.proposalManager.getProteinByAcronym(b[c]["Protein Acronym"])), 
        d.crystalVO.spaceGroup = b[c]["Space Group"], d.crystalVO.cellA = Number(b[c]["Unit cell A"]), 
        d.crystalVO.cellB = Number(b[c]["Unit cell B"]), d.crystalVO.cellC = Number(b[c]["Unit cell C"]), 
        d.crystalVO.cellAlpha = Number(b[c]["Unit cell Alpha"]), d.crystalVO.cellBeta = Number(b[c]["Unit cell Beta"]), 
        d.crystalVO.cellGamma = Number(b[c]["Unit cell Gamma"]), d.diffractionPlanVO = {}, 
        d.diffractionPlanVO.radiationSensitivity = Number(b[c]["Radiation Sensitivity"]), 
        d.diffractionPlanVO.requiredCompleteness = Number(b[c]["Required Completeness"]), 
        d.diffractionPlanVO.requiredMultiplicity = Number(b[c]["Required multiplicity"]), 
        d.diffractionPlanVO.requiredResolution = Number(b[c]["Needed resolution"]), d.diffractionPlanVO.observedResolution = Number(b[c]["Pre-observed resolution"]), 
        d.diffractionPlanVO.preferredBeamDiameter = Number(b[c]["Pref. Diameter"]), d.diffractionPlanVO.numberOfPositions = Number(b[c]["Number Of positions"]), 
        d.diffractionPlanVO.experimentKind = b[c]["Experiment Type"], a.sampleVOs.push(d);
    }
    return a;
}, ContainerSpreadSheet.prototype.parseTableData = function() {
    for (var a = [], b = this.spreadSheet.getData(), c = 0; c < b.length; c++) {
        var d = {};
        d.location = c + 1;
        for (var e = 0; e < b[c].length; e++) {
            var f = this.getHeaderId()[e], g = b[c][e];
            d[f] = g;
        }
        d["Protein Acronym"] && d["Protein Acronym"].length > 0 && a.push(d);
    }
    for (var h = [], i = 0; i < a.length; i++) null != a[i]["Protein Acronym"] && h.push(a[i]);
    return h;
}, ContainerSpreadSheet.prototype.load = function(a) {
    function b(a, b, c, d, e, f, g) {
        return Handsontable.renderers.TextRenderer.apply(this, arguments), a.getDataAtRow(c)[1] ? void (2 == d && (f && "" != f || (b.className = "custom-row-text-required"))) : void (b.style.background = "#EEE");
    }
    this.puck = a;
    var c = document.getElementById(this.id + "_samples");
    Handsontable.renderers.registerRenderer("ValueRenderer", b);
    var d = this;
    this.spreadSheet = new Handsontable(c, {
        beforeChange: function(a, b) {
            lastChange = a;
        },
        data: this.getSamplesData(a),
        colWidths: 70,
        height: this.height,
        width: this.width,
        manualColumnResize: !0,
        colWidths: this.getHeaderWidth(),
        colHeaders: this.getHeaderText(),
        stretchH: "last",
        columns: this.getColumns()
    }), this.spreadSheet.updateSettings({
        afterChange: function(a, b) {
            d.onModified.notify(d.getPuck());
        }
    });
}, SurfaceScatteringViewer.prototype.getTopBar = function() {
    var a = this, b = Ext.create("Ext.slider.Single", {
        width: 300,
        value: 1,
        increment: 1,
        minValue: .1,
        maxValue: 10,
        fieldLabel: "Scale",
        listeners: {
            change: function(b, c) {
                for (var d = 0; d < a.originalData.length; d++) for (var e = 0; e < a.originalData[d].length; e++) a.data[d][e] = a.originalData[d][e] * c;
                a.clear(), a.render(a.data);
            }
        }
    });
    return Ext.create("Ext.toolbar.Toolbar", {
        items: [ b ]
    });
}, SurfaceScatteringViewer.prototype.clear = function() {
    document.getElementById(this.id).innerHTML = "";
}, SurfaceScatteringViewer.prototype.getPanel = function() {
    var a = this;
    return Ext.create("Ext.panel.Panel", {
        width: 810,
        height: 810,
        border: 1,
        margin: 5,
        cls: "borderGrid",
        items: [ {
            html: "<div id='" + this.id + "'></div>"
        } ],
        listeners: {
            afterrender: function(b, c) {
                a.render(a.data);
            }
        }
    });
}, SurfaceScatteringViewer.prototype.render = function(a) {
    for (var b = a.length - 2, c = a[0].length - 2, d = new Array(), e = new google.visualization.DataTable(), f = 0; c > f; f++) e.addColumn("number", "col" + f);
    e.addRows(b);
    for (var g = 360 / b, h = 0, f = 0; b > f; f++) for (var i = 0; c > i; i++) {
        var j = Math.cos(f * g * Math.PI / 180) * Math.cos(i * g * Math.PI / 180);
        e.setValue(f, i, 1 - a[f][i] / (255 * this.scale)), d[h] = "x:" + f + ", y:" + i + " = " + j, 
        h++;
    }
    var k = new greg.ross.visualisation.SurfacePlot(document.getElementById(this.id)), l = !0, m = {
        red: 0,
        green: 0,
        blue: 255
    }, n = {
        red: 0,
        green: 255,
        blue: 255
    }, o = {
        red: 0,
        green: 255,
        blue: 0
    }, p = {
        red: 255,
        green: 255,
        blue: 0
    }, q = {
        red: 255,
        green: 0,
        blue: 0
    }, r = [ m, n, o, p, q ], s = "X", t = "Y", u = "Z", v = {
        width: 800,
        height: 800,
        colourGradient: r,
        fillPolygons: l,
        tooltips: d,
        xTitle: s,
        yTitle: t,
        zTitle: u,
        restrictXRotation: !1
    };
    k.draw(e, v);
}, SurfaceScatteringViewer.prototype.load = function(a) {
    this.originalData = a, this.data = a;
}, MacromoleculeTabs.prototype.refresh = function(a) {
    this.macromoleculeForm.refresh(a), this.assemblyForm.refresh(a), this.rigibBodyModelingForm.refresh(a);
}, MacromoleculeTabs.prototype.getItems = function() {
    return [ {
        tabConfig: {
            title: "General"
        },
        items: [ {
            xtype: "container",
            items: [ this.macromoleculeForm.getPanel() ]
        } ]
    } ];
}, MacromoleculeTabs.prototype.getPanel = function() {
    return this.panel = Ext.createWidget("tabpanel", {
        height: this.height,
        width: this.width,
        frame: !0,
        plain: !1,
        margin: 0,
        border: 1,
        items: this.getItems()
    }), this.panel;
}, ShipmentTabs.prototype.refresh = function(a) {
    var b = this;
    this.shipment = a;
    var c = new Proposal();
    c.onDataRetrieved.attach(function(c, d) {
        b.refreshWithPlates(a, d), b.caseGrid.grid.setLoading(!1);
    }), c.getPlatesByProposal();
}, ShipmentTabs.prototype.refreshWithPlates = function(a, b) {
    this.shipment = new Shipment(a), this.caseGrid.refresh(this.shipment.getDewars(), b), 
    this.panel.setLoading(!1);
}, ShipmentTabs.prototype.error = function(a) {
    var b = JSON.parse(a);
    showError(b), this.panel.setLoading(!1);
}, ShipmentTabs.prototype.draw = function(a) {
    var b = this;
    b.plates = [], b.shipment = a, b.render(a);
}, ShipmentTabs.prototype.render = function(a) {
    return this.getPanel(a);
}, ShipmentTabs.prototype.getShipmentHeader = function(a) {
    function b() {
        var b = a.json.shippingName, c = a.json.shippingStatus, d = a.json.creationDate, e = BUI.createFormLabel("Name :", b, 75, 400);
        return e += BUI.createFormLabel("Status :", c, 75, 400), e += BUI.createFormLabel("Date :", d, 75, 400);
    }
    return Ext.create("Ext.container.Container", {
        frame: !1,
        layout: "hbox",
        title: "General",
        padding: 5,
        bodyPadding: "5 5 0 0",
        width: 890,
        margin: "0 0 10 0",
        height: 100,
        style: {
            borderColor: "#BDBDBD",
            borderStyle: "solid",
            borderWidth: "1px"
        },
        fieldDefaults: {
            msgTarget: "side",
            labelWidth: 100
        },
        items: [ {
            margin: "0 0 0 0",
            width: 475,
            border: 0,
            html: b()
        } ]
    });
}, ShipmentTabs.prototype.getPanel = function(a) {
    return this.panel = Ext.createWidget("tabpanel", {
        height: 600,
        style: {
            padding: 2
        },
        items: [ {
            tabConfig: {
                id: "Shipment",
                title: "Shipment",
                icon: "/ispyb/images/plane-small.gif"
            },
            items: [ {
                xtype: "container",
                margin: "5 5 5 5",
                items: [ this.shipmentForm.getPanel(a) ]
            } ]
        }, {
            tabConfig: {
                id: "Cases",
                title: "Cases",
                icon: "../images/box-icon-very-small.png"
            },
            items: [ {
                xtype: "container",
                margin: "5 5 5 5",
                items: [ this.caseGrid.getPanel(a.getDewars(), this.plates) ]
            } ]
        } ]
    }), this.panel;
}, ShipmentTabs.prototype.getPanel = function(a) {
    return this.shipment = a, null == this.plates && (this.plates = []), null == this.shipPanel && (this.shipPanel = Ext.create("Ext.container.Container", {
        bodyPadding: 2,
        width: .9 * Ext.getBody().getViewSize().width,
        renderTo: this.targetId,
        style: {
            padding: 2
        },
        items: [ this.getShipmentHeader(a), this.getTabPanel(a) ]
    })), this.shipPanel;
}, TemplateTabs.prototype.refreshMeasurement = function(a) {
    this.experiment = a, this.experiment.onSaved = new Event(this), this.experiment.onSpecimenSaved = new Event(this);
    var b = new ExperimentList([ this.experiment ]);
    this.measurementGrid.refresh(b.getMeasurementsNotCollected(), b);
}, TemplateTabs.prototype.refreshSpecimen = function(a) {
    this.experiment = a, this.experiment.onSaved = new Event(this), this.experiment.onSpecimenSaved = new Event(this), 
    this.samplePlateGroupWidget.refresh(this.experiment), this.specimenWidget.refresh(this.experiment), 
    this.volumePlanificator.refresh(this.experiment);
}, TemplateTabs.prototype.refresh = function(a) {
    this.experiment = a, this.experiment.onSaved = new Event(this), this.experiment.onSpecimenSaved = new Event(this), 
    this.refreshMeasurement(a), this.refreshSpecimen(a), this.panel.setLoading(!1);
}, TemplateTabs.prototype.error = function(a) {
    var b = JSON.parse(a);
    showError(b), this.panel.setLoading(!1);
}, TemplateTabs.prototype.draw = function(a) {
    this.render(a);
}, TemplateTabs.prototype.getExperimentTitle = function() {
    var a = new ExperimentHeaderForm();
    return a.getPanel(this.experiment);
}, TemplateTabs.prototype.render = function(a) {
    var b = this;
    this.experiment = a;
    var c = this.specimenWidget.getPanel();
    this.specimenWidget.refresh(a);
    var d = new ExperimentList([ b.experiment ]), e = Ext.create("Ext.container.Container", {
        layout: {
            type: "vbox"
        },
        defaults: {
            style: {
                padding: "5px 0px 0px 10px"
            }
        },
        items: [ b.measurementGrid.getPanel(d.getMeasurementsNotCollected(), d) ]
    });
    return this.panel = Ext.createWidget("tabpanel", {
        plain: !0,
        items: [ {
            tabConfig: {
                title: "Measurements"
            },
            items: [ {
                xtype: "container",
                layout: "vbox",
                border: 1,
                margin: "0 0 10 0",
                items: [ e ]
            } ]
        }, {
            tabConfig: {
                id: "genralTabl",
                title: "Specimens"
            },
            items: [ c ]
        }, {
            tabConfig: {
                title: "Requirements"
            },
            items: [ {
                html: BUI.getTipHTML("Estimated volume is the maximum volume required. Depending on the order of your measurements you may use less. Click on create stock solutions if you plan to ship these stock solutions"),
                margin: "10 10 10 10",
                border: 0
            }, this.volumePlanificator.getPanel(a) ]
        } ]
    }), this.getPanel(this.panel);
}, TemplateTabs.prototype.isTemplate = function() {
    return "TEMPLATE" == this.experiment.json.type;
}, TemplateTabs.prototype.getPanel = function(a) {
    var b = this;
    return null == this.experimentPanel && (this.experimentPanel = Ext.create("Ext.container.Container", {
        bodyPadding: 2,
        width: 1e3,
        renderTo: this.targetId,
        height: 500,
        items: [ this.getExperimentTitle(), this.panel ],
        listeners: {
            afterrender: function(a) {
                $("#SchemeReport" + b.experiment.experimentId).click(function() {
                    return $(this).target = "_blank", window.open("viewProjectList.do?reqCode=display&menu=platescheme&experimentId=" + b.experiment.experimentId), 
                    !1;
                });
            }
        }
    })), this.experimentPanel;
}, TemplateTabs.prototype.input = function(a) {
    return new ExperimentTabs().input();
}, TemplateTabs.prototype.test = function(a) {
    var b = new TemplateTabs(a);
    BIOSAXS.proposal = new Proposal(b.input().proposal), b.draw(new Experiment(b.input().experiment));
}, SessionTimeLineWidget.prototype._load = function(a, b, c, d) {
    this.data = a, this.groups = d, this.timeline.setGroups(this.groups), this.timeline.setItems(a), 
    console.log(b), console.log(c), this.timeline.setWindow(b, c);
}, SessionTimeLineWidget.prototype.render = function() {
    var a = this;
    if (document.getElementById(this.targetId)) {
        var b = {
            editable: !0,
            autoResize: !0,
            height: 500,
            selectable: !0,
            zoomable: !1,
            moveable: !1,
            stack: !0,
            onUpdate: function(b, c) {
                a.onSelected.notify(b);
            }
        };
        document.getElementById(this.targetId).setAttribute("width", this.panel.getWidth() + "px"), 
        this.timeline = new vis.Timeline(document.getElementById(this.targetId), this.data, b), 
        this.timeline.setGroups(this.groups);
    }
}, SessionTimeLineWidget.prototype.getTopBar = function() {
    return null;
}, SessionTimeLineWidget.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        id: this.id,
        height: 600,
        cls: "border-grid",
        flex: 1,
        margin: this.margin,
        items: [ {
            html: '<div style="height:790px" id="' + this.targetId + '"></div>'
        } ]
    }), this.panel.on("afterrender", function() {
        a.render();
    }), this.panel.on("afterlayout", function() {}), this.panel;
}, SessionTimeLineWidget.prototype.load = function(a, b) {
    var c = this;
    this.panel.setLoading();
    var d = function(d, e) {
        function f(a) {
            return a.beamlineOperator || (a.beamlineOperator = "<span style='color:orange;'>Unknown</span>"), 
            "<span class='beamline_name'>{3}</span>".format([ a.beamlineName, a.beamlineOperator, a.nbShifts, a.proposalVO.code + a.proposalVO.number, a.proposalVO.title ]);
        }
        function g() {
            for (var a = new vis.DataSet(), b = EXI.credentialManager.getBeamlines(), c = 0; c < b.length; c++) a.add({
                id: b[c],
                content: "<div style='color:green;font-weight:bold;'>" + b[c] + "</div>"
            });
            return a;
        }
        console.log(e);
        for (var h = new vis.DataSet(), i = 0; i < e.length; i++) 1 != c.discarded[e[i].beamlineName] && h.add({
            start: moment(e[i].startDate, "MMM DD, YYYY h:mm:ss a "),
            end: moment(e[i].endDate, "MMM DD, YYYY h:mm:ss a "),
            content: f(e[i]),
            group: e[i].beamlineName,
            sessionId: e[i].sessionId,
            className: e[i].beamlineName + "_session_box"
        });
        c._load(h, moment(a, "YYYYMMDD").format("YYYY-MM-DD"), moment(b, "YYYYMMDD").format("YYYY-MM-DD"), g()), 
        c.panel.setLoading(!1);
    };
    EXI.getDataAdapter({
        onSuccess: d
    }).proposal.session.getSessionsByDate(a, b);
}, UploaderWidget.prototype.getFileName = function() {
    var a = Ext.getCmp(this.id).value;
    return a.split("\\")[a.split("\\").length - 1];
}, UploaderWidget.prototype.getForm = function() {
    var a = this;
    return Ext.create("Ext.form.Panel", {
        width: 400,
        bodyPadding: 20,
        border: 0,
        frame: !0,
        items: [ {
            xtype: "filefield",
            name: "file",
            id: this.id,
            fieldLabel: "File",
            labelWidth: 50,
            msgTarget: "side",
            allowBlank: !1,
            anchor: "100%",
            buttonText: "Browse..."
        }, {
            xtype: "hiddenfield",
            id: a.id + "fileName",
            name: "fileName",
            value: ""
        } ],
        buttons: [ {
            text: "Upload",
            handler: function() {
                var b = this.up("form").getForm();
                b.isValid() && (Ext.getCmp(a.id + "fileName").setValue(a.getFileName()), b.submit({
                    url: a.url,
                    waitMsg: "Uploading your file...",
                    success: function(b, c) {
                        a.window.close(), a.onUploaded.notify();
                    },
                    failure: function(b, c) {
                        a.window.close(), a.onUploaded.notify();
                    }
                }));
            }
        } ]
    });
}, UploaderWidget.prototype.show = function() {
    this.window = Ext.create("Ext.window.Window", {
        title: "ISPyB File Uploader Manager",
        height: 200,
        modal: !0,
        icon: "../images/icon/upload.svg",
        width: 600,
        layout: "fit",
        items: this.getForm()
    }), this.window.show();
}, CaseWindow.prototype.getButtons = GenericWindow.prototype.getButtons, CaseWindow.prototype._render = GenericWindow.prototype._render, 
CaseWindow.prototype._postRender = GenericWindow.prototype._postRender, CaseWindow.prototype.save = function() {
    return "" == this.form.getDewar().code ? void BUI.showError("Code field is mandatory") : (this.onSaved.notify(this.form.getDewar()), 
    void this.panel.close());
}, CaseWindow.prototype.draw = function(a) {
    this.dewar = a, this._render(a);
}, GenericWindow.prototype.getButtons = function() {
    var a = this;
    return this.close ? [ {
        text: "Close",
        handler: function() {
            a.panel.close();
        }
    } ] : [ {
        text: "Save",
        handler: function() {
            a.save();
        }
    }, {
        text: "Cancel",
        handler: function() {
            a.panel.close();
        }
    } ];
}, GenericWindow.prototype.save = function() {
    alert("Method save of GenerciWindow class is abstract");
}, GenericWindow.prototype._postRender = function(a, b) {}, GenericWindow.prototype.draw = function(a, b) {
    this._render(a, b);
}, GenericWindow.prototype.refresh = function(a, b) {
    this.data = a, this.experiment = b, this.form.refresh(a, b);
}, GenericWindow.prototype._render = function(a, b) {
    this.data = a;
    null == this.panel && (this.panel = Ext.create("Ext.Window", {
        id: this.id,
        title: this.title,
        resizable: !0,
        constrain: !0,
        border: 1,
        modal: this.modal,
        frame: !1,
        draggable: this.draggable,
        closable: !0,
        autoscroll: !0,
        layout: {
            type: "vbox",
            align: "stretch"
        },
        width: this.width,
        height: this.form.height,
        buttonAlign: "right",
        buttons: this.getButtons(),
        items: this.form.getPanel(a, b),
        listeners: {
            scope: this,
            minimize: function() {
                this.panel.hide();
            },
            destroy: function() {
                delete this.panel;
            }
        }
    }), this.panel.setLoading()), this.panel.show(), this._postRender();
}, MacromoleculeWindow.prototype.refresh = function(a) {
    this.macromoleculeTabs.refresh(a), null != a && this.panel.setTitle(a.acronym);
}, MacromoleculeWindow.prototype.draw = function(a) {
    this.panel = Ext.create("Ext.Window", {
        id: this.id,
        title: this.title,
        modal: !0,
        items: this.macromoleculeTabs.getPanel(),
        width: this.width,
        height: this.height,
        buttonAlign: "right",
        listeners: {
            scope: this,
            minimize: function() {
                this.panel.hide();
            },
            destroy: function() {
                delete this.panel;
            }
        }
    }), this.panel.show(), this.refresh(a);
}, StockSolutionWindow.prototype.getButtons = GenericWindow.prototype.getButtons, 
StockSolutionWindow.prototype._render = GenericWindow.prototype._render, StockSolutionWindow.prototype._postRender = GenericWindow.prototype._postRender, 
StockSolutionWindow.prototype.save = function() {
    var a = this, b = function(b, c) {
        var d = function(b, d) {
            a.panel.close(), a.onSaved.notify(c);
        };
        a.panel.setLoading("Updading proposal information"), EXI.getDataAdapter({
            onSuccess: d
        }).proposal.proposal.update();
    };
    return null == this.form.getStockSolution().bufferId ? void BUI.showError("Buffer field is mandatory") : "" == this.form.getStockSolution().name ? void BUI.showError("Acronym field is mandatory") : "" == this.form.getStockSolution().concentration ? void BUI.showError("Concentration field is mandatory") : "" == this.form.getStockSolution().volume ? void BUI.showError("Volume field is mandatory") : (this.panel.setLoading("ISPyB: saving stock solution"), 
    void EXI.getDataAdapter({
        onSuccess: b
    }).saxs.stockSolution.saveStockSolution(this.form.getStockSolution()));
}, StockSolutionWindow.prototype.draw = function(a, b) {
    this.experiment = b, this.title = "Stock Solution", this._render(a, b);
}, SubtractionSelectorWindow.prototype._getButtons = function() {
    var a = this;
    return [ {
        text: "Select",
        handler: function() {
            a.onSelect.notify(a.selected), a.window.destroy();
        }
    }, {
        text: "Cancel",
        handler: function() {
            a.window.destroy();
        }
    } ];
}, SubtractionSelectorWindow.prototype.getToolBar = function() {
    var a = this;
    return Ext.create("Ext.toolbar.Toolbar", {
        height: 60,
        items: [ {
            xtype: "textfield",
            name: "field1",
            width: 500,
            emptyText: "enter search macromolecule",
            listeners: {
                specialkey: function(b, c) {
                    if (c.getKey() == c.ENTER) {
                        var d = function(b, c) {
                            a.grid.load(c), a.window.setLoading(!1);
                        };
                        a.window.setLoading(), EXI.getDataAdapter({
                            onSuccess: d
                        }).saxs.dataCollection.getDataCollectionsByKey("macromoleculeAcronym", b.getValue());
                    }
                }
            }
        } ]
    });
}, SubtractionSelectorWindow.prototype.show = function() {
    this.window = Ext.create("Ext.window.Window", {
        title: "Select a data collection",
        modal: !0,
        height: 500,
        width: 1050,
        tbar: this.getToolBar(),
        items: [ this.grid.getPanel() ],
        buttons: this._getButtons()
    }), this.window.show();
}, FinalStepWizardForm.prototype.getForm = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        plain: !0,
        frame: !1,
        border: 1,
        margin: "100 100 100 100",
        fieldDefaults: {
            labelAlign: "left",
            labelWidth: 90,
            anchor: "100%"
        },
        items: [ {
            xtype: "textfield",
            name: "Name",
            id: this.id + "name",
            width: 600,
            fieldLabel: "Name",
            margin: "20 20 20 20",
            value: ""
        }, {
            xtype: "textareafield",
            name: "textarea1",
            id: this.id + "description",
            margin: "20 20 20 20",
            width: 600,
            fieldLabel: "Description",
            value: ""
        } ]
    }), this.panel;
}, FinalStepWizardForm.prototype.getNextForm = function() {
    return null;
}, FinalStepWizardForm.prototype.input = function() {
    return [];
}, FinalStepWizardForm.prototype.test = function(a) {
    var b = new FinalStepWizardForm(), c = b.getForm();
    c.render(a);
}, GenericStepWizardForm.prototype.getForm = function() {
    alert("[getForm] Not implemented");
}, GenericStepWizardForm.prototype.getNextForm = function() {
    alert("[getNextForm] Not implemented");
}, GenericStepWizardForm.prototype.reload = function() {
    alert("[getNextForm] Not implemented");
}, MeasurementCreatorStepWizardForm.prototype.setData = function(a) {
    this.data.measurementsSelected = a;
    for (var b = {}, c = {}, d = 0; d < this.data.measurementsSelected.length; d++) {
        var e = this.data.measurementsSelected[d];
        null == b[e.bufferId] && (b[e.bufferId] = {
            buffer: e.buffer_acronym,
            bufferId: e.bufferId,
            volume: 0,
            concentration: 0
        });
        var f = e.macromoleculeId + "_" + e.bufferId + "_" + e.concentration;
        null == c[f] && (c[f] = {
            macromolecule: e.acronym,
            macromoleculeId: e.macromoleculeId,
            buffer: e.buffer_acronym,
            bufferId: e.bufferId,
            volume: 0,
            concentration: e.concentration
        }), b[e.bufferId].volume = Number(b[e.bufferId].volume) + 2 * e.volumeToLoad, c[f].volume = Number(c[f].volume) + e.volumeToLoad;
    }
}, MeasurementCreatorStepWizardForm.prototype.getSingleMeasurementForm = function() {
    var a = BIOSAXS_COMBOMANAGER.getComboMacromoleculeByMacromolecules(this.macromolecules, {
        width: 250,
        labelWidth: 100
    }), b = BIOSAXS_COMBOMANAGER.getComboBuffers(this.buffers, {
        margin: "0 0 0 50",
        width: 250,
        labelWidth: 100
    }), c = Ext.create("Ext.Button", {
        width: 200,
        height: 25,
        margin: "0 0 20 300",
        text: "Add",
        scope: this,
        handler: function() {
            for (var c = Ext.getCmp(this.id + "quantity").getValue(), d = [], e = 0; c > e; e++) d.push({
                acronym: EXI.proposalManager.getMacromoleculeById(a.getValue()).acronym,
                macromoleculeId: a.getValue(),
                bufferId: b.getValue(),
                buffer_acronym: EXI.proposalManager.getBufferById(b.getValue()).acronym,
                concentration: Ext.getCmp(this.id + "conc").getValue(),
                volumeToLoad: Ext.getCmp(this.id + "volume").getValue(),
                exposureTemperature: Ext.getCmp(this.id + "seu").getValue(),
                transmission: Ext.getCmp(this.id + "transmission").getValue(),
                waitTime: Ext.getCmp(this.id + "waitTime").getValue(),
                viscosity: Ext.getCmp(this.id + "viscosity").getValue(),
                flow: Ext.getCmp(this.id + "flow").getValue()
            });
            this.measurementGrid.store.loadData(d, !0), this.setData(JSON.parse(Ext.encode(Ext.pluck(this.measurementGrid.grid.getStore().data.items, "data"))));
        }
    });
    return Ext.create("Ext.panel.Panel", {
        padding: "0 0 0 0",
        margin: "0 10 0 0",
        height: 240,
        width: 1150,
        cls: "border-grid",
        items: [ {
            xtype: "container",
            layout: "hbox",
            margin: "10 10 0 10",
            items: [ a, b, {
                xtype: "numberfield",
                id: this.id + "quantity",
                fieldLabel: "Repeat",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 120",
                minValue: 0,
                maxValue: 300,
                value: 1
            } ]
        }, {
            xtype: "container",
            layout: "hbox",
            margin: "10 10 0 10",
            items: [ {
                xtype: "numberfield",
                id: this.id + "conc",
                fieldLabel: "Conc. (mg/ml)",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 0",
                minValue: 0,
                maxValue: 300,
                value: 1
            }, {
                xtype: "numberfield",
                id: this.id + "seu",
                fieldLabel: "Exposure. Temp.",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 80",
                value: 4,
                minValue: 4,
                maxValue: 60
            } ]
        }, {
            xtype: "container",
            margin: "10 10 0 10",
            layout: "hbox",
            items: [ {
                xtype: "numberfield",
                id: this.id + "volume",
                fieldLabel: "Vol. To Load (&#181l)",
                labelWidth: 100,
                width: 220,
                value: 40,
                margin: "5 0 0 0",
                minValue: 10,
                maxValue: 300
            }, {
                xtype: "numberfield",
                id: this.id + "transmission",
                fieldLabel: "Transmission (%)",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 80",
                value: 100,
                minValue: 0,
                maxValue: 100
            } ]
        }, {
            xtype: "container",
            layout: "hbox",
            margin: "10 10 0 10",
            items: [ {
                xtype: "numberfield",
                id: this.id + "waitTime",
                fieldLabel: "Wait Time",
                labelWidth: 100,
                width: 220,
                value: 0,
                minValue: 0,
                maxValue: 100
            }, {
                xtype: "combo",
                id: this.id + "viscosity",
                store: [ "low", "medium", "high" ],
                fieldLabel: "SC Viscosity",
                value: "low",
                labelWidth: 100,
                width: 220,
                margin: "0 0 0 80"
            }, {
                xtype: "checkbox",
                id: this.id + "flow",
                checked: !0,
                fieldLabel: "Flow",
                labelWidth: 100,
                width: 250,
                margin: "0 0 0 80"
            } ]
        }, {
            xtype: "container",
            layout: "hbox",
            margin: "10 0 0 0",
            items: [ c ]
        } ]
    });
}, MeasurementCreatorStepWizardForm.prototype.getConcentrationMeasurementForm = function() {
    var a = BIOSAXS_COMBOMANAGER.getComboMacromoleculeByMacromolecules(this.macromolecules, {
        width: 300,
        labelWidth: 100
    }), b = BIOSAXS_COMBOMANAGER.getComboBuffers(this.buffers, {
        width: 300,
        labelWidth: 100
    }), c = Ext.create("Ext.Button", {
        width: 200,
        height: 25,
        margin: "0 0 20 300",
        text: "Add",
        scope: this,
        handler: function() {
            for (var c = a.getValue(), d = b.getValue(), e = Ext.getCmp(this.id + "_cs_conc").getValue(), f = Ext.getCmp(this.id + "_cs_volume").getValue(), g = Ext.getCmp(this.id + "_cs_transmission").getValue(), h = Ext.getCmp(this.id + "_cs_seu").getValue(), i = Ext.getCmp(this.id + "_cs_waitTime").getValue(), j = Ext.getCmp(this.id + "_cs_viscosity").getValue(), k = Ext.getCmp(this.id + "_cs_flow").getValue(), l = [], m = 1; e >= m; m++) l.push({
                acronym: EXI.proposalManager.getMacromoleculeById(c).acronym,
                macromoleculeId: c,
                bufferId: d,
                buffer_acronym: EXI.proposalManager.getBufferById(d).acronym,
                concentration: m,
                volumeToLoad: f,
                exposureTemperature: h,
                transmission: g,
                waitTime: i,
                viscosity: j,
                flow: k
            });
            this.measurementGrid.store.loadData(l, !0), this.setData(JSON.parse(Ext.encode(Ext.pluck(this.measurementGrid.store.data.items, "data"))));
        }
    });
    return Ext.create("Ext.panel.Panel", {
        margin: "0 10 0 0",
        height: 200,
        width: 1150,
        cls: "border-grid",
        items: [ {
            xtype: "container",
            layout: "hbox",
            items: [ {
                xtype: "numberfield",
                id: this.id + "_cs_conc",
                fieldLabel: "How many unknow concentrations do you have?",
                labelWidth: 300,
                width: 500,
                margin: "5 0 0 10",
                minValue: 1,
                maxValue: 20,
                value: 1
            } ]
        }, {
            xtype: "container",
            margin: "10 0 0 10",
            layout: "hbox",
            items: [ a, {
                xtype: "numberfield",
                id: this.id + "_cs_seu",
                fieldLabel: "Exposure. Temp.",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 20",
                value: 4,
                minValue: 4,
                maxValue: 60
            }, {
                xtype: "numberfield",
                margin: "5 0 0 50",
                id: this.id + "_cs_volume",
                fieldLabel: "Vol. To Load (&#181l)",
                labelWidth: 100,
                width: 220,
                value: 40,
                minValue: 10,
                maxValue: 300
            }, {
                xtype: "numberfield",
                id: this.id + "_cs_transmission",
                fieldLabel: "Transmission (%)",
                labelWidth: 100,
                width: 220,
                margin: "5 0 0 50",
                value: 100,
                minValue: 0,
                maxValue: 100
            } ]
        }, {
            xtype: "container",
            layout: "hbox",
            margin: "5 0 0 10",
            items: [ b, {
                xtype: "numberfield",
                id: this.id + "_cs_waitTime",
                fieldLabel: "Wait Time",
                labelWidth: 100,
                width: 220,
                value: 0,
                minValue: 0,
                maxValue: 100,
                margin: "5 0 0 20"
            }, {
                xtype: "combo",
                id: this.id + "_cs_viscosity",
                store: [ "low", "medium", "high" ],
                fieldLabel: "SC Viscosity",
                value: "low",
                margin: "5 0 0 50",
                labelWidth: 100,
                width: 220
            }, {
                xtype: "checkbox",
                id: this.id + "_cs_flow",
                fieldLabel: "Flow",
                checked: !0,
                labelWidth: 100,
                width: 250,
                margin: "0 0 0 80"
            } ]
        }, {
            xtype: "container",
            layout: "hbox",
            margin: "20 0 0 0",
            items: [ c ]
        } ]
    });
}, MeasurementCreatorStepWizardForm.prototype.getHeaderForm = function() {
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "hbox",
        height: 100,
        items: [ {
            xtype: "textfield",
            name: "Name",
            id: this.id + "name",
            width: 400,
            labelWidth: 50,
            fieldLabel: "Name",
            margin: "20 20 20 20",
            value: ""
        }, {
            id: this.id + "comments",
            xtype: "textareafield",
            name: "comments",
            fieldLabel: "Comments",
            height: 75,
            labelWidth: 100,
            margin: "20 20 20 50",
            width: 600
        } ]
    }), this.panel;
}, MeasurementCreatorStepWizardForm.prototype.getForm = function() {
    var a = this;
    return this.formPanel = Ext.create("Ext.tab.Panel", {
        padding: "0 0 0 0",
        plain: !0,
        margin: "20 5 20 10",
        height: 290,
        items: [ {
            tabConfig: {
                title: "Concentration Series"
            },
            items: this.getConcentrationMeasurementForm()
        }, {
            tabConfig: {
                title: "Individual Measurement"
            },
            items: [ this.getSingleMeasurementForm() ]
        } ]
    }), this.measurementGrid = new MeasurementGrid({
        height: 250,
        maxHeight: 250,
        minHeight: 250,
        width: 1150,
        tbar: !1,
        maxWidth: 870,
        resizable: !1,
        margin: "0 10 10 10",
        isStatusColumnHidden: !0,
        isTimeColumnHidden: !0,
        removeBtnEnabled: !0,
        isPriorityColumnHidden: !0
    }), this.measurementGrid.onRemoved.attach(function(b, c) {
        a.setData(JSON.parse(Ext.encode(Ext.pluck(a.measurementGrid.grid.getStore().data.items, "data"))));
    }), this.panel = Ext.create("Ext.panel.Panel", {
        plain: !0,
        frame: !1,
        border: 0,
        items: [ this.getHeaderForm(), this.formPanel, this.addButton, this.measurementGrid.getPanel([]) ]
    }), null != this.data.measurementsSelected && (this.measurementGrid.grid.getStore().loadData(this.data.measurementsSelected, !1), 
    this.setData(JSON.parse(Ext.encode(Ext.pluck(this.measurementGrid.grid.getStore().data.items, "data"))))), 
    this.panel;
}, MeasurementCreatorStepWizardForm.prototype.getBuffers = function(a) {
    for (var b = {}, c = null, d = 0; d < a.length; d++) c = a[d], null == b[c.bufferId] && (b[c.bufferId] = {
        buffer: c.buffer_acronym,
        bufferId: c.bufferId,
        volumeToLoad: c.volumeToLoad,
        volume: 0,
        concentration: 0,
        transmission: c.transmission,
        flow: c.flow,
        viscosity: c.viscosity
    }), b[c.bufferId].volume = Number(b[c.bufferId].volume) + 2 * c.volumeToLoad;
    var e = [];
    for (var f in b) b.hasOwnProperty(f) && (c = b[f], e.push({
        bufferId: c.bufferId,
        buffer: EXI.proposalManager.getBufferById(c.bufferId).acronym,
        concentration: c.concentration,
        volume: c.volume,
        volumeToLoad: c.volumeToLoad,
        transmission: c.transmission,
        flow: c.flow,
        viscosity: c.viscosity
    }));
    return e;
}, MeasurementCreatorStepWizardForm.prototype.parseMeasurements = function(a) {
    var b = [], c = null, d = null, e = this.getBuffers(a);
    for (d = 0; d < e.length; d++) c = e[d], b.push({
        SEUtemperature: "",
        buffer: c.buffer,
        buffername: c.buffer,
        code: c.buffer,
        comments: "",
        concentration: 0,
        enable: !0,
        flow: c.flow,
        recuperate: !1,
        title: "",
        transmission: c.transmission,
        macromolecule: c.buffer,
        type: "Buffer",
        typen: 1,
        viscosity: c.viscosity,
        volume: c.volume,
        volumeToLoad: c.volumeToLoad,
        waittime: 0,
        plate: null,
        row: null,
        well: null
    });
    for (d = 0; d < a.length; d++) {
        c = a[d];
        var f = "Buffer", g = "";
        null != c.macromoleculeId && (f = "Sample", g = EXI.proposalManager.getMacromoleculeById(c.macromoleculeId).acronym), 
        b.push({
            SEUtemperature: c.exposureTemperature,
            buffer: c.buffer_acronym,
            buffername: c.buffer_acronym,
            code: g,
            comments: "",
            concentration: c.concentration,
            enable: !0,
            flow: c.flow,
            recuperate: !1,
            title: "",
            transmission: c.transmission,
            macromolecule: g,
            type: f,
            typen: 1,
            viscosity: c.viscosity,
            volume: c.volumeToLoad,
            volumeToLoad: c.volumeToLoad,
            waittime: c.waitTime,
            plate: null,
            row: null,
            well: null
        });
    }
    var h = new SampleAutomaticPositionFactory(b);
    return h.setPosition();
}, MeasurementCreatorStepWizardForm.prototype.getNextForm = function() {
    return new FinalStepWizardForm(JSON.stringify(this.parseMeasurements(this.data.measurementsSelected)));
}, SampleAutomaticPositionFactory.prototype.getAvailablePlates = function() {
    for (var a = EXI.proposalManager.getPlateByFlavour(), b = [], c = [], d = 0; d < a.length; d++) if (2 == a[d].plateTypeId) {
        for (var e = 0; 12 > e; e++) b.push({
            plate: 2,
            row: Math.floor(e / 3) + 1,
            well: Number(Number(e % 3) + 9)
        });
        for (var f = 0, e = 0; 32 > e; e++) {
            var g = {
                plate: 2,
                row: Math.floor(e / 8) + 1,
                well: Number(e % 8) + 1 - f
            };
            c.push(g);
        }
    }
    for (var d = 0; d < a.length; d++) if (2 != a[d].plateTypeId) {
        for (var h = 0; h < a[d].rowCount; h++) for (var i = 0; i < a[d].columnCount; i++) b.push({
            plate: d + 1,
            row: h + 1,
            well: i + 1
        });
        for (var h = 0; h < a[d].rowCount; h++) for (var i = 0; i < a[d].columnCount; i++) c.push({
            plate: d + 1,
            row: h + 1,
            well: i + 1
        });
    }
    return {
        buffer: b.reverse(),
        sample: c.reverse()
    };
}, SampleAutomaticPositionFactory.prototype._getKey = function(a, b, c) {
    return a + ":" + b + "-" + c;
}, SampleAutomaticPositionFactory.prototype.setPosition = function() {
    for (var a = this.getAvailablePlates(), b = {}, c = 0; c < this.samples.length; c++) if ("Buffer" == this.samples[c].type) {
        var d = this._getKey(this.samples[c].plate, this.samples[c].row, this.samples[c].well);
        this.samples[c].plate = a.buffer[a.buffer.length - 1].plate, this.samples[c].row = a.buffer[a.buffer.length - 1].row, 
        this.samples[c].well = a.buffer[a.buffer.length - 1].well, b[d] = !0, a.buffer.pop();
    }
    for (var e = {}, c = 0; c < this.samples.length; c++) if ("Sample" == this.samples[c].type) {
        for (var d = this._getKey(a.sample[a.sample.length - 1].plate, a.sample[a.sample.length - 1].row, a.sample[a.sample.length - 1].well); null != b[d]; ) a.sample.pop(), 
        d = this._getKey(a.sample[a.sample.length - 1].plate, a.sample[a.sample.length - 1].row, a.sample[a.sample.length - 1].well);
        var f = this.samples[c].macromolecule + "_" + this.samples[c].buffer + "_" + this.samples[c].concentration;
        if (null != e[f]) {
            this.samples[c].plate = e[f].plate, this.samples[c].row = e[f].row, this.samples[c].well = e[f].well;
            continue;
        }
        e[f] = {
            plate: a.sample[a.sample.length - 1].plate,
            row: a.sample[a.sample.length - 1].row,
            well: a.sample[a.sample.length - 1].well
        }, this.samples[c].plate = a.sample[a.sample.length - 1].plate, this.samples[c].row = a.sample[a.sample.length - 1].row, 
        this.samples[c].well = a.sample[a.sample.length - 1].well, b[d] = !0, a.sample.pop();
    }
    return this.samples;
}, WizardWidget.prototype.draw = function(a, b) {
    this.targetId = a, this.forms.push(b), this.renderMasterContainer();
}, WizardWidget.prototype.getButtons = function(a, b, c) {
    var d = this;
    return null != d.forms[d.step].onWizardFinished ? [ {
        text: "Back",
        handler: function() {
            d.step = d.step - 1, d.renderMasterContainer(), c(), d.forms[d.step].reload();
        }
    }, "->", {
        text: "Finish",
        handler: function() {
            d.forms[d.step].onWizardFinished.attach(function(a, b) {
                d.onFinished.notify(b);
            }), b();
        }
    } ] : 0 == a ? [ "->", {
        text: "Next",
        handler: function() {
            d.forms.push(d.forms[d.step].getNextForm()), d.step = d.step + 1, d.renderMasterContainer(), 
            b(d.forms[d.step - 1].data);
        }
    } ] : this.step > 0 && null == this.forms[d.step].onWizardFinished ? [ {
        text: "Back",
        handler: function() {
            d.step = d.step - 1, d.renderMasterContainer(), c(), d.forms[d.step].reload();
        }
    }, "->", {
        text: "Next",
        handler: function() {
            null == d.forms[d.step].onWizardFinished ? (d.forms.push(d.forms[d.step].getNextForm()), 
            d.step = d.step + 1, b(d.forms[d.step - 1].data), d.renderMasterContainer()) : (d.forms[d.step].onWizardFinished.attach(function(a, b) {
                d.window.close(), d.onFinished.notify(b);
            }), d.step = d.step + 1, b(d.forms[d.step - 1].data));
        }
    } ] : void 0;
}, WizardWidget.prototype.getPanel = function(a) {
    return this.forms.push(a), Ext.create("Ext.form.Panel", {
        width: this.width,
        height: 800,
        items: [ this.forms[this.step].getForm() ],
        buttons: this.getButtons(this.step, this.forms[this.step].onNext, this.forms[this.step].onBack)
    });
}, WizardWidget.prototype.renderMasterContainer = function() {
    null != this.current && this.current.destroy(), null != this.window && this.window.destroy(), 
    this.current = this.getPanel(), 0 == this.windowMode ? this.current.render(this.targetId) : (this.window = Ext.create("Ext.Window", {
        id: this.id,
        resizable: !0,
        constrain: !0,
        modal: !0,
        frame: !1,
        draggable: !0,
        autoscroll: !0,
        layout: {
            type: "vbox",
            align: "stretch"
        },
        items: this.current,
        width: this.width,
        title: "BIOSAXS Experiment Designer",
        listeners: {
            scope: this,
            minimize: function() {
                this.panel.hide();
            },
            destroy: function() {
                delete this.panel;
            }
        }
    }), this.window.show());
}, ListView.prototype.getSorters = function() {
    return {};
}, ListView.prototype.getFilter = function(a) {
    return null;
}, ListView.prototype.load = function(a) {
    this.data = a, null != this.formatData ? this.store.loadData(this.formatData(a)) : this.store.loadData(a);
}, ListView.prototype.getPanel = function() {
    var a = this;
    return this.store = Ext.create("Ext.data.Store", {
        fields: this.getFields(),
        data: [],
        sorters: this.sorters,
        proxy: {
            type: "memory",
            reader: {
                type: "json"
            }
        }
    }), this.panel = Ext.create("Ext.grid.Panel", {
        store: this.store,
        layout: "fit",
        columns: this.getColumns(),
        width: this.width,
        height: this.height,
        multiSelect: !0,
        dockedItems: [ {
            xtype: "toolbar",
            dock: "bottom",
            cls: "x-toolbar",
            height: 42,
            items: [ {
                xtype: "textfield",
                name: "searchField",
                hideLabel: !0,
                width: 200,
                hidden: null == a.getFilter(),
                emptyText: "Search...",
                listeners: {
                    change: function(b, c) {
                        var d = b.getValue();
                        "" != d ? a.store.filter(a.getFilter(d)) : (a.store.clearFilter(!0), a.load(a.data));
                    }
                }
            } ]
        } ],
        viewConfig: {
            emptyText: "No items to display",
            enableTextSelection: !0,
            preserveScrollOnRefresh: !0,
            stripeRows: !0
        }
    }), this.panel.on("selectionchange", function(b, c) {
        var d = [];
        for (var e in c) d.push(c[e].data);
        a.onSelect.notify(d);
    }), this.panel;
}, AddressListView.prototype.getPanel = ListView.prototype.getPanel, AddressListView.prototype.load = ListView.prototype.load, 
AddressListView.prototype.getFilter = function(a) {
    return [ {
        property: "cardName",
        value: a,
        anyMatch: !0
    } ];
}, AddressListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>cardName:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.cardName + "</td></tr>", 
    b = b + "<tr><td>Familiy Name:</td><td>" + a.data.personVO.familyName + "</td></tr>", 
    b = b + "<tr><td>Name:</td><td>" + a.data.personVO.givenName + "</td></tr>", b = b + "<tr><td>Email:</td><td>" + a.data.personVO.emailAddress + "</td></tr>", 
    b + "</table>";
}, AddressListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Addresses",
        flex: 1,
        dataIndex: "sessionId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    }, {
        text: "sessionId",
        dataIndex: "sessionId",
        hidden: !0
    }, {
        text: "startDate",
        dataIndex: "startDate",
        hidden: !0
    }, {
        text: "nbShifts",
        dataIndex: "nbShifts",
        hidden: !0
    }, {
        text: "endDate",
        dataIndex: "endDate",
        hidden: !0
    }, {
        text: "comments",
        dataIndex: "comments",
        hidden: !0
    } ];
}, AddressListView.prototype.getFields = function() {
    return [ "cardName", "defaultCourrierCompany", "personVO.emailAddress" ];
}, PuckListView.prototype.getPanel = ListView.prototype.getPanel, PuckListView.prototype.load = ListView.prototype.load, 
PuckListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    if (b = b + "<tr><td>Code:</td><td>" + a.data.Container_code + "</td></tr>", b = b + "<tr><td  style='color:#207a7a;font-weight:bold;'>Status:</td><td>" + a.data.Dewar_dewarStatus + "</td></tr>", 
    b = b + "<tr><td>Shipping:</td><td>" + a.data.Shipping_shippingName + "</td></tr>", 
    null != a.data.Shipping_bltimeStamp) try {
        b = b + "<tr><td>Shipping Date:</td><td>" + moment(a.data.Shipping_bltimeStamp).format("MMM Do YY") + "</td></tr>";
    } catch (c) {
        b += "<tr><td>Shipping Date:</td><td>Format Error</td></tr>";
    }
    return b + "</table>";
}, PuckListView.prototype.getFilter = function(a) {
    return [ {
        property: "creationDate",
        value: a,
        anyMatch: !0
    } ];
}, PuckListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Pucks",
        flex: 1,
        dataIndex: "shippingId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, PuckListView.prototype.getFields = function() {
    return [ "Shipping_shippingName", "Container_code", "Dewar_dewarStatus", "shippingStatus", "shippingType" ];
}, SessionListView.prototype.getPanel = ListView.prototype.getPanel, SessionListView.prototype.load = ListView.prototype.load, 
SessionListView.prototype.getFilter = function(a) {
    return [ {
        property: "beamlineName",
        value: a,
        anyMatch: !0
    } ];
}, SessionListView.prototype.formatData = function(a) {
    for (var b = 0; b < a.length; b++) a[b].date = moment(a[b].startDate).format("MMM Do YY");
    return a;
}, SessionListView.prototype.getValue = function(a) {
    return null != a ? "<tr><td style='max-width: 175px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;'>" + a + "</td></tr>" : "";
}, SessionListView.prototype.getRow = function(a) {
    var b = "<div style='color:#207a7a;font-size:12px;font-weight:bold;'>" + a.data.beamlineName + "</div>";
    if (b += "<table class='listView'>", null != a.data.startDate) try {
        b = b + "<tr><td>" + moment(a.data.startDate).format("MMM Do YY") + "</td></tr>";
    } catch (c) {
        b += "<tr><td>Date:</td><td>Format Error</td></tr>";
    }
    return b += this.getValue(a.data.beamlineOperator), b += this.getValue(a.data.comments), 
    b += "</table>";
}, SessionListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Session",
        flex: 1,
        dataIndex: "sessionId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    }, {
        text: "sessionId",
        dataIndex: "sessionId",
        hidden: !0
    }, {
        text: "startDate",
        dataIndex: "startDate",
        hidden: !0
    }, {
        text: "nbShifts",
        dataIndex: "nbShifts",
        hidden: !0
    }, {
        text: "endDate",
        dataIndex: "endDate",
        hidden: !0
    }, {
        text: "comments",
        dataIndex: "comments",
        hidden: !0
    } ];
}, SessionListView.prototype.getFields = function() {
    return [ "date", "startDate", "nbShifts", "endDate", "comments", "sessionId", "beamlineName" ];
}, ShippingListView.prototype.getPanel = ListView.prototype.getPanel, ShippingListView.prototype.load = ListView.prototype.load, 
ShippingListView.prototype.getColorByStatus = function(a) {
    return "black";
}, ShippingListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    b = b + "<tr><td>Name:</td><td>" + a.data.Shipping_shippingName + "</td></tr>";
    var c = a.data.Shipping_shippingStatus.toUpperCase();
    return b = b + "<tr><td>Type:</td><td>" + a.data.Shipping_shippingType + "</td></tr>", 
    b = b + "<tr><td colspan=2; style='font-weight:bold;color:" + this.getColorByStatus(c) + ";'> " + c + "</td></tr>", 
    b + "</table>";
}, ShippingListView.prototype.getFilter = function(a) {
    return [ {
        property: "creationDate",
        value: a,
        anyMatch: !0
    } ];
}, ShippingListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Shipping",
        flex: 1,
        dataIndex: "shippingId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, ShippingListView.prototype.getFields = function() {
    return [ "Shipping_shippingName", "creationDate", "Shipping_shippingStatus", "Shipping_shippingType", "Shipping_shippingId" ];
}, WorkSpaceListView.prototype.loadProjects = function(a) {
    null != a && this.projectStore.loadData(a), this.loadRuns();
}, WorkSpaceListView.prototype.loadRuns = function() {
    var a = this, b = new ExiDataAdapter();
    b.onSuccess.attach(function(b, c) {
        a.runStore.loadData(c.reverse()), a.runGrid.setLoading(!1);
    }), this.runGrid.setLoading(), this.projectId = exiSAXS.localExtorage.userManager.getActiveProject().internalId, 
    b.getRuns(exiSAXS.localExtorage.userManager.getActiveProject().internalId);
}, WorkSpaceListView.prototype.setSelectedItems = function(a) {
    for (var b = 0; b < a.length; b++) delete a[b].id;
    this.selection.loadData(a), this.projectGrid.collapse();
}, WorkSpaceListView.prototype.getSelectionPanel = function() {
    function a(a, b) {
        if (null != a && null != b) {
            if (.3 > a / b) return "<span style='color:red;'>" + a + "/" + b + "</span>";
            if (.7 > a / b) return "<span style='color:orange;'>" + a + "/" + b + "</span>";
        }
        return a + "/" + b;
    }
    function b(a) {
        "yes" == a && exiSAXS.localExtorage.selectedSubtractionsManager.remove(record.data);
    }
    return this.selection = Ext.create("Ext.data.Store", {
        fields: [ "subtractionId", "scattering", "macromoleculeAcronym", "concentration", "framesMerge", "framesCount", "exposureTemperature" ]
    }), this.selectionGrid = Ext.create("Ext.grid.Panel", {
        store: this.selection,
        title: "Selection",
        emptyText: "No selection",
        tbar: this.selectionMenu.getPanel(),
        columns: [ {
            text: "",
            dataIndex: "scattering",
            renderer: function(a, b, c) {
                return "<img src=" + new DataAdapter().getImage(c.data.subtractionId, "scattering") + '   height="70" width="70" >';
            }
        }, {
            text: "",
            dataIndex: "macromoleculeAcronym",
            flex: .8,
            renderer: function(b, c, d) {
                return d.data.macromoleculeAcronym + "<br />" + BUI.formatValuesUnits(d.data.concentration, "mg/ml", 7, 2) + "<br />" + d.data.exposureTemperature + "<span class='key_subgrid'> C</span><br />" + a(d.data.framesMerge, d.data.framesCount);
            }
        }, {
            text: "",
            id: "remove",
            dataIndex: "scattering",
            width: 50,
            renderer: function(a) {
                return '<br /><img style="cursor: pointer; height:30px;width:30px;" src="images/icon/ic_highlight_remove_black_24dp.png" />';
            }
        } ],
        width: 200,
        listeners: {
            cellclick: function(a, c, d, e, f, g, h, i) {
                2 == d && Ext.Msg.show({
                    title: "Discard subtraction?",
                    msg: "Your are discarding a selected subtraction. You may re-add it afterwards. Would you like to discard it?",
                    buttons: Ext.Msg.YESNO,
                    icon: Ext.Msg.QUESTION,
                    fn: b,
                    height: 150
                });
            }
        }
    }), this.selectionGrid;
}, WorkSpaceListView.prototype.getProjectPanel = function() {
    return this.projectStore = Ext.create("Ext.data.Store", {
        fields: [ "name" ]
    }), this.projectGrid = Ext.create("Ext.grid.Panel", {
        store: this.projectStore,
        title: "Projects",
        emptyText: "No projects",
        columns: [ {
            text: "Name",
            dataIndex: "name",
            flex: 1,
            renderer: function(a, b, c) {
                var d = "<span class='projectName'>" + c.data.name + "</span><br/><span class='projectDescription'>" + c.data.description + "</span>";
                return null != c.data.subtractions && (d = d + "<br />" + c.data.subtractions.length + " datasets selected"), 
                d;
            }
        } ],
        height: 200
    }), this.projectGrid;
}, WorkSpaceListView.prototype.getRunPanel = function() {
    var a = this;
    return this.runStore = Ext.create("Ext.data.Store", {
        fields: [ "name" ]
    }), this.runGrid = Ext.create("Ext.grid.Panel", {
        store: this.runStore,
        title: "Run",
        emptyText: "No Runs",
        minHeight: 600,
        dockedItems: [ {
            xtype: "toolbar",
            dock: "bottom",
            ui: "footer",
            items: [ {
                xtype: "component",
                flex: 1
            }, {
                xtype: "button",
                text: "Refresh",
                handler: function(b, c, d) {
                    a.loadRuns();
                }
            } ]
        } ],
        columns: [ {
            text: "Name",
            dataIndex: "name",
            flex: 1,
            renderer: function(a, b, c) {
                var d = c.data.jobs, e = "<table>";
                if (e = e + "<tr ><td  class='nameRun'>" + c.data.name + "</td></tr>", e = e + "<tr ><td  class='statusRun'>" + c.data.status + "</td></tr>", 
                e = e + "<tr ><td  class='dateRun'>" + c.data.creationDate + "</td></tr>", null != d) for (var f = 0; f < d.length; f++) e = e + "<tr ><td class='jobRow'>" + d[f].name + "</td><td>" + d[f].status + "</td></tr>";
                return e + "</table>";
            }
        } ],
        height: 200
    }), this.runGrid.on("select", function(b, c, d, e) {
        location.hash = "/project/" + a.projectId + "/run/" + c.data.internalId + "/main";
    }), this.runGrid;
}, WorkSpaceListView.prototype.getPanel = function() {
    var a = this;
    return this.panel = Ext.create("Ext.panel.Panel", {
        layout: "fit",
        autoScroll: !0,
        defaults: {
            bodyStyle: "padding:15px"
        },
        items: [ a.getSelectionPanel(), a.getProjectPanel(), a.getRunPanel() ]
    }), this.panel;
}, RunListView.prototype.getPanel = ListView.prototype.getPanel, RunListView.prototype.load = ListView.prototype.load, 
RunListView.prototype.getFilter = function(a) {
    return [ {
        property: "name",
        value: a,
        anyMatch: !0
    } ];
}, RunListView.prototype.formatStatus = function(a) {
    return "FINISHED" == a ? "<span style='color:green;font-weight:bold;'>" + a + "</span>" : "<span style='color:orange;font-weight:bold;'>" + a + "</span>";
}, RunListView.prototype.formatJobs = function(a) {
    for (var b = "<table>", c = 0; c < a.length; c++) b = b + "<tr><td>" + a[c].name + "</td></tr>";
    return b + "</table>";
}, RunListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Name:</td><td>" + a.data.name + "</td></tr>", b = b + "<tr><td>Status:</td><td>" + this.formatStatus(a.data.status) + "</td></tr>", 
    b = b + "<tr><td>Jobs:</td><td>" + this.formatJobs(a.data.jobs) + "</td></tr>", 
    b = b + "<tr><td>Date:</td><td>" + a.data.creationDate + "</td></tr>", b + "</table>";
}, RunListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Jobs",
        flex: 1,
        dataIndex: "sessionId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, RunListView.prototype.getFields = function() {
    return [ "name", "status", "creationDate", "jobs" ];
}, CrystalListView.prototype.getPanel = ListView.prototype.getPanel, CrystalListView.prototype.load = ListView.prototype.load, 
CrystalListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Acronym:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.proteinVO.acronym + "</td></tr>", 
    b = b + "<tr><td>Name:</td><td>" + a.data.proteinVO.name + "</td></tr>", null != a.data.diffractionPlanVO && null != a.data.diffractionPlanVO.experimentKind && (b = b + "<tr><td>Experiment:</td><td>" + a.data.diffractionPlanVO.experimentKind + "</td></tr>"), 
    a.data.spaceGroup && (b = b + "<tr><td>Space Group:</td><td>" + a.data.spaceGroup + "</td></tr>"), 
    b + "</table>";
}, CrystalListView.prototype.getFilter = function(a) {
    return [ {
        property: "acronym",
        value: a,
        anyMacth: !0
    } ];
}, CrystalListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Crystals",
        flex: 1,
        dataIndex: "bufferId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, CrystalListView.prototype.getFields = function() {
    return [ "acronym", "name" ];
}, ProteinListView.prototype.getPanel = ListView.prototype.getPanel, ProteinListView.prototype.load = ListView.prototype.load, 
ProteinListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Acronym:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.acronym + "</td></tr>", 
    b = b + "<tr><td>Name:</td><td>" + a.data.name + "</td></tr>", b + "</table>";
}, ProteinListView.prototype.getFilter = function(a) {
    return [ {
        property: "acronym",
        value: a,
        anyMacth: !0
    } ];
}, ProteinListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Proteins",
        flex: 1,
        dataIndex: "bufferId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, ProteinListView.prototype.getFields = function() {
    return [ "acronym", "name" ];
}, BufferListView.prototype.getPanel = ListView.prototype.getPanel, BufferListView.prototype.load = ListView.prototype.load, 
BufferListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Acronym:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.acronym + "</td></tr>", 
    b = b + "<tr><td>name:</td><td>" + a.data.name + "</td></tr>", b + "</table>";
}, BufferListView.prototype.getFilter = function(a) {
    return [ {
        property: "acronym",
        value: a,
        anyMacth: !0
    } ];
}, BufferListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Buffers",
        flex: 1,
        dataIndex: "bufferId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, BufferListView.prototype.getFields = function() {
    return [ "acronym", "name" ];
}, DataCollectionListView.prototype.getPanel = ListView.prototype.getPanel, DataCollectionListView.prototype.load = ListView.prototype.load, 
DataCollectionListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Macromolecule:</td><td >" + a.data.macromoleculeAcronym + "</td></tr>", 
    b = b + "<tr><td>Buffer:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.bufferAcronym + "</td></tr>", 
    b = b + "<tr><td>Count:</td><td>" + a.data.dataCollections + "</td></tr>", b + "</table>";
}, DataCollectionListView.prototype.getFilter = function(a) {
    return [ {
        property: "bufferAcronym",
        value: a,
        anyMacth: !0
    } ];
}, DataCollectionListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Data Collections",
        flex: 1,
        dataIndex: "bufferAcronym",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, DataCollectionListView.prototype.getFields = function() {
    return [ "macromoleculeAcronym", "bufferAcronym", "macromoleculeId", "dataCollections" ];
}, DataCollectionListView.prototype.formatData = function(a) {
    a = BUI.groupBy(a, function(a) {
        return [ a.bufferAcronym ];
    });
    for (var b = [], c = 0; c < a.length; c++) {
        var d = a[c];
        b.push({
            macromoleculeAcronym: d[0].macromoleculeAcronym,
            macromoleculeId: d[0].macromoleculeId,
            bufferAcronym: d[0].bufferAcronym,
            dataCollections: d.length
        });
    }
    return b;
}, ExperimentListView.prototype.getPanel = ListView.prototype.getPanel, ExperimentListView.prototype.load = ListView.prototype.load, 
ExperimentListView.prototype.getRow = function(a) {
    var b = "black";
    "HPLC" != a.data.experimentType && 0 == a.data.measurementDoneCount && 0 == a.data.measurementAveragedCount && 0 == a.data.dataCollectionDoneCount && (b = "#DEDEDE");
    var c = "<table class='listView' style='color:" + b + ";'>";
    return c = c + "<tr><td colspan='4'>" + a.data.creationDate + "</td></tr>", c = c + "<tr><td colspan='4'>" + a.data.name + "</td></tr>", 
    c = c + "<tr><td style='font-weight:bold;' colspan='4'>" + a.data.experimentType + "</td></tr>", 
    "STATIC" != a.data.experimentType && "CALIBRATION" != a.data.experimentType || (0 == a.data.measurementDoneCount && 0 == a.data.measurementAveragedCount && 0 == a.data.dataCollectionDoneCount ? c = c + "<tr ><td  style='width:180px;border:1px solid gray;text-align:center;color:" + b + ";font-weight:bold;' colspan='4'>EMPTY</td></tr>" : (c = c + "<tr style='margin-left:5px;'><td style='width:10px;'></td><td>Collected:</td><td>" + a.data.measurementDoneCount + "/" + a.data.measurementCount + "</td><td>" + new ProgressBar().getPanel(a.data.measurementDoneCount, a.data.measurementCount) + "</td></tr>", 
    c = c + "<tr><td style='width:10px;'></td><td>Averaged:</td><td>" + a.data.measurementAveragedCount + "/" + a.data.measurementCount + "</td><td>" + new ProgressBar().getPanel(a.data.measurementAveragedCount, a.data.measurementCount) + "</td></tr>", 
    c = c + "<tr><td style='width:10px;'></td><td>Subtracted:</td><td>" + a.data.dataCollectionDoneCount + "/" + a.data.dataCollectionCount + "</td><td>" + new ProgressBar().getPanel(a.data.dataCollectionDoneCount, a.data.dataCollectionCount) + "</td></tr>")), 
    c + "</table>";
}, ExperimentListView.prototype.getFilter = function(a) {
    return [ {
        property: "name",
        value: a,
        anyMacth: !0
    } ];
}, ExperimentListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Experiment",
        flex: 1,
        dataIndex: "sessionId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, ExperimentListView.prototype.getFields = function() {
    return [ "creationDate", "name", "experimentType" ];
}, MacromoleculeListView.prototype.getPanel = ListView.prototype.getPanel, MacromoleculeListView.prototype.load = ListView.prototype.load, 
MacromoleculeListView.prototype.getRow = function(a) {
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Acronym:</td><td style='color:#207a7a;font-weight:bold;'>" + a.data.acronym + "</td></tr>", 
    b = b + "<tr><td>name:</td><td>" + a.data.name + "</td></tr>", b + "</table>";
}, MacromoleculeListView.prototype.getFilter = function(a) {
    return [ {
        property: "acronym",
        value: a,
        anyMacth: !0
    } ];
}, MacromoleculeListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Macromolecule",
        flex: 1,
        dataIndex: "macromoleculeId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, MacromoleculeListView.prototype.getFields = function() {
    return [ "acronym", "name", "comments" ];
}, StockSolutionListView.prototype.getPanel = ListView.prototype.getPanel, StockSolutionListView.prototype.load = ListView.prototype.load, 
StockSolutionListView.prototype.getRow = function(a) {
    console.log(a);
    var b = "<table class='listView'>";
    return b = b + "<tr><td>Name:</td><td>" + a.data.name + "</td></tr>", b = b + "<tr><td>Macromolecule:</td><td style='color:#207a7a;font-weight:bold;'>" + EXI.proposalManager.getMacromoleculeById(a.data.macromoleculeId).acronym + "</td></tr>", 
    b = b + "<tr><td>Buffer:</td><td style='color:#207a7a;font-weight:bold;'>" + EXI.proposalManager.getBufferById(a.data.bufferId).acronym + "</td></tr>", 
    b = b + "<tr><td>Concentration:</td><td>" + a.data.concentration + "</td></tr>", 
    b = b + "<tr><td>Storage Temperature:</td><td>" + a.data.storageTemperature + "</td></tr>", 
    b + "</table>";
}, StockSolutionListView.prototype.getFilter = function(a) {
    return [ {
        property: "name",
        value: a,
        anyMacth: !0
    } ];
}, StockSolutionListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Stock Solutions",
        flex: 1,
        dataIndex: "macromoleculeId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, StockSolutionListView.prototype.getFields = function() {
    return [ "macromoleculeId", "bufferId", "concentration", "storageTemperature", "name" ];
}, TemplateListView.prototype.getPanel = ListView.prototype.getPanel, TemplateListView.prototype.load = ListView.prototype.load, 
TemplateListView.prototype.getRow = function(a) {
    var b = "black", c = "<table class='listView' style='color:" + b + ";'>";
    return c = c + "<tr style='font-weight: bold;font-size:14px; color:#207a7a;'><td colspan='4'>" + a.data.name + "</td></tr>", 
    c = c + "<tr><td style='font-weight:bold;' colspan='4'>" + a.data.comments + "</td></tr>", 
    c = c + "<tr ><td colspan='4'>" + a.data.creationDate + "</td></tr>", c + "</table>";
}, TemplateListView.prototype.getFilter = function(a) {
    return [ {
        property: "name",
        value: a,
        anyMatch: !0
    } ];
}, TemplateListView.prototype.getColumns = function() {
    var a = this;
    return [ {
        text: "Experiment",
        flex: 1,
        dataIndex: "sessionId",
        renderer: function(b, c, d) {
            return a.getRow(d);
        }
    } ];
}, TemplateListView.prototype.getFields = function() {
    return [ {
        name: "creationDate",
        type: "string"
    }, {
        name: "name",
        type: "string"
    }, {
        name: "experimentType",
        type: "string"
    } ];
}, MainView.prototype.getContainer = function() {
    return this.container;
}, MainView.prototype.getPanel = function() {
    return this.container = Ext.create("Ext.container.Container", {
        xtype: "container",
        items: []
    }), this.panel = Ext.create("Ext.panel.Panel", {
        autoScroll: !0,
        title: this.title,
        closable: this.closable,
        icon: this.icon,
        bodyStyle: this.bodyStyle,
        items: [ this.getContainer() ]
    }), this.panel;
}, PuckMainView.prototype.getPanel = MainView.prototype.getPanel, PuckMainView.prototype.getContainer = MainView.prototype.getContainer, 
PuckMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        cls: "border-grid",
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.puckForm.getPanel() ]
    });
}, PuckMainView.prototype.load = function(a) {
    this.puckForm.load(a, null);
}, AddressMainView.prototype.getPanel = MainView.prototype.getPanel, AddressMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "hbox"
        },
        margin: 15,
        border: 1,
        defaults: {
            labelWidth: 80,
            flex: 1
        },
        items: [ this.addressForm.getPanel([]) ]
    });
}, AddressMainView.prototype.load = function(a) {
    this.panel.setTitle("Address");
    var b = this, c = function(a, c) {
        b.addressForm.load(c);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).proposal.labcontacts.getLabContactById(a);
}, UserWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, UserWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
UserWelcomeMainView.prototype.activeProposal = function(a) {
    EXI.credentialManager.setActiveProposal(this.username, a.Proposal_proposalCode + a.Proposal_proposalNumber), 
    EXI.proposalManager.get(!0);
}, UserWelcomeMainView.prototype.getContainer = function() {
    return this.panel = Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "20 10 10 10",
        items: [ {
            tabConfig: {
                title: "Sessions"
            },
            listeners: {
                afterrender: function() {}
            },
            items: [ {
                xtype: "container",
                id: this.id + "sessions",
                layout: "fit",
                padding: 10,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ {
                    html: "<div>Where is my beamline? <a target='blank' href='http://www.esrf.eu/files/live/sites/www/files/UsersAndScience/Experiments/Beamlines/beamlines-2015.jpg'>Here there is a map</a></div>",
                    height: 20
                }, {
                    xtype: "container",
                    layout: "hbox",
                    items: [ this.futureSessionsGrid.getPanel(), this.previousSessionsGrid.getPanel() ]
                } ]
            } ]
        }, {
            tabConfig: {
                title: "Proposals"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.proposalGrid.getPanel() ]
            } ]
        } ]
    }), this.panel.on("afterrender", function() {}), this.panel;
}, UserWelcomeMainView.prototype.parseSessionsByDate = function(a) {
    for (var b = [], c = [], d = [], e = 0; e < a.length; e++) a[e].diff = moment(a[e].startDate).diff(moment(), "days"), 
    0 == a[e].diff ? d.push(a[e]) : a[e].diff < 0 ? b.push(a[e]) : c.push(a[e]);
    return c.sort(function(a, b) {
        return a.diff - b.diff;
    }), {
        olderSessions: b,
        futureSessions: c,
        todaySessions: d
    };
}, UserWelcomeMainView.prototype.loadProposal = function(a) {
    function b(a, b) {
        c.panel.setLoading(!1);
        var d = c.parseSessionsByDate(b);
        d.olderSessions.length > 0 && (console.log(d.olderSessions), c.previousSessionsGrid.load(d.olderSessions)), 
        d.futureSessions.length > 0 && c.futureSessionsGrid.load(d.futureSessions), d.todaySessions.length > 0 && (Ext.getCmp(c.id + "sessions").insert(0, c.todaySessionsGrid.getPanel()), 
        c.todaySessionsGrid.load(d.todaySessions));
    }
    for (var c = this, d = 0; d < a.length; d++) c.activeProposal(a[d]), c.panel.setLoading("Loading Sessions"), 
    EXI.getDataAdapter({
        onSuccess: b
    }).proposal.session.getSessions();
}, UserWelcomeMainView.prototype.loadUserView = function() {
    var a = this;
    this.panel.setLoading("Loading Proposal");
    var b = function(b, c) {
        c.sort(function(a, b) {
            return a.Proposal_proposalId - b.Proposal_proposalId;
        }), a.proposalGrid.load(c), console.log(c), c.length > 0 && a.loadProposal(c);
    };
    EXI.proposalManager.get(), EXI.getDataAdapter({
        onSuccess: b
    }).proposal.proposal.getProposals();
}, UserWelcomeMainView.prototype.load = function(a) {
    this.username = a;
    var b = EXI.credentialManager.getCredentialByUserName(a);
    if (null != b && null != b.roles) {
        if (0 == b.roles.length && b.roles.push("user"), b.isManager()) return void alert("You are manager");
        if (b.isLocalContact()) return void alert("You are localContact");
        this.loadUserView();
    }
}, ManagerWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, ManagerWelcomeMainView.prototype.activeProposal = function(a) {
    EXI.credentialManager.setActiveProposal(this.username, a.code + a.number), EXI.proposalManager.get();
}, ManagerWelcomeMainView.prototype.getContainer = function() {
    return this.container = Ext.create("Ext.panel.Panel", {
        autoScroll: !0,
        cls: "border-grid",
        tbar: this.getToolbar(),
        bodyStyle: this.bodyStyle,
        items: []
    }), this.container;
}, ManagerWelcomeMainView.prototype.displayProposals = function(a) {
    var b = this;
    this.container.removeAll();
    var c = new ProposalGrid({
        width: 900,
        height: 600,
        margin: "10 10 10 10"
    });
    c.onSelected.attach(function(a, c) {
        function d(a, c) {
            b.displaySessions(c, c.length + " sessions for proposal " + e), b.panel.setLoading(!1);
        }
        b.panel.setLoading(!0);
        var e = c.Proposal_proposalCode + c.Proposal_proposalNumber;
        EXI.getDataAdapter({
            onSuccess: d
        }).proposal.session.getSessionsByProposal(e);
    }), this.container.insert(c.getPanel()), c.load(a);
}, ManagerWelcomeMainView.prototype.loadByDate = function(a, b) {
    function c(b, c) {
        d.displaySessions(c, c.length + " sessions scheduled on " + a), d.panel.setLoading(!1);
    }
    var d = this;
    this.panel.setLoading(!0), EXI.getDataAdapter({
        onSuccess: c
    }).proposal.session.getSessionsByDate(a, b);
}, ManagerWelcomeMainView.prototype.displaySessions = function(a, b) {
    var c = this;
    this.container.removeAll();
    var d = new SessionGrid({
        width: 900,
        height: 600,
        margin: "10 10 10 10"
    });
    this.container.insert(d.getPanel()), d.onSelected.attach(function(a, b) {
        c.activeProposal(b.proposalVO);
    }), d.load(a), d.panel.setTitle(b);
}, ManagerWelcomeMainView.prototype.getToolbar = function() {
    var a = this, b = Ext.create("Ext.menu.DatePicker", {
        handler: function(b, c) {
            a.loadByDate(Ext.Date.format(c, "Ymd"), Ext.Date.format(c, "Ymd"));
        }
    });
    return Ext.create("Ext.toolbar.Toolbar", {
        width: 500,
        cls: "exi-top-bar",
        items: [ {
            text: "Choose a Date",
            icon: "../images/icon/sessions.png",
            menu: b
        }, {
            xtype: "textfield",
            name: "field1",
            width: 300,
            emptyText: "enter search term (proposal or title)",
            listeners: {
                specialkey: function(b, c) {
                    if (c.getKey() == c.ENTER) {
                        var d = a.searchProposalByTerm(b.getValue());
                        a.displayProposals(d);
                    }
                }
            }
        } ]
    });
}, ManagerWelcomeMainView.prototype.searchProposalByTerm = function(a) {
    var b = [];
    if (null != this.proposals) for (var c = 0; c < this.proposals.length; c++) {
        var d = this.proposals[c].Proposal_proposalCode + this.proposals[c].Proposal_proposalNumber, e = this.proposals[c].Proposal_title;
        null == e && (e = ""), (d.toUpperCase().match(a.toUpperCase()) || e.toUpperCase().match(a.toUpperCase())) && b.push(this.proposals[c]);
    }
    return b;
}, ManagerWelcomeMainView.prototype.loadProposals = function() {
    var a = this, b = function(b, c) {
        a.proposals = c;
    };
    EXI.getDataAdapter({
        onSuccess: b
    }).proposal.proposal.getProposals();
}, ManagerWelcomeMainView.prototype.load = function(a) {
    this.username = a;
    var b = moment().format("YYYYMMDD");
    this.loadByDate(b, b), this.loadProposals();
}, ShippingMainView.prototype.getPanel = MainView.prototype.getPanel, ShippingMainView.prototype.getContainer = MainView.prototype.getContainer, 
ShippingMainView.prototype.getContainer = function() {
    return this.tabPanel = Ext.createWidget("tabpanel", {
        margin: 10,
        defaults: {
            anchor: "100%"
        },
        items: [ {
            tabConfig: {
                title: "Delivery Details"
            },
            items: [ this.shipmentForm.getPanel() ]
        }, {
            tabConfig: {
                id: this.id + "grid",
                title: "Parcels",
                icon: "../images/icon/shipping.png"
            },
            items: [ this.parcelGrid.getPanel() ]
        } ]
    }), this.tabPanel;
}, ShippingMainView.prototype.load = function(a) {
    this.shippingId = a, null == a && Ext.getCmp(this.id + "grid").disable(!0), this.panel.setTitle("Shipment");
    var b = this;
    if (null != a) {
        this.panel.setLoading();
        var c = function(a, c) {
            b.shipmentForm.load(c), b.parcelGrid.load(c), b.panel.setLoading(!1);
        };
        EXI.getDataAdapter({
            onSuccess: c
        }).proposal.shipping.getShipment(a);
    }
}, BufferWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, BufferWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
BufferWelcomeMainView.prototype.getOptions = function() {
    var a = "<ul><li>Define beforehand an experiment</li>";
    return a += "<li>Send your samples by courier</li>", a + "</ul>";
}, BufferWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "20",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 10,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Buffers on ISPyB</h2></div>',
                    margin: "0 0 0 20"
                }, {
                    html: '<div class="landing-text">A buffer is the matched solution which in a sample is suspended</div><br/>',
                    margin: "0 0 0 40"
                }, {
                    html: '<div class="landing-text">You should define a macromolecule on ISPyB if you want:</div>',
                    margin: "0 0 0 40"
                }, {
                    html: this.getOptions(),
                    margin: "0 0 0 40"
                }, {
                    html: '<br/><div class="landing-text">If your macromolecule is not in the list showed on the left you can create a new one</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Add a new buffer</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/buffer/add";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, BufferWelcomeMainView.prototype.load = function() {}, ExperimentWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, 
ExperimentWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
ExperimentWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "10",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 20,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Designing your experiment on ISPyB</h2></div>'
                }, {
                    html: '<div class="landing-text">A experiment is a set of measurements of samples.</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Create a new Experiment</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/prepare/designer";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, ExperimentWelcomeMainView.prototype.load = function() {}, MacromoleculeWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, 
MacromoleculeWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
MacromoleculeWelcomeMainView.prototype.getOptions = function() {
    var a = "<ul><li>Define beforehand an experiment</li>";
    return a += "<li>Send your samples by courier</li>", a += "<li>Online data analysis to run apriori data analysis (PDB information will be required on the advanced tab in the macromolecule view)</li>", 
    a + "</ul>";
}, MacromoleculeWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "10",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 20,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Macromolecules on ISPyB</h2></div>'
                }, {
                    html: '<div class="landing-text">A macromolecule is a biological contruct for investigation.</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    html: '<div class="landing-text">You should define a macromolecule on ISPyB if you want:</div>',
                    margin: "0 0 0 20"
                }, {
                    html: this.getOptions(),
                    margin: "0 0 0 40"
                }, {
                    html: '<br/><div class="landing-text">If your macromolecule is not in the list showed on the left you can create a new one</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Add a new macromolecule</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/macromolecule/add";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, MacromoleculeWelcomeMainView.prototype.load = function() {}, ShipmentPreparationMainView.prototype.getPanel = MainView.prototype.getPanel, 
ShipmentPreparationMainView.prototype.getContainer = MainView.prototype.getContainer, 
ShipmentPreparationMainView.prototype.getContainer = function() {
    var a = "The aim of a BioSAXS experiment is to determine the low resolution shape of a macromolecule in solution \nunder physiological conditions. In order to define an experiment or create a shipment ISPyB needs to know the macromolecules and buffers that compose your samples";
    return {
        cls: "border-grid",
        margin: 10,
        items: [ {
            html: '<div class="welcome-title"><h2>How to define my samples on ISPyB?</h2> </div>'
        }, {
            html: '<div class="help-text"> ' + a + "</div>"
        }, {
            html: '<div class="welcome-title"><h4>What is a macromolecule and how can I define it on ISPyB?</h4> </div>'
        }, {
            html: '<div class="help-text">A macromolecule is a biological construct in solution for investigation</div>'
        } ]
    };
}, ShipmentPreparationMainView.prototype.load = function(a) {}, ShippingWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, 
ShippingWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
ShippingWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "10",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 20,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Shipments</h2></div>'
                }, {
                    html: '<div class="landing-text"> A Shipment consists of a set of Dewars which is sent from your home lab to the synchrotron via a courier company. Each dry shipping Dewar within the shipment is identified by a label (barcode or sticker). The dewars(s) contains a set of Containers (Pucks or canes). Containers (typically Pucks), contain Samples. A Sample (Sample Holder) contains the Crystal</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    html: '<br/><div class="landing-text">Do you want to ship your samples to the beamline?</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Create a new Shipment</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/shipping/main";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, ShippingWelcomeMainView.prototype.load = function() {}, StockSolutionWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, 
StockSolutionWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
StockSolutionWelcomeMainView.prototype.getOptions = function() {
    var a = "<ul><li>Define beforehand an experiment</li>";
    return a += "<li>Send your samples by courier</li>", a + "</ul>";
}, StockSolutionWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "20",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 10,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Stock Solutions on ISPyB</h2></div>',
                    margin: "0 0 0 20"
                }, {
                    html: '<div class="landing-text">A buffer is the matched solution which in a sample is suspended</div><br/>',
                    margin: "0 0 0 40"
                }, {
                    html: '<div class="landing-text">You should define a macromolecule on ISPyB if you want:</div>',
                    margin: "0 0 0 40"
                }, {
                    html: this.getOptions(),
                    margin: "0 0 0 40"
                }, {
                    html: '<br/><div class="landing-text">If your macromolecule is not in the list showed on the left you can create a new one</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Add a new Stock Solution</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/stocksolution/add";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, StockSolutionWelcomeMainView.prototype.load = function() {}, HPLCMainView.prototype.getPanel = MainView.prototype.getPanel, 
HPLCMainView.prototype._selectFrame = function(a) {
    try {} catch (b) {
        console.log(b);
    }
}, HPLCMainView.prototype.getHeader = function(a, b) {
    return "<span class='item'>" + a + "</span><span class='item_description'>" + b + "</span>";
}, HPLCMainView.prototype.getPlotContainer = function() {
    return {
        xtype: "container",
        cls: "defaultGridPanel",
        border: 0,
        defaults: {
            height: 450
        },
        items: [ this.hplcGraph.getPanel(), this.plotter.getPanel() ]
    };
}, HPLCMainView.prototype.getContainer = function() {
    return {
        xtype: "container",
        items: [ this.grid.getPanel(), this.getPlotContainer() ]
    };
}, HPLCMainView.prototype.getSelected = function() {
    for (var a = [], b = 0; b < this.queueGridList.length; b++) a = this.queueGridList[b].getSelected().concat(a);
    return a;
}, HPLCMainView.prototype.loadHPLCGraph = function(a) {
    var b = this, c = function(a, c) {
        c = JSON.parse(c);
        for (var d = [], e = 0; e < c.I0.length; e++) d.push(0);
        c = [ {
            param: "I0",
            data: c.I0,
            std: c.I0_Stdev,
            color: "#0066CC",
            label: "I0"
        }, {
            param: "sum_I",
            label: "sum_I",
            color: "#00FF00",
            data: c.sum_I,
            std: d
        }, {
            param: "Rg",
            label: "Rg",
            color: "#21610B",
            data: c.Rg,
            std: c.Rg_Stdev
        }, {
            param: "Mass",
            data: c.mass,
            std: c.mass_Stdev,
            color: "#FF9900",
            label: "Mass"
        }, {
            param: "Vc",
            data: c.Vc,
            std: c.Vc_Stdev,
            color: "#990099",
            label: "Vc"
        }, {
            param: "Qr",
            data: c.Qr,
            std: c.Qr_Stdev,
            color: "#FF0066",
            label: "Qr"
        }, {
            param: "quality",
            label: "quality",
            color: "#FF00FF",
            data: c.quality,
            std: d
        } ], b.hplcGraph.loadData(c);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.hplc.getHPLCOverviewByExperimentId(a);
}, HPLCMainView.prototype.load = function(a) {
    var b = this;
    this.experimentId = a, this.grid.panel.setLoading();
    var c = function(a, c) {
        b.grid.load(c), b.grid.panel.setLoading(!1);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.dataCollection.getDataCollectionsByExperimentId(a), this.loadHPLCGraph(a);
}, AddressWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, AddressWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
AddressWelcomeMainView.prototype.getOptions = function() {
    var a = "<ul><li>Define beforehand an experiment</li>";
    return a += "<li>Send your samples by courier</li>", a + "</ul>";
}, AddressWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "20",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 10,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Manage Shipping Addresses on ISPyB</h2></div>',
                    margin: "0 0 0 20"
                }, {
                    html: '<div class="landing-text">A buffer is the matched solution which in a sample is suspended</div><br/>',
                    margin: "0 0 0 40"
                }, {
                    html: '<div class="landing-text">You should define a macromolecule on ISPyB if you want:</div>',
                    margin: "0 0 0 40"
                }, {
                    html: this.getOptions(),
                    margin: "0 0 0 40"
                }, {
                    html: '<br/><div class="landing-text">If your macromolecule is not in the list showed on the left you can create a new one</div><br/>',
                    margin: "0 0 0 20"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Add a new Address</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/buffer/add";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, AddressWelcomeMainView.prototype.load = function() {}, PuckWelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, 
PuckWelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, PuckWelcomeMainView.prototype.getOptions = function() {
    var a = "<ul><li>Define beforehand an experiment</li>";
    return a += "<li>Send your samples by courier</li>", a + "</ul>";
}, PuckWelcomeMainView.prototype.getContainer = function() {
    return Ext.createWidget("panel", {
        plain: !0,
        margin: "20",
        layout: "fit",
        items: [ {
            tabConfig: {
                title: "Welcome"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                padding: 10,
                margin: 0,
                cls: "border-grid",
                items: [ {
                    html: '<div class="landing-title" ><h2>Pucks on ISPyB</h2></div>',
                    margin: "0 0 0 20"
                }, {
                    html: '<div class="landing-text">A puck is...</div><br/>',
                    margin: "0 0 0 40"
                }, {
                    xtype: "container",
                    layout: "hbox",
                    cls: "option-bar-menu",
                    items: [ {
                        xtype: "button",
                        cls: "square-option",
                        maxWidth: 200,
                        minWidth: 200,
                        margin: "0 0 0 150",
                        height: 100,
                        text: '<div class="square-option-text"; >Add a new Puck</div>',
                        icon: "../images/icon/add.png",
                        iconAlign: "top",
                        handler: function() {
                            location.hash = "/mx/puck/add";
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, PuckWelcomeMainView.prototype.load = function() {}, BufferMainView.prototype.getPanel = MainView.prototype.getPanel, 
BufferMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "hbox"
        },
        margin: 15,
        border: 1,
        defaults: {
            labelWidth: 80,
            flex: 1
        },
        items: [ this.bufferForm.getPanel([]) ]
    });
}, BufferMainView.prototype.load = function(a) {
    this.panel.setTitle("Buffer"), this.bufferForm.load(EXI.proposalManager.getBufferById(a));
}, DesignerMainView.prototype.getPanel = MainView.prototype.getPanel, DesignerMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "hbox"
        },
        margin: 15,
        border: 1,
        defaults: {
            labelWidth: 80,
            flex: 1
        },
        items: [ this.wizardWidget.getPanel(new MeasurementCreatorStepWizardForm(EXI.proposalManager.getMacromolecules(), EXI.proposalManager.getBuffers())) ]
    });
}, DesignerMainView.prototype.load = function(a) {
    this.panel.setTitle("Experiment Designer");
}, ExperimentDesignerMainView.prototype.getPanel = MainView.prototype.getPanel, 
ExperimentDesignerMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "hbox"
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        border: 1,
        style: {
            borderColor: "#000000",
            borderStyle: "solid",
            borderWidth: "1px"
        },
        defaults: {
            labelWidth: 80,
            xtype: "datefield",
            flex: 1
        },
        items: [ this.templateGrid.getPanel([]) ]
    });
}, ExperimentDesignerMainView.prototype.load = function() {
    var a = this;
    this.panel.setLoading();
    var b = new ProposalUpdater();
    this.templateGrid.grid.setLoading(), b.onSuccess.attach(function(b, c) {
        a.panel.setLoading(!1);
        var d = new DataAdapter();
        d.onSuccess.attach(function(b, c) {
            a.templateGrid.store.loadData(c), a.templateGrid.grid.setLoading(!1);
        }), d.getByExperimentByKey("experimentType", "TEMPLATE");
    }), b.get(), this.panel.setTitle("Experiment Designer");
}, MacromoleculeMainView.prototype.getPanel = MainView.prototype.getPanel, MacromoleculeMainView.prototype.getHeader = function(a, b) {
    return "<span class='item'>" + a + "</span><span class='item_description'>" + b + "</span>";
}, MacromoleculeMainView.prototype.getSelected = function() {
    for (var a = [], b = 0; b < this.queueGridList.length; b++) a = this.queueGridList[b].getSelected().concat(a);
    return a;
}, MacromoleculeMainView.prototype.getTabs = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        items: [ {
            tabConfig: {
                title: "General"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 600,
                padding: 0,
                items: [ this.macromoleculeForm.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Advanced"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 500,
                padding: 0,
                items: [ this.rigidBodyModelingForm.getPanel() ]
            } ]
        } ]
    });
}, MacromoleculeMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.getTabs() ]
    });
}, MacromoleculeMainView.prototype.load = function(a) {
    this.panel.setLoading();
    var b = EXI.proposalManager.getMacromoleculeById(a);
    this.panel.setTitle(b.acronym), this.macromoleculeForm.load(b), this.rigidBodyModelingForm.load(b), 
    this.panel.setLoading(!1);
}, StockSolutionMainView.prototype.getPanel = MainView.prototype.getPanel, StockSolutionMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.stockSolutionForm.getPanel([]) ]
    });
}, StockSolutionMainView.prototype.load = function(a) {
    this.stockSolutionId = a, this.stockSolutionForm.load(EXI.proposalManager.getStockSolutionById(a)), 
    this.panel.setTitle("Stock Solutions");
}, TemplateMainView.prototype.getPanel = MainView.prototype.getPanel, TemplateMainView.prototype.getHeader = function(a, b) {
    return "<span class='item'>" + a + "</span><span class='item_description'>" + b + "</span>";
}, TemplateMainView.prototype.getSelected = function() {
    for (var a = [], b = 0; b < this.queueGridList.length; b++) a = this.queueGridList[b].getSelected().concat(a);
    return a;
}, TemplateMainView.prototype.getTabs = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "20 0 0 0",
        items: [ {
            tabConfig: {
                title: "Measurements"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.measurementGrid.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Sample Plate Setup"
            },
            items: [ {
                xtype: "container",
                layout: "vbox",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.specimenWidget.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Sample Requirements"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.volumePlanificator.getPanel() ]
            } ]
        } ]
    });
}, TemplateMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.experimentHeaderForm.getPanel(), this.getTabs() ]
    });
}, TemplateMainView.prototype.load = function(a) {
    var b = this;
    b.panel.setLoading();
    var c = function(a, c) {
        b.experiment = new Experiment(c[0]), b.experimentHeaderForm.load(b.experiment), 
        b.measurementGrid.loadExperiment(b.experiment), b.specimenWidget.refresh(b.experiment), 
        b.volumePlanificator.load(b.experiment), b.panel.setLoading(!1);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.experiment.getExperimentById(a[0].experimentId), this.panel.setTitle("Template");
}, DataCollectionMainView.prototype.getPanel = MainView.prototype.getPanel, DataCollectionMainView.prototype.getContainer = MainView.prototype.getContainer, 
DataCollectionMainView.prototype.filter = function(a, b) {
    this.grid.key = {}, this.grid.store.filter([ {
        property: "bufferAcronym",
        value: b,
        anyMacth: !0
    } ]);
}, DataCollectionMainView.prototype.load = function(a) {
    var b = this;
    this.grid.onSelectionChange.attach(function(a, c) {
        b.onSelectionChange.notify(c);
    }), this.grid.onSelect.attach(function(a, c) {
        b.onSelect.notify(c);
    }), this.grid.onDeselect.attach(function(a, c) {
        b.onDeselect.notify(c);
    }), this.container.insert(0, this.grid.getPanel()), this.grid.panel.setLoading(), 
    this.grid.store.loadData(a), this.grid.panel.setLoading(!1);
}, ExperimentMainView.prototype.getPanel = MainView.prototype.getPanel, ExperimentMainView.prototype.getSelected = function() {
    for (var a = [], b = 0; b < this.queueGridList.length; b++) a = this.queueGridList[b].getSelected().concat(a);
    return a;
}, ExperimentMainView.prototype.getTabs = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "20 0 0 0",
        activeTab: 2,
        items: [ {
            tabConfig: {
                title: "Sample Plate Setup"
            },
            items: [ {
                xtype: "container",
                layout: "vbox",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.specimenWidget.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Measurements"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.measurementGrid.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Online Data Analysis"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.queueGrid.getPanel() ]
            } ]
        } ]
    });
}, ExperimentMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 30,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.experimentHeaderForm.getPanel(), this.getTabs() ]
    });
}, ExperimentMainView.prototype.load = function(a) {
    var b = this;
    b.panel.setLoading(), b.queueGrid.panel.setLoading();
    var c = function(c, d) {
        b.experiment = new Experiment(d[0]), b.experimentHeaderForm.load(b.experiment), 
        b.measurementGrid.loadExperiment(b.experiment), b.specimenWidget.refresh(b.experiment), 
        b.panel.setTitle(d[0].name), b.panel.setLoading(!1);
        var e = function(a, c) {
            b.queueGrid.load(c), b.queueGrid.panel.setLoading(!1);
        };
        EXI.getDataAdapter({
            onSuccess: e
        }).saxs.dataCollection.getDataCollectionsByExperimentId(a);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.experiment.getExperimentById(a);
}, MergeMainView.prototype.getPanel = MainView.prototype.getPanel, MergeMainView.prototype.getContainer = MainView.prototype.getContainer, 
MergeMainView.prototype.populateForm = function(a, b) {
    for (var c = 0; c < this.frames.length; c++) this.editorPanel.add(this.getCurveContainer(this.frames[c].subtractionId, this.frames[c].fileName, 0, 5, this.frames[c].scale, a, b));
}, MergeMainView.prototype.getSelected = function() {
    for (var a = [], b = 0; b < this.queueGridList.length; b++) a = this.queueGridList[b].getSelected().concat(a);
    return a;
}, MergeMainView.prototype.getCurveContainer = function(a, b, c, d, e, f, g) {
    var h = this;
    return Ext.create("Ext.Panel", {
        width: 380,
        layout: "vbox",
        border: 1,
        style: {
            borderStyle: "solid",
            borderWidth: "1px"
        },
        margin: "10 0 0 5",
        items: [ {
            xtype: "container",
            margin: "0 0 0 0",
            layout: "hbox",
            items: [ {
                xtype: "container",
                layout: "vbox",
                items: [ {
                    html: '<span style="font-size:12px;color:' + g[b] + ';">' + b + "</span>",
                    margin: "10 0 0 10"
                }, {
                    xtype: "sliderfield",
                    margin: "10 0 0 2",
                    hideLabel: !0,
                    width: 275,
                    minValue: 0,
                    subtractionId: a,
                    id: "slider" + a,
                    maxValue: f,
                    increment: 1,
                    values: [ 0, f ],
                    listeners: {
                        changecomplete: function(a, b, c, d) {
                            for (var e = a.getValues(), f = 0; f < h.frames.length; f++) h.frames[f].subtractionId == a.subtractionId && (h.frames[f].from = h.plotter.dygraph.getValue(e[0] - 1, 0), 
                            h.frames[f].to = h.plotter.dygraph.getValue(e[1] - 1, 0));
                            h.updateCurve();
                        }
                    }
                } ]
            }, {
                xtype: "container",
                layout: "vbox",
                items: [ {
                    xtype: "container",
                    layout: "hbox",
                    items: [ {
                        xtype: "button",
                        text: "<",
                        width: 30,
                        margin: "2 0 0 10",
                        subtractionId: a,
                        handler: function(a) {
                            var b = "slider" + a.subtractionId;
                            Ext.getCmp(b).setValue(0, Ext.getCmp(b).getValues()[0] - 1);
                            for (var c = Ext.getCmp(b).getValues(), d = 0; d < h.frames.length; d++) h.frames[d].subtractionId == a.subtractionId && (h.frames[d].from = h.plotter.dygraph.getValue(c[0] - 1, 0));
                            h.updateCurve();
                        }
                    }, {
                        xtype: "button",
                        text: ">",
                        width: 30,
                        margin: "2 0 0 5",
                        subtractionId: a,
                        handler: function(a) {
                            var b = "slider" + a.subtractionId;
                            Ext.getCmp(b).setValue(1, Ext.getCmp(b).getValues()[1] + 1);
                            for (var c = Ext.getCmp(b).getValues(), d = 0; d < h.frames.length; d++) h.frames[d].subtractionId == a.subtractionId && (h.frames[d].to = h.plotter.dygraph.getValue(c[1] - 1, 0));
                            h.updateCurve();
                        }
                    } ]
                }, {
                    xtype: "container",
                    layout: "hbox",
                    margin: "2 0 2 0",
                    items: [ {
                        xtype: "button",
                        text: "+",
                        margin: "0 0 0 10",
                        width: 30,
                        subtractionId: a,
                        handler: function(a) {
                            for (var b = 0; b < h.frames.length; b++) console.log(a.subtractionId), h.frames[b].subtractionId == a.subtractionId && (h.frames[b].scale = h.frames[b].scale + .1);
                            h.updateCurve();
                        }
                    }, {
                        xtype: "button",
                        text: "-",
                        width: 30,
                        margin: "0 0 0 5",
                        subtractionId: a,
                        handler: function(a) {
                            for (var b = 0; b < h.frames.length; b++) h.frames[b].subtractionId == a.subtractionId && (h.frames[b].scale = h.frames[b].scale - .1);
                            h.updateCurve();
                        }
                    } ]
                } ]
            } ]
        } ]
    });
}, MergeMainView.prototype.getSubtractionEditor = function() {
    var a = this;
    return this.editorPanel = Ext.create("Ext.Panel", {
        border: 1,
        height: 600,
        width: 400,
        layout: "vbox",
        scrollable: !0,
        style: {
            borderColor: "#000000",
            borderStyle: "solid",
            borderWidth: "1px"
        },
        items: [],
        bbar: [ {
            text: "Download",
            xtype: "button",
            handler: function(b) {
                var c = a.getParams();
                window.open(new DataAdapter().getMergeURL(c.subtractionIds.toString(), c.from.toString(), c.to.toString(), c.scale.toString()));
            }
        } ]
    }), this.editorPanel;
}, MergeMainView.prototype.getParams = function() {
    for (var a = [], b = [], c = [], d = [], e = 0; e < this.frames.length; e++) {
        var f = this.frames[e];
        null != f.from ? a.push(f.from) : a.push(""), null != f.to ? b.push(f.to) : b.push(""), 
        null != f.scale ? c.push(f.scale) : c.push(""), null != f.subtractionId ? d.push(f.subtractionId) : d.push("");
    }
    return {
        from: a,
        to: b,
        scale: c,
        subtractionIds: d
    };
}, MergeMainView.prototype.updateCurve = function() {
    this.xAxisRange = this.plotter.dygraph.xAxisRange(), this.yAxisRange = this.plotter.dygraph.yAxisRange();
    var a = this.getParams();
    this.plotter.loadMerge(a.subtractionIds.toString(), a.from.toString(), a.to.toString(), a.scale.toString()), 
    this.plotter.dygraph.updateOptions({
        dateWindow: this.xAxisRange,
        valueRange: this.yAxisRange
    });
}, MergeMainView.prototype.getSlavePanel = function() {
    return {
        xtype: "container",
        layout: "hbox",
        cls: "defaultGridPanel",
        border: 0,
        defaults: {
            xtype: "container",
            height: 600
        },
        items: [ this.getSubtractionEditor(), this.plotter.getPanel() ]
    };
}, MergeMainView.prototype.load = function(a) {
    var b = new QueueGrid({
        maxHeight: 300
    });
    this.panel.setTitle("Merge Tool"), this.container.insert(0, b.getPanel()), this.container.insert(1, this.getSlavePanel()), 
    b.load(a), b.panel.setLoading(!1);
    var c = [], d = [], e = [];
    this.frames = [];
    for (var f = 0; f < a.length; f++) c.push(a[f].dataCollectionId), null == e[a[f].subtractionId] && (d.push(a[f].subtractionId), 
    this.frames.push({
        fileName: a[f].substractedFilePath.substr(a[f].substractedFilePath.lastIndexOf("/") + 1),
        subtractionId: a[f].subtractionId,
        scale: 1
    }), e[a[f].subtractionId] = !0);
    this.plotter.load({
        subtracted: d
    });
}, PrimaryDataMainView.prototype.getPanel = MainView.prototype.getPanel, PrimaryDataMainView.prototype.getSlavePanel = function() {
    return {
        xtype: "container",
        layout: "hbox",
        cls: "defaultGridPanel",
        margin: 5,
        border: 0,
        defaults: {
            height: 600
        },
        items: [ {
            xtype: "panel",
            layout: {
                type: "accordion",
                titleCollapse: !1,
                animate: !0,
                activeOnTop: !0
            },
            flex: .3,
            border: 1,
            style: {
                borderColor: "#000000",
                borderStyle: "solid",
                borderWidth: "1px"
            },
            items: [ this.frameSelectorGrid.getPanel() ]
        }, this.plotter.getPanel() ]
    };
}, PrimaryDataMainView.prototype.getContainer = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        height: 900,
        margin: "10 0 0 0",
        items: [ {
            tabConfig: {
                title: "Primary Data Reduction"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 850,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ {
                    xtype: "container",
                    items: [ this.grid.getPanel(), this.getSlavePanel() ]
                } ]
            } ]
        }, {
            tabConfig: {
                title: "Abinitio Modeling"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 850,
                padding: 20,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ {
                    xtype: "container",
                    items: [ this.abinitioForm.getPanel() ]
                } ]
            } ]
        } ]
    });
}, PrimaryDataMainView.prototype.load = function(a) {
    var b = this;
    this.panel.setTitle(" Data Collection"), this.grid.panel.setLoading();
    for (var c = function(a, c) {
        if (b.grid.load(c), b.grid.panel.setLoading(!1), b.frameSelectorGrid.load(c), c[0].subtractionId) {
            var d = function(a, c) {
                b.abinitioForm.load(c);
            };
            EXI.getDataAdapter({
                onSuccess: d
            }).saxs.subtraction.getSubtractionsBySubtractionIdList([ c[0].subtractionId ]);
        }
    }, d = [], e = 0; e < a.length; e++) d.push(a[e].dataCollectionId);
    EXI.getDataAdapter({
        onSuccess: c
    }).saxs.dataCollection.getDataCollectionsByDataCollectionId(d);
}, AutoProcIntegrationMainView.prototype.getPanel = MainView.prototype.getPanel, 
AutoProcIntegrationMainView.prototype.getByAutoProcProgramAttachmentId = function(a) {
    for (var b = 0; b < this.data.length; b++) for (var c = 0; c < this.data[b].autoprocprogram.attachmentVOs.length; c++) {
        var d = this.data[b].autoprocprogram.attachmentVOs[c];
        if (d.autoProcProgramAttachmentId == a) return this.data[b];
    }
}, AutoProcIntegrationMainView.prototype.getByAutoProcId = function(a) {
    for (var b = 0; b < this.data.length; b++) if (this.data[b].autoproc.autoProcId == a) return this.data[b];
}, AutoProcIntegrationMainView.prototype.onPlotClicked = function(a) {
    var b = this.getByAutoProcProgramAttachmentId(a);
    null != b && this.autoProcIntegrationGrid.selectRowByAutoProcIntegrationId(b.autointegration.autoProcIntegrationId);
}, AutoProcIntegrationMainView.prototype.getPlotContainer = function(a) {
    return {
        xtype: "container",
        margin: 10,
        layout: {
            type: "fit"
        },
        flex: .5,
        items: [ a ]
    };
}, AutoProcIntegrationMainView.prototype.getAutoProcPanel = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "fit"
        },
        margin: 5,
        items: [ Ext.create("Ext.container.Container", {
            layout: "hbox",
            margin: "10 0 0 20",
            items: [ this.autoProcIntegrationGrid.getPanel(), this.autoProcIntegrationAttachmentGrid.getPanel() ]
        }), Ext.create("Ext.container.Container", {
            layout: "hbox",
            margin: "0 50 0 0",
            items: [ this.getPlotContainer(this.rFactorPlotter.getPanel()), this.getPlotContainer(this.isigmaPlotter.getPanel()), this.getPlotContainer(this.completenessPlotter.getPanel()) ]
        }), Ext.create("Ext.container.Container", {
            layout: "hbox",
            margin: "0 50 0 0",
            items: [ this.getPlotContainer(this.cc2Plotter.getPanel()), this.getPlotContainer(this.sigmaAnnoPlotter.getPanel()), this.getPlotContainer(this.annoCorrPlotter.getPanel()) ]
        }) ]
    });
}, AutoProcIntegrationMainView.prototype.getContainer = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "10 30 10 10",
        items: [ {
            tabConfig: {
                title: "Auto Processing"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.getAutoProcPanel() ]
            } ]
        } ]
    });
}, AutoProcIntegrationMainView.prototype.groupBy = function(a, b) {
    var c = {};
    return a.forEach(function(a) {
        var d = JSON.stringify(b(a));
        c[d] = c[d] || [], c[d].push(a);
    }), Object.keys(c).map(function(a) {
        return c[a];
    });
}, AutoProcIntegrationMainView.prototype.loadPlots = function(a) {
    this.completenessPlotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleCompleteness(a.toString())), 
    this.rFactorPlotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleRfactor(a.toString())), 
    this.isigmaPlotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleISigma(a.toString())), 
    this.cc2Plotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleCC2(a.toString())), 
    this.sigmaAnnoPlotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleSigmaAno(a.toString())), 
    this.annoCorrPlotter.loadUrl(EXI.getDataAdapter().mx.autoProcIntegrationDataAdapter.getXScaleAnnoCorrection(a.toString()));
}, AutoProcIntegrationMainView.prototype.loadGeneral = function(a) {
    for (var b in a) Ext.getCmp(this.id + "general").insert({
        xtype: "container",
        layout: "hbox",
        items: [ {
            xtype: "label",
            forId: "myFieldId",
            text: b + ":",
            margin: "0 0 0 10"
        }, {
            xtype: "label",
            forId: "myFieldId",
            text: a[b],
            margin: "0 0 0 10"
        } ]
    });
}, AutoProcIntegrationMainView.prototype.load = function(a) {
    var b = this;
    this.panel.setTitle("Data Collection"), this.panel.setLoading("Generating plots");
    var c = function(a, c) {
        b.data = c;
        for (var d = [], e = [], f = [], g = 0; g < c.length; g++) d.push(c[g].autointegration.autoProcIntegrationId), 
        e.push(c[g].autoproc), f.push(c[g].autoproc.autoProcId);
        b.autoProcIntegrationGrid.load(c), b.panel.setLoading(!1), b.loadPlots(d);
    };
    EXI.getDataAdapter({
        onSuccess: c
    }).mx.autoProcIntegrationDataAdapter.getByDataCollectionId(a);
}, CrystalMainView.prototype.getPanel = MainView.prototype.getPanel, CrystalMainView.prototype.getContainer = function() {
    return this.panel = Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "10 30 10 10",
        items: [ {
            tabConfig: {
                title: "Summary"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.crystalForm.getPanel() ]
            } ]
        } ]
    }), this.panel;
}, CrystalMainView.prototype.load = function(a) {
    this.panel.setTitle(a.proteinVO.acronym), this.crystalForm.load(a);
}, DataCollectionMxMainView.prototype.getPanel = MainView.prototype.getPanel, DataCollectionMxMainView.prototype.getContainer = function() {
    return this.panel = Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "10 30 10 10",
        cls: "border-grid",
        items: [ this.dataCollectionSummaryGrid.getPanel() ]
    }), this.panel;
}, DataCollectionMxMainView.prototype.load = function(a) {
    var b = this;
    this.panel.setTitle("Data Collection "), a.length > 0 ? b.dataCollectionSummaryGrid.load(a) : BUI.showError("No data collections");
}, ImageMainView.prototype.getPanel = MainView.prototype.getPanel, ImageMainView.prototype.getContainer = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "10 30 10 10",
        items: [ {
            tabConfig: {
                title: "2D"
            },
            items: [ {
                xtype: "container",
                layout: "hbox",
                paddding: 5,
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.imageViewer.getPanel(), {
                    html: "<div id='" + this.id + "detector' ></div>",
                    margin: "0 0 0 5",
                    height: 800
                } ]
            } ]
        }, {
            tabConfig: {
                title: "3D"
            },
            items: [ {
                xtype: "container",
                layout: "hbox",
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.surfaceScatteringViewer.getPanel() ]
            } ]
        }, {
            tabConfig: {
                title: "Parameters"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                style: {
                    borderColor: "gray",
                    borderStyle: "solid",
                    borderWidth: "1px",
                    "background-color": "white"
                },
                items: [ this.getParametersGrid() ]
            } ]
        } ]
    });
}, ImageMainView.prototype.getParametersGrid = function(a, b) {
    return this.storeParameters = Ext.create("Ext.data.Store", {
        fields: [ "key", "value" ],
        sorters: "key"
    }), this.parametersPanel = Ext.create("Ext.grid.Panel", {
        title: "Parameters",
        store: this.storeParameters,
        columns: [ {
            text: "Key",
            dataIndex: "key",
            flex: .2
        }, {
            text: "Value",
            dataIndex: "value",
            flex: 1
        } ],
        height: 800,
        viewConfig: {
            enableTextSelection: !0
        }
    }), this.parametersPanel;
}, ImageMainView.prototype.loadDetectorPanel = function(a, b) {
    var c = this.makeHTMLTable("Detector", [ [ "Model", b.Detector_detectorModel ], [ "Manufacturer", b.Detector_detectorManufacturer ], [ "Mode", b.Detector_detectorMode ], [ "Pixel Size", a.pixelSize.x + " x " + a.pixelSize.y ], [ "sensitive Area", a.sensitiveArea.x + " x " + a.sensitiveArea.y ] ], null, a.img), d = this.makeHTMLTable("Data Collection", [ [ "Collected on", b.DataCollectionGroup_endTime ], [ "Experiment Type", b.DataCollectionGroup_experimentType ], [ "Centering", b.DataCollection_centeringMethod ], [ "Exposure Timee", b.DataCollection_exposureTime ], [ "Directory", b.DataCollection_imageDirectory ], [ "BeamLine", b.BLSession_beamLineName ], [ "Detector Distance", b.DataCollection_detectorDistance ], [ "Flux", b.DataCollection_flux ], [ "Resolution", b.DataCollection_resolution ], [ "Transmission", b.DataCollection_transmission ], [ "WaveLength", b.DataCollection_wavelength ] ]);
    return "<span style='color:orange;font-weight:bold;'>WARNING: If image is not displayed please, refresh the page (F5)</span><br />" + d + c;
}, ImageMainView.prototype.makeHTMLTable = function(a, b, c, d) {
    var e = 800;
    null != c && null != c["with"] && (e = c["with"]);
    var f = "<table>";
    if (null != b) for (var g = 0; g < b.length; g++) {
        f += "<tr>";
        for (var h = 0; h < b[g].length; h++) {
            var i = "key_subgrid";
            1 == h && (i = "value_subgrid"), f = f + "<td class='" + i + "'>" + b[g][h] + "</td>", 
            null != d && 0 == g && h == b[g].length - 1 && (f = f + '<td rowspan="' + b.length + '"><img src=' + d + "/></td>");
        }
        f += "</tr>";
    }
    return f += "</table>", null != a && (f = '<div  class="header-component-table" >' + a + '</div><div  style="margin:0px 0px 0px 0px !important;width:' + e + 'px;">' + f + "</div>"), 
    f;
}, ImageMainView.prototype.load = function(a, b) {
    var c = this;
    this.panel.setTitle("Image");
    var d = EXI.getDataAdapter().mx.dataCollection.getImageById(a), e = function(a, b) {
        var e = b[0];
        for (var f in e) c.storeParameters.loadData([ {
            key: f,
            value: e[f]
        } ], !0);
        var g = b[0].DataCollection_wavelength, h = b[0].DataCollection_detectorDistance, i = b[0].DataCollection_xBeam, j = b[0].DataCollection_yBeam;
        null != ExtISPyB.detectors[b[0].Detector_detectorModel] ? c.detectorResolution = ExtISPyB.detectors[b[0].Detector_detectorModel] : alert("Not detector loaded"), 
        c.imageViewer.load(d, g, h, i, j, c.detectorResolution), document.getElementById(c.id + "detector").innerHTML = c.loadDetectorPanel(c.detectorResolution, b[0]), 
        c.surfaceScatteringViewer.load();
    };
    EXI.getDataAdapter({
        onSuccess: e
    }).mx.dataCollection.getByDataCollectionId(b);
}, WorkflowStepMainView.prototype.getPanel = MainView.prototype.getPanel, WorkflowStepMainView.prototype.getTabs = function() {
    return this.summaryTab = Ext.createWidget("tabpanel", {
        cls: "border-grid",
        items: [ {
            html: "test"
        }, {
            html: "test"
        } ]
    }), this.summaryTab;
}, WorkflowStepMainView.prototype.getSummaryTab = function() {
    return this.summaryTab = Ext.create("Ext.panel.Panel", {
        bodyPadding: 5,
        cls: "border-grid",
        title: "Summary",
        layout: {
            type: "hbox"
        },
        autoScroll: !0,
        items: []
    }), this.summaryTab;
}, WorkflowStepMainView.prototype.getContainer = function() {
    return Ext.create("Ext.tab.Panel", {
        items: [ this.getSummaryTab(), {
            title: "Bar",
            tabConfig: {
                title: "Custom Title",
                tooltip: "A button tooltip"
            }
        } ]
    });
}, WorkflowStepMainView.prototype.load = function(a) {
    this.panel.setTitle("Workflow");
    for (var b = 0; b < a.length; b++) {
        var c = Ext.create("Ext.Img", {
            src: EXI.getDataAdapter().mx.workflowStepDataAdapter.getImageByWorkflowStepId(a[b].workflowStepId),
            width: 150,
            height: 150
        }), d = "<div class='summary_datacollection_failed'></div>";
        "Success" == a[b].status && (d = "<div class='summary_datacollection_success'></div>"), 
        this.summaryTab.insert({
            xtype: "container",
            margin: 5,
            items: [ {
                html: "<div style='border-bottom:1px solid gray;width:140px;'>" + d + a[b].workflowStepType + "</div>",
                margin: 10
            }, c ]
        });
    }
}, WelcomeMainView.prototype.getPanel = MainView.prototype.getPanel, WelcomeMainView.prototype.getContainer = MainView.prototype.getContainer, 
WelcomeMainView.prototype.getContainer = function() {
    return {
        layout: {
            type: "fit"
        },
        items: [ {
            html: "<iframe style='width:900px;height:900px;' frameBorder='0' src='../html/welcome.html'></iframe>",
            margin: "50 0 0 50"
        } ]
    };
}, WelcomeMainView.prototype.load = function() {}, SubtractionMainView.prototype.getPanel = MainView.prototype.getPanel, 
SubtractionMainView.prototype.getToolDescription = function(a, b, c) {
    return {
        html: "<span class='toolName'>" + a + "</span><span class='toolDescription'>" + b + "</span><br /><span class='toolReference'> " + c + "</span>",
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        margin: 10
    };
}, SubtractionMainView.prototype.getFirstStepContainer = function() {
    var a = this;
    return {
        xtype: "container",
        height: 250,
        items: [ {
            xtype: "container",
            layout: "hbox",
            margin: 20,
            height: 50,
            items: [ {
                html: "<span class='toolPanelText'>1) Select a Data Collection</span>",
                margin: "5 0 0 20",
                bodyStyle: {
                    "background-color": "#E6E6E6"
                }
            }, {
                xtype: "button",
                text: "Select",
                width: 150,
                margin: "0 0 0 20",
                handler: function() {
                    a.subtractionSelectorWindow.show();
                }
            } ]
        }, this.grid.getPanel() ]
    };
}, SubtractionMainView.prototype.getContainer = function() {
    var a = this;
    return Ext.create("Ext.form.Panel", {
        height: 500,
        margin: 30,
        border: 1,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        bodypadding: 10,
        items: [ {
            xtype: "hiddenfield",
            id: a.id + "hiddenSutractions",
            name: "subtractionId",
            value: ""
        }, {
            xtype: "hiddenfield",
            id: a.id + "hiddenProject",
            name: "projectId",
            value: ""
        }, {
            xtype: "hiddenfield",
            id: a.id + "pdbFileName",
            name: "pdbFileName",
            value: ""
        }, this.getToolDescription("CRYSOL: ", "Evaluation of the solution scattering from macromolecules with known atomic structure and fitting to experimental data", "Written by D. Svergun, C. Barberato, M. Malfois, V. Volkov, P. Konarev1, M. Petoukhov & A. Shkumatov"), this.getFirstStepContainer(), {
            xtype: "fileuploadfield",
            id: a.id + "fileupload",
            width: 600,
            labelWidth: 150,
            margin: 30,
            fieldLabel: '<span class="toolPanelText">2) Upload PDB</span>',
            cls: "toolPanelText",
            name: "file",
            hideLabel: !1
        } ],
        buttons: [ {
            text: "Run",
            handler: function() {
                var b = this.up("form").getForm();
                if (b.isValid()) {
                    Ext.getCmp(a.id + "hiddenProject").setValue(exiSAXS.localExtorage.userManager.getActiveProject().internalId);
                    var c = Ext.getCmp(a.id + "fileupload").value;
                    Ext.getCmp(a.id + "pdbFileName").setValue(c.split("\\")[c.split("\\").length - 1]), 
                    b.submit({
                        url: new ExiDataAdapter().server + "/token/tool/crysol/run",
                        waitMsg: "Sending job to server...",
                        success: function(a, b) {
                            msg("Success", 'Processed file "' + b.result.file + '" on the server');
                        },
                        failure: function(a, b) {
                            msg("Failure", 'Processed file "' + b.result.file + '" on the server');
                        }
                    });
                }
            }
        } ]
    });
}, SubtractionMainView.prototype.load = function() {
    this.panel.setTitle("Subtraction Tool");
}, DimpleRunMainView.prototype.getPanel = RunMainView.prototype.getPanel, DimpleRunMainView.prototype.getOutputPanel = RunMainView.prototype.getOutputPanel, 
DimpleRunMainView.prototype.getTabs = RunMainView.prototype.getTabs, DimpleRunMainView.prototype.getContainer = RunMainView.prototype.getContainer, 
DimpleRunMainView.prototype.load = RunMainView.prototype.load, DimpleRunMainView.prototype.getFilesGrid = function() {
    var a = this;
    this.filesStore = Ext.create("Ext.data.Store", {
        fields: [ "name", "targetId" ]
    });
    var b = Ext.create("Ext.selection.RowModel", {
        allowDeselect: !0,
        listeners: {
            selectionchange: function(b, c) {
                console.log(c[0].data);
                var d = function(b, c) {
                    document.getElementById(a.id + "display").innerHTML = "<textarea rows='100' cols='100'> " + c + "</textarea>";
                };
                -1 == c[0].data.name.indexOf(".mtz") ? EXI.getDataAdapter({
                    onSuccess: d
                }).exi.offline.getFileContent(c[0].data.targetId) : d(this, "No text available");
            }
        }
    });
    return Ext.create("Ext.grid.Panel", {
        title: "Files",
        store: this.filesStore,
        selModel: b,
        cls: "border-grid",
        height: 400,
        columns: [ {
            text: "Name",
            dataIndex: "name",
            flex: 1
        } ]
    });
}, DimpleRunMainView.prototype.getMainPanel = function() {
    var a = Ext.create("Ext.data.Store", {
        fields: [ "key", "value" ]
    });
    return this.generalGrid = Ext.create("Ext.grid.Panel", {
        title: "General",
        store: a,
        layout: "fit",
        columns: [ {
            text: "Name",
            dataIndex: "name"
        }, {
            text: "Seniority",
            dataIndex: "seniority"
        } ],
        flex: 1
    }), {
        tabConfig: {
            title: "Dimple"
        },
        items: [ {
            xtype: "container",
            height: 700,
            cls: "border-grid",
            items: [ {
                xtype: "container",
                layout: "hbox",
                items: [ {
                    xtype: "container",
                    layout: "fit",
                    flex: .4,
                    margin: 5,
                    items: [ this.getFilesGrid(), {
                        html: "<br />"
                    }, {
                        html: '<div id="' + this.id + 'blobs";><div>'
                    } ]
                }, {
                    xtype: "container",
                    layout: "fit",
                    flex: .6,
                    margin: 5,
                    height: 400,
                    cls: "border-grid",
                    items: [ {
                        html: '<div id="' + this.id + 'display";><div>'
                    } ]
                } ]
            }, {
                xtype: "container",
                margin: 5,
                height: 210,
                layout: "fit",
                flex: 1,
                items: [ {
                    html: '<div style="height:200px"  id="' + this.id + 'snapshots";><div>'
                } ]
            } ]
        } ]
    };
}, DimpleRunMainView.prototype.loadBlobs = function(a) {
    var b = [], c = 0;
    for (c = 0; c < a.output.length; c++) "blob" == a.output[c].type && b.push(a.output[c]);
    var d = (document.createElement("div"), document.createElement("table")), e = document.createElement("tr");
    for (c = 0; c < b.length; c++) {
        var f = document.createElement("td"), g = document.createElement("img");
        g.setAttribute("src", EXI.getDataAdapter().exi.offline.getFileImage(b[c].targetId)), 
        g.setAttribute("height", "180px"), g.setAttribute("width", "180px"), g.setAttribute("hspace", "10"), 
        g.setAttribute("onclick", "window.open(this.src)"), f.appendChild(g), e.appendChild(f);
    }
    d.appendChild(e), document.getElementById(this.id + "snapshots").innerHTML = d.innerHTML;
}, DimpleRunMainView.prototype.loadFiles = function(a) {
    for (var b = [], c = 0; c < a.output.length; c++) "blob" != a.output[c].type && b.push(a.output[c]);
    this.filesStore.loadData(b);
}, DimpleRunMainView.prototype.loadMain = function(a) {
    if (console.log(a), null != a && null != a.jobs && a.jobs.length > 0) for (var b = 0; b < a.jobs.length; b++) this.loadBlobs(a.jobs[b]), 
    this.loadFiles(a.jobs[b]);
}, RunMainView.prototype.getPanel = MainView.prototype.getPanel, RunMainView.prototype.getOutputPanel = function() {
    return this.outputStore = Ext.create("Ext.data.Store", {
        fields: [ "name", "value", "type", "targetId", "tool", "i" ],
        groupField: "tool",
        sorters: [ {
            property: "i",
            direction: "DESC"
        } ]
    }), Ext.create("Ext.grid.Panel", {
        store: this.outputStore,
        cls: "border-grid",
        features: [ {
            ftype: "grouping"
        } ],
        columns: [ {
            text: "Tool",
            dataIndex: "tool",
            flex: 1,
            hidden: !0
        }, {
            text: "id",
            dataIndex: "i",
            flex: 1,
            hidden: !0
        }, {
            text: "Name",
            dataIndex: "name",
            flex: 1
        }, {
            text: "value",
            dataIndex: "value",
            flex: 1
        }, {
            text: "type",
            dataIndex: "type",
            flex: 1
        }, {
            text: "target",
            dataIndex: "targetId",
            flex: 1,
            hidden: !0
        }, {
            text: "",
            dataIndex: "targetId",
            flex: 1,
            renderer: function(a, b, c) {
                var d = EXI.credentialManager.getConnections()[0].exiUrl + "/file/" + c.data.targetId + "/download";
                return "<div><a style='color:blue;' href='" + d + "'>Download</a></div>";
            }
        } ]
    });
}, RunMainView.prototype.getGeneralContainerList = function(a) {
    var b = "<ul class='generalContainerRunList'>";
    return b = b + "<li>Name: " + a.name + "</li>", b = b + "<li>Status: " + a.status + "</li>", 
    b = b + "<li>" + a.creationDate + "</li>";
}, RunMainView.prototype.getGeneralContainer = function(a) {
    return {
        xtype: "panel",
        title: "General",
        margin: 10,
        border: 1,
        style: {
            borderColor: "gray",
            borderStyle: "solid",
            borderWidth: "1px"
        },
        items: [ {
            html: this.getGeneralContainerList(a),
            margin: "10 0 0 50"
        } ]
    };
}, RunMainView.prototype.getMainPanel = function() {}, RunMainView.prototype.getTabs = function() {
    return Ext.createWidget("tabpanel", {
        plain: !0,
        margin: "20 0 0 0",
        items: [ this.getMainPanel(), {
            tabConfig: {
                title: "Output Files"
            },
            items: [ {
                xtype: "container",
                layout: "fit",
                height: 700,
                padding: 20,
                cls: "border-grid",
                items: [ this.getOutputPanel() ]
            } ]
        } ]
    });
}, RunMainView.prototype.getContainer = function() {
    return Ext.create("Ext.container.Container", {
        layout: {
            type: "anchor"
        },
        defaults: {
            anchor: "100%",
            hideEmptyLabel: !1
        },
        margin: 5,
        bodyStyle: {
            "background-color": "#E6E6E6"
        },
        items: [ this.getTabs() ]
    });
}, RunMainView.prototype.loadMain = function(a) {}, RunMainView.prototype.load = function(a) {
    if (null != a) {
        this.panel.setTitle(a.name);
        for (var b = [], c = 0; c < a.jobs.length; c++) for (var d = 0; d < a.jobs[c].output.length; d++) a.jobs[c].output[d].tool = a.jobs[c].name + " " + a.jobs[c].version, 
        a.jobs[c].output[d].i = c, b.push(a.jobs[c].output[d]);
        this.outputStore.loadData(b);
    }
    this.loadMain(a);
}, function(a) {
    function b(a, b) {
        return a.s(b.getPath(!0, []), b, {
            block: c
        }, {});
    }
    function c(a, b) {
        return a.w("<div ><img class='lazy' src=").f(b.getPath(!0, [ "img" ]), b, "h").w(" style='height:150px;width:150px;' /></div><div style='text-align:center;'>").f(b.getPath(!0, [ "title" ]), b, "h").w("</div>");
    }
    return a.register("customsectiondatacollection", b), b.__dustBody = !0, c.__dustBody = !0, 
    b;
}(dust), function(a) {
    function b(a, b) {
        return a.w("<h2>").f(b.getPath(!0, [ "code" ]), b, "h").w("</h2>").s(b.getPath(!0, []), b, {
            block: c
        }, {});
    }
    function c(a, b) {
        return a.w("<br />Storage conditions: ").f(b.getPath(!0, [ "storageLocation" ]), b, "h").w("<br />").f(b.getPath(!0, [ "comments" ]), b, "h");
    }
    return a.register("parcelformsummary", b), b.__dustBody = !0, c.__dustBody = !0, 
    b;
}(dust), function(a) {
    function b(a, b) {
        return a.s(b.getPath(!0, []), b, {
            block: c
        }, {});
    }
    function c(a, b) {
        return a.w("<div>").h("eq", b, {
            block: d
        }, {
            key: b.get([ "status" ], !1),
            value: "Success"
        }, "h").h("eq", b, {
            block: e
        }, {
            key: b.get([ "status" ], !1),
            value: "Failure"
        }, "h").w("<a   class='result-autoprocessing-anchor' href=").f(b.getPath(!0, [ "url" ]), b, "h").w("> ").f(b.getPath(!0, [ "count" ]), b, "h").w(" x ").f(b.getPath(!0, [ "name" ]), b, "h").w("</a></div>");
    }
    function d(a, b) {
        return a.w("<div class='summary_datacollection_success'></div>");
    }
    function e(a, b) {
        return a.w("<div class='summary_datacollection_failed'></div>");
    }
    return a.register("resultsection.autoprocessing", b), b.__dustBody = !0, c.__dustBody = !0, 
    d.__dustBody = !0, e.__dustBody = !0, b;
}(dust), function(a) {
    function b(a, b) {
        return a.s(b.getPath(!0, []), b, {
            block: c
        }, {});
    }
    function c(a, b) {
        return a.w("<div>test").f(b.getPath(!0, [ "dataCollectionGroup", "ScreeningOutput_indexingSuccess" ]), b, "h").w("</div>");
    }
    return a.register("resultsection.screening", b), b.__dustBody = !0, c.__dustBody = !0, 
    b;
}(dust), function(a) {
    function b(a, b) {
        return a.w("<table>").s(b.getPath(!0, []), b, {
            block: c
        }, {}).w("</table>");
    }
    function c(a, b) {
        return a.w("<tr><td>").f(b.getPath(!0, [ "count" ]), b, "h").w("</td><td>").f(b.getPath(!0, [ "step" ]), b, "h").w("</td></tr>");
    }
    return a.register("test", b), b.__dustBody = !0, c.__dustBody = !0, b;
}(dust), function(a) {
    function b(a, b) {
        return a.s(b.getPath(!0, []), b, {
            block: c
        }, {}).w("<br />");
    }
    function c(a, b) {
        return a.w("<div>").s(b.getPath(!0, []), b, {
            block: d
        }, {}).w("</div>");
    }
    function d(a, b) {
        return a.h("eq", b, {
            block: e
        }, {
            key: b.get([ "status" ], !1),
            value: "Success"
        }, "h").h("eq", b, {
            block: f
        }, {
            key: b.get([ "status" ], !1),
            value: "Failure"
        }, "h").w("<a class='result-autoprocessing-anchor' href='#/mx/workflow/step/").f(b.getPath(!0, [ "workflowStepId" ]), b, "h").w("/main'>").f(b.getPath(!0, [ "name" ]), b, "h").w("</a>");
    }
    function e(a, b) {
        return a.w("<div class='summary_datacollection_success'></div>");
    }
    function f(a, b) {
        return a.w("<div class='summary_datacollection_failed'></div>");
    }
    return a.register("workflowstepsection", b), b.__dustBody = !0, c.__dustBody = !0, 
    d.__dustBody = !0, e.__dustBody = !0, f.__dustBody = !0, b;
}(dust);