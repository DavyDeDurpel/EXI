	<!DOCTYPE html>
<html>
<head>
<title>ISPyB logger</title>

			<script type="text/javascript" src="js/graphics_svg.js"></script>
			<script type="text/javascript" src="js/event.js"></script>
			<script type="text/javascript" src="js/dataadapter.js"></script>


			<script type="text/javascript" src="js/loggerEngine.js"></script>
			<script type="text/javascript" src="js/legendwidget.js"></script>
			<script type="text/javascript" src="js/loggerplotpanel.js"></script>
			<script type="text/javascript" src="js/timeplot.js"></script>
			<script type="text/javascript" src="js/coloradmin.js"></script>
			<script type="text/javascript" src="js/DatePanel.js"></script>
			<script type="text/javascript" src="js/moment.min.js"></script>




			<script type="text/javascript" src="js/dateselectorpanel.js"></script>
			
			<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
								   
			<link rel="stylesheet" type="text/css" href="http://pc593.embl.fr:8082/logger/dependencies/ext/resources/css/ext-all-gray.css">
    			<script type="text/javascript" src="http://pc593.embl.fr:8082/logger/dependencies/ext/ext-all.js"></script>

			<link rel="stylesheet" type="text/css" href="css/logger.css">

<script>
	
	Ext.onReady(function(){

			var type = null;
			var day = null;
			var experimentId = null;

			var maxTimeAllowed = null;
			
			if (Ext.urlDecode(window.location.href).limit != null){
				limit = Ext.urlDecode(window.location.href).limit;
			}

			if (Ext.urlDecode(window.location.href).type != null){
				type = Ext.urlDecode(window.location.href).type;
			}

			if (Ext.urlDecode(window.location.href).experimentId != null){
				experimentId = parseFloat(Ext.urlDecode(window.location.href).experimentId);
			}

			if (Ext.urlDecode(window.location.href).day != null){
				day = parseFloat(Ext.urlDecode(window.location.href).day);
			}

			if (Ext.urlDecode(window.location.href).maxTimeAllowed != null){
				maxTimeAllowed = parseFloat(Ext.urlDecode(window.location.href).maxTimeAllowed);
			}


			
			var width = 1200;
			var height = 300;

			var startTime = 0;
			var endTime = 24;

			if (Ext.urlDecode(window.location.href).startTime != null){
				startTime = parseFloat(Ext.urlDecode(window.location.href).startTime);
			}

			if (Ext.urlDecode(window.location.href).endTime != null){
				endTime = parseFloat(Ext.urlDecode(window.location.href).endTime);
			}


			var loggerPlotPanel = new LoggerPlotPanel({
				width : width,
				height : height,
				startTime : startTime,
				endTime : endTime,
				day : day,
				maxTimeAllowed : maxTimeAllowed
				
			});
			loggerPlotPanel.render("wsPanel");

			var timePlot = new TimePlot({
				width : width,
				height : 25,
				startTime : startTime,
				endTime : endTime
				
			});
			timePlot.render("timePanel");

			var dateSelectorPanel = new DateSelectorPanel();
			dateSelectorPanel.render("datePanel");

			dateSelectorPanel.onSelect.attach(function(sender, date){
				loggerPlotPanel.refresh([]);
				var dataAdapter = new DataAdapter();
				dataAdapter.onSuccess.attach(function(sender, data){
					loggerPlotPanel.refresh(data);
				});
				dataAdapter.load("BIOSAXS_WS_" + date + ".json");
			});

			
			var dataAdapter = new DataAdapter();
			dataAdapter.onSuccess.attach(function(sender, data){
				dateSelectorPanel.refresh(data);
			});
			dataAdapter.load("INDEX.json");
	});
	
</script>

    
<STYLE type="text/css">



 </STYLE>



</head>
<body   >
	<div style='border:black 1px solid;position:relative;height:350px;'>
		<div id="datePanel"  ></div>
 		<div id="mainPanel"  ></div>
		<div id="wsPanel"  class="wsPanel" ></div>
		<div id="timePanel"  class="timePanel" ></div>
	</div>
	<div id="legend"  class="legend" ></div>
 	
</body>

</html>
