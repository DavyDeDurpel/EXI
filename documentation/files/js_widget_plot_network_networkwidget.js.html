<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/widget/plot/network/networkwidget.js - EXI</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="EXI" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/AutoProcIntegrationGrid.html">AutoProcIntegrationGrid</a></li>
                                <li><a href="../classes/ManagerWelcomeMainView.html">ManagerWelcomeMainView</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js/widget/plot/network/networkwidget.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
function NetworkWidget(args) {
	this.id = &quot;NetworkViewer_&quot; + Math.random().toString().replace(&quot;.&quot;, &quot;_&quot;);

	this.label = true;
	if (args != null) {
		if (args.targetId != null) {
			this.targetId = args.targetId;
		}
		if (args.label != null) {
			this.label = args.label;
		}
	}

	this.onVertexOver = new Event(this);
	this.onVertexOut = new Event(this);
}

NetworkWidget.prototype.draw = function(dataset, formatter, layout) {

	this.graphCanvas = new GraphCanvas(this.id, document.getElementById(this.targetId), {
		&quot;labeled&quot; : this.label,
		&quot;multipleSelectionEnabled&quot; : false,
		&quot;draggingCanvasEnabled&quot; : false
	});
	this.graphCanvas.draw(dataset, formatter, layout);

	var _this = this;
	this.graphCanvas.onVertexOver.attach(function(sender, nodeId) {
		_this.onVertexOver.notify(nodeId);
	});

	this.graphCanvas.onVertexOut.attach(function(sender, nodeId) {
		_this.onVertexOut.notify(nodeId);
	});
};

/** SELECT VERTICES BY NAME * */
NetworkWidget.prototype.selectVertexByName = function(vertexName) {
	var vertices = this.getDataset().getVertexByName(vertexName);
	if (vertices != null) {
		for ( var nodeId in vertices) {
			if (vertices.hasOwnProperty(nodeId)) {
				var vertexId = vertices[nodeId].getId();
				this.selectVertexById(vertexId);
			}
		}
	}
};

NetworkWidget.prototype.selectVerticesByName = function(verticesName) {
	for ( var i = 0; i &lt; verticesName.length; i++) {
		this.selectVertexByName(verticesName[i]);
	}
};

/** SELECT VERTICES BY ID * */
NetworkWidget.prototype.selectVertexById = function(vertexId) {
	this.graphCanvas.selectNode(vertexId);
	this.blinkVertexById(vertexId);
};

NetworkWidget.prototype.selectVerticesById = function(verticesId) {
	for ( var i = 0; i &lt; verticesId.length; i++) {
		this.selectVertexById(verticesId[i]);
	}
};

/** VECINDARIO * */
NetworkWidget.prototype.selectNeighbourhood = function() {
	this.selectEdgesFromVertices();
	this.selectAdjacent();
};

/** DESELECT * */
NetworkWidget.prototype.deselectNodes = function() {
	this.graphCanvas.deselectNodes();
};

/** SELECT ALL NODES * */
NetworkWidget.prototype.selectAllNodes = function() {
	this.getGraphCanvas().selectAllNodes();
};

/** SELECT EVERYTHING * */
NetworkWidget.prototype.selectAll = function() {
	this.getGraphCanvas().selectAll();
};

/** SELECT ALL EDGES * */
NetworkWidget.prototype.selectAllEdges = function() {
	this.getGraphCanvas().selectAllEdges();
};

/** ZOOM * */
NetworkWidget.prototype.setScale = function(value) {
	this.graphCanvas.setScale(value);
};

NetworkWidget.prototype.getScale = function() {
	return this.graphCanvas.getScale(value);
};

/** SELECT ADJACENT VERTICES FROM SELECTED VERTICES * */
NetworkWidget.prototype.selectAdjacent = function() {
	var selectedVertices = this.getGraphCanvas().getSelectedVertices();
	var edges = [];
	for ( var i = 0; i &lt; selectedVertices.length; i++) {
		edges = edges.concat(this.getGraphCanvas().getDataset().getVertexById(selectedVertices[i]).getEdges());
	}
	var vertices = [];
	for ( i = 0; i &lt; edges.length; i++) {
		vertices.push(edges[i].getNodeSource().getId());
		vertices.push(edges[i].getNodeTarget().getId());
	}

	this.selectVerticesById(vertices);
};

/** SELECT EDGES FROM SELECTED VERTICES * */
NetworkWidget.prototype.selectEdgesFromVertices = function() {
	var selectedVertices = this.getGraphCanvas().getSelectedVertices();
	var edges = [];
	for ( var i = 0; i &lt; selectedVertices.length; i++) {
		edges = edges.concat(this.getGraphCanvas().getDataset().getVertexById(selectedVertices[i]).getEdges());
	}
	var edgesId = [];
	for (  i = 0; i &lt; edges.length; i++) {
		edgesId.push(edges[i].getId());
	}
	this.getGraphCanvas().selectEdges(edgesId);
};

/** BLINKING * */
NetworkWidget.prototype.blinkVertexById = function(vertexId) {
	this.graphCanvas.blinkVertexById(vertexId);
};

/** COMPONENTE CONEXA DE LOS NODOS SELECCIONADOS * */
NetworkWidget.prototype.selectConnectedComponent = function() {
	var elements = this.getConnectedComponent();
	this.selectVerticesById(elements.nodes);
	this.graphCanvas.selectEdges(elements.edges);
};

NetworkWidget.prototype.getConnectedComponent = function() {
	var nodosVisitados = {};
	var aristasVisitadas = {};
	var arrNodos = [];
	var arrAristas = [];
	var selectedGraphNodesId = this.getGraphCanvas().getSelectedVertices();
	for ( var i = 0; i &lt; selectedGraphNodesId.length; i++) {
		this.visitNode(selectedGraphNodesId[i], nodosVisitados, aristasVisitadas, arrNodos, arrAristas);
	}
	return {
		nodes : arrNodos,
		edges : arrAristas
	};
};

NetworkWidget.prototype.visitNode = function(nodeId, nodosVisitados, aristasVisitadas, arrNodos, arrAristas) {
	nodosVisitados[nodeId] = true;
	arrNodos.push(nodeId);
	var nodeEdges = this.getDataset().getVertexById(nodeId).getEdges();
	for ( var j = 0; j &lt; nodeEdges.length; j++) {
		var edge = nodeEdges[j];
		var edgeId = edge.getId();
		if (aristasVisitadas[edgeId] == null) {
			aristasVisitadas[edgeId] = true;
			arrAristas.push(edgeId);
			var nodeTargetId = edge.getNodeTarget().getId();
			if (nodosVisitados[nodeTargetId] == null) {
				this.visitNode(nodeTargetId, nodosVisitados, aristasVisitadas, arrNodos, arrAristas);
			}
			var nodeSourceId = edge.getNodeSource().getId();
			if (nodosVisitados[nodeSourceId] == null) {
				this.visitNode(nodeSourceId, nodosVisitados, aristasVisitadas, arrNodos, arrAristas);
			}
		}
	}
};

/** COLLAPSE SELECTED VERTICES * */
NetworkWidget.prototype.collapse = function() {
	var selectedVertices = this.getGraphCanvas().getSelectedVertices();
	var xMin = -Infinity;
	var xMax = Infinity;
	var yMin = -Infinity;
	var yMax = Infinity;

	for ( var i = 0; i &lt; selectedVertices.length; i++) {
		var vertex = this.getGraphCanvas().getLayout().getNodeById(selectedVertices[i]);
		if (xMin &lt; vertex.x) {
			xMin = vertex.x;
		}
		if (xMax &gt; vertex.x) {
			xMax = vertex.x;
		}
		if (yMin &lt; vertex.y) {
			yMin = vertex.y;
		}
		if (yMax &gt; vertex.y) {
			yMax = vertex.y;
		}
	}

	var centerX = xMin - xMax;
	var centerY = yMin - yMax;
	var radius = (xMax - xMin) / 4;

	var count = selectedVertices.length;
	var verticesCoordinates = [];

	for ( i = 0; i &lt; selectedVertices.length; i++) {
		x = centerX + radius * Math.sin(i * 2 * Math.PI / count);
		y = centerY + radius * Math.cos(i * 2 * Math.PI / count);
		verticesCoordinates.push({
			&#x27;x&#x27; : x,
			&#x27;y&#x27; : y
		});
	}

	for ( i = 0; i &lt; selectedVertices.length; i++) {
		this.getGraphCanvas().getLayout().getNodeById(selectedVertices[i]).setCoordinates(verticesCoordinates[i].x, verticesCoordinates[i].y);
	}
};

/** SETTER FONT SIZE * */
NetworkWidget.prototype.setVerticesFontSize = function(value) {
	for ( var nodeId in this.getDataset().getVertices()) {
		if (this.getDataset().getVertices().hasOwnProperty(nodeId)) {
			this.getFormatter().getVertexById(nodeId).getDefault().setFontSize(value);
		}
	}
};

/** GETTERS * */
NetworkWidget.prototype.getFormatter = function() {
	return this.getGraphCanvas().getFormatter();
};
NetworkWidget.prototype.getLayout = function() {
	return this.getGraphCanvas().getLayout();
};

NetworkWidget.prototype.getDataset = function() {
	return this.getGraphCanvas().getDataset();
};

NetworkWidget.prototype.getGraphCanvas = function() {
	return this.graphCanvas;
};

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
